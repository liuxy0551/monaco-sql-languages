var ofe=Object.defineProperty;var afe=(r,e,t)=>e in r?ofe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var P1=(r,e,t)=>(afe(r,typeof e!="symbol"?e+"":e,t),t);function rne(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function lfe(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var s3={exports:{}},iT={},o3={exports:{}},Or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kq;function ufe(){if(kq)return Or;kq=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(K){return K===null||typeof K!="object"?null:(K=h&&K[h]||K["@@iterator"],typeof K=="function"?K:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function E(K,de,ae){this.props=K,this.context=de,this.refs=S,this.updater=ae||v}E.prototype.isReactComponent={},E.prototype.setState=function(K,de){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,de,"setState")},E.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function k(){}k.prototype=E.prototype;function D(K,de,ae){this.props=K,this.context=de,this.refs=S,this.updater=ae||v}var O=D.prototype=new k;O.constructor=D,C(O,E.prototype),O.isPureReactComponent=!0;var H=Array.isArray,V=Object.prototype.hasOwnProperty,X={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function P(K,de,ae){var De,Me={},Qe=null,ct=null;if(de!=null)for(De in de.ref!==void 0&&(ct=de.ref),de.key!==void 0&&(Qe=""+de.key),de)V.call(de,De)&&!$.hasOwnProperty(De)&&(Me[De]=de[De]);var Rt=arguments.length-2;if(Rt===1)Me.children=ae;else if(1<Rt){for(var Ye=Array(Rt),gt=0;gt<Rt;gt++)Ye[gt]=arguments[gt+2];Me.children=Ye}if(K&&K.defaultProps)for(De in Rt=K.defaultProps,Rt)Me[De]===void 0&&(Me[De]=Rt[De]);return{$$typeof:r,type:K,key:Qe,ref:ct,props:Me,_owner:X.current}}function z(K,de){return{$$typeof:r,type:K.type,key:de,ref:K.ref,props:K.props,_owner:K._owner}}function M(K){return typeof K=="object"&&K!==null&&K.$$typeof===r}function W(K){var de={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ae){return de[ae]})}var I=/\/+/g;function R(K,de){return typeof K=="object"&&K!==null&&K.key!=null?W(""+K.key):de.toString(36)}function G(K,de,ae,De,Me){var Qe=typeof K;(Qe==="undefined"||Qe==="boolean")&&(K=null);var ct=!1;if(K===null)ct=!0;else switch(Qe){case"string":case"number":ct=!0;break;case"object":switch(K.$$typeof){case r:case e:ct=!0}}if(ct)return ct=K,Me=Me(ct),K=De===""?"."+R(ct,0):De,H(Me)?(ae="",K!=null&&(ae=K.replace(I,"$&/")+"/"),G(Me,de,ae,"",function(gt){return gt})):Me!=null&&(M(Me)&&(Me=z(Me,ae+(!Me.key||ct&&ct.key===Me.key?"":(""+Me.key).replace(I,"$&/")+"/")+K)),de.push(Me)),1;if(ct=0,De=De===""?".":De+":",H(K))for(var Rt=0;Rt<K.length;Rt++){Qe=K[Rt];var Ye=De+R(Qe,Rt);ct+=G(Qe,de,ae,Ye,Me)}else if(Ye=p(K),typeof Ye=="function")for(K=Ye.call(K),Rt=0;!(Qe=K.next()).done;)Qe=Qe.value,Ye=De+R(Qe,Rt++),ct+=G(Qe,de,ae,Ye,Me);else if(Qe==="object")throw de=String(K),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return ct}function Z(K,de,ae){if(K==null)return K;var De=[],Me=0;return G(K,De,"","",function(Qe){return de.call(ae,Qe,Me++)}),De}function ee(K){if(K._status===-1){var de=K._result;de=de(),de.then(function(ae){(K._status===0||K._status===-1)&&(K._status=1,K._result=ae)},function(ae){(K._status===0||K._status===-1)&&(K._status=2,K._result=ae)}),K._status===-1&&(K._status=0,K._result=de)}if(K._status===1)return K._result.default;throw K._result}var ne={current:null},ie={transition:null},te={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:ie,ReactCurrentOwner:X};function B(){throw Error("act(...) is not supported in production builds of React.")}return Or.Children={map:Z,forEach:function(K,de,ae){Z(K,function(){de.apply(this,arguments)},ae)},count:function(K){var de=0;return Z(K,function(){de++}),de},toArray:function(K){return Z(K,function(de){return de})||[]},only:function(K){if(!M(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Or.Component=E,Or.Fragment=t,Or.Profiler=i,Or.PureComponent=D,Or.StrictMode=n,Or.Suspense=l,Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Or.act=B,Or.cloneElement=function(K,de,ae){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var De=C({},K.props),Me=K.key,Qe=K.ref,ct=K._owner;if(de!=null){if(de.ref!==void 0&&(Qe=de.ref,ct=X.current),de.key!==void 0&&(Me=""+de.key),K.type&&K.type.defaultProps)var Rt=K.type.defaultProps;for(Ye in de)V.call(de,Ye)&&!$.hasOwnProperty(Ye)&&(De[Ye]=de[Ye]===void 0&&Rt!==void 0?Rt[Ye]:de[Ye])}var Ye=arguments.length-2;if(Ye===1)De.children=ae;else if(1<Ye){Rt=Array(Ye);for(var gt=0;gt<Ye;gt++)Rt[gt]=arguments[gt+2];De.children=Rt}return{$$typeof:r,type:K.type,key:Me,ref:Qe,props:De,_owner:ct}},Or.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:s,_context:K},K.Consumer=K},Or.createElement=P,Or.createFactory=function(K){var de=P.bind(null,K);return de.type=K,de},Or.createRef=function(){return{current:null}},Or.forwardRef=function(K){return{$$typeof:a,render:K}},Or.isValidElement=M,Or.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:ee}},Or.memo=function(K,de){return{$$typeof:u,type:K,compare:de===void 0?null:de}},Or.startTransition=function(K){var de=ie.transition;ie.transition={};try{K()}finally{ie.transition=de}},Or.unstable_act=B,Or.useCallback=function(K,de){return ne.current.useCallback(K,de)},Or.useContext=function(K){return ne.current.useContext(K)},Or.useDebugValue=function(){},Or.useDeferredValue=function(K){return ne.current.useDeferredValue(K)},Or.useEffect=function(K,de){return ne.current.useEffect(K,de)},Or.useId=function(){return ne.current.useId()},Or.useImperativeHandle=function(K,de,ae){return ne.current.useImperativeHandle(K,de,ae)},Or.useInsertionEffect=function(K,de){return ne.current.useInsertionEffect(K,de)},Or.useLayoutEffect=function(K,de){return ne.current.useLayoutEffect(K,de)},Or.useMemo=function(K,de){return ne.current.useMemo(K,de)},Or.useReducer=function(K,de,ae){return ne.current.useReducer(K,de,ae)},Or.useRef=function(K){return ne.current.useRef(K)},Or.useState=function(K){return ne.current.useState(K)},Or.useSyncExternalStore=function(K,de,ae){return ne.current.useSyncExternalStore(K,de,ae)},Or.useTransition=function(){return ne.current.useTransition()},Or.version="18.3.1",Or}var Nq;function Gx(){return Nq||(Nq=1,o3.exports=ufe()),o3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aq;function cfe(){if(Aq)return iT;Aq=1;var r=Gx(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var d,h={},p=null,v=null;u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(v=l.ref);for(d in l)n.call(l,d)&&!s.hasOwnProperty(d)&&(h[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)h[d]===void 0&&(h[d]=l[d]);return{$$typeof:e,type:a,key:p,ref:v,props:h,_owner:i.current}}return iT.Fragment=t,iT.jsx=o,iT.jsxs=o,iT}var Oq;function dfe(){return Oq||(Oq=1,s3.exports=cfe()),s3.exports}var Bg=dfe(),we=Gx();const pe=Rm(we),hfe=rne({__proto__:null,default:pe},[we]);var J2={},a3={exports:{}},ph={},l3={exports:{}},u3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mq;function ffe(){return Mq||(Mq=1,function(r){function e(ie,te){var B=ie.length;ie.push(te);e:for(;0<B;){var K=B-1>>>1,de=ie[K];if(0<i(de,te))ie[K]=te,ie[B]=de,B=K;else break e}}function t(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var te=ie[0],B=ie.pop();if(B!==te){ie[0]=B;e:for(var K=0,de=ie.length,ae=de>>>1;K<ae;){var De=2*(K+1)-1,Me=ie[De],Qe=De+1,ct=ie[Qe];if(0>i(Me,B))Qe<de&&0>i(ct,Me)?(ie[K]=ct,ie[Qe]=B,K=Qe):(ie[K]=Me,ie[De]=B,K=De);else if(Qe<de&&0>i(ct,B))ie[K]=ct,ie[Qe]=B,K=Qe;else break e}}return te}function i(ie,te){var B=ie.sortIndex-te.sortIndex;return B!==0?B:ie.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,v=!1,C=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(ie){for(var te=t(u);te!==null;){if(te.callback===null)n(u);else if(te.startTime<=ie)n(u),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(u)}}function H(ie){if(S=!1,O(ie),!C)if(t(l)!==null)C=!0,ee(V);else{var te=t(u);te!==null&&ne(H,te.startTime-ie)}}function V(ie,te){C=!1,S&&(S=!1,k(P),P=-1),v=!0;var B=p;try{for(O(te),h=t(l);h!==null&&(!(h.expirationTime>te)||ie&&!W());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var de=K(h.expirationTime<=te);te=r.unstable_now(),typeof de=="function"?h.callback=de:h===t(l)&&n(l),O(te)}else n(l);h=t(l)}if(h!==null)var ae=!0;else{var De=t(u);De!==null&&ne(H,De.startTime-te),ae=!1}return ae}finally{h=null,p=B,v=!1}}var X=!1,$=null,P=-1,z=5,M=-1;function W(){return!(r.unstable_now()-M<z)}function I(){if($!==null){var ie=r.unstable_now();M=ie;var te=!0;try{te=$(!0,ie)}finally{te?R():(X=!1,$=null)}}else X=!1}var R;if(typeof D=="function")R=function(){D(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=I,R=function(){Z.postMessage(null)}}else R=function(){E(I,0)};function ee(ie){$=ie,X||(X=!0,R())}function ne(ie,te){P=E(function(){ie(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){C||v||(C=!0,ee(V))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(ie){switch(p){case 1:case 2:case 3:var te=3;break;default:te=p}var B=p;p=te;try{return ie()}finally{p=B}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,te){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var B=p;p=ie;try{return te()}finally{p=B}},r.unstable_scheduleCallback=function(ie,te,B){var K=r.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,ie){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=B+de,ie={id:d++,callback:te,priorityLevel:ie,startTime:B,expirationTime:de,sortIndex:-1},B>K?(ie.sortIndex=B,e(u,ie),t(l)===null&&ie===t(u)&&(S?(k(P),P=-1):S=!0,ne(H,B-K))):(ie.sortIndex=de,e(l,ie),C||v||(C=!0,ee(V))),ie},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(ie){var te=p;return function(){var B=p;p=te;try{return ie.apply(this,arguments)}finally{p=B}}}}(u3)),u3}var Rq;function gfe(){return Rq||(Rq=1,l3.exports=ffe()),l3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pq;function pfe(){if(Pq)return ph;Pq=1;var r=Gx(),e=gfe();function t(g){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+g,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(g,m){o(g,m),o(g+"Capture",m)}function o(g,m){for(i[g]=m,g=0;g<m.length;g++)n.add(m[g])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function p(g){return l.call(h,g)?!0:l.call(d,g)?!1:u.test(g)?h[g]=!0:(d[g]=!0,!1)}function v(g,m,w,T){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return T?!1:w!==null?!w.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function C(g,m,w,T){if(m===null||typeof m>"u"||v(g,m,w,T))return!0;if(T)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function S(g,m,w,T,U,Q,he){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=T,this.attributeNamespace=U,this.mustUseProperty=w,this.propertyName=g,this.type=m,this.sanitizeURL=Q,this.removeEmptyString=he}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){E[g]=new S(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var m=g[0];E[m]=new S(m,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){E[g]=new S(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){E[g]=new S(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){E[g]=new S(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){E[g]=new S(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){E[g]=new S(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){E[g]=new S(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){E[g]=new S(g,5,!1,g.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function D(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var m=g.replace(k,D);E[m]=new S(m,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var m=g.replace(k,D);E[m]=new S(m,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var m=g.replace(k,D);E[m]=new S(m,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){E[g]=new S(g,1,!1,g.toLowerCase(),null,!1,!1)}),E.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){E[g]=new S(g,1,!1,g.toLowerCase(),null,!0,!0)});function O(g,m,w,T){var U=E.hasOwnProperty(m)?E[m]:null;(U!==null?U.type!==0:T||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(C(m,w,U,T)&&(w=null),T||U===null?p(m)&&(w===null?g.removeAttribute(m):g.setAttribute(m,""+w)):U.mustUseProperty?g[U.propertyName]=w===null?U.type===3?!1:"":w:(m=U.attributeName,T=U.attributeNamespace,w===null?g.removeAttribute(m):(U=U.type,w=U===3||U===4&&w===!0?"":""+w,T?g.setAttributeNS(T,m,w):g.setAttribute(m,w))))}var H=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),X=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),W=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),ie=Symbol.iterator;function te(g){return g===null||typeof g!="object"?null:(g=ie&&g[ie]||g["@@iterator"],typeof g=="function"?g:null)}var B=Object.assign,K;function de(g){if(K===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);K=m&&m[1]||""}return`
`+K+g}var ae=!1;function De(g,m){if(!g||ae)return"";ae=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(dt){var T=dt}Reflect.construct(g,[],m)}else{try{m.call()}catch(dt){T=dt}g.call(m.prototype)}else{try{throw Error()}catch(dt){T=dt}g()}}catch(dt){if(dt&&T&&typeof dt.stack=="string"){for(var U=dt.stack.split(`
`),Q=T.stack.split(`
`),he=U.length-1,ke=Q.length-1;1<=he&&0<=ke&&U[he]!==Q[ke];)ke--;for(;1<=he&&0<=ke;he--,ke--)if(U[he]!==Q[ke]){if(he!==1||ke!==1)do if(he--,ke--,0>ke||U[he]!==Q[ke]){var He=`
`+U[he].replace(" at new "," at ");return g.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",g.displayName)),He}while(1<=he&&0<=ke);break}}}finally{ae=!1,Error.prepareStackTrace=w}return(g=g?g.displayName||g.name:"")?de(g):""}function Me(g){switch(g.tag){case 5:return de(g.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return g=De(g.type,!1),g;case 11:return g=De(g.type.render,!1),g;case 1:return g=De(g.type,!0),g;default:return""}}function Qe(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case $:return"Fragment";case X:return"Portal";case z:return"Profiler";case P:return"StrictMode";case R:return"Suspense";case G:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case W:return(g.displayName||"Context")+".Consumer";case M:return(g._context.displayName||"Context")+".Provider";case I:var m=g.render;return g=g.displayName,g||(g=m.displayName||m.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case Z:return m=g.displayName||null,m!==null?m:Qe(g.type)||"Memo";case ee:m=g._payload,g=g._init;try{return Qe(g(m))}catch{}}return null}function ct(g){var m=g.type;switch(g.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=m.render,g=g.displayName||g.name||"",m.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qe(m);case 8:return m===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Rt(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Ye(g){var m=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function gt(g){var m=Ye(g)?"checked":"value",w=Object.getOwnPropertyDescriptor(g.constructor.prototype,m),T=""+g[m];if(!g.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var U=w.get,Q=w.set;return Object.defineProperty(g,m,{configurable:!0,get:function(){return U.call(this)},set:function(he){T=""+he,Q.call(this,he)}}),Object.defineProperty(g,m,{enumerable:w.enumerable}),{getValue:function(){return T},setValue:function(he){T=""+he},stopTracking:function(){g._valueTracker=null,delete g[m]}}}}function Ut(g){g._valueTracker||(g._valueTracker=gt(g))}function _t(g){if(!g)return!1;var m=g._valueTracker;if(!m)return!0;var w=m.getValue(),T="";return g&&(T=Ye(g)?g.checked?"true":"false":g.value),g=T,g!==w?(m.setValue(g),!0):!1}function sn(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function rn(g,m){var w=m.checked;return B({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??g._wrapperState.initialChecked})}function on(g,m){var w=m.defaultValue==null?"":m.defaultValue,T=m.checked!=null?m.checked:m.defaultChecked;w=Rt(m.value!=null?m.value:w),g._wrapperState={initialChecked:T,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function qn(g,m){m=m.checked,m!=null&&O(g,"checked",m,!1)}function Ft(g,m){qn(g,m);var w=Rt(m.value),T=m.type;if(w!=null)T==="number"?(w===0&&g.value===""||g.value!=w)&&(g.value=""+w):g.value!==""+w&&(g.value=""+w);else if(T==="submit"||T==="reset"){g.removeAttribute("value");return}m.hasOwnProperty("value")?At(g,m.type,w):m.hasOwnProperty("defaultValue")&&At(g,m.type,Rt(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(g.defaultChecked=!!m.defaultChecked)}function Pt(g,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var T=m.type;if(!(T!=="submit"&&T!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+g._wrapperState.initialValue,w||m===g.value||(g.value=m),g.defaultValue=m}w=g.name,w!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,w!==""&&(g.name=w)}function At(g,m,w){(m!=="number"||sn(g.ownerDocument)!==g)&&(w==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+w&&(g.defaultValue=""+w))}var an=Array.isArray;function ot(g,m,w,T){if(g=g.options,m){m={};for(var U=0;U<w.length;U++)m["$"+w[U]]=!0;for(w=0;w<g.length;w++)U=m.hasOwnProperty("$"+g[w].value),g[w].selected!==U&&(g[w].selected=U),U&&T&&(g[w].defaultSelected=!0)}else{for(w=""+Rt(w),m=null,U=0;U<g.length;U++){if(g[U].value===w){g[U].selected=!0,T&&(g[U].defaultSelected=!0);return}m!==null||g[U].disabled||(m=g[U])}m!==null&&(m.selected=!0)}}function Mt(g,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return B({},m,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function cn(g,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(t(92));if(an(w)){if(1<w.length)throw Error(t(93));w=w[0]}m=w}m==null&&(m=""),w=m}g._wrapperState={initialValue:Rt(w)}}function bn(g,m){var w=Rt(m.value),T=Rt(m.defaultValue);w!=null&&(w=""+w,w!==g.value&&(g.value=w),m.defaultValue==null&&g.defaultValue!==w&&(g.defaultValue=w)),T!=null&&(g.defaultValue=""+T)}function Pe(g){var m=g.textContent;m===g._wrapperState.initialValue&&m!==""&&m!==null&&(g.value=m)}function at(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rt(g,m){return g==null||g==="http://www.w3.org/1999/xhtml"?at(m):g==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var yt,ln=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,T,U){MSApp.execUnsafeLocalFunction(function(){return g(m,w,T,U)})}:g}(function(g,m){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=m;else{for(yt=yt||document.createElement("div"),yt.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=yt.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;m.firstChild;)g.appendChild(m.firstChild)}});function Rn(g,m){if(m){var w=g.firstChild;if(w&&w===g.lastChild&&w.nodeType===3){w.nodeValue=m;return}}g.textContent=m}var Xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tn=["Webkit","ms","Moz","O"];Object.keys(Xt).forEach(function(g){Tn.forEach(function(m){m=m+g.charAt(0).toUpperCase()+g.substring(1),Xt[m]=Xt[g]})});function Tt(g,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||Xt.hasOwnProperty(g)&&Xt[g]?(""+m).trim():m+"px"}function tn(g,m){g=g.style;for(var w in m)if(m.hasOwnProperty(w)){var T=w.indexOf("--")===0,U=Tt(w,m[w],T);w==="float"&&(w="cssFloat"),T?g.setProperty(w,U):g[w]=U}}var Qn=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oi(g,m){if(m){if(Qn[g]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,g));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function lt(g,m){if(g.indexOf("-")===-1)return typeof m.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bs=null;function fi(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Ai=null,bs=null,Kn=null;function Pr(g){if(g=Wi(g)){if(typeof Ai!="function")throw Error(t(280));var m=g.stateNode;m&&(m=n_(m),Ai(g.stateNode,g.type,m))}}function Sa(g){bs?Kn?Kn.push(g):Kn=[g]:bs=g}function Oi(){if(bs){var g=bs,m=Kn;if(Kn=bs=null,Pr(g),m)for(g=0;g<m.length;g++)Pr(m[g])}}function vt(g,m){return g(m)}function vo(){}var Ge=!1;function Ve(g,m,w){if(Ge)return g(m,w);Ge=!0;try{return vt(g,m,w)}finally{Ge=!1,(bs!==null||Kn!==null)&&(vo(),Oi())}}function Ze(g,m){var w=g.stateNode;if(w===null)return null;var T=n_(w);if(T===null)return null;w=T[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(g=g.type,T=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!T;break e;default:g=!1}if(g)return null;if(w&&typeof w!="function")throw Error(t(231,m,typeof w));return w}var ge=!1;if(a)try{var me={};Object.defineProperty(me,"passive",{get:function(){ge=!0}}),window.addEventListener("test",me,me),window.removeEventListener("test",me,me)}catch{ge=!1}function Le(g,m,w,T,U,Q,he,ke,He){var dt=Array.prototype.slice.call(arguments,3);try{m.apply(w,dt)}catch($t){this.onError($t)}}var oe=!1,Te=null,ut=!1,et=null,Ot={onError:function(g){oe=!0,Te=g}};function Dn(g,m,w,T,U,Q,he,ke,He){oe=!1,Te=null,Le.apply(Ot,arguments)}function N(g,m,w,T,U,Q,he,ke,He){if(Dn.apply(this,arguments),oe){if(oe){var dt=Te;oe=!1,Te=null}else throw Error(t(198));ut||(ut=!0,et=dt)}}function q(g){var m=g,w=g;if(g.alternate)for(;m.return;)m=m.return;else{g=m;do m=g,m.flags&4098&&(w=m.return),g=m.return;while(g)}return m.tag===3?w:null}function le(g){if(g.tag===13){var m=g.memoizedState;if(m===null&&(g=g.alternate,g!==null&&(m=g.memoizedState)),m!==null)return m.dehydrated}return null}function fe(g){if(q(g)!==g)throw Error(t(188))}function xe(g){var m=g.alternate;if(!m){if(m=q(g),m===null)throw Error(t(188));return m!==g?null:g}for(var w=g,T=m;;){var U=w.return;if(U===null)break;var Q=U.alternate;if(Q===null){if(T=U.return,T!==null){w=T;continue}break}if(U.child===Q.child){for(Q=U.child;Q;){if(Q===w)return fe(U),g;if(Q===T)return fe(U),m;Q=Q.sibling}throw Error(t(188))}if(w.return!==T.return)w=U,T=Q;else{for(var he=!1,ke=U.child;ke;){if(ke===w){he=!0,w=U,T=Q;break}if(ke===T){he=!0,T=U,w=Q;break}ke=ke.sibling}if(!he){for(ke=Q.child;ke;){if(ke===w){he=!0,w=Q,T=U;break}if(ke===T){he=!0,T=Q,w=U;break}ke=ke.sibling}if(!he)throw Error(t(189))}}if(w.alternate!==T)throw Error(t(190))}if(w.tag!==3)throw Error(t(188));return w.stateNode.current===w?g:m}function be(g){return g=xe(g),g!==null?qe(g):null}function qe(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var m=qe(g);if(m!==null)return m;g=g.sibling}return null}var it=e.unstable_scheduleCallback,wt=e.unstable_cancelCallback,kt=e.unstable_shouldYield,fn=e.unstable_requestPaint,Yt=e.unstable_now,pn=e.unstable_getCurrentPriorityLevel,Zt=e.unstable_ImmediatePriority,Ui=e.unstable_UserBlockingPriority,_i=e.unstable_NormalPriority,jr=e.unstable_LowPriority,pr=e.unstable_IdlePriority,Ka=null,bo=null;function tp(g){if(bo&&typeof bo.onCommitFiberRoot=="function")try{bo.onCommitFiberRoot(Ka,g,void 0,(g.current.flags&128)===128)}catch{}}var Vu=Math.clz32?Math.clz32:n0,e0=Math.log,t0=Math.LN2;function n0(g){return g>>>=0,g===0?32:31-(e0(g)/t0|0)|0}var Kd=64,np=4194304;function Rh(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function fc(g,m){var w=g.pendingLanes;if(w===0)return 0;var T=0,U=g.suspendedLanes,Q=g.pingedLanes,he=w&268435455;if(he!==0){var ke=he&~U;ke!==0?T=Rh(ke):(Q&=he,Q!==0&&(T=Rh(Q)))}else he=w&~U,he!==0?T=Rh(he):Q!==0&&(T=Rh(Q));if(T===0)return 0;if(m!==0&&m!==T&&!(m&U)&&(U=T&-T,Q=m&-m,U>=Q||U===16&&(Q&4194240)!==0))return m;if(T&4&&(T|=w&16),m=g.entangledLanes,m!==0)for(g=g.entanglements,m&=T;0<m;)w=31-Vu(m),U=1<<w,T|=g[w],m&=~U;return T}function i0(g,m){switch(g){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ny(g,m){for(var w=g.suspendedLanes,T=g.pingedLanes,U=g.expirationTimes,Q=g.pendingLanes;0<Q;){var he=31-Vu(Q),ke=1<<he,He=U[he];He===-1?(!(ke&w)||ke&T)&&(U[he]=i0(ke,m)):He<=m&&(g.expiredLanes|=ke),Q&=~ke}}function ip(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Hm(){var g=Kd;return Kd<<=1,!(Kd&4194240)&&(Kd=64),g}function gc(g){for(var m=[],w=0;31>w;w++)m.push(g);return m}function rp(g,m,w){g.pendingLanes|=m,m!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,m=31-Vu(m),g[m]=w}function Hf(g,m){var w=g.pendingLanes&~m;g.pendingLanes=m,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=m,g.mutableReadLanes&=m,g.entangledLanes&=m,m=g.entanglements;var T=g.eventTimes;for(g=g.expirationTimes;0<w;){var U=31-Vu(w),Q=1<<U;m[U]=0,T[U]=-1,g[U]=-1,w&=~Q}}function Ph(g,m){var w=g.entangledLanes|=m;for(g=g.entanglements;w;){var T=31-Vu(w),U=1<<T;U&m|g[T]&m&&(g[T]|=m),w&=~U}}var Er=0;function uu(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var sp,zf,r0,zm,Um,op=!1,Uf=[],Yc=null,Zc=null,Xc=null,Qc=new Map,ap=new Map,Jc=[],$m="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s0(g,m){switch(g){case"focusin":case"focusout":Yc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":Xc=null;break;case"pointerover":case"pointerout":Qc.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":ap.delete(m.pointerId)}}function ed(g,m,w,T,U,Q){return g===null||g.nativeEvent!==Q?(g={blockedOn:m,domEventName:w,eventSystemFlags:T,nativeEvent:Q,targetContainers:[U]},m!==null&&(m=Wi(m),m!==null&&zf(m)),g):(g.eventSystemFlags|=T,m=g.targetContainers,U!==null&&m.indexOf(U)===-1&&m.push(U),g)}function Kb(g,m,w,T,U){switch(m){case"focusin":return Yc=ed(Yc,g,m,w,T,U),!0;case"dragenter":return Zc=ed(Zc,g,m,w,T,U),!0;case"mouseover":return Xc=ed(Xc,g,m,w,T,U),!0;case"pointerover":var Q=U.pointerId;return Qc.set(Q,ed(Qc.get(Q)||null,g,m,w,T,U)),!0;case"gotpointercapture":return Q=U.pointerId,ap.set(Q,ed(ap.get(Q)||null,g,m,w,T,U)),!0}return!1}function o0(g){var m=Br(g.target);if(m!==null){var w=q(m);if(w!==null){if(m=w.tag,m===13){if(m=le(w),m!==null){g.blockedOn=m,Um(g.priority,function(){r0(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){g.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}g.blockedOn=null}function $f(g){if(g.blockedOn!==null)return!1;for(var m=g.targetContainers;0<m.length;){var w=jf(g.domEventName,g.eventSystemFlags,m[0],g.nativeEvent);if(w===null){w=g.nativeEvent;var T=new w.constructor(w.type,w);Bs=T,w.target.dispatchEvent(T),Bs=null}else return m=Wi(w),m!==null&&zf(m),g.blockedOn=w,!1;m.shift()}return!0}function Gb(g,m,w){$f(g)&&w.delete(m)}function Yb(){op=!1,Yc!==null&&$f(Yc)&&(Yc=null),Zc!==null&&$f(Zc)&&(Zc=null),Xc!==null&&$f(Xc)&&(Xc=null),Qc.forEach(Gb),ap.forEach(Gb)}function ai(g,m){g.blockedOn===m&&(g.blockedOn=null,op||(op=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yb)))}function ei(g){function m(U){return ai(U,g)}if(0<Uf.length){ai(Uf[0],g);for(var w=1;w<Uf.length;w++){var T=Uf[w];T.blockedOn===g&&(T.blockedOn=null)}}for(Yc!==null&&ai(Yc,g),Zc!==null&&ai(Zc,g),Xc!==null&&ai(Xc,g),Qc.forEach(m),ap.forEach(m),w=0;w<Jc.length;w++)T=Jc[w],T.blockedOn===g&&(T.blockedOn=null);for(;0<Jc.length&&(w=Jc[0],w.blockedOn===null);)o0(w),w.blockedOn===null&&Jc.shift()}var Hu=H.ReactCurrentBatchConfig,lp=!0;function Zb(g,m,w,T){var U=Er,Q=Hu.transition;Hu.transition=null;try{Er=1,jm(g,m,w,T)}finally{Er=U,Hu.transition=Q}}function iy(g,m,w,T){var U=Er,Q=Hu.transition;Hu.transition=null;try{Er=4,jm(g,m,w,T)}finally{Er=U,Hu.transition=Q}}function jm(g,m,w,T){if(lp){var U=jf(g,m,w,T);if(U===null)g0(g,m,T,up,w),s0(g,T);else if(Kb(U,g,m,w,T))T.stopPropagation();else if(s0(g,T),m&4&&-1<$m.indexOf(g)){for(;U!==null;){var Q=Wi(U);if(Q!==null&&sp(Q),Q=jf(g,m,w,T),Q===null&&g0(g,m,T,up,w),Q===U)break;U=Q}U!==null&&T.stopPropagation()}else g0(g,m,T,null,w)}}var up=null;function jf(g,m,w,T){if(up=null,g=fi(T),g=Br(g),g!==null)if(m=q(g),m===null)g=null;else if(w=m.tag,w===13){if(g=le(m),g!==null)return g;g=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;g=null}else m!==g&&(g=null);return up=g,null}function a0(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pn()){case Zt:return 1;case Ui:return 4;case _i:case jr:return 16;case pr:return 536870912;default:return 16}default:return 16}}var Gi=null,Fh=null,La=null;function cp(){if(La)return La;var g,m=Fh,w=m.length,T,U="value"in Gi?Gi.value:Gi.textContent,Q=U.length;for(g=0;g<w&&m[g]===U[g];g++);var he=w-g;for(T=1;T<=he&&m[w-T]===U[Q-T];T++);return La=U.slice(g,1<T?1-T:void 0)}function Gd(g){var m=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&m===13&&(g=13)):g=m,g===10&&(g=13),32<=g||g===13?g:0}function Cs(){return!0}function qm(){return!1}function Ga(g){function m(w,T,U,Q,he){this._reactName=w,this._targetInst=U,this.type=T,this.nativeEvent=Q,this.target=he,this.currentTarget=null;for(var ke in g)g.hasOwnProperty(ke)&&(w=g[ke],this[ke]=w?w(Q):Q[ke]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?Cs:qm,this.isPropagationStopped=qm,this}return B(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),m}var pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dp=Ga(pc),Bh=B({},pc,{view:0,detail:0}),l0=Ga(Bh),hs,u0,gi,qr=B({},Bh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==gi&&(gi&&g.type==="mousemove"?(hs=g.screenX-gi.screenX,u0=g.screenY-gi.screenY):u0=hs=0,gi=g),hs)},movementY:function(g){return"movementY"in g?g.movementY:u0}}),Km=Ga(qr),Ya=B({},qr,{dataTransfer:0}),Wh=Ga(Ya),hp=B({},Bh,{relatedTarget:0}),vi=Ga(hp),Za=B({},pc,{animationName:0,elapsedTime:0,pseudoElement:0}),qf=Ga(Za),ry=B({},pc,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),ao=Ga(ry),c0=B({},pc,{data:0}),Yd=Ga(c0),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(g){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(g):(g=Yo[g])?!!m[g]:!1}function Gm(){return cu}var Ym=B({},Bh,{key:function(g){if(g.key){var m=Xb[g.key]||g.key;if(m!=="Unidentified")return m}return g.type==="keypress"?(g=Gd(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?fp[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(g){return g.type==="keypress"?Gd(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Gd(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),Zm=Ga(Ym),Kf=B({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vh=Ga(Kf),Xa=B({},Bh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),sy=Ga(Xa),Ea=B({},pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),gp=Ga(Ea),Qb=B({},qr,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),mc=Ga(Qb),ts=[9,13,27,32],td=a&&"CompositionEvent"in window,cr=null;a&&"documentMode"in document&&(cr=document.documentMode);var _c=a&&"TextEvent"in window&&!cr,Gf=a&&(!td||cr&&8<cr&&11>=cr),Jb=String.fromCharCode(32),Xm=!1;function e1(g,m){switch(g){case"keyup":return ts.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t1(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Yf=!1;function du(g,m){switch(g){case"compositionend":return t1(m);case"keypress":return m.which!==32?null:(Xm=!0,Jb);case"textInput":return g=m.data,g===Jb&&Xm?null:g;default:return null}}function Qm(g,m){if(Yf)return g==="compositionend"||!td&&e1(g,m)?(g=cp(),La=Fh=Gi=null,Yf=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Gf&&m.locale!=="ko"?null:m.data;default:return null}}var Zf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(g){var m=g&&g.nodeName&&g.nodeName.toLowerCase();return m==="input"?!!Zf[g.type]:m==="textarea"}function pp(g,m,w,T){Sa(T),m=zh(m,"onChange"),0<m.length&&(w=new dp("onChange","change",null,w,T),g.push({event:w,listeners:m}))}var Co=null,Fl=null;function d0(g){Cp(g,0)}function mp(g){var m=En(g);if(_t(m))return g}function oy(g,m){if(g==="change")return m}var fl=!1;if(a){var Ns;if(a){var _p="oninput"in document;if(!_p){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),_p=typeof h0.oninput=="function"}Ns=_p}else Ns=!1;fl=Ns&&(!document.documentMode||9<document.documentMode)}function gl(){Co&&(Co.detachEvent("onpropertychange",Jm),Fl=Co=null)}function Jm(g){if(g.propertyName==="value"&&mp(Fl)){var m=[];pp(m,Fl,g,fi(g)),Ve(d0,m)}}function vp(g,m,w){g==="focusin"?(gl(),Co=m,Fl=w,Co.attachEvent("onpropertychange",Jm)):g==="focusout"&&gl()}function n1(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return mp(Fl)}function hu(g,m){if(g==="click")return mp(m)}function _e(g,m){if(g==="input"||g==="change")return mp(m)}function Ne(g,m){return g===m&&(g!==0||1/g===1/m)||g!==g&&m!==m}var Ee=typeof Object.is=="function"?Object.is:Ne;function bt(g,m){if(Ee(g,m))return!0;if(typeof g!="object"||g===null||typeof m!="object"||m===null)return!1;var w=Object.keys(g),T=Object.keys(m);if(w.length!==T.length)return!1;for(T=0;T<w.length;T++){var U=w[T];if(!l.call(m,U)||!Ee(g[U],m[U]))return!1}return!0}function dn(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function Wn(g,m){var w=dn(g);g=0;for(var T;w;){if(w.nodeType===3){if(T=g+w.textContent.length,g<=m&&T>=m)return{node:w,offset:m-g};g=T}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=dn(w)}}function ir(g,m){return g&&m?g===m?!0:g&&g.nodeType===3?!1:m&&m.nodeType===3?ir(g,m.parentNode):"contains"in g?g.contains(m):g.compareDocumentPosition?!!(g.compareDocumentPosition(m)&16):!1:!1}function li(){for(var g=window,m=sn();m instanceof g.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)g=m.contentWindow;else break;m=sn(g.document)}return m}function nd(g){var m=g&&g.nodeName&&g.nodeName.toLowerCase();return m&&(m==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||m==="textarea"||g.contentEditable==="true")}function i1(g){var m=li(),w=g.focusedElem,T=g.selectionRange;if(m!==w&&w&&w.ownerDocument&&ir(w.ownerDocument.documentElement,w)){if(T!==null&&nd(w)){if(m=T.start,g=T.end,g===void 0&&(g=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(g,w.value.length);else if(g=(m=w.ownerDocument||document)&&m.defaultView||window,g.getSelection){g=g.getSelection();var U=w.textContent.length,Q=Math.min(T.start,U);T=T.end===void 0?Q:Math.min(T.end,U),!g.extend&&Q>T&&(U=T,T=Q,Q=U),U=Wn(w,Q);var he=Wn(w,T);U&&he&&(g.rangeCount!==1||g.anchorNode!==U.node||g.anchorOffset!==U.offset||g.focusNode!==he.node||g.focusOffset!==he.offset)&&(m=m.createRange(),m.setStart(U.node,U.offset),g.removeAllRanges(),Q>T?(g.addRange(m),g.extend(he.node,he.offset)):(m.setEnd(he.node,he.offset),g.addRange(m)))}}for(m=[],g=w;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)g=m[w],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var Ur=a&&"documentMode"in document&&11>=document.documentMode,Qa=null,f0=null,Ja=null,id=!1;function Bl(g,m,w){var T=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;id||Qa==null||Qa!==sn(T)||(T=Qa,"selectionStart"in T&&nd(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Ja&&bt(Ja,T)||(Ja=T,T=zh(f0,"onSelect"),0<T.length&&(m=new dp("onSelect","select",null,m,w),g.push({event:m,listeners:T}),m.target=Qa)))}function On(g,m){var w={};return w[g.toLowerCase()]=m.toLowerCase(),w["Webkit"+g]="webkit"+m,w["Moz"+g]="moz"+m,w}var Hh={animationend:On("Animation","AnimationEnd"),animationiteration:On("Animation","AnimationIteration"),animationstart:On("Animation","AnimationStart"),transitionend:On("Transition","TransitionEnd")},bp={},Zd={};a&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete Hh.animationend.animation,delete Hh.animationiteration.animation,delete Hh.animationstart.animation),"TransitionEvent"in window||delete Hh.transitionend.transition);function e_(g){if(bp[g])return bp[g];if(!Hh[g])return g;var m=Hh[g],w;for(w in m)if(m.hasOwnProperty(w)&&w in Zd)return bp[g]=m[w];return g}var r1=e_("animationend"),s1=e_("animationiteration"),Wl=e_("animationstart"),je=e_("transitionend"),Lt=new Map,ft="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(g,m){Lt.set(g,m),s(m,[g])}for(var Ci=0;Ci<ft.length;Ci++){var mr=ft[Ci],As=mr.toLowerCase(),Kr=mr[0].toUpperCase()+mr.slice(1);Cn(As,"on"+Kr)}Cn(r1,"onAnimationEnd"),Cn(s1,"onAnimationIteration"),Cn(Wl,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(je,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vl=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function Mo(g,m,w){var T=g.type||"unknown-event";g.currentTarget=w,N(T,m,void 0,g),g.currentTarget=null}function Cp(g,m){m=(m&4)!==0;for(var w=0;w<g.length;w++){var T=g[w],U=T.event;T=T.listeners;e:{var Q=void 0;if(m)for(var he=T.length-1;0<=he;he--){var ke=T[he],He=ke.instance,dt=ke.currentTarget;if(ke=ke.listener,He!==Q&&U.isPropagationStopped())break e;Mo(U,ke,dt),Q=He}else for(he=0;he<T.length;he++){if(ke=T[he],He=ke.instance,dt=ke.currentTarget,ke=ke.listener,He!==Q&&U.isPropagationStopped())break e;Mo(U,ke,dt),Q=He}}}if(ut)throw g=et,ut=!1,et=null,g}function Os(g,m){var w=m[Jf];w===void 0&&(w=m[Jf]=new Set);var T=g+"__bubble";w.has(T)||(Cr(m,g,2,!1),w.add(T))}function Xd(g,m,w){var T=0;m&&(T|=4),Cr(w,g,T,m)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function pl(g){if(!g[Hl]){g[Hl]=!0,n.forEach(function(w){w!=="selectionchange"&&(Vl.has(w)||Xd(w,!1,g),Xd(w,!0,g))});var m=g.nodeType===9?g:g.ownerDocument;m===null||m[Hl]||(m[Hl]=!0,Xd("selectionchange",!1,m))}}function Cr(g,m,w,T){switch(a0(m)){case 1:var U=Zb;break;case 4:U=iy;break;default:U=jm}w=U.bind(null,m,w,g),U=void 0,!ge||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(U=!0),T?U!==void 0?g.addEventListener(m,w,{capture:!0,passive:U}):g.addEventListener(m,w,!0):U!==void 0?g.addEventListener(m,w,{passive:U}):g.addEventListener(m,w,!1)}function g0(g,m,w,T,U){var Q=T;if(!(m&1)&&!(m&2)&&T!==null)e:for(;;){if(T===null)return;var he=T.tag;if(he===3||he===4){var ke=T.stateNode.containerInfo;if(ke===U||ke.nodeType===8&&ke.parentNode===U)break;if(he===4)for(he=T.return;he!==null;){var He=he.tag;if((He===3||He===4)&&(He=he.stateNode.containerInfo,He===U||He.nodeType===8&&He.parentNode===U))return;he=he.return}for(;ke!==null;){if(he=Br(ke),he===null)return;if(He=he.tag,He===5||He===6){T=Q=he;continue e}ke=ke.parentNode}}T=T.return}Ve(function(){var dt=Q,$t=fi(w),Gt=[];e:{var zt=Lt.get(g);if(zt!==void 0){var In=dp,Vn=g;switch(g){case"keypress":if(Gd(w)===0)break e;case"keydown":case"keyup":In=Zm;break;case"focusin":Vn="focus",In=vi;break;case"focusout":Vn="blur",In=vi;break;case"beforeblur":case"afterblur":In=vi;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":In=Km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":In=Wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":In=sy;break;case r1:case s1:case Wl:In=qf;break;case je:In=gp;break;case"scroll":In=l0;break;case"wheel":In=mc;break;case"copy":case"cut":case"paste":In=ao;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":In=Vh}var jn=(m&4)!==0,uo=!jn&&g==="scroll",nt=jn?zt!==null?zt+"Capture":null:zt;jn=[];for(var Ke=dt,tt;Ke!==null;){tt=Ke;var nn=tt.stateNode;if(tt.tag===5&&nn!==null&&(tt=nn,nt!==null&&(nn=Ze(Ke,nt),nn!=null&&jn.push(Qd(Ke,nn,tt)))),uo)break;Ke=Ke.return}0<jn.length&&(zt=new In(zt,Vn,null,w,$t),Gt.push({event:zt,listeners:jn}))}}if(!(m&7)){e:{if(zt=g==="mouseover"||g==="pointerover",In=g==="mouseout"||g==="pointerout",zt&&w!==Bs&&(Vn=w.relatedTarget||w.fromElement)&&(Br(Vn)||Vn[ua]))break e;if((In||zt)&&(zt=$t.window===$t?$t:(zt=$t.ownerDocument)?zt.defaultView||zt.parentWindow:window,In?(Vn=w.relatedTarget||w.toElement,In=dt,Vn=Vn?Br(Vn):null,Vn!==null&&(uo=q(Vn),Vn!==uo||Vn.tag!==5&&Vn.tag!==6)&&(Vn=null)):(In=null,Vn=dt),In!==Vn)){if(jn=Km,nn="onMouseLeave",nt="onMouseEnter",Ke="mouse",(g==="pointerout"||g==="pointerover")&&(jn=Vh,nn="onPointerLeave",nt="onPointerEnter",Ke="pointer"),uo=In==null?zt:En(In),tt=Vn==null?zt:En(Vn),zt=new jn(nn,Ke+"leave",In,w,$t),zt.target=uo,zt.relatedTarget=tt,nn=null,Br($t)===dt&&(jn=new jn(nt,Ke+"enter",Vn,w,$t),jn.target=tt,jn.relatedTarget=uo,nn=jn),uo=nn,In&&Vn)t:{for(jn=In,nt=Vn,Ke=0,tt=jn;tt;tt=Qf(tt))Ke++;for(tt=0,nn=nt;nn;nn=Qf(nn))tt++;for(;0<Ke-tt;)jn=Qf(jn),Ke--;for(;0<tt-Ke;)nt=Qf(nt),tt--;for(;Ke--;){if(jn===nt||nt!==null&&jn===nt.alternate)break t;jn=Qf(jn),nt=Qf(nt)}jn=null}else jn=null;In!==null&&rr(Gt,zt,In,jn,!1),Vn!==null&&uo!==null&&rr(Gt,uo,Vn,jn,!0)}}e:{if(zt=dt?En(dt):window,In=zt.nodeName&&zt.nodeName.toLowerCase(),In==="select"||In==="input"&&zt.type==="file")var Gn=oy;else if(Xf(zt))if(fl)Gn=_e;else{Gn=n1;var di=vp}else(In=zt.nodeName)&&In.toLowerCase()==="input"&&(zt.type==="checkbox"||zt.type==="radio")&&(Gn=hu);if(Gn&&(Gn=Gn(g,dt))){pp(Gt,Gn,w,$t);break e}di&&di(g,zt,dt),g==="focusout"&&(di=zt._wrapperState)&&di.controlled&&zt.type==="number"&&At(zt,"number",zt.value)}switch(di=dt?En(dt):window,g){case"focusin":(Xf(di)||di.contentEditable==="true")&&(Qa=di,f0=dt,Ja=null);break;case"focusout":Ja=f0=Qa=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Bl(Gt,w,$t);break;case"selectionchange":if(Ur)break;case"keydown":case"keyup":Bl(Gt,w,$t)}var ri;if(td)e:{switch(g){case"compositionstart":var bi="onCompositionStart";break e;case"compositionend":bi="onCompositionEnd";break e;case"compositionupdate":bi="onCompositionUpdate";break e}bi=void 0}else Yf?e1(g,w)&&(bi="onCompositionEnd"):g==="keydown"&&w.keyCode===229&&(bi="onCompositionStart");bi&&(Gf&&w.locale!=="ko"&&(Yf||bi!=="onCompositionStart"?bi==="onCompositionEnd"&&Yf&&(ri=cp()):(Gi=$t,Fh="value"in Gi?Gi.value:Gi.textContent,Yf=!0)),di=zh(dt,bi),0<di.length&&(bi=new Yd(bi,g,null,w,$t),Gt.push({event:bi,listeners:di}),ri?bi.data=ri:(ri=t1(w),ri!==null&&(bi.data=ri)))),(ri=_c?du(g,w):Qm(g,w))&&(dt=zh(dt,"onBeforeInput"),0<dt.length&&($t=new Yd("onBeforeInput","beforeinput",null,w,$t),Gt.push({event:$t,listeners:dt}),$t.data=ri))}Cp(Gt,m)})}function Qd(g,m,w){return{instance:g,listener:m,currentTarget:w}}function zh(g,m){for(var w=m+"Capture",T=[];g!==null;){var U=g,Q=U.stateNode;U.tag===5&&Q!==null&&(U=Q,Q=Ze(g,w),Q!=null&&T.unshift(Qd(g,Q,U)),Q=Ze(g,m),Q!=null&&T.push(Qd(g,Q,U))),g=g.return}return T}function Qf(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function rr(g,m,w,T,U){for(var Q=m._reactName,he=[];w!==null&&w!==T;){var ke=w,He=ke.alternate,dt=ke.stateNode;if(He!==null&&He===T)break;ke.tag===5&&dt!==null&&(ke=dt,U?(He=Ze(w,Q),He!=null&&he.unshift(Qd(w,He,ke))):U||(He=Ze(w,Q),He!=null&&he.push(Qd(w,He,ke)))),w=w.return}he.length!==0&&g.push({event:m,listeners:he})}var Fr=/\r\n?/g,t_=/\u0000|\uFFFD/g;function rd(g){return(typeof g=="string"?g:""+g).replace(Fr,`
`).replace(t_,"")}function sd(g,m,w){if(m=rd(m),rd(g)!==m&&w)throw Error(t(425))}function yp(){}var vc=null,fu=null;function Jd(g,m){return g==="textarea"||g==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var xa=typeof setTimeout=="function"?setTimeout:void 0,bc=typeof clearTimeout=="function"?clearTimeout:void 0,ml=typeof Promise=="function"?Promise:void 0,zl=typeof queueMicrotask=="function"?queueMicrotask:typeof ml<"u"?function(g){return ml.resolve(null).then(g).catch(_l)}:xa;function _l(g){setTimeout(function(){throw g})}function p0(g,m){var w=m,T=0;do{var U=w.nextSibling;if(g.removeChild(w),U&&U.nodeType===8)if(w=U.data,w==="/$"){if(T===0){g.removeChild(U),ei(m);return}T--}else w!=="$"&&w!=="$?"&&w!=="$!"||T++;w=U}while(w);ei(m)}function eh(g){for(;g!=null;g=g.nextSibling){var m=g.nodeType;if(m===1||m===3)break;if(m===8){if(m=g.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return g}function o1(g){g=g.previousSibling;for(var m=0;g;){if(g.nodeType===8){var w=g.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return g;m--}else w==="/$"&&m++}g=g.previousSibling}return null}var od=Math.random().toString(36).slice(2),Ul="__reactFiber$"+od,$l="__reactProps$"+od,ua="__reactContainer$"+od,Jf="__reactEvents$"+od,j="__reactListeners$"+od,zu="__reactHandles$"+od;function Br(g){var m=g[Ul];if(m)return m;for(var w=g.parentNode;w;){if(m=w[ua]||w[Ul]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(g=o1(g);g!==null;){if(w=g[Ul])return w;g=o1(g)}return m}g=w,w=g.parentNode}return null}function Wi(g){return g=g[Ul]||g[ua],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function En(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(t(33))}function n_(g){return g[$l]||null}var i_=[],eg=-1;function Js(g){return{current:g}}function Gr(g){0>eg||(g.current=i_[eg],i_[eg]=null,eg--)}function ns(g,m){eg++,i_[eg]=g.current,g.current=m}var jl={},yo=Js(jl),Zo=Js(!1),ys=jl;function Uu(g,m){var w=g.type.contextTypes;if(!w)return jl;var T=g.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===m)return T.__reactInternalMemoizedMaskedChildContext;var U={},Q;for(Q in w)U[Q]=m[Q];return T&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=m,g.__reactInternalMemoizedMaskedChildContext=U),U}function vl(g){return g=g.childContextTypes,g!=null}function r_(){Gr(Zo),Gr(yo)}function a1(g,m,w){if(yo.current!==jl)throw Error(t(168));ns(yo,m),ns(Zo,w)}function l1(g,m,w){var T=g.stateNode;if(m=m.childContextTypes,typeof T.getChildContext!="function")return w;T=T.getChildContext();for(var U in T)if(!(U in m))throw Error(t(108,ct(g)||"Unknown",U));return B({},w,T)}function wo(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||jl,ys=yo.current,ns(yo,g),ns(Zo,Zo.current),!0}function wp(g,m,w){var T=g.stateNode;if(!T)throw Error(t(169));w?(g=l1(g,m,ys),T.__reactInternalMemoizedMergedChildContext=g,Gr(Zo),Gr(yo),ns(yo,g)):Gr(Zo),ns(Zo,w)}var ql=null,Sp=!1,Ce=!1;function Uh(g){ql===null?ql=[g]:ql.push(g)}function Da(g){Sp=!0,Uh(g)}function Ro(){if(!Ce&&ql!==null){Ce=!0;var g=0,m=Er;try{var w=ql;for(Er=1;g<w.length;g++){var T=w[g];do T=T(!0);while(T!==null)}ql=null,Sp=!1}catch(U){throw ql!==null&&(ql=ql.slice(g+1)),it(Zt,Ro),U}finally{Er=m,Ce=!1}}return null}var $i=[],ws=0,s_=null,o_=0,Xo=[],gu=0,$h=null,$u=1,ju="";function jh(g,m){$i[ws++]=o_,$i[ws++]=s_,s_=g,o_=m}function Cc(g,m,w){Xo[gu++]=$u,Xo[gu++]=ju,Xo[gu++]=$h,$h=g;var T=$u;g=ju;var U=32-Vu(T)-1;T&=~(1<<U),w+=1;var Q=32-Vu(m)+U;if(30<Q){var he=U-U%5;Q=(T&(1<<he)-1).toString(32),T>>=he,U-=he,$u=1<<32-Vu(m)+U|w<<U|T,ju=Q+g}else $u=1<<Q|w<<U|T,ju=g}function qh(g){g.return!==null&&(jh(g,1),Cc(g,1,0))}function qu(g){for(;g===s_;)s_=$i[--ws],$i[ws]=null,o_=$i[--ws],$i[ws]=null;for(;g===$h;)$h=Xo[--gu],Xo[gu]=null,ju=Xo[--gu],Xo[gu]=null,$u=Xo[--gu],Xo[gu]=null}var Po=null,Kl=null,Ss=!1,Fo=null;function Qo(g,m){var w=xu(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=g,m=g.deletions,m===null?(g.deletions=[w],g.flags|=16):m.push(w)}function tg(g,m){switch(g.tag){case 5:var w=g.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(g.stateNode=m,Po=g,Kl=eh(m.firstChild),!0):!1;case 6:return m=g.pendingProps===""||m.nodeType!==3?null:m,m!==null?(g.stateNode=m,Po=g,Kl=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=$h!==null?{id:$u,overflow:ju}:null,g.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=xu(18,null,null,0),w.stateNode=m,w.return=g,g.child=w,Po=g,Kl=null,!0):!1;default:return!1}}function tl(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Ms(g){if(Ss){var m=Kl;if(m){var w=m;if(!tg(g,m)){if(tl(g))throw Error(t(418));m=eh(w.nextSibling);var T=Po;m&&tg(g,m)?Qo(T,w):(g.flags=g.flags&-4097|2,Ss=!1,Po=g)}}else{if(tl(g))throw Error(t(418));g.flags=g.flags&-4097|2,Ss=!1,Po=g}}}function u1(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Po=g}function pu(g){if(g!==Po)return!1;if(!Ss)return u1(g),Ss=!0,!1;var m;if((m=g.tag!==3)&&!(m=g.tag!==5)&&(m=g.type,m=m!=="head"&&m!=="body"&&!Jd(g.type,g.memoizedProps)),m&&(m=Kl)){if(tl(g))throw a_(),Error(t(418));for(;m;)Qo(g,m),m=eh(m.nextSibling)}if(u1(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));e:{for(g=g.nextSibling,m=0;g;){if(g.nodeType===8){var w=g.data;if(w==="/$"){if(m===0){Kl=eh(g.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}g=g.nextSibling}Kl=null}}else Kl=Po?eh(g.stateNode.nextSibling):null;return!0}function a_(){for(var g=Kl;g;)g=eh(g.nextSibling)}function bl(){Kl=Po=null,Ss=!1}function fs(g){Fo===null?Fo=[g]:Fo.push(g)}var m0=H.ReactCurrentBatchConfig;function Lp(g,m,w){if(g=w.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(t(309));var T=w.stateNode}if(!T)throw Error(t(147,g));var U=T,Q=""+g;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===Q?m.ref:(m=function(he){var ke=U.refs;he===null?delete ke[Q]:ke[Q]=he},m._stringRef=Q,m)}if(typeof g!="string")throw Error(t(284));if(!w._owner)throw Error(t(290,g))}return g}function yc(g,m){throw g=Object.prototype.toString.call(m),Error(t(31,g==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":g))}function c1(g){var m=g._init;return m(g._payload)}function l_(g){function m(nt,Ke){if(g){var tt=nt.deletions;tt===null?(nt.deletions=[Ke],nt.flags|=16):tt.push(Ke)}}function w(nt,Ke){if(!g)return null;for(;Ke!==null;)m(nt,Ke),Ke=Ke.sibling;return null}function T(nt,Ke){for(nt=new Map;Ke!==null;)Ke.key!==null?nt.set(Ke.key,Ke):nt.set(Ke.index,Ke),Ke=Ke.sibling;return nt}function U(nt,Ke){return nt=Ll(nt,Ke),nt.index=0,nt.sibling=null,nt}function Q(nt,Ke,tt){return nt.index=tt,g?(tt=nt.alternate,tt!==null?(tt=tt.index,tt<Ke?(nt.flags|=2,Ke):tt):(nt.flags|=2,Ke)):(nt.flags|=1048576,Ke)}function he(nt){return g&&nt.alternate===null&&(nt.flags|=2),nt}function ke(nt,Ke,tt,nn){return Ke===null||Ke.tag!==6?(Ke=N0(tt,nt.mode,nn),Ke.return=nt,Ke):(Ke=U(Ke,tt),Ke.return=nt,Ke)}function He(nt,Ke,tt,nn){var Gn=tt.type;return Gn===$?$t(nt,Ke,tt.props.children,nn,tt.key):Ke!==null&&(Ke.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===ee&&c1(Gn)===Ke.type)?(nn=U(Ke,tt.props),nn.ref=Lp(nt,Ke,tt),nn.return=nt,nn):(nn=T_(tt.type,tt.key,tt.props,null,nt.mode,nn),nn.ref=Lp(nt,Ke,tt),nn.return=nt,nn)}function dt(nt,Ke,tt,nn){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==tt.containerInfo||Ke.stateNode.implementation!==tt.implementation?(Ke=A0(tt,nt.mode,nn),Ke.return=nt,Ke):(Ke=U(Ke,tt.children||[]),Ke.return=nt,Ke)}function $t(nt,Ke,tt,nn,Gn){return Ke===null||Ke.tag!==7?(Ke=lf(tt,nt.mode,nn,Gn),Ke.return=nt,Ke):(Ke=U(Ke,tt),Ke.return=nt,Ke)}function Gt(nt,Ke,tt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Ke=N0(""+Ke,nt.mode,tt),Ke.return=nt,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case V:return tt=T_(Ke.type,Ke.key,Ke.props,null,nt.mode,tt),tt.ref=Lp(nt,null,Ke),tt.return=nt,tt;case X:return Ke=A0(Ke,nt.mode,tt),Ke.return=nt,Ke;case ee:var nn=Ke._init;return Gt(nt,nn(Ke._payload),tt)}if(an(Ke)||te(Ke))return Ke=lf(Ke,nt.mode,tt,null),Ke.return=nt,Ke;yc(nt,Ke)}return null}function zt(nt,Ke,tt,nn){var Gn=Ke!==null?Ke.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Gn!==null?null:ke(nt,Ke,""+tt,nn);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case V:return tt.key===Gn?He(nt,Ke,tt,nn):null;case X:return tt.key===Gn?dt(nt,Ke,tt,nn):null;case ee:return Gn=tt._init,zt(nt,Ke,Gn(tt._payload),nn)}if(an(tt)||te(tt))return Gn!==null?null:$t(nt,Ke,tt,nn,null);yc(nt,tt)}return null}function In(nt,Ke,tt,nn,Gn){if(typeof nn=="string"&&nn!==""||typeof nn=="number")return nt=nt.get(tt)||null,ke(Ke,nt,""+nn,Gn);if(typeof nn=="object"&&nn!==null){switch(nn.$$typeof){case V:return nt=nt.get(nn.key===null?tt:nn.key)||null,He(Ke,nt,nn,Gn);case X:return nt=nt.get(nn.key===null?tt:nn.key)||null,dt(Ke,nt,nn,Gn);case ee:var di=nn._init;return In(nt,Ke,tt,di(nn._payload),Gn)}if(an(nn)||te(nn))return nt=nt.get(tt)||null,$t(Ke,nt,nn,Gn,null);yc(Ke,nn)}return null}function Vn(nt,Ke,tt,nn){for(var Gn=null,di=null,ri=Ke,bi=Ke=0,na=null;ri!==null&&bi<tt.length;bi++){ri.index>bi?(na=ri,ri=null):na=ri.sibling;var Ar=zt(nt,ri,tt[bi],nn);if(Ar===null){ri===null&&(ri=na);break}g&&ri&&Ar.alternate===null&&m(nt,ri),Ke=Q(Ar,Ke,bi),di===null?Gn=Ar:di.sibling=Ar,di=Ar,ri=na}if(bi===tt.length)return w(nt,ri),Ss&&jh(nt,bi),Gn;if(ri===null){for(;bi<tt.length;bi++)ri=Gt(nt,tt[bi],nn),ri!==null&&(Ke=Q(ri,Ke,bi),di===null?Gn=ri:di.sibling=ri,di=ri);return Ss&&jh(nt,bi),Gn}for(ri=T(nt,ri);bi<tt.length;bi++)na=In(ri,nt,bi,tt[bi],nn),na!==null&&(g&&na.alternate!==null&&ri.delete(na.key===null?bi:na.key),Ke=Q(na,Ke,bi),di===null?Gn=na:di.sibling=na,di=na);return g&&ri.forEach(function(fh){return m(nt,fh)}),Ss&&jh(nt,bi),Gn}function jn(nt,Ke,tt,nn){var Gn=te(tt);if(typeof Gn!="function")throw Error(t(150));if(tt=Gn.call(tt),tt==null)throw Error(t(151));for(var di=Gn=null,ri=Ke,bi=Ke=0,na=null,Ar=tt.next();ri!==null&&!Ar.done;bi++,Ar=tt.next()){ri.index>bi?(na=ri,ri=null):na=ri.sibling;var fh=zt(nt,ri,Ar.value,nn);if(fh===null){ri===null&&(ri=na);break}g&&ri&&fh.alternate===null&&m(nt,ri),Ke=Q(fh,Ke,bi),di===null?Gn=fh:di.sibling=fh,di=fh,ri=na}if(Ar.done)return w(nt,ri),Ss&&jh(nt,bi),Gn;if(ri===null){for(;!Ar.done;bi++,Ar=tt.next())Ar=Gt(nt,Ar.value,nn),Ar!==null&&(Ke=Q(Ar,Ke,bi),di===null?Gn=Ar:di.sibling=Ar,di=Ar);return Ss&&jh(nt,bi),Gn}for(ri=T(nt,ri);!Ar.done;bi++,Ar=tt.next())Ar=In(ri,nt,bi,Ar.value,nn),Ar!==null&&(g&&Ar.alternate!==null&&ri.delete(Ar.key===null?bi:Ar.key),Ke=Q(Ar,Ke,bi),di===null?Gn=Ar:di.sibling=Ar,di=Ar);return g&&ri.forEach(function(vy){return m(nt,vy)}),Ss&&jh(nt,bi),Gn}function uo(nt,Ke,tt,nn){if(typeof tt=="object"&&tt!==null&&tt.type===$&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case V:e:{for(var Gn=tt.key,di=Ke;di!==null;){if(di.key===Gn){if(Gn=tt.type,Gn===$){if(di.tag===7){w(nt,di.sibling),Ke=U(di,tt.props.children),Ke.return=nt,nt=Ke;break e}}else if(di.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===ee&&c1(Gn)===di.type){w(nt,di.sibling),Ke=U(di,tt.props),Ke.ref=Lp(nt,di,tt),Ke.return=nt,nt=Ke;break e}w(nt,di);break}else m(nt,di);di=di.sibling}tt.type===$?(Ke=lf(tt.props.children,nt.mode,nn,tt.key),Ke.return=nt,nt=Ke):(nn=T_(tt.type,tt.key,tt.props,null,nt.mode,nn),nn.ref=Lp(nt,Ke,tt),nn.return=nt,nt=nn)}return he(nt);case X:e:{for(di=tt.key;Ke!==null;){if(Ke.key===di)if(Ke.tag===4&&Ke.stateNode.containerInfo===tt.containerInfo&&Ke.stateNode.implementation===tt.implementation){w(nt,Ke.sibling),Ke=U(Ke,tt.children||[]),Ke.return=nt,nt=Ke;break e}else{w(nt,Ke);break}else m(nt,Ke);Ke=Ke.sibling}Ke=A0(tt,nt.mode,nn),Ke.return=nt,nt=Ke}return he(nt);case ee:return di=tt._init,uo(nt,Ke,di(tt._payload),nn)}if(an(tt))return Vn(nt,Ke,tt,nn);if(te(tt))return jn(nt,Ke,tt,nn);yc(nt,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"?(tt=""+tt,Ke!==null&&Ke.tag===6?(w(nt,Ke.sibling),Ke=U(Ke,tt),Ke.return=nt,nt=Ke):(w(nt,Ke),Ke=N0(tt,nt.mode,nn),Ke.return=nt,nt=Ke),he(nt)):w(nt,Ke)}return uo}var Qi=l_(!0),Kh=l_(!1),ng=Js(null),eo=null,mu=null,Gl=null;function Jo(){Gl=mu=eo=null}function Ep(g){var m=ng.current;Gr(ng),g._currentValue=m}function Tr(g,m,w){for(;g!==null;){var T=g.alternate;if((g.childLanes&m)!==m?(g.childLanes|=m,T!==null&&(T.childLanes|=m)):T!==null&&(T.childLanes&m)!==m&&(T.childLanes|=m),g===w)break;g=g.return}}function wc(g,m){eo=g,Gl=mu=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&m&&(pa=!0),g.firstContext=null)}function So(g){var m=g._currentValue;if(Gl!==g)if(g={context:g,memoizedValue:m,next:null},mu===null){if(eo===null)throw Error(t(308));mu=g,eo.dependencies={lanes:0,firstContext:g}}else mu=mu.next=g;return m}var ad=null;function ld(g){ad===null?ad=[g]:ad.push(g)}function ca(g,m,w,T){var U=m.interleaved;return U===null?(w.next=w,ld(m)):(w.next=U.next,U.next=w),m.interleaved=w,ud(g,T)}function ud(g,m){g.lanes|=m;var w=g.alternate;for(w!==null&&(w.lanes|=m),w=g,g=g.return;g!==null;)g.childLanes|=m,w=g.alternate,w!==null&&(w.childLanes|=m),w=g,g=g.return;return w.tag===3?w.stateNode:null}var da=!1;function ig(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rg(g,m){g=g.updateQueue,m.updateQueue===g&&(m.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Ia(g,m){return{eventTime:g,lane:m,tag:0,payload:null,callback:null,next:null}}function ha(g,m,w){var T=g.updateQueue;if(T===null)return null;if(T=T.shared,Sr&2){var U=T.pending;return U===null?m.next=m:(m.next=U.next,U.next=m),T.pending=m,ud(g,w)}return U=T.interleaved,U===null?(m.next=m,ld(T)):(m.next=U.next,U.next=m),T.interleaved=m,ud(g,w)}function u_(g,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var T=m.lanes;T&=g.pendingLanes,w|=T,m.lanes=w,Ph(g,w)}}function xp(g,m){var w=g.updateQueue,T=g.alternate;if(T!==null&&(T=T.updateQueue,w===T)){var U=null,Q=null;if(w=w.firstBaseUpdate,w!==null){do{var he={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};Q===null?U=Q=he:Q=Q.next=he,w=w.next}while(w!==null);Q===null?U=Q=m:Q=Q.next=m}else U=Q=m;w={baseState:T.baseState,firstBaseUpdate:U,lastBaseUpdate:Q,shared:T.shared,effects:T.effects},g.updateQueue=w;return}g=w.lastBaseUpdate,g===null?w.firstBaseUpdate=m:g.next=m,w.lastBaseUpdate=m}function th(g,m,w,T){var U=g.updateQueue;da=!1;var Q=U.firstBaseUpdate,he=U.lastBaseUpdate,ke=U.shared.pending;if(ke!==null){U.shared.pending=null;var He=ke,dt=He.next;He.next=null,he===null?Q=dt:he.next=dt,he=He;var $t=g.alternate;$t!==null&&($t=$t.updateQueue,ke=$t.lastBaseUpdate,ke!==he&&(ke===null?$t.firstBaseUpdate=dt:ke.next=dt,$t.lastBaseUpdate=He))}if(Q!==null){var Gt=U.baseState;he=0,$t=dt=He=null,ke=Q;do{var zt=ke.lane,In=ke.eventTime;if((T&zt)===zt){$t!==null&&($t=$t.next={eventTime:In,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var Vn=g,jn=ke;switch(zt=m,In=w,jn.tag){case 1:if(Vn=jn.payload,typeof Vn=="function"){Gt=Vn.call(In,Gt,zt);break e}Gt=Vn;break e;case 3:Vn.flags=Vn.flags&-65537|128;case 0:if(Vn=jn.payload,zt=typeof Vn=="function"?Vn.call(In,Gt,zt):Vn,zt==null)break e;Gt=B({},Gt,zt);break e;case 2:da=!0}}ke.callback!==null&&ke.lane!==0&&(g.flags|=64,zt=U.effects,zt===null?U.effects=[ke]:zt.push(ke))}else In={eventTime:In,lane:zt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},$t===null?(dt=$t=In,He=Gt):$t=$t.next=In,he|=zt;if(ke=ke.next,ke===null){if(ke=U.shared.pending,ke===null)break;zt=ke,ke=zt.next,zt.next=null,U.lastBaseUpdate=zt,U.shared.pending=null}}while(1);if($t===null&&(He=Gt),U.baseState=He,U.firstBaseUpdate=dt,U.lastBaseUpdate=$t,m=U.shared.interleaved,m!==null){U=m;do he|=U.lane,U=U.next;while(U!==m)}else Q===null&&(U.shared.lanes=0);_d|=he,g.lanes=he,g.memoizedState=Gt}}function Dp(g,m,w){if(g=m.effects,m.effects=null,g!==null)for(m=0;m<g.length;m++){var T=g[m],U=T.callback;if(U!==null){if(T.callback=null,T=w,typeof U!="function")throw Error(t(191,U));U.call(T)}}}var lo={},_u=Js(lo),sg=Js(lo),Ta=Js(lo);function Yl(g){if(g===lo)throw Error(t(174));return g}function og(g,m){switch(ns(Ta,m),ns(sg,g),ns(_u,lo),g=m.nodeType,g){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:rt(null,"");break;default:g=g===8?m.parentNode:m,m=g.namespaceURI||null,g=g.tagName,m=rt(m,g)}Gr(_u),ns(_u,m)}function ka(){Gr(_u),Gr(sg),Gr(Ta)}function Ip(g){Yl(Ta.current);var m=Yl(_u.current),w=rt(m,g.type);m!==w&&(ns(sg,g),ns(_u,w))}function Bo(g){sg.current===g&&(Gr(_u),Gr(sg))}var gs=Js(0);function Sc(g){for(var m=g;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break;for(;m.sibling===null;){if(m.return===null||m.return===g)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var _0=[];function Tp(){for(var g=0;g<_0.length;g++)_0[g]._workInProgressVersionPrimary=null;_0.length=0}var nh=H.ReactCurrentDispatcher,v0=H.ReactCurrentBatchConfig,Zl=0,Ws=null,qs=null,Lo=null,vu=!1,kp=!1,cd=0,wn=0;function fa(){throw Error(t(321))}function b0(g,m){if(m===null)return!1;for(var w=0;w<m.length&&w<g.length;w++)if(!Ee(g[w],m[w]))return!1;return!0}function Ku(g,m,w,T,U,Q){if(Zl=Q,Ws=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,nh.current=g===null||g.memoizedState===null?f1:xc,g=w(T,U),kp){Q=0;do{if(kp=!1,cd=0,25<=Q)throw Error(t(301));Q+=1,Lo=qs=null,m.updateQueue=null,nh.current=bu,g=w(T,U)}while(kp)}if(nh.current=lg,m=qs!==null&&qs.next!==null,Zl=0,Lo=qs=Ws=null,vu=!1,m)throw Error(t(300));return g}function Np(){var g=cd!==0;return cd=0,g}function Gu(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lo===null?Ws.memoizedState=Lo=g:Lo=Lo.next=g,Lo}function Cl(){if(qs===null){var g=Ws.alternate;g=g!==null?g.memoizedState:null}else g=qs.next;var m=Lo===null?Ws.memoizedState:Lo.next;if(m!==null)Lo=m,qs=g;else{if(g===null)throw Error(t(310));qs=g,g={memoizedState:qs.memoizedState,baseState:qs.baseState,baseQueue:qs.baseQueue,queue:qs.queue,next:null},Lo===null?Ws.memoizedState=Lo=g:Lo=Lo.next=g}return Lo}function ps(g,m){return typeof m=="function"?m(g):m}function Ap(g){var m=Cl(),w=m.queue;if(w===null)throw Error(t(311));w.lastRenderedReducer=g;var T=qs,U=T.baseQueue,Q=w.pending;if(Q!==null){if(U!==null){var he=U.next;U.next=Q.next,Q.next=he}T.baseQueue=U=Q,w.pending=null}if(U!==null){Q=U.next,T=T.baseState;var ke=he=null,He=null,dt=Q;do{var $t=dt.lane;if((Zl&$t)===$t)He!==null&&(He=He.next={lane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),T=dt.hasEagerState?dt.eagerState:g(T,dt.action);else{var Gt={lane:$t,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null};He===null?(ke=He=Gt,he=T):He=He.next=Gt,Ws.lanes|=$t,_d|=$t}dt=dt.next}while(dt!==null&&dt!==Q);He===null?he=T:He.next=ke,Ee(T,m.memoizedState)||(pa=!0),m.memoizedState=T,m.baseState=he,m.baseQueue=He,w.lastRenderedState=T}if(g=w.interleaved,g!==null){U=g;do Q=U.lane,Ws.lanes|=Q,_d|=Q,U=U.next;while(U!==g)}else U===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function Lc(g){var m=Cl(),w=m.queue;if(w===null)throw Error(t(311));w.lastRenderedReducer=g;var T=w.dispatch,U=w.pending,Q=m.memoizedState;if(U!==null){w.pending=null;var he=U=U.next;do Q=g(Q,he.action),he=he.next;while(he!==U);Ee(Q,m.memoizedState)||(pa=!0),m.memoizedState=Q,m.baseQueue===null&&(m.baseState=Q),w.lastRenderedState=Q}return[Q,T]}function Gh(){}function Op(g,m){var w=Ws,T=Cl(),U=m(),Q=!Ee(T.memoizedState,U);if(Q&&(T.memoizedState=U,pa=!0),T=T.queue,Wo(ga.bind(null,w,T,g),[g]),T.getSnapshot!==m||Q||Lo!==null&&Lo.memoizedState.tag&1){if(w.flags|=2048,Xh(9,Ls.bind(null,w,T,U,m),void 0,null),zo===null)throw Error(t(349));Zl&30||Yh(w,m,U)}return U}function Yh(g,m,w){g.flags|=16384,g={getSnapshot:m,value:w},m=Ws.updateQueue,m===null?(m={lastEffect:null,stores:null},Ws.updateQueue=m,m.stores=[g]):(w=m.stores,w===null?m.stores=[g]:w.push(g))}function Ls(g,m,w,T){m.value=w,m.getSnapshot=T,Zh(m)&&c_(g)}function ga(g,m,w){return w(function(){Zh(m)&&c_(g)})}function Zh(g){var m=g.getSnapshot;g=g.value;try{var w=m();return!Ee(g,w)}catch{return!0}}function c_(g){var m=ud(g,1);m!==null&&ec(m,g,1,-1)}function dd(g){var m=Gu();return typeof g=="function"&&(g=g()),m.memoizedState=m.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:g},m.queue=g,g=g.dispatch=h_.bind(null,Ws,g),[m.memoizedState,g]}function Xh(g,m,w,T){return g={tag:g,create:m,destroy:w,deps:T,next:null},m=Ws.updateQueue,m===null?(m={lastEffect:null,stores:null},Ws.updateQueue=m,m.lastEffect=g.next=g):(w=m.lastEffect,w===null?m.lastEffect=g.next=g:(T=w.next,w.next=g,g.next=T,m.lastEffect=g)),g}function ih(){return Cl().memoizedState}function Qh(g,m,w,T){var U=Gu();Ws.flags|=g,U.memoizedState=Xh(1|m,w,void 0,T===void 0?null:T)}function Ec(g,m,w,T){var U=Cl();T=T===void 0?null:T;var Q=void 0;if(qs!==null){var he=qs.memoizedState;if(Q=he.destroy,T!==null&&b0(T,he.deps)){U.memoizedState=Xh(m,w,Q,T);return}}Ws.flags|=g,U.memoizedState=Xh(1|m,w,Q,T)}function ag(g,m){return Qh(8390656,8,g,m)}function Wo(g,m){return Ec(2048,8,g,m)}function Yi(g,m){return Ec(4,2,g,m)}function Na(g,m){return Ec(4,4,g,m)}function d_(g,m){if(typeof m=="function")return g=g(),m(g),function(){m(null)};if(m!=null)return g=g(),m.current=g,function(){m.current=null}}function rh(g,m,w){return w=w!=null?w.concat([g]):null,Ec(4,4,d_.bind(null,m,g),w)}function sh(){}function d1(g,m){var w=Cl();m=m===void 0?null:m;var T=w.memoizedState;return T!==null&&m!==null&&b0(m,T[1])?T[0]:(w.memoizedState=[g,m],g)}function h1(g,m){var w=Cl();m=m===void 0?null:m;var T=w.memoizedState;return T!==null&&m!==null&&b0(m,T[1])?T[0]:(g=g(),w.memoizedState=[g,m],g)}function Xl(g,m,w){return Zl&21?(Ee(w,m)||(w=Hm(),Ws.lanes|=w,_d|=w,g.baseState=!0),m):(g.baseState&&(g.baseState=!1,pa=!0),g.memoizedState=w)}function C0(g,m){var w=Er;Er=w!==0&&4>w?w:4,g(!0);var T=v0.transition;v0.transition={};try{g(!1),m()}finally{Er=w,v0.transition=T}}function Jh(){return Cl().memoizedState}function y0(g,m,w){var T=hh(g);if(w={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null},Mp(g))Zi(m,w);else if(w=ca(g,m,w,T),w!==null){var U=il();ec(w,g,T,U),ms(w,m,T)}}function h_(g,m,w){var T=hh(g),U={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null};if(Mp(g))Zi(m,U);else{var Q=g.alternate;if(g.lanes===0&&(Q===null||Q.lanes===0)&&(Q=m.lastRenderedReducer,Q!==null))try{var he=m.lastRenderedState,ke=Q(he,w);if(U.hasEagerState=!0,U.eagerState=ke,Ee(ke,he)){var He=m.interleaved;He===null?(U.next=U,ld(m)):(U.next=He.next,He.next=U),m.interleaved=U;return}}catch{}finally{}w=ca(g,m,U,T),w!==null&&(U=il(),ec(w,g,T,U),ms(w,m,T))}}function Mp(g){var m=g.alternate;return g===Ws||m!==null&&m===Ws}function Zi(g,m){kp=vu=!0;var w=g.pending;w===null?m.next=m:(m.next=w.next,w.next=m),g.pending=m}function ms(g,m,w){if(w&4194240){var T=m.lanes;T&=g.pendingLanes,w|=T,m.lanes=w,Ph(g,w)}}var lg={readContext:So,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},f1={readContext:So,useCallback:function(g,m){return Gu().memoizedState=[g,m===void 0?null:m],g},useContext:So,useEffect:ag,useImperativeHandle:function(g,m,w){return w=w!=null?w.concat([g]):null,Qh(4194308,4,d_.bind(null,m,g),w)},useLayoutEffect:function(g,m){return Qh(4194308,4,g,m)},useInsertionEffect:function(g,m){return Qh(4,2,g,m)},useMemo:function(g,m){var w=Gu();return m=m===void 0?null:m,g=g(),w.memoizedState=[g,m],g},useReducer:function(g,m,w){var T=Gu();return m=w!==void 0?w(m):m,T.memoizedState=T.baseState=m,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:m},T.queue=g,g=g.dispatch=y0.bind(null,Ws,g),[T.memoizedState,g]},useRef:function(g){var m=Gu();return g={current:g},m.memoizedState=g},useState:dd,useDebugValue:sh,useDeferredValue:function(g){return Gu().memoizedState=g},useTransition:function(){var g=dd(!1),m=g[0];return g=C0.bind(null,g[1]),Gu().memoizedState=g,[m,g]},useMutableSource:function(){},useSyncExternalStore:function(g,m,w){var T=Ws,U=Gu();if(Ss){if(w===void 0)throw Error(t(407));w=w()}else{if(w=m(),zo===null)throw Error(t(349));Zl&30||Yh(T,m,w)}U.memoizedState=w;var Q={value:w,getSnapshot:m};return U.queue=Q,ag(ga.bind(null,T,Q,g),[g]),T.flags|=2048,Xh(9,Ls.bind(null,T,Q,w,m),void 0,null),w},useId:function(){var g=Gu(),m=zo.identifierPrefix;if(Ss){var w=ju,T=$u;w=(T&~(1<<32-Vu(T)-1)).toString(32)+w,m=":"+m+"R"+w,w=cd++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=wn++,m=":"+m+"r"+w.toString(32)+":";return g.memoizedState=m},unstable_isNewReconciler:!1},xc={readContext:So,useCallback:d1,useContext:So,useEffect:Wo,useImperativeHandle:rh,useInsertionEffect:Yi,useLayoutEffect:Na,useMemo:h1,useReducer:Ap,useRef:ih,useState:function(){return Ap(ps)},useDebugValue:sh,useDeferredValue:function(g){var m=Cl();return Xl(m,qs.memoizedState,g)},useTransition:function(){var g=Ap(ps)[0],m=Cl().memoizedState;return[g,m]},useMutableSource:Gh,useSyncExternalStore:Op,useId:Jh,unstable_isNewReconciler:!1},bu={readContext:So,useCallback:d1,useContext:So,useEffect:Wo,useImperativeHandle:rh,useInsertionEffect:Yi,useLayoutEffect:Na,useMemo:h1,useReducer:Lc,useRef:ih,useState:function(){return Lc(ps)},useDebugValue:sh,useDeferredValue:function(g){var m=Cl();return qs===null?m.memoizedState=g:Xl(m,qs.memoizedState,g)},useTransition:function(){var g=Lc(ps)[0],m=Cl().memoizedState;return[g,m]},useMutableSource:Gh,useSyncExternalStore:Op,useId:Jh,unstable_isNewReconciler:!1};function nl(g,m){if(g&&g.defaultProps){m=B({},m),g=g.defaultProps;for(var w in g)m[w]===void 0&&(m[w]=g[w]);return m}return m}function ug(g,m,w,T){m=g.memoizedState,w=w(T,m),w=w==null?m:B({},m,w),g.memoizedState=w,g.lanes===0&&(g.updateQueue.baseState=w)}var cg={isMounted:function(g){return(g=g._reactInternals)?q(g)===g:!1},enqueueSetState:function(g,m,w){g=g._reactInternals;var T=il(),U=hh(g),Q=Ia(T,U);Q.payload=m,w!=null&&(Q.callback=w),m=ha(g,Q,U),m!==null&&(ec(m,g,U,T),u_(m,g,U))},enqueueReplaceState:function(g,m,w){g=g._reactInternals;var T=il(),U=hh(g),Q=Ia(T,U);Q.tag=1,Q.payload=m,w!=null&&(Q.callback=w),m=ha(g,Q,U),m!==null&&(ec(m,g,U,T),u_(m,g,U))},enqueueForceUpdate:function(g,m){g=g._reactInternals;var w=il(),T=hh(g),U=Ia(w,T);U.tag=2,m!=null&&(U.callback=m),m=ha(g,U,T),m!==null&&(ec(m,g,T,w),u_(m,g,T))}};function dg(g,m,w,T,U,Q,he){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(T,Q,he):m.prototype&&m.prototype.isPureReactComponent?!bt(w,T)||!bt(U,Q):!0}function Vo(g,m,w){var T=!1,U=jl,Q=m.contextType;return typeof Q=="object"&&Q!==null?Q=So(Q):(U=vl(m)?ys:yo.current,T=m.contextTypes,Q=(T=T!=null)?Uu(g,U):jl),m=new m(w,Q),g.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=cg,g.stateNode=m,m._reactInternals=g,T&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=U,g.__reactInternalMemoizedMaskedChildContext=Q),m}function Dc(g,m,w,T){g=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,T),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,T),m.state!==g&&cg.enqueueReplaceState(m,m.state,null)}function Ic(g,m,w,T){var U=g.stateNode;U.props=w,U.state=g.memoizedState,U.refs={},ig(g);var Q=m.contextType;typeof Q=="object"&&Q!==null?U.context=So(Q):(Q=vl(m)?ys:yo.current,U.context=Uu(g,Q)),U.state=g.memoizedState,Q=m.getDerivedStateFromProps,typeof Q=="function"&&(ug(g,m,Q,w),U.state=g.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(m=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),m!==U.state&&cg.enqueueReplaceState(U,U.state,null),th(g,w,U,T),U.state=g.memoizedState),typeof U.componentDidMount=="function"&&(g.flags|=4194308)}function hd(g,m){try{var w="",T=m;do w+=Me(T),T=T.return;while(T);var U=w}catch(Q){U=`
Error generating stack: `+Q.message+`
`+Q.stack}return{value:g,source:m,stack:U,digest:null}}function hg(g,m,w){return{value:g,source:null,stack:w??null,digest:m??null}}function Yu(g,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var w0=typeof WeakMap=="function"?WeakMap:Map;function oh(g,m,w){w=Ia(-1,w),w.tag=3,w.payload={element:null};var T=m.value;return w.callback=function(){zp||(zp=!0,Lu=T),Yu(g,m)},w}function fg(g,m,w){w=Ia(-1,w),w.tag=3;var T=g.type.getDerivedStateFromError;if(typeof T=="function"){var U=m.value;w.payload=function(){return T(U)},w.callback=function(){Yu(g,m)}}var Q=g.stateNode;return Q!==null&&typeof Q.componentDidCatch=="function"&&(w.callback=function(){Yu(g,m),typeof T!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var he=m.stack;this.componentDidCatch(m.value,{componentStack:he!==null?he:""})}),w}function fd(g,m,w){var T=g.pingCache;if(T===null){T=g.pingCache=new w0;var U=new Set;T.set(m,U)}else U=T.get(m),U===void 0&&(U=new Set,T.set(m,U));U.has(w)||(U.add(w),g=uy.bind(null,g,m,w),m.then(g,g))}function S0(g){do{var m;if((m=g.tag===13)&&(m=g.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return g;g=g.return}while(g!==null);return null}function f_(g,m,w,T,U){return g.mode&1?(g.flags|=65536,g.lanes=U,g):(g===m?g.flags|=65536:(g.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=Ia(-1,1),m.tag=2,ha(w,m,1))),w.lanes|=1),g)}var ah=H.ReactCurrentOwner,pa=!1;function kr(g,m,w,T){m.child=g===null?Kh(m,null,w,T):Qi(m,g.child,w,T)}function Zu(g,m,w,T,U){w=w.render;var Q=m.ref;return wc(m,U),T=Ku(g,m,w,T,Q,U),w=Np(),g!==null&&!pa?(m.updateQueue=g.updateQueue,m.flags&=-2053,g.lanes&=~U,yl(g,m,U)):(Ss&&w&&qh(m),m.flags|=1,kr(g,m,T,U),m.child)}function g_(g,m,w,T,U){if(g===null){var Q=w.type;return typeof Q=="function"&&!$p(Q)&&Q.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=Q,ea(g,m,Q,T,U)):(g=T_(w.type,null,T,m,m.mode,U),g.ref=m.ref,g.return=m,m.child=g)}if(Q=g.child,!(g.lanes&U)){var he=Q.memoizedProps;if(w=w.compare,w=w!==null?w:bt,w(he,T)&&g.ref===m.ref)return yl(g,m,U)}return m.flags|=1,g=Ll(Q,T),g.ref=m.ref,g.return=m,m.child=g}function ea(g,m,w,T,U){if(g!==null){var Q=g.memoizedProps;if(bt(Q,T)&&g.ref===m.ref)if(pa=!1,m.pendingProps=T=Q,(g.lanes&U)!==0)g.flags&131072&&(pa=!0);else return m.lanes=g.lanes,yl(g,m,U)}return p_(g,m,w,T,U)}function ef(g,m,w){var T=m.pendingProps,U=T.children,Q=g!==null?g.memoizedState:null;if(T.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},ns(mg,Jl),Jl|=w;else{if(!(w&1073741824))return g=Q!==null?Q.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:g,cachePool:null,transitions:null},m.updateQueue=null,ns(mg,Jl),Jl|=g,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=Q!==null?Q.baseLanes:w,ns(mg,Jl),Jl|=T}else Q!==null?(T=Q.baseLanes|w,m.memoizedState=null):T=w,ns(mg,Jl),Jl|=T;return kr(g,m,U,w),m.child}function gd(g,m){var w=m.ref;(g===null&&w!==null||g!==null&&g.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function p_(g,m,w,T,U){var Q=vl(w)?ys:yo.current;return Q=Uu(m,Q),wc(m,U),w=Ku(g,m,w,T,Q,U),T=Np(),g!==null&&!pa?(m.updateQueue=g.updateQueue,m.flags&=-2053,g.lanes&=~U,yl(g,m,U)):(Ss&&T&&qh(m),m.flags|=1,kr(g,m,w,U),m.child)}function Rp(g,m,w,T,U){if(vl(w)){var Q=!0;wo(m)}else Q=!1;if(wc(m,U),m.stateNode===null)m_(g,m),Vo(m,w,T),Ic(m,w,T,U),T=!0;else if(g===null){var he=m.stateNode,ke=m.memoizedProps;he.props=ke;var He=he.context,dt=w.contextType;typeof dt=="object"&&dt!==null?dt=So(dt):(dt=vl(w)?ys:yo.current,dt=Uu(m,dt));var $t=w.getDerivedStateFromProps,Gt=typeof $t=="function"||typeof he.getSnapshotBeforeUpdate=="function";Gt||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(ke!==T||He!==dt)&&Dc(m,he,T,dt),da=!1;var zt=m.memoizedState;he.state=zt,th(m,T,he,U),He=m.memoizedState,ke!==T||zt!==He||Zo.current||da?(typeof $t=="function"&&(ug(m,w,$t,T),He=m.memoizedState),(ke=da||dg(m,w,ke,T,zt,He,dt))?(Gt||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount()),typeof he.componentDidMount=="function"&&(m.flags|=4194308)):(typeof he.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=T,m.memoizedState=He),he.props=T,he.state=He,he.context=dt,T=ke):(typeof he.componentDidMount=="function"&&(m.flags|=4194308),T=!1)}else{he=m.stateNode,rg(g,m),ke=m.memoizedProps,dt=m.type===m.elementType?ke:nl(m.type,ke),he.props=dt,Gt=m.pendingProps,zt=he.context,He=w.contextType,typeof He=="object"&&He!==null?He=So(He):(He=vl(w)?ys:yo.current,He=Uu(m,He));var In=w.getDerivedStateFromProps;($t=typeof In=="function"||typeof he.getSnapshotBeforeUpdate=="function")||typeof he.UNSAFE_componentWillReceiveProps!="function"&&typeof he.componentWillReceiveProps!="function"||(ke!==Gt||zt!==He)&&Dc(m,he,T,He),da=!1,zt=m.memoizedState,he.state=zt,th(m,T,he,U);var Vn=m.memoizedState;ke!==Gt||zt!==Vn||Zo.current||da?(typeof In=="function"&&(ug(m,w,In,T),Vn=m.memoizedState),(dt=da||dg(m,w,dt,T,zt,Vn,He)||!1)?($t||typeof he.UNSAFE_componentWillUpdate!="function"&&typeof he.componentWillUpdate!="function"||(typeof he.componentWillUpdate=="function"&&he.componentWillUpdate(T,Vn,He),typeof he.UNSAFE_componentWillUpdate=="function"&&he.UNSAFE_componentWillUpdate(T,Vn,He)),typeof he.componentDidUpdate=="function"&&(m.flags|=4),typeof he.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof he.componentDidUpdate!="function"||ke===g.memoizedProps&&zt===g.memoizedState||(m.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||ke===g.memoizedProps&&zt===g.memoizedState||(m.flags|=1024),m.memoizedProps=T,m.memoizedState=Vn),he.props=T,he.state=Vn,he.context=He,T=dt):(typeof he.componentDidUpdate!="function"||ke===g.memoizedProps&&zt===g.memoizedState||(m.flags|=4),typeof he.getSnapshotBeforeUpdate!="function"||ke===g.memoizedProps&&zt===g.memoizedState||(m.flags|=1024),T=!1)}return L0(g,m,w,T,Q,U)}function L0(g,m,w,T,U,Q){gd(g,m);var he=(m.flags&128)!==0;if(!T&&!he)return U&&wp(m,w,!1),yl(g,m,Q);T=m.stateNode,ah.current=m;var ke=he&&typeof w.getDerivedStateFromError!="function"?null:T.render();return m.flags|=1,g!==null&&he?(m.child=Qi(m,g.child,null,Q),m.child=Qi(m,null,ke,Q)):kr(g,m,ke,Q),m.memoizedState=T.state,U&&wp(m,w,!0),m.child}function E0(g){var m=g.stateNode;m.pendingContext?a1(g,m.pendingContext,m.pendingContext!==m.context):m.context&&a1(g,m.context,!1),og(g,m.containerInfo)}function Ks(g,m,w,T,U){return bl(),fs(U),m.flags|=256,kr(g,m,w,T),m.child}var Xu={dehydrated:null,treeContext:null,retryLane:0};function tf(g){return{baseLanes:g,cachePool:null,transitions:null}}function nf(g,m,w){var T=m.pendingProps,U=gs.current,Q=!1,he=(m.flags&128)!==0,ke;if((ke=he)||(ke=g!==null&&g.memoizedState===null?!1:(U&2)!==0),ke?(Q=!0,m.flags&=-129):(g===null||g.memoizedState!==null)&&(U|=1),ns(gs,U&1),g===null)return Ms(m),g=m.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(m.mode&1?g.data==="$!"?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(he=T.children,g=T.fallback,Q?(T=m.mode,Q=m.child,he={mode:"hidden",children:he},!(T&1)&&Q!==null?(Q.childLanes=0,Q.pendingProps=he):Q=k_(he,T,0,null),g=lf(g,T,w,null),Q.return=m,g.return=m,Q.sibling=g,m.child=Q,m.child.memoizedState=tf(w),m.memoizedState=Xu,g):Tc(m,he));if(U=g.memoizedState,U!==null&&(ke=U.dehydrated,ke!==null))return jt(g,m,he,T,ke,U,w);if(Q){Q=T.fallback,he=m.mode,U=g.child,ke=U.sibling;var He={mode:"hidden",children:T.children};return!(he&1)&&m.child!==U?(T=m.child,T.childLanes=0,T.pendingProps=He,m.deletions=null):(T=Ll(U,He),T.subtreeFlags=U.subtreeFlags&14680064),ke!==null?Q=Ll(ke,Q):(Q=lf(Q,he,w,null),Q.flags|=2),Q.return=m,T.return=m,T.sibling=Q,m.child=T,T=Q,Q=m.child,he=g.child.memoizedState,he=he===null?tf(w):{baseLanes:he.baseLanes|w,cachePool:null,transitions:he.transitions},Q.memoizedState=he,Q.childLanes=g.childLanes&~w,m.memoizedState=Xu,T}return Q=g.child,g=Q.sibling,T=Ll(Q,{mode:"visible",children:T.children}),!(m.mode&1)&&(T.lanes=w),T.return=m,T.sibling=null,g!==null&&(w=m.deletions,w===null?(m.deletions=[g],m.flags|=16):w.push(g)),m.child=T,m.memoizedState=null,T}function Tc(g,m){return m=k_({mode:"visible",children:m},g.mode,0,null),m.return=g,g.child=m}function ma(g,m,w,T){return T!==null&&fs(T),Qi(m,g.child,null,w),g=Tc(m,m.pendingProps.children),g.flags|=2,m.memoizedState=null,g}function jt(g,m,w,T,U,Q,he){if(w)return m.flags&256?(m.flags&=-257,T=hg(Error(t(422))),ma(g,m,he,T)):m.memoizedState!==null?(m.child=g.child,m.flags|=128,null):(Q=T.fallback,U=m.mode,T=k_({mode:"visible",children:T.children},U,0,null),Q=lf(Q,U,he,null),Q.flags|=2,T.return=m,Q.return=m,T.sibling=Q,m.child=T,m.mode&1&&Qi(m,g.child,null,he),m.child.memoizedState=tf(he),m.memoizedState=Xu,Q);if(!(m.mode&1))return ma(g,m,he,null);if(U.data==="$!"){if(T=U.nextSibling&&U.nextSibling.dataset,T)var ke=T.dgst;return T=ke,Q=Error(t(419)),T=hg(Q,T,void 0),ma(g,m,he,T)}if(ke=(he&g.childLanes)!==0,pa||ke){if(T=zo,T!==null){switch(he&-he){case 4:U=2;break;case 16:U=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:U=32;break;case 536870912:U=268435456;break;default:U=0}U=U&(T.suspendedLanes|he)?0:U,U!==0&&U!==Q.retryLane&&(Q.retryLane=U,ud(g,U),ec(T,g,U,-1))}return k0(),T=hg(Error(t(421))),ma(g,m,he,T)}return U.data==="$?"?(m.flags|=128,m.child=g.child,m=cy.bind(null,g),U._reactRetry=m,null):(g=Q.treeContext,Kl=eh(U.nextSibling),Po=m,Ss=!0,Fo=null,g!==null&&(Xo[gu++]=$u,Xo[gu++]=ju,Xo[gu++]=$h,$u=g.id,ju=g.overflow,$h=m),m=Tc(m,T.children),m.flags|=4096,m)}function Qu(g,m,w){g.lanes|=m;var T=g.alternate;T!==null&&(T.lanes|=m),Tr(g.return,m,w)}function pd(g,m,w,T,U){var Q=g.memoizedState;Q===null?g.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:T,tail:w,tailMode:U}:(Q.isBackwards=m,Q.rendering=null,Q.renderingStartTime=0,Q.last=T,Q.tail=w,Q.tailMode=U)}function _a(g,m,w){var T=m.pendingProps,U=T.revealOrder,Q=T.tail;if(kr(g,m,T.children,w),T=gs.current,T&2)T=T&1|2,m.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=m.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&Qu(g,w,m);else if(g.tag===19)Qu(g,w,m);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}T&=1}if(ns(gs,T),!(m.mode&1))m.memoizedState=null;else switch(U){case"forwards":for(w=m.child,U=null;w!==null;)g=w.alternate,g!==null&&Sc(g)===null&&(U=w),w=w.sibling;w=U,w===null?(U=m.child,m.child=null):(U=w.sibling,w.sibling=null),pd(m,!1,U,w,Q);break;case"backwards":for(w=null,U=m.child,m.child=null;U!==null;){if(g=U.alternate,g!==null&&Sc(g)===null){m.child=U;break}g=U.sibling,U.sibling=w,w=U,U=g}pd(m,!0,w,null,Q);break;case"together":pd(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function m_(g,m){!(m.mode&1)&&g!==null&&(g.alternate=null,m.alternate=null,m.flags|=2)}function yl(g,m,w){if(g!==null&&(m.dependencies=g.dependencies),_d|=m.lanes,!(w&m.childLanes))return null;if(g!==null&&m.child!==g.child)throw Error(t(153));if(m.child!==null){for(g=m.child,w=Ll(g,g.pendingProps),m.child=w,w.return=m;g.sibling!==null;)g=g.sibling,w=w.sibling=Ll(g,g.pendingProps),w.return=m;w.sibling=null}return m.child}function gg(g,m,w){switch(m.tag){case 3:E0(m),bl();break;case 5:Ip(m);break;case 1:vl(m.type)&&wo(m);break;case 4:og(m,m.stateNode.containerInfo);break;case 10:var T=m.type._context,U=m.memoizedProps.value;ns(ng,T._currentValue),T._currentValue=U;break;case 13:if(T=m.memoizedState,T!==null)return T.dehydrated!==null?(ns(gs,gs.current&1),m.flags|=128,null):w&m.child.childLanes?nf(g,m,w):(ns(gs,gs.current&1),g=yl(g,m,w),g!==null?g.sibling:null);ns(gs,gs.current&1);break;case 19:if(T=(w&m.childLanes)!==0,g.flags&128){if(T)return _a(g,m,w);m.flags|=128}if(U=m.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),ns(gs,gs.current),T)break;return null;case 22:case 23:return m.lanes=0,ef(g,m,w)}return yl(g,m,w)}var xr,Pp,g1,Fp;xr=function(g,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Pp=function(){},g1=function(g,m,w,T){var U=g.memoizedProps;if(U!==T){g=m.stateNode,Yl(_u.current);var Q=null;switch(w){case"input":U=rn(g,U),T=rn(g,T),Q=[];break;case"select":U=B({},U,{value:void 0}),T=B({},T,{value:void 0}),Q=[];break;case"textarea":U=Mt(g,U),T=Mt(g,T),Q=[];break;default:typeof U.onClick!="function"&&typeof T.onClick=="function"&&(g.onclick=yp)}oi(w,T);var he;w=null;for(dt in U)if(!T.hasOwnProperty(dt)&&U.hasOwnProperty(dt)&&U[dt]!=null)if(dt==="style"){var ke=U[dt];for(he in ke)ke.hasOwnProperty(he)&&(w||(w={}),w[he]="")}else dt!=="dangerouslySetInnerHTML"&&dt!=="children"&&dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&dt!=="autoFocus"&&(i.hasOwnProperty(dt)?Q||(Q=[]):(Q=Q||[]).push(dt,null));for(dt in T){var He=T[dt];if(ke=U!=null?U[dt]:void 0,T.hasOwnProperty(dt)&&He!==ke&&(He!=null||ke!=null))if(dt==="style")if(ke){for(he in ke)!ke.hasOwnProperty(he)||He&&He.hasOwnProperty(he)||(w||(w={}),w[he]="");for(he in He)He.hasOwnProperty(he)&&ke[he]!==He[he]&&(w||(w={}),w[he]=He[he])}else w||(Q||(Q=[]),Q.push(dt,w)),w=He;else dt==="dangerouslySetInnerHTML"?(He=He?He.__html:void 0,ke=ke?ke.__html:void 0,He!=null&&ke!==He&&(Q=Q||[]).push(dt,He)):dt==="children"?typeof He!="string"&&typeof He!="number"||(Q=Q||[]).push(dt,""+He):dt!=="suppressContentEditableWarning"&&dt!=="suppressHydrationWarning"&&(i.hasOwnProperty(dt)?(He!=null&&dt==="onScroll"&&Os("scroll",g),Q||ke===He||(Q=[])):(Q=Q||[]).push(dt,He))}w&&(Q=Q||[]).push("style",w);var dt=Q;(m.updateQueue=dt)&&(m.flags|=4)}},Fp=function(g,m,w,T){w!==T&&(m.flags|=4)};function Ql(g,m){if(!Ss)switch(g.tailMode){case"hidden":m=g.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?g.tail=null:w.sibling=null;break;case"collapsed":w=g.tail;for(var T=null;w!==null;)w.alternate!==null&&(T=w),w=w.sibling;T===null?m||g.tail===null?g.tail=null:g.tail.sibling=null:T.sibling=null}}function Ho(g){var m=g.alternate!==null&&g.alternate.child===g.child,w=0,T=0;if(m)for(var U=g.child;U!==null;)w|=U.lanes|U.childLanes,T|=U.subtreeFlags&14680064,T|=U.flags&14680064,U.return=g,U=U.sibling;else for(U=g.child;U!==null;)w|=U.lanes|U.childLanes,T|=U.subtreeFlags,T|=U.flags,U.return=g,U=U.sibling;return g.subtreeFlags|=T,g.childLanes=w,m}function p1(g,m,w){var T=m.pendingProps;switch(qu(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(m),null;case 1:return vl(m.type)&&r_(),Ho(m),null;case 3:return T=m.stateNode,ka(),Gr(Zo),Gr(yo),Tp(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(g===null||g.child===null)&&(pu(m)?m.flags|=4:g===null||g.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Fo!==null&&(E_(Fo),Fo=null))),Pp(g,m),Ho(m),null;case 5:Bo(m);var U=Yl(Ta.current);if(w=m.type,g!==null&&m.stateNode!=null)g1(g,m,w,T,U),g.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!T){if(m.stateNode===null)throw Error(t(166));return Ho(m),null}if(g=Yl(_u.current),pu(m)){T=m.stateNode,w=m.type;var Q=m.memoizedProps;switch(T[Ul]=m,T[$l]=Q,g=(m.mode&1)!==0,w){case"dialog":Os("cancel",T),Os("close",T);break;case"iframe":case"object":case"embed":Os("load",T);break;case"video":case"audio":for(U=0;U<el.length;U++)Os(el[U],T);break;case"source":Os("error",T);break;case"img":case"image":case"link":Os("error",T),Os("load",T);break;case"details":Os("toggle",T);break;case"input":on(T,Q),Os("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!Q.multiple},Os("invalid",T);break;case"textarea":cn(T,Q),Os("invalid",T)}oi(w,Q),U=null;for(var he in Q)if(Q.hasOwnProperty(he)){var ke=Q[he];he==="children"?typeof ke=="string"?T.textContent!==ke&&(Q.suppressHydrationWarning!==!0&&sd(T.textContent,ke,g),U=["children",ke]):typeof ke=="number"&&T.textContent!==""+ke&&(Q.suppressHydrationWarning!==!0&&sd(T.textContent,ke,g),U=["children",""+ke]):i.hasOwnProperty(he)&&ke!=null&&he==="onScroll"&&Os("scroll",T)}switch(w){case"input":Ut(T),Pt(T,Q,!0);break;case"textarea":Ut(T),Pe(T);break;case"select":case"option":break;default:typeof Q.onClick=="function"&&(T.onclick=yp)}T=U,m.updateQueue=T,T!==null&&(m.flags|=4)}else{he=U.nodeType===9?U:U.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=at(w)),g==="http://www.w3.org/1999/xhtml"?w==="script"?(g=he.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof T.is=="string"?g=he.createElement(w,{is:T.is}):(g=he.createElement(w),w==="select"&&(he=g,T.multiple?he.multiple=!0:T.size&&(he.size=T.size))):g=he.createElementNS(g,w),g[Ul]=m,g[$l]=T,xr(g,m,!1,!1),m.stateNode=g;e:{switch(he=lt(w,T),w){case"dialog":Os("cancel",g),Os("close",g),U=T;break;case"iframe":case"object":case"embed":Os("load",g),U=T;break;case"video":case"audio":for(U=0;U<el.length;U++)Os(el[U],g);U=T;break;case"source":Os("error",g),U=T;break;case"img":case"image":case"link":Os("error",g),Os("load",g),U=T;break;case"details":Os("toggle",g),U=T;break;case"input":on(g,T),U=rn(g,T),Os("invalid",g);break;case"option":U=T;break;case"select":g._wrapperState={wasMultiple:!!T.multiple},U=B({},T,{value:void 0}),Os("invalid",g);break;case"textarea":cn(g,T),U=Mt(g,T),Os("invalid",g);break;default:U=T}oi(w,U),ke=U;for(Q in ke)if(ke.hasOwnProperty(Q)){var He=ke[Q];Q==="style"?tn(g,He):Q==="dangerouslySetInnerHTML"?(He=He?He.__html:void 0,He!=null&&ln(g,He)):Q==="children"?typeof He=="string"?(w!=="textarea"||He!=="")&&Rn(g,He):typeof He=="number"&&Rn(g,""+He):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?He!=null&&Q==="onScroll"&&Os("scroll",g):He!=null&&O(g,Q,He,he))}switch(w){case"input":Ut(g),Pt(g,T,!1);break;case"textarea":Ut(g),Pe(g);break;case"option":T.value!=null&&g.setAttribute("value",""+Rt(T.value));break;case"select":g.multiple=!!T.multiple,Q=T.value,Q!=null?ot(g,!!T.multiple,Q,!1):T.defaultValue!=null&&ot(g,!!T.multiple,T.defaultValue,!0);break;default:typeof U.onClick=="function"&&(g.onclick=yp)}switch(w){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ho(m),null;case 6:if(g&&m.stateNode!=null)Fp(g,m,g.memoizedProps,T);else{if(typeof T!="string"&&m.stateNode===null)throw Error(t(166));if(w=Yl(Ta.current),Yl(_u.current),pu(m)){if(T=m.stateNode,w=m.memoizedProps,T[Ul]=m,(Q=T.nodeValue!==w)&&(g=Po,g!==null))switch(g.tag){case 3:sd(T.nodeValue,w,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&sd(T.nodeValue,w,(g.mode&1)!==0)}Q&&(m.flags|=4)}else T=(w.nodeType===9?w:w.ownerDocument).createTextNode(T),T[Ul]=m,m.stateNode=T}return Ho(m),null;case 13:if(Gr(gs),T=m.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(Ss&&Kl!==null&&m.mode&1&&!(m.flags&128))a_(),bl(),m.flags|=98560,Q=!1;else if(Q=pu(m),T!==null&&T.dehydrated!==null){if(g===null){if(!Q)throw Error(t(318));if(Q=m.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(t(317));Q[Ul]=m}else bl(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;Ho(m),Q=!1}else Fo!==null&&(E_(Fo),Fo=null),Q=!0;if(!Q)return m.flags&65536?m:null}return m.flags&128?(m.lanes=w,m):(T=T!==null,T!==(g!==null&&g.memoizedState!==null)&&T&&(m.child.flags|=8192,m.mode&1&&(g===null||gs.current&1?xo===0&&(xo=3):k0())),m.updateQueue!==null&&(m.flags|=4),Ho(m),null);case 4:return ka(),Pp(g,m),g===null&&pl(m.stateNode.containerInfo),Ho(m),null;case 10:return Ep(m.type._context),Ho(m),null;case 17:return vl(m.type)&&r_(),Ho(m),null;case 19:if(Gr(gs),Q=m.memoizedState,Q===null)return Ho(m),null;if(T=(m.flags&128)!==0,he=Q.rendering,he===null)if(T)Ql(Q,!1);else{if(xo!==0||g!==null&&g.flags&128)for(g=m.child;g!==null;){if(he=Sc(g),he!==null){for(m.flags|=128,Ql(Q,!1),T=he.updateQueue,T!==null&&(m.updateQueue=T,m.flags|=4),m.subtreeFlags=0,T=w,w=m.child;w!==null;)Q=w,g=T,Q.flags&=14680066,he=Q.alternate,he===null?(Q.childLanes=0,Q.lanes=g,Q.child=null,Q.subtreeFlags=0,Q.memoizedProps=null,Q.memoizedState=null,Q.updateQueue=null,Q.dependencies=null,Q.stateNode=null):(Q.childLanes=he.childLanes,Q.lanes=he.lanes,Q.child=he.child,Q.subtreeFlags=0,Q.deletions=null,Q.memoizedProps=he.memoizedProps,Q.memoizedState=he.memoizedState,Q.updateQueue=he.updateQueue,Q.type=he.type,g=he.dependencies,Q.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),w=w.sibling;return ns(gs,gs.current&1|2),m.child}g=g.sibling}Q.tail!==null&&Yt()>bd&&(m.flags|=128,T=!0,Ql(Q,!1),m.lanes=4194304)}else{if(!T)if(g=Sc(he),g!==null){if(m.flags|=128,T=!0,w=g.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),Ql(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!he.alternate&&!Ss)return Ho(m),null}else 2*Yt()-Q.renderingStartTime>bd&&w!==1073741824&&(m.flags|=128,T=!0,Ql(Q,!1),m.lanes=4194304);Q.isBackwards?(he.sibling=m.child,m.child=he):(w=Q.last,w!==null?w.sibling=he:m.child=he,Q.last=he)}return Q.tail!==null?(m=Q.tail,Q.rendering=m,Q.tail=m.sibling,Q.renderingStartTime=Yt(),m.sibling=null,w=gs.current,ns(gs,T?w&1|2:w&1),m):(Ho(m),null);case 22:case 23:return x_(),T=m.memoizedState!==null,g!==null&&g.memoizedState!==null!==T&&(m.flags|=8192),T&&m.mode&1?Jl&1073741824&&(Ho(m),m.subtreeFlags&6&&(m.flags|=8192)):Ho(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function ay(g,m){switch(qu(m),m.tag){case 1:return vl(m.type)&&r_(),g=m.flags,g&65536?(m.flags=g&-65537|128,m):null;case 3:return ka(),Gr(Zo),Gr(yo),Tp(),g=m.flags,g&65536&&!(g&128)?(m.flags=g&-65537|128,m):null;case 5:return Bo(m),null;case 13:if(Gr(gs),g=m.memoizedState,g!==null&&g.dehydrated!==null){if(m.alternate===null)throw Error(t(340));bl()}return g=m.flags,g&65536?(m.flags=g&-65537|128,m):null;case 19:return Gr(gs),null;case 4:return ka(),null;case 10:return Ep(m.type._context),null;case 22:case 23:return x_(),null;case 24:return null;default:return null}}var Bp=!1,Nr=!1,Yr=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function lh(g,m){var w=g.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(T){Vs(g,m,T)}else w.current=null}function md(g,m,w){try{w()}catch(T){Vs(g,m,T)}}var __=!1;function v_(g,m){if(vc=lp,g=li(),nd(g)){if("selectionStart"in g)var w={start:g.selectionStart,end:g.selectionEnd};else e:{w=(w=g.ownerDocument)&&w.defaultView||window;var T=w.getSelection&&w.getSelection();if(T&&T.rangeCount!==0){w=T.anchorNode;var U=T.anchorOffset,Q=T.focusNode;T=T.focusOffset;try{w.nodeType,Q.nodeType}catch{w=null;break e}var he=0,ke=-1,He=-1,dt=0,$t=0,Gt=g,zt=null;t:for(;;){for(var In;Gt!==w||U!==0&&Gt.nodeType!==3||(ke=he+U),Gt!==Q||T!==0&&Gt.nodeType!==3||(He=he+T),Gt.nodeType===3&&(he+=Gt.nodeValue.length),(In=Gt.firstChild)!==null;)zt=Gt,Gt=In;for(;;){if(Gt===g)break t;if(zt===w&&++dt===U&&(ke=he),zt===Q&&++$t===T&&(He=he),(In=Gt.nextSibling)!==null)break;Gt=zt,zt=Gt.parentNode}Gt=In}w=ke===-1||He===-1?null:{start:ke,end:He}}else w=null}w=w||{start:0,end:0}}else w=null;for(fu={focusedElem:g,selectionRange:w},lp=!1,Sn=m;Sn!==null;)if(m=Sn,g=m.child,(m.subtreeFlags&1028)!==0&&g!==null)g.return=m,Sn=g;else for(;Sn!==null;){m=Sn;try{var Vn=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Vn!==null){var jn=Vn.memoizedProps,uo=Vn.memoizedState,nt=m.stateNode,Ke=nt.getSnapshotBeforeUpdate(m.elementType===m.type?jn:nl(m.type,jn),uo);nt.__reactInternalSnapshotBeforeUpdate=Ke}break;case 3:var tt=m.stateNode.containerInfo;tt.nodeType===1?tt.textContent="":tt.nodeType===9&&tt.documentElement&&tt.removeChild(tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(nn){Vs(m,m.return,nn)}if(g=m.sibling,g!==null){g.return=m.return,Sn=g;break}Sn=m.return}return Vn=__,__=!1,Vn}function ta(g,m,w){var T=m.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var U=T=T.next;do{if((U.tag&g)===g){var Q=U.destroy;U.destroy=void 0,Q!==void 0&&md(m,w,Q)}U=U.next}while(U!==T)}}function ii(g,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&g)===g){var T=w.create;w.destroy=T()}w=w.next}while(w!==m)}}function uh(g){var m=g.ref;if(m!==null){var w=g.stateNode;switch(g.tag){case 5:g=w;break;default:g=w}typeof m=="function"?m(g):m.current=g}}function b_(g){var m=g.alternate;m!==null&&(g.alternate=null,b_(m)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(m=g.stateNode,m!==null&&(delete m[Ul],delete m[$l],delete m[Jf],delete m[j],delete m[zu])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function ch(g){return g.tag===5||g.tag===3||g.tag===4}function m1(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||ch(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Wp(g,m,w){var T=g.tag;if(T===5||T===6)g=g.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(g,m):w.insertBefore(g,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(g,w)):(m=w,m.appendChild(g)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=yp));else if(T!==4&&(g=g.child,g!==null))for(Wp(g,m,w),g=g.sibling;g!==null;)Wp(g,m,w),g=g.sibling}function pg(g,m,w){var T=g.tag;if(T===5||T===6)g=g.stateNode,m?w.insertBefore(g,m):w.appendChild(g);else if(T!==4&&(g=g.child,g!==null))for(pg(g,m,w),g=g.sibling;g!==null;)pg(g,m,w),g=g.sibling}var yr=null,Ju=!1;function Cu(g,m,w){for(w=w.child;w!==null;)Vp(g,m,w),w=w.sibling}function Vp(g,m,w){if(bo&&typeof bo.onCommitFiberUnmount=="function")try{bo.onCommitFiberUnmount(Ka,w)}catch{}switch(w.tag){case 5:Nr||lh(w,m);case 6:var T=yr,U=Ju;yr=null,Cu(g,m,w),yr=T,Ju=U,yr!==null&&(Ju?(g=yr,w=w.stateNode,g.nodeType===8?g.parentNode.removeChild(w):g.removeChild(w)):yr.removeChild(w.stateNode));break;case 18:yr!==null&&(Ju?(g=yr,w=w.stateNode,g.nodeType===8?p0(g.parentNode,w):g.nodeType===1&&p0(g,w),ei(g)):p0(yr,w.stateNode));break;case 4:T=yr,U=Ju,yr=w.stateNode.containerInfo,Ju=!0,Cu(g,m,w),yr=T,Ju=U;break;case 0:case 11:case 14:case 15:if(!Nr&&(T=w.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){U=T=T.next;do{var Q=U,he=Q.destroy;Q=Q.tag,he!==void 0&&(Q&2||Q&4)&&md(w,m,he),U=U.next}while(U!==T)}Cu(g,m,w);break;case 1:if(!Nr&&(lh(w,m),T=w.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=w.memoizedProps,T.state=w.memoizedState,T.componentWillUnmount()}catch(ke){Vs(w,m,ke)}Cu(g,m,w);break;case 21:Cu(g,m,w);break;case 22:w.mode&1?(Nr=(T=Nr)||w.memoizedState!==null,Cu(g,m,w),Nr=T):Cu(g,m,w);break;default:Cu(g,m,w)}}function kc(g){var m=g.updateQueue;if(m!==null){g.updateQueue=null;var w=g.stateNode;w===null&&(w=g.stateNode=new Yr),m.forEach(function(T){var U=dy.bind(null,g,T);w.has(T)||(w.add(T),T.then(U,U))})}}function Aa(g,m){var w=m.deletions;if(w!==null)for(var T=0;T<w.length;T++){var U=w[T];try{var Q=g,he=m,ke=he;e:for(;ke!==null;){switch(ke.tag){case 5:yr=ke.stateNode,Ju=!1;break e;case 3:yr=ke.stateNode.containerInfo,Ju=!0;break e;case 4:yr=ke.stateNode.containerInfo,Ju=!0;break e}ke=ke.return}if(yr===null)throw Error(t(160));Vp(Q,he,U),yr=null,Ju=!1;var He=U.alternate;He!==null&&(He.return=null),U.return=null}catch(dt){Vs(U,m,dt)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)C_(m,g),m=m.sibling}function C_(g,m){var w=g.alternate,T=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(Aa(m,g),yu(g),T&4){try{ta(3,g,g.return),ii(3,g)}catch(jn){Vs(g,g.return,jn)}try{ta(5,g,g.return)}catch(jn){Vs(g,g.return,jn)}}break;case 1:Aa(m,g),yu(g),T&512&&w!==null&&lh(w,w.return);break;case 5:if(Aa(m,g),yu(g),T&512&&w!==null&&lh(w,w.return),g.flags&32){var U=g.stateNode;try{Rn(U,"")}catch(jn){Vs(g,g.return,jn)}}if(T&4&&(U=g.stateNode,U!=null)){var Q=g.memoizedProps,he=w!==null?w.memoizedProps:Q,ke=g.type,He=g.updateQueue;if(g.updateQueue=null,He!==null)try{ke==="input"&&Q.type==="radio"&&Q.name!=null&&qn(U,Q),lt(ke,he);var dt=lt(ke,Q);for(he=0;he<He.length;he+=2){var $t=He[he],Gt=He[he+1];$t==="style"?tn(U,Gt):$t==="dangerouslySetInnerHTML"?ln(U,Gt):$t==="children"?Rn(U,Gt):O(U,$t,Gt,dt)}switch(ke){case"input":Ft(U,Q);break;case"textarea":bn(U,Q);break;case"select":var zt=U._wrapperState.wasMultiple;U._wrapperState.wasMultiple=!!Q.multiple;var In=Q.value;In!=null?ot(U,!!Q.multiple,In,!1):zt!==!!Q.multiple&&(Q.defaultValue!=null?ot(U,!!Q.multiple,Q.defaultValue,!0):ot(U,!!Q.multiple,Q.multiple?[]:"",!1))}U[$l]=Q}catch(jn){Vs(g,g.return,jn)}}break;case 6:if(Aa(m,g),yu(g),T&4){if(g.stateNode===null)throw Error(t(162));U=g.stateNode,Q=g.memoizedProps;try{U.nodeValue=Q}catch(jn){Vs(g,g.return,jn)}}break;case 3:if(Aa(m,g),yu(g),T&4&&w!==null&&w.memoizedState.isDehydrated)try{ei(m.containerInfo)}catch(jn){Vs(g,g.return,jn)}break;case 4:Aa(m,g),yu(g);break;case 13:Aa(m,g),yu(g),U=g.child,U.flags&8192&&(Q=U.memoizedState!==null,U.stateNode.isHidden=Q,!Q||U.alternate!==null&&U.alternate.memoizedState!==null||(w_=Yt())),T&4&&kc(g);break;case 22:if($t=w!==null&&w.memoizedState!==null,g.mode&1?(Nr=(dt=Nr)||$t,Aa(m,g),Nr=dt):Aa(m,g),yu(g),T&8192){if(dt=g.memoizedState!==null,(g.stateNode.isHidden=dt)&&!$t&&g.mode&1)for(Sn=g,$t=g.child;$t!==null;){for(Gt=Sn=$t;Sn!==null;){switch(zt=Sn,In=zt.child,zt.tag){case 0:case 11:case 14:case 15:ta(4,zt,zt.return);break;case 1:lh(zt,zt.return);var Vn=zt.stateNode;if(typeof Vn.componentWillUnmount=="function"){T=zt,w=zt.return;try{m=T,Vn.props=m.memoizedProps,Vn.state=m.memoizedState,Vn.componentWillUnmount()}catch(jn){Vs(T,w,jn)}}break;case 5:lh(zt,zt.return);break;case 22:if(zt.memoizedState!==null){Oa(Gt);continue}}In!==null?(In.return=zt,Sn=In):Oa(Gt)}$t=$t.sibling}e:for($t=null,Gt=g;;){if(Gt.tag===5){if($t===null){$t=Gt;try{U=Gt.stateNode,dt?(Q=U.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none"):(ke=Gt.stateNode,He=Gt.memoizedProps.style,he=He!=null&&He.hasOwnProperty("display")?He.display:null,ke.style.display=Tt("display",he))}catch(jn){Vs(g,g.return,jn)}}}else if(Gt.tag===6){if($t===null)try{Gt.stateNode.nodeValue=dt?"":Gt.memoizedProps}catch(jn){Vs(g,g.return,jn)}}else if((Gt.tag!==22&&Gt.tag!==23||Gt.memoizedState===null||Gt===g)&&Gt.child!==null){Gt.child.return=Gt,Gt=Gt.child;continue}if(Gt===g)break e;for(;Gt.sibling===null;){if(Gt.return===null||Gt.return===g)break e;$t===Gt&&($t=null),Gt=Gt.return}$t===Gt&&($t=null),Gt.sibling.return=Gt.return,Gt=Gt.sibling}}break;case 19:Aa(m,g),yu(g),T&4&&kc(g);break;case 21:break;default:Aa(m,g),yu(g)}}function yu(g){var m=g.flags;if(m&2){try{e:{for(var w=g.return;w!==null;){if(ch(w)){var T=w;break e}w=w.return}throw Error(t(160))}switch(T.tag){case 5:var U=T.stateNode;T.flags&32&&(Rn(U,""),T.flags&=-33);var Q=m1(g);pg(g,Q,U);break;case 3:case 4:var he=T.stateNode.containerInfo,ke=m1(g);Wp(g,ke,he);break;default:throw Error(t(161))}}catch(He){Vs(g,g.return,He)}g.flags&=-3}m&4096&&(g.flags&=-4097)}function rf(g,m,w){Sn=g,wu(g)}function wu(g,m,w){for(var T=(g.mode&1)!==0;Sn!==null;){var U=Sn,Q=U.child;if(U.tag===22&&T){var he=U.memoizedState!==null||Bp;if(!he){var ke=U.alternate,He=ke!==null&&ke.memoizedState!==null||Nr;ke=Bp;var dt=Nr;if(Bp=he,(Nr=He)&&!dt)for(Sn=U;Sn!==null;)he=Sn,He=he.child,he.tag===22&&he.memoizedState!==null?_1(U):He!==null?(He.return=he,Sn=He):_1(U);for(;Q!==null;)Sn=Q,wu(Q),Q=Q.sibling;Sn=U,Bp=ke,Nr=dt}wr(g)}else U.subtreeFlags&8772&&Q!==null?(Q.return=U,Sn=Q):wr(g)}}function wr(g){for(;Sn!==null;){var m=Sn;if(m.flags&8772){var w=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Nr||ii(5,m);break;case 1:var T=m.stateNode;if(m.flags&4&&!Nr)if(w===null)T.componentDidMount();else{var U=m.elementType===m.type?w.memoizedProps:nl(m.type,w.memoizedProps);T.componentDidUpdate(U,w.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var Q=m.updateQueue;Q!==null&&Dp(m,Q,T);break;case 3:var he=m.updateQueue;if(he!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}Dp(m,he,w)}break;case 5:var ke=m.stateNode;if(w===null&&m.flags&4){w=ke;var He=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":He.autoFocus&&w.focus();break;case"img":He.src&&(w.src=He.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var dt=m.alternate;if(dt!==null){var $t=dt.memoizedState;if($t!==null){var Gt=$t.dehydrated;Gt!==null&&ei(Gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Nr||m.flags&512&&uh(m)}catch(zt){Vs(m,m.return,zt)}}if(m===g){Sn=null;break}if(w=m.sibling,w!==null){w.return=m.return,Sn=w;break}Sn=m.return}}function Oa(g){for(;Sn!==null;){var m=Sn;if(m===g){Sn=null;break}var w=m.sibling;if(w!==null){w.return=m.return,Sn=w;break}Sn=m.return}}function _1(g){for(;Sn!==null;){var m=Sn;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{ii(4,m)}catch(He){Vs(m,w,He)}break;case 1:var T=m.stateNode;if(typeof T.componentDidMount=="function"){var U=m.return;try{T.componentDidMount()}catch(He){Vs(m,U,He)}}var Q=m.return;try{uh(m)}catch(He){Vs(m,Q,He)}break;case 5:var he=m.return;try{uh(m)}catch(He){Vs(m,he,He)}}}catch(He){Vs(m,m.return,He)}if(m===g){Sn=null;break}var ke=m.sibling;if(ke!==null){ke.return=m.return,Sn=ke;break}Sn=m.return}}var Hp=Math.ceil,y_=H.ReactCurrentDispatcher,x0=H.ReactCurrentOwner,Ma=H.ReactCurrentBatchConfig,Sr=0,zo=null,Eo=null,va=0,Jl=0,mg=Js(0),xo=0,_g=null,_d=0,dh=0,vg=0,vd=null,Ra=null,w_=0,bd=1/0,Su=null,zp=!1,Lu=null,wl=null,S_=!1,Cd=null,Es=0,Up=0,D0=null,L_=-1,bg=0;function il(){return Sr&6?Yt():L_!==-1?L_:L_=Yt()}function hh(g){return g.mode&1?Sr&2&&va!==0?va&-va:m0.transition!==null?(bg===0&&(bg=Hm()),bg):(g=Er,g!==0||(g=window.event,g=g===void 0?16:a0(g.type)),g):1}function ec(g,m,w,T){if(50<Up)throw Up=0,D0=null,Error(t(185));rp(g,w,T),(!(Sr&2)||g!==zo)&&(g===zo&&(!(Sr&2)&&(dh|=w),xo===4&&yd(g,va)),Sl(g,T),w===1&&Sr===0&&!(m.mode&1)&&(bd=Yt()+500,Sp&&Ro()))}function Sl(g,m){var w=g.callbackNode;ny(g,m);var T=fc(g,g===zo?va:0);if(T===0)w!==null&&wt(w),g.callbackNode=null,g.callbackPriority=0;else if(m=T&-T,g.callbackPriority!==m){if(w!=null&&wt(w),m===1)g.tag===0?Da(b1.bind(null,g)):Uh(b1.bind(null,g)),zl(function(){!(Sr&6)&&Ro()}),w=null;else{switch(uu(T)){case 1:w=Zt;break;case 4:w=Ui;break;case 16:w=_i;break;case 536870912:w=pr;break;default:w=_i}w=x1(w,Cg.bind(null,g))}g.callbackPriority=m,g.callbackNode=w}}function Cg(g,m){if(L_=-1,bg=0,Sr&6)throw Error(t(327));var w=g.callbackNode;if(yg()&&g.callbackNode!==w)return null;var T=fc(g,g===zo?va:0);if(T===0)return null;if(T&30||T&g.expiredLanes||m)m=D_(g,T);else{m=T;var U=Sr;Sr|=2;var Q=y1();(zo!==g||va!==m)&&(Su=null,bd=Yt()+500,of(g,m));do try{Eu();break}catch(ke){C1(g,ke)}while(1);Jo(),y_.current=Q,Sr=U,Eo!==null?m=0:(zo=null,va=0,m=xo)}if(m!==0){if(m===2&&(U=ip(g),U!==0&&(T=U,m=I0(g,U))),m===1)throw w=_g,of(g,0),yd(g,T),Sl(g,Yt()),w;if(m===6)yd(g,T);else{if(U=g.current.alternate,!(T&30)&&!v1(U)&&(m=D_(g,T),m===2&&(Q=ip(g),Q!==0&&(T=Q,m=I0(g,Q))),m===1))throw w=_g,of(g,0),yd(g,T),Sl(g,Yt()),w;switch(g.finishedWork=U,g.finishedLanes=T,m){case 0:case 1:throw Error(t(345));case 2:af(g,Ra,Su);break;case 3:if(yd(g,T),(T&130023424)===T&&(m=w_+500-Yt(),10<m)){if(fc(g,0)!==0)break;if(U=g.suspendedLanes,(U&T)!==T){il(),g.pingedLanes|=g.suspendedLanes&U;break}g.timeoutHandle=xa(af.bind(null,g,Ra,Su),m);break}af(g,Ra,Su);break;case 4:if(yd(g,T),(T&4194240)===T)break;for(m=g.eventTimes,U=-1;0<T;){var he=31-Vu(T);Q=1<<he,he=m[he],he>U&&(U=he),T&=~Q}if(T=U,T=Yt()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*Hp(T/1960))-T,10<T){g.timeoutHandle=xa(af.bind(null,g,Ra,Su),T);break}af(g,Ra,Su);break;case 5:af(g,Ra,Su);break;default:throw Error(t(329))}}}return Sl(g,Yt()),g.callbackNode===w?Cg.bind(null,g):null}function I0(g,m){var w=vd;return g.current.memoizedState.isDehydrated&&(of(g,m).flags|=256),g=D_(g,m),g!==2&&(m=Ra,Ra=w,m!==null&&E_(m)),g}function E_(g){Ra===null?Ra=g:Ra.push.apply(Ra,g)}function v1(g){for(var m=g;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var T=0;T<w.length;T++){var U=w[T],Q=U.getSnapshot;U=U.value;try{if(!Ee(Q(),U))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===g)break;for(;m.sibling===null;){if(m.return===null||m.return===g)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function yd(g,m){for(m&=~vg,m&=~dh,g.suspendedLanes|=m,g.pingedLanes&=~m,g=g.expirationTimes;0<m;){var w=31-Vu(m),T=1<<w;g[w]=-1,m&=~T}}function b1(g){if(Sr&6)throw Error(t(327));yg();var m=fc(g,0);if(!(m&1))return Sl(g,Yt()),null;var w=D_(g,m);if(g.tag!==0&&w===2){var T=ip(g);T!==0&&(m=T,w=I0(g,T))}if(w===1)throw w=_g,of(g,0),yd(g,m),Sl(g,Yt()),w;if(w===6)throw Error(t(345));return g.finishedWork=g.current.alternate,g.finishedLanes=m,af(g,Ra,Su),Sl(g,Yt()),null}function T0(g,m){var w=Sr;Sr|=1;try{return g(m)}finally{Sr=w,Sr===0&&(bd=Yt()+500,Sp&&Ro())}}function sf(g){Cd!==null&&Cd.tag===0&&!(Sr&6)&&yg();var m=Sr;Sr|=1;var w=Ma.transition,T=Er;try{if(Ma.transition=null,Er=1,g)return g()}finally{Er=T,Ma.transition=w,Sr=m,!(Sr&6)&&Ro()}}function x_(){Jl=mg.current,Gr(mg)}function of(g,m){g.finishedWork=null,g.finishedLanes=0;var w=g.timeoutHandle;if(w!==-1&&(g.timeoutHandle=-1,bc(w)),Eo!==null)for(w=Eo.return;w!==null;){var T=w;switch(qu(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&r_();break;case 3:ka(),Gr(Zo),Gr(yo),Tp();break;case 5:Bo(T);break;case 4:ka();break;case 13:Gr(gs);break;case 19:Gr(gs);break;case 10:Ep(T.type._context);break;case 22:case 23:x_()}w=w.return}if(zo=g,Eo=g=Ll(g.current,null),va=Jl=m,xo=0,_g=null,vg=dh=_d=0,Ra=vd=null,ad!==null){for(m=0;m<ad.length;m++)if(w=ad[m],T=w.interleaved,T!==null){w.interleaved=null;var U=T.next,Q=w.pending;if(Q!==null){var he=Q.next;Q.next=U,T.next=he}w.pending=T}ad=null}return g}function C1(g,m){do{var w=Eo;try{if(Jo(),nh.current=lg,vu){for(var T=Ws.memoizedState;T!==null;){var U=T.queue;U!==null&&(U.pending=null),T=T.next}vu=!1}if(Zl=0,Lo=qs=Ws=null,kp=!1,cd=0,x0.current=null,w===null||w.return===null){xo=1,_g=m,Eo=null;break}e:{var Q=g,he=w.return,ke=w,He=m;if(m=va,ke.flags|=32768,He!==null&&typeof He=="object"&&typeof He.then=="function"){var dt=He,$t=ke,Gt=$t.tag;if(!($t.mode&1)&&(Gt===0||Gt===11||Gt===15)){var zt=$t.alternate;zt?($t.updateQueue=zt.updateQueue,$t.memoizedState=zt.memoizedState,$t.lanes=zt.lanes):($t.updateQueue=null,$t.memoizedState=null)}var In=S0(he);if(In!==null){In.flags&=-257,f_(In,he,ke,Q,m),In.mode&1&&fd(Q,dt,m),m=In,He=dt;var Vn=m.updateQueue;if(Vn===null){var jn=new Set;jn.add(He),m.updateQueue=jn}else Vn.add(He);break e}else{if(!(m&1)){fd(Q,dt,m),k0();break e}He=Error(t(426))}}else if(Ss&&ke.mode&1){var uo=S0(he);if(uo!==null){!(uo.flags&65536)&&(uo.flags|=256),f_(uo,he,ke,Q,m),fs(hd(He,ke));break e}}Q=He=hd(He,ke),xo!==4&&(xo=2),vd===null?vd=[Q]:vd.push(Q),Q=he;do{switch(Q.tag){case 3:Q.flags|=65536,m&=-m,Q.lanes|=m;var nt=oh(Q,He,m);xp(Q,nt);break e;case 1:ke=He;var Ke=Q.type,tt=Q.stateNode;if(!(Q.flags&128)&&(typeof Ke.getDerivedStateFromError=="function"||tt!==null&&typeof tt.componentDidCatch=="function"&&(wl===null||!wl.has(tt)))){Q.flags|=65536,m&=-m,Q.lanes|=m;var nn=fg(Q,ke,m);xp(Q,nn);break e}}Q=Q.return}while(Q!==null)}S1(w)}catch(Gn){m=Gn,Eo===w&&w!==null&&(Eo=w=w.return);continue}break}while(1)}function y1(){var g=y_.current;return y_.current=lg,g===null?lg:g}function k0(){(xo===0||xo===3||xo===2)&&(xo=4),zo===null||!(_d&268435455)&&!(dh&268435455)||yd(zo,va)}function D_(g,m){var w=Sr;Sr|=2;var T=y1();(zo!==g||va!==m)&&(Su=null,of(g,m));do try{ly();break}catch(U){C1(g,U)}while(1);if(Jo(),Sr=w,y_.current=T,Eo!==null)throw Error(t(261));return zo=null,va=0,xo}function ly(){for(;Eo!==null;)w1(Eo)}function Eu(){for(;Eo!==null&&!kt();)w1(Eo)}function w1(g){var m=E1(g.alternate,g,Jl);g.memoizedProps=g.pendingProps,m===null?S1(g):Eo=m,x0.current=null}function S1(g){var m=g;do{var w=m.alternate;if(g=m.return,m.flags&32768){if(w=ay(w,m),w!==null){w.flags&=32767,Eo=w;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{xo=6,Eo=null;return}}else if(w=p1(w,m,Jl),w!==null){Eo=w;return}if(m=m.sibling,m!==null){Eo=m;return}Eo=m=g}while(m!==null);xo===0&&(xo=5)}function af(g,m,w){var T=Er,U=Ma.transition;try{Ma.transition=null,Er=1,L1(g,m,w,T)}finally{Ma.transition=U,Er=T}return null}function L1(g,m,w,T){do yg();while(Cd!==null);if(Sr&6)throw Error(t(327));w=g.finishedWork;var U=g.finishedLanes;if(w===null)return null;if(g.finishedWork=null,g.finishedLanes=0,w===g.current)throw Error(t(177));g.callbackNode=null,g.callbackPriority=0;var Q=w.lanes|w.childLanes;if(Hf(g,Q),g===zo&&(Eo=zo=null,va=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||S_||(S_=!0,x1(_i,function(){return yg(),null})),Q=(w.flags&15990)!==0,w.subtreeFlags&15990||Q){Q=Ma.transition,Ma.transition=null;var he=Er;Er=1;var ke=Sr;Sr|=4,x0.current=null,v_(g,w),C_(w,g),i1(fu),lp=!!vc,fu=vc=null,g.current=w,rf(w),fn(),Sr=ke,Er=he,Ma.transition=Q}else g.current=w;if(S_&&(S_=!1,Cd=g,Es=U),Q=g.pendingLanes,Q===0&&(wl=null),tp(w.stateNode),Sl(g,Yt()),m!==null)for(T=g.onRecoverableError,w=0;w<m.length;w++)U=m[w],T(U.value,{componentStack:U.stack,digest:U.digest});if(zp)throw zp=!1,g=Lu,Lu=null,g;return Es&1&&g.tag!==0&&yg(),Q=g.pendingLanes,Q&1?g===D0?Up++:(Up=0,D0=g):Up=0,Ro(),null}function yg(){if(Cd!==null){var g=uu(Es),m=Ma.transition,w=Er;try{if(Ma.transition=null,Er=16>g?16:g,Cd===null)var T=!1;else{if(g=Cd,Cd=null,Es=0,Sr&6)throw Error(t(331));var U=Sr;for(Sr|=4,Sn=g.current;Sn!==null;){var Q=Sn,he=Q.child;if(Sn.flags&16){var ke=Q.deletions;if(ke!==null){for(var He=0;He<ke.length;He++){var dt=ke[He];for(Sn=dt;Sn!==null;){var $t=Sn;switch($t.tag){case 0:case 11:case 15:ta(8,$t,Q)}var Gt=$t.child;if(Gt!==null)Gt.return=$t,Sn=Gt;else for(;Sn!==null;){$t=Sn;var zt=$t.sibling,In=$t.return;if(b_($t),$t===dt){Sn=null;break}if(zt!==null){zt.return=In,Sn=zt;break}Sn=In}}}var Vn=Q.alternate;if(Vn!==null){var jn=Vn.child;if(jn!==null){Vn.child=null;do{var uo=jn.sibling;jn.sibling=null,jn=uo}while(jn!==null)}}Sn=Q}}if(Q.subtreeFlags&2064&&he!==null)he.return=Q,Sn=he;else e:for(;Sn!==null;){if(Q=Sn,Q.flags&2048)switch(Q.tag){case 0:case 11:case 15:ta(9,Q,Q.return)}var nt=Q.sibling;if(nt!==null){nt.return=Q.return,Sn=nt;break e}Sn=Q.return}}var Ke=g.current;for(Sn=Ke;Sn!==null;){he=Sn;var tt=he.child;if(he.subtreeFlags&2064&&tt!==null)tt.return=he,Sn=tt;else e:for(he=Ke;Sn!==null;){if(ke=Sn,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:ii(9,ke)}}catch(Gn){Vs(ke,ke.return,Gn)}if(ke===he){Sn=null;break e}var nn=ke.sibling;if(nn!==null){nn.return=ke.return,Sn=nn;break e}Sn=ke.return}}if(Sr=U,Ro(),bo&&typeof bo.onPostCommitFiberRoot=="function")try{bo.onPostCommitFiberRoot(Ka,g)}catch{}T=!0}return T}finally{Er=w,Ma.transition=m}}return!1}function wg(g,m,w){m=hd(w,m),m=oh(g,m,1),g=ha(g,m,1),m=il(),g!==null&&(rp(g,1,m),Sl(g,m))}function Vs(g,m,w){if(g.tag===3)wg(g,g,w);else for(;m!==null;){if(m.tag===3){wg(m,g,w);break}else if(m.tag===1){var T=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(wl===null||!wl.has(T))){g=hd(w,g),g=fg(m,g,1),m=ha(m,g,1),g=il(),m!==null&&(rp(m,1,g),Sl(m,g));break}}m=m.return}}function uy(g,m,w){var T=g.pingCache;T!==null&&T.delete(m),m=il(),g.pingedLanes|=g.suspendedLanes&w,zo===g&&(va&w)===w&&(xo===4||xo===3&&(va&130023424)===va&&500>Yt()-w_?of(g,0):vg|=w),Sl(g,m)}function I_(g,m){m===0&&(g.mode&1?(m=np,np<<=1,!(np&130023424)&&(np=4194304)):m=1);var w=il();g=ud(g,m),g!==null&&(rp(g,m,w),Sl(g,w))}function cy(g){var m=g.memoizedState,w=0;m!==null&&(w=m.retryLane),I_(g,w)}function dy(g,m){var w=0;switch(g.tag){case 13:var T=g.stateNode,U=g.memoizedState;U!==null&&(w=U.retryLane);break;case 19:T=g.stateNode;break;default:throw Error(t(314))}T!==null&&T.delete(m),I_(g,w)}var E1;E1=function(g,m,w){if(g!==null)if(g.memoizedProps!==m.pendingProps||Zo.current)pa=!0;else{if(!(g.lanes&w)&&!(m.flags&128))return pa=!1,gg(g,m,w);pa=!!(g.flags&131072)}else pa=!1,Ss&&m.flags&1048576&&Cc(m,o_,m.index);switch(m.lanes=0,m.tag){case 2:var T=m.type;m_(g,m),g=m.pendingProps;var U=Uu(m,yo.current);wc(m,w),U=Ku(null,m,T,g,U,w);var Q=Np();return m.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,vl(T)?(Q=!0,wo(m)):Q=!1,m.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,ig(m),U.updater=cg,m.stateNode=U,U._reactInternals=m,Ic(m,T,g,w),m=L0(null,m,T,!0,Q,w)):(m.tag=0,Ss&&Q&&qh(m),kr(null,m,U,w),m=m.child),m;case 16:T=m.elementType;e:{switch(m_(g,m),g=m.pendingProps,U=T._init,T=U(T._payload),m.type=T,U=m.tag=fy(T),g=nl(T,g),U){case 0:m=p_(null,m,T,g,w);break e;case 1:m=Rp(null,m,T,g,w);break e;case 11:m=Zu(null,m,T,g,w);break e;case 14:m=g_(null,m,T,nl(T.type,g),w);break e}throw Error(t(306,T,""))}return m;case 0:return T=m.type,U=m.pendingProps,U=m.elementType===T?U:nl(T,U),p_(g,m,T,U,w);case 1:return T=m.type,U=m.pendingProps,U=m.elementType===T?U:nl(T,U),Rp(g,m,T,U,w);case 3:e:{if(E0(m),g===null)throw Error(t(387));T=m.pendingProps,Q=m.memoizedState,U=Q.element,rg(g,m),th(m,T,null,w);var he=m.memoizedState;if(T=he.element,Q.isDehydrated)if(Q={element:T,isDehydrated:!1,cache:he.cache,pendingSuspenseBoundaries:he.pendingSuspenseBoundaries,transitions:he.transitions},m.updateQueue.baseState=Q,m.memoizedState=Q,m.flags&256){U=hd(Error(t(423)),m),m=Ks(g,m,T,w,U);break e}else if(T!==U){U=hd(Error(t(424)),m),m=Ks(g,m,T,w,U);break e}else for(Kl=eh(m.stateNode.containerInfo.firstChild),Po=m,Ss=!0,Fo=null,w=Kh(m,null,T,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(bl(),T===U){m=yl(g,m,w);break e}kr(g,m,T,w)}m=m.child}return m;case 5:return Ip(m),g===null&&Ms(m),T=m.type,U=m.pendingProps,Q=g!==null?g.memoizedProps:null,he=U.children,Jd(T,U)?he=null:Q!==null&&Jd(T,Q)&&(m.flags|=32),gd(g,m),kr(g,m,he,w),m.child;case 6:return g===null&&Ms(m),null;case 13:return nf(g,m,w);case 4:return og(m,m.stateNode.containerInfo),T=m.pendingProps,g===null?m.child=Qi(m,null,T,w):kr(g,m,T,w),m.child;case 11:return T=m.type,U=m.pendingProps,U=m.elementType===T?U:nl(T,U),Zu(g,m,T,U,w);case 7:return kr(g,m,m.pendingProps,w),m.child;case 8:return kr(g,m,m.pendingProps.children,w),m.child;case 12:return kr(g,m,m.pendingProps.children,w),m.child;case 10:e:{if(T=m.type._context,U=m.pendingProps,Q=m.memoizedProps,he=U.value,ns(ng,T._currentValue),T._currentValue=he,Q!==null)if(Ee(Q.value,he)){if(Q.children===U.children&&!Zo.current){m=yl(g,m,w);break e}}else for(Q=m.child,Q!==null&&(Q.return=m);Q!==null;){var ke=Q.dependencies;if(ke!==null){he=Q.child;for(var He=ke.firstContext;He!==null;){if(He.context===T){if(Q.tag===1){He=Ia(-1,w&-w),He.tag=2;var dt=Q.updateQueue;if(dt!==null){dt=dt.shared;var $t=dt.pending;$t===null?He.next=He:(He.next=$t.next,$t.next=He),dt.pending=He}}Q.lanes|=w,He=Q.alternate,He!==null&&(He.lanes|=w),Tr(Q.return,w,m),ke.lanes|=w;break}He=He.next}}else if(Q.tag===10)he=Q.type===m.type?null:Q.child;else if(Q.tag===18){if(he=Q.return,he===null)throw Error(t(341));he.lanes|=w,ke=he.alternate,ke!==null&&(ke.lanes|=w),Tr(he,w,m),he=Q.sibling}else he=Q.child;if(he!==null)he.return=Q;else for(he=Q;he!==null;){if(he===m){he=null;break}if(Q=he.sibling,Q!==null){Q.return=he.return,he=Q;break}he=he.return}Q=he}kr(g,m,U.children,w),m=m.child}return m;case 9:return U=m.type,T=m.pendingProps.children,wc(m,w),U=So(U),T=T(U),m.flags|=1,kr(g,m,T,w),m.child;case 14:return T=m.type,U=nl(T,m.pendingProps),U=nl(T.type,U),g_(g,m,T,U,w);case 15:return ea(g,m,m.type,m.pendingProps,w);case 17:return T=m.type,U=m.pendingProps,U=m.elementType===T?U:nl(T,U),m_(g,m),m.tag=1,vl(T)?(g=!0,wo(m)):g=!1,wc(m,w),Vo(m,T,U),Ic(m,T,U,w),L0(null,m,T,!0,g,w);case 19:return _a(g,m,w);case 22:return ef(g,m,w)}throw Error(t(156,m.tag))};function x1(g,m){return it(g,m)}function hy(g,m,w,T){this.tag=g,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xu(g,m,w,T){return new hy(g,m,w,T)}function $p(g){return g=g.prototype,!(!g||!g.isReactComponent)}function fy(g){if(typeof g=="function")return $p(g)?1:0;if(g!=null){if(g=g.$$typeof,g===I)return 11;if(g===Z)return 14}return 2}function Ll(g,m){var w=g.alternate;return w===null?(w=xu(g.tag,m,g.key,g.mode),w.elementType=g.elementType,w.type=g.type,w.stateNode=g.stateNode,w.alternate=g,g.alternate=w):(w.pendingProps=m,w.type=g.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=g.flags&14680064,w.childLanes=g.childLanes,w.lanes=g.lanes,w.child=g.child,w.memoizedProps=g.memoizedProps,w.memoizedState=g.memoizedState,w.updateQueue=g.updateQueue,m=g.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=g.sibling,w.index=g.index,w.ref=g.ref,w}function T_(g,m,w,T,U,Q){var he=2;if(T=g,typeof g=="function")$p(g)&&(he=1);else if(typeof g=="string")he=5;else e:switch(g){case $:return lf(w.children,U,Q,m);case P:he=8,U|=8;break;case z:return g=xu(12,w,m,U|2),g.elementType=z,g.lanes=Q,g;case R:return g=xu(13,w,m,U),g.elementType=R,g.lanes=Q,g;case G:return g=xu(19,w,m,U),g.elementType=G,g.lanes=Q,g;case ne:return k_(w,U,Q,m);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case M:he=10;break e;case W:he=9;break e;case I:he=11;break e;case Z:he=14;break e;case ee:he=16,T=null;break e}throw Error(t(130,g==null?g:typeof g,""))}return m=xu(he,w,m,U),m.elementType=g,m.type=T,m.lanes=Q,m}function lf(g,m,w,T){return g=xu(7,g,T,m),g.lanes=w,g}function k_(g,m,w,T){return g=xu(22,g,T,m),g.elementType=ne,g.lanes=w,g.stateNode={isHidden:!1},g}function N0(g,m,w){return g=xu(6,g,null,m),g.lanes=w,g}function A0(g,m,w){return m=xu(4,g.children!==null?g.children:[],g.key,m),m.lanes=w,m.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},m}function gy(g,m,w,T,U){this.tag=m,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gc(0),this.expirationTimes=gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gc(0),this.identifierPrefix=T,this.onRecoverableError=U,this.mutableSourceEagerHydrationData=null}function O0(g,m,w,T,U,Q,he,ke,He){return g=new gy(g,m,w,ke,He),m===1?(m=1,Q===!0&&(m|=8)):m=0,Q=xu(3,null,null,m),g.current=Q,Q.stateNode=g,Q.memoizedState={element:T,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},ig(Q),g}function py(g,m,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:T==null?null:""+T,children:g,containerInfo:m,implementation:w}}function D1(g){if(!g)return jl;g=g._reactInternals;e:{if(q(g)!==g||g.tag!==1)throw Error(t(170));var m=g;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(vl(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(g.tag===1){var w=g.type;if(vl(w))return l1(g,w,m)}return m}function I1(g,m,w,T,U,Q,he,ke,He){return g=O0(w,T,!0,g,U,Q,he,ke,He),g.context=D1(null),w=g.current,T=il(),U=hh(w),Q=Ia(T,U),Q.callback=m??null,ha(w,Q,U),g.current.lanes=U,rp(g,U,T),Sl(g,T),g}function N_(g,m,w,T){var U=m.current,Q=il(),he=hh(U);return w=D1(w),m.context===null?m.context=w:m.pendingContext=w,m=Ia(Q,he),m.payload={element:g},T=T===void 0?null:T,T!==null&&(m.callback=T),g=ha(U,m,he),g!==null&&(ec(g,U,he,Q),u_(g,U,he)),he}function Sg(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function M0(g,m){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var w=g.retryLane;g.retryLane=w!==0&&w<m?w:m}}function R0(g,m){M0(g,m),(g=g.alternate)&&M0(g,m)}function my(){return null}var T1=typeof reportError=="function"?reportError:function(g){console.error(g)};function jp(g){this._internalRoot=g}Lg.prototype.render=jp.prototype.render=function(g){var m=this._internalRoot;if(m===null)throw Error(t(409));N_(g,m,null,null)},Lg.prototype.unmount=jp.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var m=g.containerInfo;sf(function(){N_(null,g,null,null)}),m[ua]=null}};function Lg(g){this._internalRoot=g}Lg.prototype.unstable_scheduleHydration=function(g){if(g){var m=zm();g={blockedOn:null,target:g,priority:m};for(var w=0;w<Jc.length&&m!==0&&m<Jc[w].priority;w++);Jc.splice(w,0,g),w===0&&o0(g)}};function P0(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function A_(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function k1(){}function N1(g,m,w,T,U){if(U){if(typeof T=="function"){var Q=T;T=function(){var dt=Sg(he);Q.call(dt)}}var he=I1(m,T,g,0,null,!1,!1,"",k1);return g._reactRootContainer=he,g[ua]=he.current,pl(g.nodeType===8?g.parentNode:g),sf(),he}for(;U=g.lastChild;)g.removeChild(U);if(typeof T=="function"){var ke=T;T=function(){var dt=Sg(He);ke.call(dt)}}var He=O0(g,0,!1,null,null,!1,!1,"",k1);return g._reactRootContainer=He,g[ua]=He.current,pl(g.nodeType===8?g.parentNode:g),sf(function(){N_(m,He,w,T)}),He}function Nc(g,m,w,T,U){var Q=w._reactRootContainer;if(Q){var he=Q;if(typeof U=="function"){var ke=U;U=function(){var He=Sg(he);ke.call(He)}}N_(m,he,g,U)}else he=N1(w,m,g,U,T);return Sg(he)}sp=function(g){switch(g.tag){case 3:var m=g.stateNode;if(m.current.memoizedState.isDehydrated){var w=Rh(m.pendingLanes);w!==0&&(Ph(m,w|1),Sl(m,Yt()),!(Sr&6)&&(bd=Yt()+500,Ro()))}break;case 13:sf(function(){var T=ud(g,1);if(T!==null){var U=il();ec(T,g,1,U)}}),R0(g,1)}},zf=function(g){if(g.tag===13){var m=ud(g,134217728);if(m!==null){var w=il();ec(m,g,134217728,w)}R0(g,134217728)}},r0=function(g){if(g.tag===13){var m=hh(g),w=ud(g,m);if(w!==null){var T=il();ec(w,g,m,T)}R0(g,m)}},zm=function(){return Er},Um=function(g,m){var w=Er;try{return Er=g,m()}finally{Er=w}},Ai=function(g,m,w){switch(m){case"input":if(Ft(g,w),m=w.name,w.type==="radio"&&m!=null){for(w=g;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var T=w[m];if(T!==g&&T.form===g.form){var U=n_(T);if(!U)throw Error(t(90));_t(T),Ft(T,U)}}}break;case"textarea":bn(g,w);break;case"select":m=w.value,m!=null&&ot(g,!!w.multiple,m,!1)}},vt=T0,vo=sf;var O_={usingClientEntryPoint:!1,Events:[Wi,En,n_,Sa,Oi,T0]},qp={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_y={bundleType:qp.bundleType,version:qp.version,rendererPackageName:qp.rendererPackageName,rendererConfig:qp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=be(g),g===null?null:g.stateNode},findFiberByHostInstance:qp.findFiberByHostInstance||my,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var M_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!M_.isDisabled&&M_.supportsFiber)try{Ka=M_.inject(_y),bo=M_}catch{}}return ph.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O_,ph.createPortal=function(g,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P0(m))throw Error(t(200));return py(g,m,null,w)},ph.createRoot=function(g,m){if(!P0(g))throw Error(t(299));var w=!1,T="",U=T1;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onRecoverableError!==void 0&&(U=m.onRecoverableError)),m=O0(g,1,!1,null,null,w,!1,T,U),g[ua]=m.current,pl(g.nodeType===8?g.parentNode:g),new jp(m)},ph.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var m=g._reactInternals;if(m===void 0)throw typeof g.render=="function"?Error(t(188)):(g=Object.keys(g).join(","),Error(t(268,g)));return g=be(m),g=g===null?null:g.stateNode,g},ph.flushSync=function(g){return sf(g)},ph.hydrate=function(g,m,w){if(!A_(m))throw Error(t(200));return Nc(null,g,m,!0,w)},ph.hydrateRoot=function(g,m,w){if(!P0(g))throw Error(t(405));var T=w!=null&&w.hydratedSources||null,U=!1,Q="",he=T1;if(w!=null&&(w.unstable_strictMode===!0&&(U=!0),w.identifierPrefix!==void 0&&(Q=w.identifierPrefix),w.onRecoverableError!==void 0&&(he=w.onRecoverableError)),m=I1(m,null,g,1,w??null,U,!1,Q,he),g[ua]=m.current,pl(g),T)for(g=0;g<T.length;g++)w=T[g],U=w._getVersion,U=U(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,U]:m.mutableSourceEagerHydrationData.push(w,U);return new Lg(m)},ph.render=function(g,m,w){if(!A_(m))throw Error(t(200));return Nc(null,g,m,!1,w)},ph.unmountComponentAtNode=function(g){if(!A_(g))throw Error(t(40));return g._reactRootContainer?(sf(function(){Nc(null,null,g,!1,function(){g._reactRootContainer=null,g[ua]=null})}),!0):!1},ph.unstable_batchedUpdates=T0,ph.unstable_renderSubtreeIntoContainer=function(g,m,w,T){if(!A_(w))throw Error(t(200));if(g==null||g._reactInternals===void 0)throw Error(t(38));return Nc(g,m,w,!1,T)},ph.version="18.3.1-next-f1338f8080-20240426",ph}var Fq;function sne(){if(Fq)return a3.exports;Fq=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),a3.exports=pfe(),a3.exports}var Bq;function mfe(){if(Bq)return J2;Bq=1;var r=sne();return J2.createRoot=r.createRoot,J2.hydrateRoot=r.hydrateRoot,J2}var _fe=mfe();const vfe=Rm(_fe);var Wq={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vq;function bfe(){if(Vq)return Wq;Vq=1;var r;return function(e){(function(t){var n=typeof Ou=="object"?Ou:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),i=s(e);typeof n.Reflect>"u"?n.Reflect=e:i=s(n.Reflect,i),t(i);function s(o,a){return function(l,u){typeof o[l]!="function"&&Object.defineProperty(o,l,{configurable:!0,writable:!0,value:u}),a&&a(l,u)}}})(function(t){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",s=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!a&&!l,d={create:a?function(){return bn(Object.create(null))}:l?function(){return bn({__proto__:null})}:function(){return bn({})},has:u?function(Pe,at){return n.call(Pe,at)}:function(Pe,at){return at in Pe},get:u?function(Pe,at){return n.call(Pe,at)?Pe[at]:void 0}:function(Pe,at){return Pe[at]}},h=Object.getPrototypeOf(Function),p=typeof process=="object"&&process["env"]&&process["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",v=!p&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ot(),C=!p&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Mt(),S=!p&&typeof WeakMap=="function"?WeakMap:cn(),E=new S;function k(Pe,at,rt,yt){if(de(rt)){if(!Ut(Pe))throw new TypeError;if(!sn(at))throw new TypeError;return W(Pe,at)}else{if(!Ut(Pe))throw new TypeError;if(!Me(at))throw new TypeError;if(!Me(yt)&&!de(yt)&&!ae(yt))throw new TypeError;return ae(yt)&&(yt=void 0),rt=gt(rt),I(Pe,at,rt,yt)}}t("decorate",k);function D(Pe,at){function rt(yt,ln){if(!Me(yt))throw new TypeError;if(!de(ln)&&!rn(ln))throw new TypeError;ie(Pe,at,yt,ln)}return rt}t("metadata",D);function O(Pe,at,rt,yt){if(!Me(rt))throw new TypeError;return de(yt)||(yt=gt(yt)),ie(Pe,at,rt,yt)}t("defineMetadata",O);function H(Pe,at,rt){if(!Me(at))throw new TypeError;return de(rt)||(rt=gt(rt)),G(Pe,at,rt)}t("hasMetadata",H);function V(Pe,at,rt){if(!Me(at))throw new TypeError;return de(rt)||(rt=gt(rt)),Z(Pe,at,rt)}t("hasOwnMetadata",V);function X(Pe,at,rt){if(!Me(at))throw new TypeError;return de(rt)||(rt=gt(rt)),ee(Pe,at,rt)}t("getMetadata",X);function $(Pe,at,rt){if(!Me(at))throw new TypeError;return de(rt)||(rt=gt(rt)),ne(Pe,at,rt)}t("getOwnMetadata",$);function P(Pe,at){if(!Me(Pe))throw new TypeError;return de(at)||(at=gt(at)),te(Pe,at)}t("getMetadataKeys",P);function z(Pe,at){if(!Me(Pe))throw new TypeError;return de(at)||(at=gt(at)),B(Pe,at)}t("getOwnMetadataKeys",z);function M(Pe,at,rt){if(!Me(at))throw new TypeError;de(rt)||(rt=gt(rt));var yt=R(at,rt,!1);if(de(yt)||!yt.delete(Pe))return!1;if(yt.size>0)return!0;var ln=E.get(at);return ln.delete(rt),ln.size>0||E.delete(at),!0}t("deleteMetadata",M);function W(Pe,at){for(var rt=Pe.length-1;rt>=0;--rt){var yt=Pe[rt],ln=yt(at);if(!de(ln)&&!ae(ln)){if(!sn(ln))throw new TypeError;at=ln}}return at}function I(Pe,at,rt,yt){for(var ln=Pe.length-1;ln>=0;--ln){var Rn=Pe[ln],Xt=Rn(at,rt,yt);if(!de(Xt)&&!ae(Xt)){if(!Me(Xt))throw new TypeError;yt=Xt}}return yt}function R(Pe,at,rt){var yt=E.get(Pe);if(de(yt)){if(!rt)return;yt=new v,E.set(Pe,yt)}var ln=yt.get(at);if(de(ln)){if(!rt)return;ln=new v,yt.set(at,ln)}return ln}function G(Pe,at,rt){var yt=Z(Pe,at,rt);if(yt)return!0;var ln=an(at);return ae(ln)?!1:G(Pe,ln,rt)}function Z(Pe,at,rt){var yt=R(at,rt,!1);return de(yt)?!1:Rt(yt.has(Pe))}function ee(Pe,at,rt){var yt=Z(Pe,at,rt);if(yt)return ne(Pe,at,rt);var ln=an(at);if(!ae(ln))return ee(Pe,ln,rt)}function ne(Pe,at,rt){var yt=R(at,rt,!1);if(!de(yt))return yt.get(Pe)}function ie(Pe,at,rt,yt){var ln=R(rt,yt,!0);ln.set(Pe,at)}function te(Pe,at){var rt=B(Pe,at),yt=an(Pe);if(yt===null)return rt;var ln=te(yt,at);if(ln.length<=0)return rt;if(rt.length<=0)return ln;for(var Rn=new C,Xt=[],Tn=0,Tt=rt;Tn<Tt.length;Tn++){var tn=Tt[Tn],Qn=Rn.has(tn);Qn||(Rn.add(tn),Xt.push(tn))}for(var oi=0,lt=ln;oi<lt.length;oi++){var tn=lt[oi],Qn=Rn.has(tn);Qn||(Rn.add(tn),Xt.push(tn))}return Xt}function B(Pe,at){var rt=[],yt=R(Pe,at,!1);if(de(yt))return rt;for(var ln=yt.keys(),Rn=qn(ln),Xt=0;;){var Tn=Pt(Rn);if(!Tn)return rt.length=Xt,rt;var Tt=Ft(Tn);try{rt[Xt]=Tt}catch(tn){try{At(Rn)}finally{throw tn}}Xt++}}function K(Pe){if(Pe===null)return 1;switch(typeof Pe){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Pe===null?1:6;default:return 6}}function de(Pe){return Pe===void 0}function ae(Pe){return Pe===null}function De(Pe){return typeof Pe=="symbol"}function Me(Pe){return typeof Pe=="object"?Pe!==null:typeof Pe=="function"}function Qe(Pe,at){switch(K(Pe)){case 0:return Pe;case 1:return Pe;case 2:return Pe;case 3:return Pe;case 4:return Pe;case 5:return Pe}var rt=at===3?"string":at===5?"number":"default",yt=on(Pe,s);if(yt!==void 0){var ln=yt.call(Pe,rt);if(Me(ln))throw new TypeError;return ln}return ct(Pe,rt==="default"?"number":rt)}function ct(Pe,at){if(at==="string"){var rt=Pe.toString;if(_t(rt)){var yt=rt.call(Pe);if(!Me(yt))return yt}var ln=Pe.valueOf;if(_t(ln)){var yt=ln.call(Pe);if(!Me(yt))return yt}}else{var ln=Pe.valueOf;if(_t(ln)){var yt=ln.call(Pe);if(!Me(yt))return yt}var Rn=Pe.toString;if(_t(Rn)){var yt=Rn.call(Pe);if(!Me(yt))return yt}}throw new TypeError}function Rt(Pe){return!!Pe}function Ye(Pe){return""+Pe}function gt(Pe){var at=Qe(Pe,3);return De(at)?at:Ye(at)}function Ut(Pe){return Array.isArray?Array.isArray(Pe):Pe instanceof Object?Pe instanceof Array:Object.prototype.toString.call(Pe)==="[object Array]"}function _t(Pe){return typeof Pe=="function"}function sn(Pe){return typeof Pe=="function"}function rn(Pe){switch(K(Pe)){case 3:return!0;case 4:return!0;default:return!1}}function on(Pe,at){var rt=Pe[at];if(rt!=null){if(!_t(rt))throw new TypeError;return rt}}function qn(Pe){var at=on(Pe,o);if(!_t(at))throw new TypeError;var rt=at.call(Pe);if(!Me(rt))throw new TypeError;return rt}function Ft(Pe){return Pe.value}function Pt(Pe){var at=Pe.next();return at.done?!1:at}function At(Pe){var at=Pe.return;at&&at.call(Pe)}function an(Pe){var at=Object.getPrototypeOf(Pe);if(typeof Pe!="function"||Pe===h||at!==h)return at;var rt=Pe.prototype,yt=rt&&Object.getPrototypeOf(rt);if(yt==null||yt===Object.prototype)return at;var ln=yt.constructor;return typeof ln!="function"||ln===Pe?at:ln}function ot(){var Pe={},at=[],rt=function(){function Xt(Tn,Tt,tn){this._index=0,this._keys=Tn,this._values=Tt,this._selector=tn}return Xt.prototype["@@iterator"]=function(){return this},Xt.prototype[o]=function(){return this},Xt.prototype.next=function(){var Tn=this._index;if(Tn>=0&&Tn<this._keys.length){var Tt=this._selector(this._keys[Tn],this._values[Tn]);return Tn+1>=this._keys.length?(this._index=-1,this._keys=at,this._values=at):this._index++,{value:Tt,done:!1}}return{value:void 0,done:!0}},Xt.prototype.throw=function(Tn){throw this._index>=0&&(this._index=-1,this._keys=at,this._values=at),Tn},Xt.prototype.return=function(Tn){return this._index>=0&&(this._index=-1,this._keys=at,this._values=at),{value:Tn,done:!0}},Xt}();return function(){function Xt(){this._keys=[],this._values=[],this._cacheKey=Pe,this._cacheIndex=-2}return Object.defineProperty(Xt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Xt.prototype.has=function(Tn){return this._find(Tn,!1)>=0},Xt.prototype.get=function(Tn){var Tt=this._find(Tn,!1);return Tt>=0?this._values[Tt]:void 0},Xt.prototype.set=function(Tn,Tt){var tn=this._find(Tn,!0);return this._values[tn]=Tt,this},Xt.prototype.delete=function(Tn){var Tt=this._find(Tn,!1);if(Tt>=0){for(var tn=this._keys.length,Qn=Tt+1;Qn<tn;Qn++)this._keys[Qn-1]=this._keys[Qn],this._values[Qn-1]=this._values[Qn];return this._keys.length--,this._values.length--,Tn===this._cacheKey&&(this._cacheKey=Pe,this._cacheIndex=-2),!0}return!1},Xt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Pe,this._cacheIndex=-2},Xt.prototype.keys=function(){return new rt(this._keys,this._values,yt)},Xt.prototype.values=function(){return new rt(this._keys,this._values,ln)},Xt.prototype.entries=function(){return new rt(this._keys,this._values,Rn)},Xt.prototype["@@iterator"]=function(){return this.entries()},Xt.prototype[o]=function(){return this.entries()},Xt.prototype._find=function(Tn,Tt){return this._cacheKey!==Tn&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Tn)),this._cacheIndex<0&&Tt&&(this._cacheIndex=this._keys.length,this._keys.push(Tn),this._values.push(void 0)),this._cacheIndex},Xt}();function yt(Xt,Tn){return Xt}function ln(Xt,Tn){return Tn}function Rn(Xt,Tn){return[Xt,Tn]}}function Mt(){return function(){function Pe(){this._map=new v}return Object.defineProperty(Pe.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Pe.prototype.has=function(at){return this._map.has(at)},Pe.prototype.add=function(at){return this._map.set(at,at),this},Pe.prototype.delete=function(at){return this._map.delete(at)},Pe.prototype.clear=function(){this._map.clear()},Pe.prototype.keys=function(){return this._map.keys()},Pe.prototype.values=function(){return this._map.values()},Pe.prototype.entries=function(){return this._map.entries()},Pe.prototype["@@iterator"]=function(){return this.keys()},Pe.prototype[o]=function(){return this.keys()},Pe}()}function cn(){var Pe=16,at=d.create(),rt=yt();return function(){function Tt(){this._key=yt()}return Tt.prototype.has=function(tn){var Qn=ln(tn,!1);return Qn!==void 0?d.has(Qn,this._key):!1},Tt.prototype.get=function(tn){var Qn=ln(tn,!1);return Qn!==void 0?d.get(Qn,this._key):void 0},Tt.prototype.set=function(tn,Qn){var oi=ln(tn,!0);return oi[this._key]=Qn,this},Tt.prototype.delete=function(tn){var Qn=ln(tn,!1);return Qn!==void 0?delete Qn[this._key]:!1},Tt.prototype.clear=function(){this._key=yt()},Tt}();function yt(){var Tt;do Tt="@@WeakMap@@"+Tn();while(d.has(at,Tt));return at[Tt]=!0,Tt}function ln(Tt,tn){if(!n.call(Tt,rt)){if(!tn)return;Object.defineProperty(Tt,rt,{value:d.create()})}return Tt[rt]}function Rn(Tt,tn){for(var Qn=0;Qn<tn;++Qn)Tt[Qn]=Math.random()*255|0;return Tt}function Xt(Tt){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Tt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Tt)):Rn(new Uint8Array(Tt),Tt):Rn(new Array(Tt),Tt)}function Tn(){var Tt=Xt(Pe);Tt[6]=Tt[6]&79|64,Tt[8]=Tt[8]&191|128;for(var tn="",Qn=0;Qn<Pe;++Qn){var oi=Tt[Qn];(Qn===4||Qn===6||Qn===8)&&(tn+="-"),oi<16&&(tn+="0"),tn+=oi.toString(16).toLowerCase()}return tn}}function bn(Pe){return Pe.__=void 0,delete Pe.__,Pe}})}(r||(r={})),Wq}bfe();var j9;(function(r){r[r.Transient=0]="Transient",r[r.Singleton=1]="Singleton",r[r.ResolutionScoped=2]="ResolutionScoped",r[r.ContainerScoped=3]="ContainerScoped"})(j9||(j9={}));const mh=j9;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q9=function(r,e){return q9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},q9(r,e)};function Iz(r,e){q9(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function eA(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pM(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function rw(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(pM(arguments[e]));return r}var Cfe="injectionTokens";function yfe(r){var e=Reflect.getMetadata("design:paramtypes",r)||[],t=Reflect.getOwnMetadata(Cfe,r)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function one(r){return!!r.useClass}function K9(r){return!!r.useFactory}var ane=function(){function r(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return r.prototype.createProxy=function(e){var t=this,n={},i=!1,s,o=function(){return i||(s=e(t.wrap()),i=!0),s};return new Proxy(n,this.createHandler(o))},r.prototype.createHandler=function(e){var t={},n=function(i){t[i]=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];s[0]=e();var a=Reflect[i];return a.apply(void 0,rw(s))}};return this.reflectMethods.forEach(n),t},r}();function FL(r){return typeof r=="string"||typeof r=="symbol"}function wfe(r){return typeof r=="object"&&"token"in r&&"multiple"in r}function Hq(r){return typeof r=="object"&&"token"in r&&"transform"in r}function Sfe(r){return typeof r=="function"||r instanceof ane}function yO(r){return!!r.useToken}function wO(r){return r.useValue!=null}function Lfe(r){return one(r)||wO(r)||yO(r)||K9(r)}var Tz=function(){function r(){this._registryMap=new Map}return r.prototype.entries=function(){return this._registryMap.entries()},r.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},r.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},r.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},r.prototype.setAll=function(e,t){this._registryMap.set(e,t)},r.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},r.prototype.clear=function(){this._registryMap.clear()},r.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},r}(),Efe=function(r){Iz(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Tz),zq=function(){function r(){this.scopedResolutions=new Map}return r}();function xfe(r,e){if(r===null)return"at position #"+e;var t=r.split(",")[e].trim();return'"'+t+'" at position #'+e}function Dfe(r,e,t){return t===void 0&&(t="    "),rw([r],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function Ife(r,e,t){var n=pM(r.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=n[1],s=i===void 0?null:i,o=xfe(s,e);return Dfe("Cannot inject the dependency "+o+' of "'+r.name+'" constructor. Reason:',t)}var Tfe=function(r){Iz(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Tz),kfe=function(r){Iz(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Tz),Nfe=function(){function r(){this.preResolution=new Tfe,this.postResolution=new kfe}return r}(),lne=new Map,Afe=function(){function r(e){this.parent=e,this._registry=new Efe,this.interceptors=new Nfe}return r.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:mh.Transient});var i;if(Lfe(t)?i=t:i={useClass:t},yO(i))for(var s=[e],o=i;o!=null;){var a=o.useToken;if(s.includes(a))throw new Error("Token registration cycle detected! "+rw(s,[a]).join(" -> "));s.push(a);var l=this._registry.get(a);l&&yO(l.provider)?o=l.provider:o=null}if((n.lifecycle===mh.Singleton||n.lifecycle==mh.ContainerScoped||n.lifecycle==mh.ResolutionScoped)&&(wO(i)||K9(i)))throw new Error('Cannot use lifecycle "'+mh[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},r.prototype.registerType=function(e,t){return FL(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},r.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},r.prototype.registerSingleton=function(e,t){if(FL(e)){if(FL(t))return this.register(e,{useToken:t},{lifecycle:mh.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:mh.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!FL(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:mh.Singleton})},r.prototype.resolve=function(e,t){t===void 0&&(t=new zq);var n=this.getRegistration(e);if(!n&&FL(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(Sfe(e)){var i=this.construct(e,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},r.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var s=[];try{for(var o=eA(this.interceptors.preResolution.getAll(e)),a=o.next();!a.done;a=o.next()){var l=a.value;l.options.frequency!="Once"&&s.push(l),l.callback(e,t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,s)}},r.prototype.executePostResolutionInterceptor=function(e,t,n){var i,s;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var a=eA(this.interceptors.postResolution.getAll(e)),l=a.next();!l.done;l=a.next()){var u=l.value;u.options.frequency!="Once"&&o.push(u),u.callback(e,t,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,o)}},r.prototype.resolveRegistration=function(e,t){if(e.options.lifecycle===mh.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===mh.Singleton,i=e.options.lifecycle===mh.ContainerScoped,s=n||i,o;return wO(e.provider)?o=e.provider.useValue:yO(e.provider)?o=s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):one(e.provider)?o=s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):K9(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,t),e.options.lifecycle===mh.ResolutionScoped&&t.scopedResolutions.set(e,o),o},r.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new zq);var i=this.getAllRegistrations(e);if(!i&&FL(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var s=i.map(function(a){return n.resolveRegistration(a,t)});return this.executePostResolutionInterceptor(e,s,"All"),s}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},r.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},r.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},r.prototype.clearInstances=function(){var e,t;try{for(var n=eA(this._registry.entries()),i=n.next();!i.done;i=n.next()){var s=pM(i.value,2),o=s[0],a=s[1];this._registry.setAll(o,a.filter(function(l){return!wO(l.provider)}).map(function(l){return l.instance=void 0,l}))}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.createChildContainer=function(){var e,t,n=new r(this);try{for(var i=eA(this._registry.entries()),s=i.next();!s.done;s=i.next()){var o=pM(s.value,2),a=o[0],l=o[1];l.some(function(u){var d=u.options;return d.lifecycle===mh.ContainerScoped})&&n._registry.setAll(a,l.map(function(u){return u.options.lifecycle===mh.ContainerScoped?{provider:u.provider,options:u.options}:u}))}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},r.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},r.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},r.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},r.prototype.construct=function(e,t){var n=this;if(e instanceof ane)return e.createProxy(function(o){return n.resolve(o,t)});var i=lne.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var s=i.map(this.resolveParams(t,e));return new(e.bind.apply(e,rw([void 0],s)))},r.prototype.resolveParams=function(e,t){var n=this;return function(i,s){var o,a,l;try{return wfe(i)?Hq(i)?i.multiple?(o=n.resolve(i.transform)).transform.apply(o,rw([n.resolveAll(i.token)],i.transformArgs)):(a=n.resolve(i.transform)).transform.apply(a,rw([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):Hq(i)?(l=n.resolve(i.transform,e)).transform.apply(l,rw([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(u){throw new Error(Ife(t,s,u))}}},r}(),pt=new Afe;function Ofe(){return function(r){lne.set(r,yfe(r))}}function zr(){return function(r){Ofe()(r),pt.registerSingleton(r)}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);class OP{constructor(){this._events=new Map}count(e){return(this._events.get(e)||[]).length}emit(e,...t){const n=this._events.get(e);if(n&&n.length>0){let i=!0;for(let s=n.length-1;s>=0;s--)i&&n[s].call({stopDelivery:()=>i=!1},...t)}}subscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.assignEvent(n,t)}):this.assignEvent(e,t)}unsubscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.deleteEvent(n,t)}):this.deleteEvent(e,t)}deleteEvent(e,t){if(t){const n=this._events.get(e);n&&n.splice(n.indexOf(t),1)}else this._events.delete(e)}assignEvent(e,t){const n=this._events.get(e);n?n.push(t):this._events.set(e,[t])}}const vw=new OP;class Yx{subscribe(e,t){vw.subscribe(e,t)}emit(e,...t){vw.emit(e,...t)}count(e){return vw.count(e)}unsubscribe(e,t){vw.unsubscribe(e,t)}}function Mfe(r){return function(e,t,n){const i=n.value;return typeof i=="function"&&(n.value=function(...s){try{const o=i.apply(this,s);return vw.emit(r,s),o}catch(o){throw o}}),n}}function Rfe(r){return function(e,t,n){const i=n.value;return typeof i=="function"&&vw.subscribe(r,i),n}}const Pfe=Object.freeze(Object.defineProperty({__proto__:null,EventBus:vw,EventEmitter:OP,GlobalEvent:Yx,emit:Mfe,subscribe:Rfe},Symbol.toStringTag,{value:"Module"}));var LT={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */LT.exports;var Uq;function Ffe(){return Uq||(Uq=1,function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,p=2,v=4,C=1,S=2,E=1,k=2,D=4,O=8,H=16,V=32,X=64,$=128,P=256,z=512,M=30,W="...",I=800,R=16,G=1,Z=2,ee=3,ne=1/0,ie=9007199254740991,te=17976931348623157e292,B=0/0,K=4294967295,de=K-1,ae=K>>>1,De=[["ary",$],["bind",E],["bindKey",k],["curry",O],["curryRight",H],["flip",z],["partial",V],["partialRight",X],["rearg",P]],Me="[object Arguments]",Qe="[object Array]",ct="[object AsyncFunction]",Rt="[object Boolean]",Ye="[object Date]",gt="[object DOMException]",Ut="[object Error]",_t="[object Function]",sn="[object GeneratorFunction]",rn="[object Map]",on="[object Number]",qn="[object Null]",Ft="[object Object]",Pt="[object Promise]",At="[object Proxy]",an="[object RegExp]",ot="[object Set]",Mt="[object String]",cn="[object Symbol]",bn="[object Undefined]",Pe="[object WeakMap]",at="[object WeakSet]",rt="[object ArrayBuffer]",yt="[object DataView]",ln="[object Float32Array]",Rn="[object Float64Array]",Xt="[object Int8Array]",Tn="[object Int16Array]",Tt="[object Int32Array]",tn="[object Uint8Array]",Qn="[object Uint8ClampedArray]",oi="[object Uint16Array]",lt="[object Uint32Array]",Bs=/\b__p \+= '';/g,fi=/\b(__p \+=) '' \+/g,Ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bs=/&(?:amp|lt|gt|quot|#39);/g,Kn=/[&<>"']/g,Pr=RegExp(bs.source),Sa=RegExp(Kn.source),Oi=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,vo=/<%=([\s\S]+?)%>/g,Ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ve=/^\w*$/,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/[\\^$.*+?()[\]{}|]/g,me=RegExp(ge.source),Le=/^\s+/,oe=/\s/,Te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,et=/,? & /,Ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dn=/[()=,{}\[\]\/\s]/,N=/\\(\\)?/g,q=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,le=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,be=/^\[object .+?Constructor\]$/,qe=/^0o[0-7]+$/i,it=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kt=/($^)/,fn=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",pn="\\u0300-\\u036f",Zt="\\ufe20-\\ufe2f",Ui="\\u20d0-\\u20ff",_i=pn+Zt+Ui,jr="\\u2700-\\u27bf",pr="a-z\\xdf-\\xf6\\xf8-\\xff",Ka="\\xac\\xb1\\xd7\\xf7",bo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tp="\\u2000-\\u206f",Vu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",e0="A-Z\\xc0-\\xd6\\xd8-\\xde",t0="\\ufe0e\\ufe0f",n0=Ka+bo+tp+Vu,Kd="[']",np="["+Yt+"]",Rh="["+n0+"]",fc="["+_i+"]",i0="\\d+",ny="["+jr+"]",ip="["+pr+"]",Hm="[^"+Yt+n0+i0+jr+pr+e0+"]",gc="\\ud83c[\\udffb-\\udfff]",rp="(?:"+fc+"|"+gc+")",Hf="[^"+Yt+"]",Ph="(?:\\ud83c[\\udde6-\\uddff]){2}",Er="[\\ud800-\\udbff][\\udc00-\\udfff]",uu="["+e0+"]",sp="\\u200d",zf="(?:"+ip+"|"+Hm+")",r0="(?:"+uu+"|"+Hm+")",zm="(?:"+Kd+"(?:d|ll|m|re|s|t|ve))?",Um="(?:"+Kd+"(?:D|LL|M|RE|S|T|VE))?",op=rp+"?",Uf="["+t0+"]?",Yc="(?:"+sp+"(?:"+[Hf,Ph,Er].join("|")+")"+Uf+op+")*",Zc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qc=Uf+op+Yc,ap="(?:"+[ny,Ph,Er].join("|")+")"+Qc,Jc="(?:"+[Hf+fc+"?",fc,Ph,Er,np].join("|")+")",$m=RegExp(Kd,"g"),s0=RegExp(fc,"g"),ed=RegExp(gc+"(?="+gc+")|"+Jc+Qc,"g"),Kb=RegExp([uu+"?"+ip+"+"+zm+"(?="+[Rh,uu,"$"].join("|")+")",r0+"+"+Um+"(?="+[Rh,uu+zf,"$"].join("|")+")",uu+"?"+zf+"+"+zm,uu+"+"+Um,Xc,Zc,i0,ap].join("|"),"g"),o0=RegExp("["+sp+Yt+_i+t0+"]"),$f=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gb=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yb=-1,ai={};ai[ln]=ai[Rn]=ai[Xt]=ai[Tn]=ai[Tt]=ai[tn]=ai[Qn]=ai[oi]=ai[lt]=!0,ai[Me]=ai[Qe]=ai[rt]=ai[Rt]=ai[yt]=ai[Ye]=ai[Ut]=ai[_t]=ai[rn]=ai[on]=ai[Ft]=ai[an]=ai[ot]=ai[Mt]=ai[Pe]=!1;var ei={};ei[Me]=ei[Qe]=ei[rt]=ei[yt]=ei[Rt]=ei[Ye]=ei[ln]=ei[Rn]=ei[Xt]=ei[Tn]=ei[Tt]=ei[rn]=ei[on]=ei[Ft]=ei[an]=ei[ot]=ei[Mt]=ei[cn]=ei[tn]=ei[Qn]=ei[oi]=ei[lt]=!0,ei[Ut]=ei[_t]=ei[Pe]=!1;var Hu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},lp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},iy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jm=parseFloat,up=parseInt,jf=typeof Ou=="object"&&Ou&&Ou.Object===Object&&Ou,a0=typeof self=="object"&&self&&self.Object===Object&&self,Gi=jf||a0||Function("return this")(),Fh=e&&!e.nodeType&&e,La=Fh&&!0&&r&&!r.nodeType&&r,cp=La&&La.exports===Fh,Gd=cp&&jf.process,Cs=function(){try{var _e=La&&La.require&&La.require("util").types;return _e||Gd&&Gd.binding&&Gd.binding("util")}catch{}}(),qm=Cs&&Cs.isArrayBuffer,Ga=Cs&&Cs.isDate,pc=Cs&&Cs.isMap,dp=Cs&&Cs.isRegExp,Bh=Cs&&Cs.isSet,l0=Cs&&Cs.isTypedArray;function hs(_e,Ne,Ee){switch(Ee.length){case 0:return _e.call(Ne);case 1:return _e.call(Ne,Ee[0]);case 2:return _e.call(Ne,Ee[0],Ee[1]);case 3:return _e.call(Ne,Ee[0],Ee[1],Ee[2])}return _e.apply(Ne,Ee)}function u0(_e,Ne,Ee,bt){for(var dn=-1,Wn=_e==null?0:_e.length;++dn<Wn;){var ir=_e[dn];Ne(bt,ir,Ee(ir),_e)}return bt}function gi(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length;++Ee<bt&&Ne(_e[Ee],Ee,_e)!==!1;);return _e}function qr(_e,Ne){for(var Ee=_e==null?0:_e.length;Ee--&&Ne(_e[Ee],Ee,_e)!==!1;);return _e}function Km(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length;++Ee<bt;)if(!Ne(_e[Ee],Ee,_e))return!1;return!0}function Ya(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length,dn=0,Wn=[];++Ee<bt;){var ir=_e[Ee];Ne(ir,Ee,_e)&&(Wn[dn++]=ir)}return Wn}function Wh(_e,Ne){var Ee=_e==null?0:_e.length;return!!Ee&&cu(_e,Ne,0)>-1}function hp(_e,Ne,Ee){for(var bt=-1,dn=_e==null?0:_e.length;++bt<dn;)if(Ee(Ne,_e[bt]))return!0;return!1}function vi(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length,dn=Array(bt);++Ee<bt;)dn[Ee]=Ne(_e[Ee],Ee,_e);return dn}function Za(_e,Ne){for(var Ee=-1,bt=Ne.length,dn=_e.length;++Ee<bt;)_e[dn+Ee]=Ne[Ee];return _e}function qf(_e,Ne,Ee,bt){var dn=-1,Wn=_e==null?0:_e.length;for(bt&&Wn&&(Ee=_e[++dn]);++dn<Wn;)Ee=Ne(Ee,_e[dn],dn,_e);return Ee}function ry(_e,Ne,Ee,bt){var dn=_e==null?0:_e.length;for(bt&&dn&&(Ee=_e[--dn]);dn--;)Ee=Ne(Ee,_e[dn],dn,_e);return Ee}function ao(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length;++Ee<bt;)if(Ne(_e[Ee],Ee,_e))return!0;return!1}var c0=Kf("length");function Yd(_e){return _e.split("")}function Xb(_e){return _e.match(Ot)||[]}function fp(_e,Ne,Ee){var bt;return Ee(_e,function(dn,Wn,ir){if(Ne(dn,Wn,ir))return bt=Wn,!1}),bt}function Yo(_e,Ne,Ee,bt){for(var dn=_e.length,Wn=Ee+(bt?1:-1);bt?Wn--:++Wn<dn;)if(Ne(_e[Wn],Wn,_e))return Wn;return-1}function cu(_e,Ne,Ee){return Ne===Ne?mp(_e,Ne,Ee):Yo(_e,Ym,Ee)}function Gm(_e,Ne,Ee,bt){for(var dn=Ee-1,Wn=_e.length;++dn<Wn;)if(bt(_e[dn],Ne))return dn;return-1}function Ym(_e){return _e!==_e}function Zm(_e,Ne){var Ee=_e==null?0:_e.length;return Ee?Ea(_e,Ne)/Ee:B}function Kf(_e){return function(Ne){return Ne==null?t:Ne[_e]}}function Vh(_e){return function(Ne){return _e==null?t:_e[Ne]}}function Xa(_e,Ne,Ee,bt,dn){return dn(_e,function(Wn,ir,li){Ee=bt?(bt=!1,Wn):Ne(Ee,Wn,ir,li)}),Ee}function sy(_e,Ne){var Ee=_e.length;for(_e.sort(Ne);Ee--;)_e[Ee]=_e[Ee].value;return _e}function Ea(_e,Ne){for(var Ee,bt=-1,dn=_e.length;++bt<dn;){var Wn=Ne(_e[bt]);Wn!==t&&(Ee=Ee===t?Wn:Ee+Wn)}return Ee}function gp(_e,Ne){for(var Ee=-1,bt=Array(_e);++Ee<_e;)bt[Ee]=Ne(Ee);return bt}function Qb(_e,Ne){return vi(Ne,function(Ee){return[Ee,_e[Ee]]})}function mc(_e){return _e&&_e.slice(0,_p(_e)+1).replace(Le,"")}function ts(_e){return function(Ne){return _e(Ne)}}function td(_e,Ne){return vi(Ne,function(Ee){return _e[Ee]})}function cr(_e,Ne){return _e.has(Ne)}function _c(_e,Ne){for(var Ee=-1,bt=_e.length;++Ee<bt&&cu(Ne,_e[Ee],0)>-1;);return Ee}function Gf(_e,Ne){for(var Ee=_e.length;Ee--&&cu(Ne,_e[Ee],0)>-1;);return Ee}function Jb(_e,Ne){for(var Ee=_e.length,bt=0;Ee--;)_e[Ee]===Ne&&++bt;return bt}var Xm=Vh(Hu),e1=Vh(lp);function t1(_e){return"\\"+iy[_e]}function Yf(_e,Ne){return _e==null?t:_e[Ne]}function du(_e){return o0.test(_e)}function Qm(_e){return $f.test(_e)}function Zf(_e){for(var Ne,Ee=[];!(Ne=_e.next()).done;)Ee.push(Ne.value);return Ee}function Xf(_e){var Ne=-1,Ee=Array(_e.size);return _e.forEach(function(bt,dn){Ee[++Ne]=[dn,bt]}),Ee}function pp(_e,Ne){return function(Ee){return _e(Ne(Ee))}}function Co(_e,Ne){for(var Ee=-1,bt=_e.length,dn=0,Wn=[];++Ee<bt;){var ir=_e[Ee];(ir===Ne||ir===d)&&(_e[Ee]=d,Wn[dn++]=Ee)}return Wn}function Fl(_e){var Ne=-1,Ee=Array(_e.size);return _e.forEach(function(bt){Ee[++Ne]=bt}),Ee}function d0(_e){var Ne=-1,Ee=Array(_e.size);return _e.forEach(function(bt){Ee[++Ne]=[bt,bt]}),Ee}function mp(_e,Ne,Ee){for(var bt=Ee-1,dn=_e.length;++bt<dn;)if(_e[bt]===Ne)return bt;return-1}function oy(_e,Ne,Ee){for(var bt=Ee+1;bt--;)if(_e[bt]===Ne)return bt;return bt}function fl(_e){return du(_e)?gl(_e):c0(_e)}function Ns(_e){return du(_e)?Jm(_e):Yd(_e)}function _p(_e){for(var Ne=_e.length;Ne--&&oe.test(_e.charAt(Ne)););return Ne}var h0=Vh(Zb);function gl(_e){for(var Ne=ed.lastIndex=0;ed.test(_e);)++Ne;return Ne}function Jm(_e){return _e.match(ed)||[]}function vp(_e){return _e.match(Kb)||[]}var n1=function _e(Ne){Ne=Ne==null?Gi:hu.defaults(Gi.Object(),Ne,hu.pick(Gi,Gb));var Ee=Ne.Array,bt=Ne.Date,dn=Ne.Error,Wn=Ne.Function,ir=Ne.Math,li=Ne.Object,nd=Ne.RegExp,i1=Ne.String,Ur=Ne.TypeError,Qa=Ee.prototype,f0=Wn.prototype,Ja=li.prototype,id=Ne["__core-js_shared__"],Bl=f0.toString,On=Ja.hasOwnProperty,Hh=0,bp=function(){var c=/[^.]+$/.exec(id&&id.keys&&id.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Zd=Ja.toString,e_=Bl.call(li),r1=Gi._,s1=nd("^"+Bl.call(On).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wl=cp?Ne.Buffer:t,je=Ne.Symbol,Lt=Ne.Uint8Array,ft=Wl?Wl.allocUnsafe:t,Cn=pp(li.getPrototypeOf,li),Ci=li.create,mr=Ja.propertyIsEnumerable,As=Qa.splice,Kr=je?je.isConcatSpreadable:t,el=je?je.iterator:t,Vl=je?je.toStringTag:t,Mo=function(){try{var c=_a(li,"defineProperty");return c({},"",{}),c}catch{}}(),Cp=Ne.clearTimeout!==Gi.clearTimeout&&Ne.clearTimeout,Os=bt&&bt.now!==Gi.Date.now&&bt.now,Xd=Ne.setTimeout!==Gi.setTimeout&&Ne.setTimeout,Hl=ir.ceil,pl=ir.floor,Cr=li.getOwnPropertySymbols,g0=Wl?Wl.isBuffer:t,Qd=Ne.isFinite,zh=Qa.join,Qf=pp(li.keys,li),rr=ir.max,Fr=ir.min,t_=bt.now,rd=Ne.parseInt,sd=ir.random,yp=Qa.reverse,vc=_a(Ne,"DataView"),fu=_a(Ne,"Map"),Jd=_a(Ne,"Promise"),xa=_a(Ne,"Set"),bc=_a(Ne,"WeakMap"),ml=_a(li,"create"),zl=bc&&new bc,_l={},p0=Oa(vc),eh=Oa(fu),o1=Oa(Jd),od=Oa(xa),Ul=Oa(bc),$l=je?je.prototype:t,ua=$l?$l.valueOf:t,Jf=$l?$l.toString:t;function j(c){if(ji(c)&&!_n(c)&&!(c instanceof En)){if(c instanceof Wi)return c;if(On.call(c,"__wrapped__"))return Hp(c)}return new Wi(c)}var zu=function(){function c(){}return function(f){if(!Mi(f))return{};if(Ci)return Ci(f);c.prototype=f;var b=new c;return c.prototype=t,b}}();function Br(){}function Wi(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}j.templateSettings={escape:Oi,evaluate:vt,interpolate:vo,variable:"",imports:{_:j}},j.prototype=Br.prototype,j.prototype.constructor=j,Wi.prototype=zu(Br.prototype),Wi.prototype.constructor=Wi;function En(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function n_(){var c=new En(this.__wrapped__);return c.__actions__=Zi(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Zi(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Zi(this.__views__),c}function i_(){if(this.__filtered__){var c=new En(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function eg(){var c=this.__wrapped__.value(),f=this.__dir__,b=_n(c),x=f<0,F=b?c.length:0,Y=Pp(0,F,this.__views__),re=Y.start,ue=Y.end,ve=ue-re,Fe=x?ue:re-1,Be=this.__iteratees__,Ue=Be.length,ht=0,Nt=Fr(ve,this.__takeCount__);if(!b||!x&&F==ve&&Nt==ve)return Xh(c,this.__actions__);var Qt=[];e:for(;ve--&&ht<Nt;){Fe+=f;for(var Ln=-1,Jt=c[Fe];++Ln<Ue;){var An=Be[Ln],Hn=An.iteratee,Zs=An.type,_s=Hn(Jt);if(Zs==Z)Jt=_s;else if(!_s){if(Zs==G)continue e;break e}}Qt[ht++]=Jt}return Qt}En.prototype=zu(Br.prototype),En.prototype.constructor=En;function Js(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function Gr(){this.__data__=ml?ml(null):{},this.size=0}function ns(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function jl(c){var f=this.__data__;if(ml){var b=f[c];return b===l?t:b}return On.call(f,c)?f[c]:t}function yo(c){var f=this.__data__;return ml?f[c]!==t:On.call(f,c)}function Zo(c,f){var b=this.__data__;return this.size+=this.has(c)?0:1,b[c]=ml&&f===t?l:f,this}Js.prototype.clear=Gr,Js.prototype.delete=ns,Js.prototype.get=jl,Js.prototype.has=yo,Js.prototype.set=Zo;function ys(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function Uu(){this.__data__=[],this.size=0}function vl(c){var f=this.__data__,b=Po(f,c);if(b<0)return!1;var x=f.length-1;return b==x?f.pop():As.call(f,b,1),--this.size,!0}function r_(c){var f=this.__data__,b=Po(f,c);return b<0?t:f[b][1]}function a1(c){return Po(this.__data__,c)>-1}function l1(c,f){var b=this.__data__,x=Po(b,c);return x<0?(++this.size,b.push([c,f])):b[x][1]=f,this}ys.prototype.clear=Uu,ys.prototype.delete=vl,ys.prototype.get=r_,ys.prototype.has=a1,ys.prototype.set=l1;function wo(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function wp(){this.size=0,this.__data__={hash:new Js,map:new(fu||ys),string:new Js}}function ql(c){var f=Qu(this,c).delete(c);return this.size-=f?1:0,f}function Sp(c){return Qu(this,c).get(c)}function Ce(c){return Qu(this,c).has(c)}function Uh(c,f){var b=Qu(this,c),x=b.size;return b.set(c,f),this.size+=b.size==x?0:1,this}wo.prototype.clear=wp,wo.prototype.delete=ql,wo.prototype.get=Sp,wo.prototype.has=Ce,wo.prototype.set=Uh;function Da(c){var f=-1,b=c==null?0:c.length;for(this.__data__=new wo;++f<b;)this.add(c[f])}function Ro(c){return this.__data__.set(c,l),this}function $i(c){return this.__data__.has(c)}Da.prototype.add=Da.prototype.push=Ro,Da.prototype.has=$i;function ws(c){var f=this.__data__=new ys(c);this.size=f.size}function s_(){this.__data__=new ys,this.size=0}function o_(c){var f=this.__data__,b=f.delete(c);return this.size=f.size,b}function Xo(c){return this.__data__.get(c)}function gu(c){return this.__data__.has(c)}function $h(c,f){var b=this.__data__;if(b instanceof ys){var x=b.__data__;if(!fu||x.length<i-1)return x.push([c,f]),this.size=++b.size,this;b=this.__data__=new wo(x)}return b.set(c,f),this.size=b.size,this}ws.prototype.clear=s_,ws.prototype.delete=o_,ws.prototype.get=Xo,ws.prototype.has=gu,ws.prototype.set=$h;function $u(c,f){var b=_n(c),x=!b&&tc(c),F=!b&&!x&&eu(c),Y=!b&&!x&&!F&&Sd(c),re=b||x||F||Y,ue=re?gp(c.length,i1):[],ve=ue.length;for(var Fe in c)(f||On.call(c,Fe))&&!(re&&(Fe=="length"||F&&(Fe=="offset"||Fe=="parent")||Y&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||Nr(Fe,ve)))&&ue.push(Fe);return ue}function ju(c){var f=c.length;return f?c[vu(0,f-1)]:t}function jh(c,f){return rf(Zi(c),tl(f,0,c.length))}function Cc(c){return rf(Zi(c))}function qh(c,f,b){(b!==t&&!Do(c[f],b)||b===t&&!(f in c))&&Qo(c,f,b)}function qu(c,f,b){var x=c[f];(!(On.call(c,f)&&Do(x,b))||b===t&&!(f in c))&&Qo(c,f,b)}function Po(c,f){for(var b=c.length;b--;)if(Do(c[b][0],f))return b;return-1}function Kl(c,f,b,x){return fs(c,function(F,Y,re){f(x,F,b(F),re)}),x}function Ss(c,f){return c&&ms(f,Dr(f),c)}function Fo(c,f){return c&&ms(f,ui(f),c)}function Qo(c,f,b){f=="__proto__"&&Mo?Mo(c,f,{configurable:!0,enumerable:!0,value:b,writable:!0}):c[f]=b}function tg(c,f){for(var b=-1,x=f.length,F=Ee(x),Y=c==null;++b<x;)F[b]=Y?t:P_(c,f[b]);return F}function tl(c,f,b){return c===c&&(b!==t&&(c=c<=b?c:b),f!==t&&(c=c>=f?c:f)),c}function Ms(c,f,b,x,F,Y){var re,ue=f&h,ve=f&p,Fe=f&v;if(b&&(re=F?b(c,x,F,Y):b(c)),re!==t)return re;if(!Mi(c))return c;var Be=_n(c);if(Be){if(re=Ql(c),!ue)return Zi(c,re)}else{var Ue=xr(c),ht=Ue==_t||Ue==sn;if(eu(c))return rh(c,ue);if(Ue==Ft||Ue==Me||ht&&!F){if(re=ve||ht?{}:Ho(c),!ue)return ve?f1(c,Fo(re,c)):lg(c,Ss(re,c))}else{if(!ei[Ue])return F?c:{};re=p1(c,Ue,ue)}}Y||(Y=new ws);var Nt=Y.get(c);if(Nt)return Nt;Y.set(c,re),gh(c)?c.forEach(function(Jt){re.add(Ms(Jt,f,b,Jt,c,Y))}):wy(c)&&c.forEach(function(Jt,An){re.set(An,Ms(Jt,f,b,An,c,Y))});var Qt=Fe?ve?tf:Xu:ve?ui:Dr,Ln=Be?t:Qt(c);return gi(Ln||c,function(Jt,An){Ln&&(An=Jt,Jt=c[An]),qu(re,An,Ms(Jt,f,b,An,c,Y))}),re}function u1(c){var f=Dr(c);return function(b){return pu(b,c,f)}}function pu(c,f,b){var x=b.length;if(c==null)return!x;for(c=li(c);x--;){var F=b[x],Y=f[F],re=c[F];if(re===t&&!(F in c)||!Y(re))return!1}return!0}function a_(c,f,b){if(typeof c!="function")throw new Ur(o);return kc(function(){c.apply(t,b)},f)}function bl(c,f,b,x){var F=-1,Y=Wh,re=!0,ue=c.length,ve=[],Fe=f.length;if(!ue)return ve;b&&(f=vi(f,ts(b))),x?(Y=hp,re=!1):f.length>=i&&(Y=cr,re=!1,f=new Da(f));e:for(;++F<ue;){var Be=c[F],Ue=b==null?Be:b(Be);if(Be=x||Be!==0?Be:0,re&&Ue===Ue){for(var ht=Fe;ht--;)if(f[ht]===Ue)continue e;ve.push(Be)}else Y(f,Ue,x)||ve.push(Be)}return ve}var fs=nl(eo),m0=nl(mu,!0);function Lp(c,f){var b=!0;return fs(c,function(x,F,Y){return b=!!f(x,F,Y),b}),b}function yc(c,f,b){for(var x=-1,F=c.length;++x<F;){var Y=c[x],re=f(Y);if(re!=null&&(ue===t?re===re&&!Ys(re):b(re,ue)))var ue=re,ve=Y}return ve}function c1(c,f,b,x){var F=c.length;for(b=Kt(b),b<0&&(b=-b>F?0:F+b),x=x===t||x>F?F:Kt(x),x<0&&(x+=F),x=b>x?0:to(x);b<x;)c[b++]=f;return c}function l_(c,f){var b=[];return fs(c,function(x,F,Y){f(x,F,Y)&&b.push(x)}),b}function Qi(c,f,b,x,F){var Y=-1,re=c.length;for(b||(b=Bp),F||(F=[]);++Y<re;){var ue=c[Y];f>0&&b(ue)?f>1?Qi(ue,f-1,b,x,F):Za(F,ue):x||(F[F.length]=ue)}return F}var Kh=ug(),ng=ug(!0);function eo(c,f){return c&&Kh(c,f,Dr)}function mu(c,f){return c&&ng(c,f,Dr)}function Gl(c,f){return Ya(f,function(b){return rl(c[b])})}function Jo(c,f){f=Wo(f,c);for(var b=0,x=f.length;c!=null&&b<x;)c=c[wr(f[b++])];return b&&b==x?c:t}function Ep(c,f,b){var x=f(c);return _n(c)?x:Za(x,b(c))}function Tr(c){return c==null?c===t?bn:qn:Vl&&Vl in li(c)?m_(c):Wp(c)}function wc(c,f){return c>f}function So(c,f){return c!=null&&On.call(c,f)}function ad(c,f){return c!=null&&f in li(c)}function ld(c,f,b){return c>=Fr(f,b)&&c<rr(f,b)}function ca(c,f,b){for(var x=b?hp:Wh,F=c[0].length,Y=c.length,re=Y,ue=Ee(Y),ve=1/0,Fe=[];re--;){var Be=c[re];re&&f&&(Be=vi(Be,ts(f))),ve=Fr(Be.length,ve),ue[re]=!b&&(f||F>=120&&Be.length>=120)?new Da(re&&Be):t}Be=c[0];var Ue=-1,ht=ue[0];e:for(;++Ue<F&&Fe.length<ve;){var Nt=Be[Ue],Qt=f?f(Nt):Nt;if(Nt=b||Nt!==0?Nt:0,!(ht?cr(ht,Qt):x(Fe,Qt,b))){for(re=Y;--re;){var Ln=ue[re];if(!(Ln?cr(Ln,Qt):x(c[re],Qt,b)))continue e}ht&&ht.push(Qt),Fe.push(Nt)}}return Fe}function ud(c,f,b,x){return eo(c,function(F,Y,re){f(x,b(F),Y,re)}),x}function da(c,f,b){f=Wo(f,c),c=yr(c,f);var x=c==null?c:c[wr(Es(f))];return x==null?t:hs(x,c,b)}function ig(c){return ji(c)&&Tr(c)==Me}function rg(c){return ji(c)&&Tr(c)==rt}function Ia(c){return ji(c)&&Tr(c)==Ye}function ha(c,f,b,x,F){return c===f?!0:c==null||f==null||!ji(c)&&!ji(f)?c!==c&&f!==f:u_(c,f,b,x,ha,F)}function u_(c,f,b,x,F,Y){var re=_n(c),ue=_n(f),ve=re?Qe:xr(c),Fe=ue?Qe:xr(f);ve=ve==Me?Ft:ve,Fe=Fe==Me?Ft:Fe;var Be=ve==Ft,Ue=Fe==Ft,ht=ve==Fe;if(ht&&eu(c)){if(!eu(f))return!1;re=!0,Be=!1}if(ht&&!Be)return Y||(Y=new ws),re||Sd(c)?Rp(c,f,b,x,F,Y):L0(c,f,ve,b,x,F,Y);if(!(b&C)){var Nt=Be&&On.call(c,"__wrapped__"),Qt=Ue&&On.call(f,"__wrapped__");if(Nt||Qt){var Ln=Nt?c.value():c,Jt=Qt?f.value():f;return Y||(Y=new ws),F(Ln,Jt,b,x,Y)}}return ht?(Y||(Y=new ws),E0(c,f,b,x,F,Y)):!1}function xp(c){return ji(c)&&xr(c)==rn}function th(c,f,b,x){var F=b.length,Y=F,re=!x;if(c==null)return!Y;for(c=li(c);F--;){var ue=b[F];if(re&&ue[2]?ue[1]!==c[ue[0]]:!(ue[0]in c))return!1}for(;++F<Y;){ue=b[F];var ve=ue[0],Fe=c[ve],Be=ue[1];if(re&&ue[2]){if(Fe===t&&!(ve in c))return!1}else{var Ue=new ws;if(x)var ht=x(Fe,Be,ve,c,f,Ue);if(!(ht===t?ha(Be,Fe,C|S,x,Ue):ht))return!1}}return!0}function Dp(c){if(!Mi(c)||__(c))return!1;var f=rl(c)?s1:be;return f.test(Oa(c))}function lo(c){return ji(c)&&Tr(c)==an}function _u(c){return ji(c)&&xr(c)==ot}function sg(c){return ji(c)&&Kp(c.length)&&!!ai[Tr(c)]}function Ta(c){return typeof c=="function"?c:c==null?Rs:typeof c=="object"?_n(c)?gs(c[0],c[1]):Bo(c):Fy(c)}function Yl(c){if(!ta(c))return Qf(c);var f=[];for(var b in li(c))On.call(c,b)&&b!="constructor"&&f.push(b);return f}function og(c){if(!Mi(c))return m1(c);var f=ta(c),b=[];for(var x in c)x=="constructor"&&(f||!On.call(c,x))||b.push(x);return b}function ka(c,f){return c<f}function Ip(c,f){var b=-1,x=is(c)?Ee(c.length):[];return fs(c,function(F,Y,re){x[++b]=f(F,Y,re)}),x}function Bo(c){var f=pd(c);return f.length==1&&f[0][2]?uh(f[0][0],f[0][1]):function(b){return b===c||th(b,c,f)}}function gs(c,f){return Sn(c)&&ii(f)?uh(wr(c),f):function(b){var x=P_(b,c);return x===t&&x===f?Ri(b,c):ha(f,x,C|S)}}function Sc(c,f,b,x,F){c!==f&&Kh(f,function(Y,re){if(F||(F=new ws),Mi(Y))_0(c,f,re,b,Sc,x,F);else{var ue=x?x(Cu(c,re),Y,re+"",c,f,F):t;ue===t&&(ue=Y),qh(c,re,ue)}},ui)}function _0(c,f,b,x,F,Y,re){var ue=Cu(c,b),ve=Cu(f,b),Fe=re.get(ve);if(Fe){qh(c,b,Fe);return}var Be=Y?Y(ue,ve,b+"",c,f,re):t,Ue=Be===t;if(Ue){var ht=_n(ve),Nt=!ht&&eu(ve),Qt=!ht&&!Nt&&Sd(ve);Be=ve,ht||Nt||Qt?_n(ue)?Be=ue:Vi(ue)?Be=Zi(ue):Nt?(Ue=!1,Be=rh(ve,!0)):Qt?(Ue=!1,Be=C0(ve,!0)):Be=[]:Io(ve)||tc(ve)?(Be=ue,tc(ue)?Be=Ey(ue):(!Mi(ue)||rl(ue))&&(Be=Ho(ve))):Ue=!1}Ue&&(re.set(ve,Be),F(Be,ve,x,Y,re),re.delete(ve)),qh(c,b,Be)}function Tp(c,f){var b=c.length;if(b)return f+=f<0?b:0,Nr(f,b)?c[f]:t}function nh(c,f,b){f.length?f=vi(f,function(Y){return _n(Y)?function(re){return Jo(re,Y.length===1?Y[0]:Y)}:Y}):f=[Rs];var x=-1;f=vi(f,ts(jt()));var F=Ip(c,function(Y,re,ue){var ve=vi(f,function(Fe){return Fe(Y)});return{criteria:ve,index:++x,value:Y}});return sy(F,function(Y,re){return y0(Y,re,b)})}function v0(c,f){return Zl(c,f,function(b,x){return Ri(c,x)})}function Zl(c,f,b){for(var x=-1,F=f.length,Y={};++x<F;){var re=f[x],ue=Jo(c,re);b(ue,re)&&Ku(Y,Wo(re,c),ue)}return Y}function Ws(c){return function(f){return Jo(f,c)}}function qs(c,f,b,x){var F=x?Gm:cu,Y=-1,re=f.length,ue=c;for(c===f&&(f=Zi(f)),b&&(ue=vi(c,ts(b)));++Y<re;)for(var ve=0,Fe=f[Y],Be=b?b(Fe):Fe;(ve=F(ue,Be,ve,x))>-1;)ue!==c&&As.call(ue,ve,1),As.call(c,ve,1);return c}function Lo(c,f){for(var b=c?f.length:0,x=b-1;b--;){var F=f[b];if(b==x||F!==Y){var Y=F;Nr(F)?As.call(c,F,1):Zh(c,F)}}return c}function vu(c,f){return c+pl(sd()*(f-c+1))}function kp(c,f,b,x){for(var F=-1,Y=rr(Hl((f-c)/(b||1)),0),re=Ee(Y);Y--;)re[x?Y:++F]=c,c+=b;return re}function cd(c,f){var b="";if(!c||f<1||f>ie)return b;do f%2&&(b+=c),f=pl(f/2),f&&(c+=c);while(f);return b}function wn(c,f){return Aa(pg(c,f,Rs),c+"")}function fa(c){return ju(Ld(c))}function b0(c,f){var b=Ld(c);return rf(b,tl(f,0,b.length))}function Ku(c,f,b,x){if(!Mi(c))return c;f=Wo(f,c);for(var F=-1,Y=f.length,re=Y-1,ue=c;ue!=null&&++F<Y;){var ve=wr(f[F]),Fe=b;if(ve==="__proto__"||ve==="constructor"||ve==="prototype")return c;if(F!=re){var Be=ue[ve];Fe=x?x(Be,ve,ue):t,Fe===t&&(Fe=Mi(Be)?Be:Nr(f[F+1])?[]:{})}qu(ue,ve,Fe),ue=ue[ve]}return c}var Np=zl?function(c,f){return zl.set(c,f),c}:Rs,Gu=Mo?function(c,f){return Mo(c,"toString",{configurable:!0,enumerable:!1,value:V0(f),writable:!0})}:Rs;function Cl(c){return rf(Ld(c))}function ps(c,f,b){var x=-1,F=c.length;f<0&&(f=-f>F?0:F+f),b=b>F?F:b,b<0&&(b+=F),F=f>b?0:b-f>>>0,f>>>=0;for(var Y=Ee(F);++x<F;)Y[x]=c[x+f];return Y}function Ap(c,f){var b;return fs(c,function(x,F,Y){return b=f(x,F,Y),!b}),!!b}function Lc(c,f,b){var x=0,F=c==null?x:c.length;if(typeof f=="number"&&f===f&&F<=ae){for(;x<F;){var Y=x+F>>>1,re=c[Y];re!==null&&!Ys(re)&&(b?re<=f:re<f)?x=Y+1:F=Y}return F}return Gh(c,f,Rs,b)}function Gh(c,f,b,x){var F=0,Y=c==null?0:c.length;if(Y===0)return 0;f=b(f);for(var re=f!==f,ue=f===null,ve=Ys(f),Fe=f===t;F<Y;){var Be=pl((F+Y)/2),Ue=b(c[Be]),ht=Ue!==t,Nt=Ue===null,Qt=Ue===Ue,Ln=Ys(Ue);if(re)var Jt=x||Qt;else Fe?Jt=Qt&&(x||ht):ue?Jt=Qt&&ht&&(x||!Nt):ve?Jt=Qt&&ht&&!Nt&&(x||!Ln):Nt||Ln?Jt=!1:Jt=x?Ue<=f:Ue<f;Jt?F=Be+1:Y=Be}return Fr(Y,de)}function Op(c,f){for(var b=-1,x=c.length,F=0,Y=[];++b<x;){var re=c[b],ue=f?f(re):re;if(!b||!Do(ue,ve)){var ve=ue;Y[F++]=re===0?0:re}}return Y}function Yh(c){return typeof c=="number"?c:Ys(c)?B:+c}function Ls(c){if(typeof c=="string")return c;if(_n(c))return vi(c,Ls)+"";if(Ys(c))return Jf?Jf.call(c):"";var f=c+"";return f=="0"&&1/c==-ne?"-0":f}function ga(c,f,b){var x=-1,F=Wh,Y=c.length,re=!0,ue=[],ve=ue;if(b)re=!1,F=hp;else if(Y>=i){var Fe=f?null:Zu(c);if(Fe)return Fl(Fe);re=!1,F=cr,ve=new Da}else ve=f?[]:ue;e:for(;++x<Y;){var Be=c[x],Ue=f?f(Be):Be;if(Be=b||Be!==0?Be:0,re&&Ue===Ue){for(var ht=ve.length;ht--;)if(ve[ht]===Ue)continue e;f&&ve.push(Ue),ue.push(Be)}else F(ve,Ue,b)||(ve!==ue&&ve.push(Ue),ue.push(Be))}return ue}function Zh(c,f){return f=Wo(f,c),c=yr(c,f),c==null||delete c[wr(Es(f))]}function c_(c,f,b,x){return Ku(c,f,b(Jo(c,f)),x)}function dd(c,f,b,x){for(var F=c.length,Y=x?F:-1;(x?Y--:++Y<F)&&f(c[Y],Y,c););return b?ps(c,x?0:Y,x?Y+1:F):ps(c,x?Y+1:0,x?F:Y)}function Xh(c,f){var b=c;return b instanceof En&&(b=b.value()),qf(f,function(x,F){return F.func.apply(F.thisArg,Za([x],F.args))},b)}function ih(c,f,b){var x=c.length;if(x<2)return x?ga(c[0]):[];for(var F=-1,Y=Ee(x);++F<x;)for(var re=c[F],ue=-1;++ue<x;)ue!=F&&(Y[F]=bl(Y[F]||re,c[ue],f,b));return ga(Qi(Y,1),f,b)}function Qh(c,f,b){for(var x=-1,F=c.length,Y=f.length,re={};++x<F;){var ue=x<Y?f[x]:t;b(re,c[x],ue)}return re}function Ec(c){return Vi(c)?c:[]}function ag(c){return typeof c=="function"?c:Rs}function Wo(c,f){return _n(c)?c:Sn(c,f)?[c]:wu(ti(c))}var Yi=wn;function Na(c,f,b){var x=c.length;return b=b===t?x:b,!f&&b>=x?c:ps(c,f,b)}var d_=Cp||function(c){return Gi.clearTimeout(c)};function rh(c,f){if(f)return c.slice();var b=c.length,x=ft?ft(b):new c.constructor(b);return c.copy(x),x}function sh(c){var f=new c.constructor(c.byteLength);return new Lt(f).set(new Lt(c)),f}function d1(c,f){var b=f?sh(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.byteLength)}function h1(c){var f=new c.constructor(c.source,le.exec(c));return f.lastIndex=c.lastIndex,f}function Xl(c){return ua?li(ua.call(c)):{}}function C0(c,f){var b=f?sh(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.length)}function Jh(c,f){if(c!==f){var b=c!==t,x=c===null,F=c===c,Y=Ys(c),re=f!==t,ue=f===null,ve=f===f,Fe=Ys(f);if(!ue&&!Fe&&!Y&&c>f||Y&&re&&ve&&!ue&&!Fe||x&&re&&ve||!b&&ve||!F)return 1;if(!x&&!Y&&!Fe&&c<f||Fe&&b&&F&&!x&&!Y||ue&&b&&F||!re&&F||!ve)return-1}return 0}function y0(c,f,b){for(var x=-1,F=c.criteria,Y=f.criteria,re=F.length,ue=b.length;++x<re;){var ve=Jh(F[x],Y[x]);if(ve){if(x>=ue)return ve;var Fe=b[x];return ve*(Fe=="desc"?-1:1)}}return c.index-f.index}function h_(c,f,b,x){for(var F=-1,Y=c.length,re=b.length,ue=-1,ve=f.length,Fe=rr(Y-re,0),Be=Ee(ve+Fe),Ue=!x;++ue<ve;)Be[ue]=f[ue];for(;++F<re;)(Ue||F<Y)&&(Be[b[F]]=c[F]);for(;Fe--;)Be[ue++]=c[F++];return Be}function Mp(c,f,b,x){for(var F=-1,Y=c.length,re=-1,ue=b.length,ve=-1,Fe=f.length,Be=rr(Y-ue,0),Ue=Ee(Be+Fe),ht=!x;++F<Be;)Ue[F]=c[F];for(var Nt=F;++ve<Fe;)Ue[Nt+ve]=f[ve];for(;++re<ue;)(ht||F<Y)&&(Ue[Nt+b[re]]=c[F++]);return Ue}function Zi(c,f){var b=-1,x=c.length;for(f||(f=Ee(x));++b<x;)f[b]=c[b];return f}function ms(c,f,b,x){var F=!b;b||(b={});for(var Y=-1,re=f.length;++Y<re;){var ue=f[Y],ve=x?x(b[ue],c[ue],ue,b,c):t;ve===t&&(ve=c[ue]),F?Qo(b,ue,ve):qu(b,ue,ve)}return b}function lg(c,f){return ms(c,yl(c),f)}function f1(c,f){return ms(c,gg(c),f)}function xc(c,f){return function(b,x){var F=_n(b)?u0:Kl,Y=f?f():{};return F(b,c,jt(x,2),Y)}}function bu(c){return wn(function(f,b){var x=-1,F=b.length,Y=F>1?b[F-1]:t,re=F>2?b[2]:t;for(Y=c.length>3&&typeof Y=="function"?(F--,Y):t,re&&Yr(b[0],b[1],re)&&(Y=F<3?t:Y,F=1),f=li(f);++x<F;){var ue=b[x];ue&&c(f,ue,x,Y)}return f})}function nl(c,f){return function(b,x){if(b==null)return b;if(!is(b))return c(b,x);for(var F=b.length,Y=f?F:-1,re=li(b);(f?Y--:++Y<F)&&x(re[Y],Y,re)!==!1;);return b}}function ug(c){return function(f,b,x){for(var F=-1,Y=li(f),re=x(f),ue=re.length;ue--;){var ve=re[c?ue:++F];if(b(Y[ve],ve,Y)===!1)break}return f}}function cg(c,f,b){var x=f&E,F=Dc(c);function Y(){var re=this&&this!==Gi&&this instanceof Y?F:c;return re.apply(x?b:this,arguments)}return Y}function dg(c){return function(f){f=ti(f);var b=du(f)?Ns(f):t,x=b?b[0]:f.charAt(0),F=b?Na(b,1).join(""):f.slice(1);return x[c]()+F}}function Vo(c){return function(f){return qf(Ry(My(f).replace($m,"")),c,"")}}function Dc(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var b=zu(c.prototype),x=c.apply(b,f);return Mi(x)?x:b}}function Ic(c,f,b){var x=Dc(c);function F(){for(var Y=arguments.length,re=Ee(Y),ue=Y,ve=ma(F);ue--;)re[ue]=arguments[ue];var Fe=Y<3&&re[0]!==ve&&re[Y-1]!==ve?[]:Co(re,ve);if(Y-=Fe.length,Y<b)return pa(c,f,Yu,F.placeholder,t,re,Fe,t,t,b-Y);var Be=this&&this!==Gi&&this instanceof F?x:c;return hs(Be,this,re)}return F}function hd(c){return function(f,b,x){var F=li(f);if(!is(f)){var Y=jt(b,3);f=Dr(f),b=function(ue){return Y(F[ue],ue,F)}}var re=c(f,b,x);return re>-1?F[Y?f[re]:re]:t}}function hg(c){return Ks(function(f){var b=f.length,x=b,F=Wi.prototype.thru;for(c&&f.reverse();x--;){var Y=f[x];if(typeof Y!="function")throw new Ur(o);if(F&&!re&&Tc(Y)=="wrapper")var re=new Wi([],!0)}for(x=re?x:b;++x<b;){Y=f[x];var ue=Tc(Y),ve=ue=="wrapper"?nf(Y):t;ve&&md(ve[0])&&ve[1]==($|O|V|P)&&!ve[4].length&&ve[9]==1?re=re[Tc(ve[0])].apply(re,ve[3]):re=Y.length==1&&md(Y)?re[ue]():re.thru(Y)}return function(){var Fe=arguments,Be=Fe[0];if(re&&Fe.length==1&&_n(Be))return re.plant(Be).value();for(var Ue=0,ht=b?f[Ue].apply(this,Fe):Be;++Ue<b;)ht=f[Ue].call(this,ht);return ht}})}function Yu(c,f,b,x,F,Y,re,ue,ve,Fe){var Be=f&$,Ue=f&E,ht=f&k,Nt=f&(O|H),Qt=f&z,Ln=ht?t:Dc(c);function Jt(){for(var An=arguments.length,Hn=Ee(An),Zs=An;Zs--;)Hn[Zs]=arguments[Zs];if(Nt)var _s=ma(Jt),Xs=Jb(Hn,_s);if(x&&(Hn=h_(Hn,x,F,Nt)),Y&&(Hn=Mp(Hn,Y,re,Nt)),An-=Xs,Nt&&An<Fe){var Ji=Co(Hn,_s);return pa(c,f,Yu,Jt.placeholder,b,Hn,Ji,ue,ve,Fe-An)}var Uo=Ue?b:this,_=ht?Uo[c]:c;return An=Hn.length,ue?Hn=Ju(Hn,ue):Qt&&An>1&&Hn.reverse(),Be&&ve<An&&(Hn.length=ve),this&&this!==Gi&&this instanceof Jt&&(_=Ln||Dc(_)),_.apply(Uo,Hn)}return Jt}function w0(c,f){return function(b,x){return ud(b,c,f(x),{})}}function oh(c,f){return function(b,x){var F;if(b===t&&x===t)return f;if(b!==t&&(F=b),x!==t){if(F===t)return x;typeof b=="string"||typeof x=="string"?(b=Ls(b),x=Ls(x)):(b=Yh(b),x=Yh(x)),F=c(b,x)}return F}}function fg(c){return Ks(function(f){return f=vi(f,ts(jt())),wn(function(b){var x=this;return c(f,function(F){return hs(F,x,b)})})})}function fd(c,f){f=f===t?" ":Ls(f);var b=f.length;if(b<2)return b?cd(f,c):f;var x=cd(f,Hl(c/fl(f)));return du(f)?Na(Ns(x),0,c).join(""):x.slice(0,c)}function S0(c,f,b,x){var F=f&E,Y=Dc(c);function re(){for(var ue=-1,ve=arguments.length,Fe=-1,Be=x.length,Ue=Ee(Be+ve),ht=this&&this!==Gi&&this instanceof re?Y:c;++Fe<Be;)Ue[Fe]=x[Fe];for(;ve--;)Ue[Fe++]=arguments[++ue];return hs(ht,F?b:this,Ue)}return re}function f_(c){return function(f,b,x){return x&&typeof x!="number"&&Yr(f,b,x)&&(b=x=t),f=ia(f),b===t?(b=f,f=0):b=ia(b),x=x===t?f<b?1:-1:ia(x),kp(f,b,x,c)}}function ah(c){return function(f,b){return typeof f=="string"&&typeof b=="string"||(f=no(f),b=no(b)),c(f,b)}}function pa(c,f,b,x,F,Y,re,ue,ve,Fe){var Be=f&O,Ue=Be?re:t,ht=Be?t:re,Nt=Be?Y:t,Qt=Be?t:Y;f|=Be?V:X,f&=~(Be?X:V),f&D||(f&=~(E|k));var Ln=[c,f,F,Nt,Ue,Qt,ht,ue,ve,Fe],Jt=b.apply(t,Ln);return md(c)&&Vp(Jt,Ln),Jt.placeholder=x,C_(Jt,c,f)}function kr(c){var f=ir[c];return function(b,x){if(b=no(b),x=x==null?0:Fr(Kt(x),292),x&&Qd(b)){var F=(ti(b)+"e").split("e"),Y=f(F[0]+"e"+(+F[1]+x));return F=(ti(Y)+"e").split("e"),+(F[0]+"e"+(+F[1]-x))}return f(b)}}var Zu=xa&&1/Fl(new xa([,-0]))[1]==ne?function(c){return new xa(c)}:U0;function g_(c){return function(f){var b=xr(f);return b==rn?Xf(f):b==ot?d0(f):Qb(f,c(f))}}function ea(c,f,b,x,F,Y,re,ue){var ve=f&k;if(!ve&&typeof c!="function")throw new Ur(o);var Fe=x?x.length:0;if(Fe||(f&=~(V|X),x=F=t),re=re===t?re:rr(Kt(re),0),ue=ue===t?ue:Kt(ue),Fe-=F?F.length:0,f&X){var Be=x,Ue=F;x=F=t}var ht=ve?t:nf(c),Nt=[c,f,b,x,F,Be,Ue,Y,re,ue];if(ht&&ch(Nt,ht),c=Nt[0],f=Nt[1],b=Nt[2],x=Nt[3],F=Nt[4],ue=Nt[9]=Nt[9]===t?ve?0:c.length:rr(Nt[9]-Fe,0),!ue&&f&(O|H)&&(f&=~(O|H)),!f||f==E)var Qt=cg(c,f,b);else f==O||f==H?Qt=Ic(c,f,ue):(f==V||f==(E|V))&&!F.length?Qt=S0(c,f,b,x):Qt=Yu.apply(t,Nt);var Ln=ht?Np:Vp;return C_(Ln(Qt,Nt),c,f)}function ef(c,f,b,x){return c===t||Do(c,Ja[b])&&!On.call(x,b)?f:c}function gd(c,f,b,x,F,Y){return Mi(c)&&Mi(f)&&(Y.set(f,c),Sc(c,f,t,gd,Y),Y.delete(f)),c}function p_(c){return Io(c)?t:c}function Rp(c,f,b,x,F,Y){var re=b&C,ue=c.length,ve=f.length;if(ue!=ve&&!(re&&ve>ue))return!1;var Fe=Y.get(c),Be=Y.get(f);if(Fe&&Be)return Fe==f&&Be==c;var Ue=-1,ht=!0,Nt=b&S?new Da:t;for(Y.set(c,f),Y.set(f,c);++Ue<ue;){var Qt=c[Ue],Ln=f[Ue];if(x)var Jt=re?x(Ln,Qt,Ue,f,c,Y):x(Qt,Ln,Ue,c,f,Y);if(Jt!==t){if(Jt)continue;ht=!1;break}if(Nt){if(!ao(f,function(An,Hn){if(!cr(Nt,Hn)&&(Qt===An||F(Qt,An,b,x,Y)))return Nt.push(Hn)})){ht=!1;break}}else if(!(Qt===Ln||F(Qt,Ln,b,x,Y))){ht=!1;break}}return Y.delete(c),Y.delete(f),ht}function L0(c,f,b,x,F,Y,re){switch(b){case yt:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case rt:return!(c.byteLength!=f.byteLength||!Y(new Lt(c),new Lt(f)));case Rt:case Ye:case on:return Do(+c,+f);case Ut:return c.name==f.name&&c.message==f.message;case an:case Mt:return c==f+"";case rn:var ue=Xf;case ot:var ve=x&C;if(ue||(ue=Fl),c.size!=f.size&&!ve)return!1;var Fe=re.get(c);if(Fe)return Fe==f;x|=S,re.set(c,f);var Be=Rp(ue(c),ue(f),x,F,Y,re);return re.delete(c),Be;case cn:if(ua)return ua.call(c)==ua.call(f)}return!1}function E0(c,f,b,x,F,Y){var re=b&C,ue=Xu(c),ve=ue.length,Fe=Xu(f),Be=Fe.length;if(ve!=Be&&!re)return!1;for(var Ue=ve;Ue--;){var ht=ue[Ue];if(!(re?ht in f:On.call(f,ht)))return!1}var Nt=Y.get(c),Qt=Y.get(f);if(Nt&&Qt)return Nt==f&&Qt==c;var Ln=!0;Y.set(c,f),Y.set(f,c);for(var Jt=re;++Ue<ve;){ht=ue[Ue];var An=c[ht],Hn=f[ht];if(x)var Zs=re?x(Hn,An,ht,f,c,Y):x(An,Hn,ht,c,f,Y);if(!(Zs===t?An===Hn||F(An,Hn,b,x,Y):Zs)){Ln=!1;break}Jt||(Jt=ht=="constructor")}if(Ln&&!Jt){var _s=c.constructor,Xs=f.constructor;_s!=Xs&&"constructor"in c&&"constructor"in f&&!(typeof _s=="function"&&_s instanceof _s&&typeof Xs=="function"&&Xs instanceof Xs)&&(Ln=!1)}return Y.delete(c),Y.delete(f),Ln}function Ks(c){return Aa(pg(c,t,vg),c+"")}function Xu(c){return Ep(c,Dr,yl)}function tf(c){return Ep(c,ui,gg)}var nf=zl?function(c){return zl.get(c)}:U0;function Tc(c){for(var f=c.name+"",b=_l[f],x=On.call(_l,f)?b.length:0;x--;){var F=b[x],Y=F.func;if(Y==null||Y==c)return F.name}return f}function ma(c){var f=On.call(j,"placeholder")?j:c;return f.placeholder}function jt(){var c=j.iteratee||H0;return c=c===H0?Ta:c,arguments.length?c(arguments[0],arguments[1]):c}function Qu(c,f){var b=c.__data__;return lh(f)?b[typeof f=="string"?"string":"hash"]:b.map}function pd(c){for(var f=Dr(c),b=f.length;b--;){var x=f[b],F=c[x];f[b]=[x,F,ii(F)]}return f}function _a(c,f){var b=Yf(c,f);return Dp(b)?b:t}function m_(c){var f=On.call(c,Vl),b=c[Vl];try{c[Vl]=t;var x=!0}catch{}var F=Zd.call(c);return x&&(f?c[Vl]=b:delete c[Vl]),F}var yl=Cr?function(c){return c==null?[]:(c=li(c),Ya(Cr(c),function(f){return mr.call(c,f)}))}:$0,gg=Cr?function(c){for(var f=[];c;)Za(f,yl(c)),c=Cn(c);return f}:$0,xr=Tr;(vc&&xr(new vc(new ArrayBuffer(1)))!=yt||fu&&xr(new fu)!=rn||Jd&&xr(Jd.resolve())!=Pt||xa&&xr(new xa)!=ot||bc&&xr(new bc)!=Pe)&&(xr=function(c){var f=Tr(c),b=f==Ft?c.constructor:t,x=b?Oa(b):"";if(x)switch(x){case p0:return yt;case eh:return rn;case o1:return Pt;case od:return ot;case Ul:return Pe}return f});function Pp(c,f,b){for(var x=-1,F=b.length;++x<F;){var Y=b[x],re=Y.size;switch(Y.type){case"drop":c+=re;break;case"dropRight":f-=re;break;case"take":f=Fr(f,c+re);break;case"takeRight":c=rr(c,f-re);break}}return{start:c,end:f}}function g1(c){var f=c.match(ut);return f?f[1].split(et):[]}function Fp(c,f,b){f=Wo(f,c);for(var x=-1,F=f.length,Y=!1;++x<F;){var re=wr(f[x]);if(!(Y=c!=null&&b(c,re)))break;c=c[re]}return Y||++x!=F?Y:(F=c==null?0:c.length,!!F&&Kp(F)&&Nr(re,F)&&(_n(c)||tc(c)))}function Ql(c){var f=c.length,b=new c.constructor(f);return f&&typeof c[0]=="string"&&On.call(c,"index")&&(b.index=c.index,b.input=c.input),b}function Ho(c){return typeof c.constructor=="function"&&!ta(c)?zu(Cn(c)):{}}function p1(c,f,b){var x=c.constructor;switch(f){case rt:return sh(c);case Rt:case Ye:return new x(+c);case yt:return d1(c,b);case ln:case Rn:case Xt:case Tn:case Tt:case tn:case Qn:case oi:case lt:return C0(c,b);case rn:return new x;case on:case Mt:return new x(c);case an:return h1(c);case ot:return new x;case cn:return Xl(c)}}function ay(c,f){var b=f.length;if(!b)return c;var x=b-1;return f[x]=(b>1?"& ":"")+f[x],f=f.join(b>2?", ":" "),c.replace(Te,`{
/* [wrapped with `+f+`] */
`)}function Bp(c){return _n(c)||tc(c)||!!(Kr&&c&&c[Kr])}function Nr(c,f){var b=typeof c;return f=f??ie,!!f&&(b=="number"||b!="symbol"&&it.test(c))&&c>-1&&c%1==0&&c<f}function Yr(c,f,b){if(!Mi(b))return!1;var x=typeof f;return(x=="number"?is(b)&&Nr(f,b.length):x=="string"&&f in b)?Do(b[f],c):!1}function Sn(c,f){if(_n(c))return!1;var b=typeof c;return b=="number"||b=="symbol"||b=="boolean"||c==null||Ys(c)?!0:Ve.test(c)||!Ge.test(c)||f!=null&&c in li(f)}function lh(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function md(c){var f=Tc(c),b=j[f];if(typeof b!="function"||!(f in En.prototype))return!1;if(c===b)return!0;var x=nf(b);return!!x&&c===x[0]}function __(c){return!!bp&&bp in c}var v_=id?rl:j0;function ta(c){var f=c&&c.constructor,b=typeof f=="function"&&f.prototype||Ja;return c===b}function ii(c){return c===c&&!Mi(c)}function uh(c,f){return function(b){return b==null?!1:b[c]===f&&(f!==t||c in li(b))}}function b_(c){var f=tt(c,function(x){return b.size===u&&b.clear(),x}),b=f.cache;return f}function ch(c,f){var b=c[1],x=f[1],F=b|x,Y=F<(E|k|$),re=x==$&&b==O||x==$&&b==P&&c[7].length<=f[8]||x==($|P)&&f[7].length<=f[8]&&b==O;if(!(Y||re))return c;x&E&&(c[2]=f[2],F|=b&E?0:D);var ue=f[3];if(ue){var ve=c[3];c[3]=ve?h_(ve,ue,f[4]):ue,c[4]=ve?Co(c[3],d):f[4]}return ue=f[5],ue&&(ve=c[5],c[5]=ve?Mp(ve,ue,f[6]):ue,c[6]=ve?Co(c[5],d):f[6]),ue=f[7],ue&&(c[7]=ue),x&$&&(c[8]=c[8]==null?f[8]:Fr(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=F,c}function m1(c){var f=[];if(c!=null)for(var b in li(c))f.push(b);return f}function Wp(c){return Zd.call(c)}function pg(c,f,b){return f=rr(f===t?c.length-1:f,0),function(){for(var x=arguments,F=-1,Y=rr(x.length-f,0),re=Ee(Y);++F<Y;)re[F]=x[f+F];F=-1;for(var ue=Ee(f+1);++F<f;)ue[F]=x[F];return ue[f]=b(re),hs(c,this,ue)}}function yr(c,f){return f.length<2?c:Jo(c,ps(f,0,-1))}function Ju(c,f){for(var b=c.length,x=Fr(f.length,b),F=Zi(c);x--;){var Y=f[x];c[x]=Nr(Y,b)?F[Y]:t}return c}function Cu(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var Vp=yu(Np),kc=Xd||function(c,f){return Gi.setTimeout(c,f)},Aa=yu(Gu);function C_(c,f,b){var x=f+"";return Aa(c,ay(x,_1(g1(x),b)))}function yu(c){var f=0,b=0;return function(){var x=t_(),F=R-(x-b);if(b=x,F>0){if(++f>=I)return arguments[0]}else f=0;return c.apply(t,arguments)}}function rf(c,f){var b=-1,x=c.length,F=x-1;for(f=f===t?x:f;++b<f;){var Y=vu(b,F),re=c[Y];c[Y]=c[b],c[b]=re}return c.length=f,c}var wu=b_(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(Ze,function(b,x,F,Y){f.push(F?Y.replace(N,"$1"):x||b)}),f});function wr(c){if(typeof c=="string"||Ys(c))return c;var f=c+"";return f=="0"&&1/c==-ne?"-0":f}function Oa(c){if(c!=null){try{return Bl.call(c)}catch{}try{return c+""}catch{}}return""}function _1(c,f){return gi(De,function(b){var x="_."+b[0];f&b[1]&&!Wh(c,x)&&c.push(x)}),c.sort()}function Hp(c){if(c instanceof En)return c.clone();var f=new Wi(c.__wrapped__,c.__chain__);return f.__actions__=Zi(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function y_(c,f,b){(b?Yr(c,f,b):f===t)?f=1:f=rr(Kt(f),0);var x=c==null?0:c.length;if(!x||f<1)return[];for(var F=0,Y=0,re=Ee(Hl(x/f));F<x;)re[Y++]=ps(c,F,F+=f);return re}function x0(c){for(var f=-1,b=c==null?0:c.length,x=0,F=[];++f<b;){var Y=c[f];Y&&(F[x++]=Y)}return F}function Ma(){var c=arguments.length;if(!c)return[];for(var f=Ee(c-1),b=arguments[0],x=c;x--;)f[x-1]=arguments[x];return Za(_n(b)?Zi(b):[b],Qi(f,1))}var Sr=wn(function(c,f){return Vi(c)?bl(c,Qi(f,1,Vi,!0)):[]}),zo=wn(function(c,f){var b=Es(f);return Vi(b)&&(b=t),Vi(c)?bl(c,Qi(f,1,Vi,!0),jt(b,2)):[]}),Eo=wn(function(c,f){var b=Es(f);return Vi(b)&&(b=t),Vi(c)?bl(c,Qi(f,1,Vi,!0),t,b):[]});function va(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===t?1:Kt(f),ps(c,f<0?0:f,x)):[]}function Jl(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===t?1:Kt(f),f=x-f,ps(c,0,f<0?0:f)):[]}function mg(c,f){return c&&c.length?dd(c,jt(f,3),!0,!0):[]}function xo(c,f){return c&&c.length?dd(c,jt(f,3),!0):[]}function _g(c,f,b,x){var F=c==null?0:c.length;return F?(b&&typeof b!="number"&&Yr(c,f,b)&&(b=0,x=F),c1(c,f,b,x)):[]}function _d(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=b==null?0:Kt(b);return F<0&&(F=rr(x+F,0)),Yo(c,jt(f,3),F)}function dh(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=x-1;return b!==t&&(F=Kt(b),F=b<0?rr(x+F,0):Fr(F,x-1)),Yo(c,jt(f,3),F,!0)}function vg(c){var f=c==null?0:c.length;return f?Qi(c,1):[]}function vd(c){var f=c==null?0:c.length;return f?Qi(c,ne):[]}function Ra(c,f){var b=c==null?0:c.length;return b?(f=f===t?1:Kt(f),Qi(c,f)):[]}function w_(c){for(var f=-1,b=c==null?0:c.length,x={};++f<b;){var F=c[f];x[F[0]]=F[1]}return x}function bd(c){return c&&c.length?c[0]:t}function Su(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=b==null?0:Kt(b);return F<0&&(F=rr(x+F,0)),cu(c,f,F)}function zp(c){var f=c==null?0:c.length;return f?ps(c,0,-1):[]}var Lu=wn(function(c){var f=vi(c,Ec);return f.length&&f[0]===c[0]?ca(f):[]}),wl=wn(function(c){var f=Es(c),b=vi(c,Ec);return f===Es(b)?f=t:b.pop(),b.length&&b[0]===c[0]?ca(b,jt(f,2)):[]}),S_=wn(function(c){var f=Es(c),b=vi(c,Ec);return f=typeof f=="function"?f:t,f&&b.pop(),b.length&&b[0]===c[0]?ca(b,t,f):[]});function Cd(c,f){return c==null?"":zh.call(c,f)}function Es(c){var f=c==null?0:c.length;return f?c[f-1]:t}function Up(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=x;return b!==t&&(F=Kt(b),F=F<0?rr(x+F,0):Fr(F,x-1)),f===f?oy(c,f,F):Yo(c,Ym,F,!0)}function D0(c,f){return c&&c.length?Tp(c,Kt(f)):t}var L_=wn(bg);function bg(c,f){return c&&c.length&&f&&f.length?qs(c,f):c}function il(c,f,b){return c&&c.length&&f&&f.length?qs(c,f,jt(b,2)):c}function hh(c,f,b){return c&&c.length&&f&&f.length?qs(c,f,t,b):c}var ec=Ks(function(c,f){var b=c==null?0:c.length,x=tg(c,f);return Lo(c,vi(f,function(F){return Nr(F,b)?+F:F}).sort(Jh)),x});function Sl(c,f){var b=[];if(!(c&&c.length))return b;var x=-1,F=[],Y=c.length;for(f=jt(f,3);++x<Y;){var re=c[x];f(re,x,c)&&(b.push(re),F.push(x))}return Lo(c,F),b}function Cg(c){return c==null?c:yp.call(c)}function I0(c,f,b){var x=c==null?0:c.length;return x?(b&&typeof b!="number"&&Yr(c,f,b)?(f=0,b=x):(f=f==null?0:Kt(f),b=b===t?x:Kt(b)),ps(c,f,b)):[]}function E_(c,f){return Lc(c,f)}function v1(c,f,b){return Gh(c,f,jt(b,2))}function yd(c,f){var b=c==null?0:c.length;if(b){var x=Lc(c,f);if(x<b&&Do(c[x],f))return x}return-1}function b1(c,f){return Lc(c,f,!0)}function T0(c,f,b){return Gh(c,f,jt(b,2),!0)}function sf(c,f){var b=c==null?0:c.length;if(b){var x=Lc(c,f,!0)-1;if(Do(c[x],f))return x}return-1}function x_(c){return c&&c.length?Op(c):[]}function of(c,f){return c&&c.length?Op(c,jt(f,2)):[]}function C1(c){var f=c==null?0:c.length;return f?ps(c,1,f):[]}function y1(c,f,b){return c&&c.length?(f=b||f===t?1:Kt(f),ps(c,0,f<0?0:f)):[]}function k0(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===t?1:Kt(f),f=x-f,ps(c,f<0?0:f,x)):[]}function D_(c,f){return c&&c.length?dd(c,jt(f,3),!1,!0):[]}function ly(c,f){return c&&c.length?dd(c,jt(f,3)):[]}var Eu=wn(function(c){return ga(Qi(c,1,Vi,!0))}),w1=wn(function(c){var f=Es(c);return Vi(f)&&(f=t),ga(Qi(c,1,Vi,!0),jt(f,2))}),S1=wn(function(c){var f=Es(c);return f=typeof f=="function"?f:t,ga(Qi(c,1,Vi,!0),t,f)});function af(c){return c&&c.length?ga(c):[]}function L1(c,f){return c&&c.length?ga(c,jt(f,2)):[]}function yg(c,f){return f=typeof f=="function"?f:t,c&&c.length?ga(c,t,f):[]}function wg(c){if(!(c&&c.length))return[];var f=0;return c=Ya(c,function(b){if(Vi(b))return f=rr(b.length,f),!0}),gp(f,function(b){return vi(c,Kf(b))})}function Vs(c,f){if(!(c&&c.length))return[];var b=wg(c);return f==null?b:vi(b,function(x){return hs(f,t,x)})}var uy=wn(function(c,f){return Vi(c)?bl(c,f):[]}),I_=wn(function(c){return ih(Ya(c,Vi))}),cy=wn(function(c){var f=Es(c);return Vi(f)&&(f=t),ih(Ya(c,Vi),jt(f,2))}),dy=wn(function(c){var f=Es(c);return f=typeof f=="function"?f:t,ih(Ya(c,Vi),t,f)}),E1=wn(wg);function x1(c,f){return Qh(c||[],f||[],qu)}function hy(c,f){return Qh(c||[],f||[],Ku)}var xu=wn(function(c){var f=c.length,b=f>1?c[f-1]:t;return b=typeof b=="function"?(c.pop(),b):t,Vs(c,b)});function $p(c){var f=j(c);return f.__chain__=!0,f}function fy(c,f){return f(c),c}function Ll(c,f){return f(c)}var T_=Ks(function(c){var f=c.length,b=f?c[0]:0,x=this.__wrapped__,F=function(Y){return tg(Y,c)};return f>1||this.__actions__.length||!(x instanceof En)||!Nr(b)?this.thru(F):(x=x.slice(b,+b+(f?1:0)),x.__actions__.push({func:Ll,args:[F],thisArg:t}),new Wi(x,this.__chain__).thru(function(Y){return f&&!Y.length&&Y.push(t),Y}))});function lf(){return $p(this)}function k_(){return new Wi(this.value(),this.__chain__)}function N0(){this.__values__===t&&(this.__values__=O1(this.value()));var c=this.__index__>=this.__values__.length,f=c?t:this.__values__[this.__index__++];return{done:c,value:f}}function A0(){return this}function gy(c){for(var f,b=this;b instanceof Br;){var x=Hp(b);x.__index__=0,x.__values__=t,f?F.__wrapped__=x:f=x;var F=x;b=b.__wrapped__}return F.__wrapped__=c,f}function O0(){var c=this.__wrapped__;if(c instanceof En){var f=c;return this.__actions__.length&&(f=new En(this)),f=f.reverse(),f.__actions__.push({func:Ll,args:[Cg],thisArg:t}),new Wi(f,this.__chain__)}return this.thru(Cg)}function py(){return Xh(this.__wrapped__,this.__actions__)}var D1=xc(function(c,f,b){On.call(c,b)?++c[b]:Qo(c,b,1)});function I1(c,f,b){var x=_n(c)?Km:Lp;return b&&Yr(c,f,b)&&(f=t),x(c,jt(f,3))}function N_(c,f){var b=_n(c)?Ya:l_;return b(c,jt(f,3))}var Sg=hd(_d),M0=hd(dh);function R0(c,f){return Qi(Nc(c,f),1)}function my(c,f){return Qi(Nc(c,f),ne)}function T1(c,f,b){return b=b===t?1:Kt(b),Qi(Nc(c,f),b)}function jp(c,f){var b=_n(c)?gi:fs;return b(c,jt(f,3))}function Lg(c,f){var b=_n(c)?qr:m0;return b(c,jt(f,3))}var P0=xc(function(c,f,b){On.call(c,b)?c[b].push(f):Qo(c,b,[f])});function A_(c,f,b,x){c=is(c)?c:Ld(c),b=b&&!x?Kt(b):0;var F=c.length;return b<0&&(b=rr(F+b,0)),Yp(c)?b<=F&&c.indexOf(f,b)>-1:!!F&&cu(c,f,b)>-1}var k1=wn(function(c,f,b){var x=-1,F=typeof f=="function",Y=is(c)?Ee(c.length):[];return fs(c,function(re){Y[++x]=F?hs(f,re,b):da(re,f,b)}),Y}),N1=xc(function(c,f,b){Qo(c,b,f)});function Nc(c,f){var b=_n(c)?vi:Ip;return b(c,jt(f,3))}function O_(c,f,b,x){return c==null?[]:(_n(f)||(f=f==null?[]:[f]),b=x?t:b,_n(b)||(b=b==null?[]:[b]),nh(c,f,b))}var qp=xc(function(c,f,b){c[b?0:1].push(f)},function(){return[[],[]]});function _y(c,f,b){var x=_n(c)?qf:Xa,F=arguments.length<3;return x(c,jt(f,4),b,F,fs)}function M_(c,f,b){var x=_n(c)?ry:Xa,F=arguments.length<3;return x(c,jt(f,4),b,F,m0)}function g(c,f){var b=_n(c)?Ya:l_;return b(c,nn(jt(f,3)))}function m(c){var f=_n(c)?ju:fa;return f(c)}function w(c,f,b){(b?Yr(c,f,b):f===t)?f=1:f=Kt(f);var x=_n(c)?jh:b0;return x(c,f)}function T(c){var f=_n(c)?Cc:Cl;return f(c)}function U(c){if(c==null)return 0;if(is(c))return Yp(c)?fl(c):c.length;var f=xr(c);return f==rn||f==ot?c.size:Yl(c).length}function Q(c,f,b){var x=_n(c)?ao:Ap;return b&&Yr(c,f,b)&&(f=t),x(c,jt(f,3))}var he=wn(function(c,f){if(c==null)return[];var b=f.length;return b>1&&Yr(c,f[0],f[1])?f=[]:b>2&&Yr(f[0],f[1],f[2])&&(f=[f[0]]),nh(c,Qi(f,1),[])}),ke=Os||function(){return Gi.Date.now()};function He(c,f){if(typeof f!="function")throw new Ur(o);return c=Kt(c),function(){if(--c<1)return f.apply(this,arguments)}}function dt(c,f,b){return f=b?t:f,f=c&&f==null?c.length:f,ea(c,$,t,t,t,t,f)}function $t(c,f){var b;if(typeof f!="function")throw new Ur(o);return c=Kt(c),function(){return--c>0&&(b=f.apply(this,arguments)),c<=1&&(f=t),b}}var Gt=wn(function(c,f,b){var x=E;if(b.length){var F=Co(b,ma(Gt));x|=V}return ea(c,x,f,b,F)}),zt=wn(function(c,f,b){var x=E|k;if(b.length){var F=Co(b,ma(zt));x|=V}return ea(f,x,c,b,F)});function In(c,f,b){f=b?t:f;var x=ea(c,O,t,t,t,t,t,f);return x.placeholder=In.placeholder,x}function Vn(c,f,b){f=b?t:f;var x=ea(c,H,t,t,t,t,t,f);return x.placeholder=Vn.placeholder,x}function jn(c,f,b){var x,F,Y,re,ue,ve,Fe=0,Be=!1,Ue=!1,ht=!0;if(typeof c!="function")throw new Ur(o);f=no(f)||0,Mi(b)&&(Be=!!b.leading,Ue="maxWait"in b,Y=Ue?rr(no(b.maxWait)||0,f):Y,ht="trailing"in b?!!b.trailing:ht);function Nt(Ji){var Uo=x,_=F;return x=F=t,Fe=Ji,re=c.apply(_,Uo),re}function Qt(Ji){return Fe=Ji,ue=kc(An,f),Be?Nt(Ji):re}function Ln(Ji){var Uo=Ji-ve,_=Ji-Fe,y=f-Uo;return Ue?Fr(y,Y-_):y}function Jt(Ji){var Uo=Ji-ve,_=Ji-Fe;return ve===t||Uo>=f||Uo<0||Ue&&_>=Y}function An(){var Ji=ke();if(Jt(Ji))return Hn(Ji);ue=kc(An,Ln(Ji))}function Hn(Ji){return ue=t,ht&&x?Nt(Ji):(x=F=t,re)}function Zs(){ue!==t&&d_(ue),Fe=0,x=ve=F=ue=t}function _s(){return ue===t?re:Hn(ke())}function Xs(){var Ji=ke(),Uo=Jt(Ji);if(x=arguments,F=this,ve=Ji,Uo){if(ue===t)return Qt(ve);if(Ue)return d_(ue),ue=kc(An,f),Nt(ve)}return ue===t&&(ue=kc(An,f)),re}return Xs.cancel=Zs,Xs.flush=_s,Xs}var uo=wn(function(c,f){return a_(c,1,f)}),nt=wn(function(c,f,b){return a_(c,no(f)||0,b)});function Ke(c){return ea(c,z)}function tt(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new Ur(o);var b=function(){var x=arguments,F=f?f.apply(this,x):x[0],Y=b.cache;if(Y.has(F))return Y.get(F);var re=c.apply(this,x);return b.cache=Y.set(F,re)||Y,re};return b.cache=new(tt.Cache||wo),b}tt.Cache=wo;function nn(c){if(typeof c!="function")throw new Ur(o);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function Gn(c){return $t(2,c)}var di=Yi(function(c,f){f=f.length==1&&_n(f[0])?vi(f[0],ts(jt())):vi(Qi(f,1),ts(jt()));var b=f.length;return wn(function(x){for(var F=-1,Y=Fr(x.length,b);++F<Y;)x[F]=f[F].call(this,x[F]);return hs(c,this,x)})}),ri=wn(function(c,f){var b=Co(f,ma(ri));return ea(c,V,t,f,b)}),bi=wn(function(c,f){var b=Co(f,ma(bi));return ea(c,X,t,f,b)}),na=Ks(function(c,f){return ea(c,P,t,t,t,f)});function Ar(c,f){if(typeof c!="function")throw new Ur(o);return f=f===t?f:Kt(f),wn(c,f)}function fh(c,f){if(typeof c!="function")throw new Ur(o);return f=f==null?0:rr(Kt(f),0),wn(function(b){var x=b[f],F=Na(b,0,f);return x&&Za(F,x),hs(c,this,F)})}function vy(c,f,b){var x=!0,F=!0;if(typeof c!="function")throw new Ur(o);return Mi(b)&&(x="leading"in b?!!b.leading:x,F="trailing"in b?!!b.trailing:F),jn(c,f,{leading:x,maxWait:f,trailing:F})}function xD(c){return dt(c,1)}function DD(c,f){return ri(ag(f),c)}function A1(){if(!arguments.length)return[];var c=arguments[0];return _n(c)?c:[c]}function ID(c){return Ms(c,v)}function _L(c,f){return f=typeof f=="function"?f:t,Ms(c,v,f)}function vL(c){return Ms(c,h|v)}function by(c,f){return f=typeof f=="function"?f:t,Ms(c,h|v,f)}function bL(c,f){return f==null||pu(c,f,Dr(f))}function Do(c,f){return c===f||c!==c&&f!==f}var CL=ah(wc),yL=ah(function(c,f){return c>=f}),tc=ig(function(){return arguments}())?ig:function(c){return ji(c)&&On.call(c,"callee")&&!mr.call(c,"callee")},_n=Ee.isArray,TD=qm?ts(qm):rg;function is(c){return c!=null&&Kp(c.length)&&!rl(c)}function Vi(c){return ji(c)&&is(c)}function kD(c){return c===!0||c===!1||ji(c)&&Tr(c)==Rt}var eu=g0||j0,Cy=Ga?ts(Ga):Ia;function wL(c){return ji(c)&&c.nodeType===1&&!Io(c)}function ND(c){if(c==null)return!0;if(is(c)&&(_n(c)||typeof c=="string"||typeof c.splice=="function"||eu(c)||Sd(c)||tc(c)))return!c.length;var f=xr(c);if(f==rn||f==ot)return!c.size;if(ta(c))return!Yl(c).length;for(var b in c)if(On.call(c,b))return!1;return!0}function AD(c,f){return ha(c,f)}function OD(c,f,b){b=typeof b=="function"?b:t;var x=b?b(c,f):t;return x===t?ha(c,f,t,b):!!x}function F0(c){if(!ji(c))return!1;var f=Tr(c);return f==Ut||f==gt||typeof c.message=="string"&&typeof c.name=="string"&&!Io(c)}function MD(c){return typeof c=="number"&&Qd(c)}function rl(c){if(!Mi(c))return!1;var f=Tr(c);return f==_t||f==sn||f==ct||f==At}function yy(c){return typeof c=="number"&&c==Kt(c)}function Kp(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ie}function Mi(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function ji(c){return c!=null&&typeof c=="object"}var wy=pc?ts(pc):xp;function RD(c,f){return c===f||th(c,f,pd(f))}function wd(c,f,b){return b=typeof b=="function"?b:t,th(c,f,pd(f),b)}function PD(c){return Sy(c)&&c!=+c}function FD(c){if(v_(c))throw new dn(s);return Dp(c)}function Gp(c){return c===null}function qi(c){return c==null}function Sy(c){return typeof c=="number"||ji(c)&&Tr(c)==on}function Io(c){if(!ji(c)||Tr(c)!=Ft)return!1;var f=Cn(c);if(f===null)return!0;var b=On.call(f,"constructor")&&f.constructor;return typeof b=="function"&&b instanceof b&&Bl.call(b)==e_}var Gs=dp?ts(dp):lo;function BD(c){return yy(c)&&c>=-ie&&c<=ie}var gh=Bh?ts(Bh):_u;function Yp(c){return typeof c=="string"||!_n(c)&&ji(c)&&Tr(c)==Mt}function Ys(c){return typeof c=="symbol"||ji(c)&&Tr(c)==cn}var Sd=l0?ts(l0):sg;function WD(c){return c===t}function VD(c){return ji(c)&&xr(c)==Pe}function Ly(c){return ji(c)&&Tr(c)==at}var HD=ah(ka),uf=ah(function(c,f){return c<=f});function O1(c){if(!c)return[];if(is(c))return Yp(c)?Ns(c):Zi(c);if(el&&c[el])return Zf(c[el]());var f=xr(c),b=f==rn?Xf:f==ot?Fl:Ld;return b(c)}function ia(c){if(!c)return c===0?c:0;if(c=no(c),c===ne||c===-ne){var f=c<0?-1:1;return f*te}return c===c?c:0}function Kt(c){var f=ia(c),b=f%1;return f===f?b?f-b:f:0}function to(c){return c?tl(Kt(c),0,K):0}function no(c){if(typeof c=="number")return c;if(Ys(c))return B;if(Mi(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=Mi(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=mc(c);var b=xe.test(c);return b||qe.test(c)?up(c.slice(2),b?2:8):fe.test(c)?B:+c}function Ey(c){return ms(c,ui(c))}function zD(c){return c?tl(Kt(c),-ie,ie):c===0?c:0}function ti(c){return c==null?"":Ls(c)}var UD=bu(function(c,f){if(ta(f)||is(f)){ms(f,Dr(f),c);return}for(var b in f)On.call(f,b)&&qu(c,b,f[b])}),xy=bu(function(c,f){ms(f,ui(f),c)}),Zp=bu(function(c,f,b,x){ms(f,ui(f),c,x)}),SL=bu(function(c,f,b,x){ms(f,Dr(f),c,x)}),B0=Ks(tg);function Dy(c,f){var b=zu(c);return f==null?b:Ss(b,f)}var $D=wn(function(c,f){c=li(c);var b=-1,x=f.length,F=x>2?f[2]:t;for(F&&Yr(f[0],f[1],F)&&(x=1);++b<x;)for(var Y=f[b],re=ui(Y),ue=-1,ve=re.length;++ue<ve;){var Fe=re[ue],Be=c[Fe];(Be===t||Do(Be,Ja[Fe])&&!On.call(c,Fe))&&(c[Fe]=Y[Fe])}return c}),LL=wn(function(c){return c.push(t,gd),hs(Iy,t,c)});function M1(c,f){return fp(c,jt(f,3),eo)}function nc(c,f){return fp(c,jt(f,3),mu)}function R_(c,f){return c==null?c:Kh(c,jt(f,3),ui)}function jD(c,f){return c==null?c:ng(c,jt(f,3),ui)}function qD(c,f){return c&&eo(c,jt(f,3))}function KD(c,f){return c&&mu(c,jt(f,3))}function GD(c){return c==null?[]:Gl(c,Dr(c))}function YD(c){return c==null?[]:Gl(c,ui(c))}function P_(c,f,b){var x=c==null?t:Jo(c,f);return x===t?b:x}function cf(c,f){return c!=null&&Fp(c,f,So)}function Ri(c,f){return c!=null&&Fp(c,f,ad)}var EL=w0(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=Zd.call(f)),c[f]=b},V0(Rs)),Ac=w0(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=Zd.call(f)),On.call(c,f)?c[f].push(b):c[f]=[b]},jt),xL=wn(da);function Dr(c){return is(c)?$u(c):Yl(c)}function ui(c){return is(c)?$u(c,!0):og(c)}function ZD(c,f){var b={};return f=jt(f,3),eo(c,function(x,F,Y){Qo(b,f(x,F,Y),x)}),b}function DL(c,f){var b={};return f=jt(f,3),eo(c,function(x,F,Y){Qo(b,F,f(x,F,Y))}),b}var R1=bu(function(c,f,b){Sc(c,f,b)}),Iy=bu(function(c,f,b,x){Sc(c,f,b,x)}),XD=Ks(function(c,f){var b={};if(c==null)return b;var x=!1;f=vi(f,function(Y){return Y=Wo(Y,c),x||(x=Y.length>1),Y}),ms(c,tf(c),b),x&&(b=Ms(b,h|p|v,p_));for(var F=f.length;F--;)Zh(b,f[F]);return b});function QD(c,f){return Ty(c,nn(jt(f)))}var JD=Ks(function(c,f){return c==null?{}:v0(c,f)});function Ty(c,f){if(c==null)return{};var b=vi(tf(c),function(x){return[x]});return f=jt(f),Zl(c,b,function(x,F){return f(x,F[0])})}function eI(c,f,b){f=Wo(f,c);var x=-1,F=f.length;for(F||(F=1,c=t);++x<F;){var Y=c==null?t:c[wr(f[x])];Y===t&&(x=F,Y=b),c=rl(Y)?Y.call(c):Y}return c}function tI(c,f,b){return c==null?c:Ku(c,f,b)}function nI(c,f,b,x){return x=typeof x=="function"?x:t,c==null?c:Ku(c,f,b,x)}var ky=g_(Dr),Ny=g_(ui);function iI(c,f,b){var x=_n(c),F=x||eu(c)||Sd(c);if(f=jt(f,4),b==null){var Y=c&&c.constructor;F?b=x?new Y:[]:Mi(c)?b=rl(Y)?zu(Cn(c)):{}:b={}}return(F?gi:eo)(c,function(re,ue,ve){return f(b,re,ue,ve)}),b}function rI(c,f){return c==null?!0:Zh(c,f)}function sI(c,f,b){return c==null?c:c_(c,f,ag(b))}function Ay(c,f,b,x){return x=typeof x=="function"?x:t,c==null?c:c_(c,f,ag(b),x)}function Ld(c){return c==null?[]:td(c,Dr(c))}function Oy(c){return c==null?[]:td(c,ui(c))}function oI(c,f,b){return b===t&&(b=f,f=t),b!==t&&(b=no(b),b=b===b?b:0),f!==t&&(f=no(f),f=f===f?f:0),tl(no(c),f,b)}function aI(c,f,b){return f=ia(f),b===t?(b=f,f=0):b=ia(b),c=no(c),ld(c,f,b)}function lI(c,f,b){if(b&&typeof b!="boolean"&&Yr(c,f,b)&&(f=b=t),b===t&&(typeof f=="boolean"?(b=f,f=t):typeof c=="boolean"&&(b=c,c=t)),c===t&&f===t?(c=0,f=1):(c=ia(c),f===t?(f=c,c=0):f=ia(f)),c>f){var x=c;c=f,f=x}if(b||c%1||f%1){var F=sd();return Fr(c+F*(f-c+jm("1e-"+((F+"").length-1))),f)}return vu(c,f)}var Pa=Vo(function(c,f,b){return f=f.toLowerCase(),c+(b?El(f):f)});function El(c){return W0(ti(c).toLowerCase())}function My(c){return c=ti(c),c&&c.replace(wt,Xm).replace(s0,"")}function uI(c,f,b){c=ti(c),f=Ls(f);var x=c.length;b=b===t?x:tl(Kt(b),0,x);var F=b;return b-=f.length,b>=0&&c.slice(b,F)==f}function cI(c){return c=ti(c),c&&Sa.test(c)?c.replace(Kn,e1):c}function IL(c){return c=ti(c),c&&me.test(c)?c.replace(ge,"\\$&"):c}var dI=Vo(function(c,f,b){return c+(b?"-":"")+f.toLowerCase()}),hI=Vo(function(c,f,b){return c+(b?" ":"")+f.toLowerCase()}),fI=dg("toLowerCase");function TL(c,f,b){c=ti(c),f=Kt(f);var x=f?fl(c):0;if(!f||x>=f)return c;var F=(f-x)/2;return fd(pl(F),b)+c+fd(Hl(F),b)}function gI(c,f,b){c=ti(c),f=Kt(f);var x=f?fl(c):0;return f&&x<f?c+fd(f-x,b):c}function pI(c,f,b){c=ti(c),f=Kt(f);var x=f?fl(c):0;return f&&x<f?fd(f-x,b)+c:c}function mI(c,f,b){return b||f==null?f=0:f&&(f=+f),rd(ti(c).replace(Le,""),f||0)}function kL(c,f,b){return(b?Yr(c,f,b):f===t)?f=1:f=Kt(f),cd(ti(c),f)}function NL(){var c=arguments,f=ti(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var _I=Vo(function(c,f,b){return c+(b?"_":"")+f.toLowerCase()});function vI(c,f,b){return b&&typeof b!="number"&&Yr(c,f,b)&&(f=b=t),b=b===t?K:b>>>0,b?(c=ti(c),c&&(typeof f=="string"||f!=null&&!Gs(f))&&(f=Ls(f),!f&&du(c))?Na(Ns(c),0,b):c.split(f,b)):[]}var bI=Vo(function(c,f,b){return c+(b?" ":"")+W0(f)});function CI(c,f,b){return c=ti(c),b=b==null?0:tl(Kt(b),0,c.length),f=Ls(f),c.slice(b,b+f.length)==f}function F_(c,f,b){var x=j.templateSettings;b&&Yr(c,f,b)&&(f=t),c=ti(c),f=Zp({},f,x,ef);var F=Zp({},f.imports,x.imports,ef),Y=Dr(F),re=td(F,Y),ue,ve,Fe=0,Be=f.interpolate||kt,Ue="__p += '",ht=nd((f.escape||kt).source+"|"+Be.source+"|"+(Be===vo?q:kt).source+"|"+(f.evaluate||kt).source+"|$","g"),Nt="//# sourceURL="+(On.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yb+"]")+`
`;c.replace(ht,function(Jt,An,Hn,Zs,_s,Xs){return Hn||(Hn=Zs),Ue+=c.slice(Fe,Xs).replace(fn,t1),An&&(ue=!0,Ue+=`' +
__e(`+An+`) +
'`),_s&&(ve=!0,Ue+=`';
`+_s+`;
__p += '`),Hn&&(Ue+=`' +
((__t = (`+Hn+`)) == null ? '' : __t) +
'`),Fe=Xs+Jt.length,Jt}),Ue+=`';
`;var Qt=On.call(f,"variable")&&f.variable;if(!Qt)Ue=`with (obj) {
`+Ue+`
}
`;else if(Dn.test(Qt))throw new dn(a);Ue=(ve?Ue.replace(Bs,""):Ue).replace(fi,"$1").replace(Ai,"$1;"),Ue="function("+(Qt||"obj")+`) {
`+(Qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ue?", __e = _.escape":"")+(ve?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ue+`return __p
}`;var Ln=Py(function(){return Wn(Y,Nt+"return "+Ue).apply(t,re)});if(Ln.source=Ue,F0(Ln))throw Ln;return Ln}function yI(c){return ti(c).toLowerCase()}function wI(c){return ti(c).toUpperCase()}function SI(c,f,b){if(c=ti(c),c&&(b||f===t))return mc(c);if(!c||!(f=Ls(f)))return c;var x=Ns(c),F=Ns(f),Y=_c(x,F),re=Gf(x,F)+1;return Na(x,Y,re).join("")}function LI(c,f,b){if(c=ti(c),c&&(b||f===t))return c.slice(0,_p(c)+1);if(!c||!(f=Ls(f)))return c;var x=Ns(c),F=Gf(x,Ns(f))+1;return Na(x,0,F).join("")}function EI(c,f,b){if(c=ti(c),c&&(b||f===t))return c.replace(Le,"");if(!c||!(f=Ls(f)))return c;var x=Ns(c),F=_c(x,Ns(f));return Na(x,F).join("")}function AL(c,f){var b=M,x=W;if(Mi(f)){var F="separator"in f?f.separator:F;b="length"in f?Kt(f.length):b,x="omission"in f?Ls(f.omission):x}c=ti(c);var Y=c.length;if(du(c)){var re=Ns(c);Y=re.length}if(b>=Y)return c;var ue=b-fl(x);if(ue<1)return x;var ve=re?Na(re,0,ue).join(""):c.slice(0,ue);if(F===t)return ve+x;if(re&&(ue+=ve.length-ue),Gs(F)){if(c.slice(ue).search(F)){var Fe,Be=ve;for(F.global||(F=nd(F.source,ti(le.exec(F))+"g")),F.lastIndex=0;Fe=F.exec(Be);)var Ue=Fe.index;ve=ve.slice(0,Ue===t?ue:Ue)}}else if(c.indexOf(Ls(F),ue)!=ue){var ht=ve.lastIndexOf(F);ht>-1&&(ve=ve.slice(0,ht))}return ve+x}function OL(c){return c=ti(c),c&&Pr.test(c)?c.replace(bs,h0):c}var xI=Vo(function(c,f,b){return c+(b?" ":"")+f.toUpperCase()}),W0=dg("toUpperCase");function Ry(c,f,b){return c=ti(c),f=b?t:f,f===t?Qm(c)?vp(c):Xb(c):c.match(f)||[]}var Py=wn(function(c,f){try{return hs(c,t,f)}catch(b){return F0(b)?b:new dn(b)}}),DI=Ks(function(c,f){return gi(f,function(b){b=wr(b),Qo(c,b,Gt(c[b],c))}),c});function II(c){var f=c==null?0:c.length,b=jt();return c=f?vi(c,function(x){if(typeof x[1]!="function")throw new Ur(o);return[b(x[0]),x[1]]}):[],wn(function(x){for(var F=-1;++F<f;){var Y=c[F];if(hs(Y[0],this,x))return hs(Y[1],this,x)}})}function TI(c){return u1(Ms(c,h))}function V0(c){return function(){return c}}function kI(c,f){return c==null||c!==c?f:c}var NI=hg(),AI=hg(!0);function Rs(c){return c}function H0(c){return Ta(typeof c=="function"?c:Ms(c,h))}function OI(c){return Bo(Ms(c,h))}function MI(c,f){return gs(c,Ms(f,h))}var RI=wn(function(c,f){return function(b){return da(b,c,f)}}),PI=wn(function(c,f){return function(b){return da(c,b,f)}});function z0(c,f,b){var x=Dr(f),F=Gl(f,x);b==null&&!(Mi(f)&&(F.length||!x.length))&&(b=f,f=c,c=this,F=Gl(f,Dr(f)));var Y=!(Mi(b)&&"chain"in b)||!!b.chain,re=rl(c);return gi(F,function(ue){var ve=f[ue];c[ue]=ve,re&&(c.prototype[ue]=function(){var Fe=this.__chain__;if(Y||Fe){var Be=c(this.__wrapped__),Ue=Be.__actions__=Zi(this.__actions__);return Ue.push({func:ve,args:arguments,thisArg:c}),Be.__chain__=Fe,Be}return ve.apply(c,Za([this.value()],arguments))})}),c}function FI(){return Gi._===this&&(Gi._=r1),this}function U0(){}function BI(c){return c=Kt(c),wn(function(f){return Tp(f,c)})}var WI=fg(vi),VI=fg(Km),HI=fg(ao);function Fy(c){return Sn(c)?Kf(wr(c)):Ws(c)}function By(c){return function(f){return c==null?t:Jo(c,f)}}var ML=f_(),RL=f_(!0);function $0(){return[]}function j0(){return!1}function zI(){return{}}function Wy(){return""}function UI(){return!0}function $I(c,f){if(c=Kt(c),c<1||c>ie)return[];var b=K,x=Fr(c,K);f=jt(f),c-=K;for(var F=gp(x,f);++b<c;)f(b);return F}function jI(c){return _n(c)?vi(c,wr):Ys(c)?[c]:Zi(wu(ti(c)))}function Du(c){var f=++Hh;return ti(c)+f}var Vy=oh(function(c,f){return c+f},0),qI=kr("ceil"),KI=oh(function(c,f){return c/f},1),GI=kr("floor");function YI(c){return c&&c.length?yc(c,Rs,wc):t}function Hy(c,f){return c&&c.length?yc(c,jt(f,2),wc):t}function ZI(c){return Zm(c,Rs)}function zy(c,f){return Zm(c,jt(f,2))}function XI(c){return c&&c.length?yc(c,Rs,ka):t}function QI(c,f){return c&&c.length?yc(c,jt(f,2),ka):t}var JI=oh(function(c,f){return c*f},1),eT=kr("round"),PL=oh(function(c,f){return c-f},0);function tT(c){return c&&c.length?Ea(c,Rs):0}function nT(c,f){return c&&c.length?Ea(c,jt(f,2)):0}return j.after=He,j.ary=dt,j.assign=UD,j.assignIn=xy,j.assignInWith=Zp,j.assignWith=SL,j.at=B0,j.before=$t,j.bind=Gt,j.bindAll=DI,j.bindKey=zt,j.castArray=A1,j.chain=$p,j.chunk=y_,j.compact=x0,j.concat=Ma,j.cond=II,j.conforms=TI,j.constant=V0,j.countBy=D1,j.create=Dy,j.curry=In,j.curryRight=Vn,j.debounce=jn,j.defaults=$D,j.defaultsDeep=LL,j.defer=uo,j.delay=nt,j.difference=Sr,j.differenceBy=zo,j.differenceWith=Eo,j.drop=va,j.dropRight=Jl,j.dropRightWhile=mg,j.dropWhile=xo,j.fill=_g,j.filter=N_,j.flatMap=R0,j.flatMapDeep=my,j.flatMapDepth=T1,j.flatten=vg,j.flattenDeep=vd,j.flattenDepth=Ra,j.flip=Ke,j.flow=NI,j.flowRight=AI,j.fromPairs=w_,j.functions=GD,j.functionsIn=YD,j.groupBy=P0,j.initial=zp,j.intersection=Lu,j.intersectionBy=wl,j.intersectionWith=S_,j.invert=EL,j.invertBy=Ac,j.invokeMap=k1,j.iteratee=H0,j.keyBy=N1,j.keys=Dr,j.keysIn=ui,j.map=Nc,j.mapKeys=ZD,j.mapValues=DL,j.matches=OI,j.matchesProperty=MI,j.memoize=tt,j.merge=R1,j.mergeWith=Iy,j.method=RI,j.methodOf=PI,j.mixin=z0,j.negate=nn,j.nthArg=BI,j.omit=XD,j.omitBy=QD,j.once=Gn,j.orderBy=O_,j.over=WI,j.overArgs=di,j.overEvery=VI,j.overSome=HI,j.partial=ri,j.partialRight=bi,j.partition=qp,j.pick=JD,j.pickBy=Ty,j.property=Fy,j.propertyOf=By,j.pull=L_,j.pullAll=bg,j.pullAllBy=il,j.pullAllWith=hh,j.pullAt=ec,j.range=ML,j.rangeRight=RL,j.rearg=na,j.reject=g,j.remove=Sl,j.rest=Ar,j.reverse=Cg,j.sampleSize=w,j.set=tI,j.setWith=nI,j.shuffle=T,j.slice=I0,j.sortBy=he,j.sortedUniq=x_,j.sortedUniqBy=of,j.split=vI,j.spread=fh,j.tail=C1,j.take=y1,j.takeRight=k0,j.takeRightWhile=D_,j.takeWhile=ly,j.tap=fy,j.throttle=vy,j.thru=Ll,j.toArray=O1,j.toPairs=ky,j.toPairsIn=Ny,j.toPath=jI,j.toPlainObject=Ey,j.transform=iI,j.unary=xD,j.union=Eu,j.unionBy=w1,j.unionWith=S1,j.uniq=af,j.uniqBy=L1,j.uniqWith=yg,j.unset=rI,j.unzip=wg,j.unzipWith=Vs,j.update=sI,j.updateWith=Ay,j.values=Ld,j.valuesIn=Oy,j.without=uy,j.words=Ry,j.wrap=DD,j.xor=I_,j.xorBy=cy,j.xorWith=dy,j.zip=E1,j.zipObject=x1,j.zipObjectDeep=hy,j.zipWith=xu,j.entries=ky,j.entriesIn=Ny,j.extend=xy,j.extendWith=Zp,z0(j,j),j.add=Vy,j.attempt=Py,j.camelCase=Pa,j.capitalize=El,j.ceil=qI,j.clamp=oI,j.clone=ID,j.cloneDeep=vL,j.cloneDeepWith=by,j.cloneWith=_L,j.conformsTo=bL,j.deburr=My,j.defaultTo=kI,j.divide=KI,j.endsWith=uI,j.eq=Do,j.escape=cI,j.escapeRegExp=IL,j.every=I1,j.find=Sg,j.findIndex=_d,j.findKey=M1,j.findLast=M0,j.findLastIndex=dh,j.findLastKey=nc,j.floor=GI,j.forEach=jp,j.forEachRight=Lg,j.forIn=R_,j.forInRight=jD,j.forOwn=qD,j.forOwnRight=KD,j.get=P_,j.gt=CL,j.gte=yL,j.has=cf,j.hasIn=Ri,j.head=bd,j.identity=Rs,j.includes=A_,j.indexOf=Su,j.inRange=aI,j.invoke=xL,j.isArguments=tc,j.isArray=_n,j.isArrayBuffer=TD,j.isArrayLike=is,j.isArrayLikeObject=Vi,j.isBoolean=kD,j.isBuffer=eu,j.isDate=Cy,j.isElement=wL,j.isEmpty=ND,j.isEqual=AD,j.isEqualWith=OD,j.isError=F0,j.isFinite=MD,j.isFunction=rl,j.isInteger=yy,j.isLength=Kp,j.isMap=wy,j.isMatch=RD,j.isMatchWith=wd,j.isNaN=PD,j.isNative=FD,j.isNil=qi,j.isNull=Gp,j.isNumber=Sy,j.isObject=Mi,j.isObjectLike=ji,j.isPlainObject=Io,j.isRegExp=Gs,j.isSafeInteger=BD,j.isSet=gh,j.isString=Yp,j.isSymbol=Ys,j.isTypedArray=Sd,j.isUndefined=WD,j.isWeakMap=VD,j.isWeakSet=Ly,j.join=Cd,j.kebabCase=dI,j.last=Es,j.lastIndexOf=Up,j.lowerCase=hI,j.lowerFirst=fI,j.lt=HD,j.lte=uf,j.max=YI,j.maxBy=Hy,j.mean=ZI,j.meanBy=zy,j.min=XI,j.minBy=QI,j.stubArray=$0,j.stubFalse=j0,j.stubObject=zI,j.stubString=Wy,j.stubTrue=UI,j.multiply=JI,j.nth=D0,j.noConflict=FI,j.noop=U0,j.now=ke,j.pad=TL,j.padEnd=gI,j.padStart=pI,j.parseInt=mI,j.random=lI,j.reduce=_y,j.reduceRight=M_,j.repeat=kL,j.replace=NL,j.result=eI,j.round=eT,j.runInContext=_e,j.sample=m,j.size=U,j.snakeCase=_I,j.some=Q,j.sortedIndex=E_,j.sortedIndexBy=v1,j.sortedIndexOf=yd,j.sortedLastIndex=b1,j.sortedLastIndexBy=T0,j.sortedLastIndexOf=sf,j.startCase=bI,j.startsWith=CI,j.subtract=PL,j.sum=tT,j.sumBy=nT,j.template=F_,j.times=$I,j.toFinite=ia,j.toInteger=Kt,j.toLength=to,j.toLower=yI,j.toNumber=no,j.toSafeInteger=zD,j.toString=ti,j.toUpper=wI,j.trim=SI,j.trimEnd=LI,j.trimStart=EI,j.truncate=AL,j.unescape=OL,j.uniqueId=Du,j.upperCase=xI,j.upperFirst=W0,j.each=jp,j.eachRight=Lg,j.first=bd,z0(j,function(){var c={};return eo(j,function(f,b){On.call(j.prototype,b)||(c[b]=f)}),c}(),{chain:!1}),j.VERSION=n,gi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){j[c].placeholder=j}),gi(["drop","take"],function(c,f){En.prototype[c]=function(b){b=b===t?1:rr(Kt(b),0);var x=this.__filtered__&&!f?new En(this):this.clone();return x.__filtered__?x.__takeCount__=Fr(b,x.__takeCount__):x.__views__.push({size:Fr(b,K),type:c+(x.__dir__<0?"Right":"")}),x},En.prototype[c+"Right"]=function(b){return this.reverse()[c](b).reverse()}}),gi(["filter","map","takeWhile"],function(c,f){var b=f+1,x=b==G||b==ee;En.prototype[c]=function(F){var Y=this.clone();return Y.__iteratees__.push({iteratee:jt(F,3),type:b}),Y.__filtered__=Y.__filtered__||x,Y}}),gi(["head","last"],function(c,f){var b="take"+(f?"Right":"");En.prototype[c]=function(){return this[b](1).value()[0]}}),gi(["initial","tail"],function(c,f){var b="drop"+(f?"":"Right");En.prototype[c]=function(){return this.__filtered__?new En(this):this[b](1)}}),En.prototype.compact=function(){return this.filter(Rs)},En.prototype.find=function(c){return this.filter(c).head()},En.prototype.findLast=function(c){return this.reverse().find(c)},En.prototype.invokeMap=wn(function(c,f){return typeof c=="function"?new En(this):this.map(function(b){return da(b,c,f)})}),En.prototype.reject=function(c){return this.filter(nn(jt(c)))},En.prototype.slice=function(c,f){c=Kt(c);var b=this;return b.__filtered__&&(c>0||f<0)?new En(b):(c<0?b=b.takeRight(-c):c&&(b=b.drop(c)),f!==t&&(f=Kt(f),b=f<0?b.dropRight(-f):b.take(f-c)),b)},En.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},En.prototype.toArray=function(){return this.take(K)},eo(En.prototype,function(c,f){var b=/^(?:filter|find|map|reject)|While$/.test(f),x=/^(?:head|last)$/.test(f),F=j[x?"take"+(f=="last"?"Right":""):f],Y=x||/^find/.test(f);F&&(j.prototype[f]=function(){var re=this.__wrapped__,ue=x?[1]:arguments,ve=re instanceof En,Fe=ue[0],Be=ve||_n(re),Ue=function(An){var Hn=F.apply(j,Za([An],ue));return x&&ht?Hn[0]:Hn};Be&&b&&typeof Fe=="function"&&Fe.length!=1&&(ve=Be=!1);var ht=this.__chain__,Nt=!!this.__actions__.length,Qt=Y&&!ht,Ln=ve&&!Nt;if(!Y&&Be){re=Ln?re:new En(this);var Jt=c.apply(re,ue);return Jt.__actions__.push({func:Ll,args:[Ue],thisArg:t}),new Wi(Jt,ht)}return Qt&&Ln?c.apply(this,ue):(Jt=this.thru(Ue),Qt?x?Jt.value()[0]:Jt.value():Jt)})}),gi(["pop","push","shift","sort","splice","unshift"],function(c){var f=Qa[c],b=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",x=/^(?:pop|shift)$/.test(c);j.prototype[c]=function(){var F=arguments;if(x&&!this.__chain__){var Y=this.value();return f.apply(_n(Y)?Y:[],F)}return this[b](function(re){return f.apply(_n(re)?re:[],F)})}}),eo(En.prototype,function(c,f){var b=j[f];if(b){var x=b.name+"";On.call(_l,x)||(_l[x]=[]),_l[x].push({name:f,func:b})}}),_l[Yu(t,k).name]=[{name:"wrapper",func:t}],En.prototype.clone=n_,En.prototype.reverse=i_,En.prototype.value=eg,j.prototype.at=T_,j.prototype.chain=lf,j.prototype.commit=k_,j.prototype.next=N0,j.prototype.plant=gy,j.prototype.reverse=O0,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=py,j.prototype.first=j.prototype.head,el&&(j.prototype[el]=A0),j},hu=n1();La?((La.exports=hu)._=hu,Fh._=hu):Gi._=hu}).call(Ou)}(LT,LT.exports)),LT.exports}var Is=Ffe(),TE;(function(r){r.Update="Component.Update"})(TE||(TE={}));class jc extends Yx{constructor(){super(),this._event=new OP}setState(e,t){const n=Object.assign(this.state,e);this.render(n),t==null||t(this.state,n)}render(e){this._event.emit(TE.Update,this.state,e)}onUpdateState(e){this._event.subscribe(TE.Update,e)}removeOnUpdateState(e){this._event.unsubscribe(TE.Update,e)}forceUpdate(){this.setState(Is.cloneDeep(this.state))}getState(){return this.state}}function t2(r,e){return we.Children.map(r,t=>we.isValidElement(t)?we.cloneElement(t,e):t)}const Ti={info(...r){},error(...r){console.error(...r)},warn(...r){console.warn(...r)}};function qc(r,e,t){return class extends we.Component{constructor(i){super(i),this._isMounted=!1,this.update=()=>{this._isMounted&&this.setState({lastUpdated:Date.now()})},this.onChange=this.onChange.bind(this),this.state={lastUpdated:Date.now()}}componentDidMount(){this._isMounted=!0,this.handleService(i=>{i.onUpdateState(this.onChange)})}componentWillUnmount(){this._isMounted=!1,this.handleService(i=>{i.removeOnUpdateState(this.onChange)})}onChange(i,s){Ti.info(i,s,pt._registry),this.update()}getServiceState(){const i={};return this.handleService((s,o)=>{o?Object.assign(i,{[o]:Object.assign({},s.getState())}):Object.assign(i,Object.assign({},s.getState()))}),i}handleService(i){if(this.isValidService(r))i(r);else for(const s in r)if(s){const o=r[s];this.isValidService(o)&&i(o,s)}}getControllerProperties(){const i={};return t&&this.handleController((s,o)=>{o?Object.assign(i,{[o]:this.getObjectPublicProperties(s)}):Object.assign(i,this.getObjectPublicProperties(s))}),i}handleController(i){if(this.isValidController(t))i(t);else for(const s in t)if(s){const o=t[s];this.isValidController(o)&&i(o,s)}}render(){return pe.createElement(e,Object.assign({},this.state,this.props,this.getServiceState(),this.getControllerProperties()))}isValidService(i){return typeof i.onUpdateState=="function"}isValidController(i){return typeof i.initView=="function"}getObjectPublicProperties(i){const s=Object.keys(i),o={};return s.forEach(a=>{!a.endsWith("Service")&&!a.endsWith("Controller")&&!a.startsWith("_")&&(o[a]=i[a])}),o}}}class Wu extends Yx{}const Bfe=Object.freeze(Object.defineProperty({__proto__:null,Component:jc,get ComponentEvents(){return TE},Controller:Wu,cloneReactChildren:t2,connect:qc},Symbol.toStringTag,{value:"Module"}));var B_={},$q;function Wfe(){if($q)return B_;$q=1,Object.defineProperty(B_,"__esModule",{value:!0});function r(P,z){var M=Object.keys(P);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(P);z&&(W=W.filter(function(I){return Object.getOwnPropertyDescriptor(P,I).enumerable})),M.push.apply(M,W)}return M}function e(P){for(var z=1;z<arguments.length;z++){var M=arguments[z]!=null?arguments[z]:{};z%2?r(Object(M),!0).forEach(function(W){o(P,W,M[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(M)):r(Object(M)).forEach(function(W){Object.defineProperty(P,W,Object.getOwnPropertyDescriptor(M,W))})}return P}function t(P){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},t(P)}function n(P,z){if(!(P instanceof z))throw new TypeError("Cannot call a class as a function")}function i(P,z){for(var M=0;M<z.length;M++){var W=z[M];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}function s(P,z,M){return z&&i(P.prototype,z),M&&i(P,M),Object.defineProperty(P,"prototype",{writable:!1}),P}function o(P,z,M){return z in P?Object.defineProperty(P,z,{value:M,enumerable:!0,configurable:!0,writable:!0}):P[z]=M,P}function a(P,z){return l(P)||u(P,z)||d(P,z)||p()}function l(P){if(Array.isArray(P))return P}function u(P,z){var M=P==null?null:typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(M!=null){var W=[],I=!0,R=!1,G,Z;try{for(M=M.call(P);!(I=(G=M.next()).done)&&(W.push(G.value),!(z&&W.length===z));I=!0);}catch(ee){R=!0,Z=ee}finally{try{!I&&M.return!=null&&M.return()}finally{if(R)throw Z}}return W}}function d(P,z){if(P){if(typeof P=="string")return h(P,z);var M=Object.prototype.toString.call(P).slice(8,-1);if(M==="Object"&&P.constructor&&(M=P.constructor.name),M==="Map"||M==="Set")return Array.from(P);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return h(P,z)}}function h(P,z){(z==null||z>P.length)&&(z=P.length);for(var M=0,W=new Array(z);M<z;M++)W[M]=P[M];return W}function p(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ou<"u"?Ou:typeof self<"u"?self:{};function C(P,z){return z={exports:{}},P(z,z.exports),z.exports}var S=C(function(P,z){(function(){var M,W="4.17.21",I=200,R="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",G="Expected a function",Z="Invalid `variable` option passed into `_.template`",ee="__lodash_hash_undefined__",ne=500,ie="__lodash_placeholder__",te=1,B=2,K=4,de=1,ae=2,De=1,Me=2,Qe=4,ct=8,Rt=16,Ye=32,gt=64,Ut=128,_t=256,sn=512,rn=30,on="...",qn=800,Ft=16,Pt=1,At=2,an=3,ot=1/0,Mt=9007199254740991,cn=17976931348623157e292,bn=0/0,Pe=4294967295,at=Pe-1,rt=Pe>>>1,yt=[["ary",Ut],["bind",De],["bindKey",Me],["curry",ct],["curryRight",Rt],["flip",sn],["partial",Ye],["partialRight",gt],["rearg",_t]],ln="[object Arguments]",Rn="[object Array]",Xt="[object AsyncFunction]",Tn="[object Boolean]",Tt="[object Date]",tn="[object DOMException]",Qn="[object Error]",oi="[object Function]",lt="[object GeneratorFunction]",Bs="[object Map]",fi="[object Number]",Ai="[object Null]",bs="[object Object]",Kn="[object Promise]",Pr="[object Proxy]",Sa="[object RegExp]",Oi="[object Set]",vt="[object String]",vo="[object Symbol]",Ge="[object Undefined]",Ve="[object WeakMap]",Ze="[object WeakSet]",ge="[object ArrayBuffer]",me="[object DataView]",Le="[object Float32Array]",oe="[object Float64Array]",Te="[object Int8Array]",ut="[object Int16Array]",et="[object Int32Array]",Ot="[object Uint8Array]",Dn="[object Uint8ClampedArray]",N="[object Uint16Array]",q="[object Uint32Array]",le=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,xe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,qe=/[&<>"']/g,it=RegExp(be.source),wt=RegExp(qe.source),kt=/<%-([\s\S]+?)%>/g,fn=/<%([\s\S]+?)%>/g,Yt=/<%=([\s\S]+?)%>/g,pn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zt=/^\w*$/,Ui=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_i=/[\\^$.*+?()[\]{}|]/g,jr=RegExp(_i.source),pr=/^\s+/,Ka=/\s/,bo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tp=/\{\n\/\* \[wrapped with (.+)\] \*/,Vu=/,? & /,e0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t0=/[()=,{}\[\]\/\s]/,n0=/\\(\\)?/g,Kd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,np=/\w*$/,Rh=/^[-+]0x[0-9a-f]+$/i,fc=/^0b[01]+$/i,i0=/^\[object .+?Constructor\]$/,ny=/^0o[0-7]+$/i,ip=/^(?:0|[1-9]\d*)$/,Hm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gc=/($^)/,rp=/['\n\r\u2028\u2029\\]/g,Hf="\\ud800-\\udfff",Ph="\\u0300-\\u036f",Er="\\ufe20-\\ufe2f",uu="\\u20d0-\\u20ff",sp=Ph+Er+uu,zf="\\u2700-\\u27bf",r0="a-z\\xdf-\\xf6\\xf8-\\xff",zm="\\xac\\xb1\\xd7\\xf7",Um="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",op="\\u2000-\\u206f",Uf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yc="A-Z\\xc0-\\xd6\\xd8-\\xde",Zc="\\ufe0e\\ufe0f",Xc=zm+Um+op+Uf,Qc="[']",ap="["+Hf+"]",Jc="["+Xc+"]",$m="["+sp+"]",s0="\\d+",ed="["+zf+"]",Kb="["+r0+"]",o0="[^"+Hf+Xc+s0+zf+r0+Yc+"]",$f="\\ud83c[\\udffb-\\udfff]",Gb="(?:"+$m+"|"+$f+")",Yb="[^"+Hf+"]",ai="(?:\\ud83c[\\udde6-\\uddff]){2}",ei="[\\ud800-\\udbff][\\udc00-\\udfff]",Hu="["+Yc+"]",lp="\\u200d",Zb="(?:"+Kb+"|"+o0+")",iy="(?:"+Hu+"|"+o0+")",jm="(?:"+Qc+"(?:d|ll|m|re|s|t|ve))?",up="(?:"+Qc+"(?:D|LL|M|RE|S|T|VE))?",jf=Gb+"?",a0="["+Zc+"]?",Gi="(?:"+lp+"(?:"+[Yb,ai,ei].join("|")+")"+a0+jf+")*",Fh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",La="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cp=a0+jf+Gi,Gd="(?:"+[ed,ai,ei].join("|")+")"+cp,Cs="(?:"+[Yb+$m+"?",$m,ai,ei,ap].join("|")+")",qm=RegExp(Qc,"g"),Ga=RegExp($m,"g"),pc=RegExp($f+"(?="+$f+")|"+Cs+cp,"g"),dp=RegExp([Hu+"?"+Kb+"+"+jm+"(?="+[Jc,Hu,"$"].join("|")+")",iy+"+"+up+"(?="+[Jc,Hu+Zb,"$"].join("|")+")",Hu+"?"+Zb+"+"+jm,Hu+"+"+up,La,Fh,s0,Gd].join("|"),"g"),Bh=RegExp("["+lp+Hf+sp+Zc+"]"),l0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],u0=-1,gi={};gi[Le]=gi[oe]=gi[Te]=gi[ut]=gi[et]=gi[Ot]=gi[Dn]=gi[N]=gi[q]=!0,gi[ln]=gi[Rn]=gi[ge]=gi[Tn]=gi[me]=gi[Tt]=gi[Qn]=gi[oi]=gi[Bs]=gi[fi]=gi[bs]=gi[Sa]=gi[Oi]=gi[vt]=gi[Ve]=!1;var qr={};qr[ln]=qr[Rn]=qr[ge]=qr[me]=qr[Tn]=qr[Tt]=qr[Le]=qr[oe]=qr[Te]=qr[ut]=qr[et]=qr[Bs]=qr[fi]=qr[bs]=qr[Sa]=qr[Oi]=qr[vt]=qr[vo]=qr[Ot]=qr[Dn]=qr[N]=qr[q]=!0,qr[Qn]=qr[oi]=qr[Ve]=!1;var Km={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ya={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vi=parseFloat,Za=parseInt,qf=typeof v=="object"&&v&&v.Object===Object&&v,ry=typeof self=="object"&&self&&self.Object===Object&&self,ao=qf||ry||Function("return this")(),c0=z&&!z.nodeType&&z,Yd=c0&&!0&&P&&!P.nodeType&&P,Xb=Yd&&Yd.exports===c0,fp=Xb&&qf.process,Yo=function(){try{var je=Yd&&Yd.require&&Yd.require("util").types;return je||fp&&fp.binding&&fp.binding("util")}catch{}}(),cu=Yo&&Yo.isArrayBuffer,Gm=Yo&&Yo.isDate,Ym=Yo&&Yo.isMap,Zm=Yo&&Yo.isRegExp,Kf=Yo&&Yo.isSet,Vh=Yo&&Yo.isTypedArray;function Xa(je,Lt,ft){switch(ft.length){case 0:return je.call(Lt);case 1:return je.call(Lt,ft[0]);case 2:return je.call(Lt,ft[0],ft[1]);case 3:return je.call(Lt,ft[0],ft[1],ft[2])}return je.apply(Lt,ft)}function sy(je,Lt,ft,Cn){for(var Ci=-1,mr=je==null?0:je.length;++Ci<mr;){var As=je[Ci];Lt(Cn,As,ft(As),je)}return Cn}function Ea(je,Lt){for(var ft=-1,Cn=je==null?0:je.length;++ft<Cn&&Lt(je[ft],ft,je)!==!1;);return je}function gp(je,Lt){for(var ft=je==null?0:je.length;ft--&&Lt(je[ft],ft,je)!==!1;);return je}function Qb(je,Lt){for(var ft=-1,Cn=je==null?0:je.length;++ft<Cn;)if(!Lt(je[ft],ft,je))return!1;return!0}function mc(je,Lt){for(var ft=-1,Cn=je==null?0:je.length,Ci=0,mr=[];++ft<Cn;){var As=je[ft];Lt(As,ft,je)&&(mr[Ci++]=As)}return mr}function ts(je,Lt){var ft=je==null?0:je.length;return!!ft&&Zf(je,Lt,0)>-1}function td(je,Lt,ft){for(var Cn=-1,Ci=je==null?0:je.length;++Cn<Ci;)if(ft(Lt,je[Cn]))return!0;return!1}function cr(je,Lt){for(var ft=-1,Cn=je==null?0:je.length,Ci=Array(Cn);++ft<Cn;)Ci[ft]=Lt(je[ft],ft,je);return Ci}function _c(je,Lt){for(var ft=-1,Cn=Lt.length,Ci=je.length;++ft<Cn;)je[Ci+ft]=Lt[ft];return je}function Gf(je,Lt,ft,Cn){var Ci=-1,mr=je==null?0:je.length;for(Cn&&mr&&(ft=je[++Ci]);++Ci<mr;)ft=Lt(ft,je[Ci],Ci,je);return ft}function Jb(je,Lt,ft,Cn){var Ci=je==null?0:je.length;for(Cn&&Ci&&(ft=je[--Ci]);Ci--;)ft=Lt(ft,je[Ci],Ci,je);return ft}function Xm(je,Lt){for(var ft=-1,Cn=je==null?0:je.length;++ft<Cn;)if(Lt(je[ft],ft,je))return!0;return!1}var e1=Fl("length");function t1(je){return je.split("")}function Yf(je){return je.match(e0)||[]}function du(je,Lt,ft){var Cn;return ft(je,function(Ci,mr,As){if(Lt(Ci,mr,As))return Cn=mr,!1}),Cn}function Qm(je,Lt,ft,Cn){for(var Ci=je.length,mr=ft+(Cn?1:-1);Cn?mr--:++mr<Ci;)if(Lt(je[mr],mr,je))return mr;return-1}function Zf(je,Lt,ft){return Lt===Lt?Ja(je,Lt,ft):Qm(je,pp,ft)}function Xf(je,Lt,ft,Cn){for(var Ci=ft-1,mr=je.length;++Ci<mr;)if(Cn(je[Ci],Lt))return Ci;return-1}function pp(je){return je!==je}function Co(je,Lt){var ft=je==null?0:je.length;return ft?fl(je,Lt)/ft:bn}function Fl(je){return function(Lt){return Lt==null?M:Lt[je]}}function d0(je){return function(Lt){return je==null?M:je[Lt]}}function mp(je,Lt,ft,Cn,Ci){return Ci(je,function(mr,As,Kr){ft=Cn?(Cn=!1,mr):Lt(ft,mr,As,Kr)}),ft}function oy(je,Lt){var ft=je.length;for(je.sort(Lt);ft--;)je[ft]=je[ft].value;return je}function fl(je,Lt){for(var ft,Cn=-1,Ci=je.length;++Cn<Ci;){var mr=Lt(je[Cn]);mr!==M&&(ft=ft===M?mr:ft+mr)}return ft}function Ns(je,Lt){for(var ft=-1,Cn=Array(je);++ft<je;)Cn[ft]=Lt(ft);return Cn}function _p(je,Lt){return cr(Lt,function(ft){return[ft,je[ft]]})}function h0(je){return je&&je.slice(0,Hh(je)+1).replace(pr,"")}function gl(je){return function(Lt){return je(Lt)}}function Jm(je,Lt){return cr(Lt,function(ft){return je[ft]})}function vp(je,Lt){return je.has(Lt)}function n1(je,Lt){for(var ft=-1,Cn=je.length;++ft<Cn&&Zf(Lt,je[ft],0)>-1;);return ft}function hu(je,Lt){for(var ft=je.length;ft--&&Zf(Lt,je[ft],0)>-1;);return ft}function _e(je,Lt){for(var ft=je.length,Cn=0;ft--;)je[ft]===Lt&&++Cn;return Cn}var Ne=d0(Km),Ee=d0(Ya);function bt(je){return"\\"+hp[je]}function dn(je,Lt){return je==null?M:je[Lt]}function Wn(je){return Bh.test(je)}function ir(je){return l0.test(je)}function li(je){for(var Lt,ft=[];!(Lt=je.next()).done;)ft.push(Lt.value);return ft}function nd(je){var Lt=-1,ft=Array(je.size);return je.forEach(function(Cn,Ci){ft[++Lt]=[Ci,Cn]}),ft}function i1(je,Lt){return function(ft){return je(Lt(ft))}}function Ur(je,Lt){for(var ft=-1,Cn=je.length,Ci=0,mr=[];++ft<Cn;){var As=je[ft];(As===Lt||As===ie)&&(je[ft]=ie,mr[Ci++]=ft)}return mr}function Qa(je){var Lt=-1,ft=Array(je.size);return je.forEach(function(Cn){ft[++Lt]=Cn}),ft}function f0(je){var Lt=-1,ft=Array(je.size);return je.forEach(function(Cn){ft[++Lt]=[Cn,Cn]}),ft}function Ja(je,Lt,ft){for(var Cn=ft-1,Ci=je.length;++Cn<Ci;)if(je[Cn]===Lt)return Cn;return-1}function id(je,Lt,ft){for(var Cn=ft+1;Cn--;)if(je[Cn]===Lt)return Cn;return Cn}function Bl(je){return Wn(je)?Zd(je):e1(je)}function On(je){return Wn(je)?e_(je):t1(je)}function Hh(je){for(var Lt=je.length;Lt--&&Ka.test(je.charAt(Lt)););return Lt}var bp=d0(Wh);function Zd(je){for(var Lt=pc.lastIndex=0;pc.test(je);)++Lt;return Lt}function e_(je){return je.match(pc)||[]}function r1(je){return je.match(dp)||[]}var s1=function je(Lt){Lt=Lt==null?ao:Wl.defaults(ao.Object(),Lt,Wl.pick(ao,hs));var ft=Lt.Array,Cn=Lt.Date,Ci=Lt.Error,mr=Lt.Function,As=Lt.Math,Kr=Lt.Object,el=Lt.RegExp,Vl=Lt.String,Mo=Lt.TypeError,Cp=ft.prototype,Os=mr.prototype,Xd=Kr.prototype,Hl=Lt["__core-js_shared__"],pl=Os.toString,Cr=Xd.hasOwnProperty,g0=0,Qd=function(){var _=/[^.]+$/.exec(Hl&&Hl.keys&&Hl.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),zh=Xd.toString,Qf=pl.call(Kr),rr=ao._,Fr=el("^"+pl.call(Cr).replace(_i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),t_=Xb?Lt.Buffer:M,rd=Lt.Symbol,sd=Lt.Uint8Array,yp=t_?t_.allocUnsafe:M,vc=i1(Kr.getPrototypeOf,Kr),fu=Kr.create,Jd=Xd.propertyIsEnumerable,xa=Cp.splice,bc=rd?rd.isConcatSpreadable:M,ml=rd?rd.iterator:M,zl=rd?rd.toStringTag:M,_l=function(){try{var _=ch(Kr,"defineProperty");return _({},"",{}),_}catch{}}(),p0=Lt.clearTimeout!==ao.clearTimeout&&Lt.clearTimeout,eh=Cn&&Cn.now!==ao.Date.now&&Cn.now,o1=Lt.setTimeout!==ao.setTimeout&&Lt.setTimeout,od=As.ceil,Ul=As.floor,$l=Kr.getOwnPropertySymbols,ua=t_?t_.isBuffer:M,Jf=Lt.isFinite,j=Cp.join,zu=i1(Kr.keys,Kr),Br=As.max,Wi=As.min,En=Cn.now,n_=Lt.parseInt,i_=As.random,eg=Cp.reverse,Js=ch(Lt,"DataView"),Gr=ch(Lt,"Map"),ns=ch(Lt,"Promise"),jl=ch(Lt,"Set"),yo=ch(Lt,"WeakMap"),Zo=ch(Kr,"create"),ys=yo&&new yo,Uu={},vl=wl(Js),r_=wl(Gr),a1=wl(ns),l1=wl(jl),wo=wl(yo),wp=rd?rd.prototype:M,ql=wp?wp.valueOf:M,Sp=wp?wp.toString:M;function Ce(_){if(to(_)&&!qi(_)&&!(_ instanceof $i)){if(_ instanceof Ro)return _;if(Cr.call(_,"__wrapped__"))return Cd(_)}return new Ro(_)}var Uh=function(){function _(){}return function(y){if(!Kt(y))return{};if(fu)return fu(y);_.prototype=y;var A=new _;return _.prototype=M,A}}();function Da(){}function Ro(_,y){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=M}Ce.templateSettings={escape:kt,evaluate:fn,interpolate:Yt,variable:"",imports:{_:Ce}},Ce.prototype=Da.prototype,Ce.prototype.constructor=Ce,Ro.prototype=Uh(Da.prototype),Ro.prototype.constructor=Ro;function $i(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pe,this.__views__=[]}function ws(){var _=new $i(this.__wrapped__);return _.__actions__=kr(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=kr(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=kr(this.__views__),_}function s_(){if(this.__filtered__){var _=new $i(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function o_(){var _=this.__wrapped__.value(),y=this.__dir__,A=qi(_),J=y<0,ce=A?_.length:0,Se=Ju(0,ce,this.__views__),Re=Se.start,$e=Se.end,Xe=$e-Re,Bt=J?$e:Re-1,Wt=this.__iteratees__,en=Wt.length,Pn=0,ci=Wi(Xe,this.__takeCount__);if(!A||!J&&ce==Xe&&ci==Xe)return bu(_,this.__actions__);var Ei=[];e:for(;Xe--&&Pn<ci;){Bt+=y;for(var Lr=-1,xi=_[Bt];++Lr<en;){var Wr=Wt[Lr],Zr=Wr.iteratee,df=Wr.type,Ed=Zr(xi);if(df==At)xi=Ed;else if(!Ed){if(df==Pt)continue e;break e}}Ei[Pn++]=xi}return Ei}$i.prototype=Uh(Da.prototype),$i.prototype.constructor=$i;function Xo(_){var y=-1,A=_==null?0:_.length;for(this.clear();++y<A;){var J=_[y];this.set(J[0],J[1])}}function gu(){this.__data__=Zo?Zo(null):{},this.size=0}function $h(_){var y=this.has(_)&&delete this.__data__[_];return this.size-=y?1:0,y}function $u(_){var y=this.__data__;if(Zo){var A=y[_];return A===ee?M:A}return Cr.call(y,_)?y[_]:M}function ju(_){var y=this.__data__;return Zo?y[_]!==M:Cr.call(y,_)}function jh(_,y){var A=this.__data__;return this.size+=this.has(_)?0:1,A[_]=Zo&&y===M?ee:y,this}Xo.prototype.clear=gu,Xo.prototype.delete=$h,Xo.prototype.get=$u,Xo.prototype.has=ju,Xo.prototype.set=jh;function Cc(_){var y=-1,A=_==null?0:_.length;for(this.clear();++y<A;){var J=_[y];this.set(J[0],J[1])}}function qh(){this.__data__=[],this.size=0}function qu(_){var y=this.__data__,A=Jo(y,_);if(A<0)return!1;var J=y.length-1;return A==J?y.pop():xa.call(y,A,1),--this.size,!0}function Po(_){var y=this.__data__,A=Jo(y,_);return A<0?M:y[A][1]}function Kl(_){return Jo(this.__data__,_)>-1}function Ss(_,y){var A=this.__data__,J=Jo(A,_);return J<0?(++this.size,A.push([_,y])):A[J][1]=y,this}Cc.prototype.clear=qh,Cc.prototype.delete=qu,Cc.prototype.get=Po,Cc.prototype.has=Kl,Cc.prototype.set=Ss;function Fo(_){var y=-1,A=_==null?0:_.length;for(this.clear();++y<A;){var J=_[y];this.set(J[0],J[1])}}function Qo(){this.size=0,this.__data__={hash:new Xo,map:new(Gr||Cc),string:new Xo}}function tg(_){var y=uh(this,_).delete(_);return this.size-=y?1:0,y}function tl(_){return uh(this,_).get(_)}function Ms(_){return uh(this,_).has(_)}function u1(_,y){var A=uh(this,_),J=A.size;return A.set(_,y),this.size+=A.size==J?0:1,this}Fo.prototype.clear=Qo,Fo.prototype.delete=tg,Fo.prototype.get=tl,Fo.prototype.has=Ms,Fo.prototype.set=u1;function pu(_){var y=-1,A=_==null?0:_.length;for(this.__data__=new Fo;++y<A;)this.add(_[y])}function a_(_){return this.__data__.set(_,ee),this}function bl(_){return this.__data__.has(_)}pu.prototype.add=pu.prototype.push=a_,pu.prototype.has=bl;function fs(_){var y=this.__data__=new Cc(_);this.size=y.size}function m0(){this.__data__=new Cc,this.size=0}function Lp(_){var y=this.__data__,A=y.delete(_);return this.size=y.size,A}function yc(_){return this.__data__.get(_)}function c1(_){return this.__data__.has(_)}function l_(_,y){var A=this.__data__;if(A instanceof Cc){var J=A.__data__;if(!Gr||J.length<I-1)return J.push([_,y]),this.size=++A.size,this;A=this.__data__=new Fo(J)}return A.set(_,y),this.size=A.size,this}fs.prototype.clear=m0,fs.prototype.delete=Lp,fs.prototype.get=yc,fs.prototype.has=c1,fs.prototype.set=l_;function Qi(_,y){var A=qi(_),J=!A&&Gp(_),ce=!A&&!J&&gh(_),Se=!A&&!J&&!ce&&R_(_),Re=A||J||ce||Se,$e=Re?Ns(_.length,Vl):[],Xe=$e.length;for(var Bt in _)(y||Cr.call(_,Bt))&&!(Re&&(Bt=="length"||ce&&(Bt=="offset"||Bt=="parent")||Se&&(Bt=="buffer"||Bt=="byteLength"||Bt=="byteOffset")||wu(Bt,Xe)))&&$e.push(Bt);return $e}function Kh(_){var y=_.length;return y?_[Ec(0,y-1)]:M}function ng(_,y){return Su(kr(_),ld(y,0,_.length))}function eo(_){return Su(kr(_))}function mu(_,y,A){(A!==M&&!wd(_[y],A)||A===M&&!(y in _))&&So(_,y,A)}function Gl(_,y,A){var J=_[y];(!(Cr.call(_,y)&&wd(J,A))||A===M&&!(y in _))&&So(_,y,A)}function Jo(_,y){for(var A=_.length;A--;)if(wd(_[A][0],y))return A;return-1}function Ep(_,y,A,J){return Ia(_,function(ce,Se,Re){y(J,ce,A(ce),Re)}),J}function Tr(_,y){return _&&Zu(y,Pa(y),_)}function wc(_,y){return _&&Zu(y,El(y),_)}function So(_,y,A){y=="__proto__"&&_l?_l(_,y,{configurable:!0,enumerable:!0,value:A,writable:!0}):_[y]=A}function ad(_,y){for(var A=-1,J=y.length,ce=ft(J),Se=_==null;++A<J;)ce[A]=Se?M:Ay(_,y[A]);return ce}function ld(_,y,A){return _===_&&(A!==M&&(_=_<=A?_:A),y!==M&&(_=_>=y?_:y)),_}function ca(_,y,A,J,ce,Se){var Re,$e=y&te,Xe=y&B,Bt=y&K;if(A&&(Re=ce?A(_,J,ce,Se):A(_)),Re!==M)return Re;if(!Kt(_))return _;var Wt=qi(_);if(Wt){if(Re=kc(_),!$e)return kr(_,Re)}else{var en=yr(_),Pn=en==oi||en==lt;if(gh(_))return hg(_,$e);if(en==bs||en==ln||Pn&&!ce){if(Re=Xe||Pn?{}:Aa(_),!$e)return Xe?ea(_,wc(Re,_)):g_(_,Tr(Re,_))}else{if(!qr[en])return ce?_:{};Re=C_(_,en,$e)}}Se||(Se=new fs);var ci=Se.get(_);if(ci)return ci;Se.set(_,Re),LL(_)?_.forEach(function(xi){Re.add(ca(xi,y,A,xi,_,Se))}):no(_)&&_.forEach(function(xi,Wr){Re.set(Wr,ca(xi,y,A,Wr,_,Se))});var Ei=Bt?Xe?md:lh:Xe?El:Pa,Lr=Wt?M:Ei(_);return Ea(Lr||_,function(xi,Wr){Lr&&(Wr=xi,xi=_[Wr]),Gl(Re,Wr,ca(xi,y,A,Wr,_,Se))}),Re}function ud(_){var y=Pa(_);return function(A){return da(A,_,y)}}function da(_,y,A){var J=A.length;if(_==null)return!J;for(_=Kr(_);J--;){var ce=A[J],Se=y[ce],Re=_[ce];if(Re===M&&!(ce in _)||!Se(Re))return!1}return!0}function ig(_,y,A){if(typeof _!="function")throw new Mo(G);return vd(function(){_.apply(M,A)},y)}function rg(_,y,A,J){var ce=-1,Se=ts,Re=!0,$e=_.length,Xe=[],Bt=y.length;if(!$e)return Xe;A&&(y=cr(y,gl(A))),J?(Se=td,Re=!1):y.length>=I&&(Se=vp,Re=!1,y=new pu(y));e:for(;++ce<$e;){var Wt=_[ce],en=A==null?Wt:A(Wt);if(Wt=J||Wt!==0?Wt:0,Re&&en===en){for(var Pn=Bt;Pn--;)if(y[Pn]===en)continue e;Xe.push(Wt)}else Se(y,en,J)||Xe.push(Wt)}return Xe}var Ia=p_(Ta),ha=p_(Yl,!0);function u_(_,y){var A=!0;return Ia(_,function(J,ce,Se){return A=!!y(J,ce,Se),A}),A}function xp(_,y,A){for(var J=-1,ce=_.length;++J<ce;){var Se=_[J],Re=y(Se);if(Re!=null&&($e===M?Re===Re&&!nc(Re):A(Re,$e)))var $e=Re,Xe=Se}return Xe}function th(_,y,A,J){var ce=_.length;for(A=Ri(A),A<0&&(A=-A>ce?0:ce+A),J=J===M||J>ce?ce:Ri(J),J<0&&(J+=ce),J=A>J?0:EL(J);A<J;)_[A++]=y;return _}function Dp(_,y){var A=[];return Ia(_,function(J,ce,Se){y(J,ce,Se)&&A.push(J)}),A}function lo(_,y,A,J,ce){var Se=-1,Re=_.length;for(A||(A=rf),ce||(ce=[]);++Se<Re;){var $e=_[Se];y>0&&A($e)?y>1?lo($e,y-1,A,J,ce):_c(ce,$e):J||(ce[ce.length]=$e)}return ce}var _u=Rp(),sg=Rp(!0);function Ta(_,y){return _&&_u(_,y,Pa)}function Yl(_,y){return _&&sg(_,y,Pa)}function og(_,y){return mc(y,function(A){return uf(_[A])})}function ka(_,y){y=Vo(y,_);for(var A=0,J=y.length;_!=null&&A<J;)_=_[Lu(y[A++])];return A&&A==J?_:M}function Ip(_,y,A){var J=y(_);return qi(_)?J:_c(J,A(_))}function Bo(_){return _==null?_===M?Ge:Ai:zl&&zl in Kr(_)?m1(_):mg(_)}function gs(_,y){return _>y}function Sc(_,y){return _!=null&&Cr.call(_,y)}function _0(_,y){return _!=null&&y in Kr(_)}function Tp(_,y,A){return _>=Wi(y,A)&&_<Br(y,A)}function nh(_,y,A){for(var J=A?td:ts,ce=_[0].length,Se=_.length,Re=Se,$e=ft(Se),Xe=1/0,Bt=[];Re--;){var Wt=_[Re];Re&&y&&(Wt=cr(Wt,gl(y))),Xe=Wi(Wt.length,Xe),$e[Re]=!A&&(y||ce>=120&&Wt.length>=120)?new pu(Re&&Wt):M}Wt=_[0];var en=-1,Pn=$e[0];e:for(;++en<ce&&Bt.length<Xe;){var ci=Wt[en],Ei=y?y(ci):ci;if(ci=A||ci!==0?ci:0,!(Pn?vp(Pn,Ei):J(Bt,Ei,A))){for(Re=Se;--Re;){var Lr=$e[Re];if(!(Lr?vp(Lr,Ei):J(_[Re],Ei,A)))continue e}Pn&&Pn.push(Ei),Bt.push(ci)}}return Bt}function v0(_,y,A,J){return Ta(_,function(ce,Se,Re){y(J,A(ce),Se,Re)}),J}function Zl(_,y,A){y=Vo(y,_),_=_g(_,y);var J=_==null?_:_[Lu(Eu(y))];return J==null?M:Xa(J,_,A)}function Ws(_){return to(_)&&Bo(_)==ln}function qs(_){return to(_)&&Bo(_)==ge}function Lo(_){return to(_)&&Bo(_)==Tt}function vu(_,y,A,J,ce){return _===y?!0:_==null||y==null||!to(_)&&!to(y)?_!==_&&y!==y:kp(_,y,A,J,vu,ce)}function kp(_,y,A,J,ce,Se){var Re=qi(_),$e=qi(y),Xe=Re?Rn:yr(_),Bt=$e?Rn:yr(y);Xe=Xe==ln?bs:Xe,Bt=Bt==ln?bs:Bt;var Wt=Xe==bs,en=Bt==bs,Pn=Xe==Bt;if(Pn&&gh(_)){if(!gh(y))return!1;Re=!0,Wt=!1}if(Pn&&!Wt)return Se||(Se=new fs),Re||R_(_)?Bp(_,y,A,J,ce,Se):Nr(_,y,Xe,A,J,ce,Se);if(!(A&de)){var ci=Wt&&Cr.call(_,"__wrapped__"),Ei=en&&Cr.call(y,"__wrapped__");if(ci||Ei){var Lr=ci?_.value():_,xi=Ei?y.value():y;return Se||(Se=new fs),ce(Lr,xi,A,J,Se)}}return Pn?(Se||(Se=new fs),Yr(_,y,A,J,ce,Se)):!1}function cd(_){return to(_)&&yr(_)==Bs}function wn(_,y,A,J){var ce=A.length,Se=ce,Re=!J;if(_==null)return!Se;for(_=Kr(_);ce--;){var $e=A[ce];if(Re&&$e[2]?$e[1]!==_[$e[0]]:!($e[0]in _))return!1}for(;++ce<Se;){$e=A[ce];var Xe=$e[0],Bt=_[Xe],Wt=$e[1];if(Re&&$e[2]){if(Bt===M&&!(Xe in _))return!1}else{var en=new fs;if(J)var Pn=J(Bt,Wt,Xe,_,y,en);if(!(Pn===M?vu(Wt,Bt,de|ae,J,en):Pn))return!1}}return!0}function fa(_){if(!Kt(_)||y_(_))return!1;var y=uf(_)?Fr:i0;return y.test(wl(_))}function b0(_){return to(_)&&Bo(_)==Sa}function Ku(_){return to(_)&&yr(_)==Oi}function Np(_){return to(_)&&ia(_.length)&&!!gi[Bo(_)]}function Gu(_){return typeof _=="function"?_:_==null?Du:typeof _=="object"?qi(_)?Op(_[0],_[1]):Gh(_):PL(_)}function Cl(_){if(!Ma(_))return zu(_);var y=[];for(var A in Kr(_))Cr.call(_,A)&&A!="constructor"&&y.push(A);return y}function ps(_){if(!Kt(_))return Jl(_);var y=Ma(_),A=[];for(var J in _)J=="constructor"&&(y||!Cr.call(_,J))||A.push(J);return A}function Ap(_,y){return _<y}function Lc(_,y){var A=-1,J=Io(_)?ft(_.length):[];return Ia(_,function(ce,Se,Re){J[++A]=y(ce,Se,Re)}),J}function Gh(_){var y=b_(_);return y.length==1&&y[0][2]?zo(y[0][0],y[0][1]):function(A){return A===_||wn(A,_,y)}}function Op(_,y){return Oa(_)&&Sr(y)?zo(Lu(_),y):function(A){var J=Ay(A,_);return J===M&&J===y?Oy(A,_):vu(y,J,de|ae)}}function Yh(_,y,A,J,ce){_!==y&&_u(y,function(Se,Re){if(ce||(ce=new fs),Kt(Se))Ls(_,y,Re,A,Yh,J,ce);else{var $e=J?J(dh(_,Re),Se,Re+"",_,y,ce):M;$e===M&&($e=Se),mu(_,Re,$e)}},El)}function Ls(_,y,A,J,ce,Se,Re){var $e=dh(_,A),Xe=dh(y,A),Bt=Re.get(Xe);if(Bt){mu(_,A,Bt);return}var Wt=Se?Se($e,Xe,A+"",_,y,Re):M,en=Wt===M;if(en){var Pn=qi(Xe),ci=!Pn&&gh(Xe),Ei=!Pn&&!ci&&R_(Xe);Wt=Xe,Pn||ci||Ei?qi($e)?Wt=$e:Gs($e)?Wt=kr($e):ci?(en=!1,Wt=hg(Xe,!0)):Ei?(en=!1,Wt=fd(Xe,!0)):Wt=[]:B0(Xe)||Gp(Xe)?(Wt=$e,Gp($e)?Wt=xL($e):(!Kt($e)||uf($e))&&(Wt=Aa(Xe))):en=!1}en&&(Re.set(Xe,Wt),ce(Wt,Xe,J,Se,Re),Re.delete(Xe)),mu(_,A,Wt)}function ga(_,y){var A=_.length;if(A)return y+=y<0?A:0,wu(y,A)?_[y]:M}function Zh(_,y,A){y.length?y=cr(y,function(Se){return qi(Se)?function(Re){return ka(Re,Se.length===1?Se[0]:Se)}:Se}):y=[Du];var J=-1;y=cr(y,gl(ii()));var ce=Lc(_,function(Se,Re,$e){var Xe=cr(y,function(Bt){return Bt(Se)});return{criteria:Xe,index:++J,value:Se}});return oy(ce,function(Se,Re){return f_(Se,Re,A)})}function c_(_,y){return dd(_,y,function(A,J){return Oy(_,J)})}function dd(_,y,A){for(var J=-1,ce=y.length,Se={};++J<ce;){var Re=y[J],$e=ka(_,Re);A($e,Re)&&rh(Se,Vo(Re,_),$e)}return Se}function Xh(_){return function(y){return ka(y,_)}}function ih(_,y,A,J){var ce=J?Xf:Zf,Se=-1,Re=y.length,$e=_;for(_===y&&(y=kr(y)),A&&($e=cr(_,gl(A)));++Se<Re;)for(var Xe=0,Bt=y[Se],Wt=A?A(Bt):Bt;(Xe=ce($e,Wt,Xe,J))>-1;)$e!==_&&xa.call($e,Xe,1),xa.call(_,Xe,1);return _}function Qh(_,y){for(var A=_?y.length:0,J=A-1;A--;){var ce=y[A];if(A==J||ce!==Se){var Se=ce;wu(ce)?xa.call(_,ce,1):lg(_,ce)}}return _}function Ec(_,y){return _+Ul(i_()*(y-_+1))}function ag(_,y,A,J){for(var ce=-1,Se=Br(od((y-_)/(A||1)),0),Re=ft(Se);Se--;)Re[J?Se:++ce]=_,_+=A;return Re}function Wo(_,y){var A="";if(!_||y<1||y>Mt)return A;do y%2&&(A+=_),y=Ul(y/2),y&&(_+=_);while(y);return A}function Yi(_,y){return Ra(xo(_,y,Du),_+"")}function Na(_){return Kh(F_(_))}function d_(_,y){var A=F_(_);return Su(A,ld(y,0,A.length))}function rh(_,y,A,J){if(!Kt(_))return _;y=Vo(y,_);for(var ce=-1,Se=y.length,Re=Se-1,$e=_;$e!=null&&++ce<Se;){var Xe=Lu(y[ce]),Bt=A;if(Xe==="__proto__"||Xe==="constructor"||Xe==="prototype")return _;if(ce!=Re){var Wt=$e[Xe];Bt=J?J(Wt,Xe,$e):M,Bt===M&&(Bt=Kt(Wt)?Wt:wu(y[ce+1])?[]:{})}Gl($e,Xe,Bt),$e=$e[Xe]}return _}var sh=ys?function(_,y){return ys.set(_,y),_}:Du,d1=_l?function(_,y){return _l(_,"toString",{configurable:!0,enumerable:!1,value:Wy(y),writable:!0})}:Du;function h1(_){return Su(F_(_))}function Xl(_,y,A){var J=-1,ce=_.length;y<0&&(y=-y>ce?0:ce+y),A=A>ce?ce:A,A<0&&(A+=ce),ce=y>A?0:A-y>>>0,y>>>=0;for(var Se=ft(ce);++J<ce;)Se[J]=_[J+y];return Se}function C0(_,y){var A;return Ia(_,function(J,ce,Se){return A=y(J,ce,Se),!A}),!!A}function Jh(_,y,A){var J=0,ce=_==null?J:_.length;if(typeof y=="number"&&y===y&&ce<=rt){for(;J<ce;){var Se=J+ce>>>1,Re=_[Se];Re!==null&&!nc(Re)&&(A?Re<=y:Re<y)?J=Se+1:ce=Se}return ce}return y0(_,y,Du,A)}function y0(_,y,A,J){var ce=0,Se=_==null?0:_.length;if(Se===0)return 0;y=A(y);for(var Re=y!==y,$e=y===null,Xe=nc(y),Bt=y===M;ce<Se;){var Wt=Ul((ce+Se)/2),en=A(_[Wt]),Pn=en!==M,ci=en===null,Ei=en===en,Lr=nc(en);if(Re)var xi=J||Ei;else Bt?xi=Ei&&(J||Pn):$e?xi=Ei&&Pn&&(J||!ci):Xe?xi=Ei&&Pn&&!ci&&(J||!Lr):ci||Lr?xi=!1:xi=J?en<=y:en<y;xi?ce=Wt+1:Se=Wt}return Wi(Se,at)}function h_(_,y){for(var A=-1,J=_.length,ce=0,Se=[];++A<J;){var Re=_[A],$e=y?y(Re):Re;if(!A||!wd($e,Xe)){var Xe=$e;Se[ce++]=Re===0?0:Re}}return Se}function Mp(_){return typeof _=="number"?_:nc(_)?bn:+_}function Zi(_){if(typeof _=="string")return _;if(qi(_))return cr(_,Zi)+"";if(nc(_))return Sp?Sp.call(_):"";var y=_+"";return y=="0"&&1/_==-ot?"-0":y}function ms(_,y,A){var J=-1,ce=ts,Se=_.length,Re=!0,$e=[],Xe=$e;if(A)Re=!1,ce=td;else if(Se>=I){var Bt=y?null:g1(_);if(Bt)return Qa(Bt);Re=!1,ce=vp,Xe=new pu}else Xe=y?[]:$e;e:for(;++J<Se;){var Wt=_[J],en=y?y(Wt):Wt;if(Wt=A||Wt!==0?Wt:0,Re&&en===en){for(var Pn=Xe.length;Pn--;)if(Xe[Pn]===en)continue e;y&&Xe.push(en),$e.push(Wt)}else ce(Xe,en,A)||(Xe!==$e&&Xe.push(en),$e.push(Wt))}return $e}function lg(_,y){return y=Vo(y,_),_=_g(_,y),_==null||delete _[Lu(Eu(y))]}function f1(_,y,A,J){return rh(_,y,A(ka(_,y)),J)}function xc(_,y,A,J){for(var ce=_.length,Se=J?ce:-1;(J?Se--:++Se<ce)&&y(_[Se],Se,_););return A?Xl(_,J?0:Se,J?Se+1:ce):Xl(_,J?Se+1:0,J?ce:Se)}function bu(_,y){var A=_;return A instanceof $i&&(A=A.value()),Gf(y,function(J,ce){return ce.func.apply(ce.thisArg,_c([J],ce.args))},A)}function nl(_,y,A){var J=_.length;if(J<2)return J?ms(_[0]):[];for(var ce=-1,Se=ft(J);++ce<J;)for(var Re=_[ce],$e=-1;++$e<J;)$e!=ce&&(Se[ce]=rg(Se[ce]||Re,_[$e],y,A));return ms(lo(Se,1),y,A)}function ug(_,y,A){for(var J=-1,ce=_.length,Se=y.length,Re={};++J<ce;){var $e=J<Se?y[J]:M;A(Re,_[J],$e)}return Re}function cg(_){return Gs(_)?_:[]}function dg(_){return typeof _=="function"?_:Du}function Vo(_,y){return qi(_)?_:Oa(_,y)?[_]:zp(ui(_))}var Dc=Yi;function Ic(_,y,A){var J=_.length;return A=A===M?J:A,!y&&A>=J?_:Xl(_,y,A)}var hd=p0||function(_){return ao.clearTimeout(_)};function hg(_,y){if(y)return _.slice();var A=_.length,J=yp?yp(A):new _.constructor(A);return _.copy(J),J}function Yu(_){var y=new _.constructor(_.byteLength);return new sd(y).set(new sd(_)),y}function w0(_,y){var A=y?Yu(_.buffer):_.buffer;return new _.constructor(A,_.byteOffset,_.byteLength)}function oh(_){var y=new _.constructor(_.source,np.exec(_));return y.lastIndex=_.lastIndex,y}function fg(_){return ql?Kr(ql.call(_)):{}}function fd(_,y){var A=y?Yu(_.buffer):_.buffer;return new _.constructor(A,_.byteOffset,_.length)}function S0(_,y){if(_!==y){var A=_!==M,J=_===null,ce=_===_,Se=nc(_),Re=y!==M,$e=y===null,Xe=y===y,Bt=nc(y);if(!$e&&!Bt&&!Se&&_>y||Se&&Re&&Xe&&!$e&&!Bt||J&&Re&&Xe||!A&&Xe||!ce)return 1;if(!J&&!Se&&!Bt&&_<y||Bt&&A&&ce&&!J&&!Se||$e&&A&&ce||!Re&&ce||!Xe)return-1}return 0}function f_(_,y,A){for(var J=-1,ce=_.criteria,Se=y.criteria,Re=ce.length,$e=A.length;++J<Re;){var Xe=S0(ce[J],Se[J]);if(Xe){if(J>=$e)return Xe;var Bt=A[J];return Xe*(Bt=="desc"?-1:1)}}return _.index-y.index}function ah(_,y,A,J){for(var ce=-1,Se=_.length,Re=A.length,$e=-1,Xe=y.length,Bt=Br(Se-Re,0),Wt=ft(Xe+Bt),en=!J;++$e<Xe;)Wt[$e]=y[$e];for(;++ce<Re;)(en||ce<Se)&&(Wt[A[ce]]=_[ce]);for(;Bt--;)Wt[$e++]=_[ce++];return Wt}function pa(_,y,A,J){for(var ce=-1,Se=_.length,Re=-1,$e=A.length,Xe=-1,Bt=y.length,Wt=Br(Se-$e,0),en=ft(Wt+Bt),Pn=!J;++ce<Wt;)en[ce]=_[ce];for(var ci=ce;++Xe<Bt;)en[ci+Xe]=y[Xe];for(;++Re<$e;)(Pn||ce<Se)&&(en[ci+A[Re]]=_[ce++]);return en}function kr(_,y){var A=-1,J=_.length;for(y||(y=ft(J));++A<J;)y[A]=_[A];return y}function Zu(_,y,A,J){var ce=!A;A||(A={});for(var Se=-1,Re=y.length;++Se<Re;){var $e=y[Se],Xe=J?J(A[$e],_[$e],$e,A,_):M;Xe===M&&(Xe=_[$e]),ce?So(A,$e,Xe):Gl(A,$e,Xe)}return A}function g_(_,y){return Zu(_,Wp(_),y)}function ea(_,y){return Zu(_,pg(_),y)}function ef(_,y){return function(A,J){var ce=qi(A)?sy:Ep,Se=y?y():{};return ce(A,_,ii(J,2),Se)}}function gd(_){return Yi(function(y,A){var J=-1,ce=A.length,Se=ce>1?A[ce-1]:M,Re=ce>2?A[2]:M;for(Se=_.length>3&&typeof Se=="function"?(ce--,Se):M,Re&&wr(A[0],A[1],Re)&&(Se=ce<3?M:Se,ce=1),y=Kr(y);++J<ce;){var $e=A[J];$e&&_(y,$e,J,Se)}return y})}function p_(_,y){return function(A,J){if(A==null)return A;if(!Io(A))return _(A,J);for(var ce=A.length,Se=y?ce:-1,Re=Kr(A);(y?Se--:++Se<ce)&&J(Re[Se],Se,Re)!==!1;);return A}}function Rp(_){return function(y,A,J){for(var ce=-1,Se=Kr(y),Re=J(y),$e=Re.length;$e--;){var Xe=Re[_?$e:++ce];if(A(Se[Xe],Xe,Se)===!1)break}return y}}function L0(_,y,A){var J=y&De,ce=Xu(_);function Se(){var Re=this&&this!==ao&&this instanceof Se?ce:_;return Re.apply(J?A:this,arguments)}return Se}function E0(_){return function(y){y=ui(y);var A=Wn(y)?On(y):M,J=A?A[0]:y.charAt(0),ce=A?Ic(A,1).join(""):y.slice(1);return J[_]()+ce}}function Ks(_){return function(y){return Gf(ML(OL(y).replace(qm,"")),_,"")}}function Xu(_){return function(){var y=arguments;switch(y.length){case 0:return new _;case 1:return new _(y[0]);case 2:return new _(y[0],y[1]);case 3:return new _(y[0],y[1],y[2]);case 4:return new _(y[0],y[1],y[2],y[3]);case 5:return new _(y[0],y[1],y[2],y[3],y[4]);case 6:return new _(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new _(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var A=Uh(_.prototype),J=_.apply(A,y);return Kt(J)?J:A}}function tf(_,y,A){var J=Xu(_);function ce(){for(var Se=arguments.length,Re=ft(Se),$e=Se,Xe=ta(ce);$e--;)Re[$e]=arguments[$e];var Bt=Se<3&&Re[0]!==Xe&&Re[Se-1]!==Xe?[]:Ur(Re,Xe);if(Se-=Bt.length,Se<A)return xr(_,y,ma,ce.placeholder,M,Re,Bt,M,M,A-Se);var Wt=this&&this!==ao&&this instanceof ce?J:_;return Xa(Wt,this,Re)}return ce}function nf(_){return function(y,A,J){var ce=Kr(y);if(!Io(y)){var Se=ii(A,3);y=Pa(y),A=function($e){return Se(ce[$e],$e,ce)}}var Re=_(y,A,J);return Re>-1?ce[Se?y[Re]:Re]:M}}function Tc(_){return Sn(function(y){var A=y.length,J=A,ce=Ro.prototype.thru;for(_&&y.reverse();J--;){var Se=y[J];if(typeof Se!="function")throw new Mo(G);if(ce&&!Re&&v_(Se)=="wrapper")var Re=new Ro([],!0)}for(J=Re?J:A;++J<A;){Se=y[J];var $e=v_(Se),Xe=$e=="wrapper"?__(Se):M;Xe&&Hp(Xe[0])&&Xe[1]==(Ut|ct|Ye|_t)&&!Xe[4].length&&Xe[9]==1?Re=Re[v_(Xe[0])].apply(Re,Xe[3]):Re=Se.length==1&&Hp(Se)?Re[$e]():Re.thru(Se)}return function(){var Bt=arguments,Wt=Bt[0];if(Re&&Bt.length==1&&qi(Wt))return Re.plant(Wt).value();for(var en=0,Pn=A?y[en].apply(this,Bt):Wt;++en<A;)Pn=y[en].call(this,Pn);return Pn}})}function ma(_,y,A,J,ce,Se,Re,$e,Xe,Bt){var Wt=y&Ut,en=y&De,Pn=y&Me,ci=y&(ct|Rt),Ei=y&sn,Lr=Pn?M:Xu(_);function xi(){for(var Wr=arguments.length,Zr=ft(Wr),df=Wr;df--;)Zr[df]=arguments[df];if(ci)var Ed=ta(xi),hf=_e(Zr,Ed);if(J&&(Zr=ah(Zr,J,ce,ci)),Se&&(Zr=pa(Zr,Se,Re,ci)),Wr-=hf,ci&&Wr<Bt){var sl=Ur(Zr,Ed);return xr(_,y,ma,xi.placeholder,A,Zr,sl,$e,Xe,Bt-Wr)}var Xp=en?A:this,q0=Pn?Xp[_]:_;return Wr=Zr.length,$e?Zr=_d(Zr,$e):Ei&&Wr>1&&Zr.reverse(),Wt&&Xe<Wr&&(Zr.length=Xe),this&&this!==ao&&this instanceof xi&&(q0=Lr||Xu(q0)),q0.apply(Xp,Zr)}return xi}function jt(_,y){return function(A,J){return v0(A,_,y(J),{})}}function Qu(_,y){return function(A,J){var ce;if(A===M&&J===M)return y;if(A!==M&&(ce=A),J!==M){if(ce===M)return J;typeof A=="string"||typeof J=="string"?(A=Zi(A),J=Zi(J)):(A=Mp(A),J=Mp(J)),ce=_(A,J)}return ce}}function pd(_){return Sn(function(y){return y=cr(y,gl(ii())),Yi(function(A){var J=this;return _(y,function(ce){return Xa(ce,J,A)})})})}function _a(_,y){y=y===M?" ":Zi(y);var A=y.length;if(A<2)return A?Wo(y,_):y;var J=Wo(y,od(_/Bl(y)));return Wn(y)?Ic(On(J),0,_).join(""):J.slice(0,_)}function m_(_,y,A,J){var ce=y&De,Se=Xu(_);function Re(){for(var $e=-1,Xe=arguments.length,Bt=-1,Wt=J.length,en=ft(Wt+Xe),Pn=this&&this!==ao&&this instanceof Re?Se:_;++Bt<Wt;)en[Bt]=J[Bt];for(;Xe--;)en[Bt++]=arguments[++$e];return Xa(Pn,ce?A:this,en)}return Re}function yl(_){return function(y,A,J){return J&&typeof J!="number"&&wr(y,A,J)&&(A=J=M),y=cf(y),A===M?(A=y,y=0):A=cf(A),J=J===M?y<A?1:-1:cf(J),ag(y,A,J,_)}}function gg(_){return function(y,A){return typeof y=="string"&&typeof A=="string"||(y=Ac(y),A=Ac(A)),_(y,A)}}function xr(_,y,A,J,ce,Se,Re,$e,Xe,Bt){var Wt=y&ct,en=Wt?Re:M,Pn=Wt?M:Re,ci=Wt?Se:M,Ei=Wt?M:Se;y|=Wt?Ye:gt,y&=~(Wt?gt:Ye),y&Qe||(y&=~(De|Me));var Lr=[_,y,ce,ci,en,Ei,Pn,$e,Xe,Bt],xi=A.apply(M,Lr);return Hp(_)&&vg(xi,Lr),xi.placeholder=J,w_(xi,_,y)}function Pp(_){var y=As[_];return function(A,J){if(A=Ac(A),J=J==null?0:Wi(Ri(J),292),J&&Jf(A)){var ce=(ui(A)+"e").split("e"),Se=y(ce[0]+"e"+(+ce[1]+J));return ce=(ui(Se)+"e").split("e"),+(ce[0]+"e"+(+ce[1]-J))}return y(A)}}var g1=jl&&1/Qa(new jl([,-0]))[1]==ot?function(_){return new jl(_)}:zy;function Fp(_){return function(y){var A=yr(y);return A==Bs?nd(y):A==Oi?f0(y):_p(y,_(y))}}function Ql(_,y,A,J,ce,Se,Re,$e){var Xe=y&Me;if(!Xe&&typeof _!="function")throw new Mo(G);var Bt=J?J.length:0;if(Bt||(y&=~(Ye|gt),J=ce=M),Re=Re===M?Re:Br(Ri(Re),0),$e=$e===M?$e:Ri($e),Bt-=ce?ce.length:0,y&gt){var Wt=J,en=ce;J=ce=M}var Pn=Xe?M:__(_),ci=[_,y,A,J,ce,Wt,en,Se,Re,$e];if(Pn&&va(ci,Pn),_=ci[0],y=ci[1],A=ci[2],J=ci[3],ce=ci[4],$e=ci[9]=ci[9]===M?Xe?0:_.length:Br(ci[9]-Bt,0),!$e&&y&(ct|Rt)&&(y&=~(ct|Rt)),!y||y==De)var Ei=L0(_,y,A);else y==ct||y==Rt?Ei=tf(_,y,$e):(y==Ye||y==(De|Ye))&&!ce.length?Ei=m_(_,y,A,J):Ei=ma.apply(M,ci);var Lr=Pn?sh:vg;return w_(Lr(Ei,ci),_,y)}function Ho(_,y,A,J){return _===M||wd(_,Xd[A])&&!Cr.call(J,A)?y:_}function p1(_,y,A,J,ce,Se){return Kt(_)&&Kt(y)&&(Se.set(y,_),Yh(_,y,M,p1,Se),Se.delete(y)),_}function ay(_){return B0(_)?M:_}function Bp(_,y,A,J,ce,Se){var Re=A&de,$e=_.length,Xe=y.length;if($e!=Xe&&!(Re&&Xe>$e))return!1;var Bt=Se.get(_),Wt=Se.get(y);if(Bt&&Wt)return Bt==y&&Wt==_;var en=-1,Pn=!0,ci=A&ae?new pu:M;for(Se.set(_,y),Se.set(y,_);++en<$e;){var Ei=_[en],Lr=y[en];if(J)var xi=Re?J(Lr,Ei,en,y,_,Se):J(Ei,Lr,en,_,y,Se);if(xi!==M){if(xi)continue;Pn=!1;break}if(ci){if(!Xm(y,function(Wr,Zr){if(!vp(ci,Zr)&&(Ei===Wr||ce(Ei,Wr,A,J,Se)))return ci.push(Zr)})){Pn=!1;break}}else if(!(Ei===Lr||ce(Ei,Lr,A,J,Se))){Pn=!1;break}}return Se.delete(_),Se.delete(y),Pn}function Nr(_,y,A,J,ce,Se,Re){switch(A){case me:if(_.byteLength!=y.byteLength||_.byteOffset!=y.byteOffset)return!1;_=_.buffer,y=y.buffer;case ge:return!(_.byteLength!=y.byteLength||!Se(new sd(_),new sd(y)));case Tn:case Tt:case fi:return wd(+_,+y);case Qn:return _.name==y.name&&_.message==y.message;case Sa:case vt:return _==y+"";case Bs:var $e=nd;case Oi:var Xe=J&de;if($e||($e=Qa),_.size!=y.size&&!Xe)return!1;var Bt=Re.get(_);if(Bt)return Bt==y;J|=ae,Re.set(_,y);var Wt=Bp($e(_),$e(y),J,ce,Se,Re);return Re.delete(_),Wt;case vo:if(ql)return ql.call(_)==ql.call(y)}return!1}function Yr(_,y,A,J,ce,Se){var Re=A&de,$e=lh(_),Xe=$e.length,Bt=lh(y),Wt=Bt.length;if(Xe!=Wt&&!Re)return!1;for(var en=Xe;en--;){var Pn=$e[en];if(!(Re?Pn in y:Cr.call(y,Pn)))return!1}var ci=Se.get(_),Ei=Se.get(y);if(ci&&Ei)return ci==y&&Ei==_;var Lr=!0;Se.set(_,y),Se.set(y,_);for(var xi=Re;++en<Xe;){Pn=$e[en];var Wr=_[Pn],Zr=y[Pn];if(J)var df=Re?J(Zr,Wr,Pn,y,_,Se):J(Wr,Zr,Pn,_,y,Se);if(!(df===M?Wr===Zr||ce(Wr,Zr,A,J,Se):df)){Lr=!1;break}xi||(xi=Pn=="constructor")}if(Lr&&!xi){var Ed=_.constructor,hf=y.constructor;Ed!=hf&&"constructor"in _&&"constructor"in y&&!(typeof Ed=="function"&&Ed instanceof Ed&&typeof hf=="function"&&hf instanceof hf)&&(Lr=!1)}return Se.delete(_),Se.delete(y),Lr}function Sn(_){return Ra(xo(_,M,yd),_+"")}function lh(_){return Ip(_,Pa,Wp)}function md(_){return Ip(_,El,pg)}var __=ys?function(_){return ys.get(_)}:zy;function v_(_){for(var y=_.name+"",A=Uu[y],J=Cr.call(Uu,y)?A.length:0;J--;){var ce=A[J],Se=ce.func;if(Se==null||Se==_)return ce.name}return y}function ta(_){var y=Cr.call(Ce,"placeholder")?Ce:_;return y.placeholder}function ii(){var _=Ce.iteratee||Vy;return _=_===Vy?Gu:_,arguments.length?_(arguments[0],arguments[1]):_}function uh(_,y){var A=_.__data__;return _1(y)?A[typeof y=="string"?"string":"hash"]:A.map}function b_(_){for(var y=Pa(_),A=y.length;A--;){var J=y[A],ce=_[J];y[A]=[J,ce,Sr(ce)]}return y}function ch(_,y){var A=dn(_,y);return fa(A)?A:M}function m1(_){var y=Cr.call(_,zl),A=_[zl];try{_[zl]=M;var J=!0}catch{}var ce=zh.call(_);return J&&(y?_[zl]=A:delete _[zl]),ce}var Wp=$l?function(_){return _==null?[]:(_=Kr(_),mc($l(_),function(y){return Jd.call(_,y)}))}:f,pg=$l?function(_){for(var y=[];_;)_c(y,Wp(_)),_=vc(_);return y}:f,yr=Bo;(Js&&yr(new Js(new ArrayBuffer(1)))!=me||Gr&&yr(new Gr)!=Bs||ns&&yr(ns.resolve())!=Kn||jl&&yr(new jl)!=Oi||yo&&yr(new yo)!=Ve)&&(yr=function(_){var y=Bo(_),A=y==bs?_.constructor:M,J=A?wl(A):"";if(J)switch(J){case vl:return me;case r_:return Bs;case a1:return Kn;case l1:return Oi;case wo:return Ve}return y});function Ju(_,y,A){for(var J=-1,ce=A.length;++J<ce;){var Se=A[J],Re=Se.size;switch(Se.type){case"drop":_+=Re;break;case"dropRight":y-=Re;break;case"take":y=Wi(y,_+Re);break;case"takeRight":_=Br(_,y-Re);break}}return{start:_,end:y}}function Cu(_){var y=_.match(tp);return y?y[1].split(Vu):[]}function Vp(_,y,A){y=Vo(y,_);for(var J=-1,ce=y.length,Se=!1;++J<ce;){var Re=Lu(y[J]);if(!(Se=_!=null&&A(_,Re)))break;_=_[Re]}return Se||++J!=ce?Se:(ce=_==null?0:_.length,!!ce&&ia(ce)&&wu(Re,ce)&&(qi(_)||Gp(_)))}function kc(_){var y=_.length,A=new _.constructor(y);return y&&typeof _[0]=="string"&&Cr.call(_,"index")&&(A.index=_.index,A.input=_.input),A}function Aa(_){return typeof _.constructor=="function"&&!Ma(_)?Uh(vc(_)):{}}function C_(_,y,A){var J=_.constructor;switch(y){case ge:return Yu(_);case Tn:case Tt:return new J(+_);case me:return w0(_,A);case Le:case oe:case Te:case ut:case et:case Ot:case Dn:case N:case q:return fd(_,A);case Bs:return new J;case fi:case vt:return new J(_);case Sa:return oh(_);case Oi:return new J;case vo:return fg(_)}}function yu(_,y){var A=y.length;if(!A)return _;var J=A-1;return y[J]=(A>1?"& ":"")+y[J],y=y.join(A>2?", ":" "),_.replace(bo,`{
/* [wrapped with `+y+`] */
`)}function rf(_){return qi(_)||Gp(_)||!!(bc&&_&&_[bc])}function wu(_,y){var A=typeof _;return y=y??Mt,!!y&&(A=="number"||A!="symbol"&&ip.test(_))&&_>-1&&_%1==0&&_<y}function wr(_,y,A){if(!Kt(A))return!1;var J=typeof y;return(J=="number"?Io(A)&&wu(y,A.length):J=="string"&&y in A)?wd(A[y],_):!1}function Oa(_,y){if(qi(_))return!1;var A=typeof _;return A=="number"||A=="symbol"||A=="boolean"||_==null||nc(_)?!0:Zt.test(_)||!pn.test(_)||y!=null&&_ in Kr(y)}function _1(_){var y=typeof _;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?_!=="__proto__":_===null}function Hp(_){var y=v_(_),A=Ce[y];if(typeof A!="function"||!(y in $i.prototype))return!1;if(_===A)return!0;var J=__(A);return!!J&&_===J[0]}function y_(_){return!!Qd&&Qd in _}var x0=Hl?uf:b;function Ma(_){var y=_&&_.constructor,A=typeof y=="function"&&y.prototype||Xd;return _===A}function Sr(_){return _===_&&!Kt(_)}function zo(_,y){return function(A){return A==null?!1:A[_]===y&&(y!==M||_ in Kr(A))}}function Eo(_){var y=is(_,function(J){return A.size===ne&&A.clear(),J}),A=y.cache;return y}function va(_,y){var A=_[1],J=y[1],ce=A|J,Se=ce<(De|Me|Ut),Re=J==Ut&&A==ct||J==Ut&&A==_t&&_[7].length<=y[8]||J==(Ut|_t)&&y[7].length<=y[8]&&A==ct;if(!(Se||Re))return _;J&De&&(_[2]=y[2],ce|=A&De?0:Qe);var $e=y[3];if($e){var Xe=_[3];_[3]=Xe?ah(Xe,$e,y[4]):$e,_[4]=Xe?Ur(_[3],ie):y[4]}return $e=y[5],$e&&(Xe=_[5],_[5]=Xe?pa(Xe,$e,y[6]):$e,_[6]=Xe?Ur(_[5],ie):y[6]),$e=y[7],$e&&(_[7]=$e),J&Ut&&(_[8]=_[8]==null?y[8]:Wi(_[8],y[8])),_[9]==null&&(_[9]=y[9]),_[0]=y[0],_[1]=ce,_}function Jl(_){var y=[];if(_!=null)for(var A in Kr(_))y.push(A);return y}function mg(_){return zh.call(_)}function xo(_,y,A){return y=Br(y===M?_.length-1:y,0),function(){for(var J=arguments,ce=-1,Se=Br(J.length-y,0),Re=ft(Se);++ce<Se;)Re[ce]=J[y+ce];ce=-1;for(var $e=ft(y+1);++ce<y;)$e[ce]=J[ce];return $e[y]=A(Re),Xa(_,this,$e)}}function _g(_,y){return y.length<2?_:ka(_,Xl(y,0,-1))}function _d(_,y){for(var A=_.length,J=Wi(y.length,A),ce=kr(_);J--;){var Se=y[J];_[J]=wu(Se,A)?ce[Se]:M}return _}function dh(_,y){if(!(y==="constructor"&&typeof _[y]=="function")&&y!="__proto__")return _[y]}var vg=bd(sh),vd=o1||function(_,y){return ao.setTimeout(_,y)},Ra=bd(d1);function w_(_,y,A){var J=y+"";return Ra(_,yu(J,S_(Cu(J),A)))}function bd(_){var y=0,A=0;return function(){var J=En(),ce=Ft-(J-A);if(A=J,ce>0){if(++y>=qn)return arguments[0]}else y=0;return _.apply(M,arguments)}}function Su(_,y){var A=-1,J=_.length,ce=J-1;for(y=y===M?J:y;++A<y;){var Se=Ec(A,ce),Re=_[Se];_[Se]=_[A],_[A]=Re}return _.length=y,_}var zp=Eo(function(_){var y=[];return _.charCodeAt(0)===46&&y.push(""),_.replace(Ui,function(A,J,ce,Se){y.push(ce?Se.replace(n0,"$1"):J||A)}),y});function Lu(_){if(typeof _=="string"||nc(_))return _;var y=_+"";return y=="0"&&1/_==-ot?"-0":y}function wl(_){if(_!=null){try{return pl.call(_)}catch{}try{return _+""}catch{}}return""}function S_(_,y){return Ea(yt,function(A){var J="_."+A[0];y&A[1]&&!ts(_,J)&&_.push(J)}),_.sort()}function Cd(_){if(_ instanceof $i)return _.clone();var y=new Ro(_.__wrapped__,_.__chain__);return y.__actions__=kr(_.__actions__),y.__index__=_.__index__,y.__values__=_.__values__,y}function Es(_,y,A){(A?wr(_,y,A):y===M)?y=1:y=Br(Ri(y),0);var J=_==null?0:_.length;if(!J||y<1)return[];for(var ce=0,Se=0,Re=ft(od(J/y));ce<J;)Re[Se++]=Xl(_,ce,ce+=y);return Re}function Up(_){for(var y=-1,A=_==null?0:_.length,J=0,ce=[];++y<A;){var Se=_[y];Se&&(ce[J++]=Se)}return ce}function D0(){var _=arguments.length;if(!_)return[];for(var y=ft(_-1),A=arguments[0],J=_;J--;)y[J-1]=arguments[J];return _c(qi(A)?kr(A):[A],lo(y,1))}var L_=Yi(function(_,y){return Gs(_)?rg(_,lo(y,1,Gs,!0)):[]}),bg=Yi(function(_,y){var A=Eu(y);return Gs(A)&&(A=M),Gs(_)?rg(_,lo(y,1,Gs,!0),ii(A,2)):[]}),il=Yi(function(_,y){var A=Eu(y);return Gs(A)&&(A=M),Gs(_)?rg(_,lo(y,1,Gs,!0),M,A):[]});function hh(_,y,A){var J=_==null?0:_.length;return J?(y=A||y===M?1:Ri(y),Xl(_,y<0?0:y,J)):[]}function ec(_,y,A){var J=_==null?0:_.length;return J?(y=A||y===M?1:Ri(y),y=J-y,Xl(_,0,y<0?0:y)):[]}function Sl(_,y){return _&&_.length?xc(_,ii(y,3),!0,!0):[]}function Cg(_,y){return _&&_.length?xc(_,ii(y,3),!0):[]}function I0(_,y,A,J){var ce=_==null?0:_.length;return ce?(A&&typeof A!="number"&&wr(_,y,A)&&(A=0,J=ce),th(_,y,A,J)):[]}function E_(_,y,A){var J=_==null?0:_.length;if(!J)return-1;var ce=A==null?0:Ri(A);return ce<0&&(ce=Br(J+ce,0)),Qm(_,ii(y,3),ce)}function v1(_,y,A){var J=_==null?0:_.length;if(!J)return-1;var ce=J-1;return A!==M&&(ce=Ri(A),ce=A<0?Br(J+ce,0):Wi(ce,J-1)),Qm(_,ii(y,3),ce,!0)}function yd(_){var y=_==null?0:_.length;return y?lo(_,1):[]}function b1(_){var y=_==null?0:_.length;return y?lo(_,ot):[]}function T0(_,y){var A=_==null?0:_.length;return A?(y=y===M?1:Ri(y),lo(_,y)):[]}function sf(_){for(var y=-1,A=_==null?0:_.length,J={};++y<A;){var ce=_[y];J[ce[0]]=ce[1]}return J}function x_(_){return _&&_.length?_[0]:M}function of(_,y,A){var J=_==null?0:_.length;if(!J)return-1;var ce=A==null?0:Ri(A);return ce<0&&(ce=Br(J+ce,0)),Zf(_,y,ce)}function C1(_){var y=_==null?0:_.length;return y?Xl(_,0,-1):[]}var y1=Yi(function(_){var y=cr(_,cg);return y.length&&y[0]===_[0]?nh(y):[]}),k0=Yi(function(_){var y=Eu(_),A=cr(_,cg);return y===Eu(A)?y=M:A.pop(),A.length&&A[0]===_[0]?nh(A,ii(y,2)):[]}),D_=Yi(function(_){var y=Eu(_),A=cr(_,cg);return y=typeof y=="function"?y:M,y&&A.pop(),A.length&&A[0]===_[0]?nh(A,M,y):[]});function ly(_,y){return _==null?"":j.call(_,y)}function Eu(_){var y=_==null?0:_.length;return y?_[y-1]:M}function w1(_,y,A){var J=_==null?0:_.length;if(!J)return-1;var ce=J;return A!==M&&(ce=Ri(A),ce=ce<0?Br(J+ce,0):Wi(ce,J-1)),y===y?id(_,y,ce):Qm(_,pp,ce,!0)}function S1(_,y){return _&&_.length?ga(_,Ri(y)):M}var af=Yi(L1);function L1(_,y){return _&&_.length&&y&&y.length?ih(_,y):_}function yg(_,y,A){return _&&_.length&&y&&y.length?ih(_,y,ii(A,2)):_}function wg(_,y,A){return _&&_.length&&y&&y.length?ih(_,y,M,A):_}var Vs=Sn(function(_,y){var A=_==null?0:_.length,J=ad(_,y);return Qh(_,cr(y,function(ce){return wu(ce,A)?+ce:ce}).sort(S0)),J});function uy(_,y){var A=[];if(!(_&&_.length))return A;var J=-1,ce=[],Se=_.length;for(y=ii(y,3);++J<Se;){var Re=_[J];y(Re,J,_)&&(A.push(Re),ce.push(J))}return Qh(_,ce),A}function I_(_){return _==null?_:eg.call(_)}function cy(_,y,A){var J=_==null?0:_.length;return J?(A&&typeof A!="number"&&wr(_,y,A)?(y=0,A=J):(y=y==null?0:Ri(y),A=A===M?J:Ri(A)),Xl(_,y,A)):[]}function dy(_,y){return Jh(_,y)}function E1(_,y,A){return y0(_,y,ii(A,2))}function x1(_,y){var A=_==null?0:_.length;if(A){var J=Jh(_,y);if(J<A&&wd(_[J],y))return J}return-1}function hy(_,y){return Jh(_,y,!0)}function xu(_,y,A){return y0(_,y,ii(A,2),!0)}function $p(_,y){var A=_==null?0:_.length;if(A){var J=Jh(_,y,!0)-1;if(wd(_[J],y))return J}return-1}function fy(_){return _&&_.length?h_(_):[]}function Ll(_,y){return _&&_.length?h_(_,ii(y,2)):[]}function T_(_){var y=_==null?0:_.length;return y?Xl(_,1,y):[]}function lf(_,y,A){return _&&_.length?(y=A||y===M?1:Ri(y),Xl(_,0,y<0?0:y)):[]}function k_(_,y,A){var J=_==null?0:_.length;return J?(y=A||y===M?1:Ri(y),y=J-y,Xl(_,y<0?0:y,J)):[]}function N0(_,y){return _&&_.length?xc(_,ii(y,3),!1,!0):[]}function A0(_,y){return _&&_.length?xc(_,ii(y,3)):[]}var gy=Yi(function(_){return ms(lo(_,1,Gs,!0))}),O0=Yi(function(_){var y=Eu(_);return Gs(y)&&(y=M),ms(lo(_,1,Gs,!0),ii(y,2))}),py=Yi(function(_){var y=Eu(_);return y=typeof y=="function"?y:M,ms(lo(_,1,Gs,!0),M,y)});function D1(_){return _&&_.length?ms(_):[]}function I1(_,y){return _&&_.length?ms(_,ii(y,2)):[]}function N_(_,y){return y=typeof y=="function"?y:M,_&&_.length?ms(_,M,y):[]}function Sg(_){if(!(_&&_.length))return[];var y=0;return _=mc(_,function(A){if(Gs(A))return y=Br(A.length,y),!0}),Ns(y,function(A){return cr(_,Fl(A))})}function M0(_,y){if(!(_&&_.length))return[];var A=Sg(_);return y==null?A:cr(A,function(J){return Xa(y,M,J)})}var R0=Yi(function(_,y){return Gs(_)?rg(_,y):[]}),my=Yi(function(_){return nl(mc(_,Gs))}),T1=Yi(function(_){var y=Eu(_);return Gs(y)&&(y=M),nl(mc(_,Gs),ii(y,2))}),jp=Yi(function(_){var y=Eu(_);return y=typeof y=="function"?y:M,nl(mc(_,Gs),M,y)}),Lg=Yi(Sg);function P0(_,y){return ug(_||[],y||[],Gl)}function A_(_,y){return ug(_||[],y||[],rh)}var k1=Yi(function(_){var y=_.length,A=y>1?_[y-1]:M;return A=typeof A=="function"?(_.pop(),A):M,M0(_,A)});function N1(_){var y=Ce(_);return y.__chain__=!0,y}function Nc(_,y){return y(_),_}function O_(_,y){return y(_)}var qp=Sn(function(_){var y=_.length,A=y?_[0]:0,J=this.__wrapped__,ce=function(Se){return ad(Se,_)};return y>1||this.__actions__.length||!(J instanceof $i)||!wu(A)?this.thru(ce):(J=J.slice(A,+A+(y?1:0)),J.__actions__.push({func:O_,args:[ce],thisArg:M}),new Ro(J,this.__chain__).thru(function(Se){return y&&!Se.length&&Se.push(M),Se}))});function _y(){return N1(this)}function M_(){return new Ro(this.value(),this.__chain__)}function g(){this.__values__===M&&(this.__values__=P_(this.value()));var _=this.__index__>=this.__values__.length,y=_?M:this.__values__[this.__index__++];return{done:_,value:y}}function m(){return this}function w(_){for(var y,A=this;A instanceof Da;){var J=Cd(A);J.__index__=0,J.__values__=M,y?ce.__wrapped__=J:y=J;var ce=J;A=A.__wrapped__}return ce.__wrapped__=_,y}function T(){var _=this.__wrapped__;if(_ instanceof $i){var y=_;return this.__actions__.length&&(y=new $i(this)),y=y.reverse(),y.__actions__.push({func:O_,args:[I_],thisArg:M}),new Ro(y,this.__chain__)}return this.thru(I_)}function U(){return bu(this.__wrapped__,this.__actions__)}var Q=ef(function(_,y,A){Cr.call(_,A)?++_[A]:So(_,A,1)});function he(_,y,A){var J=qi(_)?Qb:u_;return A&&wr(_,y,A)&&(y=M),J(_,ii(y,3))}function ke(_,y){var A=qi(_)?mc:Dp;return A(_,ii(y,3))}var He=nf(E_),dt=nf(v1);function $t(_,y){return lo(tt(_,y),1)}function Gt(_,y){return lo(tt(_,y),ot)}function zt(_,y,A){return A=A===M?1:Ri(A),lo(tt(_,y),A)}function In(_,y){var A=qi(_)?Ea:Ia;return A(_,ii(y,3))}function Vn(_,y){var A=qi(_)?gp:ha;return A(_,ii(y,3))}var jn=ef(function(_,y,A){Cr.call(_,A)?_[A].push(y):So(_,A,[y])});function uo(_,y,A,J){_=Io(_)?_:F_(_),A=A&&!J?Ri(A):0;var ce=_.length;return A<0&&(A=Br(ce+A,0)),M1(_)?A<=ce&&_.indexOf(y,A)>-1:!!ce&&Zf(_,y,A)>-1}var nt=Yi(function(_,y,A){var J=-1,ce=typeof y=="function",Se=Io(_)?ft(_.length):[];return Ia(_,function(Re){Se[++J]=ce?Xa(y,Re,A):Zl(Re,y,A)}),Se}),Ke=ef(function(_,y,A){So(_,A,y)});function tt(_,y){var A=qi(_)?cr:Lc;return A(_,ii(y,3))}function nn(_,y,A,J){return _==null?[]:(qi(y)||(y=y==null?[]:[y]),A=J?M:A,qi(A)||(A=A==null?[]:[A]),Zh(_,y,A))}var Gn=ef(function(_,y,A){_[A?0:1].push(y)},function(){return[[],[]]});function di(_,y,A){var J=qi(_)?Gf:mp,ce=arguments.length<3;return J(_,ii(y,4),A,ce,Ia)}function ri(_,y,A){var J=qi(_)?Jb:mp,ce=arguments.length<3;return J(_,ii(y,4),A,ce,ha)}function bi(_,y){var A=qi(_)?mc:Dp;return A(_,Vi(ii(y,3)))}function na(_){var y=qi(_)?Kh:Na;return y(_)}function Ar(_,y,A){(A?wr(_,y,A):y===M)?y=1:y=Ri(y);var J=qi(_)?ng:d_;return J(_,y)}function fh(_){var y=qi(_)?eo:h1;return y(_)}function vy(_){if(_==null)return 0;if(Io(_))return M1(_)?Bl(_):_.length;var y=yr(_);return y==Bs||y==Oi?_.size:Cl(_).length}function xD(_,y,A){var J=qi(_)?Xm:C0;return A&&wr(_,y,A)&&(y=M),J(_,ii(y,3))}var DD=Yi(function(_,y){if(_==null)return[];var A=y.length;return A>1&&wr(_,y[0],y[1])?y=[]:A>2&&wr(y[0],y[1],y[2])&&(y=[y[0]]),Zh(_,lo(y,1),[])}),A1=eh||function(){return ao.Date.now()};function ID(_,y){if(typeof y!="function")throw new Mo(G);return _=Ri(_),function(){if(--_<1)return y.apply(this,arguments)}}function _L(_,y,A){return y=A?M:y,y=_&&y==null?_.length:y,Ql(_,Ut,M,M,M,M,y)}function vL(_,y){var A;if(typeof y!="function")throw new Mo(G);return _=Ri(_),function(){return--_>0&&(A=y.apply(this,arguments)),_<=1&&(y=M),A}}var by=Yi(function(_,y,A){var J=De;if(A.length){var ce=Ur(A,ta(by));J|=Ye}return Ql(_,J,y,A,ce)}),bL=Yi(function(_,y,A){var J=De|Me;if(A.length){var ce=Ur(A,ta(bL));J|=Ye}return Ql(y,J,_,A,ce)});function Do(_,y,A){y=A?M:y;var J=Ql(_,ct,M,M,M,M,M,y);return J.placeholder=Do.placeholder,J}function CL(_,y,A){y=A?M:y;var J=Ql(_,Rt,M,M,M,M,M,y);return J.placeholder=CL.placeholder,J}function yL(_,y,A){var J,ce,Se,Re,$e,Xe,Bt=0,Wt=!1,en=!1,Pn=!0;if(typeof _!="function")throw new Mo(G);y=Ac(y)||0,Kt(A)&&(Wt=!!A.leading,en="maxWait"in A,Se=en?Br(Ac(A.maxWait)||0,y):Se,Pn="trailing"in A?!!A.trailing:Pn);function ci(sl){var Xp=J,q0=ce;return J=ce=M,Bt=sl,Re=_.apply(q0,Xp),Re}function Ei(sl){return Bt=sl,$e=vd(Wr,y),Wt?ci(sl):Re}function Lr(sl){var Xp=sl-Xe,q0=sl-Bt,Tq=y-Xp;return en?Wi(Tq,Se-q0):Tq}function xi(sl){var Xp=sl-Xe,q0=sl-Bt;return Xe===M||Xp>=y||Xp<0||en&&q0>=Se}function Wr(){var sl=A1();if(xi(sl))return Zr(sl);$e=vd(Wr,Lr(sl))}function Zr(sl){return $e=M,Pn&&J?ci(sl):(J=ce=M,Re)}function df(){$e!==M&&hd($e),Bt=0,J=Xe=ce=$e=M}function Ed(){return $e===M?Re:Zr(A1())}function hf(){var sl=A1(),Xp=xi(sl);if(J=arguments,ce=this,Xe=sl,Xp){if($e===M)return Ei(Xe);if(en)return hd($e),$e=vd(Wr,y),ci(Xe)}return $e===M&&($e=vd(Wr,y)),Re}return hf.cancel=df,hf.flush=Ed,hf}var tc=Yi(function(_,y){return ig(_,1,y)}),_n=Yi(function(_,y,A){return ig(_,Ac(y)||0,A)});function TD(_){return Ql(_,sn)}function is(_,y){if(typeof _!="function"||y!=null&&typeof y!="function")throw new Mo(G);var A=function(){var J=arguments,ce=y?y.apply(this,J):J[0],Se=A.cache;if(Se.has(ce))return Se.get(ce);var Re=_.apply(this,J);return A.cache=Se.set(ce,Re)||Se,Re};return A.cache=new(is.Cache||Fo),A}is.Cache=Fo;function Vi(_){if(typeof _!="function")throw new Mo(G);return function(){var y=arguments;switch(y.length){case 0:return!_.call(this);case 1:return!_.call(this,y[0]);case 2:return!_.call(this,y[0],y[1]);case 3:return!_.call(this,y[0],y[1],y[2])}return!_.apply(this,y)}}function kD(_){return vL(2,_)}var eu=Dc(function(_,y){y=y.length==1&&qi(y[0])?cr(y[0],gl(ii())):cr(lo(y,1),gl(ii()));var A=y.length;return Yi(function(J){for(var ce=-1,Se=Wi(J.length,A);++ce<Se;)J[ce]=y[ce].call(this,J[ce]);return Xa(_,this,J)})}),Cy=Yi(function(_,y){var A=Ur(y,ta(Cy));return Ql(_,Ye,M,y,A)}),wL=Yi(function(_,y){var A=Ur(y,ta(wL));return Ql(_,gt,M,y,A)}),ND=Sn(function(_,y){return Ql(_,_t,M,M,M,y)});function AD(_,y){if(typeof _!="function")throw new Mo(G);return y=y===M?y:Ri(y),Yi(_,y)}function OD(_,y){if(typeof _!="function")throw new Mo(G);return y=y==null?0:Br(Ri(y),0),Yi(function(A){var J=A[y],ce=Ic(A,0,y);return J&&_c(ce,J),Xa(_,this,ce)})}function F0(_,y,A){var J=!0,ce=!0;if(typeof _!="function")throw new Mo(G);return Kt(A)&&(J="leading"in A?!!A.leading:J,ce="trailing"in A?!!A.trailing:ce),yL(_,y,{leading:J,maxWait:y,trailing:ce})}function MD(_){return _L(_,1)}function rl(_,y){return Cy(dg(y),_)}function yy(){if(!arguments.length)return[];var _=arguments[0];return qi(_)?_:[_]}function Kp(_){return ca(_,K)}function Mi(_,y){return y=typeof y=="function"?y:M,ca(_,K,y)}function ji(_){return ca(_,te|K)}function wy(_,y){return y=typeof y=="function"?y:M,ca(_,te|K,y)}function RD(_,y){return y==null||da(_,y,Pa(y))}function wd(_,y){return _===y||_!==_&&y!==y}var PD=gg(gs),FD=gg(function(_,y){return _>=y}),Gp=Ws(function(){return arguments}())?Ws:function(_){return to(_)&&Cr.call(_,"callee")&&!Jd.call(_,"callee")},qi=ft.isArray,Sy=cu?gl(cu):qs;function Io(_){return _!=null&&ia(_.length)&&!uf(_)}function Gs(_){return to(_)&&Io(_)}function BD(_){return _===!0||_===!1||to(_)&&Bo(_)==Tn}var gh=ua||b,Yp=Gm?gl(Gm):Lo;function Ys(_){return to(_)&&_.nodeType===1&&!B0(_)}function Sd(_){if(_==null)return!0;if(Io(_)&&(qi(_)||typeof _=="string"||typeof _.splice=="function"||gh(_)||R_(_)||Gp(_)))return!_.length;var y=yr(_);if(y==Bs||y==Oi)return!_.size;if(Ma(_))return!Cl(_).length;for(var A in _)if(Cr.call(_,A))return!1;return!0}function WD(_,y){return vu(_,y)}function VD(_,y,A){A=typeof A=="function"?A:M;var J=A?A(_,y):M;return J===M?vu(_,y,M,A):!!J}function Ly(_){if(!to(_))return!1;var y=Bo(_);return y==Qn||y==tn||typeof _.message=="string"&&typeof _.name=="string"&&!B0(_)}function HD(_){return typeof _=="number"&&Jf(_)}function uf(_){if(!Kt(_))return!1;var y=Bo(_);return y==oi||y==lt||y==Xt||y==Pr}function O1(_){return typeof _=="number"&&_==Ri(_)}function ia(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Mt}function Kt(_){var y=typeof _;return _!=null&&(y=="object"||y=="function")}function to(_){return _!=null&&typeof _=="object"}var no=Ym?gl(Ym):cd;function Ey(_,y){return _===y||wn(_,y,b_(y))}function zD(_,y,A){return A=typeof A=="function"?A:M,wn(_,y,b_(y),A)}function ti(_){return SL(_)&&_!=+_}function UD(_){if(x0(_))throw new Ci(R);return fa(_)}function xy(_){return _===null}function Zp(_){return _==null}function SL(_){return typeof _=="number"||to(_)&&Bo(_)==fi}function B0(_){if(!to(_)||Bo(_)!=bs)return!1;var y=vc(_);if(y===null)return!0;var A=Cr.call(y,"constructor")&&y.constructor;return typeof A=="function"&&A instanceof A&&pl.call(A)==Qf}var Dy=Zm?gl(Zm):b0;function $D(_){return O1(_)&&_>=-Mt&&_<=Mt}var LL=Kf?gl(Kf):Ku;function M1(_){return typeof _=="string"||!qi(_)&&to(_)&&Bo(_)==vt}function nc(_){return typeof _=="symbol"||to(_)&&Bo(_)==vo}var R_=Vh?gl(Vh):Np;function jD(_){return _===M}function qD(_){return to(_)&&yr(_)==Ve}function KD(_){return to(_)&&Bo(_)==Ze}var GD=gg(Ap),YD=gg(function(_,y){return _<=y});function P_(_){if(!_)return[];if(Io(_))return M1(_)?On(_):kr(_);if(ml&&_[ml])return li(_[ml]());var y=yr(_),A=y==Bs?nd:y==Oi?Qa:F_;return A(_)}function cf(_){if(!_)return _===0?_:0;if(_=Ac(_),_===ot||_===-ot){var y=_<0?-1:1;return y*cn}return _===_?_:0}function Ri(_){var y=cf(_),A=y%1;return y===y?A?y-A:y:0}function EL(_){return _?ld(Ri(_),0,Pe):0}function Ac(_){if(typeof _=="number")return _;if(nc(_))return bn;if(Kt(_)){var y=typeof _.valueOf=="function"?_.valueOf():_;_=Kt(y)?y+"":y}if(typeof _!="string")return _===0?_:+_;_=h0(_);var A=fc.test(_);return A||ny.test(_)?Za(_.slice(2),A?2:8):Rh.test(_)?bn:+_}function xL(_){return Zu(_,El(_))}function Dr(_){return _?ld(Ri(_),-Mt,Mt):_===0?_:0}function ui(_){return _==null?"":Zi(_)}var ZD=gd(function(_,y){if(Ma(y)||Io(y)){Zu(y,Pa(y),_);return}for(var A in y)Cr.call(y,A)&&Gl(_,A,y[A])}),DL=gd(function(_,y){Zu(y,El(y),_)}),R1=gd(function(_,y,A,J){Zu(y,El(y),_,J)}),Iy=gd(function(_,y,A,J){Zu(y,Pa(y),_,J)}),XD=Sn(ad);function QD(_,y){var A=Uh(_);return y==null?A:Tr(A,y)}var JD=Yi(function(_,y){_=Kr(_);var A=-1,J=y.length,ce=J>2?y[2]:M;for(ce&&wr(y[0],y[1],ce)&&(J=1);++A<J;)for(var Se=y[A],Re=El(Se),$e=-1,Xe=Re.length;++$e<Xe;){var Bt=Re[$e],Wt=_[Bt];(Wt===M||wd(Wt,Xd[Bt])&&!Cr.call(_,Bt))&&(_[Bt]=Se[Bt])}return _}),Ty=Yi(function(_){return _.push(M,p1),Xa(IL,M,_)});function eI(_,y){return du(_,ii(y,3),Ta)}function tI(_,y){return du(_,ii(y,3),Yl)}function nI(_,y){return _==null?_:_u(_,ii(y,3),El)}function ky(_,y){return _==null?_:sg(_,ii(y,3),El)}function Ny(_,y){return _&&Ta(_,ii(y,3))}function iI(_,y){return _&&Yl(_,ii(y,3))}function rI(_){return _==null?[]:og(_,Pa(_))}function sI(_){return _==null?[]:og(_,El(_))}function Ay(_,y,A){var J=_==null?M:ka(_,y);return J===M?A:J}function Ld(_,y){return _!=null&&Vp(_,y,Sc)}function Oy(_,y){return _!=null&&Vp(_,y,_0)}var oI=jt(function(_,y,A){y!=null&&typeof y.toString!="function"&&(y=zh.call(y)),_[y]=A},Wy(Du)),aI=jt(function(_,y,A){y!=null&&typeof y.toString!="function"&&(y=zh.call(y)),Cr.call(_,y)?_[y].push(A):_[y]=[A]},ii),lI=Yi(Zl);function Pa(_){return Io(_)?Qi(_):Cl(_)}function El(_){return Io(_)?Qi(_,!0):ps(_)}function My(_,y){var A={};return y=ii(y,3),Ta(_,function(J,ce,Se){So(A,y(J,ce,Se),J)}),A}function uI(_,y){var A={};return y=ii(y,3),Ta(_,function(J,ce,Se){So(A,ce,y(J,ce,Se))}),A}var cI=gd(function(_,y,A){Yh(_,y,A)}),IL=gd(function(_,y,A,J){Yh(_,y,A,J)}),dI=Sn(function(_,y){var A={};if(_==null)return A;var J=!1;y=cr(y,function(Se){return Se=Vo(Se,_),J||(J=Se.length>1),Se}),Zu(_,md(_),A),J&&(A=ca(A,te|B|K,ay));for(var ce=y.length;ce--;)lg(A,y[ce]);return A});function hI(_,y){return TL(_,Vi(ii(y)))}var fI=Sn(function(_,y){return _==null?{}:c_(_,y)});function TL(_,y){if(_==null)return{};var A=cr(md(_),function(J){return[J]});return y=ii(y),dd(_,A,function(J,ce){return y(J,ce[0])})}function gI(_,y,A){y=Vo(y,_);var J=-1,ce=y.length;for(ce||(ce=1,_=M);++J<ce;){var Se=_==null?M:_[Lu(y[J])];Se===M&&(J=ce,Se=A),_=uf(Se)?Se.call(_):Se}return _}function pI(_,y,A){return _==null?_:rh(_,y,A)}function mI(_,y,A,J){return J=typeof J=="function"?J:M,_==null?_:rh(_,y,A,J)}var kL=Fp(Pa),NL=Fp(El);function _I(_,y,A){var J=qi(_),ce=J||gh(_)||R_(_);if(y=ii(y,4),A==null){var Se=_&&_.constructor;ce?A=J?new Se:[]:Kt(_)?A=uf(Se)?Uh(vc(_)):{}:A={}}return(ce?Ea:Ta)(_,function(Re,$e,Xe){return y(A,Re,$e,Xe)}),A}function vI(_,y){return _==null?!0:lg(_,y)}function bI(_,y,A){return _==null?_:f1(_,y,dg(A))}function CI(_,y,A,J){return J=typeof J=="function"?J:M,_==null?_:f1(_,y,dg(A),J)}function F_(_){return _==null?[]:Jm(_,Pa(_))}function yI(_){return _==null?[]:Jm(_,El(_))}function wI(_,y,A){return A===M&&(A=y,y=M),A!==M&&(A=Ac(A),A=A===A?A:0),y!==M&&(y=Ac(y),y=y===y?y:0),ld(Ac(_),y,A)}function SI(_,y,A){return y=cf(y),A===M?(A=y,y=0):A=cf(A),_=Ac(_),Tp(_,y,A)}function LI(_,y,A){if(A&&typeof A!="boolean"&&wr(_,y,A)&&(y=A=M),A===M&&(typeof y=="boolean"?(A=y,y=M):typeof _=="boolean"&&(A=_,_=M)),_===M&&y===M?(_=0,y=1):(_=cf(_),y===M?(y=_,_=0):y=cf(y)),_>y){var J=_;_=y,y=J}if(A||_%1||y%1){var ce=i_();return Wi(_+ce*(y-_+vi("1e-"+((ce+"").length-1))),y)}return Ec(_,y)}var EI=Ks(function(_,y,A){return y=y.toLowerCase(),_+(A?AL(y):y)});function AL(_){return By(ui(_).toLowerCase())}function OL(_){return _=ui(_),_&&_.replace(Hm,Ne).replace(Ga,"")}function xI(_,y,A){_=ui(_),y=Zi(y);var J=_.length;A=A===M?J:ld(Ri(A),0,J);var ce=A;return A-=y.length,A>=0&&_.slice(A,ce)==y}function W0(_){return _=ui(_),_&&wt.test(_)?_.replace(qe,Ee):_}function Ry(_){return _=ui(_),_&&jr.test(_)?_.replace(_i,"\\$&"):_}var Py=Ks(function(_,y,A){return _+(A?"-":"")+y.toLowerCase()}),DI=Ks(function(_,y,A){return _+(A?" ":"")+y.toLowerCase()}),II=E0("toLowerCase");function TI(_,y,A){_=ui(_),y=Ri(y);var J=y?Bl(_):0;if(!y||J>=y)return _;var ce=(y-J)/2;return _a(Ul(ce),A)+_+_a(od(ce),A)}function V0(_,y,A){_=ui(_),y=Ri(y);var J=y?Bl(_):0;return y&&J<y?_+_a(y-J,A):_}function kI(_,y,A){_=ui(_),y=Ri(y);var J=y?Bl(_):0;return y&&J<y?_a(y-J,A)+_:_}function NI(_,y,A){return A||y==null?y=0:y&&(y=+y),n_(ui(_).replace(pr,""),y||0)}function AI(_,y,A){return(A?wr(_,y,A):y===M)?y=1:y=Ri(y),Wo(ui(_),y)}function Rs(){var _=arguments,y=ui(_[0]);return _.length<3?y:y.replace(_[1],_[2])}var H0=Ks(function(_,y,A){return _+(A?"_":"")+y.toLowerCase()});function OI(_,y,A){return A&&typeof A!="number"&&wr(_,y,A)&&(y=A=M),A=A===M?Pe:A>>>0,A?(_=ui(_),_&&(typeof y=="string"||y!=null&&!Dy(y))&&(y=Zi(y),!y&&Wn(_))?Ic(On(_),0,A):_.split(y,A)):[]}var MI=Ks(function(_,y,A){return _+(A?" ":"")+By(y)});function RI(_,y,A){return _=ui(_),A=A==null?0:ld(Ri(A),0,_.length),y=Zi(y),_.slice(A,A+y.length)==y}function PI(_,y,A){var J=Ce.templateSettings;A&&wr(_,y,A)&&(y=M),_=ui(_),y=R1({},y,J,Ho);var ce=R1({},y.imports,J.imports,Ho),Se=Pa(ce),Re=Jm(ce,Se),$e,Xe,Bt=0,Wt=y.interpolate||gc,en="__p += '",Pn=el((y.escape||gc).source+"|"+Wt.source+"|"+(Wt===Yt?Kd:gc).source+"|"+(y.evaluate||gc).source+"|$","g"),ci="//# sourceURL="+(Cr.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++u0+"]")+`
`;_.replace(Pn,function(xi,Wr,Zr,df,Ed,hf){return Zr||(Zr=df),en+=_.slice(Bt,hf).replace(rp,bt),Wr&&($e=!0,en+=`' +
__e(`+Wr+`) +
'`),Ed&&(Xe=!0,en+=`';
`+Ed+`;
__p += '`),Zr&&(en+=`' +
((__t = (`+Zr+`)) == null ? '' : __t) +
'`),Bt=hf+xi.length,xi}),en+=`';
`;var Ei=Cr.call(y,"variable")&&y.variable;if(!Ei)en=`with (obj) {
`+en+`
}
`;else if(t0.test(Ei))throw new Ci(Z);en=(Xe?en.replace(le,""):en).replace(fe,"$1").replace(xe,"$1;"),en="function("+(Ei||"obj")+`) {
`+(Ei?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($e?", __e = _.escape":"")+(Xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+en+`return __p
}`;var Lr=RL(function(){return mr(Se,ci+"return "+en).apply(M,Re)});if(Lr.source=en,Ly(Lr))throw Lr;return Lr}function z0(_){return ui(_).toLowerCase()}function FI(_){return ui(_).toUpperCase()}function U0(_,y,A){if(_=ui(_),_&&(A||y===M))return h0(_);if(!_||!(y=Zi(y)))return _;var J=On(_),ce=On(y),Se=n1(J,ce),Re=hu(J,ce)+1;return Ic(J,Se,Re).join("")}function BI(_,y,A){if(_=ui(_),_&&(A||y===M))return _.slice(0,Hh(_)+1);if(!_||!(y=Zi(y)))return _;var J=On(_),ce=hu(J,On(y))+1;return Ic(J,0,ce).join("")}function WI(_,y,A){if(_=ui(_),_&&(A||y===M))return _.replace(pr,"");if(!_||!(y=Zi(y)))return _;var J=On(_),ce=n1(J,On(y));return Ic(J,ce).join("")}function VI(_,y){var A=rn,J=on;if(Kt(y)){var ce="separator"in y?y.separator:ce;A="length"in y?Ri(y.length):A,J="omission"in y?Zi(y.omission):J}_=ui(_);var Se=_.length;if(Wn(_)){var Re=On(_);Se=Re.length}if(A>=Se)return _;var $e=A-Bl(J);if($e<1)return J;var Xe=Re?Ic(Re,0,$e).join(""):_.slice(0,$e);if(ce===M)return Xe+J;if(Re&&($e+=Xe.length-$e),Dy(ce)){if(_.slice($e).search(ce)){var Bt,Wt=Xe;for(ce.global||(ce=el(ce.source,ui(np.exec(ce))+"g")),ce.lastIndex=0;Bt=ce.exec(Wt);)var en=Bt.index;Xe=Xe.slice(0,en===M?$e:en)}}else if(_.indexOf(Zi(ce),$e)!=$e){var Pn=Xe.lastIndexOf(ce);Pn>-1&&(Xe=Xe.slice(0,Pn))}return Xe+J}function HI(_){return _=ui(_),_&&it.test(_)?_.replace(be,bp):_}var Fy=Ks(function(_,y,A){return _+(A?" ":"")+y.toUpperCase()}),By=E0("toUpperCase");function ML(_,y,A){return _=ui(_),y=A?M:y,y===M?ir(_)?r1(_):Yf(_):_.match(y)||[]}var RL=Yi(function(_,y){try{return Xa(_,M,y)}catch(A){return Ly(A)?A:new Ci(A)}}),$0=Sn(function(_,y){return Ea(y,function(A){A=Lu(A),So(_,A,by(_[A],_))}),_});function j0(_){var y=_==null?0:_.length,A=ii();return _=y?cr(_,function(J){if(typeof J[1]!="function")throw new Mo(G);return[A(J[0]),J[1]]}):[],Yi(function(J){for(var ce=-1;++ce<y;){var Se=_[ce];if(Xa(Se[0],this,J))return Xa(Se[1],this,J)}})}function zI(_){return ud(ca(_,te))}function Wy(_){return function(){return _}}function UI(_,y){return _==null||_!==_?y:_}var $I=Tc(),jI=Tc(!0);function Du(_){return _}function Vy(_){return Gu(typeof _=="function"?_:ca(_,te))}function qI(_){return Gh(ca(_,te))}function KI(_,y){return Op(_,ca(y,te))}var GI=Yi(function(_,y){return function(A){return Zl(A,_,y)}}),YI=Yi(function(_,y){return function(A){return Zl(_,A,y)}});function Hy(_,y,A){var J=Pa(y),ce=og(y,J);A==null&&!(Kt(y)&&(ce.length||!J.length))&&(A=y,y=_,_=this,ce=og(y,Pa(y)));var Se=!(Kt(A)&&"chain"in A)||!!A.chain,Re=uf(_);return Ea(ce,function($e){var Xe=y[$e];_[$e]=Xe,Re&&(_.prototype[$e]=function(){var Bt=this.__chain__;if(Se||Bt){var Wt=_(this.__wrapped__),en=Wt.__actions__=kr(this.__actions__);return en.push({func:Xe,args:arguments,thisArg:_}),Wt.__chain__=Bt,Wt}return Xe.apply(_,_c([this.value()],arguments))})}),_}function ZI(){return ao._===this&&(ao._=rr),this}function zy(){}function XI(_){return _=Ri(_),Yi(function(y){return ga(y,_)})}var QI=pd(cr),JI=pd(Qb),eT=pd(Xm);function PL(_){return Oa(_)?Fl(Lu(_)):Xh(_)}function tT(_){return function(y){return _==null?M:ka(_,y)}}var nT=yl(),c=yl(!0);function f(){return[]}function b(){return!1}function x(){return{}}function F(){return""}function Y(){return!0}function re(_,y){if(_=Ri(_),_<1||_>Mt)return[];var A=Pe,J=Wi(_,Pe);y=ii(y),_-=Pe;for(var ce=Ns(J,y);++A<_;)y(A);return ce}function ue(_){return qi(_)?cr(_,Lu):nc(_)?[_]:kr(zp(ui(_)))}function ve(_){var y=++g0;return ui(_)+y}var Fe=Qu(function(_,y){return _+y},0),Be=Pp("ceil"),Ue=Qu(function(_,y){return _/y},1),ht=Pp("floor");function Nt(_){return _&&_.length?xp(_,Du,gs):M}function Qt(_,y){return _&&_.length?xp(_,ii(y,2),gs):M}function Ln(_){return Co(_,Du)}function Jt(_,y){return Co(_,ii(y,2))}function An(_){return _&&_.length?xp(_,Du,Ap):M}function Hn(_,y){return _&&_.length?xp(_,ii(y,2),Ap):M}var Zs=Qu(function(_,y){return _*y},1),_s=Pp("round"),Xs=Qu(function(_,y){return _-y},0);function Ji(_){return _&&_.length?fl(_,Du):0}function Uo(_,y){return _&&_.length?fl(_,ii(y,2)):0}return Ce.after=ID,Ce.ary=_L,Ce.assign=ZD,Ce.assignIn=DL,Ce.assignInWith=R1,Ce.assignWith=Iy,Ce.at=XD,Ce.before=vL,Ce.bind=by,Ce.bindAll=$0,Ce.bindKey=bL,Ce.castArray=yy,Ce.chain=N1,Ce.chunk=Es,Ce.compact=Up,Ce.concat=D0,Ce.cond=j0,Ce.conforms=zI,Ce.constant=Wy,Ce.countBy=Q,Ce.create=QD,Ce.curry=Do,Ce.curryRight=CL,Ce.debounce=yL,Ce.defaults=JD,Ce.defaultsDeep=Ty,Ce.defer=tc,Ce.delay=_n,Ce.difference=L_,Ce.differenceBy=bg,Ce.differenceWith=il,Ce.drop=hh,Ce.dropRight=ec,Ce.dropRightWhile=Sl,Ce.dropWhile=Cg,Ce.fill=I0,Ce.filter=ke,Ce.flatMap=$t,Ce.flatMapDeep=Gt,Ce.flatMapDepth=zt,Ce.flatten=yd,Ce.flattenDeep=b1,Ce.flattenDepth=T0,Ce.flip=TD,Ce.flow=$I,Ce.flowRight=jI,Ce.fromPairs=sf,Ce.functions=rI,Ce.functionsIn=sI,Ce.groupBy=jn,Ce.initial=C1,Ce.intersection=y1,Ce.intersectionBy=k0,Ce.intersectionWith=D_,Ce.invert=oI,Ce.invertBy=aI,Ce.invokeMap=nt,Ce.iteratee=Vy,Ce.keyBy=Ke,Ce.keys=Pa,Ce.keysIn=El,Ce.map=tt,Ce.mapKeys=My,Ce.mapValues=uI,Ce.matches=qI,Ce.matchesProperty=KI,Ce.memoize=is,Ce.merge=cI,Ce.mergeWith=IL,Ce.method=GI,Ce.methodOf=YI,Ce.mixin=Hy,Ce.negate=Vi,Ce.nthArg=XI,Ce.omit=dI,Ce.omitBy=hI,Ce.once=kD,Ce.orderBy=nn,Ce.over=QI,Ce.overArgs=eu,Ce.overEvery=JI,Ce.overSome=eT,Ce.partial=Cy,Ce.partialRight=wL,Ce.partition=Gn,Ce.pick=fI,Ce.pickBy=TL,Ce.property=PL,Ce.propertyOf=tT,Ce.pull=af,Ce.pullAll=L1,Ce.pullAllBy=yg,Ce.pullAllWith=wg,Ce.pullAt=Vs,Ce.range=nT,Ce.rangeRight=c,Ce.rearg=ND,Ce.reject=bi,Ce.remove=uy,Ce.rest=AD,Ce.reverse=I_,Ce.sampleSize=Ar,Ce.set=pI,Ce.setWith=mI,Ce.shuffle=fh,Ce.slice=cy,Ce.sortBy=DD,Ce.sortedUniq=fy,Ce.sortedUniqBy=Ll,Ce.split=OI,Ce.spread=OD,Ce.tail=T_,Ce.take=lf,Ce.takeRight=k_,Ce.takeRightWhile=N0,Ce.takeWhile=A0,Ce.tap=Nc,Ce.throttle=F0,Ce.thru=O_,Ce.toArray=P_,Ce.toPairs=kL,Ce.toPairsIn=NL,Ce.toPath=ue,Ce.toPlainObject=xL,Ce.transform=_I,Ce.unary=MD,Ce.union=gy,Ce.unionBy=O0,Ce.unionWith=py,Ce.uniq=D1,Ce.uniqBy=I1,Ce.uniqWith=N_,Ce.unset=vI,Ce.unzip=Sg,Ce.unzipWith=M0,Ce.update=bI,Ce.updateWith=CI,Ce.values=F_,Ce.valuesIn=yI,Ce.without=R0,Ce.words=ML,Ce.wrap=rl,Ce.xor=my,Ce.xorBy=T1,Ce.xorWith=jp,Ce.zip=Lg,Ce.zipObject=P0,Ce.zipObjectDeep=A_,Ce.zipWith=k1,Ce.entries=kL,Ce.entriesIn=NL,Ce.extend=DL,Ce.extendWith=R1,Hy(Ce,Ce),Ce.add=Fe,Ce.attempt=RL,Ce.camelCase=EI,Ce.capitalize=AL,Ce.ceil=Be,Ce.clamp=wI,Ce.clone=Kp,Ce.cloneDeep=ji,Ce.cloneDeepWith=wy,Ce.cloneWith=Mi,Ce.conformsTo=RD,Ce.deburr=OL,Ce.defaultTo=UI,Ce.divide=Ue,Ce.endsWith=xI,Ce.eq=wd,Ce.escape=W0,Ce.escapeRegExp=Ry,Ce.every=he,Ce.find=He,Ce.findIndex=E_,Ce.findKey=eI,Ce.findLast=dt,Ce.findLastIndex=v1,Ce.findLastKey=tI,Ce.floor=ht,Ce.forEach=In,Ce.forEachRight=Vn,Ce.forIn=nI,Ce.forInRight=ky,Ce.forOwn=Ny,Ce.forOwnRight=iI,Ce.get=Ay,Ce.gt=PD,Ce.gte=FD,Ce.has=Ld,Ce.hasIn=Oy,Ce.head=x_,Ce.identity=Du,Ce.includes=uo,Ce.indexOf=of,Ce.inRange=SI,Ce.invoke=lI,Ce.isArguments=Gp,Ce.isArray=qi,Ce.isArrayBuffer=Sy,Ce.isArrayLike=Io,Ce.isArrayLikeObject=Gs,Ce.isBoolean=BD,Ce.isBuffer=gh,Ce.isDate=Yp,Ce.isElement=Ys,Ce.isEmpty=Sd,Ce.isEqual=WD,Ce.isEqualWith=VD,Ce.isError=Ly,Ce.isFinite=HD,Ce.isFunction=uf,Ce.isInteger=O1,Ce.isLength=ia,Ce.isMap=no,Ce.isMatch=Ey,Ce.isMatchWith=zD,Ce.isNaN=ti,Ce.isNative=UD,Ce.isNil=Zp,Ce.isNull=xy,Ce.isNumber=SL,Ce.isObject=Kt,Ce.isObjectLike=to,Ce.isPlainObject=B0,Ce.isRegExp=Dy,Ce.isSafeInteger=$D,Ce.isSet=LL,Ce.isString=M1,Ce.isSymbol=nc,Ce.isTypedArray=R_,Ce.isUndefined=jD,Ce.isWeakMap=qD,Ce.isWeakSet=KD,Ce.join=ly,Ce.kebabCase=Py,Ce.last=Eu,Ce.lastIndexOf=w1,Ce.lowerCase=DI,Ce.lowerFirst=II,Ce.lt=GD,Ce.lte=YD,Ce.max=Nt,Ce.maxBy=Qt,Ce.mean=Ln,Ce.meanBy=Jt,Ce.min=An,Ce.minBy=Hn,Ce.stubArray=f,Ce.stubFalse=b,Ce.stubObject=x,Ce.stubString=F,Ce.stubTrue=Y,Ce.multiply=Zs,Ce.nth=S1,Ce.noConflict=ZI,Ce.noop=zy,Ce.now=A1,Ce.pad=TI,Ce.padEnd=V0,Ce.padStart=kI,Ce.parseInt=NI,Ce.random=LI,Ce.reduce=di,Ce.reduceRight=ri,Ce.repeat=AI,Ce.replace=Rs,Ce.result=gI,Ce.round=_s,Ce.runInContext=je,Ce.sample=na,Ce.size=vy,Ce.snakeCase=H0,Ce.some=xD,Ce.sortedIndex=dy,Ce.sortedIndexBy=E1,Ce.sortedIndexOf=x1,Ce.sortedLastIndex=hy,Ce.sortedLastIndexBy=xu,Ce.sortedLastIndexOf=$p,Ce.startCase=MI,Ce.startsWith=RI,Ce.subtract=Xs,Ce.sum=Ji,Ce.sumBy=Uo,Ce.template=PI,Ce.times=re,Ce.toFinite=cf,Ce.toInteger=Ri,Ce.toLength=EL,Ce.toLower=z0,Ce.toNumber=Ac,Ce.toSafeInteger=Dr,Ce.toString=ui,Ce.toUpper=FI,Ce.trim=U0,Ce.trimEnd=BI,Ce.trimStart=WI,Ce.truncate=VI,Ce.unescape=HI,Ce.uniqueId=ve,Ce.upperCase=Fy,Ce.upperFirst=By,Ce.each=In,Ce.eachRight=Vn,Ce.first=x_,Hy(Ce,function(){var _={};return Ta(Ce,function(y,A){Cr.call(Ce.prototype,A)||(_[A]=y)}),_}(),{chain:!1}),Ce.VERSION=W,Ea(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){Ce[_].placeholder=Ce}),Ea(["drop","take"],function(_,y){$i.prototype[_]=function(A){A=A===M?1:Br(Ri(A),0);var J=this.__filtered__&&!y?new $i(this):this.clone();return J.__filtered__?J.__takeCount__=Wi(A,J.__takeCount__):J.__views__.push({size:Wi(A,Pe),type:_+(J.__dir__<0?"Right":"")}),J},$i.prototype[_+"Right"]=function(A){return this.reverse()[_](A).reverse()}}),Ea(["filter","map","takeWhile"],function(_,y){var A=y+1,J=A==Pt||A==an;$i.prototype[_]=function(ce){var Se=this.clone();return Se.__iteratees__.push({iteratee:ii(ce,3),type:A}),Se.__filtered__=Se.__filtered__||J,Se}}),Ea(["head","last"],function(_,y){var A="take"+(y?"Right":"");$i.prototype[_]=function(){return this[A](1).value()[0]}}),Ea(["initial","tail"],function(_,y){var A="drop"+(y?"":"Right");$i.prototype[_]=function(){return this.__filtered__?new $i(this):this[A](1)}}),$i.prototype.compact=function(){return this.filter(Du)},$i.prototype.find=function(_){return this.filter(_).head()},$i.prototype.findLast=function(_){return this.reverse().find(_)},$i.prototype.invokeMap=Yi(function(_,y){return typeof _=="function"?new $i(this):this.map(function(A){return Zl(A,_,y)})}),$i.prototype.reject=function(_){return this.filter(Vi(ii(_)))},$i.prototype.slice=function(_,y){_=Ri(_);var A=this;return A.__filtered__&&(_>0||y<0)?new $i(A):(_<0?A=A.takeRight(-_):_&&(A=A.drop(_)),y!==M&&(y=Ri(y),A=y<0?A.dropRight(-y):A.take(y-_)),A)},$i.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},$i.prototype.toArray=function(){return this.take(Pe)},Ta($i.prototype,function(_,y){var A=/^(?:filter|find|map|reject)|While$/.test(y),J=/^(?:head|last)$/.test(y),ce=Ce[J?"take"+(y=="last"?"Right":""):y],Se=J||/^find/.test(y);ce&&(Ce.prototype[y]=function(){var Re=this.__wrapped__,$e=J?[1]:arguments,Xe=Re instanceof $i,Bt=$e[0],Wt=Xe||qi(Re),en=function(Wr){var Zr=ce.apply(Ce,_c([Wr],$e));return J&&Pn?Zr[0]:Zr};Wt&&A&&typeof Bt=="function"&&Bt.length!=1&&(Xe=Wt=!1);var Pn=this.__chain__,ci=!!this.__actions__.length,Ei=Se&&!Pn,Lr=Xe&&!ci;if(!Se&&Wt){Re=Lr?Re:new $i(this);var xi=_.apply(Re,$e);return xi.__actions__.push({func:O_,args:[en],thisArg:M}),new Ro(xi,Pn)}return Ei&&Lr?_.apply(this,$e):(xi=this.thru(en),Ei?J?xi.value()[0]:xi.value():xi)})}),Ea(["pop","push","shift","sort","splice","unshift"],function(_){var y=Cp[_],A=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",J=/^(?:pop|shift)$/.test(_);Ce.prototype[_]=function(){var ce=arguments;if(J&&!this.__chain__){var Se=this.value();return y.apply(qi(Se)?Se:[],ce)}return this[A](function(Re){return y.apply(qi(Re)?Re:[],ce)})}}),Ta($i.prototype,function(_,y){var A=Ce[y];if(A){var J=A.name+"";Cr.call(Uu,J)||(Uu[J]=[]),Uu[J].push({name:y,func:A})}}),Uu[ma(M,Me).name]=[{name:"wrapper",func:M}],$i.prototype.clone=ws,$i.prototype.reverse=s_,$i.prototype.value=o_,Ce.prototype.at=qp,Ce.prototype.chain=_y,Ce.prototype.commit=M_,Ce.prototype.next=g,Ce.prototype.plant=w,Ce.prototype.reverse=T,Ce.prototype.toJSON=Ce.prototype.valueOf=Ce.prototype.value=U,Ce.prototype.first=Ce.prototype.head,ml&&(Ce.prototype[ml]=m),Ce},Wl=s1();Yd?((Yd.exports=Wl)._=Wl,c0._=Wl):ao._=Wl}).call(v)}),E={browserCheck:function(){var z={};if(E.isMobileDevice())return!0;var M=navigator.userAgent.toLowerCase(),W;return(W=M.match(/rv:([\d.]+)\) like gecko/))||(W=M.match(/msie ([\d\.]+)/))?z.ie=W[1]:(W=M.match(/edge?\/([\d\.]+)/))?z.edge=W[1]:(W=M.match(/firefox\/([\d\.]+)/))?z.firefox=W[1]:(W=M.match(/(?:opera|opr).([\d\.]+)/))?z.opera=W[1]:(W=M.match(/chrome\/([\d\.]+)/))?z.chrome=W[1]:(W=M.match(/version\/([\d\.]+).*safari/))&&(z.safari=W[1]),!!(z.chrome&&parseInt(z.chrome.split(".")[0],10)>=66||z.firefox||z.edge)},checkExist:function(z){return z!=null&&z!==""},convertBytes:function(z){for(var M=z,W=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],I=0;M>=1024;)M=Number((M/1024).toFixed(2)),I++;return"".concat(M," ").concat(W[I])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(z,M){var W=M;W||(W=window.location.href);var I=z.replace(/[\[\]]/g,"\\$&"),R=new RegExp("[?&]"+I+"(=([^&#]*)|&|#|$)"),G=R.exec(W);if(!G)return null;if(!G[2])return"";var Z=decodeURIComponent(G[2].replace(/\+/g," "));if(Z==="null")return null;if(Z!=="undefined")return Z},generateFullUrlPath:function(z){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=new URLSearchParams(M),I=W.toString();return z+(I?"?".concat(I):"")},getQueryParameters:function(z){var M=new URLSearchParams(z),W=Object.fromEntries(M.entries());for(var I in W)W[I]==="null"&&(W[I]=null),W[I]==="undefined"&&(W[I]=void 0);return W},getBase64:function(z,M){var W=new FileReader;W.addEventListener("load",function(){return M(W.result)}),W.readAsDataURL(z)},percent:function(z,M){var W=z;if(!W||W===1/0)return"0%";W>1&&(W=1);var I=M||2;return I=Math.pow(10,I),Math.round(W*I*100)/I+"%"},getCssText:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M="";for(var W in z)z.hasOwnProperty(W)&&(M+=W+":"+z[W]+";");return M},trim:function(z){return typeof z!="string"?z:z.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(z){return typeof z!="string"?z:z.replace(/\s/g,"")},getThousandth:function(z){var M=z;if(M==null||M==="")return"0";M="".concat(z);var W=M.split("."),I=a(W,2),R=I[0],G=I[1];return"".concat(R.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(G?".".concat(G):"")},textOverflowExchange:function(z,M){return z&&z.length>M?z.substring(0,M)+"...":z},jsonFormat:function(z,M){if(!z)return z;try{var W=JSON.parse(z),I=JSON.stringify(W,null,M||2);return I}catch{return null}},sortByCompareFunctions:function(z){for(var M=arguments.length,W=new Array(M>1?M-1:0),I=1;I<M;I++)W[I-1]=arguments[I];z.sort(function(R,G){for(var Z=0,ee=0,ne=W;ee<ne.length;ee++){var ie=ne[ee];if(Z=ie(R,G),Z!==0)return Z}return Z})},exchangeOrder:function(z){switch(z){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(z){var M=E.trim(z);return M.charAt(0)==="{"&&M.charAt(M.length-1)==="}"||M.charAt(0)==="["&&M.charAt(M.length-1)==="]"},isPhoneNumber:function(z){var M=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return M.test(z)},isFunction:function(z){return z?typeof/./!="function"?typeof z=="function":Object.prototype.toString.call(z)==="[object Function]":!1},getRandomStr:function(z){var M="0123456789",W="abcdefghijklmnopqrstuvwxyz",I="ABCDEFGHIJKLMNOPQRSTUVXYZ";function R(ne){var ie=Math.random()*(ne.length-1);return ne.charAt(ie)}for(var G="num",Z="",ee=0;ee<z;ee++)G==="num"?(Z+=R(M),G="lower"):G==="lower"?(Z+=R(W),G="upper"):G==="upper"&&(Z+=R(I),G="num");return Z},isEqualArr:function(z,M){var W=JSON.stringify;return W(z.sort())===W(M.sort())},isEqual:function(z,M){for(var W in z)if({}.hasOwnProperty.call(z,W)&&(!{}.hasOwnProperty.call(M,W)||z[W]!==M[W]))return!1;for(var I in M)if({}.hasOwnProperty.call(M,I)&&!{}.hasOwnProperty.call(z,I))return!1;return!0},shouldRender:function(z){z.prototype.shouldComponentUpdate=function(M,W){return!E.isEqual(this.state,W)||!E.isEqual(this.props,M)}},getStrlen:function(z){for(var M=0,W=0;W<z.length;W++){var I=z.charCodeAt(W);I>=1&&I<=126||I>=65376&&I<=65439?M++:M+=2}return M},transformArray:function(z,M){for(var W=z.length,I=[],R=0;R*M<W;)I.push(z.slice(R*M,(R+1)*M)),R++;return I},isEmpty:function(z){return!!(z===""||z===null||z===void 0||Array.prototype.isPrototypeOf(z)&&z.length===0||Object.prototype.isPrototypeOf(z)&&Object.keys(z).length===0)},isObj:function(z){return Object.prototype.toString.call(z)==="[object Object]"},removeEmpty:function(z){if(!(!z||!E.isObj(z)))return Object.entries(z).forEach(function(M){var W=a(M,2),I=W[0],R=W[1];R&&E.isObj(R)?E.removeEmpty(R):E.isEmpty(R)&&delete z[I]}),z},mergeDeep:function(z,M){if(z==null||M==null)return z||M;if(!S.isPlainObject(z)||!S.isPlainObject(M))return M;if(z===M)return M;if("_isMergeAtom"in M){var W=M._isMergeAtom;if(delete M._isMergeAtom,W)return M}var I=e({},z);return S.forEach(M,function(R,G){G in z?I[G]=E.mergeDeep(z[G],R):I[G]=R}),I},downLoadData:function(z){var M=z.url,W=z.payload,I=z.finallyCallback,R=z.successCallback,G=z.errorCallback;fetch(M,{method:"POST",body:JSON.stringify(W)}).then(function(Z){if(Z.status!==200)return G(Z);var ee=Z.headers.get("Content-type")||"";if(ee.includes("application/json"))return G(Z);var ne=z.fileName;if(!ne){var ie=Z.headers.get("Content-disposition")||"";ne=ie.split("filename=")[1]}Z.blob().then(function(te){var B=URL.createObjectURL(te),K=document.createElement("a");K.setAttribute("href",B),K.setAttribute("download",decodeURIComponent(ne||"")),K.click(),URL.revokeObjectURL(B),R&&R(Z)})}).finally(function(){I&&I()})},isUtf8:function(z){var M=["","","","","",""];return M.forEach(function(W){if(z&&z.indexOf(W)>-1)return!1}),!0},utf16to8:function(z){if(typeof z!="string"||!this.isUtf8(z))return z;var M,W,I;M="";var R=z.length||0;for(W=0;W<R;W++)I=z.charCodeAt(W),I>=1&&I<=127?M+=z.charAt(W):I>2047?(M+=String.fromCharCode(224|I>>12&15),M+=String.fromCharCode(128|I>>6&63),M+=String.fromCharCode(128|I>>0&63)):(M+=String.fromCharCode(192|I>>6&31),M+=String.fromCharCode(128|I>>0&63));return M},base64Encode:function(z){var M=z;if(!M)return M;try{M=btoa(this.utf16to8(z))}catch(W){console.log(W)}return M}},k={getCookie:function(z){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.cookie,W=M.match(new RegExp("(^| )"+z+"=([^;]*)(;|$)"));if(W!=null)try{return unescape(decodeURI(W[2]))}catch{return W[2]}return null},getAllCookies:function(){var z={};try{document.cookie.split("; ").forEach(function(M){var W=M.split("=");z[W[0]]=W[1]})}catch{throw new Error("CookieCookie")}return z},deleteCookie:function(z,M,W){var I=new Date(0),R=M?"; domain=".concat(M):"",G=W||"/";document.cookie=z+"=; expires="+I.toUTCString()+R+"; path="+G},deleteAllCookies:function(z,M){for(var W=document.cookie.split(";"),I=0;I<W.length;I++)W[I]&&this.deleteCookie(W[I].split("=")[0],z,M)},setCookie:function(z,M,W,I){var R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"/",G="";if(W){var Z=new Date;Z.setTime(Z.getTime()+W*24*60*60*1e3),G="; expires="+Z.toUTCString()}var ee="";I&&(ee="; domain="+I),document.cookie=z+"="+M+G+ee+"; path="+R}},D=C(function(P,z){(function(M,W){P.exports=W()})(v,function(){var M=1e3,W=6e4,I=36e5,R="millisecond",G="second",Z="minute",ee="hour",ne="day",ie="week",te="month",B="quarter",K="year",de="date",ae="Invalid Date",De=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Me=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Qe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},ct=function(Ft,Pt,At){var an=String(Ft);return!an||an.length>=Pt?Ft:""+Array(Pt+1-an.length).join(At)+Ft},Rt={s:ct,z:function(Ft){var Pt=-Ft.utcOffset(),At=Math.abs(Pt),an=Math.floor(At/60),ot=At%60;return(Pt<=0?"+":"-")+ct(an,2,"0")+":"+ct(ot,2,"0")},m:function Ft(Pt,At){if(Pt.date()<At.date())return-Ft(At,Pt);var an=12*(At.year()-Pt.year())+(At.month()-Pt.month()),ot=Pt.clone().add(an,te),Mt=At-ot<0,cn=Pt.clone().add(an+(Mt?-1:1),te);return+(-(an+(At-ot)/(Mt?ot-cn:cn-ot))||0)},a:function(Ft){return Ft<0?Math.ceil(Ft)||0:Math.floor(Ft)},p:function(Ft){return{M:te,y:K,w:ie,d:ne,D:de,h:ee,m:Z,s:G,ms:R,Q:B}[Ft]||String(Ft||"").toLowerCase().replace(/s$/,"")},u:function(Ft){return Ft===void 0}},Ye="en",gt={};gt[Ye]=Qe;var Ut=function(Ft){return Ft instanceof on},_t=function Ft(Pt,At,an){var ot;if(!Pt)return Ye;if(typeof Pt=="string"){var Mt=Pt.toLowerCase();gt[Mt]&&(ot=Mt),At&&(gt[Mt]=At,ot=Mt);var cn=Pt.split("-");if(!ot&&cn.length>1)return Ft(cn[0])}else{var bn=Pt.name;gt[bn]=Pt,ot=bn}return!an&&ot&&(Ye=ot),ot||!an&&Ye},sn=function(Ft,Pt){if(Ut(Ft))return Ft.clone();var At=typeof Pt=="object"?Pt:{};return At.date=Ft,At.args=arguments,new on(At)},rn=Rt;rn.l=_t,rn.i=Ut,rn.w=function(Ft,Pt){return sn(Ft,{locale:Pt.$L,utc:Pt.$u,x:Pt.$x,$offset:Pt.$offset})};var on=function(){function Ft(At){this.$L=_t(At.locale,null,!0),this.parse(At)}var Pt=Ft.prototype;return Pt.parse=function(At){this.$d=function(an){var ot=an.date,Mt=an.utc;if(ot===null)return new Date(NaN);if(rn.u(ot))return new Date;if(ot instanceof Date)return new Date(ot);if(typeof ot=="string"&&!/Z$/i.test(ot)){var cn=ot.match(De);if(cn){var bn=cn[2]-1||0,Pe=(cn[7]||"0").substring(0,3);return Mt?new Date(Date.UTC(cn[1],bn,cn[3]||1,cn[4]||0,cn[5]||0,cn[6]||0,Pe)):new Date(cn[1],bn,cn[3]||1,cn[4]||0,cn[5]||0,cn[6]||0,Pe)}}return new Date(ot)}(At),this.$x=At.x||{},this.init()},Pt.init=function(){var At=this.$d;this.$y=At.getFullYear(),this.$M=At.getMonth(),this.$D=At.getDate(),this.$W=At.getDay(),this.$H=At.getHours(),this.$m=At.getMinutes(),this.$s=At.getSeconds(),this.$ms=At.getMilliseconds()},Pt.$utils=function(){return rn},Pt.isValid=function(){return this.$d.toString()!==ae},Pt.isSame=function(At,an){var ot=sn(At);return this.startOf(an)<=ot&&ot<=this.endOf(an)},Pt.isAfter=function(At,an){return sn(At)<this.startOf(an)},Pt.isBefore=function(At,an){return this.endOf(an)<sn(At)},Pt.$g=function(At,an,ot){return rn.u(At)?this[an]:this.set(ot,At)},Pt.unix=function(){return Math.floor(this.valueOf()/1e3)},Pt.valueOf=function(){return this.$d.getTime()},Pt.startOf=function(At,an){var ot=this,Mt=!!rn.u(an)||an,cn=rn.p(At),bn=function(Tn,Tt){var tn=rn.w(ot.$u?Date.UTC(ot.$y,Tt,Tn):new Date(ot.$y,Tt,Tn),ot);return Mt?tn:tn.endOf(ne)},Pe=function(Tn,Tt){return rn.w(ot.toDate()[Tn].apply(ot.toDate("s"),(Mt?[0,0,0,0]:[23,59,59,999]).slice(Tt)),ot)},at=this.$W,rt=this.$M,yt=this.$D,ln="set"+(this.$u?"UTC":"");switch(cn){case K:return Mt?bn(1,0):bn(31,11);case te:return Mt?bn(1,rt):bn(0,rt+1);case ie:var Rn=this.$locale().weekStart||0,Xt=(at<Rn?at+7:at)-Rn;return bn(Mt?yt-Xt:yt+(6-Xt),rt);case ne:case de:return Pe(ln+"Hours",0);case ee:return Pe(ln+"Minutes",1);case Z:return Pe(ln+"Seconds",2);case G:return Pe(ln+"Milliseconds",3);default:return this.clone()}},Pt.endOf=function(At){return this.startOf(At,!1)},Pt.$set=function(At,an){var ot,Mt=rn.p(At),cn="set"+(this.$u?"UTC":""),bn=(ot={},ot[ne]=cn+"Date",ot[de]=cn+"Date",ot[te]=cn+"Month",ot[K]=cn+"FullYear",ot[ee]=cn+"Hours",ot[Z]=cn+"Minutes",ot[G]=cn+"Seconds",ot[R]=cn+"Milliseconds",ot)[Mt],Pe=Mt===ne?this.$D+(an-this.$W):an;if(Mt===te||Mt===K){var at=this.clone().set(de,1);at.$d[bn](Pe),at.init(),this.$d=at.set(de,Math.min(this.$D,at.daysInMonth())).$d}else bn&&this.$d[bn](Pe);return this.init(),this},Pt.set=function(At,an){return this.clone().$set(At,an)},Pt.get=function(At){return this[rn.p(At)]()},Pt.add=function(At,an){var ot,Mt=this;At=Number(At);var cn=rn.p(an),bn=function(rt){var yt=sn(Mt);return rn.w(yt.date(yt.date()+Math.round(rt*At)),Mt)};if(cn===te)return this.set(te,this.$M+At);if(cn===K)return this.set(K,this.$y+At);if(cn===ne)return bn(1);if(cn===ie)return bn(7);var Pe=(ot={},ot[Z]=W,ot[ee]=I,ot[G]=M,ot)[cn]||1,at=this.$d.getTime()+At*Pe;return rn.w(at,this)},Pt.subtract=function(At,an){return this.add(-1*At,an)},Pt.format=function(At){var an=this,ot=this.$locale();if(!this.isValid())return ot.invalidDate||ae;var Mt=At||"YYYY-MM-DDTHH:mm:ssZ",cn=rn.z(this),bn=this.$H,Pe=this.$m,at=this.$M,rt=ot.weekdays,yt=ot.months,ln=function(Tt,tn,Qn,oi){return Tt&&(Tt[tn]||Tt(an,Mt))||Qn[tn].slice(0,oi)},Rn=function(Tt){return rn.s(bn%12||12,Tt,"0")},Xt=ot.meridiem||function(Tt,tn,Qn){var oi=Tt<12?"AM":"PM";return Qn?oi.toLowerCase():oi},Tn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:at+1,MM:rn.s(at+1,2,"0"),MMM:ln(ot.monthsShort,at,yt,3),MMMM:ln(yt,at),D:this.$D,DD:rn.s(this.$D,2,"0"),d:String(this.$W),dd:ln(ot.weekdaysMin,this.$W,rt,2),ddd:ln(ot.weekdaysShort,this.$W,rt,3),dddd:rt[this.$W],H:String(bn),HH:rn.s(bn,2,"0"),h:Rn(1),hh:Rn(2),a:Xt(bn,Pe,!0),A:Xt(bn,Pe,!1),m:String(Pe),mm:rn.s(Pe,2,"0"),s:String(this.$s),ss:rn.s(this.$s,2,"0"),SSS:rn.s(this.$ms,3,"0"),Z:cn};return Mt.replace(Me,function(Tt,tn){return tn||Tn[Tt]||cn.replace(":","")})},Pt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Pt.diff=function(At,an,ot){var Mt,cn=rn.p(an),bn=sn(At),Pe=(bn.utcOffset()-this.utcOffset())*W,at=this-bn,rt=rn.m(this,bn);return rt=(Mt={},Mt[K]=rt/12,Mt[te]=rt,Mt[B]=rt/3,Mt[ie]=(at-Pe)/6048e5,Mt[ne]=(at-Pe)/864e5,Mt[ee]=at/I,Mt[Z]=at/W,Mt[G]=at/M,Mt)[cn]||at,ot?rt:rn.a(rt)},Pt.daysInMonth=function(){return this.endOf(te).$D},Pt.$locale=function(){return gt[this.$L]},Pt.locale=function(At,an){if(!At)return this.$L;var ot=this.clone(),Mt=_t(At,an,!0);return Mt&&(ot.$L=Mt),ot},Pt.clone=function(){return rn.w(this.$d,this)},Pt.toDate=function(){return new Date(this.valueOf())},Pt.toJSON=function(){return this.isValid()?this.toISOString():null},Pt.toISOString=function(){return this.$d.toISOString()},Pt.toString=function(){return this.$d.toUTCString()},Ft}(),qn=on.prototype;return sn.prototype=qn,[["$ms",R],["$s",G],["$m",Z],["$H",ee],["$W",ne],["$M",te],["$y",K],["$D",de]].forEach(function(Ft){qn[Ft[1]]=function(Pt){return this.$g(Pt,Ft[0],Ft[1])}}),sn.extend=function(Ft,Pt){return Ft.$i||(Ft(Pt,on,sn),Ft.$i=!0),sn},sn.locale=_t,sn.isDayjs=Ut,sn.unix=function(Ft){return sn(1e3*Ft)},sn.en=gt[Ye],sn.Ls=gt,sn.p={},sn})}),O={formatDateTime:function(z){return D(z).format("YYYY-MM-DD HH:mm:ss")},formatDate:function(z){return D(z).format("YYYY-MM-DD")},formatDateHours:function(z){return D(z).format("YYYY-MM-DD HH:mm")},formatDayHours:function(z){return D(z).format("MM-DD HH:mm")},formatHours:function(z){return D(z).format("HH:mm")},formatMinute:function(z){return D(z).format("HH:mm:ss")},formatSecond:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=0,W=0,I=0;function R(ee){return I=Math.floor(ee/3600),ee-I*3600}function G(ee){return W=Math.floor(ee/60),ee-W*60}function Z(ee){return M=ee,M}return Z(G(R(z))),"".concat(I?I+"h":"").concat(W?W+"m":"").concat(M?M+"s":"")||"0s"}},H={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},V=function(){function P(){n(this,P),this.fakeHandler=null}return s(P,[{key:"copy",value:function(M,W){var I=this;this.removeFake(),this.fakeHandlerCallback=function(){return I.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px";var R=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top="".concat(R,"px"),this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=M,document.body.appendChild(this.fakeElem),this.fakeElem.select(),this.copyText(W)}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"copyText",value:function(M){var W;try{W=document.execCommand("copy")}catch{W=!1}M&&M(W)}}]),P}(),X=function(){function P(z,M,W){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;n(this,P),"indexedDB"in window?(this._storeName=W,this._version=M,this._database=z,this._openLog=I):console.log("This browser doesn't support IndexedDB")}return s(P,[{key:"open",value:function(){var M=this;return new Promise(function(W,I){try{var R=M;if(R._db)return W(R._db);var G=indexedDB.open(R._database,R._version);G.onsuccess=function(){R._db=G.result,R._db.onversionchange=function(Z){console.log("onversionchange",Z)},W(G.result),console.log("Open indexedDB success!")},G.onupgradeneeded=function(Z){console.log("openDb.onupgradeneeded",Z),R._db=G.result,R._db.objectStoreNames.contains(R._storeName)||R._db.createObjectStore(R._storeName),W(G.result)},G.onblocked=function(Z){console.log("openDb onblocked",Z)},G.onerror=function(Z){console.log("Maybe you not allow my web app to use IndexedDB!"),I(Z)}}catch(Z){console.error(Z),I(Z)}})}},{key:"getObjectStore",value:function(M,W){if(this._db){var I=this._db.transaction([M],W);return I.objectStore(M)}return null}},{key:"add",value:function(M,W){return this.wrapStoreOperationPromise(function(I){return I.add(M,W)})}},{key:"set",value:function(M,W){return this.log("IndexedDB set",M,W),this.wrapStoreOperationPromise(function(I){return I.put(W,M)})}},{key:"get",value:function(M){return this.log("IndexedDB get",M),this.wrapStoreOperationPromise(function(W){return W.get(M)})}},{key:"delete",value:function(M){return this.wrapStoreOperationPromise(function(W){return W.delete(M)})}},{key:"clear",value:function(){return this.wrapStoreOperationPromise(function(M){return M.clear()})}},{key:"getStore",value:function(){return this.getObjectStore(this._storeName,"readwrite")}},{key:"wrapStoreOperationPromise",value:function(M){var W=this;return new Promise(function(I,R){try{var G=W.getObjectStore(W._storeName,"readwrite");if(G){var Z=M(G);Z.onsuccess=function(ee){return I(ee.target.result)},Z.onerror=function(ee){return R(ee)}}}catch(ee){console.error(ee),R(ee)}})}},{key:"log",value:function(){if(this._openLog){var M;(M=console).log.apply(M,arguments)}}}]),P}(),$={set:function(z,M){if(M==null)delete window.localStorage[z];else{var W=t(M)==="object"?JSON.stringify(M):M;window.localStorage[z]=W}},get:function(z){var M=window.localStorage[z]||"";try{return E.isJSONStr(M)?JSON.parse(M):M}catch{return M}},remove:function(z){delete window.localStorage[z]},clear:function(){window.localStorage.clear()}};return B_.Cookie=k,B_.CopyUtils=V,B_.DateTime=O,B_.Layout=H,B_.LocalDB=$,B_.LocalIndexedDB=X,B_.Utils=E,B_}var une=Wfe();const MP="mo";function Ni(r,e=MP){return r?`${e}-${r}`:""}function ni(...r){if(Is.isEmpty(r))return;const e=[];for(const t of r){if(!t)continue;const n=typeof t;if(n==="string"||n==="number"){e.push(`${t}`);continue}if(n==="object"){if(t.toString!==Object.prototype.toString){e.push(t.toString());continue}for(const i in t)Object.hasOwnProperty.call(t,i)&&t[i]&&e.push(i)}}return e.join(" ")}function Ht(r,e){return`${r}__${e}`}function si(r,e){return`${r}--${e}`}function cne(){return une.Utils.isMacOs()?"mac":""}var kz=sne();const Gw=Rm(kz),Vfe=rne({__proto__:null,default:Gw},[kz]),RP=Object.assign({},Vfe);let mM;const _M=Symbol("__molecule__root");kz.version.startsWith("18")&&(mM=RP.createRoot);function jq(r){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:e}=RP;e&&typeof e=="object"&&(e.usingClientEntryPoint=r)}const vM=(r,e)=>{if(mM){jq(!0);const t=e[_M]||mM(e);jq(!1),t.render(r),e[_M]=t;return}RP.render(r,e)},dne=r=>{var e;return mM?((e=r[_M])===null||e===void 0||e.unmount(),Reflect.deleteProperty(r,_M),!0):RP.unmountComponentAtNode(r)},kE=document.querySelector.bind(document);document.querySelectorAll.bind(document);function Hfe(){const r=document.body,e=document.documentElement,t=e.clientWidth,n=e.clientHeight,i=Math.max(r.scrollHeight,r.offsetHeight,n,e.scrollHeight,e.offsetHeight),s=Math.max(r.scrollWidth,r.offsetWidth,t,e.scrollWidth,e.offsetWidth);return{height:i,width:s,clientWidth:t,clientHeight:n}}function hne(r,e){const{clientWidth:t,clientHeight:n}=Hfe(),i=e.x,s=e.y,o=t-i,a=n-s,l=r.offsetHeight,u=r.offsetWidth,d=o<u?i-u:i,h=a<l?s-l:s;return{x:d,y:h}}function bM(r){return{x:r.clientX,y:r.clientY}}function fne(r){switch(r){case"click":return"onClick";case"hover":return"onMouseOver";case"contextmenu":return"onContextMenu";default:return r}}function qq(r,e){let t=e.x,n=e.y;return r==="top"?n=e.y-e.height:r==="right"?t=e.x+e.width:r==="bottom"?n=e.y+e.height:r==="left"?t=e.x-e.width:r==="rightBottom"&&(t=e.x+e.width,n=e.y+e.height),{x:t,y:n}}function tA(r,e){return r.getAttribute(e)||""}function Yw(r){return Object.keys(r).reduce((e,t)=>(t.startsWith("data-")&&(e[t]=r[t]),e),{})}function Kq(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zfe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(t),!0).forEach(function(n){Ufe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kq(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ufe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Gq(r,e){return $fe(r)||jfe(r,e)||qfe(r,e)||Kfe()}function $fe(r){if(Array.isArray(r))return r}function jfe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,s=!1,o,a;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function qfe(r,e){if(r){if(typeof r=="string")return Yq(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yq(r,e)}}function Yq(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Kfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gne(r,e){return e={exports:{}},r(e,e.exports),e.exports}var c3=gne(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,p=2,v=4,C=1,S=2,E=1,k=2,D=4,O=8,H=16,V=32,X=64,$=128,P=256,z=512,M=30,W="...",I=800,R=16,G=1,Z=2,ee=3,ne=1/0,ie=9007199254740991,te=17976931348623157e292,B=0/0,K=4294967295,de=K-1,ae=K>>>1,De=[["ary",$],["bind",E],["bindKey",k],["curry",O],["curryRight",H],["flip",z],["partial",V],["partialRight",X],["rearg",P]],Me="[object Arguments]",Qe="[object Array]",ct="[object AsyncFunction]",Rt="[object Boolean]",Ye="[object Date]",gt="[object DOMException]",Ut="[object Error]",_t="[object Function]",sn="[object GeneratorFunction]",rn="[object Map]",on="[object Number]",qn="[object Null]",Ft="[object Object]",Pt="[object Promise]",At="[object Proxy]",an="[object RegExp]",ot="[object Set]",Mt="[object String]",cn="[object Symbol]",bn="[object Undefined]",Pe="[object WeakMap]",at="[object WeakSet]",rt="[object ArrayBuffer]",yt="[object DataView]",ln="[object Float32Array]",Rn="[object Float64Array]",Xt="[object Int8Array]",Tn="[object Int16Array]",Tt="[object Int32Array]",tn="[object Uint8Array]",Qn="[object Uint8ClampedArray]",oi="[object Uint16Array]",lt="[object Uint32Array]",Bs=/\b__p \+= '';/g,fi=/\b(__p \+=) '' \+/g,Ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bs=/&(?:amp|lt|gt|quot|#39);/g,Kn=/[&<>"']/g,Pr=RegExp(bs.source),Sa=RegExp(Kn.source),Oi=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,vo=/<%=([\s\S]+?)%>/g,Ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ve=/^\w*$/,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/[\\^$.*+?()[\]{}|]/g,me=RegExp(ge.source),Le=/^\s+/,oe=/\s/,Te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,et=/,? & /,Ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dn=/[()=,{}\[\]\/\s]/,N=/\\(\\)?/g,q=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,le=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,be=/^\[object .+?Constructor\]$/,qe=/^0o[0-7]+$/i,it=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kt=/($^)/,fn=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",pn="\\u0300-\\u036f",Zt="\\ufe20-\\ufe2f",Ui="\\u20d0-\\u20ff",_i=pn+Zt+Ui,jr="\\u2700-\\u27bf",pr="a-z\\xdf-\\xf6\\xf8-\\xff",Ka="\\xac\\xb1\\xd7\\xf7",bo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tp="\\u2000-\\u206f",Vu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",e0="A-Z\\xc0-\\xd6\\xd8-\\xde",t0="\\ufe0e\\ufe0f",n0=Ka+bo+tp+Vu,Kd="[']",np="["+Yt+"]",Rh="["+n0+"]",fc="["+_i+"]",i0="\\d+",ny="["+jr+"]",ip="["+pr+"]",Hm="[^"+Yt+n0+i0+jr+pr+e0+"]",gc="\\ud83c[\\udffb-\\udfff]",rp="(?:"+fc+"|"+gc+")",Hf="[^"+Yt+"]",Ph="(?:\\ud83c[\\udde6-\\uddff]){2}",Er="[\\ud800-\\udbff][\\udc00-\\udfff]",uu="["+e0+"]",sp="\\u200d",zf="(?:"+ip+"|"+Hm+")",r0="(?:"+uu+"|"+Hm+")",zm="(?:"+Kd+"(?:d|ll|m|re|s|t|ve))?",Um="(?:"+Kd+"(?:D|LL|M|RE|S|T|VE))?",op=rp+"?",Uf="["+t0+"]?",Yc="(?:"+sp+"(?:"+[Hf,Ph,Er].join("|")+")"+Uf+op+")*",Zc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qc=Uf+op+Yc,ap="(?:"+[ny,Ph,Er].join("|")+")"+Qc,Jc="(?:"+[Hf+fc+"?",fc,Ph,Er,np].join("|")+")",$m=RegExp(Kd,"g"),s0=RegExp(fc,"g"),ed=RegExp(gc+"(?="+gc+")|"+Jc+Qc,"g"),Kb=RegExp([uu+"?"+ip+"+"+zm+"(?="+[Rh,uu,"$"].join("|")+")",r0+"+"+Um+"(?="+[Rh,uu+zf,"$"].join("|")+")",uu+"?"+zf+"+"+zm,uu+"+"+Um,Xc,Zc,i0,ap].join("|"),"g"),o0=RegExp("["+sp+Yt+_i+t0+"]"),$f=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gb=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yb=-1,ai={};ai[ln]=ai[Rn]=ai[Xt]=ai[Tn]=ai[Tt]=ai[tn]=ai[Qn]=ai[oi]=ai[lt]=!0,ai[Me]=ai[Qe]=ai[rt]=ai[Rt]=ai[yt]=ai[Ye]=ai[Ut]=ai[_t]=ai[rn]=ai[on]=ai[Ft]=ai[an]=ai[ot]=ai[Mt]=ai[Pe]=!1;var ei={};ei[Me]=ei[Qe]=ei[rt]=ei[yt]=ei[Rt]=ei[Ye]=ei[ln]=ei[Rn]=ei[Xt]=ei[Tn]=ei[Tt]=ei[rn]=ei[on]=ei[Ft]=ei[an]=ei[ot]=ei[Mt]=ei[cn]=ei[tn]=ei[Qn]=ei[oi]=ei[lt]=!0,ei[Ut]=ei[_t]=ei[Pe]=!1;var Hu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},lp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},iy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jm=parseFloat,up=parseInt,jf=typeof oE=="object"&&oE&&oE.Object===Object&&oE,a0=typeof self=="object"&&self&&self.Object===Object&&self,Gi=jf||a0||Function("return this")(),Fh=e&&!e.nodeType&&e,La=Fh&&!0&&r&&!r.nodeType&&r,cp=La&&La.exports===Fh,Gd=cp&&jf.process,Cs=function(){try{var _e=La&&La.require&&La.require("util").types;return _e||Gd&&Gd.binding&&Gd.binding("util")}catch{}}(),qm=Cs&&Cs.isArrayBuffer,Ga=Cs&&Cs.isDate,pc=Cs&&Cs.isMap,dp=Cs&&Cs.isRegExp,Bh=Cs&&Cs.isSet,l0=Cs&&Cs.isTypedArray;function hs(_e,Ne,Ee){switch(Ee.length){case 0:return _e.call(Ne);case 1:return _e.call(Ne,Ee[0]);case 2:return _e.call(Ne,Ee[0],Ee[1]);case 3:return _e.call(Ne,Ee[0],Ee[1],Ee[2])}return _e.apply(Ne,Ee)}function u0(_e,Ne,Ee,bt){for(var dn=-1,Wn=_e==null?0:_e.length;++dn<Wn;){var ir=_e[dn];Ne(bt,ir,Ee(ir),_e)}return bt}function gi(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length;++Ee<bt&&Ne(_e[Ee],Ee,_e)!==!1;);return _e}function qr(_e,Ne){for(var Ee=_e==null?0:_e.length;Ee--&&Ne(_e[Ee],Ee,_e)!==!1;);return _e}function Km(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length;++Ee<bt;)if(!Ne(_e[Ee],Ee,_e))return!1;return!0}function Ya(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length,dn=0,Wn=[];++Ee<bt;){var ir=_e[Ee];Ne(ir,Ee,_e)&&(Wn[dn++]=ir)}return Wn}function Wh(_e,Ne){var Ee=_e==null?0:_e.length;return!!Ee&&cu(_e,Ne,0)>-1}function hp(_e,Ne,Ee){for(var bt=-1,dn=_e==null?0:_e.length;++bt<dn;)if(Ee(Ne,_e[bt]))return!0;return!1}function vi(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length,dn=Array(bt);++Ee<bt;)dn[Ee]=Ne(_e[Ee],Ee,_e);return dn}function Za(_e,Ne){for(var Ee=-1,bt=Ne.length,dn=_e.length;++Ee<bt;)_e[dn+Ee]=Ne[Ee];return _e}function qf(_e,Ne,Ee,bt){var dn=-1,Wn=_e==null?0:_e.length;for(bt&&Wn&&(Ee=_e[++dn]);++dn<Wn;)Ee=Ne(Ee,_e[dn],dn,_e);return Ee}function ry(_e,Ne,Ee,bt){var dn=_e==null?0:_e.length;for(bt&&dn&&(Ee=_e[--dn]);dn--;)Ee=Ne(Ee,_e[dn],dn,_e);return Ee}function ao(_e,Ne){for(var Ee=-1,bt=_e==null?0:_e.length;++Ee<bt;)if(Ne(_e[Ee],Ee,_e))return!0;return!1}var c0=Kf("length");function Yd(_e){return _e.split("")}function Xb(_e){return _e.match(Ot)||[]}function fp(_e,Ne,Ee){var bt;return Ee(_e,function(dn,Wn,ir){if(Ne(dn,Wn,ir))return bt=Wn,!1}),bt}function Yo(_e,Ne,Ee,bt){for(var dn=_e.length,Wn=Ee+(bt?1:-1);bt?Wn--:++Wn<dn;)if(Ne(_e[Wn],Wn,_e))return Wn;return-1}function cu(_e,Ne,Ee){return Ne===Ne?mp(_e,Ne,Ee):Yo(_e,Ym,Ee)}function Gm(_e,Ne,Ee,bt){for(var dn=Ee-1,Wn=_e.length;++dn<Wn;)if(bt(_e[dn],Ne))return dn;return-1}function Ym(_e){return _e!==_e}function Zm(_e,Ne){var Ee=_e==null?0:_e.length;return Ee?Ea(_e,Ne)/Ee:B}function Kf(_e){return function(Ne){return Ne==null?t:Ne[_e]}}function Vh(_e){return function(Ne){return _e==null?t:_e[Ne]}}function Xa(_e,Ne,Ee,bt,dn){return dn(_e,function(Wn,ir,li){Ee=bt?(bt=!1,Wn):Ne(Ee,Wn,ir,li)}),Ee}function sy(_e,Ne){var Ee=_e.length;for(_e.sort(Ne);Ee--;)_e[Ee]=_e[Ee].value;return _e}function Ea(_e,Ne){for(var Ee,bt=-1,dn=_e.length;++bt<dn;){var Wn=Ne(_e[bt]);Wn!==t&&(Ee=Ee===t?Wn:Ee+Wn)}return Ee}function gp(_e,Ne){for(var Ee=-1,bt=Array(_e);++Ee<_e;)bt[Ee]=Ne(Ee);return bt}function Qb(_e,Ne){return vi(Ne,function(Ee){return[Ee,_e[Ee]]})}function mc(_e){return _e&&_e.slice(0,_p(_e)+1).replace(Le,"")}function ts(_e){return function(Ne){return _e(Ne)}}function td(_e,Ne){return vi(Ne,function(Ee){return _e[Ee]})}function cr(_e,Ne){return _e.has(Ne)}function _c(_e,Ne){for(var Ee=-1,bt=_e.length;++Ee<bt&&cu(Ne,_e[Ee],0)>-1;);return Ee}function Gf(_e,Ne){for(var Ee=_e.length;Ee--&&cu(Ne,_e[Ee],0)>-1;);return Ee}function Jb(_e,Ne){for(var Ee=_e.length,bt=0;Ee--;)_e[Ee]===Ne&&++bt;return bt}var Xm=Vh(Hu),e1=Vh(lp);function t1(_e){return"\\"+iy[_e]}function Yf(_e,Ne){return _e==null?t:_e[Ne]}function du(_e){return o0.test(_e)}function Qm(_e){return $f.test(_e)}function Zf(_e){for(var Ne,Ee=[];!(Ne=_e.next()).done;)Ee.push(Ne.value);return Ee}function Xf(_e){var Ne=-1,Ee=Array(_e.size);return _e.forEach(function(bt,dn){Ee[++Ne]=[dn,bt]}),Ee}function pp(_e,Ne){return function(Ee){return _e(Ne(Ee))}}function Co(_e,Ne){for(var Ee=-1,bt=_e.length,dn=0,Wn=[];++Ee<bt;){var ir=_e[Ee];(ir===Ne||ir===d)&&(_e[Ee]=d,Wn[dn++]=Ee)}return Wn}function Fl(_e){var Ne=-1,Ee=Array(_e.size);return _e.forEach(function(bt){Ee[++Ne]=bt}),Ee}function d0(_e){var Ne=-1,Ee=Array(_e.size);return _e.forEach(function(bt){Ee[++Ne]=[bt,bt]}),Ee}function mp(_e,Ne,Ee){for(var bt=Ee-1,dn=_e.length;++bt<dn;)if(_e[bt]===Ne)return bt;return-1}function oy(_e,Ne,Ee){for(var bt=Ee+1;bt--;)if(_e[bt]===Ne)return bt;return bt}function fl(_e){return du(_e)?gl(_e):c0(_e)}function Ns(_e){return du(_e)?Jm(_e):Yd(_e)}function _p(_e){for(var Ne=_e.length;Ne--&&oe.test(_e.charAt(Ne)););return Ne}var h0=Vh(Zb);function gl(_e){for(var Ne=ed.lastIndex=0;ed.test(_e);)++Ne;return Ne}function Jm(_e){return _e.match(ed)||[]}function vp(_e){return _e.match(Kb)||[]}var n1=function _e(Ne){Ne=Ne==null?Gi:hu.defaults(Gi.Object(),Ne,hu.pick(Gi,Gb));var Ee=Ne.Array,bt=Ne.Date,dn=Ne.Error,Wn=Ne.Function,ir=Ne.Math,li=Ne.Object,nd=Ne.RegExp,i1=Ne.String,Ur=Ne.TypeError,Qa=Ee.prototype,f0=Wn.prototype,Ja=li.prototype,id=Ne["__core-js_shared__"],Bl=f0.toString,On=Ja.hasOwnProperty,Hh=0,bp=function(){var c=/[^.]+$/.exec(id&&id.keys&&id.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Zd=Ja.toString,e_=Bl.call(li),r1=Gi._,s1=nd("^"+Bl.call(On).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wl=cp?Ne.Buffer:t,je=Ne.Symbol,Lt=Ne.Uint8Array,ft=Wl?Wl.allocUnsafe:t,Cn=pp(li.getPrototypeOf,li),Ci=li.create,mr=Ja.propertyIsEnumerable,As=Qa.splice,Kr=je?je.isConcatSpreadable:t,el=je?je.iterator:t,Vl=je?je.toStringTag:t,Mo=function(){try{var c=_a(li,"defineProperty");return c({},"",{}),c}catch{}}(),Cp=Ne.clearTimeout!==Gi.clearTimeout&&Ne.clearTimeout,Os=bt&&bt.now!==Gi.Date.now&&bt.now,Xd=Ne.setTimeout!==Gi.setTimeout&&Ne.setTimeout,Hl=ir.ceil,pl=ir.floor,Cr=li.getOwnPropertySymbols,g0=Wl?Wl.isBuffer:t,Qd=Ne.isFinite,zh=Qa.join,Qf=pp(li.keys,li),rr=ir.max,Fr=ir.min,t_=bt.now,rd=Ne.parseInt,sd=ir.random,yp=Qa.reverse,vc=_a(Ne,"DataView"),fu=_a(Ne,"Map"),Jd=_a(Ne,"Promise"),xa=_a(Ne,"Set"),bc=_a(Ne,"WeakMap"),ml=_a(li,"create"),zl=bc&&new bc,_l={},p0=Oa(vc),eh=Oa(fu),o1=Oa(Jd),od=Oa(xa),Ul=Oa(bc),$l=je?je.prototype:t,ua=$l?$l.valueOf:t,Jf=$l?$l.toString:t;function j(c){if(ji(c)&&!_n(c)&&!(c instanceof En)){if(c instanceof Wi)return c;if(On.call(c,"__wrapped__"))return Hp(c)}return new Wi(c)}var zu=function(){function c(){}return function(f){if(!Mi(f))return{};if(Ci)return Ci(f);c.prototype=f;var b=new c;return c.prototype=t,b}}();function Br(){}function Wi(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}j.templateSettings={escape:Oi,evaluate:vt,interpolate:vo,variable:"",imports:{_:j}},j.prototype=Br.prototype,j.prototype.constructor=j,Wi.prototype=zu(Br.prototype),Wi.prototype.constructor=Wi;function En(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function n_(){var c=new En(this.__wrapped__);return c.__actions__=Zi(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Zi(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Zi(this.__views__),c}function i_(){if(this.__filtered__){var c=new En(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function eg(){var c=this.__wrapped__.value(),f=this.__dir__,b=_n(c),x=f<0,F=b?c.length:0,Y=Pp(0,F,this.__views__),re=Y.start,ue=Y.end,ve=ue-re,Fe=x?ue:re-1,Be=this.__iteratees__,Ue=Be.length,ht=0,Nt=Fr(ve,this.__takeCount__);if(!b||!x&&F==ve&&Nt==ve)return Xh(c,this.__actions__);var Qt=[];e:for(;ve--&&ht<Nt;){Fe+=f;for(var Ln=-1,Jt=c[Fe];++Ln<Ue;){var An=Be[Ln],Hn=An.iteratee,Zs=An.type,_s=Hn(Jt);if(Zs==Z)Jt=_s;else if(!_s){if(Zs==G)continue e;break e}}Qt[ht++]=Jt}return Qt}En.prototype=zu(Br.prototype),En.prototype.constructor=En;function Js(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function Gr(){this.__data__=ml?ml(null):{},this.size=0}function ns(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function jl(c){var f=this.__data__;if(ml){var b=f[c];return b===l?t:b}return On.call(f,c)?f[c]:t}function yo(c){var f=this.__data__;return ml?f[c]!==t:On.call(f,c)}function Zo(c,f){var b=this.__data__;return this.size+=this.has(c)?0:1,b[c]=ml&&f===t?l:f,this}Js.prototype.clear=Gr,Js.prototype.delete=ns,Js.prototype.get=jl,Js.prototype.has=yo,Js.prototype.set=Zo;function ys(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function Uu(){this.__data__=[],this.size=0}function vl(c){var f=this.__data__,b=Po(f,c);if(b<0)return!1;var x=f.length-1;return b==x?f.pop():As.call(f,b,1),--this.size,!0}function r_(c){var f=this.__data__,b=Po(f,c);return b<0?t:f[b][1]}function a1(c){return Po(this.__data__,c)>-1}function l1(c,f){var b=this.__data__,x=Po(b,c);return x<0?(++this.size,b.push([c,f])):b[x][1]=f,this}ys.prototype.clear=Uu,ys.prototype.delete=vl,ys.prototype.get=r_,ys.prototype.has=a1,ys.prototype.set=l1;function wo(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var x=c[f];this.set(x[0],x[1])}}function wp(){this.size=0,this.__data__={hash:new Js,map:new(fu||ys),string:new Js}}function ql(c){var f=Qu(this,c).delete(c);return this.size-=f?1:0,f}function Sp(c){return Qu(this,c).get(c)}function Ce(c){return Qu(this,c).has(c)}function Uh(c,f){var b=Qu(this,c),x=b.size;return b.set(c,f),this.size+=b.size==x?0:1,this}wo.prototype.clear=wp,wo.prototype.delete=ql,wo.prototype.get=Sp,wo.prototype.has=Ce,wo.prototype.set=Uh;function Da(c){var f=-1,b=c==null?0:c.length;for(this.__data__=new wo;++f<b;)this.add(c[f])}function Ro(c){return this.__data__.set(c,l),this}function $i(c){return this.__data__.has(c)}Da.prototype.add=Da.prototype.push=Ro,Da.prototype.has=$i;function ws(c){var f=this.__data__=new ys(c);this.size=f.size}function s_(){this.__data__=new ys,this.size=0}function o_(c){var f=this.__data__,b=f.delete(c);return this.size=f.size,b}function Xo(c){return this.__data__.get(c)}function gu(c){return this.__data__.has(c)}function $h(c,f){var b=this.__data__;if(b instanceof ys){var x=b.__data__;if(!fu||x.length<i-1)return x.push([c,f]),this.size=++b.size,this;b=this.__data__=new wo(x)}return b.set(c,f),this.size=b.size,this}ws.prototype.clear=s_,ws.prototype.delete=o_,ws.prototype.get=Xo,ws.prototype.has=gu,ws.prototype.set=$h;function $u(c,f){var b=_n(c),x=!b&&tc(c),F=!b&&!x&&eu(c),Y=!b&&!x&&!F&&Sd(c),re=b||x||F||Y,ue=re?gp(c.length,i1):[],ve=ue.length;for(var Fe in c)(f||On.call(c,Fe))&&!(re&&(Fe=="length"||F&&(Fe=="offset"||Fe=="parent")||Y&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||Nr(Fe,ve)))&&ue.push(Fe);return ue}function ju(c){var f=c.length;return f?c[vu(0,f-1)]:t}function jh(c,f){return rf(Zi(c),tl(f,0,c.length))}function Cc(c){return rf(Zi(c))}function qh(c,f,b){(b!==t&&!Do(c[f],b)||b===t&&!(f in c))&&Qo(c,f,b)}function qu(c,f,b){var x=c[f];(!(On.call(c,f)&&Do(x,b))||b===t&&!(f in c))&&Qo(c,f,b)}function Po(c,f){for(var b=c.length;b--;)if(Do(c[b][0],f))return b;return-1}function Kl(c,f,b,x){return fs(c,function(F,Y,re){f(x,F,b(F),re)}),x}function Ss(c,f){return c&&ms(f,Dr(f),c)}function Fo(c,f){return c&&ms(f,ui(f),c)}function Qo(c,f,b){f=="__proto__"&&Mo?Mo(c,f,{configurable:!0,enumerable:!0,value:b,writable:!0}):c[f]=b}function tg(c,f){for(var b=-1,x=f.length,F=Ee(x),Y=c==null;++b<x;)F[b]=Y?t:P_(c,f[b]);return F}function tl(c,f,b){return c===c&&(b!==t&&(c=c<=b?c:b),f!==t&&(c=c>=f?c:f)),c}function Ms(c,f,b,x,F,Y){var re,ue=f&h,ve=f&p,Fe=f&v;if(b&&(re=F?b(c,x,F,Y):b(c)),re!==t)return re;if(!Mi(c))return c;var Be=_n(c);if(Be){if(re=Ql(c),!ue)return Zi(c,re)}else{var Ue=xr(c),ht=Ue==_t||Ue==sn;if(eu(c))return rh(c,ue);if(Ue==Ft||Ue==Me||ht&&!F){if(re=ve||ht?{}:Ho(c),!ue)return ve?f1(c,Fo(re,c)):lg(c,Ss(re,c))}else{if(!ei[Ue])return F?c:{};re=p1(c,Ue,ue)}}Y||(Y=new ws);var Nt=Y.get(c);if(Nt)return Nt;Y.set(c,re),gh(c)?c.forEach(function(Jt){re.add(Ms(Jt,f,b,Jt,c,Y))}):wy(c)&&c.forEach(function(Jt,An){re.set(An,Ms(Jt,f,b,An,c,Y))});var Qt=Fe?ve?tf:Xu:ve?ui:Dr,Ln=Be?t:Qt(c);return gi(Ln||c,function(Jt,An){Ln&&(An=Jt,Jt=c[An]),qu(re,An,Ms(Jt,f,b,An,c,Y))}),re}function u1(c){var f=Dr(c);return function(b){return pu(b,c,f)}}function pu(c,f,b){var x=b.length;if(c==null)return!x;for(c=li(c);x--;){var F=b[x],Y=f[F],re=c[F];if(re===t&&!(F in c)||!Y(re))return!1}return!0}function a_(c,f,b){if(typeof c!="function")throw new Ur(o);return kc(function(){c.apply(t,b)},f)}function bl(c,f,b,x){var F=-1,Y=Wh,re=!0,ue=c.length,ve=[],Fe=f.length;if(!ue)return ve;b&&(f=vi(f,ts(b))),x?(Y=hp,re=!1):f.length>=i&&(Y=cr,re=!1,f=new Da(f));e:for(;++F<ue;){var Be=c[F],Ue=b==null?Be:b(Be);if(Be=x||Be!==0?Be:0,re&&Ue===Ue){for(var ht=Fe;ht--;)if(f[ht]===Ue)continue e;ve.push(Be)}else Y(f,Ue,x)||ve.push(Be)}return ve}var fs=nl(eo),m0=nl(mu,!0);function Lp(c,f){var b=!0;return fs(c,function(x,F,Y){return b=!!f(x,F,Y),b}),b}function yc(c,f,b){for(var x=-1,F=c.length;++x<F;){var Y=c[x],re=f(Y);if(re!=null&&(ue===t?re===re&&!Ys(re):b(re,ue)))var ue=re,ve=Y}return ve}function c1(c,f,b,x){var F=c.length;for(b=Kt(b),b<0&&(b=-b>F?0:F+b),x=x===t||x>F?F:Kt(x),x<0&&(x+=F),x=b>x?0:to(x);b<x;)c[b++]=f;return c}function l_(c,f){var b=[];return fs(c,function(x,F,Y){f(x,F,Y)&&b.push(x)}),b}function Qi(c,f,b,x,F){var Y=-1,re=c.length;for(b||(b=Bp),F||(F=[]);++Y<re;){var ue=c[Y];f>0&&b(ue)?f>1?Qi(ue,f-1,b,x,F):Za(F,ue):x||(F[F.length]=ue)}return F}var Kh=ug(),ng=ug(!0);function eo(c,f){return c&&Kh(c,f,Dr)}function mu(c,f){return c&&ng(c,f,Dr)}function Gl(c,f){return Ya(f,function(b){return rl(c[b])})}function Jo(c,f){f=Wo(f,c);for(var b=0,x=f.length;c!=null&&b<x;)c=c[wr(f[b++])];return b&&b==x?c:t}function Ep(c,f,b){var x=f(c);return _n(c)?x:Za(x,b(c))}function Tr(c){return c==null?c===t?bn:qn:Vl&&Vl in li(c)?m_(c):Wp(c)}function wc(c,f){return c>f}function So(c,f){return c!=null&&On.call(c,f)}function ad(c,f){return c!=null&&f in li(c)}function ld(c,f,b){return c>=Fr(f,b)&&c<rr(f,b)}function ca(c,f,b){for(var x=b?hp:Wh,F=c[0].length,Y=c.length,re=Y,ue=Ee(Y),ve=1/0,Fe=[];re--;){var Be=c[re];re&&f&&(Be=vi(Be,ts(f))),ve=Fr(Be.length,ve),ue[re]=!b&&(f||F>=120&&Be.length>=120)?new Da(re&&Be):t}Be=c[0];var Ue=-1,ht=ue[0];e:for(;++Ue<F&&Fe.length<ve;){var Nt=Be[Ue],Qt=f?f(Nt):Nt;if(Nt=b||Nt!==0?Nt:0,!(ht?cr(ht,Qt):x(Fe,Qt,b))){for(re=Y;--re;){var Ln=ue[re];if(!(Ln?cr(Ln,Qt):x(c[re],Qt,b)))continue e}ht&&ht.push(Qt),Fe.push(Nt)}}return Fe}function ud(c,f,b,x){return eo(c,function(F,Y,re){f(x,b(F),Y,re)}),x}function da(c,f,b){f=Wo(f,c),c=yr(c,f);var x=c==null?c:c[wr(Es(f))];return x==null?t:hs(x,c,b)}function ig(c){return ji(c)&&Tr(c)==Me}function rg(c){return ji(c)&&Tr(c)==rt}function Ia(c){return ji(c)&&Tr(c)==Ye}function ha(c,f,b,x,F){return c===f?!0:c==null||f==null||!ji(c)&&!ji(f)?c!==c&&f!==f:u_(c,f,b,x,ha,F)}function u_(c,f,b,x,F,Y){var re=_n(c),ue=_n(f),ve=re?Qe:xr(c),Fe=ue?Qe:xr(f);ve=ve==Me?Ft:ve,Fe=Fe==Me?Ft:Fe;var Be=ve==Ft,Ue=Fe==Ft,ht=ve==Fe;if(ht&&eu(c)){if(!eu(f))return!1;re=!0,Be=!1}if(ht&&!Be)return Y||(Y=new ws),re||Sd(c)?Rp(c,f,b,x,F,Y):L0(c,f,ve,b,x,F,Y);if(!(b&C)){var Nt=Be&&On.call(c,"__wrapped__"),Qt=Ue&&On.call(f,"__wrapped__");if(Nt||Qt){var Ln=Nt?c.value():c,Jt=Qt?f.value():f;return Y||(Y=new ws),F(Ln,Jt,b,x,Y)}}return ht?(Y||(Y=new ws),E0(c,f,b,x,F,Y)):!1}function xp(c){return ji(c)&&xr(c)==rn}function th(c,f,b,x){var F=b.length,Y=F,re=!x;if(c==null)return!Y;for(c=li(c);F--;){var ue=b[F];if(re&&ue[2]?ue[1]!==c[ue[0]]:!(ue[0]in c))return!1}for(;++F<Y;){ue=b[F];var ve=ue[0],Fe=c[ve],Be=ue[1];if(re&&ue[2]){if(Fe===t&&!(ve in c))return!1}else{var Ue=new ws;if(x)var ht=x(Fe,Be,ve,c,f,Ue);if(!(ht===t?ha(Be,Fe,C|S,x,Ue):ht))return!1}}return!0}function Dp(c){if(!Mi(c)||__(c))return!1;var f=rl(c)?s1:be;return f.test(Oa(c))}function lo(c){return ji(c)&&Tr(c)==an}function _u(c){return ji(c)&&xr(c)==ot}function sg(c){return ji(c)&&Kp(c.length)&&!!ai[Tr(c)]}function Ta(c){return typeof c=="function"?c:c==null?Rs:typeof c=="object"?_n(c)?gs(c[0],c[1]):Bo(c):Fy(c)}function Yl(c){if(!ta(c))return Qf(c);var f=[];for(var b in li(c))On.call(c,b)&&b!="constructor"&&f.push(b);return f}function og(c){if(!Mi(c))return m1(c);var f=ta(c),b=[];for(var x in c)x=="constructor"&&(f||!On.call(c,x))||b.push(x);return b}function ka(c,f){return c<f}function Ip(c,f){var b=-1,x=is(c)?Ee(c.length):[];return fs(c,function(F,Y,re){x[++b]=f(F,Y,re)}),x}function Bo(c){var f=pd(c);return f.length==1&&f[0][2]?uh(f[0][0],f[0][1]):function(b){return b===c||th(b,c,f)}}function gs(c,f){return Sn(c)&&ii(f)?uh(wr(c),f):function(b){var x=P_(b,c);return x===t&&x===f?Ri(b,c):ha(f,x,C|S)}}function Sc(c,f,b,x,F){c!==f&&Kh(f,function(Y,re){if(F||(F=new ws),Mi(Y))_0(c,f,re,b,Sc,x,F);else{var ue=x?x(Cu(c,re),Y,re+"",c,f,F):t;ue===t&&(ue=Y),qh(c,re,ue)}},ui)}function _0(c,f,b,x,F,Y,re){var ue=Cu(c,b),ve=Cu(f,b),Fe=re.get(ve);if(Fe){qh(c,b,Fe);return}var Be=Y?Y(ue,ve,b+"",c,f,re):t,Ue=Be===t;if(Ue){var ht=_n(ve),Nt=!ht&&eu(ve),Qt=!ht&&!Nt&&Sd(ve);Be=ve,ht||Nt||Qt?_n(ue)?Be=ue:Vi(ue)?Be=Zi(ue):Nt?(Ue=!1,Be=rh(ve,!0)):Qt?(Ue=!1,Be=C0(ve,!0)):Be=[]:Io(ve)||tc(ve)?(Be=ue,tc(ue)?Be=Ey(ue):(!Mi(ue)||rl(ue))&&(Be=Ho(ve))):Ue=!1}Ue&&(re.set(ve,Be),F(Be,ve,x,Y,re),re.delete(ve)),qh(c,b,Be)}function Tp(c,f){var b=c.length;if(b)return f+=f<0?b:0,Nr(f,b)?c[f]:t}function nh(c,f,b){f.length?f=vi(f,function(Y){return _n(Y)?function(re){return Jo(re,Y.length===1?Y[0]:Y)}:Y}):f=[Rs];var x=-1;f=vi(f,ts(jt()));var F=Ip(c,function(Y,re,ue){var ve=vi(f,function(Fe){return Fe(Y)});return{criteria:ve,index:++x,value:Y}});return sy(F,function(Y,re){return y0(Y,re,b)})}function v0(c,f){return Zl(c,f,function(b,x){return Ri(c,x)})}function Zl(c,f,b){for(var x=-1,F=f.length,Y={};++x<F;){var re=f[x],ue=Jo(c,re);b(ue,re)&&Ku(Y,Wo(re,c),ue)}return Y}function Ws(c){return function(f){return Jo(f,c)}}function qs(c,f,b,x){var F=x?Gm:cu,Y=-1,re=f.length,ue=c;for(c===f&&(f=Zi(f)),b&&(ue=vi(c,ts(b)));++Y<re;)for(var ve=0,Fe=f[Y],Be=b?b(Fe):Fe;(ve=F(ue,Be,ve,x))>-1;)ue!==c&&As.call(ue,ve,1),As.call(c,ve,1);return c}function Lo(c,f){for(var b=c?f.length:0,x=b-1;b--;){var F=f[b];if(b==x||F!==Y){var Y=F;Nr(F)?As.call(c,F,1):Zh(c,F)}}return c}function vu(c,f){return c+pl(sd()*(f-c+1))}function kp(c,f,b,x){for(var F=-1,Y=rr(Hl((f-c)/(b||1)),0),re=Ee(Y);Y--;)re[x?Y:++F]=c,c+=b;return re}function cd(c,f){var b="";if(!c||f<1||f>ie)return b;do f%2&&(b+=c),f=pl(f/2),f&&(c+=c);while(f);return b}function wn(c,f){return Aa(pg(c,f,Rs),c+"")}function fa(c){return ju(Ld(c))}function b0(c,f){var b=Ld(c);return rf(b,tl(f,0,b.length))}function Ku(c,f,b,x){if(!Mi(c))return c;f=Wo(f,c);for(var F=-1,Y=f.length,re=Y-1,ue=c;ue!=null&&++F<Y;){var ve=wr(f[F]),Fe=b;if(ve==="__proto__"||ve==="constructor"||ve==="prototype")return c;if(F!=re){var Be=ue[ve];Fe=x?x(Be,ve,ue):t,Fe===t&&(Fe=Mi(Be)?Be:Nr(f[F+1])?[]:{})}qu(ue,ve,Fe),ue=ue[ve]}return c}var Np=zl?function(c,f){return zl.set(c,f),c}:Rs,Gu=Mo?function(c,f){return Mo(c,"toString",{configurable:!0,enumerable:!1,value:V0(f),writable:!0})}:Rs;function Cl(c){return rf(Ld(c))}function ps(c,f,b){var x=-1,F=c.length;f<0&&(f=-f>F?0:F+f),b=b>F?F:b,b<0&&(b+=F),F=f>b?0:b-f>>>0,f>>>=0;for(var Y=Ee(F);++x<F;)Y[x]=c[x+f];return Y}function Ap(c,f){var b;return fs(c,function(x,F,Y){return b=f(x,F,Y),!b}),!!b}function Lc(c,f,b){var x=0,F=c==null?x:c.length;if(typeof f=="number"&&f===f&&F<=ae){for(;x<F;){var Y=x+F>>>1,re=c[Y];re!==null&&!Ys(re)&&(b?re<=f:re<f)?x=Y+1:F=Y}return F}return Gh(c,f,Rs,b)}function Gh(c,f,b,x){var F=0,Y=c==null?0:c.length;if(Y===0)return 0;f=b(f);for(var re=f!==f,ue=f===null,ve=Ys(f),Fe=f===t;F<Y;){var Be=pl((F+Y)/2),Ue=b(c[Be]),ht=Ue!==t,Nt=Ue===null,Qt=Ue===Ue,Ln=Ys(Ue);if(re)var Jt=x||Qt;else Fe?Jt=Qt&&(x||ht):ue?Jt=Qt&&ht&&(x||!Nt):ve?Jt=Qt&&ht&&!Nt&&(x||!Ln):Nt||Ln?Jt=!1:Jt=x?Ue<=f:Ue<f;Jt?F=Be+1:Y=Be}return Fr(Y,de)}function Op(c,f){for(var b=-1,x=c.length,F=0,Y=[];++b<x;){var re=c[b],ue=f?f(re):re;if(!b||!Do(ue,ve)){var ve=ue;Y[F++]=re===0?0:re}}return Y}function Yh(c){return typeof c=="number"?c:Ys(c)?B:+c}function Ls(c){if(typeof c=="string")return c;if(_n(c))return vi(c,Ls)+"";if(Ys(c))return Jf?Jf.call(c):"";var f=c+"";return f=="0"&&1/c==-ne?"-0":f}function ga(c,f,b){var x=-1,F=Wh,Y=c.length,re=!0,ue=[],ve=ue;if(b)re=!1,F=hp;else if(Y>=i){var Fe=f?null:Zu(c);if(Fe)return Fl(Fe);re=!1,F=cr,ve=new Da}else ve=f?[]:ue;e:for(;++x<Y;){var Be=c[x],Ue=f?f(Be):Be;if(Be=b||Be!==0?Be:0,re&&Ue===Ue){for(var ht=ve.length;ht--;)if(ve[ht]===Ue)continue e;f&&ve.push(Ue),ue.push(Be)}else F(ve,Ue,b)||(ve!==ue&&ve.push(Ue),ue.push(Be))}return ue}function Zh(c,f){return f=Wo(f,c),c=yr(c,f),c==null||delete c[wr(Es(f))]}function c_(c,f,b,x){return Ku(c,f,b(Jo(c,f)),x)}function dd(c,f,b,x){for(var F=c.length,Y=x?F:-1;(x?Y--:++Y<F)&&f(c[Y],Y,c););return b?ps(c,x?0:Y,x?Y+1:F):ps(c,x?Y+1:0,x?F:Y)}function Xh(c,f){var b=c;return b instanceof En&&(b=b.value()),qf(f,function(x,F){return F.func.apply(F.thisArg,Za([x],F.args))},b)}function ih(c,f,b){var x=c.length;if(x<2)return x?ga(c[0]):[];for(var F=-1,Y=Ee(x);++F<x;)for(var re=c[F],ue=-1;++ue<x;)ue!=F&&(Y[F]=bl(Y[F]||re,c[ue],f,b));return ga(Qi(Y,1),f,b)}function Qh(c,f,b){for(var x=-1,F=c.length,Y=f.length,re={};++x<F;){var ue=x<Y?f[x]:t;b(re,c[x],ue)}return re}function Ec(c){return Vi(c)?c:[]}function ag(c){return typeof c=="function"?c:Rs}function Wo(c,f){return _n(c)?c:Sn(c,f)?[c]:wu(ti(c))}var Yi=wn;function Na(c,f,b){var x=c.length;return b=b===t?x:b,!f&&b>=x?c:ps(c,f,b)}var d_=Cp||function(c){return Gi.clearTimeout(c)};function rh(c,f){if(f)return c.slice();var b=c.length,x=ft?ft(b):new c.constructor(b);return c.copy(x),x}function sh(c){var f=new c.constructor(c.byteLength);return new Lt(f).set(new Lt(c)),f}function d1(c,f){var b=f?sh(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.byteLength)}function h1(c){var f=new c.constructor(c.source,le.exec(c));return f.lastIndex=c.lastIndex,f}function Xl(c){return ua?li(ua.call(c)):{}}function C0(c,f){var b=f?sh(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.length)}function Jh(c,f){if(c!==f){var b=c!==t,x=c===null,F=c===c,Y=Ys(c),re=f!==t,ue=f===null,ve=f===f,Fe=Ys(f);if(!ue&&!Fe&&!Y&&c>f||Y&&re&&ve&&!ue&&!Fe||x&&re&&ve||!b&&ve||!F)return 1;if(!x&&!Y&&!Fe&&c<f||Fe&&b&&F&&!x&&!Y||ue&&b&&F||!re&&F||!ve)return-1}return 0}function y0(c,f,b){for(var x=-1,F=c.criteria,Y=f.criteria,re=F.length,ue=b.length;++x<re;){var ve=Jh(F[x],Y[x]);if(ve){if(x>=ue)return ve;var Fe=b[x];return ve*(Fe=="desc"?-1:1)}}return c.index-f.index}function h_(c,f,b,x){for(var F=-1,Y=c.length,re=b.length,ue=-1,ve=f.length,Fe=rr(Y-re,0),Be=Ee(ve+Fe),Ue=!x;++ue<ve;)Be[ue]=f[ue];for(;++F<re;)(Ue||F<Y)&&(Be[b[F]]=c[F]);for(;Fe--;)Be[ue++]=c[F++];return Be}function Mp(c,f,b,x){for(var F=-1,Y=c.length,re=-1,ue=b.length,ve=-1,Fe=f.length,Be=rr(Y-ue,0),Ue=Ee(Be+Fe),ht=!x;++F<Be;)Ue[F]=c[F];for(var Nt=F;++ve<Fe;)Ue[Nt+ve]=f[ve];for(;++re<ue;)(ht||F<Y)&&(Ue[Nt+b[re]]=c[F++]);return Ue}function Zi(c,f){var b=-1,x=c.length;for(f||(f=Ee(x));++b<x;)f[b]=c[b];return f}function ms(c,f,b,x){var F=!b;b||(b={});for(var Y=-1,re=f.length;++Y<re;){var ue=f[Y],ve=x?x(b[ue],c[ue],ue,b,c):t;ve===t&&(ve=c[ue]),F?Qo(b,ue,ve):qu(b,ue,ve)}return b}function lg(c,f){return ms(c,yl(c),f)}function f1(c,f){return ms(c,gg(c),f)}function xc(c,f){return function(b,x){var F=_n(b)?u0:Kl,Y=f?f():{};return F(b,c,jt(x,2),Y)}}function bu(c){return wn(function(f,b){var x=-1,F=b.length,Y=F>1?b[F-1]:t,re=F>2?b[2]:t;for(Y=c.length>3&&typeof Y=="function"?(F--,Y):t,re&&Yr(b[0],b[1],re)&&(Y=F<3?t:Y,F=1),f=li(f);++x<F;){var ue=b[x];ue&&c(f,ue,x,Y)}return f})}function nl(c,f){return function(b,x){if(b==null)return b;if(!is(b))return c(b,x);for(var F=b.length,Y=f?F:-1,re=li(b);(f?Y--:++Y<F)&&x(re[Y],Y,re)!==!1;);return b}}function ug(c){return function(f,b,x){for(var F=-1,Y=li(f),re=x(f),ue=re.length;ue--;){var ve=re[c?ue:++F];if(b(Y[ve],ve,Y)===!1)break}return f}}function cg(c,f,b){var x=f&E,F=Dc(c);function Y(){var re=this&&this!==Gi&&this instanceof Y?F:c;return re.apply(x?b:this,arguments)}return Y}function dg(c){return function(f){f=ti(f);var b=du(f)?Ns(f):t,x=b?b[0]:f.charAt(0),F=b?Na(b,1).join(""):f.slice(1);return x[c]()+F}}function Vo(c){return function(f){return qf(Ry(My(f).replace($m,"")),c,"")}}function Dc(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var b=zu(c.prototype),x=c.apply(b,f);return Mi(x)?x:b}}function Ic(c,f,b){var x=Dc(c);function F(){for(var Y=arguments.length,re=Ee(Y),ue=Y,ve=ma(F);ue--;)re[ue]=arguments[ue];var Fe=Y<3&&re[0]!==ve&&re[Y-1]!==ve?[]:Co(re,ve);if(Y-=Fe.length,Y<b)return pa(c,f,Yu,F.placeholder,t,re,Fe,t,t,b-Y);var Be=this&&this!==Gi&&this instanceof F?x:c;return hs(Be,this,re)}return F}function hd(c){return function(f,b,x){var F=li(f);if(!is(f)){var Y=jt(b,3);f=Dr(f),b=function(ue){return Y(F[ue],ue,F)}}var re=c(f,b,x);return re>-1?F[Y?f[re]:re]:t}}function hg(c){return Ks(function(f){var b=f.length,x=b,F=Wi.prototype.thru;for(c&&f.reverse();x--;){var Y=f[x];if(typeof Y!="function")throw new Ur(o);if(F&&!re&&Tc(Y)=="wrapper")var re=new Wi([],!0)}for(x=re?x:b;++x<b;){Y=f[x];var ue=Tc(Y),ve=ue=="wrapper"?nf(Y):t;ve&&md(ve[0])&&ve[1]==($|O|V|P)&&!ve[4].length&&ve[9]==1?re=re[Tc(ve[0])].apply(re,ve[3]):re=Y.length==1&&md(Y)?re[ue]():re.thru(Y)}return function(){var Fe=arguments,Be=Fe[0];if(re&&Fe.length==1&&_n(Be))return re.plant(Be).value();for(var Ue=0,ht=b?f[Ue].apply(this,Fe):Be;++Ue<b;)ht=f[Ue].call(this,ht);return ht}})}function Yu(c,f,b,x,F,Y,re,ue,ve,Fe){var Be=f&$,Ue=f&E,ht=f&k,Nt=f&(O|H),Qt=f&z,Ln=ht?t:Dc(c);function Jt(){for(var An=arguments.length,Hn=Ee(An),Zs=An;Zs--;)Hn[Zs]=arguments[Zs];if(Nt)var _s=ma(Jt),Xs=Jb(Hn,_s);if(x&&(Hn=h_(Hn,x,F,Nt)),Y&&(Hn=Mp(Hn,Y,re,Nt)),An-=Xs,Nt&&An<Fe){var Ji=Co(Hn,_s);return pa(c,f,Yu,Jt.placeholder,b,Hn,Ji,ue,ve,Fe-An)}var Uo=Ue?b:this,_=ht?Uo[c]:c;return An=Hn.length,ue?Hn=Ju(Hn,ue):Qt&&An>1&&Hn.reverse(),Be&&ve<An&&(Hn.length=ve),this&&this!==Gi&&this instanceof Jt&&(_=Ln||Dc(_)),_.apply(Uo,Hn)}return Jt}function w0(c,f){return function(b,x){return ud(b,c,f(x),{})}}function oh(c,f){return function(b,x){var F;if(b===t&&x===t)return f;if(b!==t&&(F=b),x!==t){if(F===t)return x;typeof b=="string"||typeof x=="string"?(b=Ls(b),x=Ls(x)):(b=Yh(b),x=Yh(x)),F=c(b,x)}return F}}function fg(c){return Ks(function(f){return f=vi(f,ts(jt())),wn(function(b){var x=this;return c(f,function(F){return hs(F,x,b)})})})}function fd(c,f){f=f===t?" ":Ls(f);var b=f.length;if(b<2)return b?cd(f,c):f;var x=cd(f,Hl(c/fl(f)));return du(f)?Na(Ns(x),0,c).join(""):x.slice(0,c)}function S0(c,f,b,x){var F=f&E,Y=Dc(c);function re(){for(var ue=-1,ve=arguments.length,Fe=-1,Be=x.length,Ue=Ee(Be+ve),ht=this&&this!==Gi&&this instanceof re?Y:c;++Fe<Be;)Ue[Fe]=x[Fe];for(;ve--;)Ue[Fe++]=arguments[++ue];return hs(ht,F?b:this,Ue)}return re}function f_(c){return function(f,b,x){return x&&typeof x!="number"&&Yr(f,b,x)&&(b=x=t),f=ia(f),b===t?(b=f,f=0):b=ia(b),x=x===t?f<b?1:-1:ia(x),kp(f,b,x,c)}}function ah(c){return function(f,b){return typeof f=="string"&&typeof b=="string"||(f=no(f),b=no(b)),c(f,b)}}function pa(c,f,b,x,F,Y,re,ue,ve,Fe){var Be=f&O,Ue=Be?re:t,ht=Be?t:re,Nt=Be?Y:t,Qt=Be?t:Y;f|=Be?V:X,f&=~(Be?X:V),f&D||(f&=~(E|k));var Ln=[c,f,F,Nt,Ue,Qt,ht,ue,ve,Fe],Jt=b.apply(t,Ln);return md(c)&&Vp(Jt,Ln),Jt.placeholder=x,C_(Jt,c,f)}function kr(c){var f=ir[c];return function(b,x){if(b=no(b),x=x==null?0:Fr(Kt(x),292),x&&Qd(b)){var F=(ti(b)+"e").split("e"),Y=f(F[0]+"e"+(+F[1]+x));return F=(ti(Y)+"e").split("e"),+(F[0]+"e"+(+F[1]-x))}return f(b)}}var Zu=xa&&1/Fl(new xa([,-0]))[1]==ne?function(c){return new xa(c)}:U0;function g_(c){return function(f){var b=xr(f);return b==rn?Xf(f):b==ot?d0(f):Qb(f,c(f))}}function ea(c,f,b,x,F,Y,re,ue){var ve=f&k;if(!ve&&typeof c!="function")throw new Ur(o);var Fe=x?x.length:0;if(Fe||(f&=~(V|X),x=F=t),re=re===t?re:rr(Kt(re),0),ue=ue===t?ue:Kt(ue),Fe-=F?F.length:0,f&X){var Be=x,Ue=F;x=F=t}var ht=ve?t:nf(c),Nt=[c,f,b,x,F,Be,Ue,Y,re,ue];if(ht&&ch(Nt,ht),c=Nt[0],f=Nt[1],b=Nt[2],x=Nt[3],F=Nt[4],ue=Nt[9]=Nt[9]===t?ve?0:c.length:rr(Nt[9]-Fe,0),!ue&&f&(O|H)&&(f&=~(O|H)),!f||f==E)var Qt=cg(c,f,b);else f==O||f==H?Qt=Ic(c,f,ue):(f==V||f==(E|V))&&!F.length?Qt=S0(c,f,b,x):Qt=Yu.apply(t,Nt);var Ln=ht?Np:Vp;return C_(Ln(Qt,Nt),c,f)}function ef(c,f,b,x){return c===t||Do(c,Ja[b])&&!On.call(x,b)?f:c}function gd(c,f,b,x,F,Y){return Mi(c)&&Mi(f)&&(Y.set(f,c),Sc(c,f,t,gd,Y),Y.delete(f)),c}function p_(c){return Io(c)?t:c}function Rp(c,f,b,x,F,Y){var re=b&C,ue=c.length,ve=f.length;if(ue!=ve&&!(re&&ve>ue))return!1;var Fe=Y.get(c),Be=Y.get(f);if(Fe&&Be)return Fe==f&&Be==c;var Ue=-1,ht=!0,Nt=b&S?new Da:t;for(Y.set(c,f),Y.set(f,c);++Ue<ue;){var Qt=c[Ue],Ln=f[Ue];if(x)var Jt=re?x(Ln,Qt,Ue,f,c,Y):x(Qt,Ln,Ue,c,f,Y);if(Jt!==t){if(Jt)continue;ht=!1;break}if(Nt){if(!ao(f,function(An,Hn){if(!cr(Nt,Hn)&&(Qt===An||F(Qt,An,b,x,Y)))return Nt.push(Hn)})){ht=!1;break}}else if(!(Qt===Ln||F(Qt,Ln,b,x,Y))){ht=!1;break}}return Y.delete(c),Y.delete(f),ht}function L0(c,f,b,x,F,Y,re){switch(b){case yt:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case rt:return!(c.byteLength!=f.byteLength||!Y(new Lt(c),new Lt(f)));case Rt:case Ye:case on:return Do(+c,+f);case Ut:return c.name==f.name&&c.message==f.message;case an:case Mt:return c==f+"";case rn:var ue=Xf;case ot:var ve=x&C;if(ue||(ue=Fl),c.size!=f.size&&!ve)return!1;var Fe=re.get(c);if(Fe)return Fe==f;x|=S,re.set(c,f);var Be=Rp(ue(c),ue(f),x,F,Y,re);return re.delete(c),Be;case cn:if(ua)return ua.call(c)==ua.call(f)}return!1}function E0(c,f,b,x,F,Y){var re=b&C,ue=Xu(c),ve=ue.length,Fe=Xu(f),Be=Fe.length;if(ve!=Be&&!re)return!1;for(var Ue=ve;Ue--;){var ht=ue[Ue];if(!(re?ht in f:On.call(f,ht)))return!1}var Nt=Y.get(c),Qt=Y.get(f);if(Nt&&Qt)return Nt==f&&Qt==c;var Ln=!0;Y.set(c,f),Y.set(f,c);for(var Jt=re;++Ue<ve;){ht=ue[Ue];var An=c[ht],Hn=f[ht];if(x)var Zs=re?x(Hn,An,ht,f,c,Y):x(An,Hn,ht,c,f,Y);if(!(Zs===t?An===Hn||F(An,Hn,b,x,Y):Zs)){Ln=!1;break}Jt||(Jt=ht=="constructor")}if(Ln&&!Jt){var _s=c.constructor,Xs=f.constructor;_s!=Xs&&"constructor"in c&&"constructor"in f&&!(typeof _s=="function"&&_s instanceof _s&&typeof Xs=="function"&&Xs instanceof Xs)&&(Ln=!1)}return Y.delete(c),Y.delete(f),Ln}function Ks(c){return Aa(pg(c,t,vg),c+"")}function Xu(c){return Ep(c,Dr,yl)}function tf(c){return Ep(c,ui,gg)}var nf=zl?function(c){return zl.get(c)}:U0;function Tc(c){for(var f=c.name+"",b=_l[f],x=On.call(_l,f)?b.length:0;x--;){var F=b[x],Y=F.func;if(Y==null||Y==c)return F.name}return f}function ma(c){var f=On.call(j,"placeholder")?j:c;return f.placeholder}function jt(){var c=j.iteratee||H0;return c=c===H0?Ta:c,arguments.length?c(arguments[0],arguments[1]):c}function Qu(c,f){var b=c.__data__;return lh(f)?b[typeof f=="string"?"string":"hash"]:b.map}function pd(c){for(var f=Dr(c),b=f.length;b--;){var x=f[b],F=c[x];f[b]=[x,F,ii(F)]}return f}function _a(c,f){var b=Yf(c,f);return Dp(b)?b:t}function m_(c){var f=On.call(c,Vl),b=c[Vl];try{c[Vl]=t;var x=!0}catch{}var F=Zd.call(c);return x&&(f?c[Vl]=b:delete c[Vl]),F}var yl=Cr?function(c){return c==null?[]:(c=li(c),Ya(Cr(c),function(f){return mr.call(c,f)}))}:$0,gg=Cr?function(c){for(var f=[];c;)Za(f,yl(c)),c=Cn(c);return f}:$0,xr=Tr;(vc&&xr(new vc(new ArrayBuffer(1)))!=yt||fu&&xr(new fu)!=rn||Jd&&xr(Jd.resolve())!=Pt||xa&&xr(new xa)!=ot||bc&&xr(new bc)!=Pe)&&(xr=function(c){var f=Tr(c),b=f==Ft?c.constructor:t,x=b?Oa(b):"";if(x)switch(x){case p0:return yt;case eh:return rn;case o1:return Pt;case od:return ot;case Ul:return Pe}return f});function Pp(c,f,b){for(var x=-1,F=b.length;++x<F;){var Y=b[x],re=Y.size;switch(Y.type){case"drop":c+=re;break;case"dropRight":f-=re;break;case"take":f=Fr(f,c+re);break;case"takeRight":c=rr(c,f-re);break}}return{start:c,end:f}}function g1(c){var f=c.match(ut);return f?f[1].split(et):[]}function Fp(c,f,b){f=Wo(f,c);for(var x=-1,F=f.length,Y=!1;++x<F;){var re=wr(f[x]);if(!(Y=c!=null&&b(c,re)))break;c=c[re]}return Y||++x!=F?Y:(F=c==null?0:c.length,!!F&&Kp(F)&&Nr(re,F)&&(_n(c)||tc(c)))}function Ql(c){var f=c.length,b=new c.constructor(f);return f&&typeof c[0]=="string"&&On.call(c,"index")&&(b.index=c.index,b.input=c.input),b}function Ho(c){return typeof c.constructor=="function"&&!ta(c)?zu(Cn(c)):{}}function p1(c,f,b){var x=c.constructor;switch(f){case rt:return sh(c);case Rt:case Ye:return new x(+c);case yt:return d1(c,b);case ln:case Rn:case Xt:case Tn:case Tt:case tn:case Qn:case oi:case lt:return C0(c,b);case rn:return new x;case on:case Mt:return new x(c);case an:return h1(c);case ot:return new x;case cn:return Xl(c)}}function ay(c,f){var b=f.length;if(!b)return c;var x=b-1;return f[x]=(b>1?"& ":"")+f[x],f=f.join(b>2?", ":" "),c.replace(Te,`{
/* [wrapped with `+f+`] */
`)}function Bp(c){return _n(c)||tc(c)||!!(Kr&&c&&c[Kr])}function Nr(c,f){var b=typeof c;return f=f??ie,!!f&&(b=="number"||b!="symbol"&&it.test(c))&&c>-1&&c%1==0&&c<f}function Yr(c,f,b){if(!Mi(b))return!1;var x=typeof f;return(x=="number"?is(b)&&Nr(f,b.length):x=="string"&&f in b)?Do(b[f],c):!1}function Sn(c,f){if(_n(c))return!1;var b=typeof c;return b=="number"||b=="symbol"||b=="boolean"||c==null||Ys(c)?!0:Ve.test(c)||!Ge.test(c)||f!=null&&c in li(f)}function lh(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function md(c){var f=Tc(c),b=j[f];if(typeof b!="function"||!(f in En.prototype))return!1;if(c===b)return!0;var x=nf(b);return!!x&&c===x[0]}function __(c){return!!bp&&bp in c}var v_=id?rl:j0;function ta(c){var f=c&&c.constructor,b=typeof f=="function"&&f.prototype||Ja;return c===b}function ii(c){return c===c&&!Mi(c)}function uh(c,f){return function(b){return b==null?!1:b[c]===f&&(f!==t||c in li(b))}}function b_(c){var f=tt(c,function(x){return b.size===u&&b.clear(),x}),b=f.cache;return f}function ch(c,f){var b=c[1],x=f[1],F=b|x,Y=F<(E|k|$),re=x==$&&b==O||x==$&&b==P&&c[7].length<=f[8]||x==($|P)&&f[7].length<=f[8]&&b==O;if(!(Y||re))return c;x&E&&(c[2]=f[2],F|=b&E?0:D);var ue=f[3];if(ue){var ve=c[3];c[3]=ve?h_(ve,ue,f[4]):ue,c[4]=ve?Co(c[3],d):f[4]}return ue=f[5],ue&&(ve=c[5],c[5]=ve?Mp(ve,ue,f[6]):ue,c[6]=ve?Co(c[5],d):f[6]),ue=f[7],ue&&(c[7]=ue),x&$&&(c[8]=c[8]==null?f[8]:Fr(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=F,c}function m1(c){var f=[];if(c!=null)for(var b in li(c))f.push(b);return f}function Wp(c){return Zd.call(c)}function pg(c,f,b){return f=rr(f===t?c.length-1:f,0),function(){for(var x=arguments,F=-1,Y=rr(x.length-f,0),re=Ee(Y);++F<Y;)re[F]=x[f+F];F=-1;for(var ue=Ee(f+1);++F<f;)ue[F]=x[F];return ue[f]=b(re),hs(c,this,ue)}}function yr(c,f){return f.length<2?c:Jo(c,ps(f,0,-1))}function Ju(c,f){for(var b=c.length,x=Fr(f.length,b),F=Zi(c);x--;){var Y=f[x];c[x]=Nr(Y,b)?F[Y]:t}return c}function Cu(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var Vp=yu(Np),kc=Xd||function(c,f){return Gi.setTimeout(c,f)},Aa=yu(Gu);function C_(c,f,b){var x=f+"";return Aa(c,ay(x,_1(g1(x),b)))}function yu(c){var f=0,b=0;return function(){var x=t_(),F=R-(x-b);if(b=x,F>0){if(++f>=I)return arguments[0]}else f=0;return c.apply(t,arguments)}}function rf(c,f){var b=-1,x=c.length,F=x-1;for(f=f===t?x:f;++b<f;){var Y=vu(b,F),re=c[Y];c[Y]=c[b],c[b]=re}return c.length=f,c}var wu=b_(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(Ze,function(b,x,F,Y){f.push(F?Y.replace(N,"$1"):x||b)}),f});function wr(c){if(typeof c=="string"||Ys(c))return c;var f=c+"";return f=="0"&&1/c==-ne?"-0":f}function Oa(c){if(c!=null){try{return Bl.call(c)}catch{}try{return c+""}catch{}}return""}function _1(c,f){return gi(De,function(b){var x="_."+b[0];f&b[1]&&!Wh(c,x)&&c.push(x)}),c.sort()}function Hp(c){if(c instanceof En)return c.clone();var f=new Wi(c.__wrapped__,c.__chain__);return f.__actions__=Zi(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function y_(c,f,b){(b?Yr(c,f,b):f===t)?f=1:f=rr(Kt(f),0);var x=c==null?0:c.length;if(!x||f<1)return[];for(var F=0,Y=0,re=Ee(Hl(x/f));F<x;)re[Y++]=ps(c,F,F+=f);return re}function x0(c){for(var f=-1,b=c==null?0:c.length,x=0,F=[];++f<b;){var Y=c[f];Y&&(F[x++]=Y)}return F}function Ma(){var c=arguments.length;if(!c)return[];for(var f=Ee(c-1),b=arguments[0],x=c;x--;)f[x-1]=arguments[x];return Za(_n(b)?Zi(b):[b],Qi(f,1))}var Sr=wn(function(c,f){return Vi(c)?bl(c,Qi(f,1,Vi,!0)):[]}),zo=wn(function(c,f){var b=Es(f);return Vi(b)&&(b=t),Vi(c)?bl(c,Qi(f,1,Vi,!0),jt(b,2)):[]}),Eo=wn(function(c,f){var b=Es(f);return Vi(b)&&(b=t),Vi(c)?bl(c,Qi(f,1,Vi,!0),t,b):[]});function va(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===t?1:Kt(f),ps(c,f<0?0:f,x)):[]}function Jl(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===t?1:Kt(f),f=x-f,ps(c,0,f<0?0:f)):[]}function mg(c,f){return c&&c.length?dd(c,jt(f,3),!0,!0):[]}function xo(c,f){return c&&c.length?dd(c,jt(f,3),!0):[]}function _g(c,f,b,x){var F=c==null?0:c.length;return F?(b&&typeof b!="number"&&Yr(c,f,b)&&(b=0,x=F),c1(c,f,b,x)):[]}function _d(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=b==null?0:Kt(b);return F<0&&(F=rr(x+F,0)),Yo(c,jt(f,3),F)}function dh(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=x-1;return b!==t&&(F=Kt(b),F=b<0?rr(x+F,0):Fr(F,x-1)),Yo(c,jt(f,3),F,!0)}function vg(c){var f=c==null?0:c.length;return f?Qi(c,1):[]}function vd(c){var f=c==null?0:c.length;return f?Qi(c,ne):[]}function Ra(c,f){var b=c==null?0:c.length;return b?(f=f===t?1:Kt(f),Qi(c,f)):[]}function w_(c){for(var f=-1,b=c==null?0:c.length,x={};++f<b;){var F=c[f];x[F[0]]=F[1]}return x}function bd(c){return c&&c.length?c[0]:t}function Su(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=b==null?0:Kt(b);return F<0&&(F=rr(x+F,0)),cu(c,f,F)}function zp(c){var f=c==null?0:c.length;return f?ps(c,0,-1):[]}var Lu=wn(function(c){var f=vi(c,Ec);return f.length&&f[0]===c[0]?ca(f):[]}),wl=wn(function(c){var f=Es(c),b=vi(c,Ec);return f===Es(b)?f=t:b.pop(),b.length&&b[0]===c[0]?ca(b,jt(f,2)):[]}),S_=wn(function(c){var f=Es(c),b=vi(c,Ec);return f=typeof f=="function"?f:t,f&&b.pop(),b.length&&b[0]===c[0]?ca(b,t,f):[]});function Cd(c,f){return c==null?"":zh.call(c,f)}function Es(c){var f=c==null?0:c.length;return f?c[f-1]:t}function Up(c,f,b){var x=c==null?0:c.length;if(!x)return-1;var F=x;return b!==t&&(F=Kt(b),F=F<0?rr(x+F,0):Fr(F,x-1)),f===f?oy(c,f,F):Yo(c,Ym,F,!0)}function D0(c,f){return c&&c.length?Tp(c,Kt(f)):t}var L_=wn(bg);function bg(c,f){return c&&c.length&&f&&f.length?qs(c,f):c}function il(c,f,b){return c&&c.length&&f&&f.length?qs(c,f,jt(b,2)):c}function hh(c,f,b){return c&&c.length&&f&&f.length?qs(c,f,t,b):c}var ec=Ks(function(c,f){var b=c==null?0:c.length,x=tg(c,f);return Lo(c,vi(f,function(F){return Nr(F,b)?+F:F}).sort(Jh)),x});function Sl(c,f){var b=[];if(!(c&&c.length))return b;var x=-1,F=[],Y=c.length;for(f=jt(f,3);++x<Y;){var re=c[x];f(re,x,c)&&(b.push(re),F.push(x))}return Lo(c,F),b}function Cg(c){return c==null?c:yp.call(c)}function I0(c,f,b){var x=c==null?0:c.length;return x?(b&&typeof b!="number"&&Yr(c,f,b)?(f=0,b=x):(f=f==null?0:Kt(f),b=b===t?x:Kt(b)),ps(c,f,b)):[]}function E_(c,f){return Lc(c,f)}function v1(c,f,b){return Gh(c,f,jt(b,2))}function yd(c,f){var b=c==null?0:c.length;if(b){var x=Lc(c,f);if(x<b&&Do(c[x],f))return x}return-1}function b1(c,f){return Lc(c,f,!0)}function T0(c,f,b){return Gh(c,f,jt(b,2),!0)}function sf(c,f){var b=c==null?0:c.length;if(b){var x=Lc(c,f,!0)-1;if(Do(c[x],f))return x}return-1}function x_(c){return c&&c.length?Op(c):[]}function of(c,f){return c&&c.length?Op(c,jt(f,2)):[]}function C1(c){var f=c==null?0:c.length;return f?ps(c,1,f):[]}function y1(c,f,b){return c&&c.length?(f=b||f===t?1:Kt(f),ps(c,0,f<0?0:f)):[]}function k0(c,f,b){var x=c==null?0:c.length;return x?(f=b||f===t?1:Kt(f),f=x-f,ps(c,f<0?0:f,x)):[]}function D_(c,f){return c&&c.length?dd(c,jt(f,3),!1,!0):[]}function ly(c,f){return c&&c.length?dd(c,jt(f,3)):[]}var Eu=wn(function(c){return ga(Qi(c,1,Vi,!0))}),w1=wn(function(c){var f=Es(c);return Vi(f)&&(f=t),ga(Qi(c,1,Vi,!0),jt(f,2))}),S1=wn(function(c){var f=Es(c);return f=typeof f=="function"?f:t,ga(Qi(c,1,Vi,!0),t,f)});function af(c){return c&&c.length?ga(c):[]}function L1(c,f){return c&&c.length?ga(c,jt(f,2)):[]}function yg(c,f){return f=typeof f=="function"?f:t,c&&c.length?ga(c,t,f):[]}function wg(c){if(!(c&&c.length))return[];var f=0;return c=Ya(c,function(b){if(Vi(b))return f=rr(b.length,f),!0}),gp(f,function(b){return vi(c,Kf(b))})}function Vs(c,f){if(!(c&&c.length))return[];var b=wg(c);return f==null?b:vi(b,function(x){return hs(f,t,x)})}var uy=wn(function(c,f){return Vi(c)?bl(c,f):[]}),I_=wn(function(c){return ih(Ya(c,Vi))}),cy=wn(function(c){var f=Es(c);return Vi(f)&&(f=t),ih(Ya(c,Vi),jt(f,2))}),dy=wn(function(c){var f=Es(c);return f=typeof f=="function"?f:t,ih(Ya(c,Vi),t,f)}),E1=wn(wg);function x1(c,f){return Qh(c||[],f||[],qu)}function hy(c,f){return Qh(c||[],f||[],Ku)}var xu=wn(function(c){var f=c.length,b=f>1?c[f-1]:t;return b=typeof b=="function"?(c.pop(),b):t,Vs(c,b)});function $p(c){var f=j(c);return f.__chain__=!0,f}function fy(c,f){return f(c),c}function Ll(c,f){return f(c)}var T_=Ks(function(c){var f=c.length,b=f?c[0]:0,x=this.__wrapped__,F=function(Y){return tg(Y,c)};return f>1||this.__actions__.length||!(x instanceof En)||!Nr(b)?this.thru(F):(x=x.slice(b,+b+(f?1:0)),x.__actions__.push({func:Ll,args:[F],thisArg:t}),new Wi(x,this.__chain__).thru(function(Y){return f&&!Y.length&&Y.push(t),Y}))});function lf(){return $p(this)}function k_(){return new Wi(this.value(),this.__chain__)}function N0(){this.__values__===t&&(this.__values__=O1(this.value()));var c=this.__index__>=this.__values__.length,f=c?t:this.__values__[this.__index__++];return{done:c,value:f}}function A0(){return this}function gy(c){for(var f,b=this;b instanceof Br;){var x=Hp(b);x.__index__=0,x.__values__=t,f?F.__wrapped__=x:f=x;var F=x;b=b.__wrapped__}return F.__wrapped__=c,f}function O0(){var c=this.__wrapped__;if(c instanceof En){var f=c;return this.__actions__.length&&(f=new En(this)),f=f.reverse(),f.__actions__.push({func:Ll,args:[Cg],thisArg:t}),new Wi(f,this.__chain__)}return this.thru(Cg)}function py(){return Xh(this.__wrapped__,this.__actions__)}var D1=xc(function(c,f,b){On.call(c,b)?++c[b]:Qo(c,b,1)});function I1(c,f,b){var x=_n(c)?Km:Lp;return b&&Yr(c,f,b)&&(f=t),x(c,jt(f,3))}function N_(c,f){var b=_n(c)?Ya:l_;return b(c,jt(f,3))}var Sg=hd(_d),M0=hd(dh);function R0(c,f){return Qi(Nc(c,f),1)}function my(c,f){return Qi(Nc(c,f),ne)}function T1(c,f,b){return b=b===t?1:Kt(b),Qi(Nc(c,f),b)}function jp(c,f){var b=_n(c)?gi:fs;return b(c,jt(f,3))}function Lg(c,f){var b=_n(c)?qr:m0;return b(c,jt(f,3))}var P0=xc(function(c,f,b){On.call(c,b)?c[b].push(f):Qo(c,b,[f])});function A_(c,f,b,x){c=is(c)?c:Ld(c),b=b&&!x?Kt(b):0;var F=c.length;return b<0&&(b=rr(F+b,0)),Yp(c)?b<=F&&c.indexOf(f,b)>-1:!!F&&cu(c,f,b)>-1}var k1=wn(function(c,f,b){var x=-1,F=typeof f=="function",Y=is(c)?Ee(c.length):[];return fs(c,function(re){Y[++x]=F?hs(f,re,b):da(re,f,b)}),Y}),N1=xc(function(c,f,b){Qo(c,b,f)});function Nc(c,f){var b=_n(c)?vi:Ip;return b(c,jt(f,3))}function O_(c,f,b,x){return c==null?[]:(_n(f)||(f=f==null?[]:[f]),b=x?t:b,_n(b)||(b=b==null?[]:[b]),nh(c,f,b))}var qp=xc(function(c,f,b){c[b?0:1].push(f)},function(){return[[],[]]});function _y(c,f,b){var x=_n(c)?qf:Xa,F=arguments.length<3;return x(c,jt(f,4),b,F,fs)}function M_(c,f,b){var x=_n(c)?ry:Xa,F=arguments.length<3;return x(c,jt(f,4),b,F,m0)}function g(c,f){var b=_n(c)?Ya:l_;return b(c,nn(jt(f,3)))}function m(c){var f=_n(c)?ju:fa;return f(c)}function w(c,f,b){(b?Yr(c,f,b):f===t)?f=1:f=Kt(f);var x=_n(c)?jh:b0;return x(c,f)}function T(c){var f=_n(c)?Cc:Cl;return f(c)}function U(c){if(c==null)return 0;if(is(c))return Yp(c)?fl(c):c.length;var f=xr(c);return f==rn||f==ot?c.size:Yl(c).length}function Q(c,f,b){var x=_n(c)?ao:Ap;return b&&Yr(c,f,b)&&(f=t),x(c,jt(f,3))}var he=wn(function(c,f){if(c==null)return[];var b=f.length;return b>1&&Yr(c,f[0],f[1])?f=[]:b>2&&Yr(f[0],f[1],f[2])&&(f=[f[0]]),nh(c,Qi(f,1),[])}),ke=Os||function(){return Gi.Date.now()};function He(c,f){if(typeof f!="function")throw new Ur(o);return c=Kt(c),function(){if(--c<1)return f.apply(this,arguments)}}function dt(c,f,b){return f=b?t:f,f=c&&f==null?c.length:f,ea(c,$,t,t,t,t,f)}function $t(c,f){var b;if(typeof f!="function")throw new Ur(o);return c=Kt(c),function(){return--c>0&&(b=f.apply(this,arguments)),c<=1&&(f=t),b}}var Gt=wn(function(c,f,b){var x=E;if(b.length){var F=Co(b,ma(Gt));x|=V}return ea(c,x,f,b,F)}),zt=wn(function(c,f,b){var x=E|k;if(b.length){var F=Co(b,ma(zt));x|=V}return ea(f,x,c,b,F)});function In(c,f,b){f=b?t:f;var x=ea(c,O,t,t,t,t,t,f);return x.placeholder=In.placeholder,x}function Vn(c,f,b){f=b?t:f;var x=ea(c,H,t,t,t,t,t,f);return x.placeholder=Vn.placeholder,x}function jn(c,f,b){var x,F,Y,re,ue,ve,Fe=0,Be=!1,Ue=!1,ht=!0;if(typeof c!="function")throw new Ur(o);f=no(f)||0,Mi(b)&&(Be=!!b.leading,Ue="maxWait"in b,Y=Ue?rr(no(b.maxWait)||0,f):Y,ht="trailing"in b?!!b.trailing:ht);function Nt(Ji){var Uo=x,_=F;return x=F=t,Fe=Ji,re=c.apply(_,Uo),re}function Qt(Ji){return Fe=Ji,ue=kc(An,f),Be?Nt(Ji):re}function Ln(Ji){var Uo=Ji-ve,_=Ji-Fe,y=f-Uo;return Ue?Fr(y,Y-_):y}function Jt(Ji){var Uo=Ji-ve,_=Ji-Fe;return ve===t||Uo>=f||Uo<0||Ue&&_>=Y}function An(){var Ji=ke();if(Jt(Ji))return Hn(Ji);ue=kc(An,Ln(Ji))}function Hn(Ji){return ue=t,ht&&x?Nt(Ji):(x=F=t,re)}function Zs(){ue!==t&&d_(ue),Fe=0,x=ve=F=ue=t}function _s(){return ue===t?re:Hn(ke())}function Xs(){var Ji=ke(),Uo=Jt(Ji);if(x=arguments,F=this,ve=Ji,Uo){if(ue===t)return Qt(ve);if(Ue)return d_(ue),ue=kc(An,f),Nt(ve)}return ue===t&&(ue=kc(An,f)),re}return Xs.cancel=Zs,Xs.flush=_s,Xs}var uo=wn(function(c,f){return a_(c,1,f)}),nt=wn(function(c,f,b){return a_(c,no(f)||0,b)});function Ke(c){return ea(c,z)}function tt(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new Ur(o);var b=function(){var x=arguments,F=f?f.apply(this,x):x[0],Y=b.cache;if(Y.has(F))return Y.get(F);var re=c.apply(this,x);return b.cache=Y.set(F,re)||Y,re};return b.cache=new(tt.Cache||wo),b}tt.Cache=wo;function nn(c){if(typeof c!="function")throw new Ur(o);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function Gn(c){return $t(2,c)}var di=Yi(function(c,f){f=f.length==1&&_n(f[0])?vi(f[0],ts(jt())):vi(Qi(f,1),ts(jt()));var b=f.length;return wn(function(x){for(var F=-1,Y=Fr(x.length,b);++F<Y;)x[F]=f[F].call(this,x[F]);return hs(c,this,x)})}),ri=wn(function(c,f){var b=Co(f,ma(ri));return ea(c,V,t,f,b)}),bi=wn(function(c,f){var b=Co(f,ma(bi));return ea(c,X,t,f,b)}),na=Ks(function(c,f){return ea(c,P,t,t,t,f)});function Ar(c,f){if(typeof c!="function")throw new Ur(o);return f=f===t?f:Kt(f),wn(c,f)}function fh(c,f){if(typeof c!="function")throw new Ur(o);return f=f==null?0:rr(Kt(f),0),wn(function(b){var x=b[f],F=Na(b,0,f);return x&&Za(F,x),hs(c,this,F)})}function vy(c,f,b){var x=!0,F=!0;if(typeof c!="function")throw new Ur(o);return Mi(b)&&(x="leading"in b?!!b.leading:x,F="trailing"in b?!!b.trailing:F),jn(c,f,{leading:x,maxWait:f,trailing:F})}function xD(c){return dt(c,1)}function DD(c,f){return ri(ag(f),c)}function A1(){if(!arguments.length)return[];var c=arguments[0];return _n(c)?c:[c]}function ID(c){return Ms(c,v)}function _L(c,f){return f=typeof f=="function"?f:t,Ms(c,v,f)}function vL(c){return Ms(c,h|v)}function by(c,f){return f=typeof f=="function"?f:t,Ms(c,h|v,f)}function bL(c,f){return f==null||pu(c,f,Dr(f))}function Do(c,f){return c===f||c!==c&&f!==f}var CL=ah(wc),yL=ah(function(c,f){return c>=f}),tc=ig(function(){return arguments}())?ig:function(c){return ji(c)&&On.call(c,"callee")&&!mr.call(c,"callee")},_n=Ee.isArray,TD=qm?ts(qm):rg;function is(c){return c!=null&&Kp(c.length)&&!rl(c)}function Vi(c){return ji(c)&&is(c)}function kD(c){return c===!0||c===!1||ji(c)&&Tr(c)==Rt}var eu=g0||j0,Cy=Ga?ts(Ga):Ia;function wL(c){return ji(c)&&c.nodeType===1&&!Io(c)}function ND(c){if(c==null)return!0;if(is(c)&&(_n(c)||typeof c=="string"||typeof c.splice=="function"||eu(c)||Sd(c)||tc(c)))return!c.length;var f=xr(c);if(f==rn||f==ot)return!c.size;if(ta(c))return!Yl(c).length;for(var b in c)if(On.call(c,b))return!1;return!0}function AD(c,f){return ha(c,f)}function OD(c,f,b){b=typeof b=="function"?b:t;var x=b?b(c,f):t;return x===t?ha(c,f,t,b):!!x}function F0(c){if(!ji(c))return!1;var f=Tr(c);return f==Ut||f==gt||typeof c.message=="string"&&typeof c.name=="string"&&!Io(c)}function MD(c){return typeof c=="number"&&Qd(c)}function rl(c){if(!Mi(c))return!1;var f=Tr(c);return f==_t||f==sn||f==ct||f==At}function yy(c){return typeof c=="number"&&c==Kt(c)}function Kp(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ie}function Mi(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function ji(c){return c!=null&&typeof c=="object"}var wy=pc?ts(pc):xp;function RD(c,f){return c===f||th(c,f,pd(f))}function wd(c,f,b){return b=typeof b=="function"?b:t,th(c,f,pd(f),b)}function PD(c){return Sy(c)&&c!=+c}function FD(c){if(v_(c))throw new dn(s);return Dp(c)}function Gp(c){return c===null}function qi(c){return c==null}function Sy(c){return typeof c=="number"||ji(c)&&Tr(c)==on}function Io(c){if(!ji(c)||Tr(c)!=Ft)return!1;var f=Cn(c);if(f===null)return!0;var b=On.call(f,"constructor")&&f.constructor;return typeof b=="function"&&b instanceof b&&Bl.call(b)==e_}var Gs=dp?ts(dp):lo;function BD(c){return yy(c)&&c>=-ie&&c<=ie}var gh=Bh?ts(Bh):_u;function Yp(c){return typeof c=="string"||!_n(c)&&ji(c)&&Tr(c)==Mt}function Ys(c){return typeof c=="symbol"||ji(c)&&Tr(c)==cn}var Sd=l0?ts(l0):sg;function WD(c){return c===t}function VD(c){return ji(c)&&xr(c)==Pe}function Ly(c){return ji(c)&&Tr(c)==at}var HD=ah(ka),uf=ah(function(c,f){return c<=f});function O1(c){if(!c)return[];if(is(c))return Yp(c)?Ns(c):Zi(c);if(el&&c[el])return Zf(c[el]());var f=xr(c),b=f==rn?Xf:f==ot?Fl:Ld;return b(c)}function ia(c){if(!c)return c===0?c:0;if(c=no(c),c===ne||c===-ne){var f=c<0?-1:1;return f*te}return c===c?c:0}function Kt(c){var f=ia(c),b=f%1;return f===f?b?f-b:f:0}function to(c){return c?tl(Kt(c),0,K):0}function no(c){if(typeof c=="number")return c;if(Ys(c))return B;if(Mi(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=Mi(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=mc(c);var b=xe.test(c);return b||qe.test(c)?up(c.slice(2),b?2:8):fe.test(c)?B:+c}function Ey(c){return ms(c,ui(c))}function zD(c){return c?tl(Kt(c),-ie,ie):c===0?c:0}function ti(c){return c==null?"":Ls(c)}var UD=bu(function(c,f){if(ta(f)||is(f)){ms(f,Dr(f),c);return}for(var b in f)On.call(f,b)&&qu(c,b,f[b])}),xy=bu(function(c,f){ms(f,ui(f),c)}),Zp=bu(function(c,f,b,x){ms(f,ui(f),c,x)}),SL=bu(function(c,f,b,x){ms(f,Dr(f),c,x)}),B0=Ks(tg);function Dy(c,f){var b=zu(c);return f==null?b:Ss(b,f)}var $D=wn(function(c,f){c=li(c);var b=-1,x=f.length,F=x>2?f[2]:t;for(F&&Yr(f[0],f[1],F)&&(x=1);++b<x;)for(var Y=f[b],re=ui(Y),ue=-1,ve=re.length;++ue<ve;){var Fe=re[ue],Be=c[Fe];(Be===t||Do(Be,Ja[Fe])&&!On.call(c,Fe))&&(c[Fe]=Y[Fe])}return c}),LL=wn(function(c){return c.push(t,gd),hs(Iy,t,c)});function M1(c,f){return fp(c,jt(f,3),eo)}function nc(c,f){return fp(c,jt(f,3),mu)}function R_(c,f){return c==null?c:Kh(c,jt(f,3),ui)}function jD(c,f){return c==null?c:ng(c,jt(f,3),ui)}function qD(c,f){return c&&eo(c,jt(f,3))}function KD(c,f){return c&&mu(c,jt(f,3))}function GD(c){return c==null?[]:Gl(c,Dr(c))}function YD(c){return c==null?[]:Gl(c,ui(c))}function P_(c,f,b){var x=c==null?t:Jo(c,f);return x===t?b:x}function cf(c,f){return c!=null&&Fp(c,f,So)}function Ri(c,f){return c!=null&&Fp(c,f,ad)}var EL=w0(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=Zd.call(f)),c[f]=b},V0(Rs)),Ac=w0(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=Zd.call(f)),On.call(c,f)?c[f].push(b):c[f]=[b]},jt),xL=wn(da);function Dr(c){return is(c)?$u(c):Yl(c)}function ui(c){return is(c)?$u(c,!0):og(c)}function ZD(c,f){var b={};return f=jt(f,3),eo(c,function(x,F,Y){Qo(b,f(x,F,Y),x)}),b}function DL(c,f){var b={};return f=jt(f,3),eo(c,function(x,F,Y){Qo(b,F,f(x,F,Y))}),b}var R1=bu(function(c,f,b){Sc(c,f,b)}),Iy=bu(function(c,f,b,x){Sc(c,f,b,x)}),XD=Ks(function(c,f){var b={};if(c==null)return b;var x=!1;f=vi(f,function(Y){return Y=Wo(Y,c),x||(x=Y.length>1),Y}),ms(c,tf(c),b),x&&(b=Ms(b,h|p|v,p_));for(var F=f.length;F--;)Zh(b,f[F]);return b});function QD(c,f){return Ty(c,nn(jt(f)))}var JD=Ks(function(c,f){return c==null?{}:v0(c,f)});function Ty(c,f){if(c==null)return{};var b=vi(tf(c),function(x){return[x]});return f=jt(f),Zl(c,b,function(x,F){return f(x,F[0])})}function eI(c,f,b){f=Wo(f,c);var x=-1,F=f.length;for(F||(F=1,c=t);++x<F;){var Y=c==null?t:c[wr(f[x])];Y===t&&(x=F,Y=b),c=rl(Y)?Y.call(c):Y}return c}function tI(c,f,b){return c==null?c:Ku(c,f,b)}function nI(c,f,b,x){return x=typeof x=="function"?x:t,c==null?c:Ku(c,f,b,x)}var ky=g_(Dr),Ny=g_(ui);function iI(c,f,b){var x=_n(c),F=x||eu(c)||Sd(c);if(f=jt(f,4),b==null){var Y=c&&c.constructor;F?b=x?new Y:[]:Mi(c)?b=rl(Y)?zu(Cn(c)):{}:b={}}return(F?gi:eo)(c,function(re,ue,ve){return f(b,re,ue,ve)}),b}function rI(c,f){return c==null?!0:Zh(c,f)}function sI(c,f,b){return c==null?c:c_(c,f,ag(b))}function Ay(c,f,b,x){return x=typeof x=="function"?x:t,c==null?c:c_(c,f,ag(b),x)}function Ld(c){return c==null?[]:td(c,Dr(c))}function Oy(c){return c==null?[]:td(c,ui(c))}function oI(c,f,b){return b===t&&(b=f,f=t),b!==t&&(b=no(b),b=b===b?b:0),f!==t&&(f=no(f),f=f===f?f:0),tl(no(c),f,b)}function aI(c,f,b){return f=ia(f),b===t?(b=f,f=0):b=ia(b),c=no(c),ld(c,f,b)}function lI(c,f,b){if(b&&typeof b!="boolean"&&Yr(c,f,b)&&(f=b=t),b===t&&(typeof f=="boolean"?(b=f,f=t):typeof c=="boolean"&&(b=c,c=t)),c===t&&f===t?(c=0,f=1):(c=ia(c),f===t?(f=c,c=0):f=ia(f)),c>f){var x=c;c=f,f=x}if(b||c%1||f%1){var F=sd();return Fr(c+F*(f-c+jm("1e-"+((F+"").length-1))),f)}return vu(c,f)}var Pa=Vo(function(c,f,b){return f=f.toLowerCase(),c+(b?El(f):f)});function El(c){return W0(ti(c).toLowerCase())}function My(c){return c=ti(c),c&&c.replace(wt,Xm).replace(s0,"")}function uI(c,f,b){c=ti(c),f=Ls(f);var x=c.length;b=b===t?x:tl(Kt(b),0,x);var F=b;return b-=f.length,b>=0&&c.slice(b,F)==f}function cI(c){return c=ti(c),c&&Sa.test(c)?c.replace(Kn,e1):c}function IL(c){return c=ti(c),c&&me.test(c)?c.replace(ge,"\\$&"):c}var dI=Vo(function(c,f,b){return c+(b?"-":"")+f.toLowerCase()}),hI=Vo(function(c,f,b){return c+(b?" ":"")+f.toLowerCase()}),fI=dg("toLowerCase");function TL(c,f,b){c=ti(c),f=Kt(f);var x=f?fl(c):0;if(!f||x>=f)return c;var F=(f-x)/2;return fd(pl(F),b)+c+fd(Hl(F),b)}function gI(c,f,b){c=ti(c),f=Kt(f);var x=f?fl(c):0;return f&&x<f?c+fd(f-x,b):c}function pI(c,f,b){c=ti(c),f=Kt(f);var x=f?fl(c):0;return f&&x<f?fd(f-x,b)+c:c}function mI(c,f,b){return b||f==null?f=0:f&&(f=+f),rd(ti(c).replace(Le,""),f||0)}function kL(c,f,b){return(b?Yr(c,f,b):f===t)?f=1:f=Kt(f),cd(ti(c),f)}function NL(){var c=arguments,f=ti(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var _I=Vo(function(c,f,b){return c+(b?"_":"")+f.toLowerCase()});function vI(c,f,b){return b&&typeof b!="number"&&Yr(c,f,b)&&(f=b=t),b=b===t?K:b>>>0,b?(c=ti(c),c&&(typeof f=="string"||f!=null&&!Gs(f))&&(f=Ls(f),!f&&du(c))?Na(Ns(c),0,b):c.split(f,b)):[]}var bI=Vo(function(c,f,b){return c+(b?" ":"")+W0(f)});function CI(c,f,b){return c=ti(c),b=b==null?0:tl(Kt(b),0,c.length),f=Ls(f),c.slice(b,b+f.length)==f}function F_(c,f,b){var x=j.templateSettings;b&&Yr(c,f,b)&&(f=t),c=ti(c),f=Zp({},f,x,ef);var F=Zp({},f.imports,x.imports,ef),Y=Dr(F),re=td(F,Y),ue,ve,Fe=0,Be=f.interpolate||kt,Ue="__p += '",ht=nd((f.escape||kt).source+"|"+Be.source+"|"+(Be===vo?q:kt).source+"|"+(f.evaluate||kt).source+"|$","g"),Nt="//# sourceURL="+(On.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yb+"]")+`
`;c.replace(ht,function(Jt,An,Hn,Zs,_s,Xs){return Hn||(Hn=Zs),Ue+=c.slice(Fe,Xs).replace(fn,t1),An&&(ue=!0,Ue+=`' +
__e(`+An+`) +
'`),_s&&(ve=!0,Ue+=`';
`+_s+`;
__p += '`),Hn&&(Ue+=`' +
((__t = (`+Hn+`)) == null ? '' : __t) +
'`),Fe=Xs+Jt.length,Jt}),Ue+=`';
`;var Qt=On.call(f,"variable")&&f.variable;if(!Qt)Ue=`with (obj) {
`+Ue+`
}
`;else if(Dn.test(Qt))throw new dn(a);Ue=(ve?Ue.replace(Bs,""):Ue).replace(fi,"$1").replace(Ai,"$1;"),Ue="function("+(Qt||"obj")+`) {
`+(Qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ue?", __e = _.escape":"")+(ve?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ue+`return __p
}`;var Ln=Py(function(){return Wn(Y,Nt+"return "+Ue).apply(t,re)});if(Ln.source=Ue,F0(Ln))throw Ln;return Ln}function yI(c){return ti(c).toLowerCase()}function wI(c){return ti(c).toUpperCase()}function SI(c,f,b){if(c=ti(c),c&&(b||f===t))return mc(c);if(!c||!(f=Ls(f)))return c;var x=Ns(c),F=Ns(f),Y=_c(x,F),re=Gf(x,F)+1;return Na(x,Y,re).join("")}function LI(c,f,b){if(c=ti(c),c&&(b||f===t))return c.slice(0,_p(c)+1);if(!c||!(f=Ls(f)))return c;var x=Ns(c),F=Gf(x,Ns(f))+1;return Na(x,0,F).join("")}function EI(c,f,b){if(c=ti(c),c&&(b||f===t))return c.replace(Le,"");if(!c||!(f=Ls(f)))return c;var x=Ns(c),F=_c(x,Ns(f));return Na(x,F).join("")}function AL(c,f){var b=M,x=W;if(Mi(f)){var F="separator"in f?f.separator:F;b="length"in f?Kt(f.length):b,x="omission"in f?Ls(f.omission):x}c=ti(c);var Y=c.length;if(du(c)){var re=Ns(c);Y=re.length}if(b>=Y)return c;var ue=b-fl(x);if(ue<1)return x;var ve=re?Na(re,0,ue).join(""):c.slice(0,ue);if(F===t)return ve+x;if(re&&(ue+=ve.length-ue),Gs(F)){if(c.slice(ue).search(F)){var Fe,Be=ve;for(F.global||(F=nd(F.source,ti(le.exec(F))+"g")),F.lastIndex=0;Fe=F.exec(Be);)var Ue=Fe.index;ve=ve.slice(0,Ue===t?ue:Ue)}}else if(c.indexOf(Ls(F),ue)!=ue){var ht=ve.lastIndexOf(F);ht>-1&&(ve=ve.slice(0,ht))}return ve+x}function OL(c){return c=ti(c),c&&Pr.test(c)?c.replace(bs,h0):c}var xI=Vo(function(c,f,b){return c+(b?" ":"")+f.toUpperCase()}),W0=dg("toUpperCase");function Ry(c,f,b){return c=ti(c),f=b?t:f,f===t?Qm(c)?vp(c):Xb(c):c.match(f)||[]}var Py=wn(function(c,f){try{return hs(c,t,f)}catch(b){return F0(b)?b:new dn(b)}}),DI=Ks(function(c,f){return gi(f,function(b){b=wr(b),Qo(c,b,Gt(c[b],c))}),c});function II(c){var f=c==null?0:c.length,b=jt();return c=f?vi(c,function(x){if(typeof x[1]!="function")throw new Ur(o);return[b(x[0]),x[1]]}):[],wn(function(x){for(var F=-1;++F<f;){var Y=c[F];if(hs(Y[0],this,x))return hs(Y[1],this,x)}})}function TI(c){return u1(Ms(c,h))}function V0(c){return function(){return c}}function kI(c,f){return c==null||c!==c?f:c}var NI=hg(),AI=hg(!0);function Rs(c){return c}function H0(c){return Ta(typeof c=="function"?c:Ms(c,h))}function OI(c){return Bo(Ms(c,h))}function MI(c,f){return gs(c,Ms(f,h))}var RI=wn(function(c,f){return function(b){return da(b,c,f)}}),PI=wn(function(c,f){return function(b){return da(c,b,f)}});function z0(c,f,b){var x=Dr(f),F=Gl(f,x);b==null&&!(Mi(f)&&(F.length||!x.length))&&(b=f,f=c,c=this,F=Gl(f,Dr(f)));var Y=!(Mi(b)&&"chain"in b)||!!b.chain,re=rl(c);return gi(F,function(ue){var ve=f[ue];c[ue]=ve,re&&(c.prototype[ue]=function(){var Fe=this.__chain__;if(Y||Fe){var Be=c(this.__wrapped__),Ue=Be.__actions__=Zi(this.__actions__);return Ue.push({func:ve,args:arguments,thisArg:c}),Be.__chain__=Fe,Be}return ve.apply(c,Za([this.value()],arguments))})}),c}function FI(){return Gi._===this&&(Gi._=r1),this}function U0(){}function BI(c){return c=Kt(c),wn(function(f){return Tp(f,c)})}var WI=fg(vi),VI=fg(Km),HI=fg(ao);function Fy(c){return Sn(c)?Kf(wr(c)):Ws(c)}function By(c){return function(f){return c==null?t:Jo(c,f)}}var ML=f_(),RL=f_(!0);function $0(){return[]}function j0(){return!1}function zI(){return{}}function Wy(){return""}function UI(){return!0}function $I(c,f){if(c=Kt(c),c<1||c>ie)return[];var b=K,x=Fr(c,K);f=jt(f),c-=K;for(var F=gp(x,f);++b<c;)f(b);return F}function jI(c){return _n(c)?vi(c,wr):Ys(c)?[c]:Zi(wu(ti(c)))}function Du(c){var f=++Hh;return ti(c)+f}var Vy=oh(function(c,f){return c+f},0),qI=kr("ceil"),KI=oh(function(c,f){return c/f},1),GI=kr("floor");function YI(c){return c&&c.length?yc(c,Rs,wc):t}function Hy(c,f){return c&&c.length?yc(c,jt(f,2),wc):t}function ZI(c){return Zm(c,Rs)}function zy(c,f){return Zm(c,jt(f,2))}function XI(c){return c&&c.length?yc(c,Rs,ka):t}function QI(c,f){return c&&c.length?yc(c,jt(f,2),ka):t}var JI=oh(function(c,f){return c*f},1),eT=kr("round"),PL=oh(function(c,f){return c-f},0);function tT(c){return c&&c.length?Ea(c,Rs):0}function nT(c,f){return c&&c.length?Ea(c,jt(f,2)):0}return j.after=He,j.ary=dt,j.assign=UD,j.assignIn=xy,j.assignInWith=Zp,j.assignWith=SL,j.at=B0,j.before=$t,j.bind=Gt,j.bindAll=DI,j.bindKey=zt,j.castArray=A1,j.chain=$p,j.chunk=y_,j.compact=x0,j.concat=Ma,j.cond=II,j.conforms=TI,j.constant=V0,j.countBy=D1,j.create=Dy,j.curry=In,j.curryRight=Vn,j.debounce=jn,j.defaults=$D,j.defaultsDeep=LL,j.defer=uo,j.delay=nt,j.difference=Sr,j.differenceBy=zo,j.differenceWith=Eo,j.drop=va,j.dropRight=Jl,j.dropRightWhile=mg,j.dropWhile=xo,j.fill=_g,j.filter=N_,j.flatMap=R0,j.flatMapDeep=my,j.flatMapDepth=T1,j.flatten=vg,j.flattenDeep=vd,j.flattenDepth=Ra,j.flip=Ke,j.flow=NI,j.flowRight=AI,j.fromPairs=w_,j.functions=GD,j.functionsIn=YD,j.groupBy=P0,j.initial=zp,j.intersection=Lu,j.intersectionBy=wl,j.intersectionWith=S_,j.invert=EL,j.invertBy=Ac,j.invokeMap=k1,j.iteratee=H0,j.keyBy=N1,j.keys=Dr,j.keysIn=ui,j.map=Nc,j.mapKeys=ZD,j.mapValues=DL,j.matches=OI,j.matchesProperty=MI,j.memoize=tt,j.merge=R1,j.mergeWith=Iy,j.method=RI,j.methodOf=PI,j.mixin=z0,j.negate=nn,j.nthArg=BI,j.omit=XD,j.omitBy=QD,j.once=Gn,j.orderBy=O_,j.over=WI,j.overArgs=di,j.overEvery=VI,j.overSome=HI,j.partial=ri,j.partialRight=bi,j.partition=qp,j.pick=JD,j.pickBy=Ty,j.property=Fy,j.propertyOf=By,j.pull=L_,j.pullAll=bg,j.pullAllBy=il,j.pullAllWith=hh,j.pullAt=ec,j.range=ML,j.rangeRight=RL,j.rearg=na,j.reject=g,j.remove=Sl,j.rest=Ar,j.reverse=Cg,j.sampleSize=w,j.set=tI,j.setWith=nI,j.shuffle=T,j.slice=I0,j.sortBy=he,j.sortedUniq=x_,j.sortedUniqBy=of,j.split=vI,j.spread=fh,j.tail=C1,j.take=y1,j.takeRight=k0,j.takeRightWhile=D_,j.takeWhile=ly,j.tap=fy,j.throttle=vy,j.thru=Ll,j.toArray=O1,j.toPairs=ky,j.toPairsIn=Ny,j.toPath=jI,j.toPlainObject=Ey,j.transform=iI,j.unary=xD,j.union=Eu,j.unionBy=w1,j.unionWith=S1,j.uniq=af,j.uniqBy=L1,j.uniqWith=yg,j.unset=rI,j.unzip=wg,j.unzipWith=Vs,j.update=sI,j.updateWith=Ay,j.values=Ld,j.valuesIn=Oy,j.without=uy,j.words=Ry,j.wrap=DD,j.xor=I_,j.xorBy=cy,j.xorWith=dy,j.zip=E1,j.zipObject=x1,j.zipObjectDeep=hy,j.zipWith=xu,j.entries=ky,j.entriesIn=Ny,j.extend=xy,j.extendWith=Zp,z0(j,j),j.add=Vy,j.attempt=Py,j.camelCase=Pa,j.capitalize=El,j.ceil=qI,j.clamp=oI,j.clone=ID,j.cloneDeep=vL,j.cloneDeepWith=by,j.cloneWith=_L,j.conformsTo=bL,j.deburr=My,j.defaultTo=kI,j.divide=KI,j.endsWith=uI,j.eq=Do,j.escape=cI,j.escapeRegExp=IL,j.every=I1,j.find=Sg,j.findIndex=_d,j.findKey=M1,j.findLast=M0,j.findLastIndex=dh,j.findLastKey=nc,j.floor=GI,j.forEach=jp,j.forEachRight=Lg,j.forIn=R_,j.forInRight=jD,j.forOwn=qD,j.forOwnRight=KD,j.get=P_,j.gt=CL,j.gte=yL,j.has=cf,j.hasIn=Ri,j.head=bd,j.identity=Rs,j.includes=A_,j.indexOf=Su,j.inRange=aI,j.invoke=xL,j.isArguments=tc,j.isArray=_n,j.isArrayBuffer=TD,j.isArrayLike=is,j.isArrayLikeObject=Vi,j.isBoolean=kD,j.isBuffer=eu,j.isDate=Cy,j.isElement=wL,j.isEmpty=ND,j.isEqual=AD,j.isEqualWith=OD,j.isError=F0,j.isFinite=MD,j.isFunction=rl,j.isInteger=yy,j.isLength=Kp,j.isMap=wy,j.isMatch=RD,j.isMatchWith=wd,j.isNaN=PD,j.isNative=FD,j.isNil=qi,j.isNull=Gp,j.isNumber=Sy,j.isObject=Mi,j.isObjectLike=ji,j.isPlainObject=Io,j.isRegExp=Gs,j.isSafeInteger=BD,j.isSet=gh,j.isString=Yp,j.isSymbol=Ys,j.isTypedArray=Sd,j.isUndefined=WD,j.isWeakMap=VD,j.isWeakSet=Ly,j.join=Cd,j.kebabCase=dI,j.last=Es,j.lastIndexOf=Up,j.lowerCase=hI,j.lowerFirst=fI,j.lt=HD,j.lte=uf,j.max=YI,j.maxBy=Hy,j.mean=ZI,j.meanBy=zy,j.min=XI,j.minBy=QI,j.stubArray=$0,j.stubFalse=j0,j.stubObject=zI,j.stubString=Wy,j.stubTrue=UI,j.multiply=JI,j.nth=D0,j.noConflict=FI,j.noop=U0,j.now=ke,j.pad=TL,j.padEnd=gI,j.padStart=pI,j.parseInt=mI,j.random=lI,j.reduce=_y,j.reduceRight=M_,j.repeat=kL,j.replace=NL,j.result=eI,j.round=eT,j.runInContext=_e,j.sample=m,j.size=U,j.snakeCase=_I,j.some=Q,j.sortedIndex=E_,j.sortedIndexBy=v1,j.sortedIndexOf=yd,j.sortedLastIndex=b1,j.sortedLastIndexBy=T0,j.sortedLastIndexOf=sf,j.startCase=bI,j.startsWith=CI,j.subtract=PL,j.sum=tT,j.sumBy=nT,j.template=F_,j.times=$I,j.toFinite=ia,j.toInteger=Kt,j.toLength=to,j.toLower=yI,j.toNumber=no,j.toSafeInteger=zD,j.toString=ti,j.toUpper=wI,j.trim=SI,j.trimEnd=LI,j.trimStart=EI,j.truncate=AL,j.unescape=OL,j.uniqueId=Du,j.upperCase=xI,j.upperFirst=W0,j.each=jp,j.eachRight=Lg,j.first=bd,z0(j,function(){var c={};return eo(j,function(f,b){On.call(j.prototype,b)||(c[b]=f)}),c}(),{chain:!1}),j.VERSION=n,gi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){j[c].placeholder=j}),gi(["drop","take"],function(c,f){En.prototype[c]=function(b){b=b===t?1:rr(Kt(b),0);var x=this.__filtered__&&!f?new En(this):this.clone();return x.__filtered__?x.__takeCount__=Fr(b,x.__takeCount__):x.__views__.push({size:Fr(b,K),type:c+(x.__dir__<0?"Right":"")}),x},En.prototype[c+"Right"]=function(b){return this.reverse()[c](b).reverse()}}),gi(["filter","map","takeWhile"],function(c,f){var b=f+1,x=b==G||b==ee;En.prototype[c]=function(F){var Y=this.clone();return Y.__iteratees__.push({iteratee:jt(F,3),type:b}),Y.__filtered__=Y.__filtered__||x,Y}}),gi(["head","last"],function(c,f){var b="take"+(f?"Right":"");En.prototype[c]=function(){return this[b](1).value()[0]}}),gi(["initial","tail"],function(c,f){var b="drop"+(f?"":"Right");En.prototype[c]=function(){return this.__filtered__?new En(this):this[b](1)}}),En.prototype.compact=function(){return this.filter(Rs)},En.prototype.find=function(c){return this.filter(c).head()},En.prototype.findLast=function(c){return this.reverse().find(c)},En.prototype.invokeMap=wn(function(c,f){return typeof c=="function"?new En(this):this.map(function(b){return da(b,c,f)})}),En.prototype.reject=function(c){return this.filter(nn(jt(c)))},En.prototype.slice=function(c,f){c=Kt(c);var b=this;return b.__filtered__&&(c>0||f<0)?new En(b):(c<0?b=b.takeRight(-c):c&&(b=b.drop(c)),f!==t&&(f=Kt(f),b=f<0?b.dropRight(-f):b.take(f-c)),b)},En.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},En.prototype.toArray=function(){return this.take(K)},eo(En.prototype,function(c,f){var b=/^(?:filter|find|map|reject)|While$/.test(f),x=/^(?:head|last)$/.test(f),F=j[x?"take"+(f=="last"?"Right":""):f],Y=x||/^find/.test(f);F&&(j.prototype[f]=function(){var re=this.__wrapped__,ue=x?[1]:arguments,ve=re instanceof En,Fe=ue[0],Be=ve||_n(re),Ue=function(An){var Hn=F.apply(j,Za([An],ue));return x&&ht?Hn[0]:Hn};Be&&b&&typeof Fe=="function"&&Fe.length!=1&&(ve=Be=!1);var ht=this.__chain__,Nt=!!this.__actions__.length,Qt=Y&&!ht,Ln=ve&&!Nt;if(!Y&&Be){re=Ln?re:new En(this);var Jt=c.apply(re,ue);return Jt.__actions__.push({func:Ll,args:[Ue],thisArg:t}),new Wi(Jt,ht)}return Qt&&Ln?c.apply(this,ue):(Jt=this.thru(Ue),Qt?x?Jt.value()[0]:Jt.value():Jt)})}),gi(["pop","push","shift","sort","splice","unshift"],function(c){var f=Qa[c],b=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",x=/^(?:pop|shift)$/.test(c);j.prototype[c]=function(){var F=arguments;if(x&&!this.__chain__){var Y=this.value();return f.apply(_n(Y)?Y:[],F)}return this[b](function(re){return f.apply(_n(re)?re:[],F)})}}),eo(En.prototype,function(c,f){var b=j[f];if(b){var x=b.name+"";On.call(_l,x)||(_l[x]=[]),_l[x].push({name:f,func:b})}}),_l[Yu(t,k).name]=[{name:"wrapper",func:t}],En.prototype.clone=n_,En.prototype.reverse=i_,En.prototype.value=eg,j.prototype.at=T_,j.prototype.chain=lf,j.prototype.commit=k_,j.prototype.next=N0,j.prototype.plant=gy,j.prototype.reverse=O0,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=py,j.prototype.first=j.prototype.head,el&&(j.prototype[el]=A0),j},hu=n1();La?((La.exports=hu)._=hu,Fh._=hu):Gi._=hu}).call(oE)}),$_={browserCheck:function(){var e={};if($_.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge?\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox||e.edge)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=e,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=0;t>=1024;)t=Number((t/1024).toFixed(2)),i++;return"".concat(t," ").concat(n[i])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){var n=t;n||(n=window.location.href);var i=e.replace(/[\[\]]/g,"\\$&"),s=new RegExp("[?&]"+i+"(=([^&#]*)|&|#|$)"),o=s.exec(n);if(!o)return null;if(!o[2])return"";var a=decodeURIComponent(o[2].replace(/\+/g," "));if(a==="null")return null;if(a!=="undefined")return a},generateFullUrlPath:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new URLSearchParams(t),i=n.toString();return e+(i?"?".concat(i):"")},getQueryParameters:function(e){var t=new URLSearchParams(e),n=Object.fromEntries(t.entries());for(var i in n)n[i]==="null"&&(n[i]=null),n[i]==="undefined"&&(n[i]=void 0);return n},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){var n=e;if(!n||n===1/0)return"0%";n>1&&(n=1);var i=t||2;return i=Math.pow(10,i),Math.round(n*i*100)/i+"%"},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){var t=e;if(t==null||t==="")return"0";t="".concat(e);var n=t.split("."),i=Gq(n,2),s=i[0],o=i[1];return"".concat(s.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(o?".".concat(o):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),i=JSON.stringify(n,null,t||2);return i}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.sort(function(s,o){for(var a=0,l=0,u=n;l<u.length;l++){var d=u[l];if(a=d(s,o),a!==0)return a}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){var t=$_.trim(e);return t.charAt(0)==="{"&&t.charAt(t.length-1)==="}"||t.charAt(0)==="["&&t.charAt(t.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",i="ABCDEFGHIJKLMNOPQRSTUVXYZ";function s(u){var d=Math.random()*(u.length-1);return u.charAt(d)}for(var o="num",a="",l=0;l<e;l++)o==="num"?(a+=s(t),o="lower"):o==="lower"?(a+=s(n),o="upper"):o==="upper"&&(a+=s(i),o="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var i in t)if({}.hasOwnProperty.call(t,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!$_.isEqual(this.state,n)||!$_.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i>=1&&i<=126||i>=65376&&i<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,i=[],s=0;s*t<n;)i.push(e.slice(s*t,(s+1)*t)),s++;return i},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!$_.isObj(e)))return Object.entries(e).forEach(function(t){var n=Gq(t,2),i=n[0],s=n[1];s&&$_.isObj(s)?$_.removeEmpty(s):$_.isEmpty(s)&&delete e[i]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!c3.isPlainObject(e)||!c3.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var i=zfe({},e);return c3.forEach(t,function(s,o){o in e?i[o]=$_.mergeDeep(e[o],s):i[o]=s}),i},downLoadData:function(e){var t=e.url,n=e.payload,i=e.finallyCallback,s=e.successCallback,o=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return o(a);var l=a.headers.get("Content-type")||"";if(l.includes("application/json"))return o(a);var u=e.fileName;if(!u){var d=a.headers.get("Content-disposition")||"";u=d.split("filename=")[1]}a.blob().then(function(h){var p=URL.createObjectURL(h),v=document.createElement("a");v.setAttribute("href",p),v.setAttribute("download",decodeURIComponent(u||"")),v.click(),URL.revokeObjectURL(p),s&&s(a)})}).finally(function(){i&&i()})},isUtf8:function(e){var t=["","","","","",""];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,i;t="";var s=e.length||0;for(n=0;n<s;n++)i=e.charCodeAt(n),i>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}};gne(function(r,e){(function(t,n){r.exports=n()})(oE,function(){var t=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",d="week",h="month",p="quarter",v="year",C="date",S="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},O=function(R,G,Z){var ee=String(R);return!ee||ee.length>=G?R:""+Array(G+1-ee.length).join(Z)+R},H={s:O,z:function(R){var G=-R.utcOffset(),Z=Math.abs(G),ee=Math.floor(Z/60),ne=Z%60;return(G<=0?"+":"-")+O(ee,2,"0")+":"+O(ne,2,"0")},m:function R(G,Z){if(G.date()<Z.date())return-R(Z,G);var ee=12*(Z.year()-G.year())+(Z.month()-G.month()),ne=G.clone().add(ee,h),ie=Z-ne<0,te=G.clone().add(ee+(ie?-1:1),h);return+(-(ee+(Z-ne)/(ie?ne-te:te-ne))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:h,y:v,w:d,d:u,D:C,h:l,m:a,s:o,ms:s,Q:p}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},V="en",X={};X[V]=D;var $=function(R){return R instanceof W},P=function R(G,Z,ee){var ne;if(!G)return V;if(typeof G=="string"){var ie=G.toLowerCase();X[ie]&&(ne=ie),Z&&(X[ie]=Z,ne=ie);var te=G.split("-");if(!ne&&te.length>1)return R(te[0])}else{var B=G.name;X[B]=G,ne=B}return!ee&&ne&&(V=ne),ne||!ee&&V},z=function(R,G){if($(R))return R.clone();var Z=typeof G=="object"?G:{};return Z.date=R,Z.args=arguments,new W(Z)},M=H;M.l=P,M.i=$,M.w=function(R,G){return z(R,{locale:G.$L,utc:G.$u,x:G.$x,$offset:G.$offset})};var W=function(){function R(Z){this.$L=P(Z.locale,null,!0),this.parse(Z)}var G=R.prototype;return G.parse=function(Z){this.$d=function(ee){var ne=ee.date,ie=ee.utc;if(ne===null)return new Date(NaN);if(M.u(ne))return new Date;if(ne instanceof Date)return new Date(ne);if(typeof ne=="string"&&!/Z$/i.test(ne)){var te=ne.match(E);if(te){var B=te[2]-1||0,K=(te[7]||"0").substring(0,3);return ie?new Date(Date.UTC(te[1],B,te[3]||1,te[4]||0,te[5]||0,te[6]||0,K)):new Date(te[1],B,te[3]||1,te[4]||0,te[5]||0,te[6]||0,K)}}return new Date(ne)}(Z),this.$x=Z.x||{},this.init()},G.init=function(){var Z=this.$d;this.$y=Z.getFullYear(),this.$M=Z.getMonth(),this.$D=Z.getDate(),this.$W=Z.getDay(),this.$H=Z.getHours(),this.$m=Z.getMinutes(),this.$s=Z.getSeconds(),this.$ms=Z.getMilliseconds()},G.$utils=function(){return M},G.isValid=function(){return this.$d.toString()!==S},G.isSame=function(Z,ee){var ne=z(Z);return this.startOf(ee)<=ne&&ne<=this.endOf(ee)},G.isAfter=function(Z,ee){return z(Z)<this.startOf(ee)},G.isBefore=function(Z,ee){return this.endOf(ee)<z(Z)},G.$g=function(Z,ee,ne){return M.u(Z)?this[ee]:this.set(ne,Z)},G.unix=function(){return Math.floor(this.valueOf()/1e3)},G.valueOf=function(){return this.$d.getTime()},G.startOf=function(Z,ee){var ne=this,ie=!!M.u(ee)||ee,te=M.p(Z),B=function(Rt,Ye){var gt=M.w(ne.$u?Date.UTC(ne.$y,Ye,Rt):new Date(ne.$y,Ye,Rt),ne);return ie?gt:gt.endOf(u)},K=function(Rt,Ye){return M.w(ne.toDate()[Rt].apply(ne.toDate("s"),(ie?[0,0,0,0]:[23,59,59,999]).slice(Ye)),ne)},de=this.$W,ae=this.$M,De=this.$D,Me="set"+(this.$u?"UTC":"");switch(te){case v:return ie?B(1,0):B(31,11);case h:return ie?B(1,ae):B(0,ae+1);case d:var Qe=this.$locale().weekStart||0,ct=(de<Qe?de+7:de)-Qe;return B(ie?De-ct:De+(6-ct),ae);case u:case C:return K(Me+"Hours",0);case l:return K(Me+"Minutes",1);case a:return K(Me+"Seconds",2);case o:return K(Me+"Milliseconds",3);default:return this.clone()}},G.endOf=function(Z){return this.startOf(Z,!1)},G.$set=function(Z,ee){var ne,ie=M.p(Z),te="set"+(this.$u?"UTC":""),B=(ne={},ne[u]=te+"Date",ne[C]=te+"Date",ne[h]=te+"Month",ne[v]=te+"FullYear",ne[l]=te+"Hours",ne[a]=te+"Minutes",ne[o]=te+"Seconds",ne[s]=te+"Milliseconds",ne)[ie],K=ie===u?this.$D+(ee-this.$W):ee;if(ie===h||ie===v){var de=this.clone().set(C,1);de.$d[B](K),de.init(),this.$d=de.set(C,Math.min(this.$D,de.daysInMonth())).$d}else B&&this.$d[B](K);return this.init(),this},G.set=function(Z,ee){return this.clone().$set(Z,ee)},G.get=function(Z){return this[M.p(Z)]()},G.add=function(Z,ee){var ne,ie=this;Z=Number(Z);var te=M.p(ee),B=function(ae){var De=z(ie);return M.w(De.date(De.date()+Math.round(ae*Z)),ie)};if(te===h)return this.set(h,this.$M+Z);if(te===v)return this.set(v,this.$y+Z);if(te===u)return B(1);if(te===d)return B(7);var K=(ne={},ne[a]=n,ne[l]=i,ne[o]=t,ne)[te]||1,de=this.$d.getTime()+Z*K;return M.w(de,this)},G.subtract=function(Z,ee){return this.add(-1*Z,ee)},G.format=function(Z){var ee=this,ne=this.$locale();if(!this.isValid())return ne.invalidDate||S;var ie=Z||"YYYY-MM-DDTHH:mm:ssZ",te=M.z(this),B=this.$H,K=this.$m,de=this.$M,ae=ne.weekdays,De=ne.months,Me=function(Ye,gt,Ut,_t){return Ye&&(Ye[gt]||Ye(ee,ie))||Ut[gt].slice(0,_t)},Qe=function(Ye){return M.s(B%12||12,Ye,"0")},ct=ne.meridiem||function(Ye,gt,Ut){var _t=Ye<12?"AM":"PM";return Ut?_t.toLowerCase():_t},Rt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:de+1,MM:M.s(de+1,2,"0"),MMM:Me(ne.monthsShort,de,De,3),MMMM:Me(De,de),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:Me(ne.weekdaysMin,this.$W,ae,2),ddd:Me(ne.weekdaysShort,this.$W,ae,3),dddd:ae[this.$W],H:String(B),HH:M.s(B,2,"0"),h:Qe(1),hh:Qe(2),a:ct(B,K,!0),A:ct(B,K,!1),m:String(K),mm:M.s(K,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:te};return ie.replace(k,function(Ye,gt){return gt||Rt[Ye]||te.replace(":","")})},G.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},G.diff=function(Z,ee,ne){var ie,te=M.p(ee),B=z(Z),K=(B.utcOffset()-this.utcOffset())*n,de=this-B,ae=M.m(this,B);return ae=(ie={},ie[v]=ae/12,ie[h]=ae,ie[p]=ae/3,ie[d]=(de-K)/6048e5,ie[u]=(de-K)/864e5,ie[l]=de/i,ie[a]=de/n,ie[o]=de/t,ie)[te]||de,ne?ae:M.a(ae)},G.daysInMonth=function(){return this.endOf(h).$D},G.$locale=function(){return X[this.$L]},G.locale=function(Z,ee){if(!Z)return this.$L;var ne=this.clone(),ie=P(Z,ee,!0);return ie&&(ne.$L=ie),ne},G.clone=function(){return M.w(this.$d,this)},G.toDate=function(){return new Date(this.valueOf())},G.toJSON=function(){return this.isValid()?this.toISOString():null},G.toISOString=function(){return this.$d.toISOString()},G.toString=function(){return this.$d.toUTCString()},R}(),I=W.prototype;return z.prototype=I,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",h],["$y",v],["$D",C]].forEach(function(R){I[R[1]]=function(G){return this.$g(G,R[0],R[1])}}),z.extend=function(R,G){return R.$i||(R(G,W,z),R.$i=!0),z},z.locale=P,z.isDayjs=$,z.unix=function(R){return z(1e3*R)},z.en=X[V],z.Ls=X,z.p={},z})});const Ek=Ni("context-view"),d3=Ht(Ek,"content"),Gfe=Ht(Ek,"block"),pne=si(Ek,"shadow");var YT;(function(r){r.onHide="onHide"})(YT||(YT={}));const h3=new OP;function n2(r){const[e,t]=we.useState();return we.useEffect(()=>{t(Zx(r))},[]),e}function Zx(r={}){const{shadowOutline:e=!0}=r,t=ni(Ek,"fade-in");let n=kE(`.${Ek}`);const i=(u,d)=>{const h=kE("."+d3),p=d||(r==null?void 0:r.render);if(!p)throw new Error("ContextView show Error: the render parameter is required!");vM(pe.createElement("div",{ref:()=>{if(n){const v=hne(n,u);n.style.cssText=`
                    visibility: visible;
                    top: ${v.y}px;
                    left: ${v.x}px;
                `}}},p()),h)},s=()=>{if(n){const u=kE(`.${d3}`);u&&dne(u),n.style.visibility="hidden",h3.emit(YT.onHide)}},o=u=>{h3.subscribe(YT.onHide,u)},a=u=>{u.preventDefault(),u.stopPropagation(),s()},l=()=>{h3.unsubscribe(YT.onHide),s()};if(!n){n=document.createElement("div"),n.className=ni(t,$_.isMacOs()?"mac":""),n.style.visibility="hidden";const u=document.getElementById("molecule");u?u.appendChild(n):document.body.appendChild(n);const d=e===!1?"":pne;vM(pe.createElement(pe.Fragment,null,pe.createElement("div",{className:Gfe,onClick:a,onContextMenu:a}),pe.createElement("div",{className:ni(d3,d)})),n)}return{view:n,show:i,hide:s,onHide:o,dispose:l}}function PP(r){const{anchor:e,render:t}=r;if(!e)return;const n=Zx({render:t}),i=o=>{o.target===o.currentTarget&&(o.preventDefault(),n.show({x:o.clientX,y:o.clientY},t))};e.addEventListener("contextmenu",i);const s=()=>{n.hide(),e.removeEventListener("contextmenu",i)};return Object.assign(Object.assign({},n),{dispose:s})}function sr(r){return e=>e.id===r}function Nz(...r){return function(...e){r.filter(t=>!!t).forEach(t=>t==null?void 0:t(...e))}}function mne(){return Date.now()+Math.round(Math.random()*1e3)}function Az(r,e){for(const t in e)typeof r[t]=="object"&&e[t]?r[t]=Az(r[t],e[t]):r[t]=e[t];return r}function Yfe(r){const e={},t=(n,i)=>{for(const s in i)if(s){const o=i[s],a=n?`${n}.${s}`:s;typeof o=="object"?t(a,o):e[a]=o}};return t("",r),e}function Zfe(r){let e={};for(const t in r)if(t){const n=t.split(".");let i="",s={},o=s;for(let a=0;a<n.length&&a!==n.length;++a){const l=n[a],u={[l]:""};i&&(o[i]=u),o=u,i=l,a===0&&(s=u)}o[i]=r[t],e=Az(e,s)}return e}function Xfe(r){let e,t,n;if(r.match(/^rgb/)){const s=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||[];e=+s[1],t=+s[2],n=+s[3]}else{let s=+("0x"+r.slice(1,7));r.length<5&&(s=+("0x"+r.slice(1).replace(/./g,"$&$&").slice(0,6))),e=s>>16,t=s>>8&255,n=s&255}return Math.sqrt(.299*(e*e)+.587*(t*t)+.114*(n*n))>127.5?"light":"dark"}function Qfe(r,e){return r*e}function Jfe(r,e){const t=document.head.getElementsByClassName(e);if(t.length===0){const n=document.createElement("style");n.type="text/css",n.className=e,n.innerHTML=r,document.head.appendChild(n)}else t[0].innerHTML=r}const Hv=Ni("menu"),_ne=Ni("sub-menu"),ege=si(Hv,"vertical"),tge=si(Hv,"horizontal"),i2=Ht(Hv,"item"),nge=Ht(Hv,"divider"),vne=Ht(Hv,"check"),Oz=si(i2,"disabled"),ET=si(i2,"active"),bne=Ht(Hv,"label"),Cne=Ht(Hv,"content"),ige=Ht(Hv,"keybinding"),rge=Ht(Hv,"indicator"),sge=()=>pe.createElement("li",{className:ni(i2,Oz),role:"separator"},pe.createElement("a",{className:nge}));var oge=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function cs(r){const{className:e,type:t,children:n}=r,i=oge(r,["className","type","children"]);return t?typeof t=="string"?pe.createElement("span",Object.assign({className:ni(e,"codicon",t.includes("~spin")&&"codicon-spin",Ni(t.split("~spin")[0],"codicon"))},i)):t:n?pe.createElement("span",Object.assign({className:e},i),n):null}var age=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function yne(r){const{icon:e,disabled:t=!1,className:n,onClick:i,keybinding:s,render:o,children:a,name:l,title:u,id:d,sortIndex:h}=r,p=age(r,["icon","disabled","className","onClick","keybinding","render","children","name","title","id","sortIndex"]),v={onClick:function(C){i==null||i(C,r)}};return pe.createElement("li",Object.assign({className:ni(i2,n,t?Oz:null),id:d==null?void 0:d.toString(),"data-sort":h},typeof u=="string"?{title:u}:{},v,p),pe.createElement("div",{className:Cne},pe.createElement(cs,{type:e,className:vne}),pe.createElement("span",{className:bne,title:typeof l=="string"?l:""},o?o(r):a),s?pe.createElement("span",{className:ige},s):null))}var lge=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},wC;(function(r){r.Vertical="vertical",r.Horizontal="horizontal"})(wC||(wC={}));function wne(r){return r===wC.Horizontal}function Sne(r){const{className:e,name:t,render:n,data:i=[],mode:s=wC.Vertical,icon:o,disabled:a=!1,children:l,onClick:u,title:d,sortIndex:h}=r,p=lge(r,["className","name","render","data","mode","icon","disabled","children","onClick","title","sortIndex"]),v=ni(_ne,e),S=wne(s)?"down":"right",E=i.length>0?pe.createElement(Vc,Object.assign({className:v,style:{opacity:"0",pointerEvents:"none"},data:i,onClick:u},p)):pe.createElement(Vc,{className:v,style:{opacity:"0",pointerEvents:"none"},onClick:u},l);return pe.createElement("li",Object.assign({className:ni(i2,a?Oz:null),"data-submenu":!0,"data-mode":s,"data-sort":h},typeof d=="string"?{title:d}:{},p),pe.createElement("div",{className:Cne},typeof o=="string"?pe.createElement(cs,{className:vne,type:o||""}):o,pe.createElement("span",{className:bne},n?n(r):t),pe.createElement(cs,{className:rge,type:`chevron-${S}`})),E)}var uge=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const cge=r=>{if(r&&r!=null&&r.dataset.submenu){const e=Array.prototype.find.call(r.children,t=>t.nodeName==="UL");e.style.opacity="1",e.style.pointerEvents="auto",r.classList.add(ET)}},dge=(r,e,t=!1)=>{if(!r||!e)return;const n=r.getBoundingClientRect(),i=hne(e,n);if(t)i.y=i.y+n.height;else{i.x=i.x+n.width;const s=getComputedStyle(e).getPropertyValue("font-size"),o=Qfe(.5,parseInt(s.replace(/px/g,"")));i.y=i.y-o}e.style.top=`${i.y}px`,e.style.left=`${i.x}px`};function hge(r,e){const{className:t,mode:n=wC.Vertical,data:i=[],children:s,onClick:o,trigger:a="hover",title:l}=r,u=uge(r,["className","mode","data","children","onClick","trigger","title"]),d=we.useRef(null),h=we.useRef(!1);let p=t2(s,{onClick:o});const v=a==="hover"?200:0,C=n===wC.Horizontal?tge:ege,S=ni(Hv,C,t);if(i.length>0){const X=$=>$.map(P=>{if(P.type==="divider")return pe.createElement(sge,{key:P.id});const z=Nz(o,P.onClick);return P.data&&P.data.length>0?pe.createElement(Sne,Object.assign({key:P.id,mode:P.mode||n},P,{onClick:z}),X(P.data)):pe.createElement(yne,Object.assign({},P,{key:P.id,onClick:z}),P.name)});p=X(i)}const E=()=>{var X,$;(X=d.current)===null||X===void 0||X.querySelectorAll("ul").forEach(P=>{P.style.opacity="0",P.style.pointerEvents="none"}),($=d.current)===null||$===void 0||$.querySelectorAll(`li.${ET}`).forEach(P=>{P.classList.remove(ET)})},k=Is.debounce(X=>{if(h.current){const $=document.elementsFromPoint(X.pageX,X.pageY),P=$.find(I=>I.nodeName==="UL"),z=$.find(I=>I.nodeName==="LI");P&&(P.querySelectorAll("ul").forEach(I=>{I.style.opacity="0",I.style.pointerEvents="none"}),P.querySelectorAll(`li.${ET}`).forEach(I=>{I.classList.remove(ET)})),cge(z);const M=(z==null?void 0:z.querySelector("ul"))||void 0,W=(z==null?void 0:z.dataset.mode)||n;dge(z,M,wne(W))}},v),D=X=>{X.preventDefault(),X.persist(),X.stopPropagation(),h.current=!0,k(X)},O=()=>{h.current=!1},H=()=>S!=null&&S.includes(_ne)?{}:{onContextMenu:X=>{X.preventDefault(),X.persist(),X.stopPropagation()},onClick:X=>{X.preventDefault(),X.persist(),X.stopPropagation()},[fne(a)]:D,onMouseOut:O},V=we.useCallback(()=>{document.hidden&&E()},[]);return we.useEffect(()=>(window.addEventListener("contextmenu",E),window.addEventListener("click",E),window.addEventListener("visibilitychange",V),()=>{document.removeEventListener("contextmenu",E),window.removeEventListener("click",E),window.removeEventListener("visibilitychange",V)}),[]),we.useImperativeHandle(e,()=>({dispose:()=>{E()}})),pe.createElement("ul",Object.assign({className:S,ref:d},typeof l=="string"?{title:l}:{},H(),u),p)}const Vc=we.forwardRef(hge);function cl(){return cl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},cl.apply(null,arguments)}function au(r){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(r)}function fge(r,e){if(au(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Lne(r){var e=fge(r,"string");return au(e)=="symbol"?e:e+""}function zn(r,e,t){return(e=Lne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Zq(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function hi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zq(Object(t),!0).forEach(function(n){zn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Zq(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function gge(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}function CM(r,e){if(r==null)return{};var t,n,i=gge(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function $C(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Xq(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Lne(n.key),n)}}function jC(r,e,t){return e&&Xq(r.prototype,e),t&&Xq(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function yi(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function G9(r,e){return G9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},G9(r,e)}function US(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&G9(r,e)}function yM(r){return yM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yM(r)}function Ene(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ene=function(){return!!r})()}function pge(r,e){if(e&&(au(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yi(r)}function $S(r){var e=Ene();return function(){var t,n=yM(r);if(e){var i=yM(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pge(this,t)}}var xne=function(e){return+setTimeout(e,16)},Dne=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(xne=function(e){return window.requestAnimationFrame(e)},Dne=function(e){return window.cancelAnimationFrame(e)});var Qq=0,Mz=new Map;function Ine(r){Mz.delete(r)}var Cm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Qq+=1;var n=Qq;function i(s){if(s===0)Ine(n),e();else{var o=xne(function(){i(s-1)});Mz.set(n,o)}}return i(t),n};Cm.cancel=function(r){var e=Mz.get(r);return Ine(r),Dne(e)};function NE(r,e){if(!r)return!1;if(r.contains)return r.contains(e);for(var t=e;t;){if(t===r)return!0;t=t.parentNode}return!1}function Jq(r){return r instanceof HTMLElement||r instanceof SVGElement}function mge(r){return r&&au(r)==="object"&&Jq(r.nativeElement)?r.nativeElement:Jq(r)?r:null}function ZT(r){var e=mge(r);if(e)return e;if(r instanceof pe.Component){var t;return(t=Gw.findDOMNode)===null||t===void 0?void 0:t.call(Gw,r)}return null}var f3={exports:{}},Hs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eK;function _ge(){if(eK)return Hs;eK=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),C;C=Symbol.for("react.module.reference");function S(E){if(typeof E=="object"&&E!==null){var k=E.$$typeof;switch(k){case r:switch(E=E.type,E){case t:case i:case n:case u:case d:return E;default:switch(E=E&&E.$$typeof,E){case a:case o:case l:case p:case h:case s:return E;default:return k}}case e:return k}}}return Hs.ContextConsumer=o,Hs.ContextProvider=s,Hs.Element=r,Hs.ForwardRef=l,Hs.Fragment=t,Hs.Lazy=p,Hs.Memo=h,Hs.Portal=e,Hs.Profiler=i,Hs.StrictMode=n,Hs.Suspense=u,Hs.SuspenseList=d,Hs.isAsyncMode=function(){return!1},Hs.isConcurrentMode=function(){return!1},Hs.isContextConsumer=function(E){return S(E)===o},Hs.isContextProvider=function(E){return S(E)===s},Hs.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===r},Hs.isForwardRef=function(E){return S(E)===l},Hs.isFragment=function(E){return S(E)===t},Hs.isLazy=function(E){return S(E)===p},Hs.isMemo=function(E){return S(E)===h},Hs.isPortal=function(E){return S(E)===e},Hs.isProfiler=function(E){return S(E)===i},Hs.isStrictMode=function(E){return S(E)===n},Hs.isSuspense=function(E){return S(E)===u},Hs.isSuspenseList=function(E){return S(E)===d},Hs.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===t||E===i||E===n||E===u||E===d||E===v||typeof E=="object"&&E!==null&&(E.$$typeof===p||E.$$typeof===h||E.$$typeof===s||E.$$typeof===o||E.$$typeof===l||E.$$typeof===C||E.getModuleId!==void 0)},Hs.typeOf=S,Hs}var tK;function vge(){return tK||(tK=1,f3.exports=_ge()),f3.exports}var XT=vge();function bge(r,e,t){var n=we.useRef({});return(!("value"in n.current)||t(n.current.condition,e))&&(n.current.value=r(),n.current.condition=e),n.current.value}var Tne=function(e,t){typeof e=="function"?e(t):au(e)==="object"&&e&&"current"in e&&(e.current=t)},Rz=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);return i.length<=1?i[0]:function(s){t.forEach(function(o){Tne(o,s)})}},Cge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bge(function(){return Rz.apply(void 0,t)},t,function(i,s){return i.length!==s.length||i.every(function(o,a){return o!==s[a]})})},Pz=function(e){var t,n,i=XT.isMemo(e)?e.type.type:e.type;return!(typeof i=="function"&&!((t=i.prototype)!==null&&t!==void 0&&t.render)&&i.$$typeof!==XT.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==XT.ForwardRef)};function nK(r){return we.isValidElement(r)&&!XT.isFragment(r)}Number(we.version.split(".")[0])>=19;function xT(r,e,t,n){var i=Gw.unstable_batchedUpdates?function(o){Gw.unstable_batchedUpdates(t,o)}:t;return r!=null&&r.addEventListener&&r.addEventListener(e,i,n),{remove:function(){r!=null&&r.removeEventListener&&r.removeEventListener(e,i,n)}}}function jS(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var kne=we.forwardRef(function(r,e){var t=r.didUpdate,n=r.getContainer,i=r.children,s=we.useRef(),o=we.useRef();we.useImperativeHandle(e,function(){return{}});var a=we.useRef(!1);return!a.current&&jS()&&(o.current=n(),s.current=o.current.parentNode,a.current=!0),we.useEffect(function(){t==null||t(r)}),we.useEffect(function(){return o.current.parentNode===null&&s.current!==null&&s.current.appendChild(o.current),function(){var l;(l=o.current)===null||l===void 0||(l=l.parentNode)===null||l===void 0||l.removeChild(o.current)}},[]),o.current?Gw.createPortal(i,o.current):null}),g3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var iK;function yge(){return iK||(iK=1,function(r){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,n(a)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}r.exports?(t.default=t,r.exports=t):window.classNames=t})()}(g3)),g3.exports}var wge=yge();const Jg=Rm(wge);function Sge(r,e,t){return t?r[0]===e[0]:r[0]===e[0]&&r[1]===e[1]}function Lge(r,e,t){var n=r[e]||{};return hi(hi({},n),t)}function Ege(r,e,t,n){for(var i=t.points,s=Object.keys(r),o=0;o<s.length;o+=1){var a=s[o];if(Sge(r[a].points,i,n))return"".concat(e,"-placement-").concat(a)}return""}function xge(r){if(Array.isArray(r))return r}function Dge(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Y9(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Nne(r,e){if(r){if(typeof r=="string")return Y9(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Y9(r,e):void 0}}function Ige(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(r,e){return xge(r)||Dge(r,e)||Nne(r,e)||Ige()}const Tge=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4))};var kge=we.createContext({}),Nge=function(r){US(t,r);var e=$S(t);function t(){return $C(this,t),e.apply(this,arguments)}return jC(t,[{key:"render",value:function(){return this.props.children}}]),t}(we.Component);function Z9(r){var e=we.useRef();e.current=r;var t=we.useCallback(function(){for(var n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(s))},[]);return t}var rK=jS()?we.useLayoutEffect:we.useEffect,X9=function(e,t){var n=we.useRef(!0);rK(function(){return e(n.current)},t),rK(function(){return n.current=!1,function(){n.current=!0}},[])};function wM(r){var e=we.useRef(!1),t=we.useState(r),n=No(t,2),i=n[0],s=n[1];we.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(a,l){l&&e.current||s(a)}return[i,o]}function Age(r){if(Array.isArray(r))return Y9(r)}function Oge(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Mge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sK(r){return Age(r)||Oge(r)||Nne(r)||Mge()}var Q9={},Rge=function(e){};function Pge(r,e){}function Fge(r,e){}function Bge(){Q9={}}function Ane(r,e,t){!e&&!Q9[t]&&(r(!1,t),Q9[t]=!0)}function FP(r,e){Ane(Pge,r,e)}function Wge(r,e){Ane(Fge,r,e)}FP.preMessage=Rge;FP.resetWarned=Bge;FP.noteOnce=Wge;function Vge(r){var e=we.useReducer(function(a){return a+1},0),t=No(e,2),n=t[1],i=we.useRef(r),s=Z9(function(){return i.current}),o=Z9(function(a){i.current=typeof a=="function"?a(i.current):a,n()});return[s,o]}var U1="none",nA="appear",iA="enter",rA="leave",oK="none",im="prepare",hE="start",fE="active",Fz="end",One="prepared";function aK(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(r)]="webkit".concat(e),t["Moz".concat(r)]="moz".concat(e),t["ms".concat(r)]="MS".concat(e),t["O".concat(r)]="o".concat(e.toLowerCase()),t}function Hge(r,e){var t={animationend:aK("Animation","AnimationEnd"),transitionend:aK("Transition","TransitionEnd")};return r&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var zge=Hge(jS(),typeof window<"u"?window:{}),Mne={};if(jS()){var Uge=document.createElement("div");Mne=Uge.style}var sA={};function Rne(r){if(sA[r])return sA[r];var e=zge[r];if(e)for(var t=Object.keys(e),n=t.length,i=0;i<n;i+=1){var s=t[i];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Mne)return sA[r]=e[s],sA[r]}return""}var Pne=Rne("animationend"),Fne=Rne("transitionend"),Bne=!!(Pne&&Fne),lK=Pne||"animationend",uK=Fne||"transitionend";function cK(r,e){if(!r)return null;if(au(r)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return r[t]}return"".concat(r,"-").concat(e)}const $ge=function(r){var e=we.useRef();function t(i){i&&(i.removeEventListener(uK,r),i.removeEventListener(lK,r))}function n(i){e.current&&e.current!==i&&t(e.current),i&&i!==e.current&&(i.addEventListener(uK,r),i.addEventListener(lK,r),e.current=i)}return we.useEffect(function(){return function(){t(e.current)}},[]),[n,t]};var Wne=jS()?we.useLayoutEffect:we.useEffect;const jge=function(){var r=we.useRef(null);function e(){Cm.cancel(r.current)}function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Cm(function(){i<=1?n({isCanceled:function(){return s!==r.current}}):t(n,i-1)});r.current=s}return we.useEffect(function(){return function(){e()}},[]),[t,e]};var qge=[im,hE,fE,Fz],Kge=[im,One],Vne=!1,Gge=!0;function Hne(r){return r===fE||r===Fz}const Yge=function(r,e,t){var n=wM(oK),i=No(n,2),s=i[0],o=i[1],a=jge(),l=No(a,2),u=l[0],d=l[1];function h(){o(im,!0)}var p=e?Kge:qge;return Wne(function(){if(s!==oK&&s!==Fz){var v=p.indexOf(s),C=p[v+1],S=t(s);S===Vne?o(C,!0):C&&u(function(E){function k(){E.isCanceled()||o(C,!0)}S===!0?k():Promise.resolve(S).then(k)})}},[r,s]),we.useEffect(function(){return function(){d()}},[]),[h,s]};function Zge(r,e,t,n){var i=n.motionEnter,s=i===void 0?!0:i,o=n.motionAppear,a=o===void 0?!0:o,l=n.motionLeave,u=l===void 0?!0:l,d=n.motionDeadline,h=n.motionLeaveImmediately,p=n.onAppearPrepare,v=n.onEnterPrepare,C=n.onLeavePrepare,S=n.onAppearStart,E=n.onEnterStart,k=n.onLeaveStart,D=n.onAppearActive,O=n.onEnterActive,H=n.onLeaveActive,V=n.onAppearEnd,X=n.onEnterEnd,$=n.onLeaveEnd,P=n.onVisibleChanged,z=wM(),M=No(z,2),W=M[0],I=M[1],R=Vge(U1),G=No(R,2),Z=G[0],ee=G[1],ne=wM(null),ie=No(ne,2),te=ie[0],B=ie[1],K=Z(),de=we.useRef(!1),ae=we.useRef(null);function De(){return t()}var Me=we.useRef(!1);function Qe(){ee(U1),B(null,!0)}var ct=Z9(function(an){var ot=Z();if(ot!==U1){var Mt=De();if(!(an&&!an.deadline&&an.target!==Mt)){var cn=Me.current,bn;ot===nA&&cn?bn=V==null?void 0:V(Mt,an):ot===iA&&cn?bn=X==null?void 0:X(Mt,an):ot===rA&&cn&&(bn=$==null?void 0:$(Mt,an)),cn&&bn!==!1&&Qe()}}}),Rt=$ge(ct),Ye=No(Rt,1),gt=Ye[0],Ut=function(ot){switch(ot){case nA:return zn(zn(zn({},im,p),hE,S),fE,D);case iA:return zn(zn(zn({},im,v),hE,E),fE,O);case rA:return zn(zn(zn({},im,C),hE,k),fE,H);default:return{}}},_t=we.useMemo(function(){return Ut(K)},[K]),sn=Yge(K,!r,function(an){if(an===im){var ot=_t[im];return ot?ot(De()):Vne}if(qn in _t){var Mt;B(((Mt=_t[qn])===null||Mt===void 0?void 0:Mt.call(_t,De(),null))||null)}return qn===fE&&K!==U1&&(gt(De()),d>0&&(clearTimeout(ae.current),ae.current=setTimeout(function(){ct({deadline:!0})},d))),qn===One&&Qe(),Gge}),rn=No(sn,2),on=rn[0],qn=rn[1],Ft=Hne(qn);Me.current=Ft,Wne(function(){I(e);var an=de.current;de.current=!0;var ot;!an&&e&&a&&(ot=nA),an&&e&&s&&(ot=iA),(an&&!e&&u||!an&&h&&!e&&u)&&(ot=rA);var Mt=Ut(ot);ot&&(r||Mt[im])?(ee(ot),on()):ee(U1)},[e]),we.useEffect(function(){(K===nA&&!a||K===iA&&!s||K===rA&&!u)&&ee(U1)},[a,s,u]),we.useEffect(function(){return function(){de.current=!1,clearTimeout(ae.current)}},[]);var Pt=we.useRef(!1);we.useEffect(function(){W&&(Pt.current=!0),W!==void 0&&K===U1&&((Pt.current||W)&&(P==null||P(W)),Pt.current=!0)},[W,K]);var At=te;return _t[im]&&qn===hE&&(At=hi({transition:"none"},At)),[K,qn,At,W??e]}function Xge(r){var e=r;au(r)==="object"&&(e=r.transitionSupport);function t(i,s){return!!(i.motionName&&e&&s!==!1)}var n=we.forwardRef(function(i,s){var o=i.visible,a=o===void 0?!0:o,l=i.removeOnLeave,u=l===void 0?!0:l,d=i.forceRender,h=i.children,p=i.motionName,v=i.leavedClassName,C=i.eventProps,S=we.useContext(kge),E=S.motion,k=t(i,E),D=we.useRef(),O=we.useRef();function H(){try{return D.current instanceof HTMLElement?D.current:ZT(O.current)}catch{return null}}var V=Zge(k,a,H,i),X=No(V,4),$=X[0],P=X[1],z=X[2],M=X[3],W=we.useRef(M);M&&(W.current=!0);var I=we.useCallback(function(te){D.current=te,Tne(s,te)},[s]),R,G=hi(hi({},C),{},{visible:a});if(!h)R=null;else if($===U1)M?R=h(hi({},G),I):!u&&W.current&&v?R=h(hi(hi({},G),{},{className:v}),I):d||!u&&!v?R=h(hi(hi({},G),{},{style:{display:"none"}}),I):R=null;else{var Z;P===im?Z="prepare":Hne(P)?Z="active":P===hE&&(Z="start");var ee=cK(p,"".concat($,"-").concat(Z));R=h(hi(hi({},G),{},{className:Jg(cK(p,$),zn(zn({},ee,ee&&Z),p,typeof p=="string")),style:z}),I)}if(we.isValidElement(R)&&Pz(R)){var ne=R,ie=ne.ref;ie||(R=we.cloneElement(R,{ref:I}))}return we.createElement(Nge,{ref:O},R)});return n.displayName="CSSMotion",n}const Xx=Xge(Bne);var J9="add",e6="keep",t6="remove",p3="removed";function Qge(r){var e;return r&&au(r)==="object"&&"key"in r?e=r:e={key:r},hi(hi({},e),{},{key:String(e.key)})}function n6(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return r.map(Qge)}function Jge(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,i=e.length,s=n6(r),o=n6(e);s.forEach(function(u){for(var d=!1,h=n;h<i;h+=1){var p=o[h];if(p.key===u.key){n<h&&(t=t.concat(o.slice(n,h).map(function(v){return hi(hi({},v),{},{status:J9})})),n=h),t.push(hi(hi({},p),{},{status:e6})),n+=1,d=!0;break}}d||t.push(hi(hi({},u),{},{status:t6}))}),n<i&&(t=t.concat(o.slice(n).map(function(u){return hi(hi({},u),{},{status:J9})})));var a={};t.forEach(function(u){var d=u.key;a[d]=(a[d]||0)+1});var l=Object.keys(a).filter(function(u){return a[u]>1});return l.forEach(function(u){t=t.filter(function(d){var h=d.key,p=d.status;return h!==u||p!==t6}),t.forEach(function(d){d.key===u&&(d.status=e6)})}),t}var epe=["component","children","onVisibleChanged","onAllRemoved"],tpe=["status"],npe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ipe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xx,t=function(n){US(s,n);var i=$S(s);function s(){var o;$C(this,s);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return o=i.call.apply(i,[this].concat(l)),zn(yi(o),"state",{keyEntities:[]}),zn(yi(o),"removeKey",function(d){var h=o.state.keyEntities,p=h.map(function(v){return v.key!==d?v:hi(hi({},v),{},{status:p3})});return o.setState({keyEntities:p}),p.filter(function(v){var C=v.status;return C!==p3}).length}),o}return jC(s,[{key:"render",value:function(){var a=this,l=this.state.keyEntities,u=this.props,d=u.component,h=u.children,p=u.onVisibleChanged,v=u.onAllRemoved,C=CM(u,epe),S=d||we.Fragment,E={};return npe.forEach(function(k){E[k]=C[k],delete C[k]}),delete C.keys,we.createElement(S,C,l.map(function(k,D){var O=k.status,H=CM(k,tpe),V=O===J9||O===e6;return we.createElement(e,cl({},E,{key:H.key,visible:V,eventProps:H,onVisibleChanged:function($){if(p==null||p($,{key:H.key}),!$){var P=a.removeKey(H.key);P===0&&v&&v()}}}),function(X,$){return h(hi(hi({},X),{},{index:D}),$)})}))}}],[{key:"getDerivedStateFromProps",value:function(a,l){var u=a.keys,d=l.keyEntities,h=n6(u),p=Jge(d,h);return{keyEntities:p.filter(function(v){var C=d.find(function(S){var E=S.key;return v.key===E});return!(C&&C.status===p3&&v.status===t6)})}}}]),s}(we.Component);return zn(t,"defaultProps",{component:"div"}),t}ipe(Bne);function zne(r){var e=r.prefixCls,t=r.motion,n=r.animation,i=r.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:i?{motionName:i}:null)}function rpe(r){var e=r.prefixCls,t=r.visible,n=r.zIndex,i=r.mask,s=r.maskMotion,o=r.maskAnimation,a=r.maskTransitionName;if(!i)return null;var l={};return(s||a||o)&&(l=hi({motionAppear:!0},zne({motion:s,prefixCls:e,transitionName:a,animation:o}))),we.createElement(Xx,cl({},l,{visible:t,removeOnLeave:!0}),function(u){var d=u.className;return we.createElement("div",{style:{zIndex:n},className:Jg("".concat(e,"-mask"),d)})})}function dK(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function hK(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dK(Object(t),!0).forEach(function(n){spe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dK(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function i6(r){"@babel/helpers - typeof";return i6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i6(r)}function spe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var rT,ope={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function SM(){if(rT!==void 0)return rT;rT="";var r=document.createElement("p").style,e="Transform";for(var t in ope)t+e in r&&(rT=t);return rT}function Une(){return SM()?"".concat(SM(),"TransitionProperty"):"transitionProperty"}function BP(){return SM()?"".concat(SM(),"Transform"):"transform"}function fK(r,e){var t=Une();t&&(r.style[t]=e,t!=="transitionProperty"&&(r.style.transitionProperty=e))}function m3(r,e){var t=BP();t&&(r.style[t]=e,t!=="transform"&&(r.style.transform=e))}function ape(r){return r.style.transitionProperty||r.style[Une()]}function lpe(r){var e=window.getComputedStyle(r,null),t=e.getPropertyValue("transform")||e.getPropertyValue(BP());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var upe=/matrix\((.*)\)/,cpe=/matrix3d\((.*)\)/;function dpe(r,e){var t=window.getComputedStyle(r,null),n=t.getPropertyValue("transform")||t.getPropertyValue(BP());if(n&&n!=="none"){var i,s=n.match(upe);if(s)s=s[1],i=s.split(",").map(function(a){return parseFloat(a,10)}),i[4]=e.x,i[5]=e.y,m3(r,"matrix(".concat(i.join(","),")"));else{var o=n.match(cpe)[1];i=o.split(",").map(function(a){return parseFloat(a,10)}),i[12]=e.x,i[13]=e.y,m3(r,"matrix3d(".concat(i.join(","),")"))}}else m3(r,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var hpe=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r2;function gK(r){var e=r.style.display;r.style.display="none",r.offsetHeight,r.style.display=e}function AE(r,e,t){var n=t;if(i6(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&AE(r,i,e[i]);return}if(typeof n<"u"){typeof n=="number"&&(n="".concat(n,"px")),r.style[e]=n;return}return r2(r,e)}function fpe(r){var e,t,n,i=r.ownerDocument,s=i.body,o=i&&i.documentElement;return e=r.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=o.clientLeft||s.clientLeft||0,n-=o.clientTop||s.clientTop||0,{left:t,top:n}}function $ne(r,e){var t=r["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var i=r.document;t=i.documentElement[n],typeof t!="number"&&(t=i.body[n])}return t}function jne(r){return $ne(r)}function qne(r){return $ne(r,!0)}function xk(r){var e=fpe(r),t=r.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=jne(n),e.top+=qne(n),e}function Bz(r){return r!=null&&r==r.window}function Kne(r){return Bz(r)?r.document:r.nodeType===9?r:r.ownerDocument}function gpe(r,e,t){var n=t,i="",s=Kne(r);return n=n||s.defaultView.getComputedStyle(r,null),n&&(i=n.getPropertyValue(e)||n[e]),i}var ppe=new RegExp("^(".concat(hpe,")(?!px)[a-z%]+$"),"i"),mpe=/^(top|right|bottom|left)$/,_3="currentStyle",v3="runtimeStyle",Uy="left",_pe="px";function vpe(r,e){var t=r[_3]&&r[_3][e];if(ppe.test(t)&&!mpe.test(e)){var n=r.style,i=n[Uy],s=r[v3][Uy];r[v3][Uy]=r[_3][Uy],n[Uy]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+_pe,n[Uy]=i,r[v3][Uy]=s}return t===""?"auto":t}typeof window<"u"&&(r2=window.getComputedStyle?gpe:vpe);function oA(r,e){return r==="left"?e.useCssRight?"right":r:e.useCssBottom?"bottom":r}function pK(r){if(r==="left")return"right";if(r==="right")return"left";if(r==="top")return"bottom";if(r==="bottom")return"top"}function mK(r,e,t){AE(r,"position")==="static"&&(r.style.position="relative");var n=-999,i=-999,s=oA("left",t),o=oA("top",t),a=pK(s),l=pK(o);s!=="left"&&(n=999),o!=="top"&&(i=999);var u="",d=xk(r);("left"in e||"top"in e)&&(u=ape(r)||"",fK(r,"none")),"left"in e&&(r.style[a]="",r.style[s]="".concat(n,"px")),"top"in e&&(r.style[l]="",r.style[o]="".concat(i,"px")),gK(r);var h=xk(r),p={};for(var v in e)if(e.hasOwnProperty(v)){var C=oA(v,t),S=v==="left"?n:i,E=d[v]-h[v];C===v?p[C]=S+E:p[C]=S-E}AE(r,p),gK(r),("left"in e||"top"in e)&&fK(r,u);var k={};for(var D in e)if(e.hasOwnProperty(D)){var O=oA(D,t),H=e[D]-d[D];D===O?k[O]=p[O]+H:k[O]=p[O]-H}AE(r,k)}function bpe(r,e){var t=xk(r),n=lpe(r),i={x:n.x,y:n.y};"left"in e&&(i.x=n.x+e.left-t.left),"top"in e&&(i.y=n.y+e.top-t.top),dpe(r,i)}function Cpe(r,e,t){if(t.ignoreShake){var n=xk(r),i=n.left.toFixed(0),s=n.top.toFixed(0),o=e.left.toFixed(0),a=e.top.toFixed(0);if(i===o&&s===a)return}t.useCssRight||t.useCssBottom?mK(r,e,t):t.useCssTransform&&BP()in document.body.style?bpe(r,e):mK(r,e,t)}function Wz(r,e){for(var t=0;t<r.length;t++)e(r[t])}function Gne(r){return r2(r,"boxSizing")==="border-box"}var ype=["margin","border","padding"],r6=-1,wpe=2,s6=1,Spe=0;function Lpe(r,e,t){var n={},i=r.style,s;for(s in e)e.hasOwnProperty(s)&&(n[s]=i[s],i[s]=e[s]);t.call(r);for(s in e)e.hasOwnProperty(s)&&(i[s]=n[s])}function DT(r,e,t){var n=0,i,s,o;for(s=0;s<e.length;s++)if(i=e[s],i)for(o=0;o<t.length;o++){var a=void 0;i==="border"?a="".concat(i).concat(t[o],"Width"):a=i+t[o],n+=parseFloat(r2(r,a))||0}return n}var mv={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};Wz(["Width","Height"],function(r){mv["doc".concat(r)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(r)],t.body["scroll".concat(r)],mv["viewport".concat(r)](t))},mv["viewport".concat(r)]=function(e){var t="client".concat(r),n=e.document,i=n.body,s=n.documentElement,o=s[t];return n.compatMode==="CSS1Compat"&&o||i&&i[t]||o}});function _K(r,e,t){var n=t;if(Bz(r))return e==="width"?mv.viewportWidth(r):mv.viewportHeight(r);if(r.nodeType===9)return e==="width"?mv.docWidth(r):mv.docHeight(r);var i=e==="width"?["Left","Right"]:["Top","Bottom"],s=Math.floor(e==="width"?r.getBoundingClientRect().width:r.getBoundingClientRect().height),o=Gne(r),a=0;(s==null||s<=0)&&(s=void 0,a=r2(r,e),(a==null||Number(a)<0)&&(a=r.style[e]||0),a=Math.floor(parseFloat(a))||0),n===void 0&&(n=o?s6:r6);var l=s!==void 0||o,u=s||a;return n===r6?l?u-DT(r,["border","padding"],i):a:l?n===s6?u:u+(n===wpe?-DT(r,["border"],i):DT(r,["margin"],i)):a+DT(r,ype.slice(n),i)}var Epe={position:"absolute",visibility:"hidden",display:"block"};function vK(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n,i=e[0];return i.offsetWidth!==0?n=_K.apply(void 0,e):Lpe(i,Epe,function(){n=_K.apply(void 0,e)}),n}Wz(["width","height"],function(r){var e=r.charAt(0).toUpperCase()+r.slice(1);mv["outer".concat(e)]=function(n,i){return n&&vK(n,r,i?Spe:s6)};var t=r==="width"?["Left","Right"]:["Top","Bottom"];mv[r]=function(n,i){var s=i;if(s!==void 0){if(n){var o=Gne(n);return o&&(s+=DT(n,["padding","border"],t)),AE(n,r,s)}return}return n&&vK(n,r,r6)}});function Yne(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}var or={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Kne,offset:function(e,t,n){if(typeof t<"u")Cpe(e,t,n||{});else return xk(e)},isWindow:Bz,each:Wz,css:AE,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var i=e.overflow;if(i)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Yne,getWindowScrollLeft:function(e){return jne(e)},getWindowScrollTop:function(e){return qne(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)or.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};Yne(or,mv);var b3=or.getParent;function o6(r){if(or.isWindow(r)||r.nodeType===9)return null;var e=or.getDocument(r),t=e.body,n,i=or.css(r,"position"),s=i==="fixed"||i==="absolute";if(!s)return r.nodeName.toLowerCase()==="html"?null:b3(r);for(n=b3(r);n&&n!==t&&n.nodeType!==9;n=b3(n))if(i=or.css(n,"position"),i!=="static")return n;return null}var bK=or.getParent;function xpe(r){if(or.isWindow(r)||r.nodeType===9)return!1;var e=or.getDocument(r),t=e.body,n=null;for(n=bK(r);n&&n!==t&&n!==e;n=bK(n)){var i=or.css(n,"position");if(i==="fixed")return!0}return!1}function Vz(r,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=o6(r),i=or.getDocument(r),s=i.defaultView||i.parentWindow,o=i.body,a=i.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==o&&n!==a&&or.css(n,"overflow")!=="visible"){var l=or.offset(n);l.left+=n.clientLeft,l.top+=n.clientTop,t.top=Math.max(t.top,l.top),t.right=Math.min(t.right,l.left+n.clientWidth),t.bottom=Math.min(t.bottom,l.top+n.clientHeight),t.left=Math.max(t.left,l.left)}else if(n===o||n===a)break;n=o6(n)}var u=null;if(!or.isWindow(r)&&r.nodeType!==9){u=r.style.position;var d=or.css(r,"position");d==="absolute"&&(r.style.position="fixed")}var h=or.getWindowScrollLeft(s),p=or.getWindowScrollTop(s),v=or.viewportWidth(s),C=or.viewportHeight(s),S=a.scrollWidth,E=a.scrollHeight,k=window.getComputedStyle(o);if(k.overflowX==="hidden"&&(S=s.innerWidth),k.overflowY==="hidden"&&(E=s.innerHeight),r.style&&(r.style.position=u),e||xpe(r))t.left=Math.max(t.left,h),t.top=Math.max(t.top,p),t.right=Math.min(t.right,h+v),t.bottom=Math.min(t.bottom,p+C);else{var D=Math.max(S,h+v);t.right=Math.min(t.right,D);var O=Math.max(E,p+C);t.bottom=Math.min(t.bottom,O)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function Dpe(r,e,t,n){var i=or.clone(r),s={width:e.width,height:e.height};return n.adjustX&&i.left<t.left&&(i.left=t.left),n.resizeWidth&&i.left>=t.left&&i.left+s.width>t.right&&(s.width-=i.left+s.width-t.right),n.adjustX&&i.left+s.width>t.right&&(i.left=Math.max(t.right-s.width,t.left)),n.adjustY&&i.top<t.top&&(i.top=t.top),n.resizeHeight&&i.top>=t.top&&i.top+s.height>t.bottom&&(s.height-=i.top+s.height-t.bottom),n.adjustY&&i.top+s.height>t.bottom&&(i.top=Math.max(t.bottom-s.height,t.top)),or.mix(i,s)}function Hz(r){var e,t,n;if(!or.isWindow(r)&&r.nodeType!==9)e=or.offset(r),t=or.outerWidth(r),n=or.outerHeight(r);else{var i=or.getWindow(r);e={left:or.getWindowScrollLeft(i),top:or.getWindowScrollTop(i)},t=or.viewportWidth(i),n=or.viewportHeight(i)}return e.width=t,e.height=n,e}function CK(r,e){var t=e.charAt(0),n=e.charAt(1),i=r.width,s=r.height,o=r.left,a=r.top;return t==="c"?a+=s/2:t==="b"&&(a+=s),n==="c"?o+=i/2:n==="r"&&(o+=i),{left:o,top:a}}function aA(r,e,t,n,i){var s=CK(e,t[1]),o=CK(r,t[0]),a=[o.left-s.left,o.top-s.top];return{left:Math.round(r.left-a[0]+n[0]-i[0]),top:Math.round(r.top-a[1]+n[1]-i[1])}}function yK(r,e,t){return r.left<t.left||r.left+e.width>t.right}function wK(r,e,t){return r.top<t.top||r.top+e.height>t.bottom}function Ipe(r,e,t){return r.left>t.right||r.left+e.width<t.left}function Tpe(r,e,t){return r.top>t.bottom||r.top+e.height<t.top}function lA(r,e,t){var n=[];return or.each(r,function(i){n.push(i.replace(e,function(s){return t[s]}))}),n}function uA(r,e){return r[e]=-r[e],r}function SK(r,e){var t;return/%$/.test(r)?t=parseInt(r.substring(0,r.length-1),10)/100*e:t=parseInt(r,10),t||0}function LK(r,e){r[0]=SK(r[0],e.width),r[1]=SK(r[1],e.height)}function Zne(r,e,t,n){var i=t.points,s=t.offset||[0,0],o=t.targetOffset||[0,0],a=t.overflow,l=t.source||r;s=[].concat(s),o=[].concat(o),a=a||{};var u={},d=0,h=!!(a&&a.alwaysByViewport),p=Vz(l,h),v=Hz(l);LK(s,v),LK(o,e);var C=aA(v,e,i,s,o),S=or.merge(v,C);if(p&&(a.adjustX||a.adjustY)&&n){if(a.adjustX&&yK(C,v,p)){var E=lA(i,/[lr]/gi,{l:"r",r:"l"}),k=uA(s,0),D=uA(o,0),O=aA(v,e,E,k,D);Ipe(O,v,p)||(d=1,i=E,s=k,o=D)}if(a.adjustY&&wK(C,v,p)){var H=lA(i,/[tb]/gi,{t:"b",b:"t"}),V=uA(s,1),X=uA(o,1),$=aA(v,e,H,V,X);Tpe($,v,p)||(d=1,i=H,s=V,o=X)}d&&(C=aA(v,e,i,s,o),or.mix(S,C));var P=yK(C,v,p),z=wK(C,v,p);if(P||z){var M=i;P&&(M=lA(i,/[lr]/gi,{l:"r",r:"l"})),z&&(M=lA(i,/[tb]/gi,{t:"b",b:"t"})),i=M,s=t.offset||[0,0],o=t.targetOffset||[0,0]}u.adjustX=a.adjustX&&P,u.adjustY=a.adjustY&&z,(u.adjustX||u.adjustY)&&(S=Dpe(C,v,p,u))}return S.width!==v.width&&or.css(l,"width",or.width(l)+S.width-v.width),S.height!==v.height&&or.css(l,"height",or.height(l)+S.height-v.height),or.offset(l,{left:S.left,top:S.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:i,offset:s,targetOffset:o,overflow:u}}function kpe(r,e){var t=Vz(r,e),n=Hz(r);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function zz(r,e,t){var n=t.target||e,i=Hz(n),s=!kpe(n,t.overflow&&t.overflow.alwaysByViewport);return Zne(r,i,t,s)}zz.__getOffsetParent=o6;zz.__getVisibleRectForElement=Vz;function Npe(r,e,t){var n,i,s=or.getDocument(r),o=s.defaultView||s.parentWindow,a=or.getWindowScrollLeft(o),l=or.getWindowScrollTop(o),u=or.viewportWidth(o),d=or.viewportHeight(o);"pageX"in e?n=e.pageX:n=a+e.clientX,"pageY"in e?i=e.pageY:i=l+e.clientY;var h={left:n,top:i,width:0,height:0},p=n>=0&&n<=a+u&&i>=0&&i<=l+d,v=[t.points[0],"cc"];return Zne(r,h,hK(hK({},t),{},{points:v}),p)}function Ape(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=n.has(s);if(FP(!l,"Warning: There may be circular references"),l)return!1;if(s===o)return!0;if(t&&a>1)return!1;n.add(s);var u=a+1;if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(var d=0;d<s.length;d++)if(!i(s[d],o[d],u))return!1;return!0}if(s&&o&&au(s)==="object"&&au(o)==="object"){var h=Object.keys(s);return h.length!==Object.keys(o).length?!1:h.every(function(p){return i(s[p],o[p],u)})}return!1}return i(r,e)}const Ope=function(r){if(!r)return!1;if(r instanceof Element){if(r.offsetParent)return!0;if(r.getBBox){var e=r.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(r.getBoundingClientRect){var i=r.getBoundingClientRect(),s=i.width,o=i.height;if(s||o)return!0}}return!1},Mpe=function(r,e){var t=pe.useRef(!1),n=pe.useRef(null);function i(){window.clearTimeout(n.current)}function s(o){if(i(),!t.current||o===!0){if(r(o)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,s()},e)}return[s,function(){t.current=!1,i()}]};var Xne=function(){if(typeof Map<"u")return Map;function r(e,t){var n=-1;return e.some(function(i,s){return i[0]===t?(n=s,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=r(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(t,n){var i=r(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,i=r(n,t);~i&&n.splice(i,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];t.call(n,o[1],o[0])}},e}()}(),a6=typeof window<"u"&&typeof document<"u"&&window.document===document,LM=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Rpe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(LM):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),Ppe=2;function Fpe(r,e){var t=!1,n=!1,i=0;function s(){t&&(t=!1,r()),n&&a()}function o(){Rpe(s)}function a(){var l=Date.now();if(t){if(l-i<Ppe)return;n=!0}else t=!0,n=!1,setTimeout(o,e);i=l}return a}var Bpe=20,Wpe=["top","right","bottom","left","width","height","size","weight"],Vpe=typeof MutationObserver<"u",Hpe=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Fpe(this.refresh.bind(this),Bpe)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!a6||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Vpe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!a6||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,i=Wpe.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),Qne=function(r,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];Object.defineProperty(r,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return r},sx=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||LM},Jne=WP(0,0,0,0);function EM(r){return parseFloat(r)||0}function EK(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,i){var s=r["border-"+i+"-width"];return n+EM(s)},0)}function zpe(r){for(var e=["top","right","bottom","left"],t={},n=0,i=e;n<i.length;n++){var s=i[n],o=r["padding-"+s];t[s]=EM(o)}return t}function Upe(r){var e=r.getBBox();return WP(0,0,e.width,e.height)}function $pe(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return Jne;var n=sx(r).getComputedStyle(r),i=zpe(n),s=i.left+i.right,o=i.top+i.bottom,a=EM(n.width),l=EM(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=EK(n,"left","right")+s),Math.round(l+o)!==t&&(l-=EK(n,"top","bottom")+o)),!qpe(r)){var u=Math.round(a+s)-e,d=Math.round(l+o)-t;Math.abs(u)!==1&&(a-=u),Math.abs(d)!==1&&(l-=d)}return WP(i.left,i.top,a,l)}var jpe=function(){return typeof SVGGraphicsElement<"u"?function(r){return r instanceof sx(r).SVGGraphicsElement}:function(r){return r instanceof sx(r).SVGElement&&typeof r.getBBox=="function"}}();function qpe(r){return r===sx(r).document.documentElement}function Kpe(r){return a6?jpe(r)?Upe(r):$pe(r):Jne}function Gpe(r){var e=r.x,t=r.y,n=r.width,i=r.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return Qne(o,{x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:i+t,left:e}),o}function WP(r,e,t,n){return{x:r,y:e,width:t,height:n}}var Ype=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=WP(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=Kpe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),Zpe=function(){function r(e,t){var n=Gpe(t);Qne(this,{target:e,contentRect:n})}return r}(),Xpe=function(){function r(e,t,n){if(this.activeObservations_=[],this.observations_=new Xne,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof sx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Ype(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof sx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Zpe(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),eie=typeof WeakMap<"u"?new WeakMap:new Xne,tie=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Hpe.getInstance(),n=new Xpe(e,t,this);eie.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){tie.prototype[r]=function(){var e;return(e=eie.get(this))[r].apply(e,arguments)}});var nie=function(){return typeof LM.ResizeObserver<"u"?LM.ResizeObserver:tie}();function Qpe(r,e){return r===e?!0:!r||!e?!1:"pageX"in e&&"pageY"in e?r.pageX===e.pageX&&r.pageY===e.pageY:"clientX"in e&&"clientY"in e?r.clientX===e.clientX&&r.clientY===e.clientY:!1}function Jpe(r,e){r!==document.activeElement&&NE(e,r)&&typeof r.focus=="function"&&r.focus()}function xK(r,e){var t=null,n=null;function i(o){var a=No(o,1),l=a[0].target;if(document.documentElement.contains(l)){var u=l.getBoundingClientRect(),d=u.width,h=u.height,p=Math.floor(d),v=Math.floor(h);(t!==p||n!==v)&&Promise.resolve().then(function(){e({width:p,height:v})}),t=p,n=v}}var s=new nie(i);return r&&s.observe(r),function(){s.disconnect()}}function DK(r){return typeof r!="function"?null:r()}function IK(r){return au(r)!=="object"||!r?null:r}var eme=function(e,t){var n=e.children,i=e.disabled,s=e.target,o=e.align,a=e.onAlign,l=e.monitorWindowResize,u=e.monitorBufferTime,d=u===void 0?0:u,h=pe.useRef({}),p=pe.useRef(),v=pe.Children.only(n),C=pe.useRef({});C.current.disabled=i,C.current.target=s,C.current.align=o,C.current.onAlign=a;var S=Mpe(function(){var W=C.current,I=W.disabled,R=W.target,G=W.align,Z=W.onAlign,ee=p.current;if(!I&&R&&ee){var ne,ie=DK(R),te=IK(R);h.current.element=ie,h.current.point=te,h.current.align=G;var B=document,K=B.activeElement;return ie&&Ope(ie)?ne=zz(ee,ie,G):te&&(ne=Npe(ee,te,G)),Jpe(K,ee),Z&&ne&&Z(ee,ne),!0}return!1},d),E=No(S,2),k=E[0],D=E[1],O=pe.useState(),H=No(O,2),V=H[0],X=H[1],$=pe.useState(),P=No($,2),z=P[0],M=P[1];return X9(function(){X(DK(s)),M(IK(s))}),pe.useEffect(function(){(h.current.element!==V||!Qpe(h.current.point,z)||!Ape(h.current.align,o))&&k()}),pe.useEffect(function(){var W=xK(p.current,k);return W},[p.current]),pe.useEffect(function(){var W=xK(V,k);return W},[V]),pe.useEffect(function(){i?D():k()},[i]),pe.useEffect(function(){if(l){var W=xT(window,"resize",k);return W.remove}},[l]),pe.useEffect(function(){return function(){D()}},[]),pe.useImperativeHandle(t,function(){return{forceAlign:function(){return k(!0)}}}),pe.isValidElement(v)&&(v=pe.cloneElement(v,{ref:Rz(v.ref,p)})),v},iie=pe.forwardRef(eme);iie.displayName="Align";function l6(){l6=function(){return e};var r,e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(ee,ne,ie){ee[ne]=ie.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(ee,ne,ie){return Object.defineProperty(ee,ne,{value:ie,enumerable:!0,configurable:!0,writable:!0}),ee[ne]}try{u({},"")}catch{u=function(ie,te,B){return ie[te]=B}}function d(ee,ne,ie,te){var B=ne&&ne.prototype instanceof k?ne:k,K=Object.create(B.prototype),de=new G(te||[]);return i(K,"_invoke",{value:M(ee,ie,de)}),K}function h(ee,ne,ie){try{return{type:"normal",arg:ee.call(ne,ie)}}catch(te){return{type:"throw",arg:te}}}e.wrap=d;var p="suspendedStart",v="suspendedYield",C="executing",S="completed",E={};function k(){}function D(){}function O(){}var H={};u(H,o,function(){return this});var V=Object.getPrototypeOf,X=V&&V(V(Z([])));X&&X!==t&&n.call(X,o)&&(H=X);var $=O.prototype=k.prototype=Object.create(H);function P(ee){["next","throw","return"].forEach(function(ne){u(ee,ne,function(ie){return this._invoke(ne,ie)})})}function z(ee,ne){function ie(B,K,de,ae){var De=h(ee[B],ee,K);if(De.type!=="throw"){var Me=De.arg,Qe=Me.value;return Qe&&au(Qe)=="object"&&n.call(Qe,"__await")?ne.resolve(Qe.__await).then(function(ct){ie("next",ct,de,ae)},function(ct){ie("throw",ct,de,ae)}):ne.resolve(Qe).then(function(ct){Me.value=ct,de(Me)},function(ct){return ie("throw",ct,de,ae)})}ae(De.arg)}var te;i(this,"_invoke",{value:function(K,de){function ae(){return new ne(function(De,Me){ie(K,de,De,Me)})}return te=te?te.then(ae,ae):ae()}})}function M(ee,ne,ie){var te=p;return function(B,K){if(te===C)throw Error("Generator is already running");if(te===S){if(B==="throw")throw K;return{value:r,done:!0}}for(ie.method=B,ie.arg=K;;){var de=ie.delegate;if(de){var ae=W(de,ie);if(ae){if(ae===E)continue;return ae}}if(ie.method==="next")ie.sent=ie._sent=ie.arg;else if(ie.method==="throw"){if(te===p)throw te=S,ie.arg;ie.dispatchException(ie.arg)}else ie.method==="return"&&ie.abrupt("return",ie.arg);te=C;var De=h(ee,ne,ie);if(De.type==="normal"){if(te=ie.done?S:v,De.arg===E)continue;return{value:De.arg,done:ie.done}}De.type==="throw"&&(te=S,ie.method="throw",ie.arg=De.arg)}}}function W(ee,ne){var ie=ne.method,te=ee.iterator[ie];if(te===r)return ne.delegate=null,ie==="throw"&&ee.iterator.return&&(ne.method="return",ne.arg=r,W(ee,ne),ne.method==="throw")||ie!=="return"&&(ne.method="throw",ne.arg=new TypeError("The iterator does not provide a '"+ie+"' method")),E;var B=h(te,ee.iterator,ne.arg);if(B.type==="throw")return ne.method="throw",ne.arg=B.arg,ne.delegate=null,E;var K=B.arg;return K?K.done?(ne[ee.resultName]=K.value,ne.next=ee.nextLoc,ne.method!=="return"&&(ne.method="next",ne.arg=r),ne.delegate=null,E):K:(ne.method="throw",ne.arg=new TypeError("iterator result is not an object"),ne.delegate=null,E)}function I(ee){var ne={tryLoc:ee[0]};1 in ee&&(ne.catchLoc=ee[1]),2 in ee&&(ne.finallyLoc=ee[2],ne.afterLoc=ee[3]),this.tryEntries.push(ne)}function R(ee){var ne=ee.completion||{};ne.type="normal",delete ne.arg,ee.completion=ne}function G(ee){this.tryEntries=[{tryLoc:"root"}],ee.forEach(I,this),this.reset(!0)}function Z(ee){if(ee||ee===""){var ne=ee[o];if(ne)return ne.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var ie=-1,te=function B(){for(;++ie<ee.length;)if(n.call(ee,ie))return B.value=ee[ie],B.done=!1,B;return B.value=r,B.done=!0,B};return te.next=te}}throw new TypeError(au(ee)+" is not iterable")}return D.prototype=O,i($,"constructor",{value:O,configurable:!0}),i(O,"constructor",{value:D,configurable:!0}),D.displayName=u(O,l,"GeneratorFunction"),e.isGeneratorFunction=function(ee){var ne=typeof ee=="function"&&ee.constructor;return!!ne&&(ne===D||(ne.displayName||ne.name)==="GeneratorFunction")},e.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,O):(ee.__proto__=O,u(ee,l,"GeneratorFunction")),ee.prototype=Object.create($),ee},e.awrap=function(ee){return{__await:ee}},P(z.prototype),u(z.prototype,a,function(){return this}),e.AsyncIterator=z,e.async=function(ee,ne,ie,te,B){B===void 0&&(B=Promise);var K=new z(d(ee,ne,ie,te),B);return e.isGeneratorFunction(ne)?K:K.next().then(function(de){return de.done?de.value:K.next()})},P($),u($,l,"Generator"),u($,o,function(){return this}),u($,"toString",function(){return"[object Generator]"}),e.keys=function(ee){var ne=Object(ee),ie=[];for(var te in ne)ie.push(te);return ie.reverse(),function B(){for(;ie.length;){var K=ie.pop();if(K in ne)return B.value=K,B.done=!1,B}return B.done=!0,B}},e.values=Z,G.prototype={constructor:G,reset:function(ne){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(R),!ne)for(var ie in this)ie.charAt(0)==="t"&&n.call(this,ie)&&!isNaN(+ie.slice(1))&&(this[ie]=r)},stop:function(){this.done=!0;var ne=this.tryEntries[0].completion;if(ne.type==="throw")throw ne.arg;return this.rval},dispatchException:function(ne){if(this.done)throw ne;var ie=this;function te(Me,Qe){return de.type="throw",de.arg=ne,ie.next=Me,Qe&&(ie.method="next",ie.arg=r),!!Qe}for(var B=this.tryEntries.length-1;B>=0;--B){var K=this.tryEntries[B],de=K.completion;if(K.tryLoc==="root")return te("end");if(K.tryLoc<=this.prev){var ae=n.call(K,"catchLoc"),De=n.call(K,"finallyLoc");if(ae&&De){if(this.prev<K.catchLoc)return te(K.catchLoc,!0);if(this.prev<K.finallyLoc)return te(K.finallyLoc)}else if(ae){if(this.prev<K.catchLoc)return te(K.catchLoc,!0)}else{if(!De)throw Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return te(K.finallyLoc)}}}},abrupt:function(ne,ie){for(var te=this.tryEntries.length-1;te>=0;--te){var B=this.tryEntries[te];if(B.tryLoc<=this.prev&&n.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var K=B;break}}K&&(ne==="break"||ne==="continue")&&K.tryLoc<=ie&&ie<=K.finallyLoc&&(K=null);var de=K?K.completion:{};return de.type=ne,de.arg=ie,K?(this.method="next",this.next=K.finallyLoc,E):this.complete(de)},complete:function(ne,ie){if(ne.type==="throw")throw ne.arg;return ne.type==="break"||ne.type==="continue"?this.next=ne.arg:ne.type==="return"?(this.rval=this.arg=ne.arg,this.method="return",this.next="end"):ne.type==="normal"&&ie&&(this.next=ie),E},finish:function(ne){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var te=this.tryEntries[ie];if(te.finallyLoc===ne)return this.complete(te.completion,te.afterLoc),R(te),E}},catch:function(ne){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var te=this.tryEntries[ie];if(te.tryLoc===ne){var B=te.completion;if(B.type==="throw"){var K=B.arg;R(te)}return K}}throw Error("illegal catch attempt")},delegateYield:function(ne,ie,te){return this.delegate={iterator:Z(ne),resultName:ie,nextLoc:te},this.method==="next"&&(this.arg=r),E}},e}function TK(r,e,t,n,i,s,o){try{var a=r[s](o),l=a.value}catch(u){return void t(u)}a.done?e(l):Promise.resolve(l).then(n,i)}function tme(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var s=r.apply(e,t);function o(l){TK(s,n,i,o,a,"next",l)}function a(l){TK(s,n,i,o,a,"throw",l)}o(void 0)})}}var kK=["measure","alignPre","align",null,"motion"];const nme=function(r,e){var t=wM(null),n=No(t,2),i=n[0],s=n[1],o=we.useRef();function a(d){s(d,!0)}function l(){Cm.cancel(o.current)}function u(d){l(),o.current=Cm(function(){a(function(h){switch(i){case"align":return"motion";case"motion":return"stable"}return h}),d==null||d()})}return we.useEffect(function(){a("measure")},[r]),we.useEffect(function(){switch(i){case"measure":e();break}i&&(o.current=Cm(tme(l6().mark(function d(){var h,p;return l6().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:h=kK.indexOf(i),p=kK[h+1],p&&h!==-1&&a(p);case 3:case"end":return C.stop()}},d)}))))},[i]),we.useEffect(function(){return function(){l()}},[]),[i,u]},ime=function(r){var e=we.useState({width:0,height:0}),t=No(e,2),n=t[0],i=t[1];function s(a){var l=a.offsetWidth,u=a.offsetHeight,d=a.getBoundingClientRect(),h=d.width,p=d.height;Math.abs(l-h)<1&&Math.abs(u-p)<1&&(l=h,u=p),i({width:l,height:u})}var o=we.useMemo(function(){var a={};if(r){var l=n.width,u=n.height;r.indexOf("height")!==-1&&u?a.height=u:r.indexOf("minHeight")!==-1&&u&&(a.minHeight=u),r.indexOf("width")!==-1&&l?a.width=l:r.indexOf("minWidth")!==-1&&l&&(a.minWidth=l)}return a},[r,n]);return[o,s]};var rie=we.forwardRef(function(r,e){var t=r.visible,n=r.prefixCls,i=r.className,s=r.style,o=r.children,a=r.zIndex,l=r.stretch,u=r.destroyPopupOnHide,d=r.forceRender,h=r.align,p=r.point,v=r.getRootDomNode,C=r.getClassNameFromAlign,S=r.onAlign,E=r.onMouseEnter,k=r.onMouseLeave,D=r.onMouseDown,O=r.onTouchStart,H=r.onClick,V=we.useRef(),X=we.useRef(),$=we.useState(),P=No($,2),z=P[0],M=P[1],W=ime(l),I=No(W,2),R=I[0],G=I[1];function Z(){l&&G(v())}var ee=nme(t,Z),ne=No(ee,2),ie=ne[0],te=ne[1],B=we.useState(0),K=No(B,2),de=K[0],ae=K[1],De=we.useRef();X9(function(){ie==="alignPre"&&ae(0)},[ie]);function Me(){return p||v}function Qe(){var sn;(sn=V.current)===null||sn===void 0||sn.forceAlign()}function ct(sn,rn){var on=C(rn);z!==on&&M(on),ae(function(qn){return qn+1}),ie==="align"&&(S==null||S(sn,rn))}X9(function(){ie==="align"&&(de<3?Qe():te(function(){var sn;(sn=De.current)===null||sn===void 0||sn.call(De)}))},[de]);var Rt=hi({},zne(r));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(sn){var rn=Rt[sn];Rt[sn]=function(on,qn){return te(),rn==null?void 0:rn(on,qn)}});function Ye(){return new Promise(function(sn){De.current=sn})}we.useEffect(function(){!Rt.motionName&&ie==="motion"&&te()},[Rt.motionName,ie]),we.useImperativeHandle(e,function(){return{forceAlign:Qe,getElement:function(){return X.current}}});var gt=hi(hi({},R),{},{zIndex:a,opacity:ie==="motion"||ie==="stable"||!t?void 0:0,pointerEvents:!t&&ie!=="stable"?"none":void 0},s),Ut=!0;h!=null&&h.points&&(ie==="align"||ie==="stable")&&(Ut=!1);var _t=o;return we.Children.count(o)>1&&(_t=we.createElement("div",{className:"".concat(n,"-content")},o)),we.createElement(Xx,cl({visible:t,ref:X,leavedClassName:"".concat(n,"-hidden")},Rt,{onAppearPrepare:Ye,onEnterPrepare:Ye,removeOnLeave:u,forceRender:d}),function(sn,rn){var on=sn.className,qn=sn.style,Ft=Jg(n,i,z,on);return we.createElement(iie,{target:Me(),key:"popup",ref:V,monitorWindowResize:!0,disabled:Ut,align:h,onAlign:ct},we.createElement("div",{ref:rn,className:Ft,onMouseEnter:E,onMouseLeave:k,onMouseDownCapture:D,onTouchStartCapture:O,onClick:H,style:hi(hi({},qn),gt)},_t))})});rie.displayName="PopupInner";var sie=we.forwardRef(function(r,e){var t=r.prefixCls,n=r.visible,i=r.zIndex,s=r.children,o=r.mobile;o=o===void 0?{}:o;var a=o.popupClassName,l=o.popupStyle,u=o.popupMotion,d=u===void 0?{}:u,h=o.popupRender,p=r.onClick,v=we.useRef();we.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return v.current}}});var C=hi({zIndex:i},l),S=s;return we.Children.count(s)>1&&(S=we.createElement("div",{className:"".concat(t,"-content")},s)),h&&(S=h(S)),we.createElement(Xx,cl({visible:n,ref:v,removeOnLeave:!0},d),function(E,k){var D=E.className,O=E.style,H=Jg(t,a,D);return we.createElement("div",{ref:k,className:H,onClick:p,style:hi(hi({},O),C)},S)})});sie.displayName="MobilePopupInner";var rme=["visible","mobile"],oie=we.forwardRef(function(r,e){var t=r.visible,n=r.mobile,i=CM(r,rme),s=we.useState(t),o=No(s,2),a=o[0],l=o[1],u=we.useState(!1),d=No(u,2),h=d[0],p=d[1],v=hi(hi({},i),{},{visible:a});we.useEffect(function(){l(t),t&&n&&p(Tge())},[t,n]);var C=h?we.createElement(sie,cl({},v,{mobile:n,ref:e})):we.createElement(rie,cl({},v,{ref:e}));return we.createElement("div",null,we.createElement(rpe,v),C)});oie.displayName="Popup";var NK=we.createContext(null);function C3(){}function sme(){return""}function ome(r){return r?r.ownerDocument:window.document}var ame=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function lme(r){var e=function(t){US(i,t);var n=$S(i);function i(s){var o;$C(this,i),o=n.call(this,s),zn(yi(o),"popupRef",we.createRef()),zn(yi(o),"triggerRef",we.createRef()),zn(yi(o),"portalContainer",void 0),zn(yi(o),"attachId",void 0),zn(yi(o),"clickOutsideHandler",void 0),zn(yi(o),"touchOutsideHandler",void 0),zn(yi(o),"contextMenuOutsideHandler1",void 0),zn(yi(o),"contextMenuOutsideHandler2",void 0),zn(yi(o),"mouseDownTimeout",void 0),zn(yi(o),"focusTime",void 0),zn(yi(o),"preClickTime",void 0),zn(yi(o),"preTouchTime",void 0),zn(yi(o),"delayTimer",void 0),zn(yi(o),"hasPopupMouseDown",void 0),zn(yi(o),"onMouseEnter",function(l){var u=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",l),o.delaySetPopupVisible(!0,u,u?null:l)}),zn(yi(o),"onMouseMove",function(l){o.fireEvents("onMouseMove",l),o.setPoint(l)}),zn(yi(o),"onMouseLeave",function(l){o.fireEvents("onMouseLeave",l),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)}),zn(yi(o),"onPopupMouseEnter",function(){o.clearDelayTimer()}),zn(yi(o),"onPopupMouseLeave",function(l){var u;l.relatedTarget&&!l.relatedTarget.setTimeout&&NE((u=o.popupRef.current)===null||u===void 0?void 0:u.getElement(),l.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)}),zn(yi(o),"onFocus",function(l){o.fireEvents("onFocus",l),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))}),zn(yi(o),"onMouseDown",function(l){o.fireEvents("onMouseDown",l),o.preClickTime=Date.now()}),zn(yi(o),"onTouchStart",function(l){o.fireEvents("onTouchStart",l),o.preTouchTime=Date.now()}),zn(yi(o),"onBlur",function(l){o.fireEvents("onBlur",l),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)}),zn(yi(o),"onContextMenu",function(l){l.preventDefault(),o.fireEvents("onContextMenu",l),o.setPopupVisible(!0,l)}),zn(yi(o),"onContextMenuClose",function(){o.isContextMenuToShow()&&o.close()}),zn(yi(o),"onClick",function(l){if(o.fireEvents("onClick",l),o.focusTime){var u;if(o.preClickTime&&o.preTouchTime?u=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?u=o.preClickTime:o.preTouchTime&&(u=o.preTouchTime),Math.abs(u-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var d=!o.state.popupVisible;(o.isClickToHide()&&!d||d&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,l)}),zn(yi(o),"onPopupMouseDown",function(){if(o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout(function(){o.hasPopupMouseDown=!1},0),o.context){var l;(l=o.context).onPopupMouseDown.apply(l,arguments)}}),zn(yi(o),"onDocumentClick",function(l){if(!(o.props.mask&&!o.props.maskClosable)){var u=l.target,d=o.getRootDomNode(),h=o.getPopupDomNode();(!NE(d,u)||o.isContextMenuOnly())&&!NE(h,u)&&!o.hasPopupMouseDown&&o.close()}}),zn(yi(o),"getRootDomNode",function(){var l=o.props.getTriggerDOMNode;if(l)return l(o.triggerRef.current);try{var u=ZT(o.triggerRef.current);if(u)return u}catch{}return Gw.findDOMNode(yi(o))}),zn(yi(o),"getPopupClassNameFromAlign",function(l){var u=[],d=o.props,h=d.popupPlacement,p=d.builtinPlacements,v=d.prefixCls,C=d.alignPoint,S=d.getPopupClassNameFromAlign;return h&&p&&u.push(Ege(p,v,l,C)),S&&u.push(S(l)),u.join(" ")}),zn(yi(o),"getComponent",function(){var l=o.props,u=l.prefixCls,d=l.destroyPopupOnHide,h=l.popupClassName,p=l.onPopupAlign,v=l.popupMotion,C=l.popupAnimation,S=l.popupTransitionName,E=l.popupStyle,k=l.mask,D=l.maskAnimation,O=l.maskTransitionName,H=l.maskMotion,V=l.zIndex,X=l.popup,$=l.stretch,P=l.alignPoint,z=l.mobile,M=l.forceRender,W=l.onPopupClick,I=o.state,R=I.popupVisible,G=I.point,Z=o.getPopupAlign(),ee={};return o.isMouseEnterToShow()&&(ee.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(ee.onMouseLeave=o.onPopupMouseLeave),ee.onMouseDown=o.onPopupMouseDown,ee.onTouchStart=o.onPopupMouseDown,we.createElement(oie,cl({prefixCls:u,destroyPopupOnHide:d,visible:R,point:P&&G,className:h,align:Z,onAlign:p,animation:C,getClassNameFromAlign:o.getPopupClassNameFromAlign},ee,{stretch:$,getRootDomNode:o.getRootDomNode,style:E,mask:k,zIndex:V,transitionName:S,maskAnimation:D,maskTransitionName:O,maskMotion:H,ref:o.popupRef,motion:v,mobile:z,forceRender:M,onClick:W}),typeof X=="function"?X():X)}),zn(yi(o),"attachParent",function(l){Cm.cancel(o.attachId);var u=o.props,d=u.getPopupContainer,h=u.getDocument,p=o.getRootDomNode(),v;d?(p||d.length===0)&&(v=d(p)):v=h(o.getRootDomNode()).body,v?v.appendChild(l):o.attachId=Cm(function(){o.attachParent(l)})}),zn(yi(o),"getContainer",function(){if(!o.portalContainer){var l=o.props.getDocument,u=l(o.getRootDomNode()).createElement("div");u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.width="100%",o.portalContainer=u}return o.attachParent(o.portalContainer),o.portalContainer}),zn(yi(o),"setPoint",function(l){var u=o.props.alignPoint;!u||!l||o.setState({point:{pageX:l.pageX,pageY:l.pageY}})}),zn(yi(o),"handlePortalUpdate",function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)}),zn(yi(o),"triggerContextValue",{onPopupMouseDown:o.onPopupMouseDown});var a;return"popupVisible"in s?a=!!s.popupVisible:a=!!s.defaultPopupVisible,o.state={prevPopupVisible:a,popupVisible:a},ame.forEach(function(l){o["fire".concat(l)]=function(u){o.fireEvents(l,u)}}),o}return jC(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var o=this.props,a=this.state;if(a.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=o.getDocument(this.getRootDomNode()),this.clickOutsideHandler=xT(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||o.getDocument(this.getRootDomNode()),this.touchOutsideHandler=xT(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||o.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=xT(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=xT(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Cm.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var o;return((o=this.popupRef.current)===null||o===void 0?void 0:o.getElement())||null}},{key:"getPopupAlign",value:function(){var o=this.props,a=o.popupPlacement,l=o.popupAlign,u=o.builtinPlacements;return a&&u?Lge(u,a,l):l}},{key:"setPopupVisible",value:function(o,a){var l=this.props.alignPoint,u=this.state.popupVisible;this.clearDelayTimer(),u!==o&&("popupVisible"in this.props||this.setState({popupVisible:o,prevPopupVisible:u}),this.props.onPopupVisibleChange(o)),l&&a&&o&&this.setPoint(a)}},{key:"delaySetPopupVisible",value:function(o,a,l){var u=this,d=a*1e3;if(this.clearDelayTimer(),d){var h=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){u.setPopupVisible(o,h),u.clearDelayTimer()},d)}else this.setPopupVisible(o,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(o){var a=this.props.children.props,l=this.props;return a[o]&&l[o]?this["fire".concat(o)]:a[o]||l[o]}},{key:"isClickToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var o=this.props.action;return o==="contextMenu"||o.length===1&&o[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var o=this.props,a=o.action,l=o.hideAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var o=this.props,a=o.action,l=o.hideAction;return a.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var o=this.props,a=o.action,l=o.hideAction;return a.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var o;(o=this.popupRef.current)===null||o===void 0||o.forceAlign()}}},{key:"fireEvents",value:function(o,a){var l=this.props.children.props[o];l&&l(a);var u=this.props[o];u&&u(a)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var o=this.state.popupVisible,a=this.props,l=a.children,u=a.forceRender,d=a.alignPoint,h=a.className,p=a.autoDestroy,v=we.Children.only(l),C={key:"trigger"};this.isContextMenuToShow()?C.onContextMenu=this.onContextMenu:C.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(C.onClick=this.onClick,C.onMouseDown=this.onMouseDown,C.onTouchStart=this.onTouchStart):(C.onClick=this.createTwoChains("onClick"),C.onMouseDown=this.createTwoChains("onMouseDown"),C.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(C.onMouseEnter=this.onMouseEnter,d&&(C.onMouseMove=this.onMouseMove)):C.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?C.onMouseLeave=this.onMouseLeave:C.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(C.onFocus=this.onFocus,C.onBlur=this.onBlur):(C.onFocus=this.createTwoChains("onFocus"),C.onBlur=this.createTwoChains("onBlur"));var S=Jg(v&&v.props&&v.props.className,h);S&&(C.className=S);var E=hi({},C);Pz(v)&&(E.ref=Rz(this.triggerRef,v.ref));var k=we.cloneElement(v,E),D;return(o||this.popupRef.current||u)&&(D=we.createElement(r,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!o&&p&&(D=null),we.createElement(NK.Provider,{value:this.triggerContextValue},k,D)}}],[{key:"getDerivedStateFromProps",value:function(o,a){var l=o.popupVisible,u={};return l!==void 0&&a.popupVisible!==l&&(u.popupVisible=l,u.prevPopupVisible=a.popupVisible),u}}]),i}(we.Component);return zn(e,"contextType",NK),zn(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:sme,getDocument:ome,onPopupVisibleChange:C3,afterPopupVisibleChange:C3,onPopupAlign:C3,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}const ume=lme(kne);var Eg={adjustX:1,adjustY:1},xg=[0,0],cme={left:{points:["cr","cl"],overflow:Eg,offset:[-4,0],targetOffset:xg},right:{points:["cl","cr"],overflow:Eg,offset:[4,0],targetOffset:xg},top:{points:["bc","tc"],overflow:Eg,offset:[0,-4],targetOffset:xg},bottom:{points:["tc","bc"],overflow:Eg,offset:[0,4],targetOffset:xg},topLeft:{points:["bl","tl"],overflow:Eg,offset:[0,-4],targetOffset:xg},leftTop:{points:["tr","tl"],overflow:Eg,offset:[-4,0],targetOffset:xg},topRight:{points:["br","tr"],overflow:Eg,offset:[0,-4],targetOffset:xg},rightTop:{points:["tl","tr"],overflow:Eg,offset:[4,0],targetOffset:xg},bottomRight:{points:["tr","br"],overflow:Eg,offset:[0,4],targetOffset:xg},rightBottom:{points:["bl","br"],overflow:Eg,offset:[4,0],targetOffset:xg},bottomLeft:{points:["tl","bl"],overflow:Eg,offset:[0,4],targetOffset:xg},leftBottom:{points:["br","bl"],overflow:Eg,offset:[-4,0],targetOffset:xg}};function dme(r){var e=r.showArrow,t=r.arrowContent,n=r.children,i=r.prefixCls,s=r.id,o=r.overlayInnerStyle,a=r.className,l=r.style;return we.createElement("div",{className:Jg("".concat(i,"-content"),a),style:l},e!==!1&&we.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},t),we.createElement("div",{className:"".concat(i,"-inner"),id:s,role:"tooltip",style:o},typeof n=="function"?n():n))}var hme=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],fme=function(e,t){var n=e.overlayClassName,i=e.trigger,s=i===void 0?["hover"]:i,o=e.mouseEnterDelay,a=o===void 0?0:o,l=e.mouseLeaveDelay,u=l===void 0?.1:l,d=e.overlayStyle,h=e.prefixCls,p=h===void 0?"rc-tooltip":h,v=e.children,C=e.onVisibleChange,S=e.afterVisibleChange,E=e.transitionName,k=e.animation,D=e.motion,O=e.placement,H=O===void 0?"right":O,V=e.align,X=V===void 0?{}:V,$=e.destroyTooltipOnHide,P=$===void 0?!1:$,z=e.defaultVisible,M=e.getTooltipContainer,W=e.overlayInnerStyle,I=e.arrowContent,R=e.overlay,G=e.id,Z=e.showArrow,ee=Z===void 0?!0:Z,ne=CM(e,hme),ie=we.useRef(null);we.useImperativeHandle(t,function(){return ie.current});var te=hi({},ne);"visible"in e&&(te.popupVisible=e.visible);var B=function(){return we.createElement(dme,{showArrow:ee,arrowContent:I,key:"content",prefixCls:p,id:G,overlayInnerStyle:W},R)},K=!1,de=!1;if(typeof P=="boolean")K=P;else if(P&&au(P)==="object"){var ae=P.keepParent;K=ae===!0,de=ae===!1}return we.createElement(ume,cl({popupClassName:n,prefixCls:p,popup:B,action:s,builtinPlacements:cme,popupPlacement:H,ref:ie,popupAlign:X,getPopupContainer:M,onPopupVisibleChange:C,afterPopupVisibleChange:S,popupTransitionName:E,popupAnimation:k,popupMotion:D,defaultPopupVisible:z,destroyPopupOnHide:K,autoDestroy:de,mouseLeaveDelay:u,popupStyle:d,mouseEnterDelay:a},te),v)};const gme=we.forwardRef(fme);var pme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Uz=r=>{var{overlay:e,children:t,placement:n="bottom",trigger:i="hover",overlayClassName:s,mouseEnterDelay:o}=r,a=pme(r,["overlay","children","placement","trigger","overlayClassName","mouseEnterDelay"]);return e?pe.createElement(gme,Object.assign({overlayClassName:ni(cne(),s),placement:n,trigger:i,overlay:e,mouseEnterDelay:o||.1},a),t):t||null};var aie=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const $z=Ni("action-bar"),mme=Ht($z,"container"),jz=Ht($z,"item"),_me=si(jz,"disabled"),vme=si(jz,"checked");function bme(r){const{title:e,name:t,contextMenu:n=[],onClick:i,icon:s,onContextMenuClick:o}=r,a=aie(r,["title","name","contextMenu","onClick","icon","onContextMenuClick"]),l=r.disabled?_me:null,u=r.checked?vme:null,d=we.useRef(null),h=we.useRef(),p=we.useCallback((E,k)=>{var D;o==null||o(E,k),(D=h.current)===null||D===void 0||D.hide()},[n]),v=()=>pe.createElement(Vc,{onClick:p,data:n});we.useEffect(()=>(n.length>0&&(h.current=PP({anchor:d.current,render:v})),function(){var k;(k=h.current)===null||k===void 0||k.dispose()}));const C=function(E){if(r.disabled){E.preventDefault();return}i&&i(E,r),n.length>-1&&h.current&&h.current.show({x:E.clientX,y:E.clientY})},S=Yw(a);return pe.createElement("li",Object.assign({ref:d,className:ni(jz,l,u),onClick:C},S),pe.createElement(Uz,{overlay:pe.createElement("span",null,e)},pe.createElement(cs,{type:s},t)))}function s2(r){const{data:e=[],onClick:t,onContextMenuClick:n,className:i,style:s,title:o}=r,a=aie(r,["data","onClick","onContextMenuClick","className","style","title"]),l=ni($z,i),u=e.map((h,p)=>pe.createElement(bme,Object.assign({key:h.id},h,{onContextMenuClick:n,"data-index":p,onClick:Nz(t,h.onClick)}))),d=Yw(a);return pe.createElement("div",Object.assign({className:l,style:s,title:o},d),pe.createElement("ul",{className:mme},u))}const qz=Ni("breadcrumb"),Cme=Ht(qz,"item"),yme=Ht(qz,"label");var AK=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function lie(r){const{onClick:e,className:t,separator:n,routes:i=[],style:s,title:o,role:a}=r,l=AK(r,["onClick","className","separator","routes","style","title","role"]),u=ni(qz,t),d=i.length,h=n||pe.createElement(cs,{type:"chevron-right"}),p=Yw(l);return pe.createElement("div",Object.assign({className:u,role:a,style:s,title:o},p),i.map((v,C)=>{const{id:S,className:E,title:k,style:D,href:O,icon:H,render:V,name:X}=v,$=AK(v,["id","className","title","style","href","icon","render","name"]);return pe.createElement("a",Object.assign({key:S,className:ni(Cme,E),title:k,style:D,href:O,tabIndex:0,onContextMenu:P=>P.preventDefault(),onClick:P=>e==null?void 0:e(P,v)},Yw($)),pe.createElement(cs,{type:H}),pe.createElement("span",{className:yme},V?V(v):X),d-C>1?h:null)}))}var wme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const VP=Ni("btn"),Sme=si(VP,"normal"),Lme=si(VP,"large"),Eme=si(VP,"disabled"),Zw=we.forwardRef(function(r,e){const{className:t,children:n,size:i="normal"}=r,s=wme(r,["className","children","size"]),o=r.disabled?Eme:null,l=ni(t,VP,i==="large"?Lme:Sme,o);return pe.createElement("button",Object.assign({ref:e,className:l},s),n)});var xme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Kz=Ni("checkbox"),Dme=Ht(Kz,"label"),Ime=Ht(Kz,"input");function Tme(r){const{className:e,id:t,children:n,value:i,onChange:s,title:o,role:a,style:l}=r,u=xme(r,["className","id","children","value","onChange","title","role","style"]),d=ni(Kz,e),h=v=>{s==null||s(v,{id:t,value:v.target.value})},p=Yw(u);return pe.createElement("div",Object.assign({className:d,role:a,style:l,title:o},p),pe.createElement("input",{id:t.toString(),type:"checkbox",className:Ime,value:i,onChange:h}),pe.createElement("label",{htmlFor:t.toString(),className:ni(Dme,"codicon")},n))}const qS=Ni("collapse"),kme=Ht(qS,"item"),uie=Ht(qS,"pane"),Nme=si(uie,"collapsing"),Ame=si(qS,"active"),cie=Ht(qS,"header"),Ome=Ht(cie,"title"),OK=Ht(qS,"content"),Mme=Ht(qS,"extra");var Rme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Pme="tool-bar",Fme=Ni(Pme);function o2(r){const{className:e}=r,t=Rme(r,["className"]);return pe.createElement("div",{className:ni(Fme,e)},pe.createElement(s2,Object.assign({},t)))}function Sb({children:r,style:e,className:t,role:n,title:i}){return pe.createElement("div",{role:n,title:i,className:t,style:e},r)}const Qx=Ni("split"),Bme=si(Qx,"dragging"),Wme=si(Qx,"vertical"),Vme=si(Qx,"horizontal"),Hme=Ht(Qx,"pane"),a2=Ht(Qx,"sash"),zme=si(a2,"vertical"),Ume=si(a2,"horizontal"),$me=si(a2,"disabled"),jme=si(a2,"hover");var qme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Kme(r){var{className:e,onDragStart:t,onDragging:n,onDragEnd:i}=r,s=qme(r,["className","onDragStart","onDragging","onDragEnd"]);const o=we.useRef(),[a,l]=we.useState(!1),[u,d]=we.useState(!1);return we.useEffect(function(){return function(){clearTimeout(o.current)}},[]),pe.createElement("div",Object.assign({role:"Resizer",className:ni(a2,(u||a)&&jme,e),onMouseEnter:()=>{o.current=setTimeout(()=>{l(!0)},150)},onMouseLeave:()=>{o.current&&(l(!1),clearTimeout(o.current))},onMouseDown:h=>{d(!0),t(h);const p=function(C){n(C)},v=function(C){d(!1),i(C),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",v)};window.addEventListener("mousemove",p),window.addEventListener("mouseup",v)}},s))}var Gme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const y3=function(r,e,t=1/0){return typeof r>"u"?t:typeof r=="number"?r:r.endsWith("%")?e*(+r.replace("%","")/100):r.endsWith("px")?+r.replace("px",""):t},Dk=r=>{var e,{children:t,sizes:n,allowResize:i=!0,showSashes:s=!0,split:o="vertical",className:a,sashClassName:l,paneClassName:u,resizerSize:d=4,onChange:h}=r,p=Gme(r,["children","sizes","allowResize","showSashes","split","className","sashClassName","paneClassName","resizerSize","onChange"]);const v=we.useRef({x:0,y:0}),C=we.useRef(null),[S,E]=we.useState({}),[k,D]=we.useState(!1);we.useEffect(()=>{const R=new ResizeObserver(()=>{E(C.current.getBoundingClientRect())});return R.observe(C.current),()=>{R.disconnect()}},[]);const{sizeName:O,sPos:H,sAxis:V}=we.useMemo(function(){return{sizeName:o==="vertical"?"width":"height",sPos:o==="vertical"?"left":"top",sAxis:o==="vertical"?"x":"y"}},[o]),X=(e=S[O])!==null&&e!==void 0?e:0,$=we.useMemo(function(){return t.map(R=>{const G=[0,1/0];if(R.type===Sb){const{minSize:Z,maxSize:ee}=R.props;G[0]=y3(Z,X,0),G[1]=y3(ee,X)}return G})},[t,X]),P=we.useMemo(()=>typeof i=="boolean"?new Array(t.length).fill(i):t.map((R,G)=>{var Z;return(Z=i[G])!==null&&Z!==void 0?Z:!0}),[t.length,i]),z=we.useMemo(function(){let R=0,G=0,Z=0;const ee=t.map((ie,te)=>{const B=y3(n[te],X);return B===1/0?R++:(G+=B,P[te]&&(Z+=B)),B});if(P.filter(ie=>ie===!0).length===0)return ee;if(G>X||!R&&G<X){const ie=(G-X)/Z;return ee.map((te,B)=>te===1/0?0:P[B]?te-te*ie:te)}if(R>0){const ie=(X-G)/R;return ee.map(te=>te===1/0?ie:te)}return ee},[...n,t.length,X,...P]),M=we.useMemo(function(){return z.reduce(function(R,G){return[...R,R[R.length-1]+G]},[0])},[...z]),W=we.useCallback(function(R){var G,Z;v.current={x:(G=R.pageX)!==null&&G!==void 0?G:R.screenX,y:(Z=R.pageY)!==null&&Z!==void 0?Z:R.screenY},D(!0)},[]),I=we.useCallback(function(R,G){var Z,ee;let ie={x:(Z=R.pageX)!==null&&Z!==void 0?Z:R.screenX,y:(ee=R.pageY)!==null&&ee!==void 0?ee:R.screenY}[V]-v.current[V];const te=-Math.min(z[G]-$[G][0],$[G+1][1]-z[G+1]),B=Math.min(z[G+1]-$[G+1][0],$[G][1]-z[G]);ie<te&&(ie=te),ie>B&&(ie=B);const K=[...z];K[G]+=ie,K[G+1]-=ie,h==null||h(K)},[$,h,z]);return pe.createElement("div",Object.assign({className:ni(Qx,k&&Bme,o==="vertical"&&Wme,o==="horizontal"&&Vme,a),ref:C},p),t.map((R,G)=>{const Z=ni(Hme,u),ee={[O]:z[G],[H]:M[G]};let ne=null;if(G>0){const ie=s===!1||(s==null?void 0:s[G-1])===!1;ne=pe.createElement(Kme,{className:ni(ie&&$me,o==="vertical"?zme:Ume,l),style:{[O]:d,[H]:M[G]-d/2},onDragStart:W,onDragging:te=>I(te,G-1),onDragEnd:()=>{D(!1)}})}if(R.type===Sb){const{className:ie="",style:te={}}=R.props;return pe.createElement(pe.Fragment,{key:G},ne,t2(R,{className:ni(Z,ie),style:Object.assign(Object.assign({},te),ee)}))}return pe.createElement(pe.Fragment,{key:G},ne,pe.createElement(Sb,{className:Z,style:ee},R))}))};var Yme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const SO=220,tb=26;function die(r){var{data:e=[],activePanelKeys:t,className:n,title:i,style:s,role:o,onCollapseChange:a,onToolbarClick:l,onResize:u}=r,d=Yme(r,["data","activePanelKeys","className","title","style","role","onCollapseChange","onToolbarClick","onResize"]);const[h,p]=we.useState(new Array(e.length)),[v,C]=we.useState(!1),S=we.useRef(null),[E,k]=we.useState(e.map(Z=>Z.hidden?0:tb)),D=we.useRef([]),O=we.useRef(!0),H=Z=>Z===void 0,V=(Z,ee)=>{for(let ne=0;ne<Z.length;ne++)if(Z[ne]!==ee[ne])return ne+1;return-1},X=Z=>{const ee=V(E,Z);ee!==-1&&(D.current[ee]=Z[ee],u==null||u(Z),k(Z))},$=(Z,ee,ne)=>{Z.stopPropagation(),l==null||l(ee,ne)},P=(Z,ee)=>ee?ee(Z):null,z=(Z,ee)=>{const ne=[...h];H(ne[ee])?ne[ee]=Z:delete ne[ee],a==null||a(ne),p(ne.concat())},M=()=>{C(!0),W(),setTimeout(()=>{C(!1)},300)},W=()=>{if(h.filter(ee=>!H(ee)).length){const{height:ee}=S.current.getBoundingClientRect();let ne=ee,ie=0;const te=e.map((de,ae)=>{var De,Me,Qe,ct;if(de.hidden)return 0;if(!h.includes(de.id))return ne=ne-tb,tb;if(((De=de.config)===null||De===void 0?void 0:De.grow)===0){const gt=(Qe=(Me=S.current)===null||Me===void 0?void 0:Me.querySelector(`.${OK}[data-collapse-index='${ae}']`))===null||Qe===void 0?void 0:Qe.querySelector(`[data-content='${de.id}']`);if(!gt)return ne=ne-tb,tb;const{height:Ut}=gt.getBoundingClientRect(),_t=Ut+tb;return _t>SO?(ne=ne-SO,SO):(ne=ne-_t,_t)}return typeof D.current[ae]<"u"?(ne=ne-D.current[ae],D.current[ae]):(ie=ie+(((ct=de.config)===null||ct===void 0?void 0:ct.grow)||1),"auto")}),B=ne/ie,K=te.map((de,ae)=>{var De;return de==="auto"?B*(((De=e[ae].config)===null||De===void 0?void 0:De.grow)||1):de});u==null||u(K),k(K)}else{const ee=e.map(ne=>ne.hidden?0:tb);u==null||u(ee),k(ee)}},{nextSashes:I,allowResize:R}=we.useMemo(function(){var Z,ee;const ne=[];for(let ie=1;ie<h.length;ie++){const te=!H(h[ie-1]),B=((ee=(Z=e[ie-1])===null||Z===void 0?void 0:Z.config)===null||ee===void 0?void 0:ee.grow)!==0,K=!H(h[ie]),de=te&&B&&K;ne.push(de)}return{nextSashes:ne,allowResize:e.map((ie,te)=>{var B;return((B=ie==null?void 0:ie.config)===null||B===void 0?void 0:B.grow)===0?!1:!H(h[te])})}},[h,e]);we.useLayoutEffect(()=>{O.current||M(),O.current=!1},[h,e]),we.useLayoutEffect(()=>{Array.isArray(t)&&p(t)},[t]);const G=Yw(d);return pe.createElement("div",Object.assign({ref:S,className:ni(qS,n),title:i,style:s,role:o},G),pe.createElement(Dk,{sizes:E,onChange:X,split:"horizontal",allowResize:R,showSashes:I,paneClassName:ni(uie,v&&Nme)},e.map((Z,ee)=>{const ne=h.includes(Z.id);return pe.createElement(Sb,{key:Z.id,minSize:tb},pe.createElement("div",{className:ni(Z.className,kme,ne&&Ame),"data-collapse-id":Z.id},pe.createElement("div",{className:cie,tabIndex:0,onClick:()=>z(Z.id,ee)},pe.createElement(cs,{type:ne?"chevron-down":"chevron-right"}),pe.createElement("span",{className:Ome},Z.name),pe.createElement("div",{className:Mme},ne&&pe.createElement(o2,{key:Z.id,data:Z.toolbar||[],onClick:(ie,te)=>$(ie,te,Z)}))),pe.createElement("div",{className:OK,tabIndex:0,"data-collapse-index":ee},P(Z,Z.renderPanel))))})))}var MK="data-rc-order",RK="data-rc-priority",Zme="rc-util-key",u6=new Map;function hie(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.mark;return e?e.startsWith("data-")?e:"data-".concat(e):Zme}function HP(r){if(r.attachTo)return r.attachTo;var e=document.querySelector("head");return e||document.body}function Xme(r){return r==="queue"?"prependQueue":r?"prepend":"append"}function Gz(r){return Array.from((u6.get(r)||r).children).filter(function(e){return e.tagName==="STYLE"})}function fie(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!jS())return null;var t=e.csp,n=e.prepend,i=e.priority,s=i===void 0?0:i,o=Xme(n),a=o==="prependQueue",l=document.createElement("style");l.setAttribute(MK,o),a&&s&&l.setAttribute(RK,"".concat(s)),t!=null&&t.nonce&&(l.nonce=t==null?void 0:t.nonce),l.innerHTML=r;var u=HP(e),d=u.firstChild;if(n){if(a){var h=(e.styles||Gz(u)).filter(function(p){if(!["prepend","prependQueue"].includes(p.getAttribute(MK)))return!1;var v=Number(p.getAttribute(RK)||0);return s>=v});if(h.length)return u.insertBefore(l,h[h.length-1].nextSibling),l}u.insertBefore(l,d)}else u.appendChild(l);return l}function gie(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=HP(e);return(e.styles||Gz(t)).find(function(n){return n.getAttribute(hie(e))===r})}function Qme(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=gie(r,e);if(t){var n=HP(e);n.removeChild(t)}}function Jme(r,e){var t=u6.get(r);if(!t||!NE(document,t)){var n=fie("",e),i=n.parentNode;u6.set(r,i),r.removeChild(n)}}function e_e(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=HP(t),i=Gz(n),s=hi(hi({},t),{},{styles:i});Jme(n,s);var o=gie(e,s);if(o){var a,l;if((a=s.csp)!==null&&a!==void 0&&a.nonce&&o.nonce!==((l=s.csp)===null||l===void 0?void 0:l.nonce)){var u;o.nonce=(u=s.csp)===null||u===void 0?void 0:u.nonce}return o.innerHTML!==r&&(o.innerHTML=r),o}var d=fie(r,s);return d.setAttribute(hie(s),e),d}var w3;function t_e(r){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),t=document.createElement("div");t.id=e;var n=t.style;n.position="absolute",n.left="0",n.top="0",n.width="100px",n.height="100px",n.overflow="scroll";var i,s;if(r){var o=getComputedStyle(r);n.scrollbarColor=o.scrollbarColor,n.scrollbarWidth=o.scrollbarWidth;var a=getComputedStyle(r,"::-webkit-scrollbar"),l=parseInt(a.width,10),u=parseInt(a.height,10);try{var d=l?"width: ".concat(a.width,";"):"",h=u?"height: ".concat(a.height,";"):"";e_e(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(d,`
`).concat(h,`
}`),e)}catch(C){console.error(C),i=l,s=u}}document.body.appendChild(t);var p=r&&i&&!isNaN(i)?i:t.offsetWidth-t.clientWidth,v=r&&s&&!isNaN(s)?s:t.offsetHeight-t.clientHeight;return document.body.removeChild(t),Qme(e),{width:p,height:v}}function pie(r){return typeof document>"u"?0:((r||w3===void 0)&&(w3=t_e()),w3.width)}function ox(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r)return{};var t=e.element,n=t===void 0?document.body:t,i={},s=Object.keys(r);return s.forEach(function(o){i[o]=n.style[o]}),s.forEach(function(o){n.style[o]=r[o]}),i}function n_e(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var S3={};const PK=function(r){if(!(!n_e()&&!r)){var e="ant-scrolling-effect",t=new RegExp("".concat(e),"g"),n=document.body.className;if(r){if(!t.test(n))return;ox(S3),S3={},document.body.className=n.replace(t,"").trim();return}var i=pie();if(i&&(S3=ox({position:"relative",width:"calc(100% - ".concat(i,"px)")}),!t.test(n))){var s="".concat(n," ").concat(e);document.body.className=s.trim()}}};var i_e=0,Dg=[],mie="ant-scrolling-effect",L3=new RegExp("".concat(mie),"g"),E3=new Map,r_e=jC(function r(e){var t=this;$C(this,r),zn(this,"lockTarget",void 0),zn(this,"options",void 0),zn(this,"getContainer",function(){var n;return(n=t.options)===null||n===void 0?void 0:n.container}),zn(this,"reLock",function(n){var i=Dg.find(function(s){var o=s.target;return o===t.lockTarget});i&&t.unLock(),t.options=n,i&&(i.options=n,t.lock())}),zn(this,"lock",function(){var n;if(!Dg.some(function(l){var u=l.target;return u===t.lockTarget})){if(Dg.some(function(l){var u,d=l.options;return(d==null?void 0:d.container)===((u=t.options)===null||u===void 0?void 0:u.container)})){Dg=[].concat(sK(Dg),[{target:t.lockTarget,options:t.options}]);return}var i=0,s=((n=t.options)===null||n===void 0?void 0:n.container)||document.body;(s===document.body&&window.innerWidth-document.documentElement.clientWidth>0||s.scrollHeight>s.clientHeight)&&getComputedStyle(s).overflow!=="hidden"&&(i=pie());var o=s.className;if(Dg.filter(function(l){var u,d=l.options;return(d==null?void 0:d.container)===((u=t.options)===null||u===void 0?void 0:u.container)}).length===0&&E3.set(s,ox({width:i!==0?"calc(100% - ".concat(i,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:s})),!L3.test(o)){var a="".concat(o," ").concat(mie);s.className=a.trim()}Dg=[].concat(sK(Dg),[{target:t.lockTarget,options:t.options}])}}),zn(this,"unLock",function(){var n,i=Dg.find(function(a){var l=a.target;return l===t.lockTarget});if(Dg=Dg.filter(function(a){var l=a.target;return l!==t.lockTarget}),!(!i||Dg.some(function(a){var l,u=a.options;return(u==null?void 0:u.container)===((l=i.options)===null||l===void 0?void 0:l.container)}))){var s=((n=t.options)===null||n===void 0?void 0:n.container)||document.body,o=s.className;L3.test(o)&&(ox(E3.get(s),{element:s}),E3.delete(s),s.className=s.className.replace(L3,"").trim())}}),this.lockTarget=i_e++,this.options=e}),K0=0,IT=jS(),cA={},BL=function(e){if(!IT)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(au(e)==="object"&&e instanceof window.HTMLElement)return e}return document.body},s_e=function(r){US(t,r);var e=$S(t);function t(n){var i;return $C(this,t),i=e.call(this,n),zn(yi(i),"container",void 0),zn(yi(i),"componentRef",we.createRef()),zn(yi(i),"rafId",void 0),zn(yi(i),"scrollLocker",void 0),zn(yi(i),"renderComponent",void 0),zn(yi(i),"updateScrollLocker",function(s){var o=s||{},a=o.visible,l=i.props,u=l.getContainer,d=l.visible;d&&d!==a&&IT&&BL(u)!==i.scrollLocker.getContainer()&&i.scrollLocker.reLock({container:BL(u)})}),zn(yi(i),"updateOpenCount",function(s){var o=s||{},a=o.visible,l=o.getContainer,u=i.props,d=u.visible,h=u.getContainer;d!==a&&IT&&BL(h)===document.body&&(d&&!a?K0+=1:s&&(K0-=1));var p=typeof h=="function"&&typeof l=="function";(p?h.toString()!==l.toString():h!==l)&&i.removeCurrentContainer()}),zn(yi(i),"attachToParent",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(s||i.container&&!i.container.parentNode){var o=BL(i.props.getContainer);return o?(o.appendChild(i.container),!0):!1}return!0}),zn(yi(i),"getContainer",function(){return IT?(i.container||(i.container=document.createElement("div"),i.attachToParent(!0)),i.setWrapperClassName(),i.container):null}),zn(yi(i),"setWrapperClassName",function(){var s=i.props.wrapperClassName;i.container&&s&&s!==i.container.className&&(i.container.className=s)}),zn(yi(i),"removeCurrentContainer",function(){var s;(s=i.container)===null||s===void 0||(s=s.parentNode)===null||s===void 0||s.removeChild(i.container)}),zn(yi(i),"switchScrollingEffect",function(){K0===1&&!Object.keys(cA).length?(PK(),cA=ox({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):K0||(ox(cA),cA={},PK(!0))}),i.scrollLocker=new r_e({container:BL(n.getContainer)}),i}return jC(t,[{key:"componentDidMount",value:function(){var i=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Cm(function(){i.forceUpdate()}))}},{key:"componentDidUpdate",value:function(i){this.updateOpenCount(i),this.updateScrollLocker(i),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var i=this.props,s=i.visible,o=i.getContainer;IT&&BL(o)===document.body&&(K0=s&&K0?K0-1:K0),this.removeCurrentContainer(),Cm.cancel(this.rafId)}},{key:"render",value:function(){var i=this.props,s=i.children,o=i.forceRender,a=i.visible,l=null,u={getOpenCount:function(){return K0},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(o||a||this.componentRef.current)&&(l=we.createElement(kne,{getContainer:this.getContainer,ref:this.componentRef},s(u))),l}}]),t}(we.Component),Di={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Di.F1&&t<=Di.F12)return!1;switch(t){case Di.ALT:case Di.CAPS_LOCK:case Di.CONTEXT_MENU:case Di.CTRL:case Di.DOWN:case Di.END:case Di.ESC:case Di.HOME:case Di.INSERT:case Di.LEFT:case Di.MAC_FF_META:case Di.META:case Di.NUMLOCK:case Di.NUM_CENTER:case Di.PAGE_DOWN:case Di.PAGE_UP:case Di.PAUSE:case Di.PRINT_SCREEN:case Di.RIGHT:case Di.SHIFT:case Di.UP:case Di.WIN_KEY:case Di.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Di.ZERO&&e<=Di.NINE||e>=Di.NUM_ZERO&&e<=Di.NUM_MULTIPLY||e>=Di.A&&e<=Di.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Di.SPACE:case Di.QUESTION_MARK:case Di.NUM_PLUS:case Di.NUM_MINUS:case Di.NUM_PERIOD:case Di.NUM_DIVISION:case Di.SEMICOLON:case Di.DASH:case Di.EQUALS:case Di.COMMA:case Di.PERIOD:case Di.SLASH:case Di.APOSTROPHE:case Di.SINGLE_QUOTE:case Di.OPEN_SQUARE_BRACKET:case Di.BACKSLASH:case Di.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function o_e(){var r=hi({},hfe);return r.useId}var FK=0,BK=o_e();const a_e=BK?function(e){var t=BK();return e||t}:function(e){var t=we.useState("ssr-id"),n=No(t,2),i=n[0],s=n[1];return we.useEffect(function(){var o=FK;FK+=1,s("rc_unique_".concat(o))},[]),e||i};var l_e=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,u_e=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,c_e="".concat(l_e," ").concat(u_e).split(/[\s\n]+/),d_e="aria-",h_e="data-";function WK(r,e){return r.indexOf(e)===0}function f_e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t;e===!1?t={aria:!0,data:!0,attr:!0}:e===!0?t={aria:!0}:t=hi({},e);var n={};return Object.keys(r).forEach(function(i){(t.aria&&(i==="role"||WK(i,d_e))||t.data&&WK(i,h_e)||t.attr&&c_e.includes(i))&&(n[i]=r[i])}),n}function g_e(r){var e=r.prefixCls,t=r.style,n=r.visible,i=r.maskProps,s=r.motionName;return we.createElement(Xx,{key:"mask",visible:n,motionName:s,leavedClassName:"".concat(e,"-mask-hidden")},function(o){var a=o.className,l=o.style;return we.createElement("div",cl({style:hi(hi({},l),t),className:Jg("".concat(e,"-mask"),a)},i))})}function VK(r,e,t){var n=e;return!n&&t&&(n="".concat(r,"-").concat(t)),n}function HK(r,e){var t=r["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var i=r.document;t=i.documentElement[n],typeof t!="number"&&(t=i.body[n])}return t}function p_e(r){var e=r.getBoundingClientRect(),t={left:e.left,top:e.top},n=r.ownerDocument,i=n.defaultView||n.parentWindow;return t.left+=HK(i),t.top+=HK(i,!0),t}const m_e=we.memo(function(r){var e=r.children;return e},function(r,e){var t=e.shouldUpdate;return!t});var zK={width:0,height:0,overflow:"hidden",outline:"none"},__e=pe.forwardRef(function(r,e){var t=r.prefixCls,n=r.className,i=r.style,s=r.title,o=r.ariaId,a=r.footer,l=r.closable,u=r.closeIcon,d=r.onClose,h=r.children,p=r.bodyStyle,v=r.bodyProps,C=r.modalRender,S=r.onMouseDown,E=r.onMouseUp,k=r.holderRef,D=r.visible,O=r.forceRender,H=r.width,V=r.height,X=we.useRef(),$=we.useRef();pe.useImperativeHandle(e,function(){return{focus:function(){var G;(G=X.current)===null||G===void 0||G.focus()},changeActive:function(G){var Z=document,ee=Z.activeElement;G&&ee===$.current?X.current.focus():!G&&ee===X.current&&$.current.focus()}}});var P={};H!==void 0&&(P.width=H),V!==void 0&&(P.height=V);var z;a&&(z=pe.createElement("div",{className:"".concat(t,"-footer")},a));var M;s&&(M=pe.createElement("div",{className:"".concat(t,"-header")},pe.createElement("div",{className:"".concat(t,"-title"),id:o},s)));var W;l&&(W=pe.createElement("button",{type:"button",onClick:d,"aria-label":"Close",className:"".concat(t,"-close")},u||pe.createElement("span",{className:"".concat(t,"-close-x")})));var I=pe.createElement("div",{className:"".concat(t,"-content")},W,M,pe.createElement("div",cl({className:"".concat(t,"-body"),style:p},v),h),z);return pe.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":s?o:null,"aria-modal":"true",ref:k,style:hi(hi({},i),P),className:Jg(t,n),onMouseDown:S,onMouseUp:E},pe.createElement("div",{tabIndex:0,ref:X,style:zK,"aria-hidden":"true"}),pe.createElement(m_e,{shouldUpdate:D||O},C?C(I):I),pe.createElement("div",{tabIndex:0,ref:$,style:zK,"aria-hidden":"true"}))}),_ie=we.forwardRef(function(r,e){var t=r.prefixCls,n=r.title,i=r.style,s=r.className,o=r.visible,a=r.forceRender,l=r.destroyOnClose,u=r.motionName,d=r.ariaId,h=r.onVisibleChanged,p=r.mousePosition,v=we.useRef(),C=we.useState(),S=No(C,2),E=S[0],k=S[1],D={};E&&(D.transformOrigin=E);function O(){var H=p_e(v.current);k(p?"".concat(p.x-H.left,"px ").concat(p.y-H.top,"px"):"")}return we.createElement(Xx,{visible:o,onVisibleChanged:h,onAppearPrepare:O,onEnterPrepare:O,forceRender:a,motionName:u,removeOnLeave:l,ref:v},function(H,V){var X=H.className,$=H.style;return we.createElement(__e,cl({},r,{ref:e,title:n,ariaId:d,prefixCls:t,holderRef:V,style:hi(hi(hi({},$),i),D),className:Jg(s,X)}))})});_ie.displayName="Content";function UK(r){var e=r.prefixCls,t=e===void 0?"rc-dialog":e,n=r.zIndex,i=r.visible,s=i===void 0?!1:i,o=r.keyboard,a=o===void 0?!0:o,l=r.focusTriggerAfterClose,u=l===void 0?!0:l,d=r.scrollLocker,h=r.wrapStyle,p=r.wrapClassName,v=r.wrapProps,C=r.onClose,S=r.afterClose,E=r.transitionName,k=r.animation,D=r.closable,O=D===void 0?!0:D,H=r.mask,V=H===void 0?!0:H,X=r.maskTransitionName,$=r.maskAnimation,P=r.maskClosable,z=P===void 0?!0:P,M=r.maskStyle,W=r.maskProps,I=r.rootClassName,R=we.useRef(),G=we.useRef(),Z=we.useRef(),ee=we.useState(s),ne=No(ee,2),ie=ne[0],te=ne[1],B=a_e();function K(Ye){if(Ye){if(!NE(G.current,document.activeElement)){var gt;R.current=document.activeElement,(gt=Z.current)===null||gt===void 0||gt.focus()}}else{if(te(!1),V&&R.current&&u){try{R.current.focus({preventScroll:!0})}catch{}R.current=null}ie&&(S==null||S())}}function de(Ye){C==null||C(Ye)}var ae=we.useRef(!1),De=we.useRef(),Me=function(){clearTimeout(De.current),ae.current=!0},Qe=function(){De.current=setTimeout(function(){ae.current=!1})},ct=null;z&&(ct=function(gt){ae.current?ae.current=!1:G.current===gt.target&&de(gt)});function Rt(Ye){if(a&&Ye.keyCode===Di.ESC){Ye.stopPropagation(),de(Ye);return}s&&Ye.keyCode===Di.TAB&&Z.current.changeActive(!Ye.shiftKey)}return we.useEffect(function(){return s&&te(!0),function(){}},[s]),we.useEffect(function(){return function(){clearTimeout(De.current)}},[]),we.useEffect(function(){return ie?(d==null||d.lock(),d==null?void 0:d.unLock):function(){}},[ie,d]),we.createElement("div",cl({className:Jg("".concat(t,"-root"),I)},f_e(r,{data:!0})),we.createElement(g_e,{prefixCls:t,visible:V&&s,motionName:VK(t,X,$),style:hi({zIndex:n},M),maskProps:W}),we.createElement("div",cl({tabIndex:-1,onKeyDown:Rt,className:Jg("".concat(t,"-wrap"),p),ref:G,onClick:ct,style:hi(hi({zIndex:n},h),{},{display:ie?null:"none"})},v),we.createElement(_ie,cl({},r,{onMouseDown:Me,onMouseUp:Qe,ref:Z,closable:O,ariaId:B,prefixCls:t,visible:s,onClose:de,onVisibleChanged:K,motionName:VK(t,E,k)}))))}var vie=function(e){var t=e.visible,n=e.getContainer,i=e.forceRender,s=e.destroyOnClose,o=s===void 0?!1:s,a=e.afterClose,l=we.useState(t),u=No(l,2),d=u[0],h=u[1];return we.useEffect(function(){t&&h(!0)},[t]),n===!1?we.createElement(UK,cl({},e,{getOpenCount:function(){return 2}})):!i&&o&&!d?null:we.createElement(s_e,{visible:t,forceRender:i,getContainer:n},function(p){return we.createElement(UK,cl({},e,{destroyOnClose:o,afterClose:function(){a==null||a(),h(!1)}},p))})};vie.displayName="Dialog";const Yz=Ni("modal"),Mb=Ni("confirm"),v_e=Ht(Yz,"close"),b_e=si(v_e,"x"),C_e=si(Yz,"centered"),y_e=Ht(Mb,"container"),w_e=Ht(Mb,"indicator"),S_e=r=>typeof r=="string"?Ht(Mb,d6[r]):"",L_e=Ht(Mb,"content"),Zz=Ht(Mb,"message"),E_e=Ht(Mb,"btns"),x_e=si(Mb,"centered"),D_e=si(Zz,"text"),I_e=si(Zz,"detail");var T_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const gE=[];let c6;const $K=r=>{c6={x:r.pageX,y:r.pageY},setTimeout(()=>{c6=null},100)},k_e=pe.createElement("span",{className:b_e},pe.createElement(cs,{type:"close"})),bie=r=>{we.useEffect(()=>(document.documentElement.addEventListener("click",$K,!0),()=>{document.documentElement.removeEventListener("click",$K,!0)}),[]);const e=C=>{const{onCancel:S}=r;S==null||S(C)},t=C=>{const{onOk:S}=r;S==null||S(C)},{footer:n,visible:i,wrapClassName:s,centered:o,getContainer:a,closeIcon:l,cancelText:u="Cancel",okText:d="Ok"}=r,h=T_e(r,["footer","visible","wrapClassName","centered","getContainer","closeIcon","cancelText","okText"]),p=ni(s,{[C_e]:!!o}),v=()=>{const{footer:C,cancelButtonProps:S,okButtonProps:E}=r;return C!==void 0?C:pe.createElement(pe.Fragment,null,pe.createElement(Zw,Object.assign({onClick:e},S),u),pe.createElement(Zw,Object.assign({onClick:t},E),d))};return pe.createElement(vie,Object.assign({},h,{getContainer:a,prefixCls:Yz,wrapClassName:p,footer:v(),visible:i,mousePosition:c6,onClose:e,closeIcon:k_e}))},jK=r=>{const e=we.useRef(!1),{close:t}=r,n=a=>{!a||!a.then||a.then((...l)=>{t==null||t(...l)},l=>{console.error(l),e.current=!1})},i=()=>{const{actionFn:a,close:l}=r;if(e.current)return;if(e.current=!0,!a){l==null||l();return}let u;if(a.length)u=a(l),e.current=!1;else if(u=a(),!u){l==null||l();return}n(u)},{children:s,buttonProps:o}=r;return pe.createElement(Zw,Object.assign({onClick:i},o),s)},N_e=r=>{const{actions:e,icon:t,onCancel:n,onOk:i,close:s,maskStyle:o,okText:a="Ok",okButtonProps:l,cancelText:u="Cancel",cancelButtonProps:d,okCancel:h,bodyStyle:p,closable:v=!1,className:C,width:S=520,style:E={},mask:k=!0,maskClosable:D=!1,transitionName:O="zoom",maskTransitionName:H="fade",type:V,visible:X}=r,$=S_e(V),P=ni(Mb,$,C),z=h&&pe.createElement(jK,{actionFn:n,close:s,buttonProps:d},u);return pe.createElement(bie,{prefixCls:Mb,className:P,wrapClassName:ni({[x_e]:!!r.centered}),onCancel:()=>s({triggerCancel:!0}),transitionName:O,maskTransitionName:H,mask:k,maskClosable:D,style:E,width:S,closable:v,footer:"",title:"",maskStyle:o,visible:X},pe.createElement("div",{className:y_e,style:p},pe.createElement("div",{className:L_e},pe.createElement("div",{className:w_e}," ",t," "),pe.createElement("div",{className:Zz},r.title!==void 0&&pe.createElement("span",{className:D_e},r.title),pe.createElement("div",{className:I_e},r.content))),pe.createElement("div",{className:E_e},e===void 0?pe.createElement(pe.Fragment,null,z,pe.createElement(jK,{actionFn:i,close:s,buttonProps:l},a)):e)))};var A_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Cie(r){const e=document.createElement("div");document.body.appendChild(e);const t=Object.assign(Object.assign({},r),{close:s,visible:!0});function n(...o){const a=o.some(u=>u&&u.triggerCancel);r.onCancel&&a&&r.onCancel(...o),dne(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let u=0;u<gE.length;u++)if(gE[u]===s){gE.splice(u,1);break}}function i(o){var{okText:a,cancelText:l}=o,u=A_e(o,["okText","cancelText"]);vM(pe.createElement(N_e,Object.assign({okText:a,cancelText:l},u)),e)}function s(...o){n(...o)}return i(t),gE.push(s),{destroy:s}}function O_e(r){return Object.assign({type:"warning",okCancel:!1,icon:pe.createElement(cs,{type:"warning"})},r)}function M_e(r){return Object.assign({type:"confirm",okCancel:!0,icon:pe.createElement(cs,{type:"warning"})},r)}function yie(r){return Cie(O_e(r))}const l2=bie;var d6;(function(r){r.warning="warning",r.confirm="confirm"})(d6||(d6={}));l2.warning=yie;l2.warn=yie;l2.confirm=function(e){return Cie(M_e(e))};l2.destroyAll=function(){for(;gE.length;){const e=gE.pop();e&&e()}};var R_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const qK=Ni("drop-down"),Xz=we.forwardRef((r,e)=>{const{className:t,overlay:n,children:i,placement:s="right",trigger:o="click"}=r,a=R_e(r,["className","overlay","children","placement","trigger"]),l=n2({render:()=>n});we.useImperativeHandle(e,()=>({contextView:l,dispose:()=>{l.hide()}}));const u=ni(qK,si(qK,s),t),d={[fne(o)]:function(h){if(!l)return;const v=h.currentTarget.getBoundingClientRect();let C=qq(s,v);if(l.show(C),s==="left"||s==="top"){const S=l.view.getBoundingClientRect();S.x=v.x,S.y=v.y,C=qq(s,S),l.show(C)}}};return pe.createElement("div",Object.assign({className:u},d,a),i)});var h6;(function(r){r.ENTER="Enter"})(h6||(h6={}));var P_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Jx=Ni("input"),F_e=si(Jx,"normal"),B_e=si(Jx,"lg"),W_e=si(Jx,"disabled");function V_e(r){return typeof r>"u"||r===null?"":r}function wie(r,e,t){t&&t(e)}function H_e(r,e){return ni(Jx,{[F_e]:r==="normal"},{[B_e]:r==="large"},{[W_e]:e})}let Qz=class extends pe.Component{constructor(e){super(e),this.input=null,this.saveInput=n=>{this.input=n},this.handleChange=n=>{const{onChange:i}=this.props;this.setValue(n.target.value),typeof i=="function"&&wie(this.input,n,i)},this.handleKeyDown=n=>{const{onPressEnter:i,onKeyDown:s}=this.props;n.key===h6.ENTER&&(i==null||i(n)),s==null||s(n)};const t=typeof e.value>"u"?e.defaultValue:e.value;this.state={value:t,prevValue:e.value}}static getDerivedStateFromProps(e,{prevValue:t}){const n={prevValue:e.value};return(e.value!==void 0||t!==e.value)&&(n.value=e.value),n}setValue(e){this.props.value===void 0&&this.setState({value:e})}render(){const{value:e}=this.state,t=this.props,{className:n,size:i="normal",disabled:s=!1,placeholder:o,style:a}=t,l=P_e(t,["className","size","disabled","placeholder","style"]);return pe.createElement("input",Object.assign({value:e,style:a,placeholder:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:ni(n,H_e(i,s)),ref:this.saveInput},l))}};Qz.defaultProps={type:"text"};function f6(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[];return pe.Children.forEach(r,function(n){n==null&&!e.keepEmpty||(Array.isArray(n)?t=t.concat(f6(n)):XT.isFragment(n)&&n.props?t=t.concat(f6(n.props.children,e)):t.push(n))}),t}var g6=we.createContext(null);function z_e(r){var e=r.children,t=r.onBatchResize,n=we.useRef(0),i=we.useRef([]),s=we.useContext(g6),o=we.useCallback(function(a,l,u){n.current+=1;var d=n.current;i.current.push({size:a,element:l,data:u}),Promise.resolve().then(function(){d===n.current&&(t==null||t(i.current),i.current=[])}),s==null||s(a,l,u)},[t,s]);return we.createElement(g6.Provider,{value:o},e)}var tC=new Map;function U_e(r){r.forEach(function(e){var t,n=e.target;(t=tC.get(n))===null||t===void 0||t.forEach(function(i){return i(n)})})}var Sie=new nie(U_e);function $_e(r,e){tC.has(r)||(tC.set(r,new Set),Sie.observe(r)),tC.get(r).add(e)}function j_e(r,e){tC.has(r)&&(tC.get(r).delete(e),tC.get(r).size||(Sie.unobserve(r),tC.delete(r)))}var q_e=function(r){US(t,r);var e=$S(t);function t(){return $C(this,t),e.apply(this,arguments)}return jC(t,[{key:"render",value:function(){return this.props.children}}]),t}(we.Component);function K_e(r,e){var t=r.children,n=r.disabled,i=we.useRef(null),s=we.useRef(null),o=we.useContext(g6),a=typeof t=="function",l=a?t(i):t,u=we.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!a&&we.isValidElement(l)&&Pz(l),h=d?l.ref:null,p=Cge(h,i),v=function(){var k;return ZT(i.current)||(i.current&&au(i.current)==="object"?ZT((k=i.current)===null||k===void 0?void 0:k.nativeElement):null)||ZT(s.current)};we.useImperativeHandle(e,function(){return v()});var C=we.useRef(r);C.current=r;var S=we.useCallback(function(E){var k=C.current,D=k.onResize,O=k.data,H=E.getBoundingClientRect(),V=H.width,X=H.height,$=E.offsetWidth,P=E.offsetHeight,z=Math.floor(V),M=Math.floor(X);if(u.current.width!==z||u.current.height!==M||u.current.offsetWidth!==$||u.current.offsetHeight!==P){var W={width:z,height:M,offsetWidth:$,offsetHeight:P};u.current=W;var I=$===Math.round(V)?V:$,R=P===Math.round(X)?X:P,G=hi(hi({},W),{},{offsetWidth:I,offsetHeight:R});o==null||o(G,E,O),D&&Promise.resolve().then(function(){D(G,E)})}},[]);return we.useEffect(function(){var E=v();return E&&!n&&$_e(E,S),function(){return j_e(E,S)}},[i.current,n]),we.createElement(q_e,{ref:s},d?we.cloneElement(l,{ref:p}):l)}var G_e=we.forwardRef(K_e),Y_e="rc-observer-key";function Z_e(r,e){var t=r.children,n=typeof t=="function"?[t]:f6(t);return n.map(function(i,s){var o=(i==null?void 0:i.key)||"".concat(Y_e,"-").concat(s);return we.createElement(G_e,cl({},r,{key:o,ref:s===0?e:void 0}),i)})}var Lie=we.forwardRef(Z_e);Lie.Collection=z_e;function X_e(r,e){var t=Object.assign({},r);return Array.isArray(e)&&e.forEach(function(n){delete t[n]}),t}var Q_e=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,J_e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],x3={},Ig;function eve(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=r.getAttribute("id")||r.getAttribute("data-reactid")||r.getAttribute("name");if(e&&x3[t])return x3[t];var n=window.getComputedStyle(r),i=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),s=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),o=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),a=J_e.map(function(u){return"".concat(u,":").concat(n.getPropertyValue(u))}).join(";"),l={sizingStyle:a,paddingSize:s,borderSize:o,boxSizing:i};return e&&t&&(x3[t]=l),l}function tve(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ig||(Ig=document.createElement("textarea"),Ig.setAttribute("tab-index","-1"),Ig.setAttribute("aria-hidden","true"),document.body.appendChild(Ig)),r.getAttribute("wrap")?Ig.setAttribute("wrap",r.getAttribute("wrap")):Ig.removeAttribute("wrap");var i=eve(r,e),s=i.paddingSize,o=i.borderSize,a=i.boxSizing,l=i.sizingStyle;Ig.setAttribute("style","".concat(l,";").concat(Q_e)),Ig.value=r.value||r.placeholder||"";var u=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,h=Ig.scrollHeight,p;if(a==="border-box"?h+=o:a==="content-box"&&(h-=s),t!==null||n!==null){Ig.value=" ";var v=Ig.scrollHeight-s;t!==null&&(u=v*t,a==="border-box"&&(u=u+s+o),h=Math.max(u,h)),n!==null&&(d=v*n,a==="border-box"&&(d=d+s+o),p=h>d?"":"hidden",h=Math.min(d,h))}return{height:h,minHeight:u,maxHeight:d,overflowY:p,resize:"none"}}var D3,KK;function nve(){return KK||(KK=1,D3=function(e,t,n,i){var s=n?n.call(i,e,t):void 0;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var d=o[u];if(!l(d))return!1;var h=e[d],p=t[d];if(s=n?n.call(i,h,p,d):void 0,s===!1||s===void 0&&h!==p)return!1}return!0}),D3}var ive=nve();const rve=Rm(ive);var Y1;(function(r){r[r.NONE=0]="NONE",r[r.RESIZING=1]="RESIZING",r[r.RESIZED=2]="RESIZED"})(Y1||(Y1={}));var sve=function(r){US(t,r);var e=$S(t);function t(n){var i;return $C(this,t),i=e.call(this,n),i.nextFrameActionId=void 0,i.resizeFrameId=void 0,i.textArea=void 0,i.saveTextArea=function(s){i.textArea=s},i.handleResize=function(s){var o=i.state.resizeStatus,a=i.props,l=a.autoSize,u=a.onResize;o===Y1.NONE&&(typeof u=="function"&&u(s),l&&i.resizeOnNextFrame())},i.resizeOnNextFrame=function(){cancelAnimationFrame(i.nextFrameActionId),i.nextFrameActionId=requestAnimationFrame(i.resizeTextarea)},i.resizeTextarea=function(){var s=i.props.autoSize;if(!(!s||!i.textArea)){var o=s.minRows,a=s.maxRows,l=tve(i.textArea,!1,o,a);i.setState({textareaStyles:l,resizeStatus:Y1.RESIZING},function(){cancelAnimationFrame(i.resizeFrameId),i.resizeFrameId=requestAnimationFrame(function(){i.setState({resizeStatus:Y1.RESIZED},function(){i.resizeFrameId=requestAnimationFrame(function(){i.setState({resizeStatus:Y1.NONE}),i.fixFirefoxAutoScroll()})})})})}},i.renderTextArea=function(){var s=i.props,o=s.prefixCls,a=o===void 0?"rc-textarea":o,l=s.autoSize,u=s.onResize,d=s.className,h=s.disabled,p=i.state,v=p.textareaStyles,C=p.resizeStatus,S=X_e(i.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),E=Jg(a,d,zn({},"".concat(a,"-disabled"),h));"value"in S&&(S.value=S.value||"");var k=hi(hi(hi({},i.props.style),v),C===Y1.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return we.createElement(Lie,{onResize:i.handleResize,disabled:!(l||u)},we.createElement("textarea",cl({},S,{className:E,style:k,ref:i.saveTextArea})))},i.state={textareaStyles:{},resizeStatus:Y1.NONE},i}return jC(t,[{key:"componentDidUpdate",value:function(i){(i.value!==this.props.value||!rve(i.autoSize,this.props.autoSize))&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var i=this.textArea.selectionStart,s=this.textArea.selectionEnd;this.textArea.setSelectionRange(i,s)}}catch{}}},{key:"render",value:function(){return this.renderTextArea()}}]),t}(we.Component),ove=function(r){US(t,r);var e=$S(t);function t(n){var i;$C(this,t),i=e.call(this,n),i.resizableTextArea=void 0,i.focus=function(){i.resizableTextArea.textArea.focus()},i.saveTextArea=function(o){i.resizableTextArea=o},i.handleChange=function(o){var a=i.props.onChange;i.setValue(o.target.value,function(){i.resizableTextArea.resizeTextarea()}),a&&a(o)},i.handleKeyDown=function(o){var a=i.props,l=a.onPressEnter,u=a.onKeyDown;o.keyCode===13&&l&&l(o),u&&u(o)};var s=typeof n.value>"u"||n.value===null?n.defaultValue:n.value;return i.state={value:s},i}return jC(t,[{key:"setValue",value:function(i,s){"value"in this.props||this.setState({value:i},s)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return we.createElement(sve,cl({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(i){return"value"in i?{value:i.value}:null}}]),t}(we.Component),dA={},I3={exports:{}},GK;function Jz(){return GK||(GK=1,function(r){function e(t){return t&&t.__esModule?t:{default:t}}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(I3)),I3.exports}var T3={exports:{}},k3={exports:{}},YK;function ave(){return YK||(YK=1,function(r){function e(t){if(Array.isArray(t))return t}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(k3)),k3.exports}var N3={exports:{}},ZK;function lve(){return ZK||(ZK=1,function(r){function e(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var s,o,a,l,u=[],d=!0,h=!1;try{if(a=(i=i.call(t)).next,n===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=a.call(i)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(p){h=!0,o=p}finally{try{if(!d&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(h)throw o}}return u}}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(N3)),N3.exports}var A3={exports:{}},O3={exports:{}},XK;function uve(){return XK||(XK=1,function(r){function e(t,n){(n==null||n>t.length)&&(n=t.length);for(var i=0,s=Array(n);i<n;i++)s[i]=t[i];return s}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(O3)),O3.exports}var QK;function cve(){return QK||(QK=1,function(r){var e=uve();function t(n,i){if(n){if(typeof n=="string")return e(n,i);var s={}.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(n,i):void 0}}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports}(A3)),A3.exports}var M3={exports:{}},JK;function dve(){return JK||(JK=1,function(r){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(M3)),M3.exports}var eG;function Eie(){return eG||(eG=1,function(r){var e=ave(),t=lve(),n=cve(),i=dve();function s(o,a){return e(o)||t(o,a)||n(o,a)||i()}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports}(T3)),T3.exports}var hA={},R3={exports:{}},P3={exports:{}},tG;function hve(){return tG||(tG=1,function(r){function e(t){"@babel/helpers - typeof";return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(P3)),P3.exports}var nG;function eU(){return nG||(nG=1,function(r){var e=hve().default;function t(i){if(typeof WeakMap!="function")return null;var s=new WeakMap,o=new WeakMap;return(t=function(l){return l?o:s})(i)}function n(i,s){if(!s&&i&&i.__esModule)return i;if(i===null||e(i)!="object"&&typeof i!="function")return{default:i};var o=t(s);if(o&&o.has(i))return o.get(i);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in i)if(u!=="default"&&{}.hasOwnProperty.call(i,u)){var d=l?Object.getOwnPropertyDescriptor(i,u):null;d&&(d.get||d.set)?Object.defineProperty(a,u,d):a[u]=i[u]}return a.default=i,o&&o.set(i,a),a}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports}(R3)),R3.exports}var iG;function fve(){if(iG)return hA;iG=1;var r=eU().default;Object.defineProperty(hA,"__esModule",{value:!0}),hA.default=t;var e=r(Gx());function t(n){var i=e.useRef();i.current=n;var s=e.useCallback(function(){for(var o,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(o=i.current)===null||o===void 0?void 0:o.call.apply(o,[i].concat(l))},[]);return s}return hA}var $y={},fA={},rG;function gve(){if(rG)return fA;rG=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.default=r;function r(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return fA}var sG;function pve(){if(sG)return $y;sG=1;var r=Jz().default,e=eU().default;Object.defineProperty($y,"__esModule",{value:!0}),$y.useLayoutUpdateEffect=$y.default=void 0;var t=e(Gx()),n=r(gve()),i=(0,n.default)()?t.useLayoutEffect:t.useEffect,s=function(a,l){var u=t.useRef(!0);i(function(){return a(u.current)},l),i(function(){return u.current=!1,function(){u.current=!0}},[])};return $y.useLayoutUpdateEffect=function(a,l){s(function(u){if(!u)return a()},l)},$y.default=s,$y}var gA={},oG;function mve(){if(oG)return gA;oG=1;var r=eU().default,e=Jz().default;Object.defineProperty(gA,"__esModule",{value:!0}),gA.default=i;var t=e(Eie()),n=r(Gx());function i(s){var o=n.useRef(!1),a=n.useState(s),l=(0,t.default)(a,2),u=l[0],d=l[1];n.useEffect(function(){return o.current=!1,function(){o.current=!0}},[]);function h(p,v){v&&o.current||d(p)}return[u,h]}return gA}var aG;function _ve(){if(aG)return dA;aG=1;var r=Jz().default;Object.defineProperty(dA,"__esModule",{value:!0}),dA.default=o;var e=r(Eie()),t=r(fve()),n=pve(),i=r(mve());function s(a){return a!==void 0}function o(a,l){var u=l||{},d=u.defaultValue,h=u.value,p=u.onChange,v=u.postState,C=(0,i.default)(function(){return s(h)?h:s(d)?typeof d=="function"?d():d:typeof a=="function"?a():a}),S=(0,e.default)(C,2),E=S[0],k=S[1],D=h!==void 0?h:E,O=v?v(D):D,H=(0,t.default)(p),V=(0,i.default)([D]),X=(0,e.default)(V,2),$=X[0],P=X[1];(0,n.useLayoutUpdateEffect)(function(){var M=$[0];E!==M&&H(E,M)},[$]),(0,n.useLayoutUpdateEffect)(function(){s(h)||k(h)},[h]);var z=(0,t.default)(function(M,W){k(M,W),P([D],W)});return[O,z]}return dA}var vve=_ve();const bve=Rm(vve);var Cve=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const xie=Ht(Jx,"textarea"),yve=si(xie,"show-count"),wve=r=>{var{showCount:e=!1,maxLength:t,className:n,style:i,onChange:s}=r,o=Cve(r,["showCount","maxLength","className","style","onChange"]);const a=we.useRef(null),[l,u]=bve(o.defaultValue,{value:o.value}),d=we.useRef(o.value);we.useEffect(()=>{(o.value!==void 0||d.current!==o.value)&&(u(o.value),d.current=o.value)},[o.value,d.current]);const h=k=>{o.value===void 0&&u(k)},p=k=>{h(k.target.value),wie(a.current,k,s)},v=Is.omit(o,["value"]),C=pe.createElement(ove,Object.assign({},v,{value:l,maxLength:t,className:ni(n&&!e?[n]:""),style:e?{}:i,prefixCls:Jx,onChange:p,ref:a}));let S=V_e(l);const E=Number(t)>0;if(S=E?[...S].slice(0,t).join(""):S,e){const D=`${[...S].length}${E?` / ${t}`:""}`;return pe.createElement("div",{className:ni(n,xie,yve),style:i,"data-count":D},C)}return C};Qz.TextArea=wve;var Sve=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const u2=Ni("list"),Lve=si(u2,"vertical"),Eve=si(u2,"horizontal");function xve(r){const{children:e,current:t,disable:n,onClick:i,onSelect:s,className:o,mode:a}=r,l=Sve(r,["children","current","disable","onClick","onSelect","className","mode"]),[u,d]=we.useState(t),[h,p]=we.useState(n);we.useEffect(()=>{u!==t&&d(t),n!==h&&p(n)},[t,n]);const v=(E,k)=>{i==null||i(E,k),k&&(k.id!==u&&d(k.id),s==null||s(E,k))},S=ni(u2,o,a==="horizontal"?Eve:Lve);return pe.createElement("ul",Object.assign({},l,{className:S}),t2(e,{active:u,disable:h,onClick:v}))}var Dve=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const tU=Ht(u2,"item"),Ive=Ht(u2,"label"),Tve=si(tU,"active"),lG=si(tU,"disabled");function kve(r){const{id:e,onClick:t,disabled:n,active:i,disable:s,className:o,children:a}=r,l=Dve(r,["id","onClick","disabled","active","disable","className","children"]),u=p=>{t==null||t(p,r)};let d="";(n!==void 0||n===!0)&&(d=lG),s===e&&(d=lG);const h=ni(tU,o,d,i===e?Tve:"");return pe.createElement("li",Object.assign({id:e.toString(),className:h},l,{onClick:u}),pe.createElement("span",{className:Ive},a))}class Nve{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Die=new Nve;function Jn(r){zv(r)||Die.onUnexpectedError(r)}function Ml(r){zv(r)||Die.onUnexpectedExternalError(r)}function uG(r){if(r instanceof Error){let{name:e,message:t}=r;const n=r.stacktrace||r.stack;return{$isError:!0,name:e,message:t,stack:n}}return r}const p6="Canceled";function zv(r){return r instanceof Error&&r.name===p6&&r.message===p6}function KS(){const r=new Error(p6);return r.name=r.message,r}function ym(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function Ave(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}class Ove extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function Rb(r){const e=this;let t=!1,n;return function(){return t||(t=!0,n=r.apply(e,arguments)),n}}var Xi;(function(r){function e(D){return D&&typeof D=="object"&&typeof D[Symbol.iterator]=="function"}r.is=e;const t=Object.freeze([]);function n(){return t}r.empty=n;function*i(D){yield D}r.single=i;function s(D){return D||t}r.from=s;function o(D){return!D||D[Symbol.iterator]().next().done===!0}r.isEmpty=o;function a(D){return D[Symbol.iterator]().next().value}r.first=a;function l(D,O){for(const H of D)if(O(H))return!0;return!1}r.some=l;function u(D,O){for(const H of D)if(O(H))return H}r.find=u;function*d(D,O){for(const H of D)O(H)&&(yield H)}r.filter=d;function*h(D,O){let H=0;for(const V of D)yield O(V,H++)}r.map=h;function*p(...D){for(const O of D)for(const H of O)yield H}r.concat=p;function*v(D){for(const O of D)for(const H of O)yield H}r.concatNested=v;function C(D,O,H){let V=H;for(const X of D)V=O(V,X);return V}r.reduce=C;function*S(D,O,H=D.length){for(O<0&&(O+=D.length),H<0?H+=D.length:H>D.length&&(H=D.length);O<H;O++)yield D[O]}r.slice=S;function E(D,O=Number.POSITIVE_INFINITY){const H=[];if(O===0)return[H,D];const V=D[Symbol.iterator]();for(let X=0;X<O;X++){const $=V.next();if($.done)return[H,r.empty()];H.push($.value)}return[H,{[Symbol.iterator](){return V}}]}r.consume=E;function k(D,O,H=(V,X)=>V===X){const V=D[Symbol.iterator](),X=O[Symbol.iterator]();for(;;){const $=V.next(),P=X.next();if($.done!==P.done)return!1;if($.done)return!0;if(!H($.value,P.value))return!1}}r.equals=k})(Xi||(Xi={}));class Mve extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function nU(r){return typeof r.dispose=="function"&&r.dispose.length===0}function nr(r){if(Xi.is(r)){let e=[];for(const t of r)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new Mve(e);return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function cC(...r){return Bi(()=>nr(r))}function Bi(r){return{dispose:Rb(()=>{r()})}}class Et{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{nr(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Et.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Et.DISABLE_DISPOSED_WARNING=!1;class Je{constructor(){this._store=new Et,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Je.None=Object.freeze({dispose(){}});class uc{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class Rve{constructor(e){this.object=e}dispose(){}}let jo=class m6{constructor(e){this.element=e,this.next=m6.Undefined,this.prev=m6.Undefined}};jo.Undefined=new jo(void 0);class Eh{constructor(){this._first=jo.Undefined,this._last=jo.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===jo.Undefined}clear(){let e=this._first;for(;e!==jo.Undefined;){const t=e.next;e.prev=jo.Undefined,e.next=jo.Undefined,e=t}this._first=jo.Undefined,this._last=jo.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new jo(e);if(this._first===jo.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==jo.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==jo.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==jo.Undefined&&e.next!==jo.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===jo.Undefined&&e.next===jo.Undefined?(this._first=jo.Undefined,this._last=jo.Undefined):e.next===jo.Undefined?(this._last=this._last.prev,this._last.next=jo.Undefined):e.prev===jo.Undefined&&(this._first=this._first.next,this._first.prev=jo.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==jo.Undefined;)yield e.element,e=e.next}}var F3;const LO="en";let xM=!1,DM=!1,EO=!1,Iie=!1,Tie=!1,iU=!1,TT,xO=LO,Pve,$1;const go=typeof self=="object"?self:typeof global=="object"?global:{};let Td;typeof go.vscode<"u"&&typeof go.vscode.process<"u"?Td=go.vscode.process:typeof process<"u"&&(Td=process);const Fve=typeof((F3=Td==null?void 0:Td.versions)===null||F3===void 0?void 0:F3.electron)=="string",Bve=Fve&&(Td==null?void 0:Td.type)==="renderer";if(typeof navigator=="object"&&!Bve)$1=navigator.userAgent,xM=$1.indexOf("Windows")>=0,DM=$1.indexOf("Macintosh")>=0,iU=($1.indexOf("Macintosh")>=0||$1.indexOf("iPad")>=0||$1.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,EO=$1.indexOf("Linux")>=0,Tie=!0,TT=navigator.language,xO=TT;else if(typeof Td=="object"){xM=Td.platform==="win32",DM=Td.platform==="darwin",EO=Td.platform==="linux",EO&&Td.env.SNAP&&Td.env.SNAP_REVISION,TT=LO,xO=LO;const r=Td.env.VSCODE_NLS_CONFIG;if(r)try{const e=JSON.parse(r),t=e.availableLanguages["*"];TT=e.locale,xO=t||LO,Pve=e._translationsConfigFile}catch{}Iie=!0}else console.error("Unable to resolve platform.");const Nl=xM,zi=DM,Hc=EO,wm=Iie,eD=Tie,Lv=iU,Wve=$1,Vve=xO,Hve=TT,zve=(()=>{if(typeof go.postMessage=="function"&&!go.importScripts){let r=[];go.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=r.length;n<i;n++){const s=r[n];if(s.id===t.data.vscodeScheduleAsyncWork){r.splice(n,1),s.callback();return}}});let e=0;return t=>{const n=++e;r.push({id:n,callback:t}),go.postMessage({vscodeScheduleAsyncWork:n},"*")}}return r=>setTimeout(r)})(),_f=DM||iU?2:xM?1:3;let cG=!0,dG=!1;function kie(){if(!dG){dG=!0;const r=new Uint8Array(2);r[0]=1,r[1]=2,cG=new Uint16Array(r.buffer)[0]===512+1}return cG}const Uve=go.performance&&typeof go.performance.now=="function";class Ev{constructor(e){this._highResolution=Uve&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new Ev(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?go.performance.now():Date.now()}}var yn;(function(r){r.None=()=>Je.None;function e(D){return(O,H=null,V)=>{let X=!1,$;return $=D(P=>{if(!X)return $?$.dispose():X=!0,O.call(H,P)},null,V),X&&$.dispose(),$}}r.once=e;function t(D,O){return l((H,V=null,X)=>D($=>H.call(V,O($)),null,X))}r.map=t;function n(D,O){return l((H,V=null,X)=>D($=>{O($),H.call(V,$)},null,X))}r.forEach=n;function i(D,O){return l((H,V=null,X)=>D($=>O($)&&H.call(V,$),null,X))}r.filter=i;function s(D){return D}r.signal=s;function o(...D){return(O,H=null,V)=>cC(...D.map(X=>X($=>O.call(H,$),null,V)))}r.any=o;function a(D,O,H){let V=H;return t(D,X=>(V=O(V,X),V))}r.reduce=a;function l(D){let O;const H=new Ae({onFirstListenerAdd(){O=D(H.fire,H)},onLastListenerRemove(){O.dispose()}});return H.event}function u(D,O,H=100,V=!1,X){let $,P,z,M=0;const W=new Ae({leakWarningThreshold:X,onFirstListenerAdd(){$=D(I=>{M++,P=O(P,I),V&&!z&&(W.fire(P),P=void 0),clearTimeout(z),z=setTimeout(()=>{const R=P;P=void 0,z=void 0,(!V||M>1)&&W.fire(R),M=0},H)})},onLastListenerRemove(){$.dispose()}});return W.event}r.debounce=u;function d(D,O=(H,V)=>H===V){let H=!0,V;return i(D,X=>{const $=H||!O(X,V);return H=!1,V=X,$})}r.latch=d;function h(D,O){return[r.filter(D,O),r.filter(D,H=>!O(H))]}r.split=h;function p(D,O=!1,H=[]){let V=H.slice(),X=D(z=>{V?V.push(z):P.fire(z)});const $=()=>{V&&V.forEach(z=>P.fire(z)),V=null},P=new Ae({onFirstListenerAdd(){X||(X=D(z=>P.fire(z)))},onFirstListenerDidAdd(){V&&(O?setTimeout($):$())},onLastListenerRemove(){X&&X.dispose(),X=null}});return P.event}r.buffer=p;class v{constructor(O){this.event=O}map(O){return new v(t(this.event,O))}forEach(O){return new v(n(this.event,O))}filter(O){return new v(i(this.event,O))}reduce(O,H){return new v(a(this.event,O,H))}latch(){return new v(d(this.event))}debounce(O,H=100,V=!1,X){return new v(u(this.event,O,H,V,X))}on(O,H,V){return this.event(O,H,V)}once(O,H,V){return e(this.event)(O,H,V)}}function C(D){return new v(D)}r.chain=C;function S(D,O,H=V=>V){const V=(...z)=>P.fire(H(...z)),X=()=>D.on(O,V),$=()=>D.removeListener(O,V),P=new Ae({onFirstListenerAdd:X,onLastListenerRemove:$});return P.event}r.fromNodeEventEmitter=S;function E(D,O,H=V=>V){const V=(...z)=>P.fire(H(...z)),X=()=>D.addEventListener(O,V),$=()=>D.removeEventListener(O,V),P=new Ae({onFirstListenerAdd:X,onLastListenerRemove:$});return P.event}r.fromDOMEventEmitter=E;function k(D){return new Promise(O=>e(D)(O))}r.toPromise=k})(yn||(yn={}));class zP{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${zP._idPool++}`}start(e){this._stopWatch=new Ev(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}zP._idPool=0;let Ae=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new zP(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var i;this._listeners||(this._listeners=new Eh);const s=this._listeners.isEmpty();s&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const o=this._listeners.push(t?[e,t]:e);s&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(i=this._leakageMon)===null||i===void 0?void 0:i.check(this._listeners.size),l=Bi(()=>{a&&a(),this._disposed||(o(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof Et?n.add(l):Array.isArray(n)&&n.push(l),l}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new Eh);for(let i of this._listeners)this._deliveryQueue.push([i,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[i,s]=this._deliveryQueue.shift();try{typeof i=="function"?i.call(void 0,s):i[0].call(i[1],s)}catch(o){Jn(o)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,i,s;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(i=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||i===void 0||i.call(n),(s=this._leakageMon)===null||s===void 0||s.dispose())}};class IM extends Ae{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Eh,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class $ve extends IM{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class rU{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(s=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,s)):t.call(n,s)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}}class hG{constructor(){this.listening=!1,this.inputEvent=yn.None,this.inputEventListener=Je.None,this.emitter=new Ae({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class Xw{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new Ae,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}Xw.INSTANCE=new Xw;function TM(){return Xw.INSTANCE.getZoomLevel()}function Nie(){return Xw.INSTANCE.getTimeSinceLastZoomLevelChanged()}function sU(r){return Xw.INSTANCE.onDidChangeZoomLevel(r)}function Aie(){return Xw.INSTANCE.getZoomFactor()}function Ik(){return Xw.INSTANCE.getPixelRatio()}const c2=navigator.userAgent,Bd=c2.indexOf("Firefox")>=0,dC=c2.indexOf("AppleWebKit")>=0,oU=c2.indexOf("Chrome")>=0,qg=!oU&&c2.indexOf("Safari")>=0,Oie=!oU&&!qg&&dC,Mie=c2.indexOf("Android")>=0,aU=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,jve=Object.freeze(Object.defineProperty({__proto__:null,getPixelRatio:Ik,getTimeSinceLastZoomLevelChanged:Nie,getZoomFactor:Aie,getZoomLevel:TM,isAndroid:Mie,isChrome:oU,isFirefox:Bd,isSafari:qg,isStandalone:aU,isWebKit:dC,isWebkitWebView:Oie,onDidChangeZoomLevel:sU},Symbol.toStringTag,{value:"Module"})),UP={clipboard:{writeText:wm||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:wm||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>wm||aU?0:navigator.keyboard||qg?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};class lU{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const DO=new lU,_6=new lU,v6=new lU,Rie=new Array(230),qve=Object.create(null),Kve=Object.create(null),uU=[];for(let r=0;r<=193;r++)uU[r]=-1;(function(){const r="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",r,r],[0,1,1,"Hyper",0,r,0,r,r,r],[0,1,2,"Super",0,r,0,r,r,r],[0,1,3,"Fn",0,r,0,r,r,r],[0,1,4,"FnLock",0,r,0,r,r,r],[0,1,5,"Suspend",0,r,0,r,r,r],[0,1,6,"Resume",0,r,0,r,r,r],[0,1,7,"Turbo",0,r,0,r,r,r],[0,1,8,"Sleep",0,r,0,"VK_SLEEP",r,r],[0,1,9,"WakeUp",0,r,0,r,r,r],[31,0,10,"KeyA",31,"A",65,"VK_A",r,r],[32,0,11,"KeyB",32,"B",66,"VK_B",r,r],[33,0,12,"KeyC",33,"C",67,"VK_C",r,r],[34,0,13,"KeyD",34,"D",68,"VK_D",r,r],[35,0,14,"KeyE",35,"E",69,"VK_E",r,r],[36,0,15,"KeyF",36,"F",70,"VK_F",r,r],[37,0,16,"KeyG",37,"G",71,"VK_G",r,r],[38,0,17,"KeyH",38,"H",72,"VK_H",r,r],[39,0,18,"KeyI",39,"I",73,"VK_I",r,r],[40,0,19,"KeyJ",40,"J",74,"VK_J",r,r],[41,0,20,"KeyK",41,"K",75,"VK_K",r,r],[42,0,21,"KeyL",42,"L",76,"VK_L",r,r],[43,0,22,"KeyM",43,"M",77,"VK_M",r,r],[44,0,23,"KeyN",44,"N",78,"VK_N",r,r],[45,0,24,"KeyO",45,"O",79,"VK_O",r,r],[46,0,25,"KeyP",46,"P",80,"VK_P",r,r],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",r,r],[48,0,27,"KeyR",48,"R",82,"VK_R",r,r],[49,0,28,"KeyS",49,"S",83,"VK_S",r,r],[50,0,29,"KeyT",50,"T",84,"VK_T",r,r],[51,0,30,"KeyU",51,"U",85,"VK_U",r,r],[52,0,31,"KeyV",52,"V",86,"VK_V",r,r],[53,0,32,"KeyW",53,"W",87,"VK_W",r,r],[54,0,33,"KeyX",54,"X",88,"VK_X",r,r],[55,0,34,"KeyY",55,"Y",89,"VK_Y",r,r],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",r,r],[22,0,36,"Digit1",22,"1",49,"VK_1",r,r],[23,0,37,"Digit2",23,"2",50,"VK_2",r,r],[24,0,38,"Digit3",24,"3",51,"VK_3",r,r],[25,0,39,"Digit4",25,"4",52,"VK_4",r,r],[26,0,40,"Digit5",26,"5",53,"VK_5",r,r],[27,0,41,"Digit6",27,"6",54,"VK_6",r,r],[28,0,42,"Digit7",28,"7",55,"VK_7",r,r],[29,0,43,"Digit8",29,"8",56,"VK_8",r,r],[30,0,44,"Digit9",30,"9",57,"VK_9",r,r],[21,0,45,"Digit0",21,"0",48,"VK_0",r,r],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",r,r],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",r,r],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",r,r],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",r,r],[10,1,50,"Space",10,"Space",32,"VK_SPACE",r,r],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,r,0,r,r,r],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",r,r],[59,1,64,"F1",59,"F1",112,"VK_F1",r,r],[60,1,65,"F2",60,"F2",113,"VK_F2",r,r],[61,1,66,"F3",61,"F3",114,"VK_F3",r,r],[62,1,67,"F4",62,"F4",115,"VK_F4",r,r],[63,1,68,"F5",63,"F5",116,"VK_F5",r,r],[64,1,69,"F6",64,"F6",117,"VK_F6",r,r],[65,1,70,"F7",65,"F7",118,"VK_F7",r,r],[66,1,71,"F8",66,"F8",119,"VK_F8",r,r],[67,1,72,"F9",67,"F9",120,"VK_F9",r,r],[68,1,73,"F10",68,"F10",121,"VK_F10",r,r],[69,1,74,"F11",69,"F11",122,"VK_F11",r,r],[70,1,75,"F12",70,"F12",123,"VK_F12",r,r],[0,1,76,"PrintScreen",0,r,0,r,r,r],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",r,r],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",r,r],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",r,r],[14,1,80,"Home",14,"Home",36,"VK_HOME",r,r],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",r,r],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",r,r],[13,1,83,"End",13,"End",35,"VK_END",r,r],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",r,r],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",r],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",r],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",r],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",r],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",r,r],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",r,r],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",r,r],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",r,r],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",r,r],[3,1,94,"NumpadEnter",3,r,0,r,r,r],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",r,r],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",r,r],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",r,r],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",r,r],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",r,r],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",r,r],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",r,r],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",r,r],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",r,r],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",r,r],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",r,r],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",r,r],[58,1,107,"ContextMenu",58,"ContextMenu",93,r,r,r],[0,1,108,"Power",0,r,0,r,r,r],[0,1,109,"NumpadEqual",0,r,0,r,r,r],[71,1,110,"F13",71,"F13",124,"VK_F13",r,r],[72,1,111,"F14",72,"F14",125,"VK_F14",r,r],[73,1,112,"F15",73,"F15",126,"VK_F15",r,r],[74,1,113,"F16",74,"F16",127,"VK_F16",r,r],[75,1,114,"F17",75,"F17",128,"VK_F17",r,r],[76,1,115,"F18",76,"F18",129,"VK_F18",r,r],[77,1,116,"F19",77,"F19",130,"VK_F19",r,r],[0,1,117,"F20",0,r,0,"VK_F20",r,r],[0,1,118,"F21",0,r,0,"VK_F21",r,r],[0,1,119,"F22",0,r,0,"VK_F22",r,r],[0,1,120,"F23",0,r,0,"VK_F23",r,r],[0,1,121,"F24",0,r,0,"VK_F24",r,r],[0,1,122,"Open",0,r,0,r,r,r],[0,1,123,"Help",0,r,0,r,r,r],[0,1,124,"Select",0,r,0,r,r,r],[0,1,125,"Again",0,r,0,r,r,r],[0,1,126,"Undo",0,r,0,r,r,r],[0,1,127,"Cut",0,r,0,r,r,r],[0,1,128,"Copy",0,r,0,r,r,r],[0,1,129,"Paste",0,r,0,r,r,r],[0,1,130,"Find",0,r,0,r,r,r],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",r,r],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",r,r],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",r,r],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",r,r],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",r,r],[0,1,136,"KanaMode",0,r,0,r,r,r],[0,0,137,"IntlYen",0,r,0,r,r,r],[0,1,138,"Convert",0,r,0,r,r,r],[0,1,139,"NonConvert",0,r,0,r,r,r],[0,1,140,"Lang1",0,r,0,r,r,r],[0,1,141,"Lang2",0,r,0,r,r,r],[0,1,142,"Lang3",0,r,0,r,r,r],[0,1,143,"Lang4",0,r,0,r,r,r],[0,1,144,"Lang5",0,r,0,r,r,r],[0,1,145,"Abort",0,r,0,r,r,r],[0,1,146,"Props",0,r,0,r,r,r],[0,1,147,"NumpadParenLeft",0,r,0,r,r,r],[0,1,148,"NumpadParenRight",0,r,0,r,r,r],[0,1,149,"NumpadBackspace",0,r,0,r,r,r],[0,1,150,"NumpadMemoryStore",0,r,0,r,r,r],[0,1,151,"NumpadMemoryRecall",0,r,0,r,r,r],[0,1,152,"NumpadMemoryClear",0,r,0,r,r,r],[0,1,153,"NumpadMemoryAdd",0,r,0,r,r,r],[0,1,154,"NumpadMemorySubtract",0,r,0,r,r,r],[0,1,155,"NumpadClear",0,r,0,r,r,r],[0,1,156,"NumpadClearEntry",0,r,0,r,r,r],[5,1,0,r,5,"Ctrl",17,"VK_CONTROL",r,r],[4,1,0,r,4,"Shift",16,"VK_SHIFT",r,r],[6,1,0,r,6,"Alt",18,"VK_MENU",r,r],[57,1,0,r,57,"Meta",0,"VK_COMMAND",r,r],[5,1,157,"ControlLeft",5,r,0,"VK_LCONTROL",r,r],[4,1,158,"ShiftLeft",4,r,0,"VK_LSHIFT",r,r],[6,1,159,"AltLeft",6,r,0,"VK_LMENU",r,r],[57,1,160,"MetaLeft",57,r,0,"VK_LWIN",r,r],[5,1,161,"ControlRight",5,r,0,"VK_RCONTROL",r,r],[4,1,162,"ShiftRight",4,r,0,"VK_RSHIFT",r,r],[6,1,163,"AltRight",6,r,0,"VK_RMENU",r,r],[57,1,164,"MetaRight",57,r,0,"VK_RWIN",r,r],[0,1,165,"BrightnessUp",0,r,0,r,r,r],[0,1,166,"BrightnessDown",0,r,0,r,r,r],[0,1,167,"MediaPlay",0,r,0,r,r,r],[0,1,168,"MediaRecord",0,r,0,r,r,r],[0,1,169,"MediaFastForward",0,r,0,r,r,r],[0,1,170,"MediaRewind",0,r,0,r,r,r],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",r,r],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",r,r],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",r,r],[0,1,174,"Eject",0,r,0,r,r,r],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",r,r],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",r,r],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",r,r],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",r,r],[0,1,179,"LaunchApp1",0,r,0,"VK_MEDIA_LAUNCH_APP1",r,r],[0,1,180,"SelectTask",0,r,0,r,r,r],[0,1,181,"LaunchScreenSaver",0,r,0,r,r,r],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",r,r],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",r,r],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",r,r],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",r,r],[0,1,186,"BrowserStop",0,r,0,"VK_BROWSER_STOP",r,r],[0,1,187,"BrowserRefresh",0,r,0,"VK_BROWSER_REFRESH",r,r],[0,1,188,"BrowserFavorites",0,r,0,"VK_BROWSER_FAVORITES",r,r],[0,1,189,"ZoomToggle",0,r,0,r,r,r],[0,1,190,"MailReply",0,r,0,r,r,r],[0,1,191,"MailForward",0,r,0,r,r,r],[0,1,192,"MailSend",0,r,0,r,r,r],[109,1,0,r,109,"KeyInComposition",229,r,r,r],[111,1,0,r,111,"ABNT_C2",194,"VK_ABNT_C2",r,r],[91,1,0,r,91,"OEM_8",223,"VK_OEM_8",r,r],[0,1,0,r,0,r,0,"VK_CLEAR",r,r],[0,1,0,r,0,r,0,"VK_KANA",r,r],[0,1,0,r,0,r,0,"VK_HANGUL",r,r],[0,1,0,r,0,r,0,"VK_JUNJA",r,r],[0,1,0,r,0,r,0,"VK_FINAL",r,r],[0,1,0,r,0,r,0,"VK_HANJA",r,r],[0,1,0,r,0,r,0,"VK_KANJI",r,r],[0,1,0,r,0,r,0,"VK_CONVERT",r,r],[0,1,0,r,0,r,0,"VK_NONCONVERT",r,r],[0,1,0,r,0,r,0,"VK_ACCEPT",r,r],[0,1,0,r,0,r,0,"VK_MODECHANGE",r,r],[0,1,0,r,0,r,0,"VK_SELECT",r,r],[0,1,0,r,0,r,0,"VK_PRINT",r,r],[0,1,0,r,0,r,0,"VK_EXECUTE",r,r],[0,1,0,r,0,r,0,"VK_SNAPSHOT",r,r],[0,1,0,r,0,r,0,"VK_HELP",r,r],[0,1,0,r,0,r,0,"VK_APPS",r,r],[0,1,0,r,0,r,0,"VK_PROCESSKEY",r,r],[0,1,0,r,0,r,0,"VK_PACKET",r,r],[0,1,0,r,0,r,0,"VK_DBE_SBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_DBE_DBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_ATTN",r,r],[0,1,0,r,0,r,0,"VK_CRSEL",r,r],[0,1,0,r,0,r,0,"VK_EXSEL",r,r],[0,1,0,r,0,r,0,"VK_EREOF",r,r],[0,1,0,r,0,r,0,"VK_PLAY",r,r],[0,1,0,r,0,r,0,"VK_ZOOM",r,r],[0,1,0,r,0,r,0,"VK_NONAME",r,r],[0,1,0,r,0,r,0,"VK_PA1",r,r],[0,1,0,r,0,r,0,"VK_OEM_CLEAR",r,r]];let t=[],n=[];for(const i of e){const[s,o,a,l,u,d,h,p,v,C]=i;if(n[a]||(n[a]=!0,qve[l]=a,Kve[l.toLowerCase()]=a,o&&(uU[a]=u)),!t[u]){if(t[u]=!0,!d)throw new Error(`String representation missing for key code ${u} around scan code ${l}`);DO.define(u,d),_6.define(u,v||d),v6.define(u,C||v||d)}h&&(Rie[h]=u)}})();var bw;(function(r){function e(a){return DO.keyCodeToStr(a)}r.toString=e;function t(a){return DO.strToKeyCode(a)}r.fromString=t;function n(a){return _6.keyCodeToStr(a)}r.toUserSettingsUS=n;function i(a){return v6.keyCodeToStr(a)}r.toUserSettingsGeneral=i;function s(a){return _6.strToKeyCode(a)||v6.strToKeyCode(a)}r.fromUserSettings=s;function o(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return DO.keyCodeToStr(a)}r.toElectronAccelerator=o})(bw||(bw={}));function po(r,e){const t=(e&65535)<<16>>>0;return(r|t)>>>0}function b6(r,e){if(r===0)return null;const t=(r&65535)>>>0,n=(r&4294901760)>>>16;return n!==0?new kM([B3(t,e),B3(n,e)]):new kM([B3(t,e)])}function B3(r,e){const t=!!(r&2048),n=!!(r&256),i=e===2?n:t,s=!!(r&1024),o=!!(r&512),a=e===2?t:n,l=r&255;return new Qw(i,s,o,a,l)}class Qw{constructor(e,t,n,i,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=s}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new kM([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class kM{constructor(e){if(e.length===0)throw ym("parts");this.parts=e}}class Gve{constructor(e,t,n,i,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=s,this.keyAriaLabel=o}}class Yve{}function Zve(r){if(r.charCode){let t=String.fromCharCode(r.charCode).toUpperCase();return bw.fromString(t)}const e=r.keyCode;if(e===3)return 7;if(Bd){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(zi&&e===224)return 57}else if(dC){if(e===91)return 57;if(zi&&e===93)return 57;if(!zi&&e===92)return 57}return Rie[e]||0}const Xve=zi?256:2048,Qve=512,Jve=1024,e0e=zi?2048:256;class Ts{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=Zve(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Xve),this.altKey&&(t|=Qve),this.shiftKey&&(t|=Jve),this.metaKey&&(t|=e0e),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Qw(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let C6=!1,WL=null;function t0e(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return C6=!0,null}catch{return C6=!0,null}return r.parent}class y6{static getSameOriginWindowChain(){if(!WL){WL=[];let e=window,t;do t=t0e(e),t?WL.push({window:e,iframeElement:e.frameElement||null}):WL.push({window:e,iframeElement:null}),e=t;while(e)}return WL.slice(0)}static hasDifferentOriginAncestor(){return WL||this.getSameOriginWindowChain(),C6}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,s=this.getSameOriginWindowChain();for(const o of s){if(n+=o.window.scrollY,i+=o.window.scrollX,o.window===t||!o.iframeElement)break;let a=o.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}}class yf{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=y6.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class ax{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let i=e,s=e;if(typeof i.wheelDeltaY<"u")this.deltaY=i.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Bd&&!zi?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")qg&&Nl?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Bd&&!zi?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}const Pie=Object.freeze(function(r,e){const t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}});var ki;(function(r){function e(t){return t===r.None||t===r.Cancelled||t instanceof IO?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:yn.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Pie})})(ki||(ki={}));class IO{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Pie:(this._emitter||(this._emitter=new Ae),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let Fu=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new IO),this._token}cancel(){this._token?this._token instanceof IO&&this._token.cancel():this._token=ki.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof IO&&this._token.dispose():this._token=ki.None}};var pf=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},kT=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}};function n0e(r){return!!r&&typeof r.then=="function"}function dl(r){const e=new Fu,t=r(e.token),n=new Promise((i,s)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),s(KS())});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),i(a)},a=>{o.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel()}then(i,s){return n.then(i,s)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function cU(r,e,t){return Promise.race([r,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class i0e{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}}class Pb{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,i)=>{this.doResolve=n,this.doReject=i}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(KS()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class r0e{constructor(e){this.delayer=new Pb(e),this.throttler=new i0e}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function SC(r,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{s.dispose(),t()},r),s=e.onCancellationRequested(()=>{clearTimeout(i),s.dispose(),n(KS())})}):dl(t=>SC(r,t))}function Jw(r,e=0){const t=setTimeout(r,e);return Bi(()=>clearTimeout(t))}function Fie(r,e=n=>!!n,t=null){let n=0;const i=r.length,s=()=>{if(n>=i)return Promise.resolve(t);const o=r[n++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):s())};return s()}class cc{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class d2{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class Qr{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let Tk;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?Tk=r=>{zve(()=>{if(e)return;const t=Date.now()+3;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:Tk=(r,e)=>{const t=requestIdleCallback(r,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class OE{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Tk(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Bie{constructor(){this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}}var w6;(function(r){function e(n){return pf(this,void 0,void 0,function*(){let i;const s=yield Promise.all(n.map(o=>o.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return s})}r.settled=e;function t(n){return new Promise((i,s)=>pf(this,void 0,void 0,function*(){try{yield n(i,s)}catch(o){s(o)}}))}r.withAsyncBody=t})(w6||(w6={}));class Va{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Ae,queueMicrotask(()=>pf(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new Va(t=>{t.emitMany(e)})}static fromPromise(e){return new Va(t=>pf(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Va(t=>pf(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>pf(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Va(t=>pf(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var i,s;return pf(this,void 0,void 0,function*(){var o,a;try{for(i=kT(n);s=yield i.next(),!s.done;){const l=s.value;t.emitOne(l)}}catch(l){o={error:l}}finally{try{s&&!s.done&&(a=i.return)&&(yield a.call(i))}finally{if(o)throw o.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>pf(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield yn.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Va(n=>pf(this,void 0,void 0,function*(){var i,s;try{for(var o=kT(e),a;a=yield o.next(),!a.done;){const l=a.value;n.emitOne(t(l))}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&(yield s.call(o))}finally{if(i)throw i.error}}}))}map(e){return Va.map(this,e)}static filter(e,t){return new Va(n=>pf(this,void 0,void 0,function*(){var i,s;try{for(var o=kT(e),a;a=yield o.next(),!a.done;){const l=a.value;t(l)&&n.emitOne(l)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&(yield s.call(o))}finally{if(i)throw i.error}}}))}filter(e){return Va.filter(this,e)}static coalesce(e){return Va.filter(e,t=>!!t)}coalesce(){return Va.coalesce(this)}static toPromise(e){var t,n,i,s;return pf(this,void 0,void 0,function*(){const o=[];try{for(t=kT(e);n=yield t.next(),!n.done;){const a=n.value;o.push(a)}}catch(a){i={error:a}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}return o})}toPromise(){return Va.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}Va.EMPTY=Va.fromArray([]);class s0e extends Va{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function o0e(r){const e=new Fu,t=r(e.token);return new s0e(e,n=>pf(this,void 0,void 0,function*(){var i,s;const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),n.reject(KS())});try{try{for(var a=kT(t),l;l=yield a.next(),!l.done;){const u=l.value;if(e.token.isCancellationRequested)return;n.emitOne(u)}}catch(u){i={error:u}}finally{try{l&&!l.done&&(s=a.return)&&(yield s.call(a))}finally{if(i)throw i.error}}o.dispose(),e.dispose()}catch(u){o.dispose(),e.dispose(),n.reject(u)}}))}let ME;if(typeof go.vscode<"u"&&typeof go.vscode.process<"u"){const r=go.vscode.process;ME={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"?ME={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:ME={get platform(){return Nl?"win32":zi?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const S6=ME.cwd,a0e=ME.env,GS=ME.platform,l0e=65,u0e=97,c0e=90,d0e=122,hC=46,Tu=47,bh=92,F1=58,h0e=63;class Wie extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${i} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Ha(r,e){if(typeof r!="string")throw new Wie(e,"string",r)}function _r(r){return r===Tu||r===bh}function L6(r){return r===Tu}function B1(r){return r>=l0e&&r<=c0e||r>=u0e&&r<=d0e}function NM(r,e,t,n){let i="",s=0,o=-1,a=0,l=0;for(let u=0;u<=r.length;++u){if(u<r.length)l=r.charCodeAt(u);else{if(n(l))break;l=Tu}if(n(l)){if(!(o===u-1||a===1))if(a===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==hC||i.charCodeAt(i.length-2)!==hC){if(i.length>2){const d=i.lastIndexOf(t);d===-1?(i="",s=0):(i=i.slice(0,d),s=i.length-1-i.lastIndexOf(t)),o=u,a=0;continue}else if(i.length!==0){i="",s=0,o=u,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",s=2)}else i.length>0?i+=`${t}${r.slice(o+1,u)}`:i=r.slice(o+1,u),s=u-o-1;o=u,a=0}else l===hC&&a!==-1?++a:a=-1}return i}function Vie(r,e){if(e===null||typeof e!="object")throw new Wie("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${r}${n}`:n}const Ad={resolve(...r){let e="",t="",n=!1;for(let i=r.length-1;i>=-1;i--){let s;if(i>=0){if(s=r[i],Ha(s,"path"),s.length===0)continue}else e.length===0?s=S6():(s=a0e[`=${e}`]||S6(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===bh)&&(s=`${e}\\`));const o=s.length;let a=0,l="",u=!1;const d=s.charCodeAt(0);if(o===1)_r(d)&&(a=1,u=!0);else if(_r(d))if(u=!0,_r(s.charCodeAt(1))){let h=2,p=h;for(;h<o&&!_r(s.charCodeAt(h));)h++;if(h<o&&h!==p){const v=s.slice(p,h);for(p=h;h<o&&_r(s.charCodeAt(h));)h++;if(h<o&&h!==p){for(p=h;h<o&&!_r(s.charCodeAt(h));)h++;(h===o||h!==p)&&(l=`\\\\${v}\\${s.slice(p,h)}`,a=h)}}}else a=1;else B1(d)&&s.charCodeAt(1)===F1&&(l=s.slice(0,2),a=2,o>2&&_r(s.charCodeAt(2))&&(u=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=u,u&&e.length>0)break}return t=NM(t,!n,"\\",_r),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){Ha(r,"path");const e=r.length;if(e===0)return".";let t=0,n,i=!1;const s=r.charCodeAt(0);if(e===1)return L6(s)?"\\":r;if(_r(s))if(i=!0,_r(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){const u=r.slice(l,a);for(l=a;a<e&&_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_r(r.charCodeAt(a));)a++;if(a===e)return`\\\\${u}\\${r.slice(l)}\\`;a!==l&&(n=`\\\\${u}\\${r.slice(l,a)}`,t=a)}}}else t=1;else B1(s)&&r.charCodeAt(1)===F1&&(n=r.slice(0,2),t=2,e>2&&_r(r.charCodeAt(2))&&(i=!0,t=3));let o=t<e?NM(r.slice(t),!i,"\\",_r):"";return o.length===0&&!i&&(o="."),o.length>0&&_r(r.charCodeAt(e-1))&&(o+="\\"),n===void 0?i?`\\${o}`:o:i?`${n}\\${o}`:`${n}${o}`},isAbsolute(r){Ha(r,"path");const e=r.length;if(e===0)return!1;const t=r.charCodeAt(0);return _r(t)||e>2&&B1(t)&&r.charCodeAt(1)===F1&&_r(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let s=0;s<r.length;++s){const o=r[s];Ha(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&_r(t.charCodeAt(0))){++i;const s=t.length;s>1&&_r(t.charCodeAt(1))&&(++i,s>2&&(_r(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&_r(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Ad.normalize(e)},relative(r,e){if(Ha(r,"from"),Ha(e,"to"),r===e)return"";const t=Ad.resolve(r),n=Ad.resolve(e);if(t===n||(r=t.toLowerCase(),e=n.toLowerCase(),r===e))return"";let i=0;for(;i<r.length&&r.charCodeAt(i)===bh;)i++;let s=r.length;for(;s-1>i&&r.charCodeAt(s-1)===bh;)s--;const o=s-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===bh;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===bh;)l--;const u=l-a,d=o<u?o:u;let h=-1,p=0;for(;p<d;p++){const C=r.charCodeAt(i+p);if(C!==e.charCodeAt(a+p))break;C===bh&&(h=p)}if(p!==d){if(h===-1)return n}else{if(u>d){if(e.charCodeAt(a+p)===bh)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}o>d&&(r.charCodeAt(i+p)===bh?h=p:p===2&&(h=3)),h===-1&&(h=0)}let v="";for(p=i+h+1;p<=s;++p)(p===s||r.charCodeAt(p)===bh)&&(v+=v.length===0?"..":"\\..");return a+=h,v.length>0?`${v}${n.slice(a,l)}`:(n.charCodeAt(a)===bh&&++a,n.slice(a,l))},toNamespacedPath(r){if(typeof r!="string")return r;if(r.length===0)return"";const e=Ad.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===bh){if(e.charCodeAt(1)===bh){const t=e.charCodeAt(2);if(t!==h0e&&t!==hC)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(B1(e.charCodeAt(0))&&e.charCodeAt(1)===F1&&e.charCodeAt(2)===bh)return`\\\\?\\${e}`;return r},dirname(r){Ha(r,"path");const e=r.length;if(e===0)return".";let t=-1,n=0;const i=r.charCodeAt(0);if(e===1)return _r(i)?r:".";if(_r(i)){if(t=n=1,_r(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_r(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=n=a+1)}}}}else B1(i)&&r.charCodeAt(1)===F1&&(t=e>2&&_r(r.charCodeAt(2))?3:2,n=t);let s=-1,o=!0;for(let a=e-1;a>=n;--a)if(_r(r.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return r.slice(0,s)},basename(r,e){e!==void 0&&Ha(e,"ext"),Ha(r,"path");let t=0,n=-1,i=!0,s;if(r.length>=2&&B1(r.charCodeAt(0))&&r.charCodeAt(1)===F1&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=t;--s){const l=r.charCodeAt(s);if(_r(l)){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=t;--s)if(_r(r.charCodeAt(s))){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){Ha(r,"path");let e=0,t=-1,n=0,i=-1,s=!0,o=0;r.length>=2&&r.charCodeAt(1)===F1&&B1(r.charCodeAt(0))&&(e=n=2);for(let a=r.length-1;a>=e;--a){const l=r.charCodeAt(a);if(_r(l)){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===hC?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:Vie.bind(null,"\\"),parse(r){Ha(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.length;let n=0,i=r.charCodeAt(0);if(t===1)return _r(i)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(_r(i)){if(n=1,_r(r.charCodeAt(1))){let h=2,p=h;for(;h<t&&!_r(r.charCodeAt(h));)h++;if(h<t&&h!==p){for(p=h;h<t&&_r(r.charCodeAt(h));)h++;if(h<t&&h!==p){for(p=h;h<t&&!_r(r.charCodeAt(h));)h++;h===t?n=h:h!==p&&(n=h+1)}}}}else if(B1(i)&&r.charCodeAt(1)===F1){if(t<=2)return e.root=e.dir=r,e;if(n=2,_r(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;n=3}}n>0&&(e.root=r.slice(0,n));let s=-1,o=n,a=-1,l=!0,u=r.length-1,d=0;for(;u>=n;--u){if(i=r.charCodeAt(u),_r(i)){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),i===hC?s===-1?s=u:d!==1&&(d=1):s!==-1&&(d=-1)}return a!==-1&&(s===-1||d===0||d===1&&s===a-1&&s===o+1?e.base=e.name=r.slice(o,a):(e.name=r.slice(o,s),e.base=r.slice(o,a),e.ext=r.slice(s,a))),o>0&&o!==n?e.dir=r.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},oa={resolve(...r){let e="",t=!1;for(let n=r.length-1;n>=-1&&!t;n--){const i=n>=0?r[n]:S6();Ha(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===Tu)}return e=NM(e,!t,"/",L6),t?`/${e}`:e.length>0?e:"."},normalize(r){if(Ha(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Tu,t=r.charCodeAt(r.length-1)===Tu;return r=NM(r,!e,"/",L6),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return Ha(r,"path"),r.length>0&&r.charCodeAt(0)===Tu},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];Ha(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":oa.normalize(e)},relative(r,e){if(Ha(r,"from"),Ha(e,"to"),r===e||(r=oa.resolve(r),e=oa.resolve(e),r===e))return"";const t=1,n=r.length,i=n-t,s=1,o=e.length-s,a=i<o?i:o;let l=-1,u=0;for(;u<a;u++){const h=r.charCodeAt(t+u);if(h!==e.charCodeAt(s+u))break;h===Tu&&(l=u)}if(u===a)if(o>a){if(e.charCodeAt(s+u)===Tu)return e.slice(s+u+1);if(u===0)return e.slice(s+u)}else i>a&&(r.charCodeAt(t+u)===Tu?l=u:u===0&&(l=0));let d="";for(u=t+l+1;u<=n;++u)(u===n||r.charCodeAt(u)===Tu)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(s+l)}`},toNamespacedPath(r){return r},dirname(r){if(Ha(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Tu;let t=-1,n=!0;for(let i=r.length-1;i>=1;--i)if(r.charCodeAt(i)===Tu){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&Ha(e,"ext"),Ha(r,"path");let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===Tu){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===Tu){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){Ha(r,"path");let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===Tu){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===hC?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},format:Vie.bind(null,"/"),parse(r){Ha(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.charCodeAt(0)===Tu;let n;t?(e.root="/",n=1):n=0;let i=-1,s=0,o=-1,a=!0,l=r.length-1,u=0;for(;l>=n;--l){const d=r.charCodeAt(l);if(d===Tu){if(!a){s=l+1;break}continue}o===-1&&(a=!1,o=l+1),d===hC?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(o!==-1){const d=s===0&&t?1:s;i===-1||u===0||u===1&&i===o-1&&i===s+1?e.base=e.name=r.slice(d,o):(e.name=r.slice(d,i),e.base=r.slice(d,o),e.ext=r.slice(i,o))}return s>0?e.dir=r.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};oa.win32=Ad.win32=Ad;oa.posix=Ad.posix=oa;const dU=GS==="win32"?Ad.normalize:oa.normalize,f0e=GS==="win32"?Ad.resolve:oa.resolve,g0e=GS==="win32"?Ad.relative:oa.relative,Hie=GS==="win32"?Ad.dirname:oa.dirname,Tw=GS==="win32"?Ad.basename:oa.basename,p0e=GS==="win32"?Ad.extname:oa.extname,kw=GS==="win32"?Ad.sep:oa.sep,m0e=/^\w[\w\d+.-]*$/,_0e=/^\//,v0e=/^\/\//;function fG(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!m0e.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!_0e.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(v0e.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function b0e(r,e){return!r&&!e?"file":r}function C0e(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==lm&&(e=lm+e):e=lm;break}return e}const co="",lm="/",y0e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class $n{constructor(e,t,n,i,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||co,this.authority=e.authority||co,this.path=e.path||co,this.query=e.query||co,this.fragment=e.fragment||co):(this.scheme=b0e(e,o),this.authority=t||co,this.path=C0e(this.scheme,n||co),this.query=i||co,this.fragment=s||co,fG(this,o))}static isUri(e){return e instanceof $n?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return AM(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=co),n===void 0?n=this.authority:n===null&&(n=co),i===void 0?i=this.path:i===null&&(i=co),s===void 0?s=this.query:s===null&&(s=co),o===void 0?o=this.fragment:o===null&&(o=co),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&o===this.fragment?this:new VL(t,n,i,s,o)}static parse(e,t=!1){const n=y0e.exec(e);return n?new VL(n[2]||co,pA(n[4]||co),pA(n[5]||co),pA(n[7]||co),pA(n[9]||co),t):new VL(co,co,co,co,co)}static file(e){let t=co;if(Nl&&(e=e.replace(/\\/g,lm)),e[0]===lm&&e[1]===lm){const n=e.indexOf(lm,2);n===-1?(t=e.substring(2),e=lm):(t=e.substring(2,n),e=e.substring(n)||lm)}return new VL("file",t,e,co,co)}static from(e){const t=new VL(e.scheme,e.authority,e.path,e.query,e.fragment);return fG(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Nl&&e.scheme==="file"?n=$n.file(Ad.join(AM(e,!0),...t)).path:n=oa.join(e.path,...t),e.with({path:n})}toString(e=!1){return E6(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof $n)return e;{const t=new VL(e);return t._formatted=e.external,t._fsPath=e._sep===zie?e.fsPath:null,t}}else return e}}const zie=Nl?1:void 0;let VL=class extends $n{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=AM(this,!1)),this._fsPath}toString(e=!1){return e?E6(this,!0):(this._formatted||(this._formatted=E6(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=zie),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Uie={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function gG(r,e){let t,n=-1;for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47)n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t!==void 0&&(t+=r.charAt(i));else{t===void 0&&(t=r.substr(0,i));const o=Uie[s];o!==void 0?(n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t+=o):n===-1&&(n=i)}}return n!==-1&&(t+=encodeURIComponent(r.substring(n))),t!==void 0?t:r}function w0e(r){let e;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);n===35||n===63?(e===void 0&&(e=r.substr(0,t)),e+=Uie[n]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function AM(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,Nl&&(t=t.replace(/\//g,"\\")),t}function E6(r,e){const t=e?w0e:gG;let n="",{scheme:i,authority:s,path:o,query:a,fragment:l}=r;if(i&&(n+=i,n+=":"),(s||i==="file")&&(n+=lm,n+=lm),s){let u=s.indexOf("@");if(u!==-1){const d=s.substr(0,u);s=s.substr(u+1),u=d.indexOf(":"),u===-1?n+=t(d,!1):(n+=t(d.substr(0,u),!1),n+=":",n+=t(d.substr(u+1),!1)),n+="@"}s=s.toLowerCase(),u=s.indexOf(":"),u===-1?n+=t(s,!1):(n+=t(s.substr(0,u),!1),n+=s.substr(u))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const u=o.charCodeAt(1);u>=65&&u<=90&&(o=`/${String.fromCharCode(u+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const u=o.charCodeAt(0);u>=65&&u<=90&&(o=`${String.fromCharCode(u+32)}:${o.substr(2)}`)}n+=t(o,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:gG(l,!1)),n}function $ie(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+$ie(r.substr(3)):r}}const pG=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function pA(r){return r.match(pG)?r.replace(pG,e=>$ie(e)):r}var wi;(function(r){r.inMemory="inmemory",r.vscode="vscode",r.internal="private",r.walkThrough="walkThrough",r.walkThroughSnippet="walkThroughSnippet",r.http="http",r.https="https",r.file="file",r.mailto="mailto",r.untitled="untitled",r.data="data",r.command="command",r.vscodeRemote="vscode-remote",r.vscodeRemoteResource="vscode-remote-resource",r.userData="vscode-userdata",r.vscodeCustomEditor="vscode-custom-editor",r.vscodeNotebook="vscode-notebook",r.vscodeNotebookCell="vscode-notebook-cell",r.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",r.vscodeNotebookCellOutput="vscode-notebook-cell-output",r.vscodeInteractive="vscode-interactive",r.vscodeInteractiveInput="vscode-interactive-input",r.vscodeSettings="vscode-settings",r.vscodeWorkspaceTrust="vscode-workspace-trust",r.vscodeTerminal="vscode-terminal",r.webviewPanel="webview-panel",r.vscodeWebview="vscode-webview",r.extension="extension",r.vscodeFileResource="vscode-file",r.tmp="tmp",r.vsls="vsls"})(wi||(wi={}));class S0e{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const i=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&tkn=${encodeURIComponent(s)}`),$n.from({scheme:eD?this._preferredWebSchema:wi.vscodeRemoteResource,authority:`${n}:${i}`,path:"/vscode-remote-resource",query:o})}}const jie=new S0e;class kk{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===wi.vscodeRemote?jie.rewrite(n):n.scheme===wi.file&&(wm||typeof go.importScripts=="function"&&go.origin===`${wi.vscodeFileResource}://${kk.FALLBACK_AUTHORITY}`)?n.with({scheme:wi.vscodeFileResource,authority:n.authority||kk.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return $n.isUri(e)?e:$n.parse(t.toUrl(e))}}kk.FALLBACK_AUTHORITY="vscode-app";const qie=new kk;function Ca(r){for(;r.firstChild;)r.firstChild.remove()}function hU(r){var e;return(e=r==null?void 0:r.isConnected)!==null&&e!==void 0?e:!1}class Kie{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function St(r,e,t,n){return new Kie(r,e,t,n)}function Gie(r){return function(e){return r(new yf(e))}}function L0e(r){return function(e){return r(new Ts(e))}}let ja=function(e,t,n,i){let s=n;return t==="click"||t==="mousedown"?s=Gie(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=L0e(n)),St(e,t,s,i)},E0e=function(e,t,n){let i=Gie(t);return fU(e,i,n)};function fU(r,e,t){return St(r,Lv&&UP.pointerEvents?xn.POINTER_DOWN:xn.MOUSE_DOWN,e,t)}function Yie(r,e,t){return St(r,Lv&&UP.pointerEvents?xn.POINTER_UP:xn.MOUSE_UP,e,t)}function gU(r,e){return St(r,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==r;)n=n.parentNode;n!==r&&e(t)})}function x0e(r,e){return St(r,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==r;)n=n.parentNode;n!==r&&e(t)})}function Qp(r,e,t){let n=null;const i=l=>a.fire(l),s=()=>{n||(n=new Kie(r,e,i,t))},o=()=>{n&&(n.dispose(),n=null)},a=new Ae({onFirstListenerAdd:s,onLastListenerRemove:o});return a}let W3=null;function D0e(r){if(!W3){const e=t=>setTimeout(()=>t(new Date().getTime()),0);W3=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return W3.call(self,r)}let Zie,xv;class V3{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Jn(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let r=[],e=null,t=!1,n=!1,i=()=>{for(t=!1,e=r,r=[],n=!0;e.length>0;)e.sort(V3.sort),e.shift().execute();n=!1};xv=(s,o=0)=>{let a=new V3(s,o);return r.push(a),t||(t=!0,D0e(i)),a},Zie=(s,o)=>{if(n){let a=new V3(s,o);return e.push(a),a}else return xv(s,o)}})();const I0e=8,T0e=function(r,e){return e};class k0e extends Je{constructor(e,t,n,i=T0e,s=I0e){super();let o=null,a=0,l=this._register(new cc),u=()=>{a=new Date().getTime(),n(o),o=null};this._register(St(e,t,d=>{o=i(o,d);let h=new Date().getTime()-a;h>=s?(l.cancel(),u()):l.setIfNotSet(u,s-h)}))}}function pU(r,e,t,n,i){return new k0e(r,e,t,n,i)}function mU(r){return document.defaultView.getComputedStyle(r,null)}function $P(r){if(r!==document.body)return new us(r.clientWidth,r.clientHeight);if(Lv&&window.visualViewport)return new us(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new us(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new us(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new us(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class ro{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=mU(e),s="0";return i&&(i.getPropertyValue?s=i.getPropertyValue(t):s=i.getAttribute(n)),ro.convertToPixels(e,s)}static getBorderLeftWidth(e){return ro.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return ro.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return ro.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return ro.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return ro.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return ro.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return ro.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return ro.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return ro.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return ro.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return ro.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return ro.getDimension(e,"margin-bottom","marginBottom")}}class us{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new us(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof us?e:new us(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function Xie(r){let e=r.offsetParent,t=r.offsetTop,n=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==document.body&&r!==document.documentElement;){t-=r.scrollTop;const i=Jie(r)?null:mU(r);i&&(n-=i.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(n+=ro.getBorderLeftWidth(r),t+=ro.getBorderTopWidth(r),t+=r.offsetTop,n+=r.offsetLeft,e=r.offsetParent)}return{left:n,top:t}}function N0e(r,e,t){typeof e=="number"&&(r.style.width=`${e}px`),typeof t=="number"&&(r.style.height=`${t}px`)}function su(r){let e=r.getBoundingClientRect();return{left:e.left+Lb.scrollX,top:e.top+Lb.scrollY,width:e.width,height:e.height}}const Lb=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Mg(r){let e=ro.getMarginLeft(r)+ro.getMarginRight(r);return r.offsetWidth+e}function H3(r){let e=ro.getBorderLeftWidth(r)+ro.getBorderRightWidth(r),t=ro.getPaddingLeft(r)+ro.getPaddingRight(r);return r.offsetWidth-e-t}function A0e(r){let e=ro.getBorderTopWidth(r)+ro.getBorderBottomWidth(r),t=ro.getPaddingTop(r)+ro.getPaddingBottom(r);return r.offsetHeight-e-t}function x6(r){let e=ro.getMarginTop(r)+ro.getMarginBottom(r);return r.offsetHeight+e}function Eb(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function Qie(r,e,t){for(;r&&r.nodeType===r.ELEMENT_NODE;){if(r.classList.contains(e))return r;if(t){if(typeof t=="string"){if(r.classList.contains(t))return null}else if(r===t)return null}r=r.parentNode}return null}function mG(r,e,t){return!!Qie(r,e,t)}function Jie(r){return r&&!!r.host&&!!r.mode}function jP(r){return!!LC(r)}function LC(r){for(;r.parentNode;){if(r===document.body)return null;r=r.parentNode}return Jie(r)?r:null}function RE(){let r=document.activeElement;for(;r!=null&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function kf(r=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",r.appendChild(e),e}let z3=null;function ere(){return z3||(z3=kf()),z3}function O0e(r){var e,t;return!((e=r==null?void 0:r.sheet)===null||e===void 0)&&e.rules?r.sheet.rules:!((t=r==null?void 0:r.sheet)===null||t===void 0)&&t.cssRules?r.sheet.cssRules:[]}function D6(r,e,t=ere()){!t||!e||t.sheet.insertRule(r+"{"+e+"}",0)}function _G(r,e=ere()){if(!e)return;let t=O0e(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(r)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}function tre(r){return typeof HTMLElement=="object"?r instanceof HTMLElement:r&&typeof r=="object"&&r.nodeType===1&&typeof r.nodeName=="string"}const xn={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:dC?"webkitAnimationStart":"animationstart",ANIMATION_END:dC?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:dC?"webkitAnimationIteration":"animationiteration"},Ir={stop:function(r,e){r.preventDefault?r.preventDefault():r.returnValue=!1,e&&(r.stopPropagation?r.stopPropagation():r.cancelBubble=!0)}};function M0e(r){let e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function R0e(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}class OM extends Je{constructor(e){super(),this._onDidFocus=this._register(new Ae),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Ae),this.onDidBlur=this._onDidBlur.event;let t=OM.hasFocusWithin(e),n=!1;const i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{OM.hasFocusWithin(e)!==t&&(t?s():i())},this._register(St(e,xn.FOCUS,i,!0)),this._register(St(e,xn.BLUR,s,!0)),this._register(St(e,xn.FOCUS_IN,()=>this._refreshStateHandler())),this._register(St(e,xn.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=LC(e),n=t?t.activeElement:document.activeElement;return Eb(n,e)}}function lx(r){return new OM(r)}function st(r,...e){if(r.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function P0e(r,e){return r.insertBefore(e,r.firstChild),e}function EC(r,...e){r.innerText="",st(r,...e)}const F0e=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Nk;(function(r){r.HTML="http://www.w3.org/1999/xhtml",r.SVG="http://www.w3.org/2000/svg"})(Nk||(Nk={}));function nre(r,e,t,...n){let i=F0e.exec(e);if(!i)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let s=i[1]||"div",o;return r!==Nk.HTML?o=document.createElementNS(r,s):o=document.createElement(s),i[3]&&(o.id=i[3]),i[4]&&(o.className=i[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function Ct(r,e,...t){return nre(Nk.HTML,r,e,...t)}Ct.SVG=function(r,e,...t){return nre(Nk.SVG,r,e,...t)};function yh(...r){for(let e of r)e.style.display="",e.removeAttribute("aria-hidden")}function Rc(...r){for(let e of r)e.style.display="none",e.setAttribute("aria-hidden","true")}function B0e(r){return Array.prototype.slice.call(document.getElementsByTagName(r),0)}function vG(r){const e=window.devicePixelRatio*r;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function ire(r){window.open(r,"_blank","noopener")}function W0e(r){const e=()=>{r(),t=xv(e)};let t=xv(e);return Bi(()=>t.dispose())}jie.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function eS(r){return r?`url('${qie.asBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function bG(r){return`'${r.replace(/'/g,"%27")}'`}class Cw extends Ae{constructor(){super(),this._subscriptions=new Et,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(St(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Ts(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(St(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(St(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(St(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(St(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(St(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Cw.instance||(Cw.instance=new Cw),Cw.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function V0e(r,e){const t=window.matchMedia(r);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}const CG=2e4;let sw,TO,I6,kO,T6;function H0e(r){sw=document.createElement("div"),sw.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),sw.appendChild(n),n};TO=e(),I6=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),sw.appendChild(n),n};kO=t(),T6=t(),r.appendChild(sw)}function Il(r){sw&&(TO.textContent!==r?(Ca(I6),RM(TO,r)):(Ca(TO),RM(I6,r)))}function MM(r){sw&&(zi?Il(r):kO.textContent!==r?(Ca(T6),RM(kO,r)):(Ca(kO),RM(T6,r)))}function RM(r,e){Ca(r),e.length>CG&&(e=e.substr(0,CG)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}var fm;(function(r){r.serviceIds=new Map,r.DI_TARGET="$di$target",r.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[r.DI_DEPENDENCIES]||[]}r.getServiceDependencies=e})(fm||(fm={}));const Li=lr("instantiationService");function z0e(r,e,t,n){e[fm.DI_TARGET]===e?e[fm.DI_DEPENDENCIES].push({id:r,index:t,optional:n}):(e[fm.DI_DEPENDENCIES]=[{id:r,index:t,optional:n}],e[fm.DI_TARGET]=e)}function lr(r){if(fm.serviceIds.has(r))return fm.serviceIds.get(r);const e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");z0e(e,t,i,!1)};return e.toString=()=>r,fm.serviceIds.set(r,e),e}const vr=lr("codeEditorService"),_U=lr("markerDecorationsService");function U0e(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,function(n,i){const s=i[0];return typeof e[s]<"u"?e[s]:n}),t}function L(r,e,...t){return U0e(e,t)}let ze=class ew{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new ew(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return ew.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return ew.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return ew.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){let s=e.column|0,o=t.column|0;return s-o}return n-i}clone(){return new ew(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new ew(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}};const aa=lr("modelService");function $0e(r){return!r.isTooLargeForSyncing()&&!r.isForSimpleWidget}const zc=lr("textModelService");var PM=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Ef extends Je{constructor(e,t="",n="",i=!0,s){super(),this._onDidChange=this._register(new Ae),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return PM(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class ux extends Je{constructor(){super(...arguments),this._onBeforeRun=this._register(new Ae),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new Ae),this.onDidRun=this._onDidRun.event}run(e,t){return PM(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return PM(this,void 0,void 0,function*(){yield e.run(t)})}}class Yg extends Ef{constructor(e){super(Yg.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Yg.ID="vs.actions.separator";class qP{constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}get actions(){return this._actions}dispose(){}run(){return PM(this,void 0,void 0,function*(){})}}class KP extends Ef{constructor(){super(KP.ID,L("submenu.empty","(empty)"),void 0,!1)}}KP.ID="vs.actions.empty";let j0e=class{constructor(){this._icons=new Map,this._onDidRegister=new Ae}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const rre=new j0e,FM=rre;function q0e(r){return r?r.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class Ie{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,rre.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}Ie.add=new Ie("add",{fontCharacter:"\\ea60"});Ie.lightBulb=new Ie("light-bulb",{fontCharacter:"\\ea61"});Ie.warning=new Ie("warning",{fontCharacter:"\\ea6c"});Ie.info=new Ie("info",{fontCharacter:"\\ea74"});Ie.close=new Ie("close",{fontCharacter:"\\ea76"});Ie.symbolFolder=new Ie("symbol-folder",{fontCharacter:"\\ea83"});Ie.symbolEvent=new Ie("symbol-event",{fontCharacter:"\\ea86"});Ie.error=new Ie("error",{fontCharacter:"\\ea87"});Ie.symbolVariable=new Ie("symbol-variable",{fontCharacter:"\\ea88"});Ie.symbolArray=new Ie("symbol-array",{fontCharacter:"\\ea8a"});Ie.symbolModule=new Ie("symbol-module",{fontCharacter:"\\ea8b"});Ie.symbolPackage=new Ie("symbol-package",{fontCharacter:"\\ea8b"});Ie.symbolNamespace=new Ie("symbol-namespace",{fontCharacter:"\\ea8b"});Ie.symbolObject=new Ie("symbol-object",{fontCharacter:"\\ea8b"});Ie.symbolMethod=new Ie("symbol-method",{fontCharacter:"\\ea8c"});Ie.symbolFunction=new Ie("symbol-function",{fontCharacter:"\\ea8c"});Ie.symbolConstructor=new Ie("symbol-constructor",{fontCharacter:"\\ea8c"});Ie.symbolBoolean=new Ie("symbol-boolean",{fontCharacter:"\\ea8f"});Ie.symbolNull=new Ie("symbol-null",{fontCharacter:"\\ea8f"});Ie.symbolNumber=new Ie("symbol-number",{fontCharacter:"\\ea90"});Ie.symbolStruct=new Ie("symbol-struct",{fontCharacter:"\\ea91"});Ie.symbolTypeParameter=new Ie("symbol-type-parameter",{fontCharacter:"\\ea92"});Ie.symbolKey=new Ie("symbol-key",{fontCharacter:"\\ea93"});Ie.symbolText=new Ie("symbol-text",{fontCharacter:"\\ea93"});Ie.symbolReference=new Ie("symbol-reference",{fontCharacter:"\\ea94"});Ie.symbolEnum=new Ie("symbol-enum",{fontCharacter:"\\ea95"});Ie.symbolValue=new Ie("symbol-value",{fontCharacter:"\\ea95"});Ie.symbolUnit=new Ie("symbol-unit",{fontCharacter:"\\ea96"});Ie.arrowDown=new Ie("arrow-down",{fontCharacter:"\\ea9a"});Ie.arrowLeft=new Ie("arrow-left",{fontCharacter:"\\ea9b"});Ie.arrowUp=new Ie("arrow-up",{fontCharacter:"\\eaa1"});Ie.caseSensitive=new Ie("case-sensitive",{fontCharacter:"\\eab1"});Ie.check=new Ie("check",{fontCharacter:"\\eab2"});Ie.chevronDown=new Ie("chevron-down",{fontCharacter:"\\eab4"});Ie.chevronRight=new Ie("chevron-right",{fontCharacter:"\\eab6"});Ie.chevronUp=new Ie("chevron-up",{fontCharacter:"\\eab7"});Ie.lightbulbAutofix=new Ie("lightbulb-autofix",{fontCharacter:"\\eb13"});Ie.loading=new Ie("loading",{fontCharacter:"\\eb19"});Ie.preserveCase=new Ie("preserve-case",{fontCharacter:"\\eb2e"});Ie.regex=new Ie("regex",{fontCharacter:"\\eb38"});Ie.remove=new Ie("remove",{fontCharacter:"\\eb3b"});Ie.replaceAll=new Ie("replace-all",{fontCharacter:"\\eb3c"});Ie.replace=new Ie("replace",{fontCharacter:"\\eb3d"});Ie.splitHorizontal=new Ie("split-horizontal",{fontCharacter:"\\eb56"});Ie.splitVertical=new Ie("split-vertical",{fontCharacter:"\\eb57"});Ie.symbolClass=new Ie("symbol-class",{fontCharacter:"\\eb5b"});Ie.symbolColor=new Ie("symbol-color",{fontCharacter:"\\eb5c"});Ie.symbolConstant=new Ie("symbol-constant",{fontCharacter:"\\eb5d"});Ie.symbolEnumMember=new Ie("symbol-enum-member",{fontCharacter:"\\eb5e"});Ie.symbolField=new Ie("symbol-field",{fontCharacter:"\\eb5f"});Ie.symbolFile=new Ie("symbol-file",{fontCharacter:"\\eb60"});Ie.symbolInterface=new Ie("symbol-interface",{fontCharacter:"\\eb61"});Ie.symbolKeyword=new Ie("symbol-keyword",{fontCharacter:"\\eb62"});Ie.symbolOperator=new Ie("symbol-operator",{fontCharacter:"\\eb64"});Ie.symbolProperty=new Ie("symbol-property",{fontCharacter:"\\eb65"});Ie.symbolSnippet=new Ie("symbol-snippet",{fontCharacter:"\\eb66"});Ie.triangleDown=new Ie("triangle-down",{fontCharacter:"\\eb6e"});Ie.triangleLeft=new Ie("triangle-left",{fontCharacter:"\\eb6f"});Ie.triangleRight=new Ie("triangle-right",{fontCharacter:"\\eb70"});Ie.triangleUp=new Ie("triangle-up",{fontCharacter:"\\eb71"});Ie.wholeWord=new Ie("whole-word",{fontCharacter:"\\eb7e"});Ie.listFilter=new Ie("list-filter",{fontCharacter:"\\eb83"});Ie.listSelection=new Ie("list-selection",{fontCharacter:"\\eb85"});Ie.selection=new Ie("selection",{fontCharacter:"\\eb85"});Ie.symbolString=new Ie("symbol-string",{fontCharacter:"\\eb8d"});Ie.treeItemExpanded=new Ie("tree-item-expanded",Ie.chevronDown.definition);Ie.treeFilterOnTypeOn=new Ie("tree-filter-on-type-on",Ie.listFilter.definition);Ie.treeFilterOnTypeOff=new Ie("tree-filter-on-type-off",Ie.listSelection.definition);Ie.treeFilterClear=new Ie("tree-filter-clear",Ie.close.definition);Ie.treeItemLoading=new Ie("tree-item-loading",Ie.loading.definition);Ie.menuSelection=new Ie("menu-selection",Ie.check.definition);Ie.menuSubmenu=new Ie("menu-submenu",Ie.chevronRight.definition);Ie.scrollbarButtonLeft=new Ie("scrollbar-button-left",Ie.triangleLeft.definition);Ie.scrollbarButtonRight=new Ie("scrollbar-button-right",Ie.triangleRight.definition);Ie.scrollbarButtonUp=new Ie("scrollbar-button-up",Ie.triangleUp.definition);Ie.scrollbarButtonDown=new Ie("scrollbar-button-down",Ie.triangleDown.definition);Ie.quickInputBack=new Ie("quick-input-back",Ie.arrowLeft.definition);var Fc;(function(r){r.iconNameSegment="[A-Za-z0-9]+",r.iconNameExpression="[A-Za-z0-9-]+",r.iconModifierExpression="~[A-Za-z]+",r.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${r.iconNameExpression})(${r.iconModifierExpression})?$`);function t(s){if(s instanceof Ie)return["codicon","codicon-"+s.id];const o=e.exec(s.id);if(!o)return t(Ie.error);let[,a,l]=o;const u=["codicon","codicon-"+a];return l&&u.push("codicon-modifier-"+l.substr(1)),u}r.asClassNameArray=t;function n(s){return t(s).join(" ")}r.asClassName=n;function i(s){return"."+t(s).join(".")}r.asCSSSelector=i})(Fc||(Fc={}));function sre(r){return Array.isArray(r)}function Nf(r){return typeof r=="string"}function Wc(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function tS(r){return typeof r=="number"&&!isNaN(r)}function ore(r){return r===!0||r===!1}function Od(r){return typeof r>"u"}function K0e(r){return!wh(r)}function wh(r){return Od(r)||r===null}function $r(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function mA(r){if(wh(r))throw new Error("Assertion Failed: argument is undefined or null");return r}function BM(r){return typeof r=="function"}function G0e(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)Y0e(r[n],e[n])}function Y0e(r,e){if(Nf(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(BM(e)){try{if(r instanceof e)return}catch{}if(!wh(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Z0e(r){let e=[],t=Object.getPrototypeOf(r);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function vU(r){const e=[];for(const t of Z0e(r))typeof r[t]=="function"&&e.push(t);return e}function X0e(r,e){const t=i=>function(){const s=Array.prototype.slice.call(arguments,0);return e(i,s)};let n={};for(const i of r)n[i]=t(i);return n}function Md(r){return r===null?void 0:r}function are(r,e="Unreachable"){throw new Error(e)}const js=lr("commandService"),Ki=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Ae,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.description){const o=[];for(let l of r.description.args)o.push(l.constraint);const a=r.handler;r.handler=function(l,...u){return G0e(u,o),a(l,...u)}}const{id:t}=r;let n=this._commands.get(t);n||(n=new Eh,this._commands.set(t,n));let i=n.unshift(r),s=Bi(()=>{i();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(r,e){return Ki.registerCommand(r,(t,...n)=>t.get(js).executeCommand(e,...n))}getCommand(r){const e=this._commands.get(r);if(!(!e||e.isEmpty()))return Xi.first(e)}getCommands(){const r=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&r.set(e,t)}return r}};Ki.registerCommand("noop",()=>{});function lre(r){return!r||typeof r!="string"?!0:r.trim().length===0}const Q0e=/{(\d+)}/g;function wf(r,...e){return e.length===0?r:r.replace(Q0e,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function bU(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Af(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function J0e(r,e=" "){const t=CU(r,e);return ure(t,e)}function CU(r,e){if(!r||!e)return r;const t=e.length;if(t===0||r.length===0)return r;let n=0;for(;r.indexOf(e,n)===n;)n=n+t;return r.substring(n)}function ure(r,e){if(!r||!e)return r;const t=e.length,n=r.length;if(t===0||n===0)return r;let i=n,s=-1;for(;s=r.lastIndexOf(e,i-1),!(s===-1||s+t!==i);){if(s===0)return"";i=s}return r.substring(0,i)}function ebe(r){return r.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function tbe(r){return r.replace(/\*/g,"")}function cre(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=Af(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(r,n)}function nbe(r){return r.source==="^"||r.source==="^$"||r.source==="$"||r.source==="^\\s*$"?!1:!!(r.exec("")&&r.lastIndex===0)}function U3(r){return(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")}function Dv(r){return r.split(/\r\n|\r|\n/)}function oc(r){for(let e=0,t=r.length;e<t;e++){const n=r.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Vr(r,e=0,t=r.length){for(let n=e;n<t;n++){const i=r.charCodeAt(n);if(i!==32&&i!==9)return r.substring(e,n)}return r.substring(e,t)}function Cv(r,e=r.length-1){for(let t=e;t>=0;t--){const n=r.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Ak(r,e){return r<e?-1:r>e?1:0}function yU(r,e,t=0,n=r.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=r.charCodeAt(t),u=e.charCodeAt(i);if(l<u)return-1;if(l>u)return 1}const o=n-t,a=s-i;return o<a?-1:o>a?1:0}function k6(r,e){return h2(r,e,0,r.length,0,e.length)}function h2(r,e,t=0,n=r.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=r.charCodeAt(t),u=e.charCodeAt(i);if(l===u)continue;if(l>=128||u>=128)return yU(r.toLowerCase(),e.toLowerCase(),t,n,i,s);nC(l)&&(l-=32),nC(u)&&(u-=32);const d=l-u;if(d!==0)return d}const o=n-t,a=s-i;return o<a?-1:o>a?1:0}function nC(r){return r>=97&&r<=122}function J_(r){return r>=65&&r<=90}function NT(r,e){return r.length===e.length&&h2(r,e)===0}function wU(r,e){const t=e.length;return e.length>r.length?!1:h2(r,e,0,t)===0}function cx(r,e){let t,n=Math.min(r.length,e.length);for(t=0;t<n;t++)if(r.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function WM(r,e){let t,n=Math.min(r.length,e.length);const i=r.length-1,s=e.length-1;for(t=0;t<n;t++)if(r.charCodeAt(i-t)!==e.charCodeAt(s-t))return t;return n}function ba(r){return 55296<=r&&r<=56319}function dx(r){return 56320<=r&&r<=57343}function SU(r,e){return(r-55296<<10)+(e-56320)+65536}function yw(r,e,t){const n=r.charCodeAt(t);if(ba(n)&&t+1<e){const i=r.charCodeAt(t+1);if(dx(i))return SU(n,i)}return n}function PE(r,e){const t=r.charCodeAt(e-1);if(dx(t)&&e>1){const n=r.charCodeAt(e-2);if(ba(n))return SU(n,t)}return t}function VM(r,e){const t=bb.getInstance(),n=e,i=r.length,s=yw(r,i,e);e+=s>=65536?2:1;let o=t.getGraphemeBreakType(s);for(;e<i;){const a=yw(r,i,e),l=t.getGraphemeBreakType(a);if(zM(o,l))break;e+=a>=65536?2:1,o=l}return e-n}function ibe(r,e){const t=bb.getInstance(),n=e,i=PE(r,e);e-=i>=65536?2:1;let s=t.getGraphemeBreakType(i);for(;e>0;){const o=PE(r,e),a=t.getGraphemeBreakType(o);if(zM(a,s))break;e-=o>=65536?2:1,s=a}return n-e}const rbe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function GP(r){return rbe.test(r)}const sbe=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFF0]|\uD83E[\uDD00-\uDDFF\uDE70-\uDEF6])/;function obe(r){return sbe.test(r)}const abe=/^[\t\n\r\x20-\x7E]*$/;function LU(r){return abe.test(r)}const dre=/[\u2028\u2029]/;function hre(r){return dre.test(r)}function lbe(r){for(let e=0,t=r.length;e<t;e++)if(Iv(r.charCodeAt(e)))return!0;return!1}function Iv(r){return r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function HM(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129008||r>=129280&&r<=129535||r>=129648&&r<=129782}const ube=String.fromCharCode(65279);function EU(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function cbe(r,e=!1){return r?(e&&(r=r.replace(/\\./g,"")),r.toLowerCase()!==r):!1}function fre(r){return r=r%(2*26),r<26?String.fromCharCode(97+r):String.fromCharCode(65+r-26)}function _A(r){return bb.getInstance().getGraphemeBreakType(r)}function zM(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}class bb{constructor(){this._data=dbe()}static getInstance(){return bb._INSTANCE||(bb._INSTANCE=new bb),bb._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}}bb._INSTANCE=null;function dbe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function hbe(r,e){if(r===0)return 0;const t=fbe(r,e);if(t!==void 0)return t;const n=PE(e,r);return r-=NO(n),r}function fbe(r,e){let t=PE(e,r);for(r-=NO(t);gbe(t)||t===65039||t===8419;){if(r===0)return;t=PE(e,r),r-=NO(t)}if(HM(t)){if(r>=0){const n=PE(e,r);n===8205&&(r-=NO(n))}return r}}function NO(r){return r>=65536?2:1}function gbe(r){return 127995<=r&&r<=127999}const pbe="";class rm{static getData(){return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,40,10088,40,10098,40,12308,40,64830,40,65341,41,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,124,8739,124,9213,124,65512,124,1633,124,1777,124,66336,124,125127,124,120783,124,120793,124,120803,124,120813,124,120823,124,130033,124,65321,124,8544,124,8464,124,8465,124,119816,124,119868,124,119920,124,120024,124,120128,124,120180,124,120232,124,120284,124,120336,124,120388,124,120440,124,406,124,65356,124,8572,124,8467,124,119845,124,119897,124,119949,124,120001,124,120053,124,120105,124,120157,124,120209,124,120261,124,120313,124,120365,124,120417,124,120469,124,448,124,120496,124,120554,124,120612,124,120670,124,120728,124,11410,124,1030,124,1216,124,1493,124,1503,124,1575,124,126464,124,126592,124,65166,124,65165,124,1994,124,11599,124,5825,124,42226,124,93992,124,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90],"_default":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"cs":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"de":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"es":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"fr":[65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"it":[160,32,8211,45,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ko":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pl":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pt-BR":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"qps-ploc":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ru":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,124,1009,112,215,120],"tr":[160,32,8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hans":[65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hant":[8211,45,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}')}static getConfusablesForCurrentLocale(){if(!rm.map){let n=function(o){const a=new Map;for(let l=0;l<o.length;l+=2)a.set(o[l],o[l+1]);return a};const e=rm.getData();let t=Hve;(!t||!(t in e))&&(t=Vve),(!t||!(t in e))&&(t="_default");const i=n(e._common),s=n(e[t]);for(const[o,a]of s)i.set(o,a);rm.map=i}return rm.map}static isAmbiguous(e){return rm.getConfusablesForCurrentLocale().has(e)}static getPrimaryConfusable(e){return rm.getConfusablesForCurrentLocale().get(e)}static getPrimaryConfusableCodePoints(){return new Set(rm.getConfusablesForCurrentLocale().keys())}}class xb{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(xb.getRawData())),this._data}static isInvisibleCharacter(e){return xb.getData().has(e)}static get codePoints(){return xb.getData()}}xb._data=void 0;let YP=Wve||"";const lu=new Map;lu.set("false",!1);lu.set("true",!0);lu.set("isMac",zi);lu.set("isLinux",Hc);lu.set("isWindows",Nl);lu.set("isWeb",eD);lu.set("isMacNative",zi&&!eD);lu.set("isEdge",YP.indexOf("Edg/")>=0);lu.set("isFirefox",YP.indexOf("Firefox")>=0);lu.set("isChrome",YP.indexOf("Chrome")>=0);lu.set("isSafari",YP.indexOf("Safari")>=0);const mbe=Object.prototype.hasOwnProperty;class qt{static has(e){return xC.create(e)}static equals(e,t){return hx.create(e,t)}static regex(e,t){return UM.create(e,t)}static not(e){return nS.create(e)}static and(...e){return iC.create(e,null)}static or(...e){return Cb.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return Cb.create(n.map(i=>this._deserializeAndExpression(i,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return iC.create(n.map(i=>this._deserializeOne(i,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return ZP.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return hx.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return UM.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return xU.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return JP.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return QP.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return t4.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return e4.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?nS.create(e.substr(1).trim()):xC.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(lre(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),i=e.lastIndexOf("/");if(n===i||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let s=e.slice(n+1,i),o=e[i+1]==="i"?"i":"";try{return new RegExp(s,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function _be(r,e){const t=r?r.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function FE(r,e){return r.cmp(e)}class Ih{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Of.INSTANCE}}Ih.INSTANCE=new Ih;class Of{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Ih.INSTANCE}}Of.INSTANCE=new Of;class xC{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=lu.get(e);return typeof n=="boolean"?n?Of.INSTANCE:Ih.INSTANCE:new xC(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:pre(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=lu.get(this.key);return typeof e=="boolean"?e?Of.INSTANCE:Ih.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=nS.create(this.key,this)),this.negated}}class hx{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?xC.create(e,n):nS.create(e,n);const i=lu.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Of.INSTANCE:Ih.INSTANCE:new hx(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:YS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=lu.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Of.INSTANCE:Ih.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ZP.create(this.key,this.value,this)),this.negated}}class xU{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new xU(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:YS(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?mbe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=DU.create(this)),this.negated}}class DU{constructor(e){this._actual=e,this.type=11}static create(e){return new DU(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class ZP{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?nS.create(e,n):xC.create(e,n);const i=lu.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Ih.INSTANCE:Of.INSTANCE:new ZP(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:YS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=lu.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ih.INSTANCE:Of.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=hx.create(this.key,this.value,this)),this.negated}}class nS{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=lu.get(e);return typeof n=="boolean"?n?Ih.INSTANCE:Of.INSTANCE:new nS(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:pre(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=lu.get(this.key);return typeof e=="boolean"?e?Ih.INSTANCE:Of.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=xC.create(this.key,this)),this.negated}}function XP(r,e){if(typeof r=="string"){const t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):Ih.INSTANCE}class QP{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return XP(t,i=>new QP(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:YS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=t4.create(this.key,this.value,this)),this.negated}}class JP{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return XP(t,i=>new JP(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:YS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=e4.create(this.key,this.value,this)),this.negated}}class e4{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return XP(t,i=>new e4(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:YS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=JP.create(this.key,this.value,this)),this.negated}}class t4{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return XP(t,i=>new t4(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:YS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=QP.create(this.key,this.value,this)),this.negated}}class UM{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new UM(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=IU.create(this)),this.negated}}class IU{constructor(e){this._actual=e,this.type=8}static create(e){return new IU(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function gre(r){let e=null;for(let t=0,n=r.length;t<n;t++){const i=r[t].substituteConstants();if(r[t]!==i&&e===null){e=[];for(let s=0;s<t;s++)e[s]=r[s]}e!==null&&(e[t]=i)}return e===null?r:e}class iC{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return iC._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=FE(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=gre(this.expr);return e===this.expr?this:iC.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let i=!1;for(const s of e)if(s){if(s.type===1){i=!0;continue}if(s.type===0)return Ih.INSTANCE;if(s.type===6){n.push(...s.expr);continue}n.push(s)}if(n.length===0&&i)return Of.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(FE);for(let s=1;s<n.length;s++)n[s-1].equals(n[s])&&(n.splice(s,1),s--);if(n.length===1)return n[0];for(;n.length>1;){const s=n[n.length-1];if(s.type!==9)break;n.pop();const o=n.pop(),a=n.length===0,l=Cb.create(s.expr.map(u=>iC.create([u,o],null)),null,a);l&&(n.push(l),n.sort(FE))}return n.length===1?n[0]:new iC(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=Cb.create(e,this,!0)}return this.negated}}class Cb{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return Cb._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=FE(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=gre(this.expr);return e===this.expr?this:Cb.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],s=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return Of.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&s)return Ih.INSTANCE;i.sort(FE)}if(i.length!==0){if(i.length===1)return i[0];for(let o=1;o<i.length;o++)i[o-1].equals(i[o])&&(i.splice(o,1),o--);if(i.length===1)return i[0];if(n){for(let o=0;o<i.length;o++)for(let a=o+1;a<i.length;a++)mre(i[o],i[a])&&(i.splice(a,1),a--);if(i.length===1)return i[0]}return new Cb(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const o of $M(t))for(const a of $M(n))i.push(iC.create([o,a],null));const s=e.length===0;e.unshift(Cb.create(i,null,s))}this.negated=e[0]}return this.negated}}class gn extends xC{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?gn._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&gn._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return gn._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return hx.create(this.key,e)}}gn._info=[];const Xn=lr("contextKeyService"),vbe="setContext";function pre(r,e){return r<e?-1:r>e?1:0}function YS(r,e,t,n){return r<t?-1:r>t?1:e<n?-1:e>n?1:0}function mre(r,e){if(e.type===6&&r.type!==9&&r.type!==6){for(const i of e.expr)if(r.equals(i))return!0}const t=r.negate(),n=$M(t).concat($M(e));n.sort(FE);for(let i=0;i<n.length;i++){const o=n[i].negate();for(let a=i+1;a<n.length;a++){const l=n[a];if(o.equals(l))return!0}}return!1}function $M(r){return r.type===9?r.expr:[r]}function AO(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}class bbe{constructor(){this.data=new Map}add(e,t){AO(Nf(e)),AO(Wc(t)),AO(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const mo=new bbe;var Zg;(function(r){r.DARK="dark",r.LIGHT="light",r.HIGH_CONTRAST="hc"})(Zg||(Zg={}));const Fs=lr("themeService");var N6;(function(r){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}r.isThemeColor=e})(N6||(N6={}));function Ps(r){return{id:r}}var vs;(function(r){function e(l){return l&&typeof l=="object"&&typeof l.id=="string"&&(typeof l.color>"u"||N6.isThemeColor(l.color))}r.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Fc.iconNameExpression}(?:${Fc.iconModifierExpression})?)\\)$`);function n(l){const u=t.exec(l);if(!u)return;let[,d]=u;return{id:d}}r.fromString=n;function i(l,u){let d=l.id;const h=d.lastIndexOf("~");return h!==-1&&(d=d.substring(0,h)),u&&(d=`${d}~${u}`),{id:d}}r.modify=i;function s(l){const u=l.id.lastIndexOf("~");if(u!==-1)return l.id.substring(u+1)}r.getModifier=s;function o(l,u){var d,h;return l.id===u.id&&((d=l.color)===null||d===void 0?void 0:d.id)===((h=u.color)===null||h===void 0?void 0:h.id)}r.isEqual=o;function a(l,u){return{id:l.id,color:u?Ps(u):void 0}}r.asThemeIcon=a,r.asClassNameArray=Fc.asClassNameArray,r.asClassName=Fc.asClassName,r.asCSSSelector=Fc.asCSSSelector})(vs||(vs={}));function jM(r){switch(r){case Zg.DARK:return"vs-dark";case Zg.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const _re={ThemingContribution:"base.contributions.theming"};class Cbe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Ae}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Bi(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let vre=new Cbe;mo.add(_re.ThemingContribution,vre);function ds(r){return vre.onColorThemeChange(r)}class ybe extends Je{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var wbe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yG=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function AT(r){return r.command!==void 0}class vn{constructor(e){this.id=vn._idPool++,this._debugName=e}}vn._idPool=0;vn.CommandPalette=new vn("CommandPalette");vn.EditorContext=new vn("EditorContext");vn.SimpleEditorContext=new vn("SimpleEditorContext");vn.EditorContextCopy=new vn("EditorContextCopy");vn.EditorContextPeek=new vn("EditorContextPeek");vn.MenubarEditMenu=new vn("MenubarEditMenu");vn.MenubarCopy=new vn("MenubarCopy");vn.MenubarGoMenu=new vn("MenubarGoMenu");vn.MenubarSelectionMenu=new vn("MenubarSelectionMenu");vn.InlineCompletionsActions=new vn("InlineCompletionsActions");const ZS=lr("menuService"),Pu=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Ae,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:r=>r===vn.CommandPalette}}addCommand(r){return this.addCommands(Xi.single(r))}addCommands(r){for(const e of r)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Bi(()=>{let e=!1;for(const t of r)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(r){return this._commands.get(r)}getCommands(){const r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){return this.appendMenuItems(Xi.single({id:r,item:e}))}appendMenuItems(r){const e=new Set,t=new Eh;for(const{id:n,item:i}of r){let s=this._menuItems.get(n);s||(s=new Eh,this._menuItems.set(n,s)),t.push(s.push(i)),e.add(n)}return this._onDidChangeMenu.fire(e),Bi(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===vn.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){const e=new Set;for(const t of r)AT(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||r.push({command:t})})}};class TU extends qP{constructor(e,t,n,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=i}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,i]of n)i.length>0&&(e.push(...i),e.push(new Yg));return e.length&&e.pop(),e}}let DC=class bre{constructor(e,t,n,i,s){var o,a;if(this._commandService=s,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(o=e.tooltip)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||i.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=i.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new bre(t,void 0,n,i,s):void 0,this._options=n,vs.isThemeIcon(e.icon)&&(this.class=Fc.asClassName(e.icon))}dispose(){}run(...e){var t,n;let i=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(i=[...i,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}};DC=wbe([yG(3,Xn),yG(4,js)],DC);class qM{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(_f===1){if(e&&e.win)return e.win}else if(_f===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=qM.bindToCurrentPlatform(e);if(t&&t.primary){const n=b6(t.primary,_f);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const s=t.secondary[n],o=b6(s,_f);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Ki.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&qM._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,s,o){_f===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:o,weight1:i,weight2:s,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(Lbe)),this._cachedMergedKeybindings.slice(0)}}const Al=new qM,Sbe={EditorModes:"platform.keybindingsRegistry"};mo.add(Sbe.EditorModes,Al);function Lbe(r,e){return r.weight1!==e.weight1?r.weight1-e.weight1:r.command<e.command?-1:r.command>e.command?1:r.weight2-e.weight2}const Uv=lr("telemetryService"),$v=lr("logService");var gm;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.Off=6]="Off"})(gm||(gm={}));const Cre=gm.Info;class Ebe extends Je{constructor(){super(...arguments),this.level=Cre,this._onDidChangeLogLevel=this._register(new Ae)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class xbe extends Ebe{constructor(e=Cre){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=gm.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=gm.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=gm.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=gm.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class Dbe extends Je{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}class n4{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=qt.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Al.registerKeybindingRule(i)}}Ki.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Pu.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class tD extends n4{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((i,s)=>s.priority-i.priority),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i].implementation===n){this._implementations.splice(i,1);return}}}}runCommand(e,t){const n=e.get($v);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const i of this._implementations){const s=i.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class yre extends n4{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Rl extends n4{static bindToContribution(e){return class extends Rl{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,s){e(i)&&this._callback(e(i),s)}}}runCommand(e,t){const n=e.get(vr),i=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(i)return i.invokeWithinContext(s=>{if(s.get(Xn).contextMatchesRules(Md(this.precondition)))return this.runEditorCommand(s,i,t)})}}let hn=class wre extends Rl{constructor(e){super(wre.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=vn.EditorContext),i.title||(i.title=e.label),i.when=qt.and(e.precondition,i.when),i}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Uv).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};class Sre extends hn{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const s=i[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}}function jv(r,e){Ki.registerCommand(r,function(t,...n){const[i,s]=n;$r($n.isUri(i)),$r(ze.isIPosition(s));const o=t.get(aa).getModel(i);if(o){const a=ze.lift(s);return e(o,a,...n.slice(2))}return t.get(zc).createModelReference(i).then(a=>new Promise((l,u)=>{try{const d=e(a.object.textEditorModel,ze.lift(s),n.slice(2));l(d)}catch(d){u(d)}}).finally(()=>{a.dispose()}))})}function Ibe(r,e){Ki.registerCommand(r,function(t,...n){const[i]=n;$r($n.isUri(i));const s=t.get(aa).getModel(i);return s?e(s,...n.slice(1)):t.get(zc).createModelReference(i).then(o=>new Promise((a,l)=>{try{const u=e(o.object.textEditorModel,n.slice(1));a(u)}catch(u){l(u)}}).finally(()=>{o.dispose()}))})}function Dt(r){return vf.INSTANCE.registerEditorCommand(r),r}function It(r){const e=new r;return vf.INSTANCE.registerEditorAction(e),e}function Lre(r){return vf.INSTANCE.registerEditorAction(r),r}function Ere(r){vf.INSTANCE.registerEditorAction(r)}function br(r,e){vf.INSTANCE.registerEditorContribution(r,e)}var BE;(function(r){function e(o){return vf.INSTANCE.getEditorCommand(o)}r.getEditorCommand=e;function t(){return vf.INSTANCE.getEditorActions()}r.getEditorActions=t;function n(){return vf.INSTANCE.getEditorContributions()}r.getEditorContributions=n;function i(o){return vf.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}r.getSomeEditorContributions=i;function s(){return vf.INSTANCE.getDiffEditorContributions()}r.getDiffEditorContributions=s})(BE||(BE={}));const Tbe={EditorCommonContributions:"editor.contributions"};class vf{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}vf.INSTANCE=new vf;mo.add(Tbe.EditorCommonContributions,vf.INSTANCE);function f2(r){return r.register(),r}const xre=f2(new tD({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:vn.MenubarEditMenu,group:"1_do",title:L({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:vn.CommandPalette,group:"",title:L("undo","Undo"),order:1}]}));f2(new yre(xre,{id:"default:undo",precondition:void 0}));const Dre=f2(new tD({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:vn.MenubarEditMenu,group:"1_do",title:L({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:vn.CommandPalette,group:"",title:L("redo","Redo"),order:1}]}));f2(new yre(Dre,{id:"default:redo",precondition:void 0}));const kbe=f2(new tD({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:vn.MenubarSelectionMenu,group:"1_basic",title:L({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:vn.CommandPalette,group:"",title:L("selectAll","Select All"),order:1}]}));var Nbe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Abe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Ok=class{constructor(e,t){}dispose(){}};Ok.ID="editor.contrib.markerDecorations";Ok=Nbe([Abe(1,_U)],Ok);br(Ok.ID,Ok);const Ire="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Obe(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Ire)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Tre=Obe();function KM(r){let e=Tre;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}const Mbe={maxLen:1e3,windowSize:15,timeBudget:150};function GM(r,e,t,n,i=Mbe){if(t.length>i.maxLen){let u=r-i.maxLen/2;return u<0?u=0:n+=u,t=t.substring(u,r+i.maxLen/2),GM(r,e,t,n,i)}const s=Date.now(),o=r-1-n;let a=-1,l=null;for(let u=1;!(Date.now()-s>=i.timeBudget);u++){const d=o-i.windowSize*u;e.lastIndex=Math.max(0,d);const h=Rbe(e,t,o,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){let u={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,u}return null}function Rbe(r,e,t,n){let i;for(;i=r.exec(e);){const s=i.index||0;if(s<=t&&r.lastIndex>=t)return i;if(n>0&&s>n)return null}return null}function ff(r,e=0){return r[r.length-(1+e)]}function Pbe(r){if(r.length===0)throw new Error("Invalid tail call");return[r.slice(0,r.length-1),r[r.length-1]]}function xf(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(!t(r[n],e[n]))return!1;return!0}function kU(r,e,t){let n=0,i=r.length-1;for(;n<=i;){const s=(n+i)/2|0,o=t(r[s],e);if(o<0)n=s+1;else if(o>0)i=s-1;else return s}return-(n+1)}function kre(r,e){let t=0,n=r.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(r[i])?n=i:t=i+1}return t}function A6(r,e,t){if(r=r|0,r>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],i=[],s=[],o=[];for(let a of e){const l=t(a,n);l<0?i.push(a):l>0?s.push(a):o.push(a)}return r<i.length?A6(r,i,t):r<i.length+o.length?o[0]:A6(r-(i.length+o.length),s,t)}function wG(r,e){const t=[];let n;for(const i of r.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}function nD(r){return r.filter(e=>!!e)}function Nre(r){return!Array.isArray(r)||r.length===0}function Rd(r){return Array.isArray(r)&&r.length>0}function iS(r,e=t=>t){const t=new Set;return r.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function Fbe(r,e){const t=Bbe(r,e);if(t!==-1)return r[t]}function Bbe(r,e){for(let t=r.length-1;t>=0;t--){const n=r[t];if(e(n))return t}return-1}function O6(r,e){return r.length>0?r[0]:e}function Are(r){return[].concat(...r)}function rc(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function Mk(r,e,t){const n=r.slice(0,e),i=r.slice(e);return n.concat(t,i)}function $3(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.unshift(e))}function vA(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.push(e))}function NU(r){return Array.isArray(r)?r:[r]}function Wbe(r,e,t){const n=Ore(r,e),i=r.length,s=t.length;r.length=i+s;for(let o=i-1;o>=n;o--)r[o+s]=r[o];for(let o=0;o<s;o++)r[o+n]=t[o]}function SG(r,e,t,n){const i=Ore(r,e),s=r.splice(i,t);return Wbe(r,i,n),s}function Ore(r,e){return e<0?Math.max(e+r.length,0):Math.min(e,r.length)}class WE{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}function ub(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;const e=Array.isArray(r)?[]:{};return Object.keys(r).forEach(t=>{r[t]&&typeof r[t]=="object"?e[t]=ub(r[t]):e[t]=r[t]}),e}function Vbe(r){if(!r||typeof r!="object")return r;const e=[r];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(Mre.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&e.push(i)}}return r}const Mre=Object.prototype.hasOwnProperty;function Hbe(r,e){return M6(r,e,new Set)}function M6(r,e,t){if(wh(r))return r;const n=e(r);if(typeof n<"u")return n;if(sre(r)){const i=[];for(const s of r)i.push(M6(s,e,t));return i}if(Wc(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);const i={};for(let s in r)Mre.call(r,s)&&(i[s]=M6(r[s],e,t));return t.delete(r),i}return r}function qv(r,e,t=!0){return Wc(r)?(Wc(e)&&Object.keys(e).forEach(n=>{n in r?t&&(Wc(r[n])&&Wc(e[n])?qv(r[n],e[n],t):r[n]=e[n]):r[n]=e[n]}),r):e}function Xg(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!Xg(r[t],e[t]))return!1}else{const i=[];for(n in r)i.push(n);i.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!Xg(i,s))return!1;for(t=0;t<i.length;t++)if(!Xg(r[i[t]],e[i[t]]))return!1}return!0}function W_(r,e,t){const n=e(r);return typeof n>"u"?t:n}const j1=8;class Rre{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class zbe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Pre{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class wa{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return i4(e,t)}compute(e,t,n){return n}}class QT{constructor(e,t){this.newValue=e,this.didChange=t}}function i4(r,e){if(typeof r!="object"||typeof e!="object"||!r||!e)return new QT(e,r!==e);if(Array.isArray(r)||Array.isArray(e)){const n=Array.isArray(r)&&Array.isArray(e)&&xf(r,e);return new QT(e,n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){const i=i4(r[n],e[n]);i.didChange&&(r[n]=i.newValue,t=!0)}return new QT(r,t)}class iD{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}applyUpdate(e,t){return i4(e,t)}validate(e){return this.defaultValue}}class XS{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return i4(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Mn(r,e){return typeof r>"u"?e:r==="false"?!1:!!r}class Hi extends XS{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Mn(e,this.defaultValue)}}function R6(r,e,t,n){if(typeof r>"u")return e;let i=parseInt(r,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}class xs extends XS{constructor(e,t,n,i,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=i,o.maximum=s),super(e,t,n,o),this.minimum=i,this.maximum=s}static clampedInt(e,t,n,i){return R6(e,t,n,i)}validate(e){return xs.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class _v extends XS{constructor(e,t,n,i,s){typeof s<"u"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=i}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(_v.float(e,this.defaultValue))}}class kd extends XS{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return kd.string(e,this.defaultValue)}}function Pc(r,e,t){return typeof r!="string"||t.indexOf(r)===-1?e:r}class ra extends XS{constructor(e,t,n,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=n),super(e,t,n,s),this._allowedValues=i}validate(e){return Pc(e,this.defaultValue,this._allowedValues)}}class sT extends wa{constructor(e,t,n,i,s,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=i),super(e,t,n,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Ube(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class $be extends wa{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[L("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),L("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),L("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:L("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class jbe extends wa{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:L("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:L("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Mn(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Mn(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function qbe(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ul;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(ul||(ul={}));function Kbe(r){switch(r){case"line":return ul.Line;case"block":return ul.Block;case"underline":return ul.Underline;case"line-thin":return ul.LineThin;case"block-outline":return ul.BlockOutline;case"underline-thin":return ul.UnderlineThin}}class Gbe extends iD{constructor(){super(127,[65,33])}compute(e,t,n){const i=["monaco-editor"];return t.get(33)&&i.push(t.get(33)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(65)==="default"?i.push("mouse-default"):t.get(65)==="copy"&&i.push("mouse-copy"),t.get(99)&&i.push("showUnused"),t.get(125)&&i.push("showDeprecated"),i.join(" ")}}class Ybe extends Hi{constructor(){super(32,"emptySelectionClipboard",!0,{description:L("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class Zbe extends wa{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:L("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[L("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),L("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),L("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:L("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[L("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),L("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),L("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:L("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:L("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:zi},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:L("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:L("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Mn(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Pc(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Pc(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Mn(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Mn(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Mn(t.loop,this.defaultValue.loop)}}}class Sh extends wa{constructor(){super(44,"fontLigatures",Sh.OFF,{anyOf:[{type:"boolean",description:L("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:L("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:L("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Sh.OFF:e==="true"?Sh.ON:e:e?Sh.ON:Sh.OFF}}Sh.OFF='"liga" off, "calt" off';Sh.ON='"liga" on, "calt" on';class Xbe extends iD{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class Qbe extends XS{constructor(){super(45,"fontSize",ou.fontSize,{type:"number",minimum:6,maximum:100,default:ou.fontSize,description:L("fontSize","Controls the font size in pixels.")})}validate(e){let t=_v.float(e,this.defaultValue);return t===0?ou.fontSize:_v.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class rv extends wa{constructor(){super(46,"fontWeight",ou.fontWeight,{anyOf:[{type:"number",minimum:rv.MINIMUM_VALUE,maximum:rv.MAXIMUM_VALUE,errorMessage:L("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:rv.SUGGESTION_VALUES}],default:ou.fontWeight,description:L("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(xs.clampedInt(e,ou.fontWeight,rv.MINIMUM_VALUE,rv.MAXIMUM_VALUE))}}rv.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];rv.MINIMUM_VALUE=1;rv.MAXIMUM_VALUE=1e3;class Jbe extends wa{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[L("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),L("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),L("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:L("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:L("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:L("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:L("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:L("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:L("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:L("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:L("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:L("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:L("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:L("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,s,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Pc(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Pc(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Pc(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:Pc(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:Pc(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:Pc(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:kd.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:kd.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:kd.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:kd.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:kd.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class e1e extends wa{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:L("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:L("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:L("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:L("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Mn(t.enabled,this.defaultValue.enabled),delay:xs.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Mn(t.sticky,this.defaultValue.sticky),above:Mn(t.above,this.defaultValue.above)}}}class VE extends iD{constructor(){super(130,[49,57,37,64,91,59,60,93,117,120,121,122,2])}compute(e,t,n){return VE.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,i=(e.viewLineCount+n)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/i);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:i,minimapLineCount:s}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,u=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let p=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const v=e.minimap.maxColumn,C=e.minimap.size,S=e.minimap.side,E=e.verticalScrollbarWidth,k=e.viewLineCount,D=e.remainingWidth,O=e.isViewportWrapping,H=h?2:3;let V=Math.floor(s*i);const X=V/s;let $=!1,P=!1,z=H*p,M=p/s,W=1;if(C==="fill"||C==="fit"){const{typicalViewportLineCount:ie,extraLinesBeyondLastLine:te,desiredRatio:B,minimapLineCount:K}=VE.computeContainedMinimapLineCount({viewLineCount:k,scrollBeyondLastLine:d,height:i,lineHeight:l,pixelRatio:s});if(k/K>1)$=!0,P=!0,p=1,z=1,M=p/s;else{let ae=!1,De=p+1;if(C==="fit"){const Me=Math.ceil((k+te)*z);O&&a&&D<=t.stableFitRemainingWidth?(ae=!0,De=t.stableFitMaxMinimapScale):ae=Me>V}if(C==="fill"||ae){$=!0;const Me=p;z=Math.min(l*s,Math.max(1,Math.floor(1/B))),O&&a&&D<=t.stableFitRemainingWidth&&(De=t.stableFitMaxMinimapScale),p=Math.min(De,Math.max(1,Math.floor(z/H))),p>Me&&(W=Math.min(2,p/Me)),M=p/s/W,V=Math.ceil(Math.max(ie,k+te)*z),O?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=D,t.stableFitMaxMinimapScale=p):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const I=Math.floor(v*M),R=Math.min(I,Math.max(0,Math.floor((D-E-2)*M/(u+M)))+j1);let G=Math.floor(s*R);const Z=G/s;G=Math.floor(G*W);const ee=h?1:2,ne=S==="left"?0:n-R-E;return{renderMinimap:ee,minimapLeft:ne,minimapWidth:R,minimapHeightIsEditorHeight:$,minimapIsSampling:P,minimapScale:p,minimapLineHeight:z,minimapCanvasInnerWidth:G,minimapCanvasInnerHeight:V,minimapCanvasOuterWidth:Z,minimapCanvasOuterHeight:X}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,u=t.pixelRatio,d=t.viewLineCount,h=e.get(122),p=h==="inherit"?e.get(121):h,v=p==="inherit"?e.get(117):p,C=e.get(120),S=e.get(2),E=t.isDominatedByLongLines,k=e.get(49),D=e.get(59).renderType!==0,O=e.get(60),H=e.get(93),V=e.get(64),X=e.get(91),$=X.verticalScrollbarSize,P=X.verticalHasArrows,z=X.arrowSize,M=X.horizontalScrollbarSize,W=e.get(57),I=e.get(37);let R;if(typeof W=="string"&&/^\d+(\.\d+)?ch$/.test(W)){const Rt=parseFloat(W.substr(0,W.length-2));R=xs.clampedInt(Rt*a,0,0,1e3)}else R=xs.clampedInt(W,0,0,1e3);I&&(R+=16);let G=0;if(D){const Rt=Math.max(o,O);G=Math.round(Rt*l)}let Z=0;k&&(Z=s);let ee=0,ne=ee+Z,ie=ne+G,te=ie+R;const B=n-Z-G-R;let K=!1,de=!1,ae=-1;S!==2&&(p==="inherit"&&E?(K=!0,de=!0):v==="on"||v==="bounded"?de=!0:v==="wordWrapColumn"&&(ae=C));const De=VE._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:u,scrollBeyondLastLine:H,minimap:V,verticalScrollbarWidth:$,viewLineCount:d,remainingWidth:B,isViewportWrapping:de},t.memory||new Pre);De.renderMinimap!==0&&De.minimapLeft===0&&(ee+=De.minimapWidth,ne+=De.minimapWidth,ie+=De.minimapWidth,te+=De.minimapWidth);const Me=B-De.minimapWidth,Qe=Math.max(1,Math.floor((Me-$-2)/a)),ct=P?z:0;return de&&(ae=Math.max(1,Qe),v==="bounded"&&(ae=Math.min(ae,C))),{width:n,height:i,glyphMarginLeft:ee,glyphMarginWidth:Z,lineNumbersLeft:ne,lineNumbersWidth:G,decorationsLeft:ie,decorationsWidth:R,contentLeft:te,contentWidth:Me,minimap:De,viewportColumn:Qe,isWordWrapMinified:K,isViewportWrapping:de,wrappingColumn:ae,verticalScrollbarWidth:$,horizontalScrollbarHeight:M,overviewRuler:{top:ct,width:$,height:i-2*ct,right:0}}}}class t1e extends wa{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:L("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Mn(e.enabled,this.defaultValue.enabled)}}}class n1e extends wa{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(126,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:L("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:L("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:L("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Mn(t.enabled,this.defaultValue.enabled),fontSize:xs.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:kd.string(t.fontFamily,this.defaultValue.fontFamily)}}}class i1e extends _v{constructor(){super(58,"lineHeight",ou.lineHeight,e=>_v.clamp(e,0,150),{markdownDescription:L("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class r1e extends wa{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:L("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[L("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),L("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),L("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:L("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:L("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:L("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:L("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:L("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:L("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Mn(t.enabled,this.defaultValue.enabled),size:Pc(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Pc(t.side,this.defaultValue.side,["right","left"]),showSlider:Pc(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Mn(t.renderCharacters,this.defaultValue.renderCharacters),scale:xs.clampedInt(t.scale,1,1,3),maxColumn:xs.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function s1e(r){return r==="ctrlCmd"?zi?"metaKey":"ctrlKey":"altKey"}class o1e extends wa{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:L("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:L("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:xs.clampedInt(t.top,0,0,1e3),bottom:xs.clampedInt(t.bottom,0,0,1e3)}}}class a1e extends wa{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:L("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:L("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Mn(t.enabled,this.defaultValue.enabled),cycle:Mn(t.cycle,this.defaultValue.cycle)}}}class l1e extends iD{constructor(){super(128)}compute(e,t,n){return e.pixelRatio}}class u1e extends wa{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:L("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:L("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:L("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:L("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Mn(t.other,this.defaultValue.other),comments:Mn(t.comments,this.defaultValue.comments),strings:Mn(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class c1e extends wa{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[L("lineNumbers.off","Line numbers are not rendered."),L("lineNumbers.on","Line numbers are rendered as absolute number."),L("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),L("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:L("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function AU(r){const e=r.get(86);return e==="editable"?r.get(80):e!=="on"}class d1e extends wa{constructor(){const e=[],t={type:"number",description:L("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:L("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:L("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:xs.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:xs.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}function LG(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}let h1e=class extends wa{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[L("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),L("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),L("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:L("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[L("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),L("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),L("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:L("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:L("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:L("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:L("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=xs.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=xs.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:xs.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:LG(t.vertical,this.defaultValue.vertical),horizontal:LG(t.horizontal,this.defaultValue.horizontal),useShadows:Mn(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Mn(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Mn(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Mn(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Mn(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:xs.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:xs.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Mn(t.scrollByPage,this.defaultValue.scrollByPage)}}};const G_="inUntrustedWorkspace",sv={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments"};class f1e extends wa{constructor(){const e={nonBasicASCII:G_,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:G_,allowedCharacters:{}};super(112,"unicodeHighlight",e,{[sv.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,G_],default:e.nonBasicASCII,description:L("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[sv.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:L("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[sv.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:L("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[sv.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,G_],default:e.includeComments,description:L("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[sv.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:L("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&(Xg(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0));const i=super.applyUpdate(e,t);return n?new QT(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:YM(t.nonBasicASCII,G_,[!0,!1,G_]),invisibleCharacters:Mn(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Mn(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:YM(t.includeComments,G_,[!0,!1,G_]),allowedCharacters:this.validateAllowedCharacters(e.allowedCharacters,this.defaultValue.allowedCharacters)}}validateAllowedCharacters(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,s]of Object.entries(e))s===!0&&(n[i]=!0);return n}}class g1e extends wa{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:L("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Mn(t.enabled,this.defaultValue.enabled),mode:Pc(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class p1e extends wa{constructor(){const e={enabled:Nu.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:L("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Mn(e.enabled,this.defaultValue.enabled)}}}class m1e extends wa{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[L("editor.guides.bracketPairs.true","Enables bracket pair guides."),L("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),L("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:L("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[L("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),L("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),L("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:L("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:L("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:L("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:L("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:YM(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:YM(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Mn(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Mn(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Mn(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function YM(r,e,t){const n=t.indexOf(r);return n===-1?e:t[n]}class _1e extends wa{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[L("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),L("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:L("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:L("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:L("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:L("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:L("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:L("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:L("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:L("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:L("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:L("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:L("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Pc(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Mn(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Mn(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Mn(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Mn(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Mn(t.showIcons,this.defaultValue.showIcons),showStatusBar:Mn(t.showStatusBar,this.defaultValue.showStatusBar),preview:Mn(t.preview,this.defaultValue.preview),previewMode:Pc(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Mn(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Mn(t.showMethods,this.defaultValue.showMethods),showFunctions:Mn(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Mn(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Mn(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Mn(t.showFields,this.defaultValue.showFields),showVariables:Mn(t.showVariables,this.defaultValue.showVariables),showClasses:Mn(t.showClasses,this.defaultValue.showClasses),showStructs:Mn(t.showStructs,this.defaultValue.showStructs),showInterfaces:Mn(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Mn(t.showModules,this.defaultValue.showModules),showProperties:Mn(t.showProperties,this.defaultValue.showProperties),showEvents:Mn(t.showEvents,this.defaultValue.showEvents),showOperators:Mn(t.showOperators,this.defaultValue.showOperators),showUnits:Mn(t.showUnits,this.defaultValue.showUnits),showValues:Mn(t.showValues,this.defaultValue.showValues),showConstants:Mn(t.showConstants,this.defaultValue.showConstants),showEnums:Mn(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Mn(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Mn(t.showKeywords,this.defaultValue.showKeywords),showWords:Mn(t.showWords,this.defaultValue.showWords),showColors:Mn(t.showColors,this.defaultValue.showColors),showFiles:Mn(t.showFiles,this.defaultValue.showFiles),showReferences:Mn(t.showReferences,this.defaultValue.showReferences),showFolders:Mn(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Mn(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Mn(t.showSnippets,this.defaultValue.showSnippets),showUsers:Mn(t.showUsers,this.defaultValue.showUsers),showIssues:Mn(t.showIssues,this.defaultValue.showIssues)}}}class v1e extends wa{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:L("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Mn(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class b1e extends iD{constructor(){super(129,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function C1e(r){switch(r){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class y1e extends iD{constructor(){super(131,[130])}compute(e,t,n){const i=t.get(130);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}const w1e="Consolas, 'Courier New', monospace",S1e="Menlo, Monaco, 'Courier New', monospace",L1e="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",ou={fontFamily:zi?S1e:Hc?L1e:w1e,fontWeight:"normal",fontSize:zi?12:14,lineHeight:0,letterSpacing:0},Nu={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},ow=[];function xt(r){return ow[r.id]=r,r}const Pm={acceptSuggestionOnCommitCharacter:xt(new Hi(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:L("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:xt(new ra(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",L("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:L("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:xt(new $be),accessibilityPageSize:xt(new xs(3,"accessibilityPageSize",10,1,1073741824,{description:L("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:xt(new kd(4,"ariaLabel",L("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:xt(new ra(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",L("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),L("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:L("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:xt(new ra(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",L("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:L("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:xt(new ra(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",L("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:L("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:xt(new ra(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",L("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),L("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:L("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:xt(new sT(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Ube,{enumDescriptions:[L("editor.autoIndent.none","The editor will not insert indentation automatically."),L("editor.autoIndent.keep","The editor will keep the current line's indentation."),L("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),L("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),L("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:L("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:xt(new Hi(10,"automaticLayout",!1)),autoSurround:xt(new ra(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[L("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),L("editor.autoSurround.quotes","Surround with quotes but not brackets."),L("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:L("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:xt(new p1e),bracketPairGuides:xt(new m1e),stickyTabStops:xt(new Hi(103,"stickyTabStops",!1,{description:L("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:xt(new Hi(14,"codeLens",!0,{description:L("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:xt(new kd(15,"codeLensFontFamily","",{description:L("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:xt(new xs(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:L("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:xt(new Hi(17,"colorDecorators",!0,{description:L("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:xt(new Hi(18,"columnSelection",!1,{description:L("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:xt(new jbe),contextmenu:xt(new Hi(20,"contextmenu",!0)),copyWithSyntaxHighlighting:xt(new Hi(21,"copyWithSyntaxHighlighting",!0,{description:L("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:xt(new sT(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],qbe,{description:L("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:xt(new Hi(23,"cursorSmoothCaretAnimation",!1,{description:L("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:xt(new sT(24,"cursorStyle",ul.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Kbe,{description:L("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:xt(new xs(25,"cursorSurroundingLines",0,0,1073741824,{description:L("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:xt(new ra(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[L("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),L("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:L("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:xt(new xs(27,"cursorWidth",0,0,1073741824,{markdownDescription:L("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:xt(new Hi(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:xt(new Hi(29,"disableMonospaceOptimizations",!1)),domReadOnly:xt(new Hi(30,"domReadOnly",!1)),dragAndDrop:xt(new Hi(31,"dragAndDrop",!0,{description:L("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:xt(new Ybe),extraEditorClassName:xt(new kd(33,"extraEditorClassName","")),fastScrollSensitivity:xt(new _v(34,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:L("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:xt(new Zbe),fixedOverflowWidgets:xt(new Hi(36,"fixedOverflowWidgets",!1)),folding:xt(new Hi(37,"folding",!0,{description:L("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:xt(new ra(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[L("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),L("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:L("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:xt(new Hi(39,"foldingHighlight",!0,{description:L("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:xt(new Hi(40,"foldingImportsByDefault",!1,{description:L("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:xt(new Hi(41,"unfoldOnClickAfterEndOfLine",!1,{description:L("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:xt(new kd(42,"fontFamily",ou.fontFamily,{description:L("fontFamily","Controls the font family.")})),fontInfo:xt(new Xbe),fontLigatures2:xt(new Sh),fontSize:xt(new Qbe),fontWeight:xt(new rv),formatOnPaste:xt(new Hi(47,"formatOnPaste",!1,{description:L("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:xt(new Hi(48,"formatOnType",!1,{description:L("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:xt(new Hi(49,"glyphMargin",!0,{description:L("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:xt(new Jbe),hideCursorInOverviewRuler:xt(new Hi(51,"hideCursorInOverviewRuler",!1,{description:L("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:xt(new e1e),inDiffEditor:xt(new Hi(53,"inDiffEditor",!1)),letterSpacing:xt(new _v(55,"letterSpacing",ou.letterSpacing,r=>_v.clamp(r,-5,20),{description:L("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:xt(new t1e),lineDecorationsWidth:xt(new XS(57,"lineDecorationsWidth",10)),lineHeight:xt(new i1e),lineNumbers:xt(new c1e),lineNumbersMinChars:xt(new xs(60,"lineNumbersMinChars",5,1,300)),linkedEditing:xt(new Hi(61,"linkedEditing",!1,{description:L("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:xt(new Hi(62,"links",!0,{description:L("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:xt(new ra(63,"matchBrackets","always",["always","near","never"],{description:L("matchBrackets","Highlight matching brackets.")})),minimap:xt(new r1e),mouseStyle:xt(new ra(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:xt(new _v(66,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:L("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:xt(new Hi(67,"mouseWheelZoom",!1,{markdownDescription:L("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:xt(new Hi(68,"multiCursorMergeOverlapping",!0,{description:L("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:xt(new sT(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],s1e,{markdownEnumDescriptions:[L("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),L("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:L({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:xt(new ra(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[L("multiCursorPaste.spread","Each cursor pastes a single line of the text."),L("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:L("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:xt(new Hi(71,"occurrencesHighlight",!0,{description:L("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:xt(new Hi(72,"overviewRulerBorder",!0,{description:L("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:xt(new xs(73,"overviewRulerLanes",3,0,3)),padding:xt(new o1e),parameterHints:xt(new a1e),peekWidgetDefaultFocus:xt(new ra(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[L("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),L("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:L("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:xt(new Hi(77,"definitionLinkOpensInPeek",!1,{description:L("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:xt(new u1e),quickSuggestionsDelay:xt(new xs(79,"quickSuggestionsDelay",10,0,1073741824,{description:L("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:xt(new Hi(80,"readOnly",!1)),renameOnType:xt(new Hi(81,"renameOnType",!1,{description:L("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:L("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:xt(new Hi(82,"renderControlCharacters",!0,{description:L("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:xt(new Hi(83,"renderFinalNewline",!0,{description:L("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:xt(new ra(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",L("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:L("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:xt(new Hi(85,"renderLineHighlightOnlyWhenFocus",!1,{description:L("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:xt(new ra(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:xt(new ra(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",L("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),L("renderWhitespace.selection","Render whitespace characters only on selected text."),L("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:L("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:xt(new xs(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:xt(new Hi(89,"roundedSelection",!0,{description:L("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:xt(new d1e),scrollbar:xt(new h1e),scrollBeyondLastColumn:xt(new xs(92,"scrollBeyondLastColumn",5,0,1073741824,{description:L("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:xt(new Hi(93,"scrollBeyondLastLine",!0,{description:L("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:xt(new Hi(94,"scrollPredominantAxis",!0,{description:L("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:xt(new Hi(95,"selectionClipboard",!0,{description:L("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Hc})),selectionHighlight:xt(new Hi(96,"selectionHighlight",!0,{description:L("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:xt(new Hi(97,"selectOnLineNumbers",!0)),showFoldingControls:xt(new ra(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[L("showFoldingControls.always","Always show the folding controls."),L("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:L("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:xt(new Hi(99,"showUnused",!0,{description:L("showUnused","Controls fading out of unused code.")})),showDeprecated:xt(new Hi(125,"showDeprecated",!0,{description:L("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:xt(new n1e),snippetSuggestions:xt(new ra(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[L("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),L("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),L("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),L("snippetSuggestions.none","Do not show snippet suggestions.")],description:L("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:xt(new v1e),smoothScrolling:xt(new Hi(102,"smoothScrolling",!1,{description:L("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:xt(new xs(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:xt(new _1e),inlineSuggest:xt(new g1e),suggestFontSize:xt(new xs(106,"suggestFontSize",0,0,1e3,{markdownDescription:L("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:xt(new xs(107,"suggestLineHeight",0,0,1e3,{markdownDescription:L("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:xt(new Hi(108,"suggestOnTriggerCharacters",!0,{description:L("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:xt(new ra(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[L("suggestSelection.first","Always select the first suggestion."),L("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),L("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:L("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:xt(new ra(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[L("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),L("tabCompletion.off","Disable tab completions."),L("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:L("tabCompletion","Enables tab completions.")})),tabIndex:xt(new xs(111,"tabIndex",0,-1,1073741824)),unicodeHighlight:xt(new f1e),unusualLineTerminators:xt(new ra(113,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[L("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),L("unusualLineTerminators.off","Unusual line terminators are ignored."),L("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:L("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:xt(new Hi(114,"useShadowDOM",!0)),useTabStops:xt(new Hi(115,"useTabStops",!0,{description:L("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:xt(new kd(116,"wordSeparators",Ire,{description:L("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:xt(new ra(117,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[L("wordWrap.off","Lines will never wrap."),L("wordWrap.on","Lines will wrap at the viewport width."),L({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),L({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:L({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:xt(new kd(118,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:xt(new kd(119,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:xt(new xs(120,"wordWrapColumn",80,1,1073741824,{markdownDescription:L({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:xt(new ra(121,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:xt(new ra(122,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:xt(new sT(123,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],C1e,{enumDescriptions:[L("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),L("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),L("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),L("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:L("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:xt(new ra(124,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[L("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),L("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:L("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:xt(new Gbe),pixelRatio:xt(new l1e),tabFocusMode:xt(new b1e),layoutInfo:xt(new VE),wrappingInfo:xt(new y1e)};class E1e{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class OU{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(qg?ou.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const i=document.createElement("div");i.style.fontFamily=e,i.style.fontWeight="bold",i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(i);const s=document.createElement("div");s.style.fontFamily=e,s.style.fontWeight=this._bareFontInfo.fontWeight,s.style.fontSize=this._bareFontInfo.fontSize+"px",s.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,s.style.lineHeight=this._bareFontInfo.lineHeight+"px",s.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",s.style.fontStyle="italic",t.appendChild(s);const o=[];for(const a of this._requests){let l;a.type===0&&(l=n),a.type===2&&(l=i),a.type===1&&(l=s),l.appendChild(document.createElement("br"));const u=document.createElement("span");OU._render(u,a),l.appendChild(u),o.push(u)}this._container=t,this._testElements=o}static _render(e,t){if(t.chr===" "){let n="";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}function x1e(r,e){new OU(r,e).read()}class Fre extends Je{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,i=this.referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this.width!==n||this.height!==i)&&(this.width=n,this.height=i,e&&this.changeCallback())}}const Fb=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Ae,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},D1e=zi?1.5:1.35,j3=8;class Nw{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,i){const s=e.get(42),o=e.get(46),a=e.get(45),l=e.get(44),u=e.get(58),d=e.get(55);return Nw._create(s,o,a,l,u,d,t,n,i)}static _create(e,t,n,i,s,o,a,l,u){s===0?s=D1e*n:s<j3&&(s=s*n),s=Math.round(s),s<j3&&(s=j3);const d=1+(u?0:Fb.getZoomLevel()*.1);return n*=d,s*=d,new Nw({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,lineHeight:s,letterSpacing:o})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=Nw._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const I1e=1;class P6 extends Nw{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=I1e,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}const r4={JSONContribution:"base.contributions.json"};function T1e(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}class k1e{constructor(){this._onDidChangeSchema=new Ae,this.schemasById={}}registerSchema(e,t){this.schemasById[T1e(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const N1e=new k1e;mo.add(r4.JSONContribution,N1e);const QS={Configuration:"base.contributions.configuration"},oT="vscode://schemas/settings/resourceLanguage",EG=mo.as(r4.JSONContribution);class A1e{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Ae,this._onDidUpdateConfiguration=new Ae,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:L("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},EG.registerSchema(oT,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);EG.registerSchema(oT,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],i=[];for(const{overrides:s,source:o}of e)for(const a in s)if(n.push(a),Rk.test(a)){const l=Object.assign(Object.assign({},((t=this.configurationDefaultsOverrides.get(a))===null||t===void 0?void 0:t.value)||{}),s[a]);this.configurationDefaultsOverrides.set(a,{source:o,value:l});const u={type:"object",default:l,description:L("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",a),$ref:oT,defaultDefaultValue:l,source:Nf(o)?void 0:o};i.push(...Wre(a)),this.configurationProperties[a]=u,this.defaultLanguageConfigurationOverridesNode.properties[a]=u}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:o});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.registerOverrideIdentifiers(i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(i=>{n.push(...this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties)),this.configurationContributors.push(i),this.registerJSONConfiguration(i)}),n}validateAndRegisterProperties(e,t=!0,n,i,s=3){s=wh(e.scope)?s:e.scope;let o=[],a=e.properties;if(a)for(let u in a){if(t&&R1e(u)){delete a[u];continue}const d=a[u];if(d.source=n,d.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,d),Rk.test(u)?d.scope=void 0:(d.scope=wh(d.scope)?s:d.scope,d.restricted=wh(d.restricted)?!!(i!=null&&i.includes(u)):d.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u];!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),o.push(u)}let l=e.allOf;if(l)for(let u of l)o.push(...this.validateAndRegisterProperties(u,t,n,i,s));return o}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let i=n.properties;if(i)for(const o in i)this.updateSchema(o,i[o]);let s=n.allOf;s&&s.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:L("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:L("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:oT};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){L("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),L("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=n==null?void 0:n.value,s=n==null?void 0:n.source;Od(i)&&(i=t.defaultDefaultValue,s=void 0),Od(i)&&(i=M1e(t.type)),t.default=i,t.defaultValueSource=s}}const Bre="\\[([^\\]]+)\\]",xG=new RegExp(Bre,"g"),O1e=`^(${Bre})+$`,Rk=new RegExp(O1e);function Wre(r){const e=[];if(Rk.test(r)){let t=xG.exec(r);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=xG.exec(r)}}return iS(e)}function M1e(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const Vre=new A1e;mo.add(QS.Configuration,Vre);function R1e(r){return r.trim()?Rk.test(r)?L("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):Vre.getConfigurationProperties()[r]!==void 0?L("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):null:L("config.property.empty","Cannot register an empty property")}const P1e=Object.prototype.hasOwnProperty;function F1e(r,e){for(let t in r)if(P1e.call(r,t)&&e({key:t,value:r[t]},function(){delete r[t]})===!1)return}class B1e{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const ZM=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Ae,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(r){this._tabFocus!==r&&(this._tabFocus=r,this._onDidChangeTabFocus.fire(this._tabFocus))}},W1e=Object.hasOwnProperty;class V1e{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class H1e{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Z_{static readOptions(e){const t=e,n=new H1e;for(const i of ow){const s=i.name==="_never_"?void 0:t[i.name];n._write(i.id,s)}return n}static validateOptions(e){const t=new zbe;for(const n of ow)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new V1e;for(const i of ow)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?xf(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!Z_._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const s of ow){const o=!Z_._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=o,o&&(i=!0)}return i?new Rre(n):null}static applyUpdate(e,t){let n=!1;for(const i of ow)if(t.hasOwnProperty(i.name)){const s=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=s.newValue,n=n||s.didChange}return n}}function z1e(r){const e=r.wordWrap;e===!0?r.wordWrap="on":e===!1&&(r.wordWrap="off");const t=r.lineNumbers;t===!0?r.lineNumbers="on":t===!1&&(r.lineNumbers="off"),r.autoClosingBrackets===!1&&(r.autoClosingBrackets="never",r.autoClosingQuotes="never",r.autoSurround="never"),r.cursorBlinking==="visible"&&(r.cursorBlinking="solid");const s=r.renderWhitespace;s===!0?r.renderWhitespace="boundary":s===!1&&(r.renderWhitespace="none");const o=r.renderLineHighlight;o===!0?r.renderLineHighlight="line":o===!1&&(r.renderLineHighlight="none");const a=r.acceptSuggestionOnEnter;a===!0?r.acceptSuggestionOnEnter="on":a===!1&&(r.acceptSuggestionOnEnter="off");const l=r.tabCompletion;l===!1?r.tabCompletion="off":l===!0&&(r.tabCompletion="onlySnippets");const u=r.suggest;if(u&&typeof u.filteredTypes=="object"&&u.filteredTypes){const E={};E.method="showMethods",E.function="showFunctions",E.constructor="showConstructors",E.deprecated="showDeprecated",E.field="showFields",E.variable="showVariables",E.class="showClasses",E.struct="showStructs",E.interface="showInterfaces",E.module="showModules",E.property="showProperties",E.event="showEvents",E.operator="showOperators",E.unit="showUnits",E.value="showValues",E.constant="showConstants",E.enum="showEnums",E.enumMember="showEnumMembers",E.keyword="showKeywords",E.text="showWords",E.color="showColors",E.file="showFiles",E.reference="showReferences",E.folder="showFolders",E.typeParameter="showTypeParameters",E.snippet="showSnippets",F1e(E,k=>{const D=u.filteredTypes[k.key];D===!1&&(u[k.value]=D)})}const d=r.hover;d===!0?r.hover={enabled:!0}:d===!1&&(r.hover={enabled:!1});const h=r.parameterHints;h===!0?r.parameterHints={enabled:!0}:h===!1&&(r.parameterHints={enabled:!1});const p=r.autoIndent;p===!0?r.autoIndent="full":p===!1&&(r.autoIndent="advanced");const v=r.matchBrackets;v===!0?r.matchBrackets="always":v===!1&&(r.matchBrackets="never");const{renderIndentGuides:C,highlightActiveIndentGuide:S}=r;r.guides||(r.guides={}),C!==void 0&&(r.guides.indentation=!!C),S!==void 0&&(r.guides.highlightActiveIndentation=!!S)}function DG(r){const e=ub(r);return z1e(e),e}class MU extends Je{constructor(e,t){super(),this._onDidChange=this._register(new Ae),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Ae),this.onDidChangeFast=this._onDidChangeFast.event,this._reservedHeight=0,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new Pre,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=DG(t),this._readOptions=Z_.readOptions(this._rawOptions),this._validatedOptions=Z_.validateOptions(this._readOptions),this._register(Fb.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(ZM.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=Z_.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=Nw.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:ZM.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return Z_.computeOptions(this._validatedOptions,n)}updateOptions(e){if(typeof e>"u")return;const t=DG(e);Z_.applyUpdate(this._rawOptions,t)&&(this._readOptions=Z_.readOptions(this._rawOptions),this._validatedOptions=Z_.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=MU._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}reserveHeight(e){this._reservedHeight=e,this._recomputeOptions()}}const U1e=Object.freeze({id:"editor",order:5,type:"object",title:L("editorConfigurationTitle","Editor"),scope:5}),$1e=mo.as(QS.Configuration),XM=Object.assign(Object.assign({},U1e),{properties:{"editor.tabSize":{type:"number",default:Nu.tabSize,minimum:1,markdownDescription:L("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Nu.insertSpaces,markdownDescription:L("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Nu.detectIndentation,markdownDescription:L("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Nu.trimAutoWhitespace,description:L("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Nu.largeFileOptimizations,description:L("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:L("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[L("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),L("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),L("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:L("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[L("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),L("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),L("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:L("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:L("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:L("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:L("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:L("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:L("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:L("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:L("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:L("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:L("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:L("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:L("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:L("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:L("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:L("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[L("wordWrap.off","Lines will never wrap."),L("wordWrap.on","Lines will wrap at the viewport width."),L("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function j1e(r){return typeof r.type<"u"||typeof r.anyOf<"u"}for(const r of ow){const e=r.schema;if(typeof e<"u")if(j1e(e))XM.properties[`editor.${r.name}`]=e;else for(let t in e)W1e.call(e,t)&&(XM.properties[t]=e[t])}let bA=null;function Hre(){return bA===null&&(bA=Object.create(null),Object.keys(XM.properties).forEach(r=>{bA[r]=!0})),bA}function q1e(r){return Hre()[`editor.${r}`]||!1}function K1e(r){return Hre()[`diffEditor.${r}`]||!1}$1e.registerConfiguration(XM);class IG{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function G1e(){rS.INSTANCE.clearCache()}class rS extends Je{constructor(){super(),this._onDidChange=this._register(new Ae),this.onDidChange=this._onDidChange.event,this._cache=new IG,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new IG,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=rS._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new P6({zoomLevel:TM(),pixelRatio:Ik(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,i){const s=new E1e(e,t);return n.push(s),i&&i.push(s),s}static _actualReadConfiguration(e){const t=[],n=[],i=this.createRequest("n",0,t,n),s=this.createRequest("",0,t,null),o=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),l=this.createRequest("1",0,t,n),u=this.createRequest("2",0,t,n),d=this.createRequest("3",0,t,n),h=this.createRequest("4",0,t,n),p=this.createRequest("5",0,t,n),v=this.createRequest("6",0,t,n),C=this.createRequest("7",0,t,n),S=this.createRequest("8",0,t,n),E=this.createRequest("9",0,t,n),k=this.createRequest("",0,t,n),D=this.createRequest("",0,t,null),O=this.createRequest("",0,t,n),H=this.createRequest(String.fromCharCode(11825),0,t,null),V="|/-_ilm%";for(let W=0,I=V.length;W<I;W++)this.createRequest(V.charAt(W),0,t,n),this.createRequest(V.charAt(W),1,t,n),this.createRequest(V.charAt(W),2,t,n);x1e(e,t);const X=Math.max(a.width,l.width,u.width,d.width,h.width,p.width,v.width,C.width,S.width,E.width);let $=e.fontFeatureSettings===Sh.OFF;const P=n[0].width;for(let W=1,I=n.length;$&&W<I;W++){const R=P-n[W].width;if(R<-.001||R>.001){$=!1;break}}let z=!0;$&&D.width!==P&&(z=!1),D.width>k.width&&(z=!1);const M=Nie()>2e3;return new P6({zoomLevel:TM(),pixelRatio:Ik(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:$,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:z,spaceWidth:o.width,middotWidth:O.width,wsmiddotWidth:H.width,maxDigitWidth:X},M)}}rS.INSTANCE=new rS;let lc=class zre extends MU{constructor(e,t,n=null,i){super(e,t),this.accessibilityService=i,this._elementSizeObserver=this._register(new Fre(n,t.dimension,()=>this._recomputeOptions())),this._register(rS.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(sU(s=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(qg?ou.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(qg?ou.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!qg&&!Oie&&(e+="no-user-select "),qg&&(e+="no-minimap-shadow "),zi&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:zre._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:dC||Bd,pixelRatio:Ik(),zoomLevel:TM(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return rS.INSTANCE.readConfiguration(e)}},se=class Iu{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return Iu.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Iu.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Iu.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Iu.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Iu.plusRange(this,e)}static plusRange(e,t){let n,i,s,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new Iu(n,i,s,o)}intersectRanges(e){return Iu.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,l=t.startColumn,u=t.endLineNumber,d=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),s>u?(s=u,o=d):s===u&&(o=Math.min(o,d)),n>s||n===s&&i>o?null:new Iu(n,i,s,o)}equalsRange(e){return Iu.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Iu.getEndPosition(this)}static getEndPosition(e){return new ze(e.endLineNumber,e.endColumn)}getStartPosition(){return Iu.getStartPosition(this)}static getStartPosition(e){return new ze(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Iu(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Iu(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Iu.collapseToStart(this)}static collapseToStart(e){return new Iu(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new Iu(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Iu(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const u=e.endLineNumber|0,d=t.endLineNumber|0;if(u===d){const h=e.endColumn|0,p=t.endColumn|0;return h-p}return u-d}return a-l}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}},un=class Ag extends se{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ag.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ag(this.startLineNumber,this.startColumn,e,t):new Ag(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new ze(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new ze(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ag(e,t,this.endLineNumber,this.endColumn):new Ag(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ag(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Ag(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Ag(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Ag(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,s){return s===0?new Ag(e,t,n,i):new Ag(n,i,e,t)}};class Ure{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function tr(r){return new Ure(r)}function la(r,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,o)}),this[s]}}var Y1e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},as;(function(r){r.Tap="-monaco-gesturetap",r.Change="-monaco-gesturechange",r.Start="-monaco-gesturestart",r.End="-monaco-gesturesend",r.Contextmenu="-monaco-gesturecontextmenu"})(as||(as={}));class Rr extends Je{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(St(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(St(document,"touchend",e=>this.onTouchEnd(e))),this._register(St(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Rr.isTouchDevice()?(Rr.INSTANCE||(Rr.INSTANCE=new Rr),Rr.INSTANCE.targets.push(e),{dispose:()=>{Rr.INSTANCE.targets=Rr.INSTANCE.targets.filter(t=>t!==e)}}):Je.None}static ignoreTarget(e){return Rr.isTouchDevice()?(Rr.INSTANCE||(Rr.INSTANCE=new Rr),Rr.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Rr.INSTANCE.ignoreTargets=Rr.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):Je.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};let o=this.newGestureEvent(as.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,s=e.changedTouches.length;i<s;i++){let o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<Rr.HOLD_DELAY&&Math.abs(a.initialPageX-ff(a.rollingPageX))<30&&Math.abs(a.initialPageY-ff(a.rollingPageY))<30){let u=this.newGestureEvent(as.Tap,a.initialTarget);u.pageX=ff(a.rollingPageX),u.pageY=ff(a.rollingPageY),this.dispatchEvent(u)}else if(l>=Rr.HOLD_DELAY&&Math.abs(a.initialPageX-ff(a.rollingPageX))<30&&Math.abs(a.initialPageY-ff(a.rollingPageY))<30){let u=this.newGestureEvent(as.Contextmenu,a.initialTarget);u.pageX=ff(a.rollingPageX),u.pageY=ff(a.rollingPageY),this.dispatchEvent(u)}else if(n===1){let u=ff(a.rollingPageX),d=ff(a.rollingPageY),h=ff(a.rollingTimestamps)-a.rollingTimestamps[0],p=u-a.rollingPageX[0],v=d-a.rollingPageY[0];const C=this.targets.filter(S=>a.initialTarget instanceof Node&&S.contains(a.initialTarget));this.inertia(C,t,Math.abs(p)/h,p>0?1:-1,u,Math.abs(v)/h,v>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(as.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===as.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Rr.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===as.Change||e.type===as.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,i,s,o,a,l){this.handle=xv(()=>{let u=Date.now(),d=u-t,h=0,p=0,v=!0;n+=Rr.SCROLL_FRICTION*d,o+=Rr.SCROLL_FRICTION*d,n>0&&(v=!1,h=i*n*d),o>0&&(v=!1,p=a*o*d);let C=this.newGestureEvent(as.Change);C.translationX=h,C.translationY=p,e.forEach(S=>S.dispatchEvent(C)),v||this.inertia(e,u,n,i,s+h,o,a,l+p)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}let o=this.activeTouches[s.identifier],a=this.newGestureEvent(as.Change,o.initialTarget);a.translationX=s.pageX-ff(o.rollingPageX),a.translationY=s.pageY-ff(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Rr.SCROLL_FRICTION=-.005;Rr.HOLD_DELAY=700;Rr.CLEAR_TAP_COUNT_TIME=400;Y1e([la],Rr,"isTouchDevice",null);function rD(r,e){let t=new yf(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class JS{constructor(){this._hooks=new Et,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,i,s){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=i,this._onStopCallback=s;const o=y6.getSameOriginWindowChain(),a=Lv?"pointermove":"mousemove",l="mouseup",u=o.map(h=>h.window.document),d=LC(e);d&&u.unshift(d);for(const h of u)this._hooks.add(pU(h,a,p=>{if(p.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(p)},(p,v)=>this._mouseMoveEventMerger(p,v))),this._hooks.add(St(h,l,p=>this.stopMonitoring(!0)));if(y6.hasDifferentOriginAncestor()){let h=o[o.length-1];this._hooks.add(St(h.window.document,"mouseout",p=>{new yf(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(St(h.window.document,"mouseover",p=>{new yf(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(St(h.window.document.body,"mouseleave",p=>{this.stopMonitoring(!0)}))}}}function fC(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}class ar{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=fC(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class um{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=fC(Math.max(Math.min(1,t),0),3),this.l=fC(Math.max(Math.min(1,n),0),3),this.a=fC(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=e.a,o=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,u=0;const d=(a+o)/2,h=o-a;if(h>0){switch(u=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),o){case t:l=(n-i)/h+(n<i?6:0);break;case n:l=(i-t)/h+2;break;case i:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new um(l,u,d,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:s}=e;let o,a,l;if(n===0)o=a=l=i;else{const u=i<.5?i*(1+n):i+n-i*n,d=2*i-u;o=um._hue2rgb(d,u,t+1/3),a=um._hue2rgb(d,u,t),l=um._hue2rgb(d,u,t-1/3)}return new ar(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}}class vv{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=fC(Math.max(Math.min(1,t),0),3),this.v=fC(Math.max(Math.min(1,n),0),3),this.a=fC(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),o=Math.min(t,n,i),a=s-o,l=s===0?0:a/s;let u;return a===0?u=0:s===t?u=((n-i)/a%6+6)%6:s===n?u=(i-t)/a+2:u=(t-n)/a+4,new vv(Math.round(u*60),l,s,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:s}=e,o=i*n,a=o*(1-Math.abs(t/60%2-1)),l=i-o;let[u,d,h]=[0,0,0];return t<60?(u=o,d=a):t<120?(u=a,d=o):t<180?(d=o,h=a):t<240?(d=a,h=o):t<300?(u=a,h=o):t<=360&&(u=o,h=a),u=Math.round((u+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new ar(u,d,h,s)}}class We{constructor(e){if(e)if(e instanceof ar)this.rgba=e;else if(e instanceof um)this._hsla=e,this.rgba=um.toRGBA(e);else if(e instanceof vv)this._hsva=e,this.rgba=vv.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return We.Format.CSS.parseHex(e)||We.red}get hsla(){return this._hsla?this._hsla:um.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:vv.fromRGBA(this.rgba)}equals(e){return!!e&&ar.equals(this.rgba,e.rgba)&&um.equals(this.hsla,e.hsla)&&vv.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=We._relativeLuminanceForComponent(this.rgba.r),t=We._relativeLuminanceForComponent(this.rgba.g),n=We._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return fC(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new We(new um(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new We(new um(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:s}=this.rgba;return new We(new ar(t,n,i,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new We(new ar(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=We.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-i)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(i-s)/i,e.darken(n)}}We.white=new We(new ar(255,255,255,1));We.black=new We(new ar(0,0,0,1));We.red=new We(new ar(255,0,0,1));We.blue=new We(new ar(0,0,255,1));We.cyan=new We(new ar(0,255,255,1));We.lightgrey=new We(new ar(211,211,211,1));We.transparent=new We(new ar(0,0,0,0));(function(r){(function(e){(function(t){function n(v){return v.rgba.a===1?`rgb(${v.rgba.r}, ${v.rgba.g}, ${v.rgba.b})`:r.Format.CSS.formatRGBA(v)}t.formatRGB=n;function i(v){return`rgba(${v.rgba.r}, ${v.rgba.g}, ${v.rgba.b}, ${+v.rgba.a.toFixed(2)})`}t.formatRGBA=i;function s(v){return v.hsla.a===1?`hsl(${v.hsla.h}, ${(v.hsla.s*100).toFixed(2)}%, ${(v.hsla.l*100).toFixed(2)}%)`:r.Format.CSS.formatHSLA(v)}t.formatHSL=s;function o(v){return`hsla(${v.hsla.h}, ${(v.hsla.s*100).toFixed(2)}%, ${(v.hsla.l*100).toFixed(2)}%, ${v.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(v){const C=v.toString(16);return C.length!==2?"0"+C:C}function l(v){return`#${a(v.rgba.r)}${a(v.rgba.g)}${a(v.rgba.b)}`}t.formatHex=l;function u(v,C=!1){return C&&v.rgba.a===1?r.Format.CSS.formatHex(v):`#${a(v.rgba.r)}${a(v.rgba.g)}${a(v.rgba.b)}${a(Math.round(v.rgba.a*255))}`}t.formatHexA=u;function d(v){return v.isOpaque()?r.Format.CSS.formatHex(v):r.Format.CSS.formatRGBA(v)}t.format=d;function h(v){const C=v.length;if(C===0||v.charCodeAt(0)!==35)return null;if(C===7){const S=16*p(v.charCodeAt(1))+p(v.charCodeAt(2)),E=16*p(v.charCodeAt(3))+p(v.charCodeAt(4)),k=16*p(v.charCodeAt(5))+p(v.charCodeAt(6));return new r(new ar(S,E,k,1))}if(C===9){const S=16*p(v.charCodeAt(1))+p(v.charCodeAt(2)),E=16*p(v.charCodeAt(3))+p(v.charCodeAt(4)),k=16*p(v.charCodeAt(5))+p(v.charCodeAt(6)),D=16*p(v.charCodeAt(7))+p(v.charCodeAt(8));return new r(new ar(S,E,k,D/255))}if(C===4){const S=p(v.charCodeAt(1)),E=p(v.charCodeAt(2)),k=p(v.charCodeAt(3));return new r(new ar(16*S+S,16*E+E,16*k+k))}if(C===5){const S=p(v.charCodeAt(1)),E=p(v.charCodeAt(2)),k=p(v.charCodeAt(3)),D=p(v.charCodeAt(4));return new r(new ar(16*S+S,16*E+E,16*k+k,(16*D+D)/255))}return null}t.parseHex=h;function p(v){switch(v){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(r.Format||(r.Format={}))})(We||(We={}));function $re(r){return`--vscode-${r.replace(".","-")}`}const jre={ColorContribution:"base.contributions.colors"};class Z1e{constructor(){this._onDidChangeSchema=new Ae,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,s){let o={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:s};this.colorsById[e]=o;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return ib(i,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let i=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return i!==s?i-s:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const s4=new Z1e;mo.add(jre.ColorContribution,s4);function Oe(r,e,t,n,i){return s4.registerColor(r,e,t,n,i)}const kn=Oe("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},L("foreground","Overall foreground color. This color is only used if not overridden by a component.")),X1e=Oe("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},L("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),q3=Oe("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},L("iconForeground","The default color for icons in the workbench.")),sS=Oe("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},L("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Ao=Oe("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},L("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Uc=Oe("contrastActiveBorder",{light:null,dark:null,hc:sS},L("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),o4=Oe("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},L("textLinkForeground","Foreground color for links in text.")),a4=Oe("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},L("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),qre=Oe("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:We.black},L("textCodeBlockBackground","Background color for code blocks in text.")),IC=Oe("widget.shadow",{dark:Jr(We.black,.36),light:Jr(We.black,.16),hc:null},L("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),RU=Oe("input.background",{dark:"#3C3C3C",light:We.white,hc:We.black},L("inputBoxBackground","Input box background.")),PU=Oe("input.foreground",{dark:kn,light:kn,hc:kn},L("inputBoxForeground","Input box foreground.")),FU=Oe("input.border",{dark:null,light:null,hc:Ao},L("inputBoxBorder","Input box border.")),F6=Oe("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Ao},L("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),B6=Oe("inputOption.activeBackground",{dark:Jr(sS,.4),light:Jr(sS,.2),hc:We.transparent},L("inputOption.activeBackground","Background hover color of options in input fields.")),W6=Oe("inputOption.activeForeground",{dark:We.white,light:We.black,hc:null},L("inputOption.activeForeground","Foreground color of activated options in input fields.")),Kre=Oe("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:We.black},L("inputValidationInfoBackground","Input validation background color for information severity.")),Gre=Oe("inputValidation.infoForeground",{dark:null,light:null,hc:null},L("inputValidationInfoForeground","Input validation foreground color for information severity.")),Yre=Oe("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Ao},L("inputValidationInfoBorder","Input validation border color for information severity.")),Zre=Oe("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:We.black},L("inputValidationWarningBackground","Input validation background color for warning severity.")),Xre=Oe("inputValidation.warningForeground",{dark:null,light:null,hc:null},L("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Qre=Oe("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Ao},L("inputValidationWarningBorder","Input validation border color for warning severity.")),Jre=Oe("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:We.black},L("inputValidationErrorBackground","Input validation background color for error severity.")),ese=Oe("inputValidation.errorForeground",{dark:null,light:null,hc:null},L("inputValidationErrorForeground","Input validation foreground color for error severity.")),tse=Oe("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Ao},L("inputValidationErrorBorder","Input validation border color for error severity.")),K3=Oe("dropdown.background",{dark:"#3C3C3C",light:We.white,hc:We.black},L("dropdownBackground","Dropdown background.")),TG=Oe("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:We.white},L("dropdownForeground","Dropdown foreground.")),Q1e=Oe("button.foreground",{dark:We.white,light:We.white,hc:We.white},L("buttonForeground","Button foreground color.")),V6=Oe("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},L("buttonBackground","Button background color.")),J1e=Oe("button.hoverBackground",{dark:lse(V6,.2),light:ase(V6,.2),hc:null},L("buttonHoverBackground","Button background color when hovering.")),JT=Oe("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:We.black},L("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),ek=Oe("badge.foreground",{dark:We.white,light:"#333",hc:We.white},L("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),sD=Oe("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},L("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),HE=Oe("scrollbarSlider.background",{dark:We.fromHex("#797979").transparent(.4),light:We.fromHex("#646464").transparent(.4),hc:Jr(Ao,.6)},L("scrollbarSliderBackground","Scrollbar slider background color.")),zE=Oe("scrollbarSlider.hoverBackground",{dark:We.fromHex("#646464").transparent(.7),light:We.fromHex("#646464").transparent(.7),hc:Jr(Ao,.8)},L("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),UE=Oe("scrollbarSlider.activeBackground",{dark:We.fromHex("#BFBFBF").transparent(.4),light:We.fromHex("#000000").transparent(.6),hc:Ao},L("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),eCe=Oe("progressBar.background",{dark:We.fromHex("#0E70C0"),light:We.fromHex("#0E70C0"),hc:Ao},L("progressBarBackground","Background color of the progress bar that can show for long running operations.")),tCe=Oe("editorError.background",{dark:null,light:null,hc:null},L("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),tk=Oe("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},L("editorError.foreground","Foreground color of error squigglies in the editor.")),nse=Oe("editorError.border",{dark:null,light:null,hc:We.fromHex("#E47777").transparent(.8)},L("errorBorder","Border color of error boxes in the editor.")),nCe=Oe("editorWarning.background",{dark:null,light:null,hc:null},L("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Db=Oe("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},L("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),l4=Oe("editorWarning.border",{dark:null,light:null,hc:We.fromHex("#FFCC00").transparent(.8)},L("warningBorder","Border color of warning boxes in the editor.")),iCe=Oe("editorInfo.background",{dark:null,light:null,hc:null},L("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Sm=Oe("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},L("editorInfo.foreground","Foreground color of info squigglies in the editor.")),BU=Oe("editorInfo.border",{dark:null,light:null,hc:We.fromHex("#3794FF").transparent(.8)},L("infoBorder","Border color of info boxes in the editor.")),rCe=Oe("editorHint.foreground",{dark:We.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},L("editorHint.foreground","Foreground color of hint squigglies in the editor.")),sCe=Oe("editorHint.border",{dark:null,light:null,hc:We.fromHex("#eeeeee").transparent(.8)},L("hintBorder","Border color of hint boxes in the editor.")),Df=Oe("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:We.black},L("editorBackground","Editor background color.")),g2=Oe("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:We.white},L("editorForeground","Editor default foreground color.")),Lm=Oe("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},L("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Ib=Oe("editorWidget.foreground",{dark:kn,light:kn,hc:kn},L("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),OO=Oe("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Ao},L("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),oCe=Oe("editorWidget.resizeBorder",{light:null,dark:null,hc:null},L("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),kG=Oe("quickInput.background",{dark:Lm,light:Lm,hc:Lm},L("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),aCe=Oe("quickInput.foreground",{dark:Ib,light:Ib,hc:Ib},L("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),lCe=Oe("quickInputTitle.background",{dark:new We(new ar(255,255,255,.105)),light:new We(new ar(0,0,0,.06)),hc:"#000000"},L("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),uCe=Oe("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:We.white},L("pickerGroupForeground","Quick picker color for grouping labels.")),cCe=Oe("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:We.white},L("pickerGroupBorder","Quick picker color for grouping borders.")),dCe=Oe("keybindingLabel.background",{dark:new We(new ar(128,128,128,.17)),light:new We(new ar(221,221,221,.4)),hc:We.transparent},L("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),hCe=Oe("keybindingLabel.foreground",{dark:We.fromHex("#CCCCCC"),light:We.fromHex("#555555"),hc:We.white},L("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),fCe=Oe("keybindingLabel.border",{dark:new We(new ar(51,51,51,.6)),light:new We(new ar(204,204,204,.4)),hc:new We(new ar(111,195,223))},L("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),gCe=Oe("keybindingLabel.bottomBorder",{dark:new We(new ar(68,68,68,.6)),light:new We(new ar(187,187,187,.4)),hc:new We(new ar(111,195,223))},L("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),gC=Oe("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},L("editorSelectionBackground","Color of the editor selection.")),pCe=Oe("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},L("editorSelectionForeground","Color of the selected text for high contrast.")),WU=Oe("editor.inactiveSelectionBackground",{light:Jr(gC,.5),dark:Jr(gC,.5),hc:Jr(gC,.5)},L("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),VU=Oe("editor.selectionHighlightBackground",{light:OG(gC,Df,.3,.6),dark:OG(gC,Df,.3,.6),hc:null},L("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),mCe=Oe("editor.selectionHighlightBorder",{light:null,dark:null,hc:Uc},L("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),_Ce=Oe("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},L("editorFindMatch","Color of the current search match.")),H6=Oe("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},L("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),vCe=Oe("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},L("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),bCe=Oe("editor.findMatchBorder",{light:null,dark:null,hc:Uc},L("editorFindMatchBorder","Border color of the current search match.")),CCe=Oe("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Uc},L("findMatchHighlightBorder","Border color of the other search matches.")),yCe=Oe("editor.findRangeHighlightBorder",{dark:null,light:null,hc:Jr(Uc,.4)},L("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),wCe=Oe("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},L("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),oS=Oe("editorHoverWidget.background",{light:Lm,dark:Lm,hc:Lm},L("hoverBackground","Background color of the editor hover.")),HU=Oe("editorHoverWidget.foreground",{light:Ib,dark:Ib,hc:Ib},L("hoverForeground","Foreground color of the editor hover.")),zU=Oe("editorHoverWidget.border",{light:OO,dark:OO,hc:OO},L("hoverBorder","Border color of the editor hover.")),SCe=Oe("editorHoverWidget.statusBarBackground",{dark:lse(oS,.2),light:ase(oS,.05),hc:Lm},L("statusBarBackground","Background color of the editor hover status bar.")),ise=Oe("editorLink.activeForeground",{dark:"#4E94CE",light:We.blue,hc:We.cyan},L("activeLinkForeground","Color of active links.")),Aw=Oe("editorInlayHint.foreground",{dark:Jr(ek,.8),light:Jr(ek,.8),hc:ek},L("editorInlayHintForeground","Foreground color of inline hints")),Ow=Oe("editorInlayHint.background",{dark:Jr(JT,.6),light:Jr(JT,.3),hc:JT},L("editorInlayHintBackground","Background color of inline hints")),LCe=Oe("editorInlayHint.typeForeground",{dark:Aw,light:Aw,hc:Aw},L("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),ECe=Oe("editorInlayHint.typeBackground",{dark:Ow,light:Ow,hc:Ow},L("editorInlayHintBackgroundTypes","Background color of inline hints for types")),xCe=Oe("editorInlayHint.parameterForeground",{dark:Aw,light:Aw,hc:Aw},L("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),DCe=Oe("editorInlayHint.parameterBackground",{dark:Ow,light:Ow,hc:Ow},L("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),ICe=Oe("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},L("editorLightBulbForeground","The color used for the lightbulb actions icon.")),TCe=Oe("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},L("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),z6=new We(new ar(155,185,85,.2)),U6=new We(new ar(255,0,0,.2)),rse=Oe("diffEditor.insertedTextBackground",{dark:z6,light:z6,hc:null},L("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),sse=Oe("diffEditor.removedTextBackground",{dark:U6,light:U6,hc:null},L("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),kCe=Oe("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},L("diffEditorInsertedOutline","Outline color for the text that got inserted.")),NCe=Oe("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},L("diffEditorRemovedOutline","Outline color for text that got removed.")),ACe=Oe("diffEditor.border",{dark:null,light:null,hc:Ao},L("diffEditorBorder","Border color between the two text editors.")),OCe=Oe("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},L("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),MCe=Oe("list.focusBackground",{dark:null,light:null,hc:null},L("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),RCe=Oe("list.focusForeground",{dark:null,light:null,hc:null},L("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),PCe=Oe("list.focusOutline",{dark:sS,light:sS,hc:Uc},L("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Mw=Oe("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},L("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),pC=Oe("list.activeSelectionForeground",{dark:We.white,light:We.white,hc:null},L("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),MO=Oe("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},L("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),FCe=Oe("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},L("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),BCe=Oe("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},L("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),WCe=Oe("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},L("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),VCe=Oe("list.inactiveFocusBackground",{dark:null,light:null,hc:null},L("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),HCe=Oe("list.inactiveFocusOutline",{dark:null,light:null,hc:null},L("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),zCe=Oe("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},L("listHoverBackground","List/Tree background when hovering over items using the mouse.")),UCe=Oe("list.hoverForeground",{dark:null,light:null,hc:null},L("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),$Ce=Oe("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},L("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),G3=Oe("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:sS},L("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),jCe=Oe("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:We.black},L("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),qCe=Oe("listFilterWidget.outline",{dark:We.transparent,light:We.transparent,hc:"#f38518"},L("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),KCe=Oe("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Ao},L("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),GCe=Oe("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},L("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),YCe=Oe("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},L("tableColumnsBorder","Table border color between columns.")),ZCe=Oe("tree.tableOddRowsBackground",{dark:Jr(kn,.04),light:Jr(kn,.04),hc:null},L("tableOddRowsBackgroundColor","Background color for odd table rows.")),NG=Oe("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,L("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),XCe=Oe("quickInputList.focusForeground",{dark:pC,light:pC,hc:pC},L("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),QCe=Oe("quickInputList.focusIconForeground",{dark:MO,light:MO,hc:MO},L("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),RO=Oe("quickInputList.focusBackground",{dark:Pk(NG,Mw),light:Pk(NG,Mw),hc:null},L("quickInput.listFocusBackground","Quick picker background color for the focused item.")),JCe=Oe("menu.border",{dark:null,light:null,hc:Ao},L("menuBorder","Border color of menus.")),eye=Oe("menu.foreground",{dark:TG,light:kn,hc:TG},L("menuForeground","Foreground color of menu items.")),tye=Oe("menu.background",{dark:K3,light:K3,hc:K3},L("menuBackground","Background color of menu items.")),nye=Oe("menu.selectionForeground",{dark:pC,light:pC,hc:pC},L("menuSelectionForeground","Foreground color of the selected menu item in menus.")),iye=Oe("menu.selectionBackground",{dark:Mw,light:Mw,hc:Mw},L("menuSelectionBackground","Background color of the selected menu item in menus.")),rye=Oe("menu.selectionBorder",{dark:null,light:null,hc:Uc},L("menuSelectionBorder","Border color of the selected menu item in menus.")),sye=Oe("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Ao},L("menuSeparatorBackground","Color of a separator menu item in menus.")),oye=Oe("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},L("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),u4=Oe("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},L("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),ose=Oe("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},L("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),aye=Oe("editorOverviewRuler.unicodeForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},L("overviewRulerUnicodeForeground","Overview ruler marker color for highlighted unicode characters. The color must not be opaque so as not to hide underlying decorations."),!0),UU=Oe("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},L("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),c4=Oe("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},L("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),AG=Oe("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},L("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),lye=Oe("minimap.errorHighlight",{dark:new We(new ar(255,18,18,.7)),light:new We(new ar(255,18,18,.7)),hc:new We(new ar(255,50,50,1))},L("minimapError","Minimap marker color for errors.")),uye=Oe("minimap.warningHighlight",{dark:Db,light:Db,hc:l4},L("overviewRuleWarning","Minimap marker color for warnings.")),cye=Oe("minimap.background",{dark:null,light:null,hc:null},L("minimapBackground","Minimap background color.")),dye=Oe("minimap.foregroundOpacity",{dark:We.fromHex("#000f"),light:We.fromHex("#000f"),hc:We.fromHex("#000f")},L("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),hye=Oe("minimap.unicodeHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},L("minimapUnicodeHighlight","Minimap marker color for highlighted unicode characters.")),fye=Oe("minimapSlider.background",{light:Jr(HE,.5),dark:Jr(HE,.5),hc:Jr(HE,.5)},L("minimapSliderBackground","Minimap slider background color.")),gye=Oe("minimapSlider.hoverBackground",{light:Jr(zE,.5),dark:Jr(zE,.5),hc:Jr(zE,.5)},L("minimapSliderHoverBackground","Minimap slider background color when hovering.")),pye=Oe("minimapSlider.activeBackground",{light:Jr(UE,.5),dark:Jr(UE,.5),hc:Jr(UE,.5)},L("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),mye=Oe("problemsErrorIcon.foreground",{dark:tk,light:tk,hc:tk},L("problemsErrorIconForeground","The color used for the problems error icon.")),_ye=Oe("problemsWarningIcon.foreground",{dark:Db,light:Db,hc:Db},L("problemsWarningIconForeground","The color used for the problems warning icon.")),vye=Oe("problemsInfoIcon.foreground",{dark:Sm,light:Sm,hc:Sm},L("problemsInfoIconForeground","The color used for the problems info icon."));function bye(r,e){var t,n,i;switch(r.op){case 0:return(t=ib(r.value,e))===null||t===void 0?void 0:t.darken(r.factor);case 1:return(n=ib(r.value,e))===null||n===void 0?void 0:n.lighten(r.factor);case 2:return(i=ib(r.value,e))===null||i===void 0?void 0:i.transparent(r.factor);case 3:for(const a of r.values){const l=ib(a,e);if(l)return l}return;case 5:return ib(e.defines(r.if)?r.then:r.else,e);case 4:const s=ib(r.value,e);if(!s)return;const o=ib(r.background,e);return o?s.isDarkerThan(o)?We.getLighterColor(s,o,r.factor).transparent(r.transparency):We.getDarkerColor(s,o,r.factor).transparent(r.transparency):s.transparent(r.factor*r.transparency);default:throw are()}}function ase(r,e){return{op:0,value:r,factor:e}}function lse(r,e){return{op:1,value:r,factor:e}}function Jr(r,e){return{op:2,value:r,factor:e}}function Pk(...r){return{op:3,values:r}}function OG(r,e,t,n){return{op:4,value:r,background:e,factor:t,transparency:n}}function ib(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?We.fromHex(r):e.getColor(r);if(r instanceof We)return r;if(typeof r=="object")return bye(r,e)}}const use="vscode://schemas/workbench-colors";let cse=mo.as(r4.JSONContribution);cse.registerSchema(use,s4.getColorSchema());const MG=new Qr(()=>cse.notifySchemaChanged(use),200);s4.onDidChangeSchema(()=>{MG.isScheduled()||MG.schedule()});class $U{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new dse(this.x-Lb.scrollX,this.y-Lb.scrollY)}}class dse{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new $U(this.clientX+Lb.scrollX,this.clientY+Lb.scrollY)}}class Cye{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}function hse(r){const e=su(r);return new Cye(e.left,e.top,e.width,e.height)}class aS extends yf{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new $U(this.posx,this.posy),this.editorPos=hse(t)}}class yye{constructor(e){this._editorViewDomNode=e}_create(e){return new aS(e,this._editorViewDomNode)}onContextMenu(e,t){return St(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return St(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return St(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return gU(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,i){return pU(e,"mousemove",t,(o,a)=>n(o,this._create(a)),i)}}class wye{constructor(e){this._editorViewDomNode=e}_create(e){return new aS(e,this._editorViewDomNode)}onPointerUp(e,t){return St(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return St(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return x0e(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,i){return pU(e,"pointermove",t,(o,a)=>n(o,this._create(a)),i)}}class Sye extends Je{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new JS),this._keydownListener=null}startMonitoring(e,t,n,i,s){this._keydownListener=ja(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const o=(a,l)=>n(a,new aS(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,o,i,a=>{this._keydownListener.dispose(),s(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class fse{constructor(e){this._editor=e,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Qr(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new Lye(t,`dyn-rule-${i}`,jP(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class Lye{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElement=kf(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const s=t[i];let o;typeof s=="object"?o=`var(${$re(s.id)})`:o=s;const a=Eye(i);n+=`
	${a}: ${o};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function Eye(r){return r.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class p2 extends Je{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){let s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class Ff extends p2{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Tv{static write(e,t){e instanceof Ure,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(i);for(let o=0;o<i;o++)s[o]=n[i-o-1];return s}}class xye{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Dye extends xye{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Iye{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class d4{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const s=e[n];t[n]=new d4(s.left,s.width)}return t}toString(){return`[${this.left},${this.width}]`}}class $E{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Tye{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class kye{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class Y3{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,s){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,i),o.getClientRects()}catch{return null}finally{this._detachRange(o,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort($E.compare);let t=[],n=0,i=e[0];for(let s=1,o=e.length;s<o;s++){const a=e[s];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];n[i]=new $E(Math.max(0,o.left-t),o.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,i,s,o,a){const u=e.children.length-1;if(0>u)return null;if(t=Math.min(u,Math.max(0,t)),i=Math.min(u,Math.max(0,i)),t===i&&n===s&&n===0&&!e.children[t].firstChild){const v=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(v,o)}t!==i&&i>0&&s===0&&(i--,s=1073741824);let d=e.children[t].firstChild,h=e.children[i].firstChild;if((!d||!h)&&(!d&&n===0&&t>0&&(d=e.children[t-1].firstChild,n=1073741824),!h&&s===0&&i>0&&(h=e.children[i-1].firstChild,s=1073741824)),!d||!h)return null;n=Math.min(d.textContent.length,Math.max(0,n)),s=Math.min(h.textContent.length,Math.max(0,s));const p=this._readClientRects(d,n,h,s,a);return this._createHorizontalRangesFromClientRects(p,o)}}class xh{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!xh._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,s=n+1,o=n-t,a=[];let l=0;for(const u of e)u.endColumn<=i||u.startColumn>=s||(a[l++]=new xh(Math.max(1,u.startColumn-i+1),Math.min(o+1,u.endColumn-i+1),u.className,u.type));return a}static filter(e,t,n,i){if(e.length===0)return[];let s=[],o=0;for(let a=0,l=e.length;a<l;a++){const u=e[a],d=u.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(u.type===0||u.type===3))continue;const h=d.startLineNumber===t?d.startColumn:n,p=d.endLineNumber===t?d.endColumn:i;s[o++]=new xh(h,p,u.inlineClassName,u.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=xh._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class RG{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}class QM{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new RG(t,this.stopOffsets[i],this.classNames.join(" "),QM._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new RG(t,e-1,this.classNames.join(" "),QM._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}class Nye{static normalize(e,t){if(t.length===0)return[];let n=[];const i=new QM;let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let u=l.startColumn,d=l.endColumn;const h=l.className,p=l.type===1?2:l.type===2?4:0;if(u>1){const S=e.charCodeAt(u-2);ba(S)&&u--}if(d>1){const S=e.charCodeAt(d-2);ba(S)&&d--}const v=u-1,C=d-2;s=i.consumeLowerThan(v,s,n),i.count===0&&(s=v),i.insert(C,h,p)}return i.consumeLowerThan(1073741824,s,n),n}}const PG=typeof Buffer<"u";let Z3;class h4{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return PG&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new h4(e)}toString(){return PG?this.buffer.toString():(Z3||(Z3=new TextDecoder),Z3.decode(this.buffer))}}function Aye(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function Oye(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function em(r,e){return r[e]*Math.pow(2,24)+r[e+1]*Math.pow(2,16)+r[e+2]*Math.pow(2,8)+r[e+3]}function tm(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function FG(r,e){return r[e]}function BG(r,e,t){r[t]=e}let X3;function gse(){return X3||(X3=new TextDecoder("UTF-16LE")),X3}let Q3;function Mye(){return Q3||(Q3=new TextDecoder("UTF-16BE")),Q3}let J3;function pse(){return J3||(J3=kie()?gse():Mye()),J3}const mse=typeof TextDecoder<"u";let lS,$6;mse?(lS=r=>new Pye(r),$6=Rye):(lS=r=>new Fye,$6=_se);function Rye(r,e,t){const n=new Uint16Array(r.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?_se(r,e,t):gse().decode(n)}function _se(r,e,t){let n=[],i=0;for(let s=0;s<t;s++){const o=Aye(r,e);e+=2,n[i++]=String.fromCharCode(o)}return n.join("")}class Pye{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return pse().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||ba(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class Fye{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class Ua{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class Bye{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class eL{constructor(e,t,n,i,s,o,a,l,u,d,h,p,v,C,S,E,k,D,O){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=u.sort(xh.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=p,this.stopRenderingLineAfter=S,this.renderWhitespace=E==="all"?4:E==="boundary"?1:E==="selection"?2:E==="trailing"?3:0,this.renderControlCharacters=k,this.fontLigatures=D,this.selectionsOnLine=O&&O.sort((X,$)=>X.startOffset<$.startOffset?-1:1);const H=Math.abs(C-p),V=Math.abs(v-p);H<V?(this.renderSpaceWidth=C,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=v,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&xh.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class jU{constructor(e,t){this.partIndex=e,this.charIndex=t}}class ev{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,i){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._absoluteOffsets[e-1]=i+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=ev.getPartIndex(t),i=ev.getCharIndex(t);return new jU(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let i=(e<<16|n<<0)>>>0,s=0,o=this.length-1;for(;s+1<o;){let S=s+o>>>1,E=this._data[S];if(E===i)return S;E>i?o=S:s=S}if(s===o)return s;let a=this._data[s],l=this._data[o];if(a===i)return s;if(l===i)return o;let u=ev.getPartIndex(a),d=ev.getCharIndex(a),h=ev.getPartIndex(l),p;u!==h?p=t:p=ev.getCharIndex(l);let v=n-d,C=p-n;return v<=C?s:o}}class j6{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function f4(r,e){if(r.lineContent.length===0){if(r.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,i=0;for(const o of r.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(i|=1,t++),o.type===2&&(i|=2,n++));e.appendASCIIString("</span>");const s=new ev(1,t+n);return s.setColumnInfo(1,t,0,0),new j6(s,!1,i)}return e.appendASCIIString("<span><span></span></span>"),new j6(new ev(0,0),!1,0)}return Kye(Hye(r),e)}class Wye{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}function g4(r){let e=lS(1e4),t=f4(r,e);return new Wye(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Vye{constructor(e,t,n,i,s,o,a,l,u,d,h,p,v,C,S){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=u,this.startVisibleColumn=d,this.containsRTL=h,this.spaceWidth=p,this.renderSpaceCharCode=v,this.renderWhitespace=C,this.renderControlCharacters=S}}function Hye(r){const e=r.lineContent;let t,n;r.stopRenderingLineAfter!==-1&&r.stopRenderingLineAfter<e.length?(t=!0,n=r.stopRenderingLineAfter):(t=!1,n=e.length);let i=zye(r.lineTokens,r.fauxIndentLength,n);r.renderControlCharacters&&!r.isBasicASCII&&(i=$ye(e,i)),(r.renderWhitespace===4||r.renderWhitespace===1||r.renderWhitespace===2&&r.selectionsOnLine||r.renderWhitespace===3)&&(i=jye(r,e,n,i));let s=0;if(r.lineDecorations.length>0){for(let o=0,a=r.lineDecorations.length;o<a;o++){const l=r.lineDecorations[o];l.type===3||l.type===1?s|=1:l.type===2&&(s|=2)}i=qye(e,n,i,r.lineDecorations)}return r.containsRTL||(i=Uye(e,i,!r.isBasicASCII||r.fontLigatures)),new Vye(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,e,n,t,i,s,r.fauxIndentLength,r.tabSize,r.startVisibleColumn,r.containsRTL,r.spaceWidth,r.renderSpaceCharCode,r.renderWhitespace,r.renderControlCharacters)}function zye(r,e,t){let n=[],i=0;e>0&&(n[i++]=new Ua(e,"",0));for(let s=0,o=r.getCount();s<o;s++){const a=r.getEndOffset(s);if(a<=e)continue;const l=r.getClassName(s);if(a>=t){n[i++]=new Ua(t,l,0);break}n[i++]=new Ua(a,l,0)}return n}function Uye(r,e,t){let n=0,i=[],s=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.endIndex;if(n+50<u){const d=l.type,h=l.metadata;let p=-1,v=n;for(let C=n;C<u;C++)r.charCodeAt(C)===32&&(p=C),p!==-1&&C-v>=50&&(i[s++]=new Ua(p+1,d,h),v=p+1,p=-1);v!==u&&(i[s++]=new Ua(u,d,h))}else i[s++]=l;n=u}else for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.endIndex;let d=u-n;if(d>50){const h=l.type,p=l.metadata,v=Math.ceil(d/50);for(let C=1;C<v;C++){let S=n+C*50;i[s++]=new Ua(S,h,p)}i[s++]=new Ua(u,h,p)}else i[s++]=l;n=u}return i}function vse(r){return r<32?r!==9:r===127||r>=8234&&r<=8238||r>=8294&&r<=8297||r>=8206&&r<=8207||r===1564}function $ye(r,e){let t=[],n=new Ua(0,"",0),i=0;for(const s of e){const o=s.endIndex;for(;i<o;i++){const a=r.charCodeAt(i);vse(a)&&(i>n.endIndex&&(n=new Ua(i,s.type,s.metadata),t.push(n)),n=new Ua(i+1,"mtkcontrol",s.metadata),t.push(n))}i>n.endIndex&&(n=new Ua(o,s.type,s.metadata),t.push(n))}return t}function jye(r,e,t,n){const i=r.continuesWithWrappedLine,s=r.fauxIndentLength,o=r.tabSize,a=r.startVisibleColumn,l=r.useMonospaceOptimizations,u=r.selectionsOnLine,d=r.renderWhitespace===1,h=r.renderWhitespace===3,p=r.renderSpaceWidth!==r.spaceWidth;let v=[],C=0,S=0,E=n[S].type,k=n[S].endIndex;const D=n.length;let O=!1,H=oc(e),V;H===-1?(O=!0,H=t,V=t):V=Cv(e);let X=!1,$=0,P=u&&u[$],z=a%o;for(let W=s;W<t;W++){const I=e.charCodeAt(W);P&&W>=P.endOffset&&($++,P=u&&u[$]);let R;if(W<H||W>V)R=!0;else if(I===9)R=!0;else if(I===32)if(d)if(X)R=!0;else{const G=W+1<t?e.charCodeAt(W+1):0;R=G===32||G===9}else R=!0;else R=!1;if(R&&u&&(R=!!P&&P.startOffset<=W&&P.endOffset>W),R&&h&&(R=O||W>V),X){if(!R||!l&&z>=o){if(p){const G=C>0?v[C-1].endIndex:s;for(let Z=G+1;Z<=W;Z++)v[C++]=new Ua(Z,"mtkw",1)}else v[C++]=new Ua(W,"mtkw",1);z=z%o}}else(W===k||R&&W>s)&&(v[C++]=new Ua(W,E,0),z=z%o);for(I===9?z=o:Iv(I)?z+=2:z++,X=R;W===k&&(S++,S<D);)E=n[S].type,k=n[S].endIndex}let M=!1;if(X)if(i&&d){let W=t>0?e.charCodeAt(t-1):0,I=t>1?e.charCodeAt(t-2):0;W===32&&I!==32&&I!==9||(M=!0)}else M=!0;if(M)if(p){const W=C>0?v[C-1].endIndex:s;for(let I=W+1;I<=t;I++)v[C++]=new Ua(I,"mtkw",1)}else v[C++]=new Ua(t,"mtkw",1);else v[C++]=new Ua(t,E,0);return v}function qye(r,e,t,n){n.sort(xh.compare);const i=Nye.normalize(r,n),s=i.length;let o=0,a=[],l=0,u=0;for(let h=0,p=t.length;h<p;h++){const v=t[h],C=v.endIndex,S=v.type,E=v.metadata;for(;o<s&&i[o].startOffset<C;){const k=i[o];if(k.startOffset>u&&(u=k.startOffset,a[l++]=new Ua(u,S,E)),k.endOffset+1<=C)u=k.endOffset+1,a[l++]=new Ua(u,S+" "+k.className,E|k.metadata),o++;else{u=C,a[l++]=new Ua(u,S+" "+k.className,E|k.metadata);break}}C>u&&(u=C,a[l++]=new Ua(u,S,E))}const d=t[t.length-1].endIndex;if(o<s&&i[o].startOffset===d)for(;o<s&&i[o].startOffset===d;){const h=i[o];a[l++]=new Ua(u,h.className,h.metadata),o++}return a}function Kye(r,e){const t=r.fontIsMonospace,n=r.canUseHalfwidthRightwardsArrow,i=r.containsForeignElements,s=r.lineContent,o=r.len,a=r.isOverflowing,l=r.parts,u=r.fauxIndentLength,d=r.tabSize,h=r.startVisibleColumn,p=r.containsRTL,v=r.spaceWidth,C=r.renderSpaceCharCode,S=r.renderWhitespace,E=r.renderControlCharacters,k=new ev(o+1,l.length);let D=!1,O=0,H=h,V=0,X=0,$=0,P=0;p?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let z=0,M=l.length;z<M;z++){P+=$;const W=l[z],I=W.endIndex,R=W.type,G=S!==0&&W.isWhitespace(),Z=G&&!t&&(R==="mtkw"||!i),ee=O===I&&W.isPseudoAfter();if(V=0,e.appendASCIIString('<span class="'),e.appendASCIIString(Z?"mtkz":R),e.appendASCII(34),G){let ne=0;{let ie=O,te=H;for(;ie<I;ie++){const K=(s.charCodeAt(ie)===9?d-te%d:1)|0;ne+=K,ie>=u&&(te+=K)}}for(Z&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(v*ne)),e.appendASCIIString('px"')),e.appendASCII(62);O<I;O++){k.setColumnInfo(O+1,z-X,V,P),X=0;const ie=s.charCodeAt(O);let te;if(ie===9){te=d-H%d|0,!n||te>1?e.write1(8594):e.write1(65515);for(let B=2;B<=te;B++)e.write1(160)}else te=1,e.write1(C);V+=te,O>=u&&(H+=te)}$=ne}else{let ne=0;for(e.appendASCII(62);O<I;O++){k.setColumnInfo(O+1,z-X,V,P),X=0;const ie=s.charCodeAt(O);let te=1,B=1;switch(ie){case 9:te=d-H%d,B=te;for(let K=1;K<=te;K++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:E?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Iv(ie)&&B++,E&&ie<32?e.write1(9216+ie):E&&ie===127?e.write1(9249):E&&vse(ie)?(e.appendASCIIString("[U+"),e.appendASCIIString(Gye(ie)),e.appendASCIIString("]"),te=8):e.write1(ie)}V+=te,ne+=te,O>=u&&(H+=B)}$=ne}ee?X++:X=0,O>=o&&!D&&W.isPseudoAfter()&&(D=!0,k.setColumnInfo(O+1,z,V,P)),e.appendASCIIString("</span>")}return D||k.setColumnInfo(o+1,l.length-1,V,P),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new j6(k,p,i)}function Gye(r){return r.toString(16).toUpperCase().padStart(4,"0")}const Yye=function(){return wm?!0:!(Hc||Bd||qg)}();let jE=!0;class WG{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class VG{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class ov{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=tr(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===Zg.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),o=this._options,a=xh.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let l=null;if(o.themeType===Zg.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const p=n.selections;for(const v of p){if(v.endLineNumber<e||v.startLineNumber>e)continue;const C=v.startLineNumber===e?v.startColumn:s.minColumn,S=v.endLineNumber===e?v.endColumn:s.maxColumn;C<S&&(o.themeType===Zg.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new xh(C,S,"inline-selected-text",0)):(l||(l=[]),l.push(new Bye(C-1,S-1))))}}const u=new eL(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Sh.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;i.appendASCIIString('<div style="top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;height:"),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString('px;" class="'),i.appendASCIIString(ov.CLASS_NAME),i.appendASCIIString('">');const d=f4(u,i);i.appendASCIIString("</div>");let h=null;return jE&&Yye&&s.isBasicASCII&&o.useMonospaceOptimizations&&d.containsForeignElements===0&&s.content.length<300&&u.lineTokens.getCount()<100&&(h=new CA(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping)),h||(h=Cse(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof CA:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof CA?this._renderedViewLine.monospaceAssumptionsAreValid():jE}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof CA&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;let o=!1;s!==-1&&t>s+1&&n>s+1&&(o=!0),s!==-1&&t>s+1&&(t=s+1),s!==-1&&n>s+1&&(n=s+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return a&&a.length>0?new kye(o,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}ov.CLASS_NAME="view-line";class CA{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return jE;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),jE=!1),jE}toSlowRenderedLine(){return Cse(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const s=this._getCharPosition(t),o=this._getCharPosition(n);return[new $E(s,o-s)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new jU(s,n),i)}}class bse{constructor(e,t,n,i,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,i);if(s===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,i);return o===-1?null:[new $E(s,o-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,s){if(n===i){const o=this._readPixelOffset(e,t,n,s);return o===-1?null:[new $E(o,0)]}else return this._readRawVisibleRangesForRange(e,n,i,s)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const s=this._getReadingTarget(e);return s.firstChild?s.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[n];if(s!==-1)return s;const o=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=Y3.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i.clientRectDeltaLeft,i.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const s=this._characterMapping.getDomPosition(n),o=Y3.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i.clientRectDeltaLeft,i.endNode);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getAbsoluteOffset(n),u=Math.round(this.input.spaceWidth*l);if(Math.abs(u-a)<=1)return u}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new $E(0,this.getWidth())];const s=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return Y3.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,o.partIndex,o.charIndex,i.clientRectDeltaLeft,i.endNode)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new jU(s,n),i)}}class Zye extends bse{_readVisibleRangesForRange(e,t,n,i,s){const o=super._readVisibleRangesForRange(e,t,n,i,s);if(!o||o.length===0||n===i||n===1&&i===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,s);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const Cse=function(){return dC?Xye:Qye}();function Xye(r,e,t,n,i){return new Zye(r,e,t,n,i)}function Qye(r,e,t,n,i){return new bse(r,e,t,n,i)}var Wd;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(Wd||(Wd={}));var Pd;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(Pd||(Pd={}));class PO{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Xg(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Fk{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var Rw;(function(r){r[r.Disabled=0]="Disabled",r[r.EnabledForActive=1]="EnabledForActive",r[r.Enabled=2]="Enabled"})(Rw||(Rw={}));class pE{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class q6{constructor(e,t){this.top=e,this.endColumn=t}}class e5{constructor(e,t,n,i,s,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class Jye{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function yA(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Dl{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${yA(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${yA(this.oldText)}")`:`(replace@${this.oldPosition} "${yA(this.oldText)}" with "${yA(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;tm(e,i,n),n+=4;for(let s=0;s<i;s++)Oye(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=em(e,t);return t+=4,$6(e,t,n)}writeSize(){return 4+4+Dl._writeStringSize(this.oldText)+Dl._writeStringSize(this.newText)}write(e,t){return tm(e,this.oldPosition,t),t+=4,tm(e,this.newPosition,t),t+=4,t=Dl._writeString(e,this.oldText,t),t=Dl._writeString(e,this.newText,t),t}static read(e,t,n){const i=em(e,t);t+=4;const s=em(e,t);t+=4;const o=Dl._readString(e,t);t+=Dl._writeStringSize(o);const a=Dl._readString(e,t);return t+=Dl._writeStringSize(a),n.push(new Dl(i,o,s,a)),t}}function ewe(r,e){return r===null||r.length===0?e:new Y_(r,e).compress()}class Y_{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[u,d]=Y_._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(u),i=d;continue}if(n.newPosition<i.oldPosition){const[u,d]=Y_._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(u),n=d;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[u,d]=Y_._splitPrev(n,i.oldLength);a=u,l=i,n=d,i=this._getCurr(++t)}else{const[u,d]=Y_._splitCurr(i,n.newLength);a=n,l=u,n=this._getPrev(++e),i=d}this._result[this._resultLen++]=new Dl(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=Y_._merge(this._result);return Y_._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=Y_._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Y_._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Dl(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Dl(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new Dl(e.oldPosition,e.oldText,e.newPosition,n),new Dl(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new Dl(e.oldPosition,n,e.newPosition,e.newText),new Dl(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,i=e[0];for(let s=1;s<e.length;s++){const o=e[s];i.oldEnd===o.oldPosition?i=new Dl(i.oldPosition,i.oldText+o.oldText,i.newPosition,i.newText+o.newText):(t[n++]=i,i=o)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}function twe(r){return r.replace(/[\\/]/g,oa.sep)}function nwe(r){return r.indexOf("/")===-1&&(r=twe(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function iwe(r,e,t,n=kw){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!wU(r,e))return!1;if(e.length===r.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,r.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),r.indexOf(e)===0}function rwe(r){return r>=65&&r<=90||r>=97&&r<=122}function swe(r){const e=dU(r);return Nl?r.length>3?!1:yse(e)&&(r.length===2||e.charCodeAt(2)===92):e===oa.sep}function yse(r,e){return(e!==void 0?e:Nl)?rwe(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function FO(r){return AM(r,!0)}class owe{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Ak(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return $n.joinPath(e,...t)}basenameOrAuthority(e){return Mf(e)||e.authority}basename(e){return oa.basename(e.path)}extname(e){return oa.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===wi.file?t=$n.file(Hie(FO(e))).path:(t=oa.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===wi.file?t=$n.file(dU(FO(e))).path:t=oa.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===wi.file){const n=$n.file(f0e(FO(e),t));return e.with({authority:n.authority,path:n.path})}return t=nwe(t),e.with({path:oa.resolve(e.path,t)})}}const Bu=new owe(()=>!1),wse=Bu.isEqual.bind(Bu),Sse=Bu.basenameOrAuthority.bind(Bu),Mf=Bu.basename.bind(Bu),awe=Bu.extname.bind(Bu),qU=Bu.dirname.bind(Bu),lwe=Bu.joinPath.bind(Bu),uwe=Bu.normalizePath.bind(Bu),HG=Bu.resolvePath.bind(Bu);var TC;(function(r){r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(r.META_DATA_MIME,s),n}r.parseMetaData=e})(TC||(TC={}));function HL(r){return r.toString()}class Wa{constructor(e,t,n,i,s,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=o,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),i=K6(e);return new Wa(n,n,i,i,t,t,[])}append(e,t,n,i,s){t.length>0&&(this.changes=ewe(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(tm(e,t?t.length:0,n),n+=4,t)for(const i of t)tm(e,i.selectionStartLineNumber,n),n+=4,tm(e,i.selectionStartColumn,n),n+=4,tm(e,i.positionLineNumber,n),n+=4,tm(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=em(e,t);t+=4;for(let s=0;s<i;s++){const o=em(e,t);t+=4;const a=em(e,t);t+=4;const l=em(e,t);t+=4;const u=em(e,t);t+=4,n.push(new un(o,a,l,u))}return t}serialize(){let e=10+Wa._writeSelectionsSize(this.beforeCursorState)+Wa._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;tm(t,this.beforeVersionId,n),n+=4,tm(t,this.afterVersionId,n),n+=4,BG(t,this.beforeEOL,n),n+=1,BG(t,this.afterEOL,n),n+=1,n=Wa._writeSelections(t,this.beforeCursorState,n),n=Wa._writeSelections(t,this.afterCursorState,n),tm(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=em(t,n);n+=4;const s=em(t,n);n+=4;const o=FG(t,n);n+=1;const a=FG(t,n);n+=1;const l=[];n=Wa._readSelections(t,n,l);const u=[];n=Wa._readSelections(t,n,u);const d=em(t,n);n+=4;const h=[];for(let p=0;p<d;p++)n=Dl.read(t,n,h);return new Wa(i,s,o,a,l,u,h)}}class Lse{constructor(e,t){this.model=e,this._data=Wa.create(e,t)}get type(){return 0}get resource(){return $n.isUri(this.model)?this.model:this.model.uri}get label(){return L("edit","Typing")}toString(){return(this._data instanceof Wa?this._data:Wa.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return($n.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Wa}append(e,t,n,i,s){this._data instanceof Wa&&this._data.append(e,t,n,i,s)}close(){this._data instanceof Wa&&(this._data=this._data.serialize())}open(){this._data instanceof Wa||(this._data=Wa.deserialize(this._data))}undo(){if($n.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Wa&&(this._data=this._data.serialize());const e=Wa.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if($n.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Wa&&(this._data=this._data.serialize());const e=Wa.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Wa&&(this._data=this._data.serialize()),this._data.byteLength+168}}class cwe{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const i=HL(n.resource);this._editStackElementsMap.set(i,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=HL(e);return this._editStackElementsMap.has(t)}setModel(e){const t=HL($n.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=HL(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,s){const o=HL(e.uri);this._editStackElementsMap.get(o).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=HL(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${Mf(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function K6(r){return r.getEOL()===`
`?0:1}function cb(r){return r?r instanceof Lse||r instanceof cwe:!1}class KU{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);cb(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);cb(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(cb(t)&&t.canAppend(this._model))return t;const n=new Lse(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],K6(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),s=this._model.applyEdits(t,!0),o=KU._computeCursorState(n,s),a=s.map((l,u)=>({index:u,textChange:l.textChange}));return a.sort((l,u)=>l.textChange.oldPosition===u.textChange.oldPosition?l.index-u.index:l.textChange.oldPosition-u.textChange.oldPosition),i.append(this._model,a.map(l=>l.textChange),K6(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Jn(n),null}}}class dwe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function hwe(r,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){let p=r.charCodeAt(s),v=t.charCodeAt(s);if(p!==v)break}let o=0,a=0;for(let p=s;p<e;p++)r.charCodeAt(p)===32?o++:a++;let l=0,u=0;for(let p=s;p<n;p++)t.charCodeAt(p)===32?l++:u++;if(o>0&&a>0||l>0&&u>0)return;let d=Math.abs(a-u),h=Math.abs(o-l);if(d===0){i.spacesDiff=h,h>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(i.looksLikeAlignment=!0);return}if(h%d===0){i.spacesDiff=h/d;return}}function zG(r,e,t){const n=Math.min(r.getLineCount(),1e4);let i=0,s=0,o="",a=0;const l=[2,4,6,8,3,5,7],u=8;let d=[0,0,0,0,0,0,0,0,0],h=new dwe;for(let C=1;C<=n;C++){let S=r.getLineLength(C),E=r.getLineContent(C);const k=S<=65536;let D=!1,O=0,H=0,V=0;for(let $=0,P=S;$<P;$++){let z=k?E.charCodeAt($):r.getLineCharCode(C,$);if(z===9)V++;else if(z===32)H++;else{D=!0,O=$;break}}if(!D||(V>0?i++:H>1&&s++,hwe(o,a,E,O,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;let X=h.spacesDiff;X<=u&&d[X]++,o=E,a=O}let p=t;i!==s&&(p=i<s);let v=e;if(p){let C=p?0:.1*n;l.forEach(S=>{let E=d[S];E>C&&(C=E,v=S)}),v===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(v=2)}return{insertSpaces:p,tabSize:v}}function Oc(r){return(r.metadata&1)>>>0}function rs(r,e){r.metadata=r.metadata&254|e<<0}function kl(r){return(r.metadata&2)>>>1===1}function Xr(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function Ese(r){return(r.metadata&4)>>>2===1}function UG(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function fwe(r){return(r.metadata&24)>>>3}function $G(r,e){r.metadata=r.metadata&231|e<<3}function gwe(r){return(r.metadata&32)>>>5===1}function jG(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}class xse{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,rs(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,UG(this,!1),$G(this,1),jG(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Xr(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;UG(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),$G(this,this.options.stickiness),jG(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const pi=new xse(null,0,0);pi.parent=pi;pi.left=pi;pi.right=pi;rs(pi,0);class t5{constructor(){this.root=pi,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s){return this.root===pi?[]:wwe(this,e,t,n,i,s)}search(e,t,n){return this.root===pi?[]:ywe(this,e,t,n)}collectNodesFromOwner(e){return bwe(this,e)}collectNodesPostOrder(){return Cwe(this)}insert(e){qG(this,e),this._normalizeDeltaIfNecessary()}delete(e){KG(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,o=n.end+i;n.setCachedOffsets(s,o,t)}acceptReplace(e,t,n,i){const s=_we(this,e,e+t);for(let o=0,a=s.length;o<a;o++){const l=s[o];KG(this,l)}this._normalizeDeltaIfNecessary(),vwe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=s.length;o<a;o++){const l=s[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,mwe(l,e,e+t,n,i),l.maxEnd=l.end,qG(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,pwe(this))}}function pwe(r){let e=r.root,t=0;for(;e!==pi;){if(e.left!==pi&&!kl(e.left)){e=e.left;continue}if(e.right!==pi&&!kl(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,kC(e),Xr(e,!0),Xr(e.left,!1),Xr(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Xr(r.root,!1)}function zL(r,e,t,n){return r<t?!0:r>t||n===1?!1:n===2?!0:e}function mwe(r,e,t,n,i){const s=fwe(r),o=s===0||s===2,a=s===1||s===2,l=t-e,u=n,d=Math.min(l,u),h=r.start;let p=!1;const v=r.end;let C=!1;e<=h&&v<=t&&gwe(r)&&(r.start=e,p=!0,r.end=e,C=!0);{const E=i?1:l>0?2:0;!p&&zL(h,o,e,E)&&(p=!0),!C&&zL(v,a,e,E)&&(C=!0)}if(d>0&&!i){const E=l>u?2:0;!p&&zL(h,o,e+d,E)&&(p=!0),!C&&zL(v,a,e+d,E)&&(C=!0)}{const E=i?1:0;!p&&zL(h,o,t,E)&&(r.start=e+u,p=!0),!C&&zL(v,a,t,E)&&(r.end=e+u,C=!0)}const S=u-l;p||(r.start=Math.max(0,h+S)),C||(r.end=Math.max(0,v+S)),r.start>r.end&&(r.end=r.start)}function _we(r,e,t){let n=r.root,i=0,s=0,o=0,a=0,l=[],u=0;for(;n!==pi;){if(kl(n)){Xr(n.left,!1),Xr(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!kl(n.left)){if(s=i+n.maxEnd,s<e){Xr(n,!0);continue}if(n.left!==pi){n=n.left;continue}}if(o=i+n.start,o>t){Xr(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[u++]=n),Xr(n,!0),n.right!==pi&&!kl(n.right)){i+=n.delta,n=n.right;continue}}return Xr(r.root,!1),l}function vwe(r,e,t,n){let i=r.root,s=0,o=0,a=0;const l=n-(t-e);for(;i!==pi;){if(kl(i)){Xr(i.left,!1),Xr(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),kC(i),i=i.parent;continue}if(!kl(i.left)){if(o=s+i.maxEnd,o<e){Xr(i,!0);continue}if(i.left!==pi){i=i.left;continue}}if(a=s+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0),Xr(i,!0);continue}if(Xr(i,!0),i.right!==pi&&!kl(i.right)){s+=i.delta,i=i.right;continue}}Xr(r.root,!1)}function bwe(r,e){let t=r.root,n=[],i=0;for(;t!==pi;){if(kl(t)){Xr(t.left,!1),Xr(t.right,!1),t=t.parent;continue}if(t.left!==pi&&!kl(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Xr(t,!0),t.right!==pi&&!kl(t.right)){t=t.right;continue}}return Xr(r.root,!1),n}function Cwe(r){let e=r.root,t=[],n=0;for(;e!==pi;){if(kl(e)){Xr(e.left,!1),Xr(e.right,!1),e=e.parent;continue}if(e.left!==pi&&!kl(e.left)){e=e.left;continue}if(e.right!==pi&&!kl(e.right)){e=e.right;continue}t[n++]=e,Xr(e,!0)}return Xr(r.root,!1),t}function ywe(r,e,t,n){let i=r.root,s=0,o=0,a=0,l=[],u=0;for(;i!==pi;){if(kl(i)){Xr(i.left,!1),Xr(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(i.left!==pi&&!kl(i.left)){i=i.left;continue}o=s+i.start,a=s+i.end,i.setCachedOffsets(o,a,n);let d=!0;if(e&&i.ownerId&&i.ownerId!==e&&(d=!1),t&&Ese(i)&&(d=!1),d&&(l[u++]=i),Xr(i,!0),i.right!==pi&&!kl(i.right)){s+=i.delta,i=i.right;continue}}return Xr(r.root,!1),l}function wwe(r,e,t,n,i,s){let o=r.root,a=0,l=0,u=0,d=0,h=[],p=0;for(;o!==pi;){if(kl(o)){Xr(o.left,!1),Xr(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!kl(o.left)){if(l=a+o.maxEnd,l<e){Xr(o,!0);continue}if(o.left!==pi){o=o.left;continue}}if(u=a+o.start,u>t){Xr(o,!0);continue}if(d=a+o.end,d>=e){o.setCachedOffsets(u,d,s);let v=!0;n&&o.ownerId&&o.ownerId!==n&&(v=!1),i&&Ese(o)&&(v=!1),v&&(h[p++]=o)}if(Xr(o,!0),o.right!==pi&&!kl(o.right)){a+=o.delta,o=o.right;continue}}return Xr(r.root,!1),h}function qG(r,e){if(r.root===pi)return e.parent=pi,e.left=pi,e.right=pi,rs(e,0),r.root=e,r.root;Swe(r,e),q1(e.parent);let t=e;for(;t!==r.root&&Oc(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Oc(n)===1?(rs(t.parent,0),rs(n,0),rs(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,nk(r,t)),rs(t.parent,0),rs(t.parent.parent,1),ik(r,t.parent.parent))}else{const n=t.parent.parent.left;Oc(n)===1?(rs(t.parent,0),rs(n,0),rs(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,ik(r,t)),rs(t.parent,0),rs(t.parent.parent,1),nk(r,t.parent.parent))}return rs(r.root,0),e}function Swe(r,e){let t=0,n=r.root;const i=e.start,s=e.end;for(;;)if(Ewe(i,s,n.start+t,n.end+t)<0)if(n.left===pi){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===pi){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=pi,e.right=pi,rs(e,1)}function KG(r,e){let t,n;if(e.left===pi?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===pi?(t=e.left,n=e):(n=Lwe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0)),n===r.root){r.root=t,rs(t,0),e.detach(),n5(),kC(t),r.root.parent=pi;return}let i=Oc(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,rs(n,Oc(e)),e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==pi&&(n.left.parent=n),n.right!==pi&&(n.right.parent=n)),e.detach(),i){q1(t.parent),n!==e&&(q1(n),q1(n.parent)),n5();return}q1(t),q1(t.parent),n!==e&&(q1(n),q1(n.parent));let s;for(;t!==r.root&&Oc(t)===0;)t===t.parent.left?(s=t.parent.right,Oc(s)===1&&(rs(s,0),rs(t.parent,1),nk(r,t.parent),s=t.parent.right),Oc(s.left)===0&&Oc(s.right)===0?(rs(s,1),t=t.parent):(Oc(s.right)===0&&(rs(s.left,0),rs(s,1),ik(r,s),s=t.parent.right),rs(s,Oc(t.parent)),rs(t.parent,0),rs(s.right,0),nk(r,t.parent),t=r.root)):(s=t.parent.left,Oc(s)===1&&(rs(s,0),rs(t.parent,1),ik(r,t.parent),s=t.parent.left),Oc(s.left)===0&&Oc(s.right)===0?(rs(s,1),t=t.parent):(Oc(s.left)===0&&(rs(s.right,0),rs(s,1),nk(r,s),s=t.parent.left),rs(s,Oc(t.parent)),rs(t.parent,0),rs(s.left,0),ik(r,t.parent),t=r.root));rs(t,0),n5()}function Lwe(r){for(;r.left!==pi;)r=r.left;return r}function n5(){pi.parent=pi,pi.delta=0,pi.start=0,pi.end=0}function nk(r,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==pi&&(t.left.parent=e),t.parent=e.parent,e.parent===pi?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,kC(e),kC(t)}function ik(r,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==pi&&(t.right.parent=e),t.parent=e.parent,e.parent===pi?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,kC(e),kC(t)}function Dse(r){let e=r.end;if(r.left!==pi){const t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==pi){const t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function kC(r){r.maxEnd=Dse(r)}function q1(r){for(;r!==pi;){const e=Dse(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function Ewe(r,e,t,n){return r===t?e-n:r-t}let G6=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Zn)return GU(this.right);let e=this;for(;e.parent!==Zn&&e.parent.left!==e;)e=e.parent;return e.parent===Zn?Zn:e.parent}prev(){if(this.left!==Zn)return Ise(this.left);let e=this;for(;e.parent!==Zn&&e.parent.right!==e;)e=e.parent;return e.parent===Zn?Zn:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};const Zn=new G6(null,0);Zn.parent=Zn;Zn.left=Zn;Zn.right=Zn;Zn.color=0;function GU(r){for(;r.left!==Zn;)r=r.left;return r}function Ise(r){for(;r.right!==Zn;)r=r.right;return r}function YU(r){return r===Zn?0:r.size_left+r.piece.length+YU(r.right)}function ZU(r){return r===Zn?0:r.lf_left+r.piece.lineFeedCnt+ZU(r.right)}function i5(){Zn.parent=Zn}function rk(r,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Zn&&(t.left.parent=e),t.parent=e.parent,e.parent===Zn?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function sk(r,e){let t=e.left;e.left=t.right,t.right!==Zn&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Zn?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function wA(r,e){let t,n;if(e.left===Zn?(n=e,t=n.right):e.right===Zn?(n=e,t=n.left):(n=GU(e.right),t=n.right),n===r.root){r.root=t,t.color=0,e.detach(),i5(),r.root.parent=Zn;return}let i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,OT(r,t)):(n.parent===e?t.parent=n:t.parent=n.parent,OT(r,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Zn&&(n.left.parent=n),n.right!==Zn&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,OT(r,n)),e.detach(),t.parent.left===t){let o=YU(t),a=ZU(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){let l=o-t.parent.size_left,u=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,nb(r,t.parent,l,u)}}if(OT(r,t.parent),i){i5();return}let s;for(;t!==r.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,rk(r,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,sk(r,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,rk(r,t.parent),t=r.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,sk(r,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,rk(r,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,sk(r,t.parent),t=r.root));t.color=0,i5()}function GG(r,e){for(OT(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,rk(r,e)),e.parent.color=0,e.parent.parent.color=1,sk(r,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,sk(r,e)),e.parent.color=0,e.parent.parent.color=1,rk(r,e.parent.parent))}r.root.color=0}function nb(r,e,t,n){for(;e!==r.root&&e!==Zn;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function OT(r,e){let t=0,n=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=YU(e.left)-e.size_left,n=ZU(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==r.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}function JM(r){return r<0?0:r>255?255:r|0}function UL(r){return r<0?0:r>4294967295?4294967295:r|0}class oD{constructor(e){let t=JM(e);this._defaultValue=t,this._asciiMap=oD._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=JM(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class mE{constructor(){this._actual=new oD(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class xwe extends oD{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function Dwe(r){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=r(t)),e[t])}const Rf=Dwe(r=>new xwe(r)),Iwe=999;class tw{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Twe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=cre(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new kwe(t,this.wordSeparators?Rf(this.wordSeparators):null,n?this.searchString:null)}}function Twe(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++)if(r.charCodeAt(e)===92){if(e++,e>=t)break;const i=r.charCodeAt(e);if(i===110||i===114||i===87)return!0}return!1}class kwe{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function aw(r,e,t){if(!t)return new Fk(r,null);let n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i];return new Fk(r,n)}class YG{constructor(e){let t=[],n=0;for(let i=0,s=e.length;i<s;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}class SA{static findMatches(e,t,n,i,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new _E(o.wordSeparators,o.regex),i,s):this._doFindMatchesLineByLine(e,n,o,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,o){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let u;if(i){let v=i.findLineFeedCountBeforeOffset(s+o.length)-l;u=a+o.length+v}else u=a+o.length;const d=e.getPositionAt(a),h=e.getPositionAt(u);return new se(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,i,s){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new YG(a):null,u=[];let d=0,h;for(n.reset(0);h=n.next(a);)if(u[d++]=aw(this._getMultilineMatchRange(e,o,a,l,h.index,h[0]),h,i),d>=s)return u;return u}static _doFindMatchesLineByLine(e,t,n,i,s){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,u,t.startLineNumber,t.startColumn-1,a,o,i,s),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,i,s);for(let u=t.startLineNumber+1;u<t.endLineNumber&&a<s;u++)a=this._findMatchesInLine(n,e.getLineContent(u),u,0,a,o,i,s);if(a<s){const u=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,u,t.endLineNumber,0,a,o,i,s)}return o}static _findMatchesInLine(e,t,n,i,s,o,a,l){const u=e.wordSeparators;if(!a&&e.simpleSearch){const p=e.simpleSearch,v=p.length,C=t.length;let S=-v;for(;(S=t.indexOf(p,S+v))!==-1;)if((!u||XU(u,t,C,S,v))&&(o[s++]=new Fk(new se(n,S+1+i,n,S+1+v+i),null),s>=l))return s;return s}const d=new _E(e.wordSeparators,e.regex);let h;d.reset(0);do if(h=d.next(t),h&&(o[s++]=aw(new se(n,h.index+1+i,n,h.index+1+h[0].length+i),h,a),s>=l))return s;while(h);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const o=new _E(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,o,i):this._doFindNextMatchLineByLine(e,n,o,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new ze(t.lineNumber,1),o=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new se(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),u=e.getEOL()===`\r
`?new YG(l):null;n.reset(t.column-1);let d=n.next(l);return d?aw(this._getMultilineMatchRange(e,o,l,u,d.index,d[0]),d,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new ze(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,i);if(l)return l;for(let u=1;u<=s;u++){const d=(o+u-1)%s,h=e.getLineContent(d+1),p=this._findFirstMatchInLine(n,h,d+1,1,i);if(p)return p}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const o=e.next(t);return o?aw(new se(n,o.index+1,n,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const o=new _E(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,i):this._doFindPreviousMatchLineByLine(e,n,o,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new se(1,1,t.lineNumber,t.column),n,i,10*Iwe);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new ze(o,e.getLineMaxColumn(o)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,i);if(l)return l;for(let u=1;u<=s;u++){const d=(s+o-u-1)%s,h=e.getLineContent(d+1),p=this._findLastMatchInLine(n,h,d+1,i);if(p)return p}return null}static _findLastMatchInLine(e,t,n,i){let s=null,o;for(e.reset(0);o=e.next(t);)s=aw(new se(n,o.index+1,n,o.index+1+o[0].length),o,i);return s}}function Nwe(r,e,t,n,i){if(n===0)return!0;const s=e.charCodeAt(n-1);if(r.get(s)!==0||s===13||s===10)return!0;if(i>0){const o=e.charCodeAt(n);if(r.get(o)!==0)return!0}return!1}function Awe(r,e,t,n,i){if(n+i===t)return!0;const s=e.charCodeAt(n+i);if(r.get(s)!==0||s===13||s===10)return!0;if(i>0){const o=e.charCodeAt(n+i-1);if(r.get(o)!==0)return!0}return!1}function XU(r,e,t,n,i){return Nwe(r,e,t,n,i)&&Awe(r,e,t,n,i)}class _E{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){yw(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||XU(this._wordSeparators,e,t,i,s))return n}while(n);return null}}const G0=65535;function Tse(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}class Owe{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}}function rb(r,e=!0){let t=[0],n=1;for(let i=0,s=r.length;i<s;i++){const o=r.charCodeAt(i);o===13?i+1<s&&r.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:o===10&&(t[n++]=i+1)}return e?Tse(t):t}function Mwe(r,e){r.length=0,r[0]=0;let t=1,n=0,i=0,s=0,o=!0;for(let l=0,u=e.length;l<u;l++){const d=e.charCodeAt(l);d===13?l+1<u&&e.charCodeAt(l+1)===10?(s++,r[t++]=l+2,l++):(n++,r[t++]=l+1):d===10?(i++,r[t++]=l+1):o&&d!==9&&(d<32||d>126)&&(o=!1)}const a=new Owe(Tse(r),n,i,s,o);return r.length=0,a}class xd{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}}class lw{constructor(e,t){this.buffer=e,this.lineStarts=t}}class Rwe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Zn&&e.iterate(e.root,n=>(n!==Zn&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Pwe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let s=n[i];if(s.node.parent===null||s.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){let i=[];for(const s of n)s!==null&&i.push(s);this._cache=i}}}class Fwe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new lw("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Zn,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=rb(e[s].buffer));let a=new xd(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,a)}this._searchCache=new Pwe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=G0,n=t-Math.floor(t/3),i=n*2,s="",o=0,a=[];if(this.iterate(this.root,l=>{let u=this.getNodeContent(l),d=u.length;if(o<=n||o+d<i)return s+=u,o+=d,!0;let h=s.replace(/\r\n|\r|\n/g,e);return a.push(new lw(h,rb(h))),s=u,o=d,!0}),o>0){let l=s.replace(/\r\n|\r|\n/g,e);a.push(new lw(l,rb(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new Rwe(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Zn;)if(i.left!==Zn&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;let s=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==Zn;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){let o=this.getOffsetAt(n+1,1),a=i-o;return new ze(n+1,a+1)}return new ze(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Zn){let s=this.getOffsetAt(n+1,1),o=i-e-s;return new ze(n+1,o+1)}else t=t.right;return new ze(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,u=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(u+e.remainder,u+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),o=i.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==Zn;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,s=>{if(s===Zn)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,u=this._buffers[o.bufferIndex].lineStarts,d=o.start.line,h=o.end.line;let p=u[d]+o.start.column;if(i&&(l.charCodeAt(p)===10&&(p++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(p+a-1)===13?(i=!0,n+=l.substr(p,a-1)):n+=l.substr(p,a),!0;n+=this._EOLNormalized?l.substring(p,Math.max(p,u[d+1]-this._EOLLength)):l.substring(p,u[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let v=d+1;v<h;v++)n=this._EOLNormalized?l.substring(u[v],u[v+1]-this._EOLLength):l.substring(u[v],u[v+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(u[h]+o.end.column-1)===13?(i=!0,o.end.column===0?t--:n=l.substr(u[h],o.end.column-1)):n=l.substr(u[h],o.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,o,a,l,u,d,h){let p=this._buffers[e.piece.bufferIndex],v=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),C=this.offsetInBuffer(e.piece.bufferIndex,s),S=this.offsetInBuffer(e.piece.bufferIndex,o),E,k={line:0,column:0},D,O;t._wordSeparators?(D=p.buffer.substring(C,S),O=H=>H+C,t.reset(0)):(D=p.buffer,O=H=>H,t.reset(C));do if(E=t.next(D),E){if(O(E.index)>=S)return d;this.positionInBuffer(e,O(E.index)-v,k);let H=this.getLineFeedCnt(e.piece.bufferIndex,s,k),V=k.line===s.line?k.column-s.column+i:k.column+1,X=V+E[0].length;if(h[d++]=aw(new se(n+H,V,n+H,X),E,l),O(E.index)+E[0].length>=S||d>=u)return d}while(E);return d}findMatchesLineByLine(e,t,n,i){const s=[];let o=0;const a=new _E(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let u=this.nodeAt2(e.endLineNumber,e.endColumn);if(u===null)return[];let d=this.positionInBuffer(l.node,l.remainder),h=this.positionInBuffer(u.node,u.remainder);if(l.node===u.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,n,i,o,s),s;let p=e.startLineNumber,v=l.node;for(;v!==u.node;){let S=this.getLineFeedCnt(v.piece.bufferIndex,d,v.piece.end);if(S>=1){let k=this._buffers[v.piece.bufferIndex].lineStarts,D=this.offsetInBuffer(v.piece.bufferIndex,v.piece.start),O=k[d.line+S],H=p===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(v,a,p,H,d,this.positionInBuffer(v,O-D),t,n,i,o,s),o>=i)return s;p+=S}let E=p===e.startLineNumber?e.startColumn-1:0;if(p===e.endLineNumber){const k=this.getLineContent(p).substring(E,e.endColumn-1);return o=this._findMatchesInLine(t,a,k,e.endLineNumber,E,o,s,n,i),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(p).substr(E),p,E,o,s,n,i),o>=i)return s;p++,l=this.nodeAt2(p,1),v=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(p===e.endLineNumber){let S=p===e.startLineNumber?e.startColumn-1:0;const E=this.getLineContent(p).substring(S,e.endColumn-1);return o=this._findMatchesInLine(t,a,E,e.endLineNumber,S,o,s,n,i),s}let C=p===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(u.node,a,p,C,d,h,t,n,i,o,s),s}_findMatchesInLine(e,t,n,i,s,o,a,l,u){const d=e.wordSeparators;if(!l&&e.simpleSearch){const p=e.simpleSearch,v=p.length,C=n.length;let S=-v;for(;(S=n.indexOf(p,S+v))!==-1;)if((!d||XU(d,n,C,S,v))&&(a[o++]=new Fk(new se(i,S+1+s,i,S+1+v+s),null),o>=u))return o;return o}let h;t.reset(0);do if(h=t.next(n),h&&(a[o++]=aw(new se(i,h.index+1+s,i,h.index+1+h[0].length+s),h,l),o>=u))return o;while(h);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Zn){let{node:i,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,u=this.positionInBuffer(i,s);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<G0){this.appendToNode(i,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(o+i.piece.length>e){let d=[],h=new xd(a.bufferIndex,u,a.end,this.getLineFeedCnt(a.bufferIndex,u,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,u));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,s)===10){let S={line:h.start.line+1,column:0};h=new xd(h.bufferIndex,S,h.end,this.getLineFeedCnt(h.bufferIndex,S,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,s-1)===13){let S=this.positionInBuffer(i,s-1);this.deleteNodeTail(i,S),t="\r"+t,i.piece.length===0&&d.push(i)}else this.deleteNodeTail(i,u);else this.deleteNodeTail(i,u);let p=this.createNewPieces(t);h.length>0&&this.rbInsertRight(i,h);let v=i;for(let C=0;C<p.length;C++)v=this.rbInsertRight(v,p[C]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,i)}else{let i=this.createNewPieces(t),s=this.rbInsertLeft(null,i[0]);for(let o=1;o<i.length;o++)s=this.rbInsertRight(s,i[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Zn)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,o=i.node;if(s===o){let p=this.positionInBuffer(s,n.remainder),v=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){let C=s.next();wA(this,s),this.validateCRLFWithPrevNode(C),this.computeBufferMetadata();return}this.deleteNodeHead(s,v),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,p),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,p,v),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);let u=this.positionInBuffer(o,i.remainder);this.deleteNodeHead(o,u),o.piece.length===0&&a.push(o);let d=s.next();for(let p=d;p!==Zn&&p!==o;p=p.next())a.push(p);let h=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let o=t.piece,a={line:o.start.line+1,column:0},l=new xd(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,nb(this,t,-1,-1),t.piece.length===0&&n.push(t)}let i=this.createNewPieces(e),s=this.rbInsertLeft(t,i[i.length-1]);for(let o=i.length-2;o>=0;o--)s=this.rbInsertLeft(s,i[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),s=i;for(let o=1;o<n.length;o++)s=this.rbInsertRight(s,n[o]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,l=o[i.start.line]+i.start.column+t,u=i.start.line,d=i.end.line,h=0,p=0,v=0;for(;u<=d&&(h=u+(d-u)/2|0,v=o[h],h!==d);)if(p=o[h+1],l<v)d=h-1;else if(l>=p)u=h+1;else break;return n?(n.line=h,n.column=l-v,null):{line:h,column:l-v}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let s=i[n.line+1],o=i[n.line]+n.column;if(s>o+1)return n.line-t.line;let a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)wA(this,e[t])}createNewPieces(e){if(e.length>G0){let d=[];for(;e.length>G0;){const p=e.charCodeAt(G0-1);let v;p===13||p>=55296&&p<=56319?(v=e.substring(0,G0-1),e=e.substring(G0-1)):(v=e.substring(0,G0),e=e.substring(G0));let C=rb(v);d.push(new xd(this._buffers.length,{line:0,column:0},{line:C.length-1,column:v.length-C[C.length-1]},C.length-1,v.length)),this._buffers.push(new lw(v,C))}let h=rb(e);return d.push(new xd(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new lw(e,h)),d}let t=this._buffers[0].buffer.length;const n=rb(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],l={line:o,column:a},u=new xd(0,i,l,this.getLineFeedCnt(0,i,l),s-t);return this._lastChangeBufferPos=l,[u]}getLineRawContent(e,t=0){let n=this.root,i="",s=this._searchCache.get2(e);if(s){n=s.node;let o=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+o,l+n.piece.length);else{let u=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(l+o,l+u-t)}}else{let o=0;const a=e;for(;n!==Zn;)if(n.left!==Zn&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),u=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(h+l,h+u-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),u=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=u.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Zn;){let o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=o.substring(l,l+a-t),i}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=o.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Zn;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),u=l-i,d=a-s,h=n.length+d;e.piece=new xd(n.bufferIndex,n.start,o,l,h),nb(this,e,d,u)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),u=a-i,d=s-l,h=n.length+d;e.piece=new xd(n.bufferIndex,o,n.end,a,h),nb(this,e,d,u)}shrinkNode(e,t,n){const i=e.piece,s=i.start,o=i.end,a=i.length,l=i.lineFeedCnt,u=t,d=this.getLineFeedCnt(i.bufferIndex,i.start,u),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new xd(i.bufferIndex,i.start,u,d,h),nb(this,e,h-a,d-l);let p=new xd(i.bufferIndex,n,o,this.getLineFeedCnt(i.bufferIndex,n,o),this.offsetInBuffer(i.bufferIndex,o)-this.offsetInBuffer(i.bufferIndex,n)),v=this.rbInsertRight(e,p);this.validateCRLFWithPrevNode(v)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=rb(t,!1);for(let v=0;v<s.length;v++)s[v]+=i;if(n){let v=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-v}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},u=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),p=h-d;e.piece=new xd(e.piece.bufferIndex,e.piece.start,l,h,u),this._lastChangeBufferPos=l,nb(this,e,t.length,p)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Zn;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;let s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Zn;)if(n.left!==Zn&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,o),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Zn;){if(n.piece.lineFeedCnt>0){let s=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(n.piece.length>=t-1){let s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Zn||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;return i===n.length-1||n[i+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Zn||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],i=this._buffers[e.piece.bufferIndex].lineStarts,s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new xd(e.piece.bufferIndex,e.piece.start,s,a,o),nb(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0};const u=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new xd(t.piece.bufferIndex,l,t.piece.end,d,u),nb(this,t,-1,-1),t.piece.length===0&&n.push(t);let h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let p=0;p<n.length;p++)wA(this,n[p])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)wA(this,n);else{const i=n.piece,s={line:i.start.line+1,column:0},o=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,s,i.end);n.piece=new xd(i.bufferIndex,s,i.end,a,o),nb(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Zn)return t(Zn);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Zn)return"";let t=this._buffers[e.piece.bufferIndex],n,i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),o=this.offsetInBuffer(i.bufferIndex,i.end);return n=t.buffer.substring(s,o),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){let n=new G6(t,1);if(n.left=Zn,n.right=Zn,n.parent=Zn,n.size_left=0,n.lf_left=0,this.root===Zn)this.root=n,n.color=0;else if(e.right===Zn)e.right=n,n.parent=e;else{let s=GU(e.right);s.left=n,n.parent=s}return GG(this,n),n}rbInsertLeft(e,t){let n=new G6(t,1);if(n.left=Zn,n.right=Zn,n.parent=Zn,n.size_left=0,n.lf_left=0,this.root===Zn)this.root=n,n.color=0;else if(e.left===Zn)e.left=n,n.parent=e;else{let i=Ise(e.left);i.right=n,n.parent=i}return GG(this,n),n}}function kse(r){return p4(r,0)}function p4(r,e){switch(typeof r){case"object":return r===null?yb(349,e):Array.isArray(r)?Wwe(r,e):Vwe(r,e);case"string":return QU(r,e);case"boolean":return Bwe(r,e);case"number":return yb(r,e);case"undefined":return yb(937,e);default:return yb(617,e)}}function yb(r,e){return(e<<5)-e+r|0}function Bwe(r,e){return yb(r?433:863,e)}function QU(r,e){e=yb(149417,e);for(let t=0,n=r.length;t<n;t++)e=yb(r.charCodeAt(t),e);return e}function Wwe(r,e){return e=yb(104579,e),r.reduce((t,n)=>p4(n,t),e)}function Vwe(r,e){return e=yb(181387,e),Object.keys(r).sort().reduce((t,n)=>(t=QU(n,t),p4(r[n],t)),e)}function r5(r,e,t=32){const n=t-e,i=~((1<<n)-1);return(r<<e|(i&r)>>>n)>>>0}function ZG(r,e=0,t=r.byteLength,n=0){for(let i=0;i<t;i++)r[e+i]=n}function Hwe(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function aT(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):Hwe((r>>>0).toString(16),e/4)}class m4{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(ba(o))if(a+1<t){const u=e.charCodeAt(a+1);dx(u)?(a++,l=SU(o,u)):l=65533}else{s=o;break}else dx(o)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),aT(this._h0)+aT(this._h1)+aT(this._h2)+aT(this._h3)+aT(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,ZG(this._buff,this._buffLen),this._buffLen>56&&(this._step(),ZG(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=m4._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,r5(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,s=this._h2,o=this._h3,a=this._h4,l,u,d;for(let h=0;h<80;h++)h<20?(l=i&s|~i&o,u=1518500249):h<40?(l=i^s^o,u=1859775393):h<60?(l=i&s|i&o|s&o,u=2400959708):(l=i^s^o,u=3395469782),d=r5(n,5)+l+a+u+e.getUint32(h*4,!1)&4294967295,a=o,o=s,s=r5(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}m4._bigBlock32=new DataView(new ArrayBuffer(320));var XG,QG;class zwe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class Uwe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?yU(e,this._value,0,e.length,this._from,this._to):h2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class $we{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?yU(e,this._value,0,e.length,this._from,this._to):h2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class jwe{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new $we(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return k6(e,this._value.scheme);if(this._states[this._stateIdx]===2)return k6(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Ak(e,this._value.query);if(this._states[this._stateIdx]===5)return Ak(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class LA{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class qE{constructor(e){this._iter=e}static forUris(e=()=>!1){return new qE(new jwe(e))}static forStrings(){return new qE(new zwe)}static forConfigKeys(){return new qE(new Uwe)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new LA,this._root.segment=n.value());const s=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new LA,i.left.segment=n.value()),s.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new LA,i.right.segment=n.value()),s.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new LA,i.mid.segment=n.value()),s.push([0,i]),i=i.mid;else break}const o=i.value;i.value=t,i.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const u=l.balanceFactor();if(u<-1||u>1){const d=s[a][0],h=s[a+1][0];if(d===1&&h===1)s[a][1]=l.rotateLeft();else if(d===-1&&h===-1)s[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),s=[];let o=this._root;for(;o;){const a=i.cmp(o.segment);if(a>0)s.push([-1,o]),o=o.left;else if(a<0)s.push([1,o]),o=o.right;else if(i.hasNext())i.next(),s.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right),{key:l,value:u,segment:d}=a;this._delete(a.key,!1),o.key=l,o.value=u,o.segment=d}else{const a=(n=o.left)!==null&&n!==void 0?n:o.right;if(s.length>0){const[l,u]=s[s.length-1];switch(l){case-1:u.left=a;break;case 0:u.mid=a;break;case 1:u.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const u=l.balanceFactor();if(u>1?(l.right.balanceFactor()>=0||(l.right=s[a+1][1]=s[a+1][1].rotateRight()),s[a][1]=l.rotateLeft()):u<-1&&(l.left.balanceFactor()<=0||(l.left=s[a+1][1]=s[a+1][1].rotateLeft()),s[a][1]=l.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class qwe{constructor(e,t){this.uri=e,this.value=t}}class Mu{constructor(e,t){this[XG]="ResourceMap",e instanceof Mu?(this.map=new Map(e.map),this.toKey=t??Mu.defaultToKey):(this.map=new Map,this.toKey=e??Mu.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new qwe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(XG=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}Mu.defaultToKey=r=>r.toString();class Kwe{constructor(){this[QG]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[(QG=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class qC extends Kwe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function Fg(r,e,t){return Math.min(Math.max(r,e),t)}class Gwe{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}}const s5="**",JG="/",BO="[/\\\\]",WO="[^/\\\\]",Ywe=/\//g;function eY(r){switch(r){case 0:return"";case 1:return`${WO}*?`;default:return`(?:${BO}|${WO}+${BO}|${BO}${WO}+)*?`}}function tY(r,e){if(!r)return[];const t=[];let n=!1,i=!1,s="";for(const o of r){switch(o){case e:if(!n&&!i){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}s+=o}return s&&t.push(s),t}function Nse(r){if(!r)return"";let e="";const t=tY(r,JG);if(t.every(n=>n===s5))e=".*";else{let n=!1;t.forEach((i,s)=>{if(i===s5){n||(e+=eY(2),n=!0);return}let o=!1,a="",l=!1,u="";for(const d of i){if(d!=="}"&&o){a+=d;continue}if(l&&(d!=="]"||!u)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!u?h="^":d===JG?h="":h=Af(d),u+=h;continue}switch(d){case"{":o=!0;continue;case"[":l=!0;continue;case"}":const p=`(?:${tY(a,",").map(v=>Nse(v)).join("|")})`;e+=p,o=!1,a="";break;case"]":e+="["+u+"]",l=!1,u="";break;case"?":e+=WO;continue;case"*":e+=eY(1);continue;default:e+=Af(d)}}s<t.length-1&&(t[s+1]!==s5||s+2<t.length)&&(e+=BO),n=!1})}return e}const Zwe=/^\*\*\/\*\.[\w\.-]+$/,Xwe=/^\*\*\/([\w\.-]+)\/?$/,Qwe=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,Jwe=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,eSe=/^\*\*((\/[\w\.-]+)+)\/?$/,tSe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,nY=new qC(1e4),iY=function(){return!1},yv=function(){return null};function JU(r,e){if(!r)return yv;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=nY.get(n);if(i)return rY(i,r);let s;if(Zwe.test(t)){const o=t.substr(4);i=function(a,l){return typeof a=="string"&&a.endsWith(o)?t:null}}else(s=Xwe.exec(o5(t,e)))?i=nSe(s[1],t):(e.trimForExclusions?Jwe:Qwe).test(t)?i=iSe(t,e):(s=eSe.exec(o5(t,e)))?i=sY(s[1].substr(1),t,!0):(s=tSe.exec(o5(t,e)))?i=sY(s[1],t,!1):i=rSe(t);return nY.set(n,i),rY(i,r)}function rY(r,e){return typeof e=="string"?r:function(t,n){return iwe(t,e.base)?r(g0e(e.base,t),n):null}}function o5(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function nSe(r,e){const t=`/${r}`,n=`\\${r}`,i=function(o,a){return typeof o!="string"?null:a?a===r?e:null:o===r||o.endsWith(t)||o.endsWith(n)?e:null},s=[r];return i.basenames=s,i.patterns=[e],i.allBasenames=s,i}function iSe(r,e){const t=Ose(r.slice(1,-1).split(",").map(a=>JU(a,e)).filter(a=>a!==yv),r),n=t.length;if(!n)return yv;if(n===1)return t[0];const i=function(a,l){for(let u=0,d=t.length;u<d;u++)if(t[u](a,l))return r;return null},s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(i.allPaths=o),i}function sY(r,e,t){const n=kw===oa.sep,i=n?r:r.replace(Ywe,kw),s=kw+i,o=oa.sep+r,a=t?function(l,u){return typeof l=="string"&&(l===i||l.endsWith(s)||!n&&(l===r||l.endsWith(o)))?e:null}:function(l,u){return typeof l=="string"&&(l===i||!n&&l===r)?e:null};return a.allPaths=[(t?"*/":"./")+r],a}function rSe(r){try{const e=new RegExp(`^${Nse(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return yv}}function sSe(r,e,t){return!r||typeof e!="string"?!1:Ase(r)(e,void 0,t)}function Ase(r,e={}){if(!r)return iY;if(typeof r=="string"||oSe(r)){const t=JU(r,e);if(t===yv)return iY;const n=function(i,s){return!!t(i,s)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return aSe(r,e)}function oSe(r){const e=r;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function aSe(r,e){const t=Ose(Object.getOwnPropertyNames(r).map(a=>lSe(a,r[a],e)).filter(a=>a!==yv)),n=t.length;if(!n)return yv;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(d,h){for(let p=0,v=t.length;p<v;p++){const C=t[p](d,h);if(C)return C}return null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const u=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return u.length&&(a.allPaths=u),a}const i=function(a,l,u){let d;for(let h=0,p=t.length;h<p;h++){const v=t[h];v.requiresSiblings&&u&&(l||(l=Tw(a)),d||(d=l.substr(0,l.length-p0e(a).length)));const C=v(a,l,d,u);if(C)return C}return null},s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(i.allPaths=o),i}function lSe(r,e,t){if(e===!1)return yv;const n=JU(r,t);if(n===yv)return yv;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const s=(o,a,l,u)=>{if(!u||!n(o,a))return null;const d=i.replace("$(basename)",l),h=u(d);return n0e(h)?h.then(p=>p?r:null):h?r:null};return s.requiresSiblings=!0,s}}return n}function Ose(r,e){const t=r.filter(a=>!!a.basenames);if(t.length<2)return r;const n=t.reduce((a,l)=>{const u=l.basenames;return u?a.concat(u):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const u=l.patterns;return u?a.concat(u):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const h=a.charCodeAt(d-1);if(h===47||h===92)break}l=a.substr(d)}const u=n.indexOf(l);return u!==-1?i[u]:null};s.basenames=n,s.patterns=i,s.allBasenames=n;const o=r.filter(a=>!a.basenames);return o.push(s),o}function Mse(r,e,t,n){if(Array.isArray(r)){let i=0;for(const s of r){const o=Mse(s,e,t,n);if(o===10)return o;o>i&&(i=o)}return i}else{if(typeof r=="string")return n?r==="*"?5:r===t?10:0:0;if(r){const{language:i,pattern:s,scheme:o,hasAccessToAllModels:a}=r;if(!n&&!a)return 0;let l=0;if(o)if(o===e.scheme)l=10;else if(o==="*")l=5;else return 0;if(i)if(i===t)l=10;else if(i==="*")l=Math.max(l,5);else return 0;if(s){let u;if(typeof s=="string"?u=s:u=Object.assign(Object.assign({},s),{base:dU(s.base)}),u===e.fsPath||sSe(u,e.fsPath))l=10;else return 0}return l}else return 0}}function Rse(r){return typeof r=="string"?!1:Array.isArray(r)?r.every(Rse):!!r.exclusive}class _o{constructor(){this._clock=0,this._entries=[],this._onDidChange=new Ae}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Bi(()=>{if(n){let i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,s=>{n&&i===s._score?n.push(s.provider):(i=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=Mse(n.selector,e.uri,e.getLanguageId(),$0e(e)),Rse(n.selector)&&n._score>0){for(let i of this._entries)i._score=0;n._score=1e3;break}this._entries.sort(_o._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}const oY=new WeakMap;let uSe=0;function cSe(r){let e=oY.get(r);return e===void 0&&(e=++uSe,oY.set(r,e)),e}class eR{constructor(e,t,n=Number.MAX_SAFE_INTEGER){this._registry=e,this.min=t,this.max=n,this._cache=new qC(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>p4(cSe(n),t),0)}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){const t=this._key(e),n=this._cache.get(t);return this._clamp(n==null?void 0:n.value)}update(e,t){const n=this._key(e);let i=this._cache.get(n);return i||(i=new Gwe,this._cache.set(n,i)),i.update(t),this.get(e)}}class dSe{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Bi(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,i=!1;return this._promises.set(e,t.then(s=>{this._promises.delete(e),!(i||!s)&&(n=this.register(e,s))})),Bi(()=>{i=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(i=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class Ru{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;return i&1&&(s+="font-style: italic;"),i&2&&(s+="font-weight: bold;"),i&4&&(s+="text-decoration: underline;"),s}}const hSe=function(){let r=Object.create(null);return r[0]="symbol-method",r[1]="symbol-function",r[2]="symbol-constructor",r[3]="symbol-field",r[4]="symbol-variable",r[5]="symbol-class",r[6]="symbol-struct",r[7]="symbol-interface",r[8]="symbol-module",r[9]="symbol-property",r[10]="symbol-event",r[11]="symbol-operator",r[12]="symbol-unit",r[13]="symbol-value",r[14]="symbol-constant",r[15]="symbol-enum",r[16]="symbol-enum-member",r[17]="symbol-keyword",r[27]="symbol-snippet",r[18]="symbol-text",r[19]="symbol-color",r[20]="symbol-file",r[21]="symbol-reference",r[22]="symbol-customcolor",r[23]="symbol-folder",r[24]="symbol-type-parameter",r[25]="account",r[26]="issues",function(e){const t=r[e];let n=t&&FM.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=Ie.symbolProperty),n.classNames}}();let Pse=function(){let r=Object.create(null);return r.method=0,r.function=1,r.constructor=2,r.field=3,r.variable=4,r.class=5,r.struct=6,r.interface=7,r.module=8,r.property=9,r.event=10,r.operator=11,r.unit=12,r.value=13,r.constant=14,r.enum=15,r["enum-member"]=16,r.enumMember=16,r.keyword=17,r.snippet=27,r.text=18,r.color=19,r.file=20,r.reference=21,r.customcolor=22,r.folder=23,r["type-parameter"]=24,r.typeParameter=24,r.account=25,r.issue=26,function(e,t){let n=r[e];return typeof n>"u"&&!t&&(n=9),n}}();var bf;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(bf||(bf={}));var wv;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(wv||(wv={}));var Bk;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(Bk||(Bk={}));function fSe(r){return r&&$n.isUri(r.uri)&&se.isIRange(r.range)&&(se.isIRange(r.originSelectionRange)||se.isIRange(r.targetSelectionRange))}var Y6;(function(r){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(o){return e.get(o)}r.fromString=n;function i(o){return t.get(o)}r.toString=i;function s(o,a){const l=t.get(o);let u=l&&FM.get("symbol-"+l);return u||(console.info("No codicon found for SymbolKind "+o),u=Ie.symbolProperty),`${a?"inline":"block"} ${u.classNames}`}r.toCssClassName=s})(Y6||(Y6={}));class Tm{constructor(e){this.value=e}}Tm.Comment=new Tm("comment");Tm.Imports=new Tm("imports");Tm.Region=new Tm("region");var tR;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(tR||(tR={}));const nR=new _o,iR=new _o,cm=new _o,e$=new _o,Pw=new _o,Wk=new _o,Kg=new _o,fx=new _o,rR=new _o,Vk=new _o,sR=new _o,oR=new _o,aR=new _o,pb=new _o,rC=new _o,Sv=new _o,ok=new _o,dm=new _o,lR=new _o,Hk=new _o,gx=new _o,_4=new _o,Z6=new _o,px=new _o,v4=new _o,Qs=new dSe;class $a{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=$a.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new $a(i,e,t)}equals(e){return e instanceof $a?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let o=i;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=Ru.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Ru.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Ru.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Ru.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return Ru.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return $a.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new t$(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let s=0;s<i;s++)e[s<<1]=e[s+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),o=e[s<<1];if(o===t)return s+1;o<t?n=s+1:o>t&&(i=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const s=new Array;let o=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(o,a);const u=this._tokens[(t<<1)+1];s.push(i.length,u),t++,o=a}else if(l){if(l.offset>o){i+=this._text.substring(o,l.offset);const u=this._tokens[(t<<1)+1];s.push(i.length,u),o=l.offset}i+=l.text,s.push(i.length,l.tokenMetadata),n++}else break}return new $a(new Uint32Array(s),i,this._languageIdCodec)}}$a.defaultTokenMetadata=(16384|2<<23)>>>0;class t${constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof t$?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}function uS(r){let e=0,t=0,n=0,i=0;for(let s=0,o=r.length;s<o;s++){const a=r.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&r.charCodeAt(s+1)===10?(i|=2,s++):i|=3,n=s+1):a===10&&(i|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=r.length),[e,t,r.length-n,i]}function aY(r){return(r<<0|0|0|16384|2<<23)>>>0}const Y0=new Uint32Array(0).buffer;class a5{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new gSe(e,[t]))}}class uR{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new se(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else if(s>e)n=i-1;else{let o=i;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new lY(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new lY(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,o=this._tokenCount;let a=0,l=!1,u=0;for(let d=0;d<o;d++){const h=4*d,p=s[h],v=s[h+1],C=s[h+2],S=s[h+3];if((p>e||p===e&&C>=t)&&(p<n||p===n&&v<=i))l=!0;else{if(a===0&&(u=p),l){const E=4*a;s[E]=p-u,s[E+1]=v,s[E+2]=C,s[E+3]=S}a++}}return this._tokenCount=a,u}split(e,t,n,i){const s=this._tokens,o=this._tokenCount;let a=[],l=[],u=a,d=0,h=0;for(let p=0;p<o;p++){const v=4*p,C=s[v],S=s[v+1],E=s[v+2],k=s[v+3];if(C>e||C===e&&E>=t){if(C<n||C===n&&S<=i)continue;u!==l&&(u=l,d=0,h=C)}u[d++]=C-h,u[d++]=S,u[d++]=E,u[d++]=k}return[new uR(new Uint32Array(a)),new uR(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,i,s){const o=this._tokens,a=this._tokenCount,l=i-t;let u=0,d=!1;for(let h=0;h<a;h++){const p=4*h;let v=o[p],C=o[p+1],S=o[p+2];const E=o[p+3];if(v<t||v===t&&S<=n){u++;continue}else if(v===t&&C<n)v===i&&S>s?S-=s-n:S=n;else if(v===t&&C===n)if(v===i&&S>s)S-=s-n;else{d=!0;continue}else if(v<i||v===i&&C<s)if(v===i&&S>s)v===t?(C=n,S=C+(S-s)):(C=0,S=C+(S-s));else{d=!0;continue}else if(v>i){if(l===0&&!d){u=a;break}v-=l}else if(v===i&&C>=s)e&&v===0&&(C+=e,S+=e),v-=l,C-=s-n,S-=s-n;else throw new Error("Not possible!");const k=4*u;o[k]=v,o[k+1]=C,o[k+2]=S,o[k+3]=E,u++}this._tokenCount=u}acceptInsertText(e,t,n,i,s,o){const a=n===0&&i===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,u=this._tokenCount;for(let d=0;d<u;d++){const h=4*d;let p=l[h],v=l[h+1],C=l[h+2];if(!(p<e||p===e&&C<t)){if(p===e&&C===t)if(a)C+=1;else continue;else if(p===e&&v<t&&t<C)n===0?C+=i:C=t;else{if(p===e&&v===t&&a)continue;if(p===e)if(p+=n,n===0)v+=i,C+=i;else{const S=C-v;v=s+(v-t),C=v+S}else p+=n}l[h]=p,l[h+1]=v,l[h+2]=C}}}}class lY{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class cR{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new se(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[i,s,o]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new cR(this.startLineNumber,i),new cR(this.startLineNumber+o,s)]}applyEdit(e,t){const[n,i,s]=uS(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new ze(e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const s=n-t;this.startLineNumber-=s;return}const i=this.tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const s=-t;this.startLineNumber-=s,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(t===0&&n===0)return;const o=e.lineNumber-this.startLineNumber;if(o<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();o>=a+1||this.tokens.acceptInsertText(o,e.column-1,t,n,i,s)}}class gSe{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function Z0(r){return r instanceof Uint32Array?r:new Uint32Array(r)}class n${constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),o=t[t.length-1].getRange();if(!s||!o)return e;n=e.plusRange(s).plusRange(o)}let i=null;for(let s=0,o=this._pieces.length;s<o;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};continue}const[l,u]=a.split(n);if(l.isEmpty()){i=i||{index:s};continue}u.isEmpty()||(this._pieces.splice(s,1,l,u),s++,o++,i=i||{index:s})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=Mk(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const i=n$._findFirstPieceWithLine(n,e),s=n[i].getLineTokens(e);if(!s)return t;const o=t.getCount(),a=s.getCount();let l=0,u=[],d=0,h=0;const p=(v,C)=>{v!==h&&(h=v,u[d++]=v,u[d++]=C)};for(let v=0;v<a;v++){const C=s.getStartCharacter(v),S=s.getEndCharacter(v),E=s.getMetadata(v),k=((E&1?2048:0)|(E&2?4096:0)|(E&4?8192:0)|(E&8?8372224:0)|(E&16?4286578688:0))>>>0,D=~k>>>0;for(;l<o&&t.getEndOffset(l)<=C;)p(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<C&&p(C,t.getMetadata(l));l<o&&t.getEndOffset(l)<S;)p(t.getEndOffset(l),t.getMetadata(l)&D|E&k),l++;if(l<o)p(S,t.getMetadata(l)&D|E&k),t.getEndOffset(l)===S&&l++;else{const O=Math.min(Math.max(0,l-1),o-1);p(S,t.getMetadata(O)&D|E&k)}}for(;l<o;)p(t.getEndOffset(l),t.getMetadata(l)),l++;return new $a(new Uint32Array(u),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)i=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,i,s){for(const o of this._pieces)o.acceptEdit(e,t,n,i,s)}}class gf{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Y0)return new $a(Z0(i),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=aY(this._languageIdCodec.encodeLanguageId(e)),new $a(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?Z0(n):null;if(t===0){let s=!1;if(i&&i.length>1&&(s=Ru.getLanguageId(i[1])!==e),!s)return Y0}if(!i||i.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=aY(e),s.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=Mk(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const o=gf._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,s?!gf._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Z0(e),i=Z0(t);if(n.length!==i.length)return!1;for(let s=0,o=n.length;s<o;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new ze(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=gf._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=gf._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=gf._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=gf._append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=gf._insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=gf._deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=gf._insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Y0?e:gf._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Y0)return e;const n=Z0(e),i=n[n.length-2];return gf._delete(e,t,i)}static _delete(e,t,n){if(e===null||e===Y0||t===n)return e;const i=Z0(e),s=i.length>>>1;if(t===0&&i[i.length-2]===n)return Y0;const o=$a.findIndexInTokensArray(i,t),a=o>0?i[o-1<<1]:0,l=i[o<<1];if(n<l){const v=n-t;for(let C=o;C<s;C++)i[C<<1]-=v;return e}let u,d;a!==t?(i[o<<1]=t,u=o+1<<1,d=t):(u=o<<1,d=a);const h=n-t;for(let v=o+1;v<s;v++){const C=i[v<<1]-h;C>d&&(i[u++]=C,i[u++]=i[(v<<1)+1],d=C)}if(u===i.length)return e;let p=new Uint32Array(u);return p.set(i.subarray(0,u),0),p.buffer}static _append(e,t){if(t===Y0)return e;if(e===Y0)return t;if(e===null)return e;if(t===null)return null;const n=Z0(e),i=Z0(t),s=i.length>>>1;let o=new Uint32Array(n.length+i.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let u=0;u<s;u++)o[a++]=i[u<<1]+l,o[a++]=i[(u<<1)+1];return o.buffer}static _insert(e,t,n){if(e===null||e===Y0)return e;const i=Z0(e),s=i.length>>>1;let o=$a.findIndexInTokensArray(i,t);o>0&&i[o-1<<1]===t&&o--;for(let a=o;a<s;a++)i[a<<1]+=n;return e}}class KE extends Je{constructor(e,t,n,i,s,o,a){super(),this._onDidChangeContent=this._register(new Ae),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._pieceTree=new Fwe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const i=this.getPositionAt(e),s=this.getPositionAt(n);return new se(i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let o=i;o<=s;o++){const a=this.getLineContent(o),l=o===i?e.startColumn-1:0,u=o===s?e.endColumn-1:a.length;for(let d=l;d<u;d++)ba(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=oc(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Cv(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let S=0;S<e.length;S++){let E=e[S];a&&E._isTracked&&(a=!1);let k=E.range;if(E.text){let X=!0;o||(X=!LU(E.text),o=X),!i&&X&&(i=GP(E.text)),!s&&X&&(s=hre(E.text))}let D="",O=0,H=0,V=0;if(E.text){let X;[O,H,V,X]=uS(E.text);const $=this.getEOL();X===0||X===($===`\r
`?2:1)?D=E.text:D=E.text.replace(/\r\n|\r|\n/g,$)}l[S]={sortIndex:S,identifier:E.identifier||null,range:k,rangeOffset:this.getOffsetAt(k.startLineNumber,k.startColumn),rangeLength:this.getValueLengthInRange(k),text:D,eolCount:O,firstLineLength:H,lastLineLength:V,forceMoveMarkers:!!E.forceMoveMarkers,isAutoWhitespaceEdit:E.isAutoWhitespaceEdit||!1}}l.sort(KE._sortOpsAscending);let u=!1;for(let S=0,E=l.length-1;S<E;S++){let k=l[S].range.getEndPosition(),D=l[S+1].range.getStartPosition();if(D.isBeforeOrEqual(k)){if(D.isBefore(k))throw new Error("Overlapping ranges are not allowed!");u=!0}}a&&(l=this._reduceOperations(l));let d=n||t?KE._getInverseEditRanges(l):[],h=[];if(t)for(let S=0;S<l.length;S++){let E=l[S],k=d[S];if(E.isAutoWhitespaceEdit&&E.range.isEmpty())for(let D=k.startLineNumber;D<=k.endLineNumber;D++){let O="";D===k.startLineNumber&&(O=this.getLineContent(E.range.startLineNumber),oc(O)!==-1)||h.push({lineNumber:D,oldContent:O})}}let p=null;if(n){let S=0;p=[];for(let E=0;E<l.length;E++){const k=l[E],D=d[E],O=this.getValueInRange(k.range),H=k.rangeOffset+S;S+=k.text.length-O.length,p[E]={sortIndex:k.sortIndex,identifier:k.identifier,range:D,text:O,textChange:new Dl(k.rangeOffset,O,H,k.text)}}u||p.sort((E,k)=>E.sortIndex-k.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const v=this._doApplyEdits(l);let C=null;if(t&&h.length>0){h.sort((S,E)=>E.lineNumber-S.lineNumber),C=[];for(let S=0,E=h.length;S<E;S++){let k=h[S].lineNumber;if(S>0&&h[S-1].lineNumber===k)continue;let D=h[S].oldContent,O=this.getLineContent(k);O.length===0||O===D||oc(O)!==-1||C.push(k)}}return this._onDidChangeContent.fire(),new Jye(p,v,C)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new se(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let v=0,C=e.length;v<C;v++){const S=e[v],E=S.range;t=t||S.forceMoveMarkers,l.push(this.getValueInRange(new se(o,a,E.startLineNumber,E.startColumn))),S.text.length>0&&l.push(S.text),o=E.endLineNumber,a=E.endColumn}const u=l.join(""),[d,h,p]=uS(u);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:u,eolCount:d,firstLineLength:h,lastLineLength:p,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(KE._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n];const s=i.range.startLineNumber,o=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(s===a&&o===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const u=new se(s,o,a,l);t.push({range:u,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){let t=[],n=0,i=0,s=null;for(let o=0,a=e.length;o<a;o++){let l=e[o],u,d;s?s.range.endLineNumber===l.range.startLineNumber?(u=n,d=i+(l.range.startColumn-s.range.endColumn)):(u=n+(l.range.startLineNumber-s.range.endLineNumber),d=l.range.startColumn):(u=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){const p=l.eolCount+1;p===1?h=new se(u,d,u,d+l.firstLineLength):h=new se(u,d,u+p-1,l.lastLineLength+1)}else h=new se(u,d,u,d);n=h.endLineNumber,i=h.endColumn,t.push(h),s=l}return t}static _sortOpsAscending(e,t){let n=se.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=se.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class pSe{constructor(e,t,n,i,s,o,a,l,u){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=u}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=n.length;s<o;s++){let a=n[s].buffer.replace(/\r\n|\r|\n/g,t),l=rb(a);n[s]=new lw(a,l)}const i=new KE(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class mSe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&EU(e)&&(this.BOM=ube,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=Mwe(this._tmpLineStarts,e);this.chunks.push(new lw(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=GP(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=hre(e))}finish(e=!0){return this._finish(),new pSe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=rb(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class _Se{constructor(){this.changeType=1}}class km{constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=s}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new km(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new km(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}}class uY{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class vSe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class bSe{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class CSe{constructor(){this.changeType=5}}class Fw{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Fw(n,i,s,o)}}class Fse{constructor(e){this.changes=e}}class dR{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Fw.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=dR._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new dR(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:i,versionId:s,isUndoing:o,isRedoing:a,isFlush:l}}}let b4=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class i${constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class C4{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}class ySe{clone(){return this}equals(e){return this===e}}const m2=new ySe,NC="vs.editor.nullMode";function Bse(r,e,t,n){return new i$([new b4(n,"",r)],t)}function r$(r,e,t,n){let i=new Uint32Array(2);return i[0]=n,i[1]=(r<<0|0|0|16384|2<<23)>>>0,new C4(i,t===null?m2:t)}class wSe{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],i=[];for(let s=0;s<t;s++)n[s]=null,i[s]=!1;this._beginState=Mk(this._beginState,e,n),this._valid=Mk(this._valid,e,i),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const i=this.getBeginState(t+1);if(i===null||!n.equals(i)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let s=t+1;for(;s<e&&this._isValid(s);)s++;this._invalidLineStartIndex=s}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,s=Math.min(n,t);for(let o=s;o>=0;o--)this._invalidateLine(e.startLineNumber+o-1);this._acceptDeleteRange(e),this._acceptInsertText(new ze(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class SSe extends Je{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=new wSe,this._tokenizationSupport=null,this._register(Qs.onDidChange(n=>{const i=this._textModel.getLanguageId();n.changedLanguages.indexOf(i)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let i=0,s=n.changes.length;i<s;i++){const o=n.changes[i],[a]=uS(o.text);this._tokenizationStateStore.applyEdits(o.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=LSe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Tk(e=>{this._isScheduled=!1,!this._isDisposed&&this._revalidateTokensNow(e)}))}_revalidateTokensNow(e){const t=this._textModel.getLineCount(),n=1,i=new a5,s=Ev.create(!1);let o=-1;do if(s.elapsed()>n||(o=this._tokenizeOneInvalidLine(i),o>=t))break;while(this._hasLinesToTokenize()&&e.timeRemaining()>0);this._beginBackgroundTokenization(),this._textModel.setTokens(i.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new a5;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new a5;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationSupport)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const i=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),o=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=EA(this._languageIdCodec,i,this._tokenizationSupport,o,!0,n),l=new $a(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const u=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(u)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),i=this._textModel.getLineCount(),s=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=s;o++){const a=this._textModel.getLineContent(o+1),l=this._tokenizationStateStore.getBeginState(o),u=EA(this._languageIdCodec,n,this._tokenizationSupport,a,!0,l);e.add(o+1,u.tokens),this._tokenizationStateStore.setEndState(i,o,u.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let i=this._textModel.getLineFirstNonWhitespaceColumn(t);const s=[];let o=null;for(let u=t-1;i>1&&u>=1;u--){const d=this._textModel.getLineFirstNonWhitespaceColumn(u);if(d!==0&&d<i){if(o=this._tokenizationStateStore.getBeginState(u-1),o)break;s.push(this._textModel.getLineContent(u)),i=d}}o||(o=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let l=o;for(let u=s.length-1;u>=0;u--)l=EA(this._languageIdCodec,a,this._tokenizationSupport,s[u],!1,l).endState;for(let u=t;u<=n;u++){const d=this._textModel.getLineContent(u),h=EA(this._languageIdCodec,a,this._tokenizationSupport,d,!0,l);e.add(u,h.tokens),this._tokenizationStateStore.setFakeTokens(u-1),l=h.endState}}}function LSe(r){const e=r.getLanguageId();let t=r.isTooLargeForTokenization()?null:Qs.get(e),n=null;if(t)try{n=t.getInitialState()}catch(i){Jn(i),t=null}return[t,n]}function EA(r,e,t,n,i,s){let o=null;if(t)try{o=t.tokenize2(n,i,s.clone(),0)}catch(a){Jn(a)}return o||(o=r$(r.encodeLanguageId(e),n,s,0)),$a.convertToEndOffset(o.tokens,n.length),o}var ko;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(ko||(ko={}));class l5{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class ESe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)lT(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),lT(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),lT(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),lT(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&lT(this.autoClosingPairsCloseSingleChar,t.close,t)}}function lT(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}function VO(r,e){let t=r.getCount(),n=r.findTokenIndexAtOffset(e),i=r.getLanguageId(n),s=n;for(;s+1<t&&r.getLanguageId(s+1)===i;)s++;let o=n;for(;o>0&&r.getLanguageId(o-1)===i;)o--;return new xSe(r,i,o,s+1,r.getStartOffset(o),r.getEndOffset(s))}class xSe{constructor(e,t,n,i,s,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=s,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function j_(r){return(r&7)!==0}class _2{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new l5(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new l5({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=cY(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=cY(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new l5({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:_2.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}_2.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function cY(r){return r.filter(([e,t])=>e!==""&&t!=="")}class hR{constructor(e,t,n,i,s,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=s,this.reversedRegex=o,this._openSet=hR._toSet(this.open),this._closeSet=hR._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function DSe(r){const e=r.length;r=r.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,u]=o,[d,h]=a;return l===d||l===h||u===d||u===h},i=(o,a)=>{const l=Math.min(o,a),u=Math.max(o,a);for(let d=0;d<e;d++)t[d]===u&&(t[d]=l)};for(let o=0;o<e;o++){const a=r[o];for(let l=o+1;l<e;l++){const u=r[l];n(a,u)&&i(t[o],t[l])}}const s=[];for(let o=0;o<e;o++){let a=[],l=[];for(let u=0;u<e;u++)if(t[u]===o){const[d,h]=r[u];a.push(d),l.push(h)}a.length>0&&s.push({open:a,close:l})}return s}class ISe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=DSe(t);this.brackets=n.map((i,s)=>new hR(e,s,i.open,i.close,TSe(i.open,i.close,n,s),kSe(i.open,i.close,n,s))),this.forwardRegex=NSe(this.brackets),this.reversedRegex=ASe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const s of i.open)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of i.close)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function Wse(r,e,t,n){for(let i=0,s=e.length;i<s;i++){if(i===t)continue;const o=e[i];for(const a of o.open)a.indexOf(r)>=0&&n.push(a);for(const a of o.close)a.indexOf(r)>=0&&n.push(a)}}function Vse(r,e){return r.length-e.length}function y4(r){if(r.length<=1)return r;const e=[],t=new Set;for(const n of r)t.has(n)||(e.push(n),t.add(n));return e}function TSe(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let s=0,o=i.length;s<o;s++)Wse(i[s],t,n,i);return i=y4(i),i.sort(Vse),i.reverse(),w4(i)}function kSe(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let s=0,o=i.length;s<o;s++)Wse(i[s],t,n,i);return i=y4(i),i.sort(Vse),i.reverse(),w4(i.map(s$))}function NSe(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=y4(e),w4(e)}function ASe(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=y4(e),w4(e.map(s$))}function OSe(r){const e=/^[\w ]+$/.test(r);return r=Af(r),e?`\\b${r}\\b`:r}function w4(r){let e=`(${r.map(OSe).join(")|(")})`;return cre(e,!0)}const s$=function(){function r(n){if(mse){const i=new Uint16Array(n.length);let s=0;for(let o=n.length-1;o>=0;o--)i[s++]=n.charCodeAt(o);return pse().decode(i)}else{let i=[],s=0;for(let o=n.length-1;o>=0;o--)i[s++]=n.charAt(o);return i.join("")}}let e=null,t=null;return function(i){return e!==i&&(e=i,t=r(e)),t}}();class Og{static _findPrevBracketInText(e,t,n,i){let s=n.match(e);if(!s)return null;let o=n.length-(s.index||0),a=s[0].length,l=i+o;return new se(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,s){const a=s$(n).substring(n.length-s,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){let s=n.match(e);if(!s)return null;let o=s.index||0,a=s[0].length;if(a===0)return null;let l=i+o;return new se(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,s){const o=n.substring(i,s);return this.findNextBracketInText(e,t,o,i)}}class MSe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return iS(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(j_(t.getStandardTokenType(i)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=Og.findPrevBracketInRange(s,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function xA(r){return r.global&&(r.lastIndex=0),!0}class RSe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&xA(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&xA(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&xA(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&xA(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class vE{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=vE._createOpenBracketRegExp(t[0]),i=vE._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let s=0,o=this._regExpRules.length;s<o;s++){let a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(u=>u.reg?(u.reg.lastIndex=0,u.reg.test(u.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let s=0,o=this._brackets.length;s<o;s++){let a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:ko.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,o=this._brackets.length;s<o;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:ko.Indent}}return null}static _createOpenBracketRegExp(e){let t=Af(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",vE._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Af(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,vE._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Jn(t),null}}}const es=lr("configurationService");function Hse(r,e){const t=Object.create(null);for(let n in r)o$(t,n,r[n],e);return t}function o$(r,e,t,n){const i=e.split("."),s=i.pop();let o=r;for(let a=0;a<i.length;a++){let l=i[a],u=o[l];switch(typeof u){case"undefined":u=o[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(u)}`);return}o=u}if(typeof o=="object"&&o!==null)try{o[s]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(o)}`)}function PSe(r,e){const t=e.split(".");zse(r,t)}function zse(r,e){const t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){const n=r[t];typeof n=="object"&&!Array.isArray(n)&&(zse(n,e),Object.keys(n).length===0&&delete r[t])}}function FSe(r,e,t){function n(o,a){let l=o;for(const u of a){if(typeof l!="object"||l===null)return;l=l[u]}return l}const i=e.split("."),s=n(r,i);return typeof s>"u"?t:s}const Pl=lr("modeService");class Z1{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const Use=[];function KC(r,e,t){e instanceof Z1||(e=new Z1(e,[],t)),Use.push([r,e])}function BSe(){return Use}var WSe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dY=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class u5{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const v2=lr("languageConfigurationService");let fR=class extends Je{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new Ae),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(X6));this._register(this.configurationService.onDidChangeConfiguration(i=>{const s=i.change.keys.some(a=>n.has(a)),o=i.change.overrides.filter(([a,l])=>l.some(u=>n.has(u))).map(([a])=>this.modeService.validateLanguageId(a));if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new u5(void 0));else for(const a of o)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new u5(a)))})),this._register(hr.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new u5(i.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=VSe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};fR=WSe([dY(0,es),dY(1,Pl)],fR);function VSe(r,e,t){let n=hr.getLanguageConfiguration(r);if(!n){const a=t.validateLanguageId(r);if(!a)throw new Error("Unexpected languageId");n=new zk(a,{})}const i=HSe(n.languageId,e),s=$se([n.underlyingConfig,i]);return new zk(n.languageId,s)}const X6={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function HSe(r,e){const t=e.getValue(X6.brackets,{overrideIdentifier:r}),n=e.getValue(X6.colorizedBracketPairs,{overrideIdentifier:r});return{brackets:hY(t),colorizedBracketPairs:hY(n)}}function hY(r){if(Array.isArray(r))return r.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class fY{constructor(e){this.languageId=e}}class zSe{constructor(){this._entries=new Map,this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let i=this._entries.get(e);i||(i=new USe(e),this._entries.set(e,i));const s=i.register(t,n);return this._onDidChange.fire(new fY(e)),Bi(()=>{s.dispose(),this._onDidChange.fire(new fY(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let i=VO(t,n-1),s=this._getElectricCharacterSupport(i.languageId);return s?s.onElectricCharacter(e,i,n-i.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new ESe(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():_2.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return KM(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let i=e.getLanguageIdAtPosition(t,0);if(t>1){let s,o=-1;for(s=t-1;s>=1;s--){if(e.getLanguageIdAtPosition(s,0)!==i)return o;let a=e.getLineContent(s);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){o=s;continue}return s}}return-1}getInheritIndentForLine(e,t,n,i=!0){if(e<4)return null;const s=this.getIndentRulesSupport(t.getLanguageId());if(!s)return null;if(n<=1)return{indentation:"",action:null};const o=this.getPrecedingValidLine(t,n,s);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=t.getLineContent(o);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:Vr(a),action:ko.Indent,line:o};if(s.shouldDecrease(a))return{indentation:Vr(a),action:null,line:o};{if(o===1)return{indentation:Vr(t.getLineContent(o)),action:null,line:o};const l=o-1,u=s.getIndentMetadata(t.getLineContent(l));if(!(u&3)&&u&4){let d=0;for(let h=l-1;h>0;h--)if(!s.shouldIndentNextLine(t.getLineContent(h))){d=h;break}return{indentation:Vr(t.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:Vr(t.getLineContent(o)),action:null,line:o};for(let d=o;d>0;d--){const h=t.getLineContent(d);if(s.shouldIncrease(h))return{indentation:Vr(h),action:ko.Indent,line:d};if(s.shouldIndentNextLine(h)){let p=0;for(let v=d-1;v>0;v--)if(!s.shouldIndentNextLine(t.getLineContent(d))){p=v;break}return{indentation:Vr(t.getLineContent(p+1)),action:null,line:p+1}}else if(s.shouldDecrease(h))return{indentation:Vr(h),action:null,line:d}}return{indentation:Vr(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,i,s){if(e<4)return null;const o=this.getLanguageConfiguration(n);if(!o)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const l=this.getInheritIndentForLine(e,t,i),u=t.getLineContent(i);if(l){const d=l.line;if(d!==void 0){const h=o.onEnter(e,"",t.getLineContent(d),"");if(h){let p=Vr(t.getLineContent(d));return h.removeText&&(p=p.substring(0,p.length-h.removeText)),h.indentAction===ko.Indent||h.indentAction===ko.IndentOutdent?p=s.shiftIndent(p):h.indentAction===ko.Outdent&&(p=s.unshiftIndent(p)),a.shouldDecrease(u)&&(p=s.unshiftIndent(p)),h.appendText&&(p+=h.appendText),Vr(p)}}return a.shouldDecrease(u)?l.action===ko.Indent?l.indentation:s.unshiftIndent(l.indentation):l.action===ko.Indent?s.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,n,i){if(e<4)return null;t.forceTokenization(n.startLineNumber);const s=t.getLineTokens(n.startLineNumber),o=VO(s,n.startColumn-1),a=o.getLineContent();let l=!1,u;o.firstCharOffset>0&&s.getLanguageId(0)!==o.languageId?(l=!0,u=a.substr(0,n.startColumn-1-o.firstCharOffset)):u=s.getLineContent().substring(0,n.startColumn-1);let d;n.isEmpty()?d=a.substr(n.startColumn-1-o.firstCharOffset):d=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);const h=this.getIndentRulesSupport(o.languageId);if(!h)return null;const p=u,v=Vr(u),C={getLineTokens:D=>t.getLineTokens(D),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(D,O)=>t.getLanguageIdAtPosition(D,O),getLineContent:D=>D===n.startLineNumber?p:t.getLineContent(D)},S=Vr(s.getLineContent()),E=this.getInheritIndentForLine(e,C,n.startLineNumber+1);if(!E){const D=l?S:v;return{beforeEnter:D,afterEnter:D}}let k=l?S:E.indentation;return E.action===ko.Indent&&(k=i.shiftIndent(k)),h.shouldDecrease(d)&&(k=i.unshiftIndent(k)),{beforeEnter:l?S:v,afterEnter:k}}getIndentActionForType(e,t,n,i,s){if(e<4)return null;const o=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(o.firstCharOffset)return null;const a=this.getIndentRulesSupport(o.languageId);if(!a)return null;const l=o.getLineContent(),u=l.substr(0,n.startColumn-1-o.firstCharOffset);let d;if(n.isEmpty()?d=l.substr(n.startColumn-1-o.firstCharOffset):d=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset),!a.shouldDecrease(u+d)&&a.shouldDecrease(u+i+d)){const h=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!h)return null;let p=h.indentation;return h.action!==ko.Indent&&(p=s.unshiftIndent(p)),p}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const i=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),s=this.getLanguageConfiguration(i.languageId);if(!s)return null;const o=i.getLineContent(),a=o.substr(0,n.startColumn-1-i.firstCharOffset);let l;n.isEmpty()?l=o.substr(n.startColumn-1-i.firstCharOffset):l=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-i.firstCharOffset);let u="";if(n.startLineNumber>1&&i.firstCharOffset===0){const S=this.getScopedLineTokens(t,n.startLineNumber-1);S.languageId===i.languageId&&(u=S.getLineContent())}const d=s.onEnter(e,u,a,l);if(!d)return null;const h=d.indentAction;let p=d.appendText;const v=d.removeText||0;p?h===ko.Indent&&(p="	"+p):h===ko.Indent||h===ko.IndentOutdent?p="	":p="";let C=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return v&&(C=C.substring(0,C.length-v)),{indentAction:h,appendText:p,removeText:v,indentation:C}}getIndentationAtPosition(e,t,n){const i=e.getLineContent(t);let s=Vr(i);return s.length>n-1&&(s=s.substring(0,n-1)),s}getScopedLineTokens(e,t,n){e.forceTokenization(t);const i=e.getLineTokens(t),s=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return VO(i,s)}}const hr=new zSe;class USe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new gY(e,t,++this._order);return this._entries.push(n),this._resolved=null,Bi(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new zk(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(gY.cmp),$se(this._entries.map(e=>e.configuration)))}}function $se(r){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of r)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class gY{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class zk{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new vE(this.underlyingConfig):null,this.comments=zk._handleComments(this.underlyingConfig),this.characterPair=new _2(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Tre,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new RSe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return KM(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new ISe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new MSe(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[i,s]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=s}return n}}KC(v2,fR);const b2=lr("undoRedoService");class jse{constructor(e,t){this.resource=e,this.elements=t}}class mx{constructor(){this.id=mx._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}mx._ID=0;mx.None=new mx;class av{constructor(){this.id=av._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}av._ID=0;av.None=new av;class pY{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class $Se{constructor(e,t,n,i){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i}}class jSe extends $Se{constructor(e,t,n,i,s){super(e,t,n,i),this.minVisibleColumnIndentation=s}}class qSe{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function KSe(r,e,t,n){return r!==t?fo(t-r,n):fo(0,n-e)}const Bb=0;function GSe(r){return r===0}const Dh=Math.pow(2,26);function fo(r,e){return r*Dh+e}function mC(r){const e=r,t=Math.floor(e/Dh),n=e-t*Dh;return new qSe(t,n)}function YSe(r){return Math.floor(r/Dh)}function Tl(r,e){return e<Dh?r+e:r-r%Dh+e}function ZSe(r,e){const t=r,n=e;if(n-t<=0)return Bb;const s=Math.floor(t/Dh),o=Math.floor(n/Dh),a=n-o*Dh;if(s===o){const l=t-s*Dh;return fo(0,a-l)}else return fo(o-s,a)}function HO(r,e){return r<e}function ww(r,e){return r<=e}function DA(r,e){return r>=e}function IA(r){return fo(r.lineNumber-1,r.column-1)}function ak(r,e){const t=r,n=Math.floor(t/Dh),i=t-n*Dh,s=e,o=Math.floor(s/Dh),a=s-o*Dh;return new se(n+1,i+1,o+1,a+1)}function XSe(r){const e=Dv(r);return fo(e.length-1,e[e.length-1].length)}class mY{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class QSe{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>a$.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return ZSe(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?fo(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):fo(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=mC(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?fo(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):fo(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(ww(n,e)){this.nextEditIdx++;const i=mC(n),s=mC(this.translateOldToCur(t.endOffsetBeforeObj)),o=i.lineCount-s.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class a${constructor(e,t,n){this.endOffsetBeforeObj=mC(t),this.endOffsetAfterObj=mC(Tl(e,n)),this.offsetObj=mC(e)}static from(e){return new a$(e.startOffset,e.endOffset,e.newLength)}}class ls{static visibleColumnFromColumn(e,t,n){const i=e.length,s=t-1<i?t-1:i;let o=0,a=0;for(;a<s;){const l=yw(e,s,a);if(a+=l>=65536?2:1,l===9)o=ls.nextRenderTabStop(o,n);else{let u=_A(l);for(;a<s;){const d=yw(e,s,a),h=_A(d);if(zM(u,h))break;a+=d>=65536?2:1,u=h}Iv(l)||HM(l)?o=o+2:o=o+1}}return o}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length;let s=0,o=1,a=0;for(;a<i;){const l=yw(e,i,a);a+=l>=65536?2:1;let u;if(l===9)u=ls.nextRenderTabStop(s,n);else{let h=_A(l);for(;a<i;){const p=yw(e,i,a),v=_A(p);if(zM(h,v))break;a+=p>=65536?2:1,h=v}Iv(l)||HM(l)?u=s+2:u=s+1}const d=a+1;if(u>=t){const h=t-s;return u-t<h?d:o}s=u,o=d}return i+1}static columnFromVisibleColumn2(e,t,n,i){let s=this.columnFromVisibleColumn(t.getLineContent(n),i,e.tabSize),o=t.getLineMinColumn(n);if(s<o)return o;let a=t.getLineMaxColumn(n);return s>a?a:s}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const zO=new Array;class Go{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=Go.cache[e];return n||(n=new Go(e,t),Go.cache[e]=n),n}return new Go(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const o=1<<n|this.items;return o===this.items?this:Go.create(o,this.additionalItems)}i--;const s=this.additionalItems.slice(0);for(;s.length<i;)s.push(0);return s[i]|=1<<(n&31),Go.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===zO&&e.additionalItems===zO)return t===this.items?this:t===e.items?e:Go.create(t,zO);const n=new Array;for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const s=this.additionalItems[i]||0,o=e.additionalItems[i]||0;n.push(s|o)}return Go.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Go.cache=new Array(129);Go.empty=Go.create(0,zO);const _Y={getKey(r){return r}};class JSe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class l${constructor(e){this._length=e}get length(){return this._length}}class Uk extends l${constructor(e,t,n,i,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=s}static create(e,t,n){let i=e.length;return t&&(i=Tl(i,t.length)),n&&(i=Tl(i,n.length)),new Uk(i,e,t,n,t?t.missingOpeningBracketIds:Go.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Uk(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Tl(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class kv extends l${constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,i=!1){let s=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Tl(s,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=Tl(s,n.length),o=o.merge(n.missingOpeningBracketIds)}return i?new eLe(s,e.listHeight+1,e,t,n,o):new $k(s,e.listHeight+1,e,t,n,o)}static getEmpty(){return new tLe(Bb,0,[],Go.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const s=this.getChild(i);t=Tl(t,s.length),n=n.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let s=0;s<this.childrenLength;s++){const o=this.getChild(s);o&&(n=Math.min(n,o.computeMinIndentation(i,t)),i=Tl(i,o.length))}return this.cachedMinIndentation=n,n}}class $k extends kv{constructor(e,t,n,i,s,o){super(e,t,o),this._item1=n,this._item2=i,this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new $k(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class eLe extends $k{toMutable(){return new $k(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class gR extends kv{constructor(e,t,n,i){super(e,t,i),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new gR(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class tLe extends gR{toMutable(){return new gR(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const nLe=[];class u$ extends l${get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return nLe}deepClone(){return this}}class aE extends u${get kind(){return 0}get missingOpeningBracketIds(){return Go.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=mC(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,s=YSe(Tl(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=i;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),u=t.getLineContent(a);if(l===0)continue;const d=ls.visibleColumnFromColumn(u,l,t.getOptions().tabSize);o=Math.min(o,d)}return o}}class Bw extends u${constructor(e){super(e)}static create(e){const t=e,n=Bw.cacheByLength.get(t);if(n)return n;const i=new Bw(e);return Bw.cacheByLength.set(t,i),i}get kind(){return 1}get missingOpeningBracketIds(){return Go.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}Bw.cacheByLength=new Map;class iLe extends u${constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Q1=class{constructor(e,t,n,i,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=s}};class rLe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new sLe(this.textModel,this.bracketTokens),this._offset=Bb,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return fo(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Tl(this._offset,e);const t=mC(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Tl(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class sLe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const s=this.lineTokens,o=s.getCount();let a=null;if(this.lineTokenOffset<o){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const u=Ru.getTokenType(l)===0,d=s.getEndOffset(this.lineTokenOffset);if(u&&d!==this.lineCharOffset){const h=s.getLanguageId(this.lineTokenOffset),p=this.line.substring(this.lineCharOffset,d),v=this.bracketTokens.getSingleLanguageBracketTokens(h),C=v.regExpGlobal;if(C){C.lastIndex=0;const S=C.exec(p);S&&(a=v.getToken(S[0]),a&&(this.lineCharOffset+=S.index))}}if(n+=d-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=d}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=KSe(e,t,this.lineIdx,this.lineCharOffset);return new Q1(i,0,-1,Go.getEmpty(),new aE(i))}}class oLe{constructor(e,t){this.text=e,this._offset=Bb,this.idx=0;const i=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,s=[];let o,a=0,l=0,u=0,d=0;const h=new Array;for(let C=0;C<60;C++)h.push(new Q1(fo(0,C),0,-1,Go.getEmpty(),new aE(fo(0,C))));const p=new Array;for(let C=0;C<60;C++)p.push(new Q1(fo(1,C),0,-1,Go.getEmpty(),new aE(fo(1,C))));if(i)for(i.lastIndex=0;(o=i.exec(e))!==null;){const C=o.index,S=o[0];if(S===`
`)a++,l=C+1;else{if(u!==C){let E;if(d===a){const k=C-u;if(k<h.length)E=h[k];else{const D=fo(0,k);E=new Q1(D,0,-1,Go.getEmpty(),new aE(D))}}else{const k=a-d,D=C-l;if(k===1&&D<p.length)E=p[D];else{const O=fo(k,D);E=new Q1(O,0,-1,Go.getEmpty(),new aE(O))}}s.push(E)}s.push(t.getToken(S)),u=C+S.length,d=a}}const v=e.length;if(u!==v){const C=d===a?fo(0,v-u):fo(a-d,v-l);s.push(new Q1(C,0,-1,Go.getEmpty(),new aE(C)))}this.length=fo(a,v-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Ove}}class pR{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(l,u){return t.getKey(`${l}:::${u}`)}const i=e.characterPair.getColorizedBrackets(),s=new Map,o=new Set;for(const[l,u]of i){o.add(l);let d=s.get(u);const h=n(e.languageId,l);d||(d={openingBrackets:Go.getEmpty(),first:h},s.set(u,d)),d.openingBrackets=d.openingBrackets.add(h,_Y)}const a=new Map;for(const[l,u]of s){const d=fo(0,l.length);a.set(l,new Q1(d,2,u.first,u.openingBrackets,Bw.create(d)))}for(const l of o){const u=fo(0,l.length),d=n(e.languageId,l);a.set(l,new Q1(u,1,d,Go.getEmpty().add(d,_Y),Bw.create(u)))}return new pR(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>aLe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function aLe(r){const e=Af(r);return/^[\w ]+$/.test(r)?`\\b${e}\\b`:e}class lLe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=pR.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=pR.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function uLe(r){if(r.length===0)return null;if(r.length===1)return r[0];let e=0;function t(){if(e>=r.length)return null;const o=e,a=r[o].listHeight;for(e++;e<r.length&&r[e].listHeight===a;)e++;return e-o>=2?qse(o===0&&e===r.length?r:r.slice(o,e),!1):r[o]}let n=t(),i=t();if(!i)return n;for(let o=t();o;o=t())vY(n,i)<=vY(i,o)?(n=c5(n,i),i=o):i=c5(i,o);return c5(n,i)}function qse(r,e=!1){if(r.length===0)return null;if(r.length===1)return r[0];let t=r.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const s=i<<1;r[i]=kv.create23(r[s],r[s+1],s+3===t?r[s+2]:null,e)}t=n}return kv.create23(r[0],r[1],t>=3?r[2]:null,e)}function vY(r,e){return Math.abs(r.listHeight-e.listHeight)}function c5(r,e){return r.listHeight===e.listHeight?kv.create23(r,e,null,!1):r.listHeight>e.listHeight?cLe(r,e):dLe(e,r)}function cLe(r,e){r=r.toMutable();let t=r;const n=new Array;let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let s=n.length-1;s>=0;s--){const o=n[s];i?o.childrenLength>=3?i=kv.create23(o.unappendChild(),i,null,!1):(o.appendChildOfSameHeight(i),i=void 0):o.handleChildrenChanged()}return i?kv.create23(r,i,null,!1):r}function dLe(r,e){r=r.toMutable();let t=r;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let s=n.length-1;s>=0;s--){const o=n[s];i?o.childrenLength>=3?i=kv.create23(i,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(i),i=void 0):o.handleChildrenChanged()}return i?kv.create23(i,r,null,!1):r}class hLe{constructor(e){this.lastOffset=Bb,this.nextNodes=[e],this.offsets=[Bb],this.idxs=[]}readLongestNodeAt(e,t){if(HO(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=uT(this.nextNodes);if(!n)return;const i=uT(this.offsets);if(HO(e,i))return;if(HO(i,e))if(Tl(i,n.length)<=e)this.nextNodeAfterCurrent();else{const s=d5(n);s!==-1?(this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const s=d5(n);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=uT(this.offsets),t=uT(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=uT(this.nextNodes),i=d5(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(Tl(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}}function d5(r,e=-1){for(;;){if(e++,e>=r.childrenLength)return-1;if(r.getChild(e))return e}}function uT(r){return r.length>0?r[r.length-1]:void 0}function bY(r,e,t,n){return new fLe(r,e,t,n).parseDocument()}class fLe{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new hLe(n):void 0,this.positionMapper=new QSe(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Go.getEmpty());return e||(e=kv.getEmpty()),e}parseList(e){const t=new Array;for(;;){const i=this.tokenizer.peek();if(!i||i.kind===2&&i.bracketIds.intersects(e))break;const s=this.parseChild(e);s.kind===4&&s.childrenLength===0||t.push(s)}return this.oldNodeReader?uLe(t):qse(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!GSe(n)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>HO(s.length,n)?s.canBeReused(e):!1);if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new iLe(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),i=this.parseList(n),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===t.bracketId||s.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),Uk.create(t.astNode,i,s.astNode)):Uk.create(t.astNode,i,null);default:throw new Error("unexpected")}}}class gLe extends Je{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Ae,this.denseKeyProvider=new JSe,this.brackets=new lLe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const i=n.map(s=>new mY(fo(s.fromLineNumber-1,0),fo(s.toLineNumber,0),fo(s.toLineNumber-s.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(i,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new oLe(this.textModel.getValue(),n);this.initialAstWithoutTokens=bY(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const i=se.lift(n.range);return new mY(IA(i.getStartPosition()),IA(i.getEndPosition()),XSe(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const i=t,s=new rLe(this.textModel,this.brackets);return bY(s,e,i,n)}getBracketsInRange(e){const t=fo(e.startLineNumber-1,e.startColumn-1),n=fo(e.endLineNumber-1,e.endColumn-1),i=new Array,s=this.initialAstWithoutTokens||this.astWithTokens;return MT(s,Bb,s.length,t,n,i),i}getBracketPairsInRange(e,t){const n=new Array,i=IA(e.getStartPosition()),s=IA(e.getEndPosition()),o=this.initialAstWithoutTokens||this.astWithTokens,a=new pLe(n,t,this.textModel);return Kse(o,Bb,o.length,i,s,a),n}}function MT(r,e,t,n,i,s,o=0){if(r.kind===1){const a=ak(e,t);s.push(new pY(a,o-1,!1))}else if(r.kind===3){const a=ak(e,t);s.push(new pY(a,o-1,!0))}else if(r.kind===4)for(const a of r.children)t=Tl(e,a.length),ww(e,i)&&DA(t,n)&&MT(a,e,t,n,i,s,o),e=t;else if(r.kind===2){o++;{const a=r.openingBracket;t=Tl(e,a.length),ww(e,i)&&DA(t,n)&&MT(a,e,t,n,i,s,o),e=t}if(r.child){const a=r.child;t=Tl(e,a.length),ww(e,i)&&DA(t,n)&&MT(a,e,t,n,i,s,o),e=t}if(r.closingBracket){const a=r.closingBracket;t=Tl(e,a.length),ww(e,i)&&DA(t,n)&&MT(a,e,t,n,i,s,o),e=t}}}class pLe{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function Kse(r,e,t,n,i,s,o=0){var a;if(r.kind===2){const u=Tl(e,r.openingBracket.length);let d=-1;s.includeMinIndentation&&(d=r.computeMinIndentation(e,s.textModel)),s.result.push(new jSe(ak(e,t),ak(e,u),r.closingBracket?ak(Tl(u,((a=r.child)===null||a===void 0?void 0:a.length)||Bb),t):void 0,o,d)),o++}let l=e;for(const u of r.children){const d=l;l=Tl(l,u.length),ww(d,i)&&ww(n,l)&&Kse(u,d,l,n,i,s,o)}}class mLe extends Je{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new uc),this.onDidChangeEmitter=new Ae,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(e.onDidChangeLanguage(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(this.languageConfigurationService.onDidChange(n=>{var i;(!n.languageId||!((i=this.bracketPairsTree.value)===null||i===void 0)&&i.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const e=new Et;this.bracketPairsTree.value=_Le(e.add(new gLe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}handleContentChanged(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t){let n=e.toLowerCase(),i=this.textModel.validatePosition(t);const s=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);let o=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!o)return null;let a=o.textIsBracket[n];return a?TA(this._findMatchingBracketUp(a,i,null)):null}matchBracket(e){return this._matchBracket(this.textModel.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),o=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let u=i-1;u>=0;u--){const d=t.getEndOffset(u);if(d<=a)break;if(j_(t.getStandardTokenType(u))||t.getLanguageId(u)!==o){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let u=i+1;u<s;u++){const d=t.getStartOffset(u);if(d>=l)break;if(j_(t.getStandardTokenType(u))||t.getLanguageId(u)!==o){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){const t=e.lineNumber,n=this.textModel.getLineTokens(t),i=this.textModel.getLineContent(t),s=n.findTokenIndexAtOffset(e.column-1);if(s<0)return null;const o=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(s)).brackets;if(o&&!j_(n.getStandardTokenType(s))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,o,s),u=null;for(;;){const d=Og.findNextBracketInRange(o.forwardRegex,t,i,a,l);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){const h=i.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),p=this._matchFoundBracket(d,o.textIsBracket[h],o.textIsOpenBracket[h],null);if(p){if(p instanceof db)return null;u=p}}a=d.endColumn-1}if(u)return u}if(s>0&&n.getStartOffset(s)===e.column-1){const a=s-1,l=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(l&&!j_(n.getStandardTokenType(a))){let{searchStartOffset:u,searchEndOffset:d}=this._establishBracketSearchOffsets(e,n,l,a);const h=Og.findPrevBracketInRange(l.reversedRegex,t,i,u,d);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const p=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),v=this._matchFoundBracket(h,l.textIsBracket[p],l.textIsOpenBracket[p],null);if(v)return v instanceof db?null:v}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof db?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,s=e.reversedRegex;let o=-1,a=0;const l=(u,d,h,p)=>{for(;;){if(n&&++a%100===0&&!n())return db.INSTANCE;const v=Og.findPrevBracketInRange(s,u,d,h,p);if(!v)break;const C=d.substring(v.startColumn-1,v.endColumn-1).toLowerCase();if(e.isOpen(C)?o++:e.isClose(C)&&o--,o===0)return v;p=v.startColumn-1}return null};for(let u=t.lineNumber;u>=1;u--){const d=this.textModel.getLineTokens(u),h=d.getCount(),p=this.textModel.getLineContent(u);let v=h-1,C=p.length,S=p.length;u===t.lineNumber&&(v=d.findTokenIndexAtOffset(t.column-1),C=t.column-1,S=t.column-1);let E=!0;for(;v>=0;v--){const k=d.getLanguageId(v)===i&&!j_(d.getStandardTokenType(v));if(k)E?C=d.getStartOffset(v):(C=d.getStartOffset(v),S=d.getEndOffset(v));else if(E&&C!==S){const D=l(u,p,C,S);if(D)return D}E=k}if(E&&C!==S){const k=l(u,p,C,S);if(k)return k}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,s=e.forwardRegex;let o=1,a=0;const l=(d,h,p,v)=>{for(;;){if(n&&++a%100===0&&!n())return db.INSTANCE;const C=Og.findNextBracketInRange(s,d,h,p,v);if(!C)break;const S=h.substring(C.startColumn-1,C.endColumn-1).toLowerCase();if(e.isOpen(S)?o++:e.isClose(S)&&o--,o===0)return C;p=C.endColumn-1}return null},u=this.textModel.getLineCount();for(let d=t.lineNumber;d<=u;d++){const h=this.textModel.getLineTokens(d),p=h.getCount(),v=this.textModel.getLineContent(d);let C=0,S=0,E=0;d===t.lineNumber&&(C=h.findTokenIndexAtOffset(t.column-1),S=t.column-1,E=t.column-1);let k=!0;for(;C<p;C++){const D=h.getLanguageId(C)===i&&!j_(h.getStandardTokenType(C));if(D)k||(S=h.getStartOffset(C)),E=h.getEndOffset(C);else if(k&&S!==E){const O=l(d,v,S,E);if(O)return O}k=D}if(k&&S!==E){const D=l(d,v,S,E);if(D)return D}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);let n=null,i=null;for(let s=t.lineNumber;s>=1;s--){const o=this.textModel.getLineTokens(s),a=o.getCount(),l=this.textModel.getLineContent(s);let u=a-1,d=l.length,h=l.length;if(s===t.lineNumber){u=o.findTokenIndexAtOffset(t.column-1),d=t.column-1,h=t.column-1;const v=o.getLanguageId(u);n!==v&&(n=v,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets)}let p=!0;for(;u>=0;u--){const v=o.getLanguageId(u);if(n!==v){if(i&&p&&d!==h){const S=Og.findPrevBracketInRange(i.reversedRegex,s,l,d,h);if(S)return this._toFoundBracket(i,S);p=!1}n=v,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets}const C=!!i&&!j_(o.getStandardTokenType(u));if(C)p?d=o.getStartOffset(u):(d=o.getStartOffset(u),h=o.getEndOffset(u));else if(i&&p&&d!==h){const S=Og.findPrevBracketInRange(i.reversedRegex,s,l,d,h);if(S)return this._toFoundBracket(i,S)}p=C}if(i&&p&&d!==h){const v=Og.findPrevBracketInRange(i.reversedRegex,s,l,d,h);if(v)return this._toFoundBracket(i,v)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e),n=this.textModel.getLineCount();let i=null,s=null;for(let o=t.lineNumber;o<=n;o++){const a=this.textModel.getLineTokens(o),l=a.getCount(),u=this.textModel.getLineContent(o);let d=0,h=0,p=0;if(o===t.lineNumber){d=a.findTokenIndexAtOffset(t.column-1),h=t.column-1,p=t.column-1;const C=a.getLanguageId(d);i!==C&&(i=C,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets)}let v=!0;for(;d<l;d++){const C=a.getLanguageId(d);if(i!==C){if(s&&v&&h!==p){const E=Og.findNextBracketInRange(s.forwardRegex,o,u,h,p);if(E)return this._toFoundBracket(s,E);v=!1}i=C,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets}const S=!!s&&!j_(a.getStandardTokenType(d));if(S)v||(h=a.getStartOffset(d)),p=a.getEndOffset(d);else if(s&&v&&h!==p){const E=Og.findNextBracketInRange(s.forwardRegex,o,u,h,p);if(E)return this._toFoundBracket(s,E)}v=S}if(s&&v&&h!==p){const C=Og.findNextBracketInRange(s.forwardRegex,o,u,h,p);if(C)return this._toFoundBracket(s,C)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const v=Date.now();n=()=>Date.now()-v<=t}const i=this.textModel.validatePosition(e),s=this.textModel.getLineCount(),o=new Map;let a=[];const l=(v,C)=>{if(!o.has(v)){let S=[];for(let E=0,k=C?C.brackets.length:0;E<k;E++)S[E]=0;o.set(v,S)}a=o.get(v)};let u=0;const d=(v,C,S,E,k)=>{for(;;){if(n&&++u%100===0&&!n())return db.INSTANCE;const D=Og.findNextBracketInRange(v.forwardRegex,C,S,E,k);if(!D)break;const O=S.substring(D.startColumn-1,D.endColumn-1).toLowerCase(),H=v.textIsBracket[O];if(H&&(H.isOpen(O)?a[H.index]++:H.isClose(O)&&a[H.index]--,a[H.index]===-1))return this._matchFoundBracket(D,H,!1,n);E=D.endColumn-1}return null};let h=null,p=null;for(let v=i.lineNumber;v<=s;v++){const C=this.textModel.getLineTokens(v),S=C.getCount(),E=this.textModel.getLineContent(v);let k=0,D=0,O=0;if(v===i.lineNumber){k=C.findTokenIndexAtOffset(i.column-1),D=i.column-1,O=i.column-1;const V=C.getLanguageId(k);h!==V&&(h=V,p=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,p))}let H=!0;for(;k<S;k++){const V=C.getLanguageId(k);if(h!==V){if(p&&H&&D!==O){const $=d(p,v,E,D,O);if($)return TA($);H=!1}h=V,p=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,p)}const X=!!p&&!j_(C.getStandardTokenType(k));if(X)H||(D=C.getStartOffset(k)),O=C.getEndOffset(k);else if(p&&H&&D!==O){const $=d(p,v,E,D,O);if($)return TA($)}H=X}if(p&&H&&D!==O){const V=d(p,v,E,D,O);if(V)return TA(V)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();let i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null}}function _Le(r,e){return{object:r,dispose:()=>e==null?void 0:e.dispose()}}class db{constructor(){this._searchCanceledBrand=void 0}}db.INSTANCE=new db;function TA(r){return r instanceof db?null:r}const vLe=Oe("editor.lineHighlightBackground",{dark:null,light:null,hc:null},L("lineHighlight","Background color for the highlight of line at the cursor position.")),CY=Oe("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},L("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),bLe=Oe("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},L("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),CLe=Oe("editor.rangeHighlightBorder",{dark:null,light:null,hc:Uc},L("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),yLe=Oe("editor.symbolHighlightBackground",{dark:H6,light:H6,hc:null},L("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),wLe=Oe("editor.symbolHighlightBorder",{dark:null,light:null,hc:Uc},L("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),Gse=Oe("editorCursor.foreground",{dark:"#AEAFAD",light:We.black,hc:We.white},L("caret","Color of the editor cursor.")),SLe=Oe("editorCursor.background",null,L("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Ww=Oe("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},L("editorWhitespaces","Color of whitespace characters in the editor.")),S4=Oe("editorIndentGuide.background",{dark:Ww,light:Ww,hc:Ww},L("editorIndentGuides","Color of the editor indentation guides.")),L4=Oe("editorIndentGuide.activeBackground",{dark:Ww,light:Ww,hc:Ww},L("editorActiveIndentGuide","Color of the active editor indentation guides.")),Yse=Oe("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:We.white},L("editorLineNumbers","Color of editor line numbers.")),h5=Oe("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Uc},L("editorActiveLineNumber","Color of editor active line number"),!1,L("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),LLe=Oe("editorLineNumber.activeForeground",{dark:h5,light:h5,hc:h5},L("editorActiveLineNumber","Color of editor active line number")),ELe=Oe("editorRuler.foreground",{dark:"#5A5A5A",light:We.lightgrey,hc:We.white},L("editorRuler","Color of the editor rulers.")),xLe=Oe("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},L("editorBracketMatchBackground","Background color behind matching brackets")),Zse=Oe("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Ao},L("editorBracketMatchBorder","Color for matching brackets boxes")),DLe=Oe("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},L("editorOverviewRulerBorder","Color of the overview ruler border.")),ILe=Oe("editorOverviewRuler.background",null,L("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),TLe=Oe("editorGutter.background",{dark:Df,light:Df,hc:Df},L("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),kLe=Oe("editorUnnecessaryCode.border",{dark:null,light:null,hc:We.fromHex("#fff").transparent(.8)},L("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),NLe=Oe("editorUnnecessaryCode.opacity",{dark:We.fromHex("#000a"),light:We.fromHex("#0007"),hc:null},L("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),ALe=Oe("editorGhostText.border",{dark:null,light:null,hc:We.fromHex("#fff").transparent(.8)},L("editorGhostTextBorder","Border color of ghost text in the editor.")),OLe=Oe("editorGhostText.foreground",{dark:We.fromHex("#ffffff56"),light:We.fromHex("#0007"),hc:null},L("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),MLe=Oe("editorGhostText.background",{dark:null,light:null,hc:null},L("editorGhostTextBackground","Background color of the ghost text in the editor.")),f5=new We(new ar(0,122,204,.6)),RLe=Oe("editorOverviewRuler.rangeHighlightForeground",{dark:f5,light:f5,hc:f5},L("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),PLe=Oe("editorOverviewRuler.errorForeground",{dark:new We(new ar(255,18,18,.7)),light:new We(new ar(255,18,18,.7)),hc:new We(new ar(255,50,50,1))},L("overviewRuleError","Overview ruler marker color for errors.")),FLe=Oe("editorOverviewRuler.warningForeground",{dark:Db,light:Db,hc:l4},L("overviewRuleWarning","Overview ruler marker color for warnings.")),BLe=Oe("editorOverviewRuler.infoForeground",{dark:Sm,light:Sm,hc:BU},L("overviewRuleInfo","Overview ruler marker color for infos.")),Xse=Oe("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},L("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Qse=Oe("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},L("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Jse=Oe("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},L("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),eoe=Oe("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),toe=Oe("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),noe=Oe("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),WLe=Oe("editorBracketHighlight.unexpectedBracket.foreground",{dark:new We(new ar(255,18,18,.8)),light:new We(new ar(255,18,18,.8)),hc:new We(new ar(255,50,50,1))},L("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),VLe=Oe("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),HLe=Oe("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),zLe=Oe("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),ULe=Oe("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),$Le=Oe("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),jLe=Oe("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),qLe=Oe("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),KLe=Oe("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),GLe=Oe("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),YLe=Oe("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),ZLe=Oe("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),XLe=Oe("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},L("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));ds((r,e)=>{const t=r.getColor(Df);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=r.getColor(g2);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const i=r.getColor(TLe);i&&e.addRule(`.monaco-editor .margin { background-color: ${i}; }`);const s=r.getColor(bLe);s&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${s}; }`);const o=r.getColor(CLe);o&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${o}; }`);const a=r.getColor(yLe);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=r.getColor(wLe);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${l}; }`);const u=r.getColor(Ww);u&&(e.addRule(`.monaco-editor .mtkw { color: ${u} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${u} !important; }`))});class QLe extends Je{constructor(e){super(),this.textModel=e,this.colorProvider=new ioe,this.onDidChangeEmitter=new Ae,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const i=new Array,s=this.textModel.bracketPairs.getBracketsInRange(e);for(const o of s)i.push({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o)},ownerId:0,range:o.range});return i}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new se(1,1,this.textModel.getLineCount(),1),e,t):[]}}class ioe{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}ds((r,e)=>{const t=[Xse,Qse,Jse,eoe,toe,noe],n=new ioe;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${r.getColor(WLe)}; }`);let i=t.map(s=>r.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const o=i[s%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s)} { color: ${o}; }`)}});var JLe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},g5=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function eEe(){return new mSe}function tEe(r){const e=eEe();return e.acceptChunk(r),e.finish()}function yY(r,e){return(typeof r=="string"?tEe(r):r).create(e)}let kA=0;const nEe=999,iEe=1e4;class rEe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}const cT=()=>{throw new Error("Invalid change accessor")};let Vd=class q_ extends Je{constructor(e,t,n,i=null,s,o,a){super(),this._undoRedoService=s,this._modeService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new Ae),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new lEe(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new Ae),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Ae),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Ae),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new Ae),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Ae),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new Ae),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new uEe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new Ae),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(p=>{this._onDidChangeContentOrInjectedText.fire(p.rawContentChangedEvent)})),kA++,this.id="$model"+kA,this.isForSimpleWidget=t.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=$n.parse("inmemory://model/"+kA):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:l,disposable:u}=yY(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=u,this._options=q_.resolveOptions(this._buffer,t);const d=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new se(1,1,d,this._buffer.getLineLength(d)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=h>q_.LARGE_FILE_SIZE_THRESHOLD||d>q_.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=h>q_.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||NC,this._languageRegistryListener=this._languageConfigurationService.onDidChange(p=>{p.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=fre(kA),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new wY,this._commandManager=new KU(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new gf(this._modeService.languageIdCodec),this._tokens2=new n$(this._modeService.languageIdCodec),this._tokenization=new SSe(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new mLe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new QLe(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=zG(e,t.tabSize,t.insertSpaces);return new PO({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new PO({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new KE([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new dR(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=yY(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new wY,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Fw([new _Se],this._versionId,!1,!1),this._createContentChanged2(new se(1,1,s,o),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Fw([new CSe],this._versionId,!1,!1),this._createContentChanged2(new se(1,1,s,o),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const s=t[n],o=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),u=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=u,s.cachedVersionId=e,s.start=l-a,s.end=u-a,kC(s)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const s=this._buffer.getLineLength(i);s>=iEe?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new PO({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let n=zG(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let i=0;for(let o=0;o<e.length;o++)e.charAt(o)==="	"?i+=t:i++;let s="";if(!n){let o=Math.floor(i/t);i=i%t;for(let a=0;a<o;a++)s+="	"}for(let o=0;o<i;o++)s+=" ";return s}static normalizeIndentation(e,t,n){let i=oc(e);return i===-1&&(i=e.length),q_._normalizeIndentationFromWhitespace(e.substring(0,i),t,n)+e.substring(i)}normalizeIndentation(e){return this._assertNotDisposed(),q_.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(dre.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new rEe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const h=this.getLineMaxColumn(s);o>=h&&(o=h)}const a=e.endLineNumber,l=e.endColumn;let u=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(u<1)u=1,d=1;else if(u>t)u=t,d=this.getLineMaxColumn(u);else if(d<=1)d=1;else{const h=this.getLineMaxColumn(u);d>=h&&(d=h)}return n===s&&i===o&&a===u&&l===d&&e instanceof se&&!(e instanceof un)?e:new se(s,o,u,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(ba(o))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(i<1)return new ze(1,1);if(i>o)return new ze(o,this.getLineMaxColumn(o));if(s<=1)return new ze(i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new ze(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,s-2);if(ba(l))return new ze(i,s-1)}return new ze(i,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof ze&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(s,o,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,u=ba(a),d=ba(l);return!u&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof se&&!(e instanceof un)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,o=n.column,a=i.lineNumber,l=i.column;{const u=o>1?this._buffer.getLineCharCode(s,o-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=ba(u),p=ba(d);return!h&&!p?new se(s,o,a,l):s===a&&o===l?new se(s,o-1,a,l-1):h&&p?new se(s,o-1,a,l+1):h?new se(s,o-1,a,l):new se(s,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new se(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,o,a=nEe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>se.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,p)=>h.startLineNumber-p.startLineNumber||h.startColumn-p.startColumn);const u=[];u.push(l.reduce((h,p)=>se.areIntersecting(h,p)?h.plusRange(p):(u.push(h),p)));let d;if(!n&&e.indexOf(`
`)<0){const p=new tw(e,n,i,s).parseSearchRequest();if(!p)return[];d=v=>this.findMatchesLineByLine(v,p,o,a)}else d=h=>SA.findMatches(this,new tw(e,n,i,s),h,o,a);return u.map(d).reduce((h,p)=>h.concat(p),[])}findNextMatch(e,t,n,i,s,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const u=new tw(e,n,i,s).parseSearchRequest();if(!u)return null;const d=this.getLineCount();let h=new se(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),p=this.findMatchesLineByLine(h,u,o,1);return SA.findNextMatch(this,new tw(e,n,i,s),a,o),p.length>0||(h=new se(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),p=this.findMatchesLineByLine(h,u,o,1),p.length>0)?p[0]:null}return SA.findNextMatch(this,new tw(e,n,i,s),a,o)}findPreviousMatch(e,t,n,i,s,o){this._assertNotDisposed();const a=this.validatePosition(t);return SA.findPreviousMatch(this,new tw(e,n,i,s),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof e5?e:new e5(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let i=t.map(o=>({range:this.validateRange(o.range),text:o.text})),s=!0;if(e)for(let o=0,a=e.length;o<a;o++){let l=e[o],u=!1;for(let d=0,h=i.length;d<h;d++){let p=i[d].range,v=p.startLineNumber>l.endLineNumber,C=l.startLineNumber>p.endLineNumber;if(!v&&!C){u=!0;break}}if(!u){s=!1;break}}if(s)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){let l=this._trimAutoWhitespaceLines[o],u=this.getLineMaxColumn(l),d=!0;for(let h=0,p=i.length;h<p;h++){let v=i[h].range,C=i[h].text;if(!(l<v.startLineNumber||l>v.endLineNumber)&&!(l===v.startLineNumber&&v.startColumn===u&&v.isEmpty()&&C&&C.length>0&&C.charAt(0)===`
`)&&!(l===v.startLineNumber&&v.startColumn===1&&v.isEmpty()&&C&&C.length>0&&C.charAt(C.length-1)===`
`)){d=!1;break}}if(d){const h=new se(l,1,l,u);t.push(new e5(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const s=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new se(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new se(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,o.length!==0){for(let u=0,d=o.length;u<d;u++){const h=o[u],[p,v,C]=uS(h.text);this._tokens.acceptEdit(h.range,p,v),this._tokens2.acceptEdit(h.range,p,v,C,h.text.length>0?h.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=n;for(let u=0,d=o.length;u<d;u++){const h=o[u],[p]=uS(h.text);this._onDidChangeDecorations.fire();const v=h.range.startLineNumber,C=h.range.endLineNumber,S=C-v,E=p,k=Math.min(S,E),D=E-S,O=s-l-D+v,H=O,V=O+E,X=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new ze(H,1)),this.getOffsetAt(new ze(V,this.getLineMaxColumn(V))),0),$=km.fromDecorations(X),P=new WE($);for(let z=k;z>=0;z--){const M=v+z,W=O+z;P.takeFromEndWhile(R=>R.lineNumber>W);const I=P.takeFromEndWhile(R=>R.lineNumber===W);a.push(new uY(M,this.getLineContent(W),I))}if(k<S){const z=v+k;a.push(new vSe(z+1,C))}if(k<E){const z=new WE($),M=v+k,W=E-k,I=s-l-W+M+1;let R=[],G=[];for(let Z=0;Z<W;Z++){let ee=I+Z;G[Z]=this.getLineContent(ee),z.takeWhile(ne=>ne.lineNumber<ee),R[Z]=z.takeWhile(ne=>ne.lineNumber===ee)}a.push(new bSe(M+1,v+E,G,R))}l+=D}this._emitContentChangedEvent(new Fw(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(i=>new uY(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeContentOrInjectedText.fire(new Fse(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(s,o)=>this._deltaDecorationsImpl(e,[],[{range:s,options:o}])[0],changeDecoration:(s,o)=>{this._changeDecorationImpl(s,o)},changeDecorationOptions:(s,o)=>{this._changeDecorationOptionsImpl(s,LY(o))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,s,o)},i=null;try{i=t(n)}catch(s){Jn(s)}return n.addDecoration=cT,n.changeDecoration=cT,n.changeDecorationOptions=cT,n.removeDecoration=cT,n.deltaDecorations=cT,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:SY[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,a,s),i.setOptions(SY[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){let s=this.getLineCount(),o=Math.min(s,Math.max(1,e)),a=Math.min(s,Math.max(1,t)),l=this.getLineMaxColumn(a);const u=new se(o,1,a,l),d=this._getDecorationsInRange(u,n,i);return d.push(...this._decorationProvider.getDecorationsInRange(u,n,i)),d}getDecorationsInRange(e,t=0,n=!1){let i=this.validateRange(e);const s=this._getDecorationsInRange(i,t,n);return s.push(...this._decorationProvider.getDecorationsInRange(i,t,n)),s}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return km.fromDecorations(i).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,i,s,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,o,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),s=t.length;let o=0;const a=n.length;let l=0,u=new Array(a);for(;o<s||l<a;){let d=null;if(o<s){do d=this._decorations[t[o++]];while(!d&&o<s);if(d){if(d.options.after){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){const E=++this._lastDecorationId,k=`${this._instanceId};${E}`;d=new xse(k,0,0),this._decorations[k]=d}const h=n[l],p=this._validateRangeRelaxedNoAllocations(h.range),v=LY(h.options),C=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),S=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);d.ownerId=e,d.reset(i,C,S,p),d.setOptions(v),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(v),this._decorationsTree.insert(d),u[l]=d.id,l++}else d&&delete this._decorations[d.id]}return u}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];let a=0,l=0,u=!1;for(let d=0,h=o.tokens.length;d<h;d++){const p=o.startLineNumber+d;u?(this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),o.tokens[d],!1),l=p):this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),o.tokens[d],!0)&&(u=!0,a=p,l=p)}u&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new ze(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}getTokenTypeIfInsertingCharacter(e,t,n){const i=this.validatePosition(new ze(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(i,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[o,a]=q_._findLanguageBoundaries(i,s),l=GM(t.column,this.getLanguageConfiguration(i.getLanguageId(s)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&o===t.column-1){const[u,d]=q_._findLanguageBoundaries(i,s-1),h=GM(t.column,this.getLanguageConfiguration(i.getLanguageId(s-1)).getWordDefinition(),n.substring(u,d),u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)i=e.getStartOffset(o);let s=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)s=e.getEndOffset(o);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}static computeIndentLevel(e,t){let n=0,i=0,s=e.length;for(;i<s;){let o=e.charCodeAt(i);if(o===32)n++;else if(o===9)n=n-n%t+t;else break;i++}return i===s?-1:n}_computeIndentLevel(e){return q_.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(s&&s.offSide);let a=-2,l=-1,u=-2,d=-1;const h=$=>{if(a!==-1&&(a===-2||a>$-1)){a=-1,l=-1;for(let P=$-2;P>=0;P--){let z=this._computeIndentLevel(P);if(z>=0){a=P,l=z;break}}}if(u===-2){u=-1,d=-1;for(let P=$;P<i;P++){let z=this._computeIndentLevel(P);if(z>=0){u=P,d=z;break}}}};let p=-2,v=-1,C=-2,S=-1;const E=$=>{if(p===-2){p=-1,v=-1;for(let P=$-2;P>=0;P--){let z=this._computeIndentLevel(P);if(z>=0){p=P,v=z;break}}}if(C!==-1&&(C===-2||C<$-1)){C=-1,S=-1;for(let P=$;P<i;P++){let z=this._computeIndentLevel(P);if(z>=0){C=P,S=z;break}}}};let k=0,D=!0,O=0,H=!0,V=0,X=0;for(let $=0;D||H;$++){const P=e-$,z=e+$;$>1&&(P<1||P<t)&&(D=!1),$>1&&(z>i||z>n)&&(H=!1),$>5e4&&(D=!1,H=!1);let M=-1;if(D){const I=this._computeIndentLevel(P-1);I>=0?(u=P-1,d=I,M=Math.ceil(I/this._options.indentSize)):(h(P),M=this._getIndentLevelForWhitespaceLine(o,l,d))}let W=-1;if(H){const I=this._computeIndentLevel(z-1);I>=0?(p=z-1,v=I,W=Math.ceil(I/this._options.indentSize)):(E(z),W=this._getIndentLevelForWhitespaceLine(o,v,S))}if($===0){X=M;continue}if($===1){if(z<=i&&W>=0&&X+1===W){D=!1,k=z,O=z,V=W;continue}if(P>=1&&M>=0&&M-1===X){H=!1,k=P,O=P,V=M;continue}if(k=e,O=e,V=X,V===0)return{startLineNumber:k,endLineNumber:O,indent:V}}D&&(M>=V?k=P:D=!1),H&&(W>=V?O=z:H=!1)}return{startLineNumber:k,endLineNumber:O,indent:V}}getLinesBracketGuides(e,t,n,i){var s,o,a,l,u;const d=[],h=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new se(e,1,t,this.getLineMaxColumn(t)));let p;if(n&&h.length>0){const k=e<=n.lineNumber&&n.lineNumber<=t?h.filter(D=>se.strictContainsPosition(D.range,n)):this._bracketPairColorizer.getBracketPairsInRange(se.fromPositions(n));p=(s=Fbe(k,D=>D.range.startLineNumber!==D.range.endLineNumber))===null||s===void 0?void 0:s.range}const v=new WE(h),C=new Array,S=new Array,E=new roe;for(let k=e;k<=t;k++){let D=new Array;S.length>0&&(D=D.concat(S),S.length=0),d.push(D);for(const H of v.takeWhile(V=>V.openingBracketRange.startLineNumber<=k)||[]){if(H.range.startLineNumber===H.range.endLineNumber)continue;const V=Math.min(this.getVisibleColumnFromPosition(H.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(o=H.closingBracketRange)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:H.range.getEndPosition()),H.minVisibleColumnIndentation+1);let X=!1;H.closingBracketRange&&oc(this.getLineContent(H.closingBracketRange.startLineNumber))<H.closingBracketRange.startColumn-1&&(X=!0);const $=H.openingBracketRange.getStartPosition(),P=(u=(l=H.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&u!==void 0?u:H.range.getEndPosition();H.closingBracketRange===void 0?C[H.nestingLevel]=null:C[H.nestingLevel]={nestingLevel:H.nestingLevel,guideVisibleColumn:V,start:$,visibleStartColumn:this.getVisibleColumnFromPosition($),end:P,visibleEndColumn:this.getVisibleColumnFromPosition(P),bracketPair:H,renderHorizontalEndLineAtTheBottom:X}}for(const H of C){if(!H)continue;const V=p&&H.bracketPair.range.equalsRange(p),X=E.getInlineClassNameOfLevel(H.nestingLevel)+(i.highlightActive&&V?" "+E.activeClassName:"");(V&&i.horizontalGuides!==Rw.Disabled||i.includeInactive&&i.horizontalGuides===Rw.Enabled)&&(H.start.lineNumber===k&&H.guideVisibleColumn<H.visibleStartColumn&&D.push(new pE(H.guideVisibleColumn,X,new q6(!1,H.start.column))),H.end.lineNumber===k+1&&H.guideVisibleColumn<H.visibleEndColumn&&S.push(new pE(H.guideVisibleColumn,X,new q6(!H.renderHorizontalEndLineAtTheBottom,H.end.column))))}let O=Number.MAX_SAFE_INTEGER;for(let H=C.length-1;H>=0;H--){const V=C[H];if(!V)continue;const X=i.highlightActive&&p&&V.bracketPair.range.equalsRange(p),$=E.getInlineClassNameOfLevel(V.nestingLevel)+(X?" "+E.activeClassName:"");(X||i.includeInactive)&&V.renderHorizontalEndLineAtTheBottom&&V.end.lineNumber===k+1&&S.push(new pE(V.guideVisibleColumn,$,null)),!(V.end.lineNumber<=k||V.start.lineNumber>=k)&&(V.guideVisibleColumn>=O&&!X||(O=V.guideVisibleColumn,(X||i.includeInactive)&&D.push(new pE(V.guideVisibleColumn,$,null))))}D.sort((H,V)=>H.visibleColumn-V.visibleColumn)}return d}getVisibleColumnFromPosition(e){return ls.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.getLanguageConfiguration(this._languageId).foldingRules,s=!!(i&&i.offSide);let o=new Array(t-e+1),a=-2,l=-1,u=-2,d=-1;for(let h=e;h<=t;h++){let p=h-e;const v=this._computeIndentLevel(h-1);if(v>=0){a=h-1,l=v,o[p]=Math.ceil(v/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let C=h-2;C>=0;C--){let S=this._computeIndentLevel(C);if(S>=0){a=C,l=S;break}}}if(u!==-1&&(u===-2||u<h-1)){u=-1,d=-1;for(let C=h;C<n;C++){let S=this._computeIndentLevel(C);if(S>=0){u=C,d=S;break}}}o[p]=this._getIndentLevelForWhitespaceLine(s,l,d)}return o}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return sEe(this.getLineContent(e))+1}};Vd.MODEL_SYNC_LIMIT=50*1024*1024;Vd.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Vd.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Vd.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Nu.tabSize,indentSize:Nu.indentSize,insertSpaces:Nu.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Nu.trimAutoWhitespace,largeFileOptimizations:Nu.largeFileOptimizations,bracketPairColorizationOptions:Nu.bracketPairColorizationOptions};Vd=JLe([g5(4,b2),g5(5,Pl),g5(6,v2)],Vd);function sEe(r){let e=0;for(const t of r)if(t===" "||t==="	")e++;else break;return e}class roe{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function p5(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function m5(r){return!!r.options.after||!!r.options.before}class wY{constructor(){this._decorationsTree0=new t5,this._decorationsTree1=new t5,this._injectedTextDecorationsTree=new t5}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,s){const o=e.getVersionId(),a=this._intervalSearch(t,n,i,s,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,i,s){const o=this._decorationsTree0.intervalSearch(e,t,n,i,s),a=this._decorationsTree1.intervalSearch(e,t,n,i,s),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,s);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){const s=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,s);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,i).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,n,i){const s=e.getVersionId(),o=this._search(t,n,i,s);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const s=this._decorationsTree0.search(e,t,i),o=this._decorationsTree1.search(e,t,i),a=this._injectedTextDecorationsTree.search(e,t,i);return s.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){m5(e)?this._injectedTextDecorationsTree.insert(e):p5(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){m5(e)?this._injectedTextDecorationsTree.delete(e):p5(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){m5(e)?this._injectedTextDecorationsTree.resolveNode(e,t):p5(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}function W1(r){return r.replace(/[^a-z0-9\-_]/gi," ")}class soe{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class oEe extends soe{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Wd.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class aEe extends soe{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?We.fromHex(e):t.getColor(e.id)}}class jk{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof jk?e:new jk(e)}}class mi{constructor(e){var t;this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?W1(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new oEe(e.overviewRuler):null,this.minimap=e.minimap?new aEe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?W1(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?W1(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?W1(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?W1(e.marginClassName):null,this.inlineClassName=e.inlineClassName?W1(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?W1(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?W1(e.afterContentClassName):null,this.after=e.after?jk.from(e.after):null,this.before=e.before?jk.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1}static register(e){return new mi(e)}static createDynamic(e){return new mi(e)}}mi.EMPTY=mi.register({description:"empty"});const SY=[mi.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),mi.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),mi.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),mi.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function LY(r){return r instanceof mi?r:mi.createDynamic(r)}class lEe extends Je{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Ae),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class uEe extends Je{constructor(){super(),this._fastEmitter=this._register(new Ae),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Ae),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const cEe=()=>!0,EY=()=>!1,dEe=r=>r===" "||r==="	";class Wg{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const i=n.options,s=i.get(130);this.readOnly=i.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=i.get(103),this.lineHeight=i.get(58),this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=i.get(115),this.wordSeparators=i.get(116),this.emptySelectionClipboard=i.get(32),this.copyWithSyntaxHighlighting=i.get(21),this.multiCursorMergeOverlapping=i.get(68),this.multiCursorPaste=i.get(70),this.autoClosingBrackets=i.get(5),this.autoClosingQuotes=i.get(8),this.autoClosingDelete=i.get(6),this.autoClosingOvertype=i.get(7),this.autoSurround=i.get(11),this.autoIndent=i.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:Wg._getShouldAutoClose(e,this.autoClosingQuotes),bracket:Wg._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=hr.getAutoClosingPairs(e);let o=Wg._getSurroundingPairs(e);if(o)for(const a of o)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(130)||e.hasChanged(116)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(115)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=Wg._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Vd.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return hr.getElectricCharacters(e)}catch(t){return Jn(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return dEe;case"languageDefined":return Wg._getLanguageDefinedShouldAutoClose(e);case"always":return cEe;case"never":return EY}}static _getLanguageDefinedShouldAutoClose(e){try{const t=hr.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return Jn(t),EY}}static _getSurroundingPairs(e){try{return hr.getSurroundingPairs(e)}catch(t){return Jn(t),null}}}class ll{constructor(e,t,n,i){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=i,this.selection=ll._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new ll(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new ze(t,n),i):new ll(new se(t,n,t,n),i,new ze(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?un.fromPositions(e.getStartPosition(),t):un.fromPositions(e.getEndPosition(),t)}}class xY{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}class hEe{constructor(e){this.modelState=e,this.viewState=null}}class fEe{constructor(e){this.modelState=null,this.viewState=e}}let Ii=class ooe{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new hEe(e)}static fromViewState(e){return new fEe(e)}static fromModelSelection(e){const t=un.liftSelection(e),n=new ll(se.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return ooe.fromModelState(n)}static fromModelSelections(e){let t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class Dd{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function lE(r){return r==="'"||r==='"'||r==="`"}class qk{static whitespaceVisibleColumn(e,t,n){const i=e.length;let s=0,o=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[o,a,s];switch(s%n===0&&(o=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=ls.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===i?[o,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const s=e.length,[o,a,l]=qk.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let u;switch(i){case 0:u=!0;break;case 1:u=!1;break;case 2:if(l%n===0)return t;u=l%n<=n/2;break}if(u){if(o===-1)return-1;let p=a;for(let v=o;v<s;++v){if(p===a+n)return o;switch(e.charCodeAt(v)){case 32:p+=1;break;case 9:p=ls.nextRenderTabStop(p,n);break;default:return-1}}return p===a+n?o:-1}const d=ls.nextRenderTabStop(l,n);let h=l;for(let p=t;p<s;p++){if(h===d)return p;switch(e.charCodeAt(p)){case 32:h+=1;break;case 9:h=ls.nextRenderTabStop(h,n);break;default:return-1}}return h===d?s:-1}}class K1{constructor(e=null){this.hitTarget=e,this.type=0}}class Q6{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var uw;(function(r){function e(t,n,i){const s=t.getPositionFromDOMInfo(n,i);return s?new Q6(s,n,null):new K1(n)}r.createFromDOMInfo=e})(uw||(uw={}));class gEe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class sm{constructor(e,t,n=0,i=null,s=null,o=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=i,!s&&i&&(s=new se(i.lineNumber,i.column,i.lineNumber,i.column)),this.range=s,this.detail=o}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return sm.toString(this)}}class Tg{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class _x{constructor(e,t,n){this.model=e.model;const i=e.configuration.options;this.layoutInfo=i.get(130),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(58),this.stickyTabStops=i.get(103),this.typicalHalfwidthCharacterWidth=i.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return _x.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,s=e.model.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==s&&(l=new ze(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new ze(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<i?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.model.getLineCount(),s=this._context.model.getLineMaxColumn(i);return{range:new se(i,s,i,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new se(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return _x._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class pEe{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,nu._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class c$ extends pEe{constructor(e,t,n,i){super(e,t,n),this._ctx=e,i?(this.target=i,this.targetPath=Tv.collect(i,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,i=null){let s=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(s=ls.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new sm(this.target,e,s,t,n,i)}withTarget(e){return new c$(this._ctx,this.editorPos,this.pos,e)}}const DY={isAfterLines:!0};function _5(r){return{isAfterLines:!1,horizontalDistanceToText:r}}class nu{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Tv.collect(t,this._viewHelper.viewDomNode);return!!(Tg.isChildOfContentWidgets(n)||Tg.isChildOfOverflowingContentWidgets(n)||Tg.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i){const s=new _x(this._context,this._viewHelper,e),o=new c$(s,t,n,i);try{return nu._createMouseTarget(s,o,!1)}catch{return o.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const o=nu._doHitTest(e,t);return o.type===1?nu.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const i=t;let s=null;return s=s||nu._hitTestContentWidget(e,i),s=s||nu._hitTestOverlayWidget(e,i),s=s||nu._hitTestMinimap(e,i),s=s||nu._hitTestScrollbarSlider(e,i),s=s||nu._hitTestViewZone(e,i),s=s||nu._hitTestMargin(e,i),s=s||nu._hitTestViewCursor(e,i),s=s||nu._hitTestTextArea(e,i),s=s||nu._hitTestViewLines(e,i,n),s=s||nu._hitTestScrollbar(e,i),s||t.fulfill(0)}static _hitTestContentWidget(e,t){if(Tg.isChildOfContentWidgets(t.targetPath)||Tg.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(Tg.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfill(6,i.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const o of n){if(i<o.contentLeft||i>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=s&&s<=a+o.height)return t.fulfill(6,o.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfill(i,n.position,null,n)}return null}static _hitTestTextArea(e,t){return Tg.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let s=Math.abs(t.pos.x-t.editorPos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,i,n.range,o):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,i,n.range,o):(s-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,i,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!Tg.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new ze(1,1),null,DY);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return t.fulfill(7,new ze(s,o),null,DY)}if(n){if(Tg.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(s)===0){const a=e.getLineWidth(s),l=_5(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new ze(s,1),null,l)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const a=_5(t.mouseContentHorizontalOffset-o),l=new ze(s,e.model.getLineMaxColumn(s));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}const i=nu._doHitTest(e,t);return i.type===1?nu.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(Tg.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(n);return t.fulfill(11,new ze(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(Tg.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(i);return t.fulfill(11,new ze(i,s))}}return null}static _hitTestScrollbar(e,t){if(Tg.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(n);return t.fulfill(11,new ze(n,i))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,i=n.get(130),s=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-i.contentLeft;return nu._getMouseColumn(s,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,s){const o=i.lineNumber,a=i.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const E=_5(t.mouseContentHorizontalOffset-l);return t.fulfill(7,i,null,E)}const u=e.visibleRangeForPosition(o,a);if(!u)return t.fulfill(0,i);const d=u.left;if(t.mouseContentHorizontalOffset===d)return t.fulfill(6,i,null,{mightBeForeignElement:!!s});const h=[];if(h.push({offset:u.left,column:a}),a>1){const E=e.visibleRangeForPosition(o,a-1);E&&h.push({offset:E.left,column:a-1})}const p=e.model.getLineMaxColumn(o);if(a<p){const E=e.visibleRangeForPosition(o,a+1);E&&h.push({offset:E.left,column:a+1})}h.sort((E,k)=>E.offset-k.offset);const v=t.pos.toClientCoordinates(),C=n.getBoundingClientRect(),S=C.left<=v.clientX&&v.clientX<=C.right;for(let E=1;E<h.length;E++){const k=h[E-1],D=h[E];if(k.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=D.offset){const O=new se(o,k.column,o,D.column);return t.fulfill(6,i,O,{mightBeForeignElement:!S||!!s})}}return t.fulfill(6,i,null,{mightBeForeignElement:!S||!!s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let o=t.pos.y+(s-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+e.layoutInfo.height&&(o=t.editorPos.y+e.layoutInfo.height-1);const a=new $U(t.pos.x,o),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=LC(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=mEe(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new K1;const s=i.startContainer;if(s.nodeType===s.TEXT_NODE){const o=s.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===ov.CLASS_NAME?uw.createFromDOMInfo(e,o,i.startOffset):new K1(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const o=s.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===ov.CLASS_NAME?uw.createFromDOMInfo(e,s,s.textContent.length):new K1(s)}return new K1}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,s=i?i.parentNode:null,o=s?s.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===ov.CLASS_NAME?uw.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new K1(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,s=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,o=i?i.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(s===ov.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return uw.createFromDOMInfo(e,l,0)}else if(a===ov.CLASS_NAME)return uw.createFromDOMInfo(e,n.offsetNode,0)}return new K1(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.getTextModelOptions(),s=qk.atomicPosition(n,e.column-1,i,2);return s!==-1?new ze(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new K1;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const i=e.model.getInjectedTextAt(n.position),s=e.model.normalizePosition(n.position,2);(i||!s.equals(n.position))&&(n=new Q6(s,n.spanNode,i))}return n.type===1&&e.stickyTabStops&&(n=new Q6(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function mEe(r,e,t){const n=document.createRange();let i=r.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const s=i.getBoundingClientRect(),o=window.getComputedStyle(i,null).getPropertyValue("font"),a=i.innerText;let l=s.left,u=0,d;if(e>s.left+s.width)u=a.length;else{const h=Sw.getInstance();for(let p=0;p<a.length+1;p++){if(d=h.getCharWidth(a.charAt(p),o)/2,l+=d,e<l){u=p;break}l+=d}}n.setStart(i.firstChild,u),n.setEnd(i.firstChild,u)}return n}class Sw{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Sw._INSTANCE||(Sw._INSTANCE=new Sw),Sw._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const o=i.measureText(e).width;return this._cache[n]=o,o}}Sw._INSTANCE=null;function mR(r){return function(e,t){let n=!1;return r&&(n=r.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class cS extends p2{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new nu(this._context,n),this._mouseDownOperation=this._register(new _Ee(this._context,this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(130).height;const i=new yye(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(i.onMouseMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),mR(this.mouseTargetFactory),cS.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(i.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)));const s=o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(67))return;const a=new ax(o);if(zi?(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey:o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){const u=Fb.getZoomLevel(),d=a.deltaY>0?1:-1;Fb.setZoomLevel(u+d),a.preventDefault(),a.stopPropagation()}};this._register(St(this.viewHelper.viewDomNode,xn.MOUSE_WHEEL,s,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(130)){const t=this._context.configuration.options.get(130).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new dse(e,t).toPageCoordinates(),s=hse(this.viewHelper.viewDomNode);return i.y<s.y||i.y>s.y+s.height||i.x<s.x||i.x>s.x+s.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,i,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=LC(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,i=t.type===2||t.type===3||t.type===4,s=t.type===3,o=this._context.configuration.options.get(97),a=t.type===8||t.type===5,l=t.type===9;let u=e.leftButton||e.middleButton;zi&&e.leftButton&&e.ctrlKey&&(u=!1);const d=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(n||s&&o))d(),this._mouseDownOperation.start(t.type,e);else if(i)e.preventDefault();else if(a){const h=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(d(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}cS.MOUSE_MOVE_MINIMUM_TIME=100;class _Ee extends Je{constructor(e,t,n,i,s){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=i,this._getMouseColumn=s,this._mouseMoveMonitor=this._register(new Sye(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new cc),this._mouseState=new E4,this._currentSelection=new un(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const i=this._context.configuration.options;if(!i.get(80)&&i.get(31)&&!i.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,mR(null),s=>this._onMouseDownThenMove(s),s=>{const o=this._findMousePosition(this._lastMouseEvent,!0);s&&s instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,mR(null),s=>this._onMouseDownThenMove(s),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,i=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(i.getCurrentScrollTop()-(t.y-e.posy),0),l=_x.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return new sm(null,13,s,d)}const u=i.getLineNumberAtVerticalOffset(a);return new sm(null,13,s,new ze(u,1))}if(e.posy>t.y+t.height){const a=i.getCurrentScrollTop()+(e.posy-t.y),l=_x.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return new sm(null,13,s,d)}const u=i.getLineNumberAtVerticalOffset(a);return new sm(null,13,s,new ze(u,n.getLineMaxColumn(u)))}const o=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new sm(null,13,s,new ze(o,1)):e.posx>t.x+t.width?new sm(null,13,s,new ze(o,n.getLineMaxColumn(o))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const o=this._helpPositionJumpOverViewZone(i.detail);if(o)return new sm(i.element,i.type,i.mouseColumn,o,null,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new ze(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class E4{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>E4.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}E4.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var Hg;(function(r){r.text="text/plain",r.binary="application/octet-stream",r.unknown="application/unknown",r.markdown="text/markdown",r.latex="text/latex"})(Hg||(Hg={}));let Vw=[],d$=[],_R=[];function NA(r,e=!1){const t=vEe(r);Vw.push(t),t.userConfigured?_R.push(t):d$.push(t),e&&!t.userConfigured&&Vw.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function vEe(r){return{id:r.id,mime:r.mime,filename:r.filename,extension:r.extension,filepattern:r.filepattern,firstline:r.firstline,userConfigured:r.userConfigured,filenameLowercase:r.filename?r.filename.toLowerCase():void 0,extensionLowercase:r.extension?r.extension.toLowerCase():void 0,filepatternLowercase:r.filepattern?Ase(r.filepattern.toLowerCase()):void 0,filepatternOnPath:r.filepattern?r.filepattern.indexOf(oa.sep)>=0:!1}}function bEe(r){r?(Vw=Vw.filter(e=>!e.userConfigured),_R=[]):(Vw=[],d$=[],_R=[])}function CEe(r,e){let t;if(r)switch(r.scheme){case wi.file:t=r.fsPath;break;case wi.data:t=TC.parseMetaData(r).get(TC.META_DATA_LABEL);break;default:t=r.path}if(!t)return[Hg.unknown];t=t.toLowerCase();const n=Tw(t),i=IY(t,n,_R);if(i)return[i,Hg.text];const s=IY(t,n,d$);if(s)return[s,Hg.text];if(e){const o=yEe(e);if(o)return[o,Hg.text]}return[Hg.unknown]}function IY(r,e,t){var n;let i=null,s=null,o=null;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const u=l.filepatternOnPath?r:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,u)&&(s=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}return i?i.mime:s?s.mime:o?o.mime:null}function yEe(r){if(EU(r)&&(r=r.substr(1)),r.length>0)for(let e=Vw.length-1;e>=0;e--){const t=Vw[e];if(!t.firstline)continue;const n=r.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class za{constructor(e,t,n,i,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=i,this.selectionEndPosition=s}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new za(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new za(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,i,-1)}if(e>=this.selectionEnd){const i=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)i++;return[e,n*t.length,i]}static selectedText(e){return new za(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let i=e.value,s=e.selectionStart,o=e.selectionEnd,a=t.value,l=t.selectionStart,u=t.selectionEnd;const d=i.substring(o),h=a.substring(u),p=WM(d,h);a=a.substring(0,a.length-p),i=i.substring(0,i.length-p);const v=i.substring(0,s),C=a.substring(0,l),S=cx(v,C);if(a=a.substring(S),i=i.substring(S),l-=S,s-=S,u-=S,o-=S,n&&l===u&&i.length>0){let k=null;if(l===a.length?a.startsWith(i)&&(k=a.substring(i.length)):a.endsWith(i)&&(k=a.substring(0,a.length-i.length)),k!==null&&k.length>0&&(/\uFE0F/.test(k)||obe(k)))return{text:k,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===u){if(i===a&&s===0&&o===i.length&&l===a.length&&a.indexOf(`
`)===-1&&lbe(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const k=v.length-S;return{text:a,replacePrevCharCnt:k,replaceNextCharCnt:0,positionDelta:0}}const E=o-s;return{text:a,replacePrevCharCnt:E,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(cx(e.value,t.value),e.selectionEnd),i=Math.min(WM(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-i),o=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-o.length}}}za.EMPTY=new za("",0,0,null,null);class bE{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,s=n+t;return new se(i,1,s+1,1)}static fromEditorSelection(e,t,n,i,s){const o=bE._getPageOfLine(n.startLineNumber,i),a=bE._getRangeForPage(o,i),l=bE._getPageOfLine(n.endLineNumber,i),u=bE._getRangeForPage(l,i),d=a.intersectRanges(new se(1,1,n.startLineNumber,n.startColumn));let h=t.getValueInRange(d,1);const p=t.getLineCount(),v=t.getLineMaxColumn(p),C=u.intersectRanges(new se(n.endLineNumber,n.endColumn,p,v));let S=t.getValueInRange(C,1),E;if(o===l||o+1===l)E=t.getValueInRange(n,1);else{const k=a.intersectRanges(n),D=u.intersectRanges(n);E=t.getValueInRange(k,1)+String.fromCharCode(8230)+t.getValueInRange(D,1)}return s&&(h.length>500&&(h=h.substring(h.length-500,h.length)),S.length>500&&(S=S.substring(0,500)),E.length>2*500&&(E=E.substring(0,500)+String.fromCharCode(8230)+E.substring(E.length-500,E.length))),new za(h+E+S,h.length,h.length+E.length,new ze(n.startLineNumber,n.startColumn),new ze(n.endLineNumber,n.endColumn))}}var vR;(function(r){r.Tap="-monaco-textarea-synthetic-tap"})(vR||(vR={}));const J6={forceCopyWithSyntaxHighlighting:!1};class Kk{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}Kk.INSTANCE=new Kk;class wEe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class SEe extends Je{constructor(e,t,n,i){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._onFocus=this._register(new Ae),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Ae),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Ae),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Ae),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Ae),this.onCut=this._onCut.event,this._onPaste=this._register(new Ae),this.onPaste=this._onPaste.event,this._onType=this._register(new Ae),this.onType=this._onType.event,this._onCompositionStart=this._register(new Ae),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Ae),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Ae),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Ae),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new Qr(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Qr(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=za.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null,this._nextCommand=0;let s=null;this._register(this._textArea.onKeyDown(o=>{const a=new Ts(o);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),s=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(o=>{const a=new Ts(o);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(o=>{const a=new wEe;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===o.data&&(s&&s.equals(109)&&(s.code==="ArrowRight"||s.code==="ArrowLeft")||this._browser.isFirefox)){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(this._browser.isAndroid){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._onCompositionStart.fire({revealDeltaColumns:0})})),this._register(this._textArea.onCompositionUpdate(o=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const u=za.readFromTextArea(this._textArea),d=za.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(d),this._onCompositionUpdate.fire(o);return}const l=a.handleCompositionUpdate(o.data);this._textAreaState=za.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionUpdate.fire(o)})),this._register(this._textArea.onCompositionEnd(o=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const u=za.readFromTextArea(this._textArea),d=za.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(o.data);this._textAreaState=za.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=za.readFromTextArea(this._textArea),l=za.deduceInput(this._textAreaState,a,this._OS===2);if(l.replacePrevCharCnt===0&&l.text.length===1&&ba(l.text.charCodeAt(0)))return;this._textAreaState=a;const u=l.text===""&&l.replacePrevCharCnt===0&&l.replaceNextCharCnt===0&&l.positionDelta===0;this._nextCommand===0?u||this._onType.fire(l):(u||this._firePaste(l.text,null),this._nextCommand=0)})),this._register(this._textArea.onCut(o=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(o),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(o=>{this._ensureClipboardGetsEditorSelection(o)})),this._register(this._textArea.onPaste(o=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),dT.canUseTextData(o)){const[a,l]=dT.getTextData(o);a!==""&&this._firePaste(a,l)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",za.EMPTY),this._nextCommand=1})),this._register(this._textArea.onFocus(()=>{const o=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!o&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return St(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const u=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(u[0],u[1],u[2]),h=this._textAreaState.deduceEditorPosition(l),p=this._host.deduceModelPosition(h[0],h[1],h[2]),v=new un(d.lineNumber,d.column,p.lineNumber,p.column);this._onSelectionChangeRequest.fire(v)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(dT.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(Kk.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),!dT.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",za.selectedText(t.text));return}dT.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=Kk.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class dT{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(Hg.text);let n=null;const i=e.clipboardData.getData("vscode-editor-data");if(typeof i=="string")try{n=JSON.parse(i),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,i){if(e.clipboardData){e.clipboardData.setData(Hg.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(i)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class LEe extends Je{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(Qp(this._actual,"keydown")).event,this.onKeyUp=this._register(Qp(this._actual,"keyup")).event,this.onCompositionStart=this._register(Qp(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(Qp(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(Qp(this._actual,"compositionend")).event,this.onInput=this._register(Qp(this._actual,"input")).event,this.onCut=this._register(Qp(this._actual,"cut")).event,this.onCopy=this._register(Qp(this._actual,"copy")).event,this.onPaste=this._register(Qp(this._actual,"paste")).event,this.onFocus=this._register(Qp(this._actual,"focus")).event,this.onBlur=this._register(Qp(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Ae),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(St(this._actual,vR.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=LC(this._actual);return e?e.activeElement===this._actual:hU(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let s=null;const o=LC(i);o?s=o.activeElement:s=document.activeElement;const a=s===i,l=i.selectionStart,u=i.selectionEnd;if(a&&l===t&&u===n){Bd&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),Bd&&window.parent!==window&&i.focus();return}try{const d=M0e(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),R0e(i,d)}catch{}}}class EEe extends cS{constructor(e,t,n){super(e,t,n),this._register(Rr.addTarget(this.viewHelper.linesContentDomNode)),this._register(St(this.viewHelper.linesContentDomNode,as.Tap,s=>this.onTap(s))),this._register(St(this.viewHelper.linesContentDomNode,as.Change,s=>this.onChange(s))),this._register(St(this.viewHelper.linesContentDomNode,as.Contextmenu,s=>this._onContextMenu(new aS(s,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(St(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const o=s.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new wye(this.viewHelper.viewDomNode);this._register(i.onPointerMoveThrottled(this.viewHelper.viewDomNode,s=>this._onMouseMove(s),mR(this.mouseTargetFactory),cS.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new aS(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class xEe extends cS{constructor(e,t,n){super(e,t,n),this._register(Rr.addTarget(this.viewHelper.linesContentDomNode)),this._register(St(this.viewHelper.linesContentDomNode,as.Tap,i=>this.onTap(i))),this._register(St(this.viewHelper.linesContentDomNode,as.Change,i=>this.onChange(i))),this._register(St(this.viewHelper.linesContentDomNode,as.Contextmenu,i=>this._onContextMenu(new aS(i,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new aS(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(vR.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class DEe extends Je{constructor(e,t,n){super(),Lv&&UP.pointerEvents?this.handler=this._register(new EEe(e,t,n)):window.TouchEvent?this.handler=this._register(new xEe(e,t,n)):this.handler=this._register(new cS(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class aD extends p2{}class vx extends aD{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new ze(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(130);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new ze(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Hc?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s='<div class="'+vx.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',o=this._context.model.getLineCount(),a=[];for(let l=n;l<=i;l++){const u=l-n;if(!this._renderFinalNewline&&l===o&&this._context.model.getLineLength(l)===0){a[u]="";continue}const d=this._getLineRenderLineNumber(l);d?l===this._activeLineNumber?a[u]='<div class="active-line-number '+vx.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+d+"</div>":a[u]=s+d+"</div>":a[u]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}vx.CLASS_NAME="line-numbers";ds((r,e)=>{const t=r.getColor(Yse);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=r.getColor(LLe);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class dS extends Ff{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=tr(document.createElement("div")),this._domNode.setClassName(dS.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=tr(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(dS.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}dS.CLASS_NAME="glyph-margin";dS.OUTER_CLASS_NAME="margin";const Hw="monaco-mouse-cursor-text";class h${constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new h$(this.top,this.left,e)}}const hT=Bd;class IEe extends Ff{constructor(e,t,n){super(e),this._primaryCursorPosition=new ze(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const i=this._context.configuration.options,s=i.get(130);this._setAccessibilityOptions(i),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=i.get(43),this._lineHeight=i.get(58),this._emptySelectionClipboard=i.get(32),this._copyWithSyntaxHighlighting=i.get(21),this._visibleTextArea=null,this._selections=[new un(1,1,1,1)],this._modelSelections=[new un(1,1,1,1)],this._lastRenderPosition=null,this.textArea=tr(document.createElement("textarea")),Tv.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Hw}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",L("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),i.get(30)&&i.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=tr(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:u=>this._context.model.getLineMaxColumn(u),getValueInRange:(u,d)=>this._context.model.getValueInRange(u,d)},a={getDataToCopy:u=>{const d=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Nl),h=this._context.model.getEOL(),p=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),v=Array.isArray(d)?d:null,C=Array.isArray(d)?d.join(h):d;let S,E=null;if(u&&(J6.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&C.length<65536)){const k=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);k&&(S=k.html,E=k.mode)}return{isFromEmptySelection:p,multicursorText:v,text:C,html:S,mode:E}},getScreenReaderContent:u=>{if(this._accessibilitySupport===1){if(zi){const d=this._selections[0];if(d.isEmpty()){const h=d.getStartPosition();let p=this._getWordBeforePosition(h);if(p.length===0&&(p=this._getCharacterBeforePosition(h)),p.length>0)return new za(p,p.length,p.length,h,h)}}return za.EMPTY}if(Mie){const d=this._selections[0];if(d.isEmpty()){const h=d.getStartPosition(),[p,v]=this._getAndroidWordAtPosition(h);if(p.length>0)return new za(p,v,v,h,h)}return za.EMPTY}return bE.fromEditorSelection(u,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(u,d,h)=>this._context.model.deduceModelPositionRelativeToViewPosition(u,d,h)},l=this._register(new LEe(this.textArea.domNode));this._textAreaInput=this._register(new SEe(a,l,_f,jve)),this._register(this._textAreaInput.onKeyDown(u=>{this._viewController.emitKeyDown(u)})),this._register(this._textAreaInput.onKeyUp(u=>{this._viewController.emitKeyUp(u)})),this._register(this._textAreaInput.onPaste(u=>{let d=!1,h=null,p=null;u.metadata&&(d=this._emptySelectionClipboard&&!!u.metadata.isFromEmptySelection,h=typeof u.metadata.multicursorText<"u"?u.metadata.multicursorText:null,p=u.metadata.mode),this._viewController.paste(u.text,d,h,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(u=>{u.replacePrevCharCnt||u.replaceNextCharCnt||u.positionDelta?this._viewController.compositionType(u.text,u.replacePrevCharCnt,u.replaceNextCharCnt,u.positionDelta):this._viewController.type(u.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(u=>{this._viewController.setSelection(u)})),this._register(this._textAreaInput.onCompositionStart(u=>{const d=this._selections[0].startLineNumber,h=this._selections[0].startColumn+u.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new se(d,h,d,h),0,1);const p=this._viewHelper.visibleRangeForPositionRelativeToEditor(d,h);p&&(this._visibleTextArea=new h$(this._context.viewLayout.getVerticalOffsetForLineNumber(d),p.left,hT?0:1),this.textArea.domNode.scrollLeft=0,this._render()),this.textArea.setClassName(`inputarea ${Hw} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(u=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(TEe(u.data,this._fontInfo)),this.textArea.domNode.scrollLeft=0,this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${Hw}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),i=Rf(t);let s=!0,o=e.column,a=!0,l=e.column,u=0;for(;u<50&&(s||a);){if(s&&o<=1&&(s=!1),s){const d=n.charCodeAt(o-2);i.get(d)!==0?s=!1:o--}if(a&&l>n.length&&(a=!1),a){const d=n.charCodeAt(l-1);i.get(d)!==0?a=!1:l++}u++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=Rf(this._context.configuration.options.get(116));let i=e.column,s=0;for(;i>1;){const o=t.charCodeAt(i-2);if(n.get(o)!==0||s>50)return t.substring(i-1,e.column-1);s++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!ba(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?L("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Hc?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Pm.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new ze(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(zi){this._renderInsideEditor(this._primaryCursorPosition,t,e,hT?0:1,this._lineHeight),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._renderInsideEditor(this._primaryCursorPosition,t,e,hT?0:1,hT?0:1)}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderInsideEditor(e,t,n,i,s){this._lastRenderPosition=e;const o=this.textArea,a=this.textAreaCover;lc.applyFontInfo(o,this._fontInfo),o.setTop(t),o.setLeft(n),o.setWidth(i),o.setHeight(s),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(lc.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),hT){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+dS.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+vx.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function TEe(r,e){const n=document.createElement("canvas").getContext("2d");n.font=kEe(e);const i=n.measureText(r);return Bd?i.width+2:i.width}function kEe(r){return NEe("normal",r.fontWeight,r.fontSize,r.lineHeight,r.fontFamily)}function NEe(r,e,t,n,i){return`${r} normal ${e} ${t}px / ${n}px ${i}`}class cw{static columnSelect(e,t,n,i,s,o){let a=Math.abs(s-n)+1,l=n>s,u=i>o,d=i<o,h=[];for(let p=0;p<a;p++){let v=n+(l?-p:p),C=ls.columnFromVisibleColumn2(e,t,v,i),S=ls.columnFromVisibleColumn2(e,t,v,o),E=ls.visibleColumnFromColumn2(e,t,new ze(v,C)),k=ls.visibleColumnFromColumn2(e,t,new ze(v,S));d&&(E>o||k<i)||u&&(k>i||E<o)||h.push(new ll(new se(v,C,v,C),0,new ze(v,S),0))}if(h.length===0)for(let p=0;p<a;p++){const v=n+(l?-p:p),C=t.getLineMaxColumn(v);h.push(new ll(new se(v,C,v,C),0,new ze(v,C),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:s,toVisualColumn:o}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,cw.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=s;l<=o;l++){const u=t.getLineMaxColumn(l),d=ls.visibleColumnFromColumn2(e,t,new ze(l,u));i=Math.max(i,d)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const s=i?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const s=i?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class xl{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return un.fromPositions(i.getEndPosition())}}class AEe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return un.fromRange(i,0)}}class AA{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return un.fromPositions(i.getStartPosition())}}class UO{constructor(e,t,n,i,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return un.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class f${constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class v5{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class ur{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-ibe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new ze(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),o=qk.atomicPosition(s,t.column-1,n,0);if(o!==-1&&o+1>=i)return new ze(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?ur.leftPositionAtomicSoftTabs(t,n,e.tabSize):ur.leftPosition(t,n);return new v5(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,s){let o,a;if(n.hasSelection()&&!i)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(s-1)),u=t.normalizePosition(ur.clipPositionColumn(l,t),0),d=ur.left(e,t,u);o=d.lineNumber,a=d.column}return n.move(i,o,a,0)}static clipPositionColumn(e,t){return new ze(e.lineNumber,ur.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+VM(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new ze(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,s){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=qk.atomicPosition(o,n-1,i,1);if(a!==-1)return new ze(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?ur.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):ur.rightPosition(t,n.lineNumber,n.column);return new v5(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,s){let o,a;if(n.hasSelection()&&!i)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,s-1),u=t.normalizePosition(ur.clipPositionColumn(l,t),1),d=ur.right(e,t,u);o=d.lineNumber,a=d.column}return n.move(i,o,a,0)}static vertical(e,t,n,i,s,o,a){const l=ls.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,u=t.getLineCount(),d=n===1&&i===1,h=n===u&&i===t.getLineMaxColumn(n),p=o<n?d:h;return n=o,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>u?(n=u,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=ls.columnFromVisibleColumn2(e,t,n,l),p?s=0:s=l-ls.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),new v5(n,i,s)}static down(e,t,n,i,s,o,a){return this.vertical(e,t,n,i,s,n+o,a)}static moveDown(e,t,n,i,s){let o,a;n.hasSelection()&&!i?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=ur.down(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){let i=n.selection,s=ur.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=ur.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new ll(new se(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new ze(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,i,s,o,a){return this.vertical(e,t,n,i,s,n-o,a)}static moveUp(e,t,n,i,s){let o,a;n.hasSelection()&&!i?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);let l=ur.up(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let i=n.selection,s=ur.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=ur.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new ll(new se(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new ze(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,i){const s=t.getLineCount();let o=n.position.lineNumber;for(;o<s&&this._isBlankLine(t,o);)o++;for(;o<s&&!this._isBlankLine(t,o);)o++;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,i){let s=n.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o,l;return n.position.column===a?l=o:l=a,n.move(i,s,l,0)}static moveToEndOfLine(e,t,n,i,s){let o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(i,o,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){let s=t.getLineCount(),o=t.getLineMaxColumn(s);return n.move(i,s,o,0)}}class hS{static deleteRight(e,t,n,i){let s=[],o=e!==3;for(let a=0,l=i.length;a<l;a++){const u=i[a];let d=u;if(d.isEmpty()){let h=u.getPosition(),p=ur.right(t,n,h);d=new se(p.lineNumber,p.column,h.lineNumber,h.column)}if(d.isEmpty()){s[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(o=!0),s[a]=new xl(d,"")}return[o,s]}static isAutoClosingPairDelete(e,t,n,i,s,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,u=o.length;l<u;l++){const d=o[l],h=d.getPosition();if(!d.isEmpty())return!1;const p=s.getLineContent(h.lineNumber);if(h.column<2||h.column>=p.length+1)return!1;const v=p.charAt(h.column-2),C=i.get(v);if(!C)return!1;if(lE(v)){if(n==="never")return!1}else if(t==="never")return!1;const S=p.charAt(h.column-1);let E=!1;for(const k of C)k.open===v&&k.close===S&&(E=!0);if(!E)return!1;if(e==="auto"){let k=!1;for(let D=0,O=a.length;D<O;D++){const H=a[D];if(h.lineNumber===H.startLineNumber&&h.column===H.startColumn){k=!0;break}}if(!k)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].getPosition(),l=new se(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[s]=new xl(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,s))return this._runAutoClosingPairDelete(t,n,i);const o=[];let a=e!==2;for(let l=0,u=i.length;l<u;l++){let d=hS.getDeleteRange(i[l],n,t);if(d.isEmpty()){o[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),o[l]=new xl(d,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const s=t.getLineContent(i.lineNumber),o=oc(s),a=o===-1?s.length+1:o+1;if(i.column<=a){const l=ls.visibleColumnFromColumn2(n,t,i),u=ls.prevIndentTabStop(l,n.indentSize),d=ls.columnFromVisibleColumn2(n,t,i.lineNumber,u);return new se(i.lineNumber,d,i.lineNumber,i.column)}}return se.fromPositions(hS.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=hbe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new ze(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let i=[],s=null;n.sort((o,a)=>ze.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){let u=l.getPosition(),d,h,p,v;u.lineNumber<t.getLineCount()?(d=u.lineNumber,h=1,p=u.lineNumber+1,v=1):u.lineNumber>1&&(s==null?void 0:s.endLineNumber)!==u.lineNumber?(d=u.lineNumber-1,h=t.getLineMaxColumn(u.lineNumber-1),p=u.lineNumber,v=t.getLineMaxColumn(u.lineNumber)):(d=u.lineNumber,h=1,p=u.lineNumber,v=t.getLineMaxColumn(u.lineNumber));let C=new se(d,h,p,v);s=C,C.isEmpty()?i[o]=null:i[o]=new xl(C,"")}else i[o]=null;else i[o]=new xl(l,"")}return new Dd(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class er{static _createWord(e,t,n,i,s){return{start:i,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let s=n.column-2;s>=0;s--){let o=e.charCodeAt(s),a=t.get(o);if(a===0){if(i===2)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){let s=e.length;for(let o=i;o<s;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return o}return s}static _findNextWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0,s=e.length;for(let o=n.column-1;o<s;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,s-1),s):null}static _findStartOfWord(e,t,n,i){for(let s=i;s>=0;s--){let o=e.charCodeAt(s),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,i){let s=n.lineNumber,o=n.column;o===1&&s>1&&(s=s-1,o=t.getLineMaxColumn(s));let a=er._findPreviousWordOnLine(e,t,new ze(s,o));if(i===0)return new ze(s,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=er._findPreviousWordOnLine(e,t,new ze(s,a.start+1))),new ze(s,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=er._findPreviousWordOnLine(e,t,new ze(s,a.start+1));return new ze(s,a?a.start+1:1)}return a&&o<=a.end+1&&(a=er._findPreviousWordOnLine(e,t,new ze(s,a.start+1))),new ze(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new ze(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a===95&&l!==95)return new ze(n,o);if(nC(a)&&J_(l))return new ze(n,o);if(J_(a)&&J_(l)&&o+1<i){const u=s.charCodeAt(o);if(nC(u))return new ze(n,o)}}return new ze(n,1)}static moveWordRight(e,t,n,i){let s=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,o=1);let l=er._findNextWordOnLine(e,t,new ze(s,o));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=er._findNextWordOnLine(e,t,new ze(s,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(s);else if(i===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=er._findNextWordOnLine(e,t,new ze(s,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(s)}else l&&!a&&o>=l.start+1&&(l=er._findNextWordOnLine(e,t,new ze(s,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(s);return new ze(s,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new ze(n+1,1):t;const s=e.getLineContent(n);for(let o=t.column+1;o<i;o++){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a!==95&&l===95)return new ze(n,o);if(nC(a)&&J_(l))return new ze(n,o);if(J_(a)&&J_(l)&&o+1<i){const u=s.charCodeAt(o);if(nC(u))return new ze(n,o)}}return new ze(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,s=Cv(n,i);return s+1<i?new se(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(hS.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new se(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new ze(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,u=a.column;if(l===1&&u===1)return null;if(o){let h=this._deleteWordLeftWhitespace(i,a);if(h)return h}let d=er._findPreviousWordOnLine(n,i,a);return t===0?d?u=d.start+1:u>1?u=1:(l--,u=i.getLineMaxColumn(l)):(d&&u<=d.end+1&&(d=er._findPreviousWordOnLine(n,i,new ze(l,d.start+1))),d?u=d.end+1:u>1?u=1:(l--,u=i.getLineMaxColumn(l))),new se(l,u,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new ze(n.positionLineNumber,n.positionColumn);let s=this._deleteInsideWordWhitespace(t,i);return s||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let o=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,o))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;o+1<i&&this._charAtIsWhitespace(n,o+1);)o++;return new se(t.lineNumber,s+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),s=i.length;if(s===0)return n.lineNumber>1?new se(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new se(n.lineNumber,1,n.lineNumber+1,1):new se(n.lineNumber,1,n.lineNumber,1);const o=h=>h.start+1<=n.column&&n.column<=h.end+1,a=(h,p)=>(h=Math.min(h,n.column),p=Math.max(p,n.column),new se(n.lineNumber,h,n.lineNumber,p)),l=h=>{let p=h.start+1,v=h.end+1,C=!1;for(;v-1<s&&this._charAtIsWhitespace(i,v-1);)C=!0,v++;if(!C)for(;p>1&&this._charAtIsWhitespace(i,p-2);)p--;return a(p,v)},u=er._findPreviousWordOnLine(e,t,n);if(u&&o(u))return l(u);const d=er._findNextWordOnLine(e,t,n);return d&&o(d)?l(d):u&&d?a(u.end+1,d.start+1):u?a(u.start+1,u.end+1):d?a(d.start+1,d.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=er._moveWordPartLeft(e,n);return new se(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let i=t;i<n;i++){let s=e.charAt(i);if(s!==" "&&s!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,s=this._findFirstNonWhitespaceChar(n,i);return i+1<s?new se(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new ze(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,u=a.column;const d=i.getLineCount(),h=i.getLineMaxColumn(l);if(l===d&&u===h)return null;if(o){let v=this._deleteWordRightWhitespace(i,a);if(v)return v}let p=er._findNextWordOnLine(n,i,a);return t===2?p?u=p.end+1:u<h||l===d?u=h:(l++,p=er._findNextWordOnLine(n,i,new ze(l,1)),p?u=p.start+1:u=i.getLineMaxColumn(l)):(p&&u>=p.start+1&&(p=er._findNextWordOnLine(n,i,new ze(l,p.end+1))),p?u=p.start+1:u<h||l===d?u=h:(l++,p=er._findNextWordOnLine(n,i,new ze(l,1)),p?u=p.start+1:u=i.getLineMaxColumn(l))),new se(l,u,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=er._moveWordPartRight(e,n);return new se(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new se(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=Rf(t),s=er._findPreviousWordOnLine(i,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return er._createWordAtPosition(e,n.lineNumber,s);const o=er._findNextWordOnLine(i,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?er._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,i,s){const o=Rf(e.wordSeparators);let a=er._findPreviousWordOnLine(o,t,s),l=er._findNextWordOnLine(o,t,s);if(!i){let v,C;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(v=a.start+1,C=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(v=l.start+1,C=l.end+1):(a?v=a.end+1:v=1,l?C=l.start+1:C=t.getLineMaxColumn(s.lineNumber)),new ll(new se(s.lineNumber,v,s.lineNumber,C),0,new ze(s.lineNumber,C),0)}let u,d;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(u=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(u=l.start+1,d=l.end+1):(u=s.column,d=s.column);let h=s.lineNumber,p;if(n.selectionStart.containsPosition(s))p=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){p=u;let v=new ze(h,p);n.selectionStart.containsPosition(v)&&(p=n.selectionStart.endColumn)}else{p=d;let v=new ze(h,p);n.selectionStart.containsPosition(v)&&(p=n.selectionStart.startColumn)}return n.move(!0,h,p,0)}}class x4 extends er{static deleteWordPartLeft(e){const t=OA([er.deleteWordLeft(e,0),er.deleteWordLeft(e,2),er._deleteWordPartLeft(e.model,e.selection)]);return t.sort(se.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=OA([er.deleteWordRight(e,0),er.deleteWordRight(e,2),er._deleteWordPartRight(e.model,e.selection)]);return t.sort(se.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=OA([er.moveWordLeft(e,t,n,0),er.moveWordLeft(e,t,n,2),er._moveWordPartLeft(t,n)]);return i.sort(ze.compare),i[2]}static moveWordPartRight(e,t,n){const i=OA([er.moveWordRight(e,t,n,0),er.moveWordRight(e,t,n,2),er._moveWordPartRight(t,n)]);return i.sort(ze.compare),i[0]}}function OA(r){return r.filter(e=>!!e)}class al{static addCursorDown(e,t,n){let i=[],s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];i[s++]=new Ii(l.modelState,l.viewState),n?i[s++]=Ii.fromModelState(ur.translateDown(e.cursorConfig,e.model,l.modelState)):i[s++]=Ii.fromViewState(ur.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){let i=[],s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];i[s++]=new Ii(l.modelState,l.viewState),n?i[s++]=Ii.fromModelState(ur.translateUp(e.cursorConfig,e.model,l.modelState)):i[s++]=Ii.fromViewState(ur.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,s=t.modelState.position.column,o=i===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Ii.fromViewState(ur.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Ii.fromModelState(ur.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=this._moveToLineEnd(e,l,n,i)}return s}static _moveToLineEnd(e,t,n,i){const s=t.viewState.position,o=e.getLineMaxColumn(s.lineNumber),a=s.column===o,l=t.modelState.position,u=e.model.getLineMaxColumn(l.lineNumber),d=o-s.column===u-l.column;return a||d?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return Ii.fromViewState(ur.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return Ii.fromModelState(ur.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){let n=[];for(let i=0,s=t.length;i<s;i++){const o=t[i],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let u=o.modelState.selection.endLineNumber,d;u===l?d=e.model.getLineMaxColumn(l):(u++,d=1),n[i]=Ii.fromModelState(new ll(new se(a,1,a,1),0,new ze(u,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=Ii.fromModelState(ur.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=Ii.fromModelState(ur.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return Ii.fromModelState(new ll(new se(1,1,1,1),0,new ze(n,i),0))}static line(e,t,n,i,s){const o=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new ze(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n||!t.modelState.hasSelection()){const u=e.model.getLineCount();let d=o.lineNumber+1,h=1;return d>u&&(d=u,h=e.model.getLineMaxColumn(d)),Ii.fromModelState(new ll(new se(o.lineNumber,1,d,h),0,new ze(d,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Ii.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>l){const u=e.getLineCount();let d=a.lineNumber+1,h=1;return d>u&&(d=u,h=e.getLineMaxColumn(d)),Ii.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,h,0))}else{const u=t.modelState.selectionStart.getEndPosition();return Ii.fromModelState(t.modelState.move(t.modelState.hasSelection(),u.lineNumber,u.column,0))}}static word(e,t,n,i){const s=e.model.validatePosition(i);return Ii.fromModelState(er.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Ii(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return Ii.fromViewState(new ll(new se(n,i,n,i),0,new ze(n,i),0))}static moveTo(e,t,n,i,s){const o=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new ze(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Ii.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,s,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,s);case 1:return o===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,s);case 2:return o===2?this._moveUpByViewLines(e,t,i,s):this._moveUpByModelLines(e,t,i,s);case 3:return o===2?this._moveDownByViewLines(e,t,i,s):this._moveDownByModelLines(e,t,i,s);case 4:return o===2?t.map(a=>Ii.fromViewState(ur.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ii.fromModelState(ur.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return o===2?t.map(a=>Ii.fromViewState(ur.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ii.fromModelState(ur.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,s){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 14:{let l=[];for(let u=0,d=t.length;u<d;u++){const h=t[u];l[u]=this.findPositionInViewportIfOutside(e,h,o,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){let s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new Ii(t.modelState,t.viewState);{let o;s>n.endLineNumber-1?o=n.endLineNumber-1:s<n.startLineNumber?o=n.startLineNumber:o=s;const a=ur.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Ii.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(s=>Ii.fromViewState(ur.moveLeft(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[s]=Ii.fromViewState(ur.moveLeft(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveRight(e,t,n,i){return t.map(s=>Ii.fromViewState(ur.moveRight(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineRight(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[s]=Ii.fromViewState(ur.moveRight(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveDownByViewLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ii.fromViewState(ur.moveDown(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveDownByModelLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ii.fromModelState(ur.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveUpByViewLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ii.fromViewState(ur.moveUp(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveUpByModelLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Ii.fromModelState(ur.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveToViewPosition(e,t,n,i,s){return Ii.fromViewState(t.viewState.move(n,i,s,0))}static _moveToModelPosition(e,t,n,i,s){return Ii.fromModelState(t.modelState.move(n,i,s,0))}static _moveToViewMinColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineMinColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineFirstNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewCenterColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewMaxColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineMaxColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineLastNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}}var bR;(function(r){const e=function(n){if(!Wc(n))return!1;let i=n;return!(!Nf(i.to)||!Od(i.select)&&!ore(i.select)||!Od(i.by)&&!Nf(i.by)||!Od(i.value)&&!tS(i.value))};r.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},r.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case r.RawDirection.Left:i=0;break;case r.RawDirection.Right:i=1;break;case r.RawDirection.Up:i=2;break;case r.RawDirection.Down:i=3;break;case r.RawDirection.PrevBlankLine:i=4;break;case r.RawDirection.NextBlankLine:i=5;break;case r.RawDirection.WrappedLineStart:i=6;break;case r.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case r.RawDirection.WrappedLineColumnCenter:i=8;break;case r.RawDirection.WrappedLineEnd:i=9;break;case r.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case r.RawDirection.ViewPortTop:i=11;break;case r.RawDirection.ViewPortBottom:i=13;break;case r.RawDirection.ViewPortCenter:i=12;break;case r.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let s=0;switch(n.by){case r.RawUnit.Line:s=1;break;case r.RawUnit.WrappedLine:s=2;break;case r.RawUnit.Character:s=3;break;case r.RawUnit.HalfLine:s=4;break}return{direction:i,unit:s,select:!!n.select,value:n.value||1}}r.parse=t})(bR||(bR={}));const b5=Object.create(null);function jy(r,e){if(e<=0)return"";b5[r]||(b5[r]=["",r]);const t=b5[r];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+r;return t[e]}class Lh{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,s){const o=ls.visibleColumnFromColumn(e,t,n);if(s){const a=jy(" ",i),u=ls.prevIndentTabStop(o,i)/i;return jy(a,u)}else{const a="	",u=ls.prevRenderTabStop(o,n)/n;return jy(a,u)}}static shiftIndent(e,t,n,i,s){const o=ls.visibleColumnFromColumn(e,t,n);if(s){const a=jy(" ",i),u=ls.nextIndentTabStop(o,i)/i;return jy(a,u)}else{const a="	",u=ls.nextRenderTabStop(o,n)/n;return jy(a,u)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:s,indentSize:o,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let u=0,d=0;for(let h=n;h<=i;h++,u=d){d=0;let p=e.getLineContent(h),v=oc(p);if(this._opts.isUnshift&&(p.length===0||v===0)||!l&&!this._opts.isUnshift&&p.length===0)continue;if(v===-1&&(v=p.length),h>1&&ls.visibleColumnFromColumn(p,v+1,s)%o!==0&&e.isCheapToTokenize(h-1)){let E=hr.getEnterAction(this._opts.autoIndent,e,new se(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)));if(E){if(d=u,E.appendText)for(let k=0,D=E.appendText.length;k<D&&d<o&&E.appendText.charCodeAt(k)===32;k++)d++;E.removeText&&(d=Math.max(0,d-E.removeText));for(let k=0;k<d&&!(v===0||p.charCodeAt(v-1)!==32);k++)v--}}if(this._opts.isUnshift&&v===0)continue;let C;this._opts.isUnshift?C=Lh.unshiftIndent(p,v+1,s,o,a):C=Lh.shiftIndent(p,v+1,s,o,a),this._addEditOperation(t,new se(h,1,h,v+1),C),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=v+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const u=a?jy(" ",o):"	";for(let d=n;d<=i;d++){const h=e.getLineContent(d);let p=oc(h);if(!(this._opts.isUnshift&&(h.length===0||p===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(p===-1&&(p=h.length),!(this._opts.isUnshift&&p===0)))if(this._opts.isUnshift){p=Math.min(p,o);for(let v=0;v<p;v++)if(h.charCodeAt(v)===9){p=v+1;break}this._addEditOperation(t,new se(d,1,d,p+1),"")}else this._addEditOperation(t,new se(d,1,d,1),u),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let i=t.getInverseEditOperations()[0];return new un(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new un(n.startLineNumber,i,n.endLineNumber,n.endColumn):new un(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}}class OEe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new se(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new se(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),i=n[0].range,s=n[1].range;return new un(i.endLineNumber,i.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class zs{static indent(e,t,n){if(t===null||n===null)return[];let i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new Lh(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static outdent(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new Lh(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static shiftIndent(e,t,n){return n=n||1,Lh.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Lh.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){let s=[];for(let o=0,a=n.length;o<a;o++)s[o]=new xl(n[o],i[o]);return new Dd(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,s){let o=[];for(let a=0,l=n.length;a<l;a++){const u=n[a];let d=u.getPosition();if(s&&!u.isEmpty()&&(s=!1),s&&i.indexOf(`
`)!==i.length-1&&(s=!1),s){let h=new se(d.lineNumber,1,d.lineNumber,1);o[a]=new f$(h,i,u,!0)}else o[a]=new xl(u,i)}return new Dd(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,s){if(i||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let o=Dv(n);if(o.length===t.length)return o}return null}static paste(e,t,n,i,s,o){const a=this._distributePasteToCursors(e,n,i,s,o);return a?(n=n.sort(se.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,s)}static _goodIndentForLine(e,t,n){let i=null,s="";const o=hr.getInheritIndentForLine(e.autoIndent,t,n,!1);if(o)i=o.action,s=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(Cv(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),u=hr.getEnterAction(e.autoIndent,t,new se(a,l,a,l));u&&(s=u.indentation+u.appendText)}return i&&(i===ko.Indent&&(s=zs.shiftIndent(e,s)),i===ko.Outdent&&(s=zs.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,i){let s="",o=n.getStartPosition();if(e.insertSpaces){let a=ls.visibleColumnFromColumn2(e,t,o),l=e.indentSize,u=l-a%l;for(let d=0;d<u;d++)s+=" "}else s="	";return new xl(n,s,i)}static tab(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let u=this._goodIndentForLine(e,t,a.startLineNumber);u=u||"	";let d=e.normalizeIndentation(u);if(!l.startsWith(d)){i[s]=new xl(new se(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}i[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[s]=new Lh(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return i}static compositionType(e,t,n,i,s,o,a,l){const u=i.map(d=>this._compositionType(n,d,s,o,a,l));return new Dd(4,u,{shouldPushStackElementBefore:MA(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,s,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),u=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),d=new se(a.lineNumber,l,a.lineNumber,u);return e.getValueInRange(d)===n&&o===0?null:new UO(d,n,0,o)}static _typeCommand(e,t,n){return n?new AA(e,t,!0):new xl(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return zs._typeCommand(i,`
`,n);if(!t.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(i.startLineNumber),u=Vr(l).substring(0,i.startColumn-1);return zs._typeCommand(i,`
`+e.normalizeIndentation(u),n)}const s=hr.getEnterAction(e.autoIndent,t,i);if(s){if(s.indentAction===ko.None)return zs._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===ko.Indent)return zs._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===ko.IndentOutdent){const l=e.normalizeIndentation(s.indentation),u=e.normalizeIndentation(s.indentation+s.appendText),d=`
`+u+`
`+l;return n?new AA(i,d,!0):new UO(i,d,-1,u.length-l.length,!0)}else if(s.indentAction===ko.Outdent){const l=zs.unshiftIndent(e,s.indentation);return zs._typeCommand(i,`
`+e.normalizeIndentation(l+s.appendText),n)}}const o=t.getLineContent(i.startLineNumber),a=Vr(o).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=hr.getIndentForEnter(e.autoIndent,t,i,{unshiftIndent:u=>zs.unshiftIndent(e,u),shiftIndent:u=>zs.shiftIndent(e,u),normalizeIndentation:u=>e.normalizeIndentation(u)});if(l){let u=ls.visibleColumnFromColumn2(e,t,i.getEndPosition());const d=i.endColumn,h=t.getLineContent(i.endLineNumber),p=oc(h);if(p>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,p+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new AA(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let v=0;return d<=p+1&&(e.insertSpaces||(u=Math.ceil(u/e.indentSize)),v=Math.min(u+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new UO(i,`
`+e.normalizeIndentation(l.afterEnter),0,v,!0)}}}return zs._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,s=n.length;i<s;i++)if(!t.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const s=hr.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),o=hr.getIndentActionForType(e.autoIndent,t,n,i,{shiftIndent:a=>zs.shiftIndent(e,a),unshiftIndent:a=>zs.unshiftIndent(e,a)});if(o===null)return null;if(o!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?zs._typeCommand(new se(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+i,!1):zs._typeCommand(new se(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())return!1;const u=l.getPosition(),d=t.getLineContent(u.lineNumber);if(d.charAt(u.column-1)!==s)return!1;const p=lE(s);if((u.column>2?d.charCodeAt(u.column-2):0)===92&&p)return!1;if(e.autoClosingOvertype==="auto"){let C=!1;for(let S=0,E=i.length;S<E;S++){const k=i[S];if(u.lineNumber===k.startLineNumber&&u.column===k.startColumn){C=!0;break}}if(!C)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,s){let o=[];for(let a=0,l=i.length;a<l;a++){const d=i[a].getPosition(),h=new se(d.lineNumber,d.column,d.lineNumber,d.column+1);o[a]=new xl(h,s)}return new Dd(4,o,{shouldPushStackElementBefore:MA(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=i.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,i){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!s)return null;let o=null;for(const a of s)if(o===null||a.open.length>o.open.length){let l=!0;for(const u of n)if(t.getValueInRange(new se(u.lineNumber,u.column-a.open.length+1,u.lineNumber,u.column))+i!==a.open){l=!1;break}l&&(o=a)}return o}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const o of i)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!s||o.open.length>s.open.length)&&(s=o);return s}static _getAutoClosingPairClose(e,t,n,i,s){const o=lE(i),a=o?e.autoClosingQuotes:e.autoClosingBrackets,l=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const C of n)if(!C.isEmpty())return null;const u=n.map(C=>{const S=C.getPosition();return s?{lineNumber:S.lineNumber,beforeColumn:S.column-i.length,afterColumn:S.column}:{lineNumber:S.lineNumber,beforeColumn:S.column,afterColumn:S.column}}),d=this._findAutoClosingPairOpen(e,t,u.map(C=>new ze(C.lineNumber,C.beforeColumn)),i);if(!d)return null;const h=this._findContainedAutoClosingPair(e,d),p=h?h.close:"";let v=!0;for(const C of u){const{lineNumber:S,beforeColumn:E,afterColumn:k}=C,D=t.getLineContent(S),O=D.substring(0,E-1),H=D.substring(k-1);if(H.startsWith(p)||(v=!1),H.length>0){const P=H.charAt(0);if(!zs._isBeforeClosingBrace(e,H)&&!l(P))return null}if(d.open.length===1&&(i==="'"||i==='"')&&a!=="always"){const P=Rf(e.wordSeparators);if(O.length>0){const z=O.charCodeAt(O.length-1);if(P.get(z)===0)return null}}if(!t.isCheapToTokenize(S))return null;t.forceTokenization(S);const V=t.getLineTokens(S),X=VO(V,E-1);if(!d.shouldAutoClose(X,E-X.firstCharOffset))return null;const $=d.findNeutralCharacter();if($){const P=t.getTokenTypeIfInsertingCharacter(S,E,$);if(!d.isOK(P))return null}}return v?d.close.substring(0,d.close.length-p.length):d.close}static _runAutoClosingOpenCharType(e,t,n,i,s,o,a){let l=[];for(let u=0,d=i.length;u<d;u++){const h=i[u];l[u]=new aoe(h,s,!o,a)}return new Dd(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return lE(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!zs._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const s=lE(i);for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())return!1;let u=!0;for(let d=l.startLineNumber;d<=l.endLineNumber;d++){const h=t.getLineContent(d),p=d===l.startLineNumber?l.startColumn-1:0,v=d===l.endLineNumber?l.endColumn-1:h.length,C=h.substring(p,v);if(/[^ \t]/.test(C)){u=!1;break}}if(u)return!1;if(s&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const d=t.getValueInRange(l);if(lE(d))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,s){let o=[];for(let a=0,l=i.length;a<l;a++){const u=i[a],d=t.surroundingPairs[s];o[a]=new OEe(u,s,d)}return new Dd(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,s){if(!t.electricChars.hasOwnProperty(s)||!i.isEmpty())return null;let o=i.getPosition();n.forceTokenization(o.lineNumber);let a=n.getLineTokens(o.lineNumber),l;try{l=hr.onElectricCharacter(s,a,o.column)}catch(u){return Jn(u),null}if(!l)return null;if(l.matchOpenBracket){let u=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:u});if(d){if(d.startLineNumber===o.lineNumber)return null;let h=n.getLineContent(d.startLineNumber),p=Vr(h),v=t.normalizeIndentation(p),C=n.getLineContent(o.lineNumber),S=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,E=C.substring(S-1,o.column-1),k=v+E+s,D=new se(o.lineNumber,1,o.lineNumber,o.column);const O=new xl(D,k);return new Dd(C5(k,e),[O],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,s,o){if(!i||un.selectionsArrEqual(i,s))return null;let a=null;for(const u of s){if(!u.isEmpty())return null;const d=u.getPosition(),h=n.getValueInRange(new se(d.lineNumber,d.column-1,d.lineNumber,d.column));if(a===null)a=h;else if(a!==h)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,s,o,a)){const u=s.map(d=>new xl(new se(d.positionLineNumber,d.positionColumn,d.positionLineNumber,d.positionColumn+1),"",!1));return new Dd(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,n,s,a,!0);return l!==null?this._runAutoClosingOpenCharType(e,t,n,s,a,!0,l):null}static typeWithInterceptors(e,t,n,i,s,o,a){if(!e&&a===`
`){let d=[];for(let h=0,p=s.length;h<p;h++)d[h]=zs._enter(n,i,!1,s[h]);return new Dd(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,s)){let d=[],h=!1;for(let p=0,v=s.length;p<v;p++)if(d[p]=this._runAutoIndentType(n,i,s[p],a),!d[p]){h=!0;break}if(!h)return new Dd(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,i,s,o,a))return this._runAutoClosingOvertype(t,n,i,s,a);if(!e){const d=this._getAutoClosingPairClose(n,i,s,a,!1);if(d)return this._runAutoClosingOpenCharType(t,n,i,s,a,!1,d)}if(this._isSurroundSelectionType(n,i,s,a))return this._runSurroundSelectionType(t,n,i,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,s)){const d=this._typeInterceptorElectricChar(t,n,i,s[0],a);if(d)return d}let l=[];for(let d=0,h=s.length;d<h;d++)l[d]=new xl(s[d],a);const u=C5(a,t);return new Dd(u,l,{shouldPushStackElementBefore:MA(t,u),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,s){let o=[];for(let l=0,u=i.length;l<u;l++)o[l]=new xl(i[l],s);const a=C5(s,e);return new Dd(a,o,{shouldPushStackElementBefore:MA(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let i=[];for(let s=0,o=n.length;s<o;s++){let a=n[s].positionLineNumber;if(a===1)i[s]=new AA(new se(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new se(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].positionLineNumber;let l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new se(a,l,a,l))}return i}static lineBreakInsert(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++)i[s]=this._enter(e,t,!0,n[s]);return i}}class aoe extends UO{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new se(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new se(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}function C5(r,e){return r===" "?e===5||e===6?6:5:4}function MA(r,e){return kY(r)&&!kY(e)?!0:r===5?!1:TY(r)!==TY(e)}function TY(r){return r===6||r===5?"space":r}function kY(r){return r===4||r===5||r===6}var ye;(function(r){r.editorSimpleInput=new gn("editorSimpleInput",!1,!0),r.editorTextFocus=new gn("editorTextFocus",!1,L("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),r.focus=new gn("editorFocus",!1,L("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),r.textInputFocus=new gn("textInputFocus",!1,L("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),r.readOnly=new gn("editorReadonly",!1,L("editorReadonly","Whether the editor is read only")),r.inDiffEditor=new gn("inDiffEditor",!1,L("inDiffEditor","Whether the context is a diff editor")),r.columnSelection=new gn("editorColumnSelection",!1,L("editorColumnSelection","Whether `editor.columnSelection` is enabled")),r.writable=r.readOnly.toNegated(),r.hasNonEmptySelection=new gn("editorHasSelection",!1,L("editorHasSelection","Whether the editor has text selected")),r.hasOnlyEmptySelection=r.hasNonEmptySelection.toNegated(),r.hasMultipleSelections=new gn("editorHasMultipleSelections",!1,L("editorHasMultipleSelections","Whether the editor has multiple selections")),r.hasSingleSelection=r.hasMultipleSelections.toNegated(),r.tabMovesFocus=new gn("editorTabMovesFocus",!1,L("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),r.tabDoesNotMoveFocus=r.tabMovesFocus.toNegated(),r.isInWalkThroughSnippet=new gn("isInEmbeddedEditor",!1,!0),r.canUndo=new gn("canUndo",!1,!0),r.canRedo=new gn("canRedo",!1,!0),r.hoverVisible=new gn("editorHoverVisible",!1,L("editorHoverVisible","Whether the editor hover is visible")),r.inCompositeEditor=new gn("inCompositeEditor",void 0,L("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),r.notInCompositeEditor=r.inCompositeEditor.toNegated(),r.languageId=new gn("editorLangId","",L("editorLangId","The language identifier of the editor")),r.hasCompletionItemProvider=new gn("editorHasCompletionItemProvider",!1,L("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),r.hasCodeActionsProvider=new gn("editorHasCodeActionsProvider",!1,L("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),r.hasCodeLensProvider=new gn("editorHasCodeLensProvider",!1,L("editorHasCodeLensProvider","Whether the editor has a code lens provider")),r.hasDefinitionProvider=new gn("editorHasDefinitionProvider",!1,L("editorHasDefinitionProvider","Whether the editor has a definition provider")),r.hasDeclarationProvider=new gn("editorHasDeclarationProvider",!1,L("editorHasDeclarationProvider","Whether the editor has a declaration provider")),r.hasImplementationProvider=new gn("editorHasImplementationProvider",!1,L("editorHasImplementationProvider","Whether the editor has an implementation provider")),r.hasTypeDefinitionProvider=new gn("editorHasTypeDefinitionProvider",!1,L("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),r.hasHoverProvider=new gn("editorHasHoverProvider",!1,L("editorHasHoverProvider","Whether the editor has a hover provider")),r.hasDocumentHighlightProvider=new gn("editorHasDocumentHighlightProvider",!1,L("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),r.hasDocumentSymbolProvider=new gn("editorHasDocumentSymbolProvider",!1,L("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),r.hasReferenceProvider=new gn("editorHasReferenceProvider",!1,L("editorHasReferenceProvider","Whether the editor has a reference provider")),r.hasRenameProvider=new gn("editorHasRenameProvider",!1,L("editorHasRenameProvider","Whether the editor has a rename provider")),r.hasSignatureHelpProvider=new gn("editorHasSignatureHelpProvider",!1,L("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),r.hasInlayHintsProvider=new gn("editorHasInlayHintsProvider",!1,L("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),r.hasDocumentFormattingProvider=new gn("editorHasDocumentFormattingProvider",!1,L("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),r.hasDocumentSelectionFormattingProvider=new gn("editorHasDocumentSelectionFormattingProvider",!1,L("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),r.hasMultipleDocumentFormattingProvider=new gn("editorHasMultipleDocumentFormattingProvider",!1,L("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),r.hasMultipleDocumentSelectionFormattingProvider=new gn("editorHasMultipleDocumentSelectionFormattingProvider",!1,L("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(ye||(ye={}));const dr=0;class $o extends Rl{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}var CR;(function(r){const e=function(n){if(!Wc(n))return!1;const i=n;return!(!Nf(i.to)||!Od(i.by)&&!Nf(i.by)||!Od(i.value)&&!tS(i.value)||!Od(i.revealCursor)&&!ore(i.revealCursor))};r.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},r.RawDirection={Up:"up",Down:"down"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let i;switch(n.to){case r.RawDirection.Up:i=1;break;case r.RawDirection.Down:i=2;break;default:return null}let s;switch(n.by){case r.RawUnit.Line:s=1;break;case r.RawUnit.WrappedLine:s=2;break;case r.RawUnit.Page:s=3;break;case r.RawUnit.HalfPage:s=4;break;default:s=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:s,value:o,revealCursor:a,select:!!n.select}}r.parse=t})(CR||(CR={}));var CE;(function(r){const e=function(t){if(!Wc(t))return!1;const n=t;return!(!tS(n.lineNumber)&&!Nf(n.lineNumber)||!Od(n.at)&&!Nf(n.at))};r.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},r.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(CE||(CE={}));class eW{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(vr).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(vr).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}var Ba;(function(r){class e extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,[al.moveTo(D,D.getPrimaryCursorState(),this._inSelectionMode,O.position,O.viewPosition)]),D.revealPrimaryCursor(O.source,!0)}}r.MoveTo=Dt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),r.MoveToSelect=Dt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends $o{runCoreEditorCommand(D,O){D.model.pushStackElement();const H=this._getColumnSelectResult(D,D.getPrimaryCursorState(),D.getCursorColumnSelectData(),O);D.setCursorStates(O.source,3,H.viewStates.map(V=>Ii.fromViewState(V))),D.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:H.fromLineNumber,fromViewVisualColumn:H.fromVisualColumn,toViewLineNumber:H.toLineNumber,toViewVisualColumn:H.toVisualColumn}),H.reversed?D.revealTopMostCursor(O.source):D.revealBottomMostCursor(O.source)}}r.ColumnSelect=Dt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(k,D,O,H){const V=k.model.validatePosition(H.position),X=k.coordinatesConverter.validateViewPosition(new ze(H.viewPosition.lineNumber,H.viewPosition.column),V);let $=H.doColumnSelect?O.fromViewLineNumber:X.lineNumber,P=H.doColumnSelect?O.fromViewVisualColumn:H.mouseColumn-1;return cw.columnSelect(k.cursorConfig,k,$,P,X.lineNumber,H.mouseColumn-1)}}),r.CursorColumnSelectLeft=Dt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(k,D,O,H){return cw.columnSelectLeft(k.cursorConfig,k,O)}}),r.CursorColumnSelectRight=Dt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(k,D,O,H){return cw.columnSelectRight(k.cursorConfig,k,O)}});class n extends t{constructor(D){super(D),this._isPaged=D.isPaged}_getColumnSelectResult(D,O,H,V){return cw.columnSelectUp(D.cursorConfig,D,H,this._isPaged)}}r.CursorColumnSelectUp=Dt(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3600,linux:{primary:0}}})),r.CursorColumnSelectPageUp=Dt(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3595,linux:{primary:0}}}));class i extends t{constructor(D){super(D),this._isPaged=D.isPaged}_getColumnSelectResult(D,O,H,V){return cw.columnSelectDown(D.cursorConfig,D,H,this._isPaged)}}r.CursorColumnSelectDown=Dt(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3602,linux:{primary:0}}})),r.CursorColumnSelectPageDown=Dt(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends $o{constructor(){super({id:"cursorMove",precondition:void 0,description:bR.description})}runCoreEditorCommand(D,O){const H=bR.parse(O);H&&this._runCursorMove(D,O.source,H)}_runCursorMove(D,O,H){D.model.pushStackElement(),D.setCursorStates(O,3,s._move(D,D.getCursorStates(),H)),D.revealPrimaryCursor(O,!0)}static _move(D,O,H){const V=H.select,X=H.value;switch(H.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return al.simpleMove(D,O,H.direction,V,X,H.unit);case 11:case 13:case 12:case 14:return al.viewportMove(D,O,H.direction,V,X);default:return null}}}r.CursorMoveImpl=s,r.CursorMove=Dt(new s);class o extends $o{constructor(D){super(D),this._staticArgs=D.args}runCoreEditorCommand(D,O){let H=this._staticArgs;this._staticArgs.value===-1&&(H={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:D.cursorConfig.pageSize}),D.model.pushStackElement(),D.setCursorStates(O.source,3,al.simpleMove(D,D.getCursorStates(),H.direction,H.select,H.value,H.unit)),D.revealPrimaryCursor(O.source,!0)}}r.CursorLeft=Dt(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),r.CursorLeftSelect=Dt(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1039}})),r.CursorRight=Dt(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),r.CursorRightSelect=Dt(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1041}})),r.CursorUp=Dt(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),r.CursorUpSelect=Dt(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),r.CursorPageUp=Dt(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:11}})),r.CursorPageUpSelect=Dt(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1035}})),r.CursorDown=Dt(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),r.CursorDownSelect=Dt(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),r.CursorPageDown=Dt(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:12}})),r.CursorPageDownSelect=Dt(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1036}})),r.CreateCursor=Dt(new class extends $o{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(k,D){let O;D.wholeLine?O=al.line(k,k.getPrimaryCursorState(),!1,D.position,D.viewPosition):O=al.moveTo(k,k.getPrimaryCursorState(),!1,D.position,D.viewPosition);const H=k.getCursorStates();if(H.length>1){const V=O.modelState?O.modelState.position:null,X=O.viewState?O.viewState.position:null;for(let $=0,P=H.length;$<P;$++){const z=H[$];if(!(V&&!z.modelState.selection.containsPosition(V))&&!(X&&!z.viewState.selection.containsPosition(X))){H.splice($,1),k.model.pushStackElement(),k.setCursorStates(D.source,3,H);return}}}H.push(O),k.model.pushStackElement(),k.setCursorStates(D.source,3,H)}}),r.LastCursorMoveToSelect=Dt(new class extends $o{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(k,D){const O=k.getLastAddedCursorIndex(),H=k.getCursorStates(),V=H.slice(0);V[O]=al.moveTo(k,H[O],!0,D.position,D.viewPosition),k.model.pushStackElement(),k.setCursorStates(D.source,3,V)}});class a extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,al.moveToBeginningOfLine(D,D.getCursorStates(),this._inSelectionMode)),D.revealPrimaryCursor(O.source,!0)}}r.CursorHome=Dt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),r.CursorHomeSelect=Dt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,this._exec(D.getCursorStates())),D.revealPrimaryCursor(O.source,!0)}_exec(D){const O=[];for(let H=0,V=D.length;H<V;H++){const X=D[H],$=X.modelState.position.lineNumber;O[H]=Ii.fromModelState(X.modelState.move(this._inSelectionMode,$,1,0))}return O}}r.CursorLineStart=Dt(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:0,mac:{primary:287}}})),r.CursorLineStartSelect=Dt(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:0,mac:{primary:1311}}}));class u extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,al.moveToEndOfLine(D,D.getCursorStates(),this._inSelectionMode,O.sticky||!1)),D.revealPrimaryCursor(O.source,!0)}}r.CursorEnd=Dt(new u({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:dr,kbExpr:ye.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:L("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),r.CursorEndSelect=Dt(new u({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:dr,kbExpr:ye.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:L("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,this._exec(D,D.getCursorStates())),D.revealPrimaryCursor(O.source,!0)}_exec(D,O){const H=[];for(let V=0,X=O.length;V<X;V++){const $=O[V],P=$.modelState.position.lineNumber,z=D.model.getLineMaxColumn(P);H[V]=Ii.fromModelState($.modelState.move(this._inSelectionMode,P,z,0))}return H}}r.CursorLineEnd=Dt(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:0,mac:{primary:291}}})),r.CursorLineEndSelect=Dt(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,al.moveToBeginningOfBuffer(D,D.getCursorStates(),this._inSelectionMode)),D.revealPrimaryCursor(O.source,!0)}}r.CursorTop=Dt(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:2062,mac:{primary:2064}}})),r.CursorTopSelect=Dt(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3086,mac:{primary:3088}}}));class p extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,al.moveToEndOfBuffer(D,D.getCursorStates(),this._inSelectionMode)),D.revealPrimaryCursor(O.source,!0)}}r.CursorBottom=Dt(new p({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:2061,mac:{primary:2066}}})),r.CursorBottomSelect=Dt(new p({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:3085,mac:{primary:3090}}}));class v extends $o{constructor(){super({id:"editorScroll",precondition:void 0,description:CR.description})}runCoreEditorCommand(D,O){const H=CR.parse(O);H&&this._runEditorScroll(D,O.source,H)}_runEditorScroll(D,O,H){const V=this._computeDesiredScrollTop(D,H);if(H.revealCursor){const X=D.getCompletelyVisibleViewRangeAtScrollTop(V);D.setCursorStates(O,3,[al.findPositionInViewportIfOutside(D,D.getPrimaryCursorState(),X,H.select)])}D.setScrollTop(V,0)}_computeDesiredScrollTop(D,O){if(O.unit===1){const X=D.getCompletelyVisibleViewRange(),$=D.coordinatesConverter.convertViewRangeToModelRange(X);let P;O.direction===1?P=Math.max(1,$.startLineNumber-O.value):P=Math.min(D.model.getLineCount(),$.startLineNumber+O.value);const z=D.coordinatesConverter.convertModelPositionToViewPosition(new ze(P,1));return D.getVerticalOffsetForLineNumber(z.lineNumber)}let H;O.unit===3?H=D.cursorConfig.pageSize*O.value:O.unit===4?H=Math.round(D.cursorConfig.pageSize/2)*O.value:H=O.value;const V=(O.direction===1?-1:1)*H;return D.getScrollTop()+V*D.cursorConfig.lineHeight}}r.EditorScrollImpl=v,r.EditorScroll=Dt(new v),r.ScrollLineUp=Dt(new class extends $o{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(k,D){r.EditorScroll._runEditorScroll(k,D.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageUp=Dt(new class extends $o{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(k,D){r.EditorScroll._runEditorScroll(k,D.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),r.ScrollLineDown=Dt(new class extends $o{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(k,D){r.EditorScroll._runEditorScroll(k,D.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageDown=Dt(new class extends $o{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(k,D){r.EditorScroll._runEditorScroll(k,D.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class C extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,[al.word(D,D.getPrimaryCursorState(),this._inSelectionMode,O.position)]),D.revealPrimaryCursor(O.source,!0)}}r.WordSelect=Dt(new C({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),r.WordSelectDrag=Dt(new C({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),r.LastCursorWordSelect=Dt(new class extends $o{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(k,D){const O=k.getLastAddedCursorIndex(),H=k.getCursorStates(),V=H.slice(0),X=H[O];V[O]=al.word(k,X,X.modelState.hasSelection(),D.position),k.model.pushStackElement(),k.setCursorStates(D.source,3,V)}});class S extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){D.model.pushStackElement(),D.setCursorStates(O.source,3,[al.line(D,D.getPrimaryCursorState(),this._inSelectionMode,O.position,O.viewPosition)]),D.revealPrimaryCursor(O.source,!1)}}r.LineSelect=Dt(new S({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),r.LineSelectDrag=Dt(new S({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class E extends $o{constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,O){const H=D.getLastAddedCursorIndex(),V=D.getCursorStates(),X=V.slice(0);X[H]=al.line(D,V[H],this._inSelectionMode,O.position,O.viewPosition),D.model.pushStackElement(),D.setCursorStates(O.source,3,X)}}r.LastCursorLineSelect=Dt(new E({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),r.LastCursorLineSelectDrag=Dt(new E({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),r.CancelSelection=Dt(new class extends $o{constructor(){super({id:"cancelSelection",precondition:ye.hasNonEmptySelection,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(k,D){k.model.pushStackElement(),k.setCursorStates(D.source,3,[al.cancelSelection(k,k.getPrimaryCursorState())]),k.revealPrimaryCursor(D.source,!0)}}),r.RemoveSecondaryCursors=Dt(new class extends $o{constructor(){super({id:"removeSecondaryCursors",precondition:ye.hasMultipleSelections,kbOpts:{weight:dr+1,kbExpr:ye.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(k,D){k.model.pushStackElement(),k.setCursorStates(D.source,3,[k.getPrimaryCursorState()]),k.revealPrimaryCursor(D.source,!0),MM(L("removedCursor","Removed secondary cursors"))}}),r.RevealLine=Dt(new class extends $o{constructor(){super({id:"revealLine",precondition:void 0,description:CE.description})}runCoreEditorCommand(k,D){const O=D,H=O.lineNumber||0;let V=typeof H=="number"?H+1:parseInt(H)+1;V<1&&(V=1);const X=k.model.getLineCount();V>X&&(V=X);const $=new se(V,1,V,k.model.getLineMaxColumn(V));let P=0;if(O.at)switch(O.at){case CE.RawAtArgument.Top:P=3;break;case CE.RawAtArgument.Center:P=1;break;case CE.RawAtArgument.Bottom:P=4;break}const z=k.coordinatesConverter.convertModelRangeToViewRange($);k.revealRange(D.source,!1,z,P,0)}}),r.SelectAll=new class extends eW{constructor(){super(kbe)}runDOMCommand(){Bd&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(k,D,O){const H=D._getViewModel();H&&this.runCoreEditorCommand(H,O)}runCoreEditorCommand(k,D){k.model.pushStackElement(),k.setCursorStates("keyboard",3,[al.selectAll(k,k.getPrimaryCursorState())])}},r.SetSelection=Dt(new class extends $o{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(k,D){k.model.pushStackElement(),k.setCursorStates(D.source,3,[Ii.fromModelSelection(D.selection)])}})})(Ba||(Ba={}));const MEe=qt.and(ye.textInputFocus,ye.columnSelection);function lD(r,e){Al.registerKeybindingRule({id:r,primary:e,when:MEe,weight:dr+1})}lD(Ba.CursorColumnSelectLeft.id,1039);lD(Ba.CursorColumnSelectRight.id,1041);lD(Ba.CursorColumnSelectUp.id,1040);lD(Ba.CursorColumnSelectPageUp.id,1035);lD(Ba.CursorColumnSelectDown.id,1042);lD(Ba.CursorColumnSelectPageDown.id,1036);function NY(r){return r.register(),r}var GE;(function(r){class e extends Rl{runEditorCommand(n,i,s){const o=i._getViewModel();o&&this.runCoreEditingCommand(i,o,s||{})}}r.CoreEditingCommand=e,r.LineBreakInsert=Dt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:ye.writable,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,zs.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection)))}}),r.Outdent=Dt(new class extends e{constructor(){super({id:"outdent",precondition:ye.writable,kbOpts:{weight:dr,kbExpr:qt.and(ye.editorTextFocus,ye.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,zs.outdent(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),r.Tab=Dt(new class extends e{constructor(){super({id:"tab",precondition:ye.writable,kbOpts:{weight:dr,kbExpr:qt.and(ye.editorTextFocus,ye.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,zs.tab(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),r.DeleteLeft=Dt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,i){const[s,o]=hS.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),r.DeleteRight=Dt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:dr,kbExpr:ye.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,i){const[s,o]=hS.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),r.Undo=new class extends eW{constructor(){super(xre)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},r.Redo=new class extends eW{constructor(){super(Dre)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})(GE||(GE={}));class AY extends n4{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(vr).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function tL(r,e){NY(new AY("default:"+r,r)),NY(new AY(r,r,e))}tL("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});tL("replacePreviousChar");tL("compositionType");tL("compositionStart");tL("compositionEnd");tL("paste");tL("cut");class REe{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Ba.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new ze(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Hc&&t.get(95),i=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Ba.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Ba.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Ba.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Ba.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Ba.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Ba.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Ba.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Ba.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Ba.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Ba.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Ba.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Ba.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Ba.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class D4{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return D4.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new PEe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class PEe{constructor(e,t,n,i,s,o){this.element=e,this.type=t,this.mouseColumn=n,this.position=i,this.range=s,this.detail=o}toString(){return sm.toString(this)}}var y5;class loe{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let s=0,o=0;for(let l=n;l<=i;l++){const u=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(s=u,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(s,o)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let o=e;o<=t;o++)o>=n&&o<=i&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const o=[];for(let h=0;h<n;h++)o[h]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),u=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(u),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let s=0,o=e.length;s<o;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),u=Math.min(n,a.toLineNumber);for(let d=l;d<=u;d++){const h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),i=!0}}return i}}class uoe{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new loe(()=>this._host.createVisibleLine())}_createDomNode(){const e=tr(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(130)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new mb(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class mb{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let o=t;o<=n;o++)s.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,i),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),i,t),s.rendLineNumberStart>t){const o=t,a=Math.min(n,s.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(s,o,a,i,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart<t){const o=Math.min(s.linesLength,t-s.rendLineNumberStart);o>0&&(this._removeLinesBefore(s,o),s.linesLength-=o)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const o=s.rendLineNumberStart+s.linesLength,a=n;o<=a&&(this._insertLinesAfter(s,o,a,i,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const o=Math.max(0,n-s.rendLineNumberStart+1),l=s.linesLength-1-o+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,i),s}_renderUntouchedLines(e,t,n,i,s){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const u=o+l;a[l].layoutLine(u,i[u-s])}}_insertLinesBefore(e,t,n,i,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const s=e.lines[n+i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){mb._ttPolicy&&(n=mb._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");mb._ttPolicy&&(t=mb._ttPolicy.createHTML(t)),i.innerHTML=t;for(let s=0;s<e.linesLength;s++){const o=e.lines[s];if(n[s]){const a=i.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const i=mb._sb,s=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let u=!1;for(let d=0;d<s;d++){const h=o[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,n[d],this.viewportData,i))&&(l[d]=!0,u=!0)}u&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let u=!1;const d=[];for(let h=0;h<s;h++){const p=o[h];d[h]=!1,!(l[h]||!p.renderLine(h+a,n[h],this.viewportData,i))&&(d[h]=!0,u=!0)}u&&this._finishRenderingInvalidLines(e,i.build(),d)}}}mb._ttPolicy=(y5=window.trustedTypes)===null||y5===void 0?void 0:y5.createPolicy("editorViewLayer",{createHTML:r=>r});mb._sb=lS(1e5);class coe extends Ff{constructor(e){super(e),this._visibleLines=new uoe(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new FEe(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class FEe{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=tr(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,i){let s="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){const l=this._dynamicOverlays[o];s+=l.render(n.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(s),i.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class BEe extends coe{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class WEe extends coe{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),lc.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;lc.applyFontInfo(this.domNode,t.get(43));const n=t.get(130);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class fT{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class VEe extends Ff{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=tr(document.createElement("div")),Tv.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=tr(document.createElement("div")),Tv.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new HEe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let HEe=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=tr(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,s=i.get(130);this._fixedOverflowWidgets=i.get(36),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=i.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(130)){const n=t.get(130);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,i,s){const o=e.top,a=o,l=t.top+this._lineHeight,u=s.viewportHeight-l,d=o-i,h=a>=i,p=l,v=u>=i;let C=e.left,S=t.left;return C+n>s.scrollLeft+s.viewportWidth&&(C=s.scrollLeft+s.viewportWidth-n),S+n>s.scrollLeft+s.viewportWidth&&(S=s.scrollLeft+s.viewportWidth-n),C<s.scrollLeft&&(C=s.scrollLeft),S<s.scrollLeft&&(S=s.scrollLeft),{fitsAbove:h,aboveTop:d,aboveLeft:C,fitsBelow:v,belowTop:p,belowLeft:S}}_layoutHorizontalSegmentInPage(e,t,n,i){const s=Math.max(0,t.left-i),o=Math.min(t.left+t.width+i,e.width);let a=t.left+n-Lb.scrollX;if(a+i>o){const l=a-(o-i);a-=l,n-=l}if(a<s){const l=a-s;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,i,s){const o=e.top-i,a=t.top+this._lineHeight,l=su(this._viewDomNode.domNode),u=l.top+o-Lb.scrollY,d=l.top+a-Lb.scrollY,h=$P(document.body),[p,v]=this._layoutHorizontalSegmentInPage(h,l,e.left-s.scrollLeft+this._contentLeft,n),[C,S]=this._layoutHorizontalSegmentInPage(h,l,t.left-s.scrollLeft+this._contentLeft,n),E=22,k=22,D=u>=E,O=d+i<=h.height-k;return this._fixedOverflowWidgets?{fitsAbove:D,aboveTop:Math.max(u,E),aboveLeft:v,fitsBelow:O,belowTop:d,belowLeft:S}:{fitsAbove:D,aboveTop:o,aboveLeft:p,fitsBelow:O,belowTop:a,belowLeft:C}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new fT(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],i=t[0];for(const h of t)h.lineNumber<n.lineNumber&&(n=h),h.lineNumber>i.lineNumber&&(i=h);let s=1073741824;for(const h of n.ranges)h.left<s&&(s=h.left);let o=1073741824;for(const h of i.ranges)h.left<o&&(o=h.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new fT(a,s),u=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,d=new fT(u,o);return[l,d]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let s=null;if(typeof this._actual.beforeRender=="function"&&(s=w5(this._actual.beforeRender,this._actual)),s)this._cachedDomNodeClientWidth=s.width,this._cachedDomNodeClientHeight=s.height;else{const o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}}let i;this.allowEditorOverflow?i=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):i=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e);for(let s=1;s<=2;s++)for(const o of this._preference)if(o===1){if(!i)return null;if(s===2||i.fitsAbove)return{coordinate:new fT(i.aboveTop,i.aboveLeft),position:1}}else if(o===2){if(!i)return null;if(s===2||i.fitsBelow)return{coordinate:new fT(i.belowTop,i.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&w5(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&w5(this._actual.afterRender,this._actual,this._renderData.position)}};function w5(r,e,...t){try{return r.call(e,...t)}catch{return null}}let tW=!0;class doe extends aD{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new un(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=tW?this._selections.slice(0,1):this._selections,n=t.map(s=>s.positionLineNumber);n.sort((s,o)=>s-o),xf(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const i=t.every(s=>s.isEmpty());return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=n;l<=i;l++){const u=l-n;for(;o<s&&this._cursorLineNumbers[o]<l;)o++;o<s&&this._cursorLineNumbers[o]===l?a[u]=t:a[u]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class zEe extends doe{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class UEe extends doe{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}ds((r,e)=>{tW=!1;const t=r.getColor(vLe);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||r.defines(CY)){const n=r.getColor(CY);n&&(tW=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),r.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class $Ee extends aD{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,u=t.length;l<u;l++){const d=t[l];d.options.className&&(n[i++]=d)}n=n.sort((l,u)=>{if(l.options.zIndex<u.options.zIndex)return-1;if(l.options.zIndex>u.options.zIndex)return 1;const d=l.options.className,h=u.options.className;return d<h?-1:d>h?1:se.compareRangesUsingStarts(l.range,u.range)});const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=o;l++){const u=l-s;a[u]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const u=t[a];if(!u.options.isWholeLine)continue;const d='<div class="cdr '+u.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',h=Math.max(u.range.startLineNumber,s),p=Math.min(u.range.endLineNumber,o);for(let v=h;v<=p;v++){const C=v-s;n[C]+=d}}}_renderNormalDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber;let o=null,a=!1,l=null;for(let u=0,d=t.length;u<d;u++){const h=t[u];if(h.options.isWholeLine)continue;const p=h.options.className,v=!!h.options.showIfCollapsed;let C=h.range;if(v&&C.endColumn===1&&C.endLineNumber!==C.startLineNumber&&(C=new se(C.startLineNumber,C.startColumn,C.endLineNumber-1,this._context.model.getLineMaxColumn(C.endLineNumber-1))),o===p&&a===v&&se.areIntersectingOrTouching(l,C)){l=se.plusRange(l,C);continue}o!==null&&this._renderNormalDecoration(e,l,o,a,i,s,n),o=p,a=v,l=C}o!==null&&this._renderNormalDecoration(e,l,o,a,i,s,n)}_renderNormalDecoration(e,t,n,i,s,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let u=0,d=l.length;u<d;u++){const h=l[u];if(h.outsideRenderedLine)continue;const p=h.lineNumber-o;if(i&&h.ranges.length===1){const v=h.ranges[0];if(v.width<this._typicalHalfwidthCharacterWidth){const C=Math.round(v.left+v.width/2),S=Math.max(0,Math.round(C-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new d4(S,this._typicalHalfwidthCharacterWidth)}}for(let v=0,C=h.ranges.length;v<C;v++){const S=h.ranges[v],E='<div class="cdr '+n+'" style="left:'+String(S.left)+"px;width:"+String(S.width)+"px;height:"+s+'px;"></div>';a[p]+=E}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Ah extends Je{onclick(e,t){this._register(St(e,xn.CLICK,n=>t(new yf(n))))}onmousedown(e,t){this._register(St(e,xn.MOUSE_DOWN,n=>t(new yf(n))))}onmouseover(e,t){this._register(St(e,xn.MOUSE_OVER,n=>t(new yf(n))))}onnonbubblingmouseout(e,t){this._register(gU(e,n=>t(new yf(n))))}onkeydown(e,t){this._register(St(e,xn.KEY_DOWN,n=>t(new Ts(n))))}onkeyup(e,t){this._register(St(e,xn.KEY_UP,n=>t(new Ts(n))))}oninput(e,t){this._register(St(e,xn.INPUT,t))}onblur(e,t){this._register(St(e,xn.BLUR,t))}onfocus(e,t){this._register(St(e,xn.FOCUS,t))}ignoreGesture(e){Rr.ignoreTarget(e)}}const bx=11;class jEe extends Ah{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=bx+"px",this.domNode.style.height=bx+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new JS),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new d2),this._mousedownScheduleRepeatTimer=this._register(new cc)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,rD,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class qEe extends Je{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new cc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const KEe=140;class hoe extends Ah{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new qEe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new JS),this._shouldRender=!0,this.domNode=tr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new jEe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=tr(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,s=>{s.leftButton&&(s.preventDefault(),this._sliderMouseDown(s,()=>{}))}),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderMousePosition(e);n<=s&&s<=i?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const s=su(this.domNode.domNode);t=e.posx-s.left,n=e.posy-s.top}const i=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),i=this._sliderOrthogonalMousePosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,rD,o=>{const a=this._sliderOrthogonalMousePosition(o),l=Math.abs(a-i);if(Nl&&l>KEe){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const d=this._sliderMousePosition(o)-n;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const GEe=20;class Gk{constructor(e,t,n,i,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Gk(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,s){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const u=Math.round(Math.max(GEe,Math.floor(n*a/i))),d=(a-u)/(i-n),h=s*d;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(u),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=Gk._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class YEe extends hoe{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Gk(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-bx)/2,a=(t.horizontalScrollbarSize-bx)/2;this._createArrow({className:"scra",icon:Ie.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new ax(null,1,0))}),this._createArrow({className:"scra",icon:Ie.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new ax(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class ZEe extends hoe{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Gk(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-bx)/2,a=(t.verticalScrollbarSize-bx)/2;this._createArrow({className:"scra",icon:Ie.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new ax(null,0,1))}),this._createArrow({className:"scra",icon:Ie.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new ax(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class yR{constructor(e,t,n,i,s,o){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,i=i|0,s=s|0,o=o|0,this.rawScrollLeft=n,this.rawScrollTop=o,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),i<0&&(i=0),o+i>s&&(o=s-i),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=i,this.scrollHeight=s,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new yR(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new yR(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class I4 extends Je{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Ae),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new yR(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new Yk(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=Yk.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class OY{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function S5(r,e){const t=e-r;return function(n){return r+t*JEe(n)}}function XEe(r,e,t){return function(n){return n<t?r(n/t):e((n-t)/(1-t))}}class Yk{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,o;return e<t?(s=e+.75*n,o=t-.75*n):(s=e-.75*n,o=t+.75*n),XEe(S5(e,s),S5(o,t),.33)}return S5(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new OY(n,i,!1)}return new OY(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return Yk.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new Yk(e,t,i,n)}}function QEe(r){return Math.pow(r,3)}function JEe(r){return 1-QEe(1-r)}const exe=500,MY=50;class txe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class nW{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const s=i===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[i].score*s,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const i=new txe(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}nW.INSTANCE=new nW;class foe extends Ah{constructor(e,t,n){super(),this._onScroll=this._register(new Ae),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Ae),e.style.overflow="hidden",this._options=nxe(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const i={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new ZEe(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new YEe(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=tr(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=tr(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=tr(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onnonbubblingmouseout(this._listenOnDomNode,s=>this._onMouseOut(s)),this._hideTimeout=this._register(new cc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=nr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,zi&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=nr(this._mouseWheelToDispose),e)){const n=i=>{this._onMouseWheel(new ax(i))};this._mouseWheelToDispose.push(St(this._listenOnDomNode,xn.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=nW.INSTANCE;{const s=window.devicePixelRatio/Aie();Nl||Hc?t.accept(Date.now(),e.deltaX/s,e.deltaY/s):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let s=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(s)>=Math.abs(o)?o=0:s=0),this._options.flipAxes&&([s,o]=[o,s]);const a=!zi&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=s,s=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,s=s*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let u={};if(s){const d=MY*s,h=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(u,h)}if(o){const d=MY*o,h=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(u,h)}u=this._scrollable.validateScrollPosition(u),(l.scrollLeft!==u.scrollLeft||l.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",s=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),exe)}}class g$ extends foe{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new I4(0,i=>xv(i));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class p$ extends foe{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class C2 extends g${constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function nxe(r){const e={lazyRender:typeof r.lazyRender<"u"?r.lazyRender:!1,className:typeof r.className<"u"?r.className:"",useShadows:typeof r.useShadows<"u"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel<"u"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes<"u"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded<"u"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel<"u"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX<"u"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity<"u"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity<"u"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis<"u"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll<"u"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize<"u"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode<"u"?r.listenOnDomNode:null,horizontal:typeof r.horizontal<"u"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize<"u"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows<"u"?r.horizontalHasArrows:!1,vertical:typeof r.vertical<"u"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize<"u"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows<"u"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize<"u"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage<"u"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize<"u"?r.verticalSliderSize:e.verticalScrollbarSize,zi&&(e.className+=" mac"),e}class ixe extends Ff{constructor(e,t,n,i){super(e);const s=this._context.configuration.options,o=s.get(91),a=s.get(66),l=s.get(34),u=s.get(94),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+jM(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:u,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new p$(t.domNode,d,this._context.viewLayout.getScrollable())),Tv.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=tr(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=(p,v,C)=>{const S={};if(v){const E=p.scrollTop;E&&(S.scrollTop=this._context.viewLayout.getCurrentScrollTop()+E,p.scrollTop=0)}if(C){const E=p.scrollLeft;E&&(S.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+E,p.scrollLeft=0)}this._context.model.setScrollPosition(S,1)};this._register(St(n.domNode,"scroll",p=>h(n.domNode,!0,!0))),this._register(St(t.domNode,"scroll",p=>h(t.domNode,!0,!1))),this._register(St(i.domNode,"scroll",p=>h(i.domNode,!0,!1))),this._register(St(this.scrollbarDomNode.domNode,"scroll",p=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(130);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),i=t.get(66),s=t.get(34),o=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:s,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(130)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+jM(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}ds((r,e)=>{const t=r.getColor(sD);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=r.getColor(HE);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const i=r.getColor(zE);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);const s=r.getColor(UE);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${s};
			}
		`)});class wR{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class m$ extends aD{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=[]}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,o=0;for(let a=0,l=n.length;a<l;a++){const u=n[a],d=u.className;let h=Math.max(u.startLineNumber,e)-e;const p=Math.min(u.endLineNumber,t)-e;s===d?(h=Math.max(o+1,h),o=Math.max(o,p)):(s=d,o=p);for(let v=h;v<=o;v++)i[v].push(s)}return i}}class rxe extends m${constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.glyphMarginClassName;l&&(n[i++]=new wR(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+o+"px;width:"+a+"px;height:"+s+'px;"></div>',u=[];for(let d=t;d<=n;d++){const h=d-t,p=i[h];p.length===0?u[h]="":u[h]='<div class="cgmr codicon '+p.join(" ")+l}this._renderResult=u}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class sxe extends aD{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(131),i=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131),i=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const i=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,u=this._lineHeight,d=this._primaryPosition,h=this.getGuidesByLine(o,a,d),p=[];for(let v=o;v<=a;v++){const C=v-o,S=h[C];let E="";const k=(n=(t=e.visibleRangeForPosition(new ze(v,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const D of S){const O=k+(D.visibleColumn-1)*this._spaceWidth;if(O>l||this._maxIndentLeft>0&&O>this._maxIndentLeft)break;const H=D.horizontalLine?D.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",V=D.horizontalLine?((s=(i=e.visibleRangeForPosition(new ze(v,D.horizontalLine.endColumn)))===null||i===void 0?void 0:i.left)!==null&&s!==void 0?s:O+this._spaceWidth)-O:this._spaceWidth;E+=`<div class="core-guide ${D.className} ${H}" style="left:${O}px;height:${u}px;width:${V}px"></div>`}p[C]=E}this._renderResult=p}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Rw.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Rw.EnabledForActive:Rw.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const h=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);o=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:u}=this._context.model.getTextModelOptions(),d=[];for(let h=e;h<=t;h++){const p=new Array;d.push(p);const v=i?i[h-e]:[],C=new WE(v),S=s?s[h-e]:[];for(let E=1;E<=S;E++){const k=(E-1)*u+1,D=v.length===0&&o<=h&&h<=a&&E===l;p.push(...C.takeWhile(H=>H.visibleColumn<k)||[]);const O=C.peek();(!O||O.visibleColumn!==k||O.horizontalLine)&&p.push(new pE(k,D?"core-guide-indent-active":"core-guide-indent",null))}p.push(...C.takeWhile(E=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function RA(r){if(!(r&&r.isTransparent()))return r}ds((r,e)=>{const t=r.getColor(S4);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=r.getColor(L4)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const i=[{bracketColor:Xse,guideColor:VLe,guideColorActive:qLe},{bracketColor:Qse,guideColor:HLe,guideColorActive:KLe},{bracketColor:Jse,guideColor:zLe,guideColorActive:GLe},{bracketColor:eoe,guideColor:ULe,guideColorActive:YLe},{bracketColor:toe,guideColor:$Le,guideColorActive:ZLe},{bracketColor:noe,guideColor:jLe,guideColorActive:XLe}],s=new roe;let o=i.map(a=>{var l,u;const d=r.getColor(a.bracketColor),h=r.getColor(a.guideColor),p=r.getColor(a.guideColorActive),v=RA((l=RA(h))!==null&&l!==void 0?l:d==null?void 0:d.transparent(.3)),C=RA((u=RA(p))!==null&&u!==void 0?u:d);if(!(!v||!C))return{guideColor:v,guideColorActive:C}}).filter(K0e);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${s.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${s.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${s.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${s.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class oxe{constructor(){this._currentVisibleRange=new se(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class axe{constructor(e,t,n,i,s,o){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=i,this.stopScrollTop=s,this.scrollType=o,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class lxe{constructor(e,t,n,i){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=i,this.type="selections";let s=e[0].startLineNumber,o=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){const u=e[a];s=Math.min(s,u.startLineNumber),o=Math.max(o,u.endLineNumber)}this.minLineNumber=s,this.maxLineNumber=o}}class T4 extends Ff{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new uoe(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,s=i.get(43),o=i.get(131);this._lineHeight=i.get(58),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=i.get(88),this._cursorSurroundingLines=i.get(25),this._cursorSurroundingLinesStyle=i.get(26),this._canUseLayerHinting=!i.get(28),this._viewLineOptions=new VG(n,this._context.theme.type),Tv.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Hw}`),lc.applyFontInfo(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Qr(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Qr(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new oxe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new ov(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(131)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),i=t.get(131);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),lc.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(130)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new VG(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let s=t;s<=n;s++)i=this._visibleLines.getVisibleLine(s).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new axe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new lxe(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(i)===1)return new ze(i,1);const s=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(i<s||i>o)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t);const l=this._context.model.getLineMinColumn(i);return a<l&&(a=l),new ze(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===ov.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const s=this._visibleLines.getVisibleLine(i);if(e===s.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=se.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;let s=[],o=0;const a=new WG(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new ze(i.startLineNumber,1)).lineNumber);const u=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=i.startLineNumber;h<=i.endLineNumber;h++){if(h<u||h>d)continue;const p=h===i.startLineNumber?i.startColumn:1,v=h===i.endLineNumber?i.endColumn:this._context.model.getLineMaxColumn(h),C=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,p,v,a);if(C){if(t&&h<n){const S=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new ze(h+1,1)).lineNumber,S!==l&&(C.ranges[C.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[o++]=new Iye(C.outsideRenderedLine,h,d4.from(C.ranges))}}return o===0?null:s}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new WG(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Tye(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,s=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){s=!1;continue}i=Math.max(i,a.getWidth())}return s&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++){const o=this._visibleLines.getVisibleLine(s);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Hc&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,s){const o=e.top,a=e.height,l=o+a;let u,d,h;if(i&&i.length>0){let C=i[0].startLineNumber,S=i[0].endLineNumber;for(let E=1,k=i.length;E<k;E++){const D=i[E];C=Math.min(C,D.startLineNumber),S=Math.max(S,D.endLineNumber)}u=!1,d=this._context.viewLayout.getVerticalOffsetForLineNumber(C),h=this._context.viewLayout.getVerticalOffsetForLineNumber(S)+this._lineHeight}else if(n)u=!0,d=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const C=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);d-=C*this._lineHeight,h+=Math.max(0,C-1)*this._lineHeight}(s===0||s===4)&&(h+=this._lineHeight);let v;if(h-d>a){if(!u)return-1;v=d}else if(s===5||s===6)if(s===6&&o<=d&&h<=l)v=o;else{const C=Math.max(5*this._lineHeight,a*.2),S=d-C,E=h-a;v=Math.max(E,S)}else if(s===1||s===2)if(s===2&&o<=d&&h<=l)v=o;else{const C=(d+h)/2;v=Math.max(0,C-a/2)}else v=this._computeMinimumScrolling(o,l,d,h,s===3,s===4);return v}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,i=n+t.width;let s=1073741824,o=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const u of l.ranges)s=Math.min(s,Math.round(u.left)),o=Math.max(o,Math.round(u.left+u.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const u=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!u)return null;for(const d of u.ranges)s=Math.min(s,Math.round(d.left)),o=Math.max(o,Math.round(d.left+d.width))}return s=Math.max(0,s-T4.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,e.type==="selections"&&o-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,i,s,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,i,s,o){e=e|0,t=t|0,n=n|0,i=i|0,s=!!s,o=!!o;const a=t-e;if(i-n<a){if(s)return n;if(o)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}}T4.HORIZONTAL_EXTRA_PX=30;class uxe extends m${constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(130);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.linesDecorationsClassName;l&&(n[i++]=new wR(a.range.startLineNumber,a.range.endLineNumber,l));const u=a.options.firstLineDecorationClassName;u&&(n[i++]=new wR(a.range.startLineNumber,a.range.startLineNumber,u))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+o+'px;"></div>',l=[];for(let u=t;u<=n;u++){const d=u-t,h=i[d];let p="";for(let v=0,C=h.length;v<C;v++)p+='<div class="cldr '+h[v]+a;l[d]=p}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class cxe extends m${constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.marginClassName;l&&(n[i++]=new wR(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=[];for(let o=t;o<=n;o++){const a=o-t,l=i[a];let u="";for(let d=0,h=l.length;d<h;d++)u+='<div class="cmdr '+l[d]+'" style=""></div>';s[a]=u}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Sf{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=Sf._clamp(e),this.g=Sf._clamp(t),this.b=Sf._clamp(n),this.a=Sf._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}Sf.Empty=new Sf(0,0,0,0);class y2 extends Je{constructor(){super(),this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Qs.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new y2),this._INSTANCE}_updateColorMap(){const e=Qs.getColorMap();if(!e){this._colors=[Sf.Empty],this._backgroundIsLight=!0;return}this._colors=[Sf.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new Sf(i.r,i.g,i.b,Math.round(i.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}y2._INSTANCE=null;class RY{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}class dxe{constructor(e,t){this.tabSize=e,this.data=t}}class _${constructor(e,t,n,i,s,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=o,this.inlineDecorations=a}}class Th{constructor(e,t,n,i,s,o,a,l,u,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=Th.isBasicASCII(n,o),this.containsRTL=Th.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=u,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?LU(e):!0}static containsRTL(e,t,n){return!t&&n?GP(e):!1}}class lk{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class hxe{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new lk(new se(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class goe{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class poe{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}const fxe=(()=>{const r=[];for(let e=32;e<=126;e++)r.push(e);return r.push(65533),r})(),gxe=(r,e)=>(r-=32,r<0||r>96?e<=2?(r+96)%96:96-1:r);class Zk{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Zk.soften(e,12/15),this.charDataLight=Zk.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=JM(e[i]*t);return n}renderChar(e,t,n,i,s,o,a,l,u,d,h){const p=1*this.scale,v=2*this.scale,C=h?1:v;if(t+p>e.width||n+C>e.height){console.warn("bad render request outside image data");return}const S=d?this.charDataLight:this.charDataNormal,E=gxe(i,u),k=e.width*4,D=a.r,O=a.g,H=a.b,V=s.r-D,X=s.g-O,$=s.b-H,P=Math.max(o,l),z=e.data;let M=E*p*v,W=n*k+t*4;for(let I=0;I<C;I++){let R=W;for(let G=0;G<p;G++){const Z=S[M++]/255*(o/255);z[R++]=D+V*Z,z[R++]=O+X*Z,z[R++]=H+$*Z,z[R++]=P}W+=k}}blockRenderChar(e,t,n,i,s,o,a,l){const u=1*this.scale,d=2*this.scale,h=l?1:d;if(t+u>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const p=e.width*4,v=.5*(s/255),C=o.r,S=o.g,E=o.b,k=i.r-C,D=i.g-S,O=i.b-E,H=C+k*v,V=S+D*v,X=E+O*v,$=Math.max(s,a),P=e.data;let z=n*p+t*4;for(let M=0;M<h;M++){let W=z;for(let I=0;I<u;I++)P[W++]=H,P[W++]=V,P[W++]=X,P[W++]=$;z+=p}}}const PY={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},FY=r=>{const e=new Uint8ClampedArray(r.length/2);for(let t=0;t<r.length;t+=2)e[t>>1]=PY[r[t]]<<4|PY[r[t+1]]&15;return e},BY={1:Rb(()=>FY("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Rb(()=>FY("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class uk{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return BY[e]?n=new Zk(BY[e](),e):n=uk.createFromSampleData(uk.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let i=0;for(const s of fxe)n.fillText(String.fromCharCode(s),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let i=uk._downsample(e,t);return new Zk(i,t)}static _downsampleChar(e,t,n,i,s){const o=1*s,a=2*s;let l=i,u=0;for(let d=0;d<a;d++){const h=d/a*16,p=(d+1)/a*16;for(let v=0;v<o;v++){const C=v/o*10,S=(v+1)/o*10;let E=0,k=0;for(let O=h;O<p;O++){const H=t+Math.floor(O)*3840,V=1-(O-Math.floor(O));for(let X=C;X<S;X++){const $=1-(X-Math.floor(X)),P=H+Math.floor(X)*4,z=$*V;k+=z,E+=e[P]*e[P+3]/255*z}}const D=E/k;u=Math.max(u,D),n[l++]=JM(D)}}return u}static _downsample(e,t){const n=2*t*1*t,i=n*96,s=new Uint8ClampedArray(i);let o=0,a=0,l=0;for(let u=0;u<96;u++)l=Math.max(l,this._downsampleChar(e,a,s,o,t)),o+=n,a+=10*4;if(l>0){const u=255/l;for(let d=0;d<i;d++)s[d]*=u}return s}}const pxe=140,mxe=2;class Xk{constructor(e,t,n){const i=e.options,s=i.get(128),o=i.get(130),a=o.minimap,l=i.get(43),u=i.get(64);this.renderMinimap=a.renderMinimap,this.size=u.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(93),this.showSlider=u.showSlider,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Rb(()=>uk.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=Xk._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Xk._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(cye);return n?new Sf(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(dye);return t?Sf._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class ck{constructor(e,t,n,i,s,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=s,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,i,s,o,a,l,u,d,h){const p=e.pixelRatio,v=e.minimapLineHeight,C=Math.floor(e.canvasInnerHeight/v),S=e.lineHeight;if(e.minimapHeightIsEditorHeight){const V=l*e.lineHeight+(e.scrollBeyondLastLine?s-e.lineHeight:0),X=Math.max(1,Math.floor(s*s/V)),$=Math.max(0,e.minimapHeight-X),P=$/(d-s),z=u*P,M=$>0,W=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new ck(u,d,M,P,z,X,1,Math.min(a,W))}let E;if(o&&n!==a){const V=n-t+1;E=Math.floor(V*v/p)}else{const V=s/S;E=Math.floor(V*v/p)}let k;e.scrollBeyondLastLine?k=(a-1)*v/p:k=Math.max(0,a*v/p-E),k=Math.min(e.minimapHeight-E,k);const D=k/(d-s),O=u*D;let H=0;if(e.scrollBeyondLastLine&&(H=s/S-1),C>=a+H){const X=a,$=k>0;return new ck(u,d,$,D,O,E,1,X)}else{let V=Math.max(1,Math.floor(t-O*p/v));h&&h.scrollHeight===d&&(h.scrollTop>u&&(V=Math.min(V,h.startLineNumber)),h.scrollTop<u&&(V=Math.max(V,h.startLineNumber)));const X=Math.min(a,V+C-1),$=(u-i)/S,P=(t-V+$)*v/p;return new ck(u,d,!0,D,P,E,V,X)}}}class SR{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}SR.INVALID=new SR(-1);class WY{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new loe(()=>SR.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,s=n.length;i<s;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class v${constructor(e,t,n,i){this._backgroundFillData=v$._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,s=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let u=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[u]=i,l[u+1]=s,l[u+2]=o,l[u+3]=a,u+=4;return l}}class Qk{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const i=e.pixelRatio,s=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=VE.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:s,pixelRatio:i}),l=t/a,u=l/2;if(!n||n.minimapLines.length===0){let O=[];if(O[0]=1,a>1){for(let H=0,V=a-1;H<V;H++)O[H]=Math.round(H*l+u);O[a-1]=t}return[new Qk(l,O),[]]}const d=n.minimapLines,h=d.length;let p=[],v=0,C=0,S=1;const E=10;let k=[],D=null;for(let O=0;O<a;O++){const H=Math.max(S,Math.round(O*l)),V=Math.max(H,Math.round((O+1)*l));for(;v<h&&d[v]<H;){if(k.length<E){const $=v+1+C;D&&D.type==="deleted"&&D._oldIndex===v-1?D.deleteToLineNumber++:(D={type:"deleted",_oldIndex:v,deleteFromLineNumber:$,deleteToLineNumber:$},k.push(D)),C--}v++}let X;if(v<h&&d[v]<=V)X=d[v],v++;else if(O===0?X=1:O+1===a?X=t:X=Math.round(O*l+u),k.length<E){const $=v+1+C;D&&D.type==="inserted"&&D._i===O-1?D.insertToLineNumber++:(D={type:"inserted",_i:O,insertFromLineNumber:$,insertToLineNumber:$},k.push(D)),C++}p[O]=X,S=X}if(k.length<E)for(;v<h;){const O=v+1+C;D&&D.type==="deleted"&&D._oldIndex===v-1?D.deleteToLineNumber++:(D={type:"deleted",_oldIndex:v,deleteFromLineNumber:O,deleteToLineNumber:O},k.push(D)),C--,v++}else k=[{type:"flush"}];return[new Qk(l,p),k]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),i=Math.max(i,s)):this.minimapLines[s]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class _xe extends Ff{constructor(e){super(e),this.tokensColorTracker=y2.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Xk(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Qk.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new LR(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Xk(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=Qk.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let i=[];for(let s=0,o=t-e+1;s<o;s++)n[s]?i[s]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+s-1]):i[s]=null;return i}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new un(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new se(s,1,o,this._context.model.getLineMaxColumn(o))}else n=new se(e,1,t,this._context.model.getLineMaxColumn(t));const i=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let s=[];for(const o of i){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),u=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new goe(new se(l,a.startColumn,u,a.endColumn),o.options))}return s}return i}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new se(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class LR extends Je{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(AG),this._domNode=tr(document.createElement("div")),Tv.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=tr(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=tr(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=tr(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=tr(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=tr(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=ja(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const u=su(this._slider.domNode),d=u.top+u.height/2;this._startSliderDragging(n.buttons,n.posx,d,n.posy,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let l=Math.floor(o/s)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new JS,this._sliderMouseDownListener=ja(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Rr.addTarget(this._domNode.domNode),this._sliderTouchStartListener=St(this._domNode.domNode,as.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=St(this._domNode.domNode,as.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=ja(this._domNode.domNode,as.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,i,s){this._slider.toggleClassName("active",!0);const o=(a,l)=>{const u=Math.abs(l-t);if(Nl&&u>pxe){this._model.setScrollTop(s.scrollTop);return}const d=a-n;this._model.setScrollTop(s.getDesiredScrollTopFromDelta(d))};i!==n&&o(i,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,rD,a=>o(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new v$(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(AG),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=ck.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(se.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((p,v)=>(p.options.zIndex||0)-(v.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,u=this._decorationsCanvas.domNode.getContext("2d");u.clearRect(0,0,i,s);const d=new VY(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(u,t,d,e,o),this._renderDecorationsLineHighlights(u,n,d,e,o);const h=new VY(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(u,t,h,e,o,l,a,i),this._renderDecorationsHighlights(u,n,h,e,o,l,a,i)}}_renderSelectionLineHighlights(e,t,n,i,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const u=Math.max(i.startLineNumber,l.startLineNumber),d=Math.min(i.endLineNumber,l.endLineNumber);if(u>d)continue;for(let v=u;v<=d;v++)n.set(v,!0);const h=(u-i.startLineNumber)*s,p=(d-i.startLineNumber)*s+s;a>=h||(a>o&&e.fillRect(j1,o,e.canvas.width,a-o),o=h),a=p}a>o&&e.fillRect(j1,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,i,s){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],u=l.options.minimap;if(!u||u.position!==Pd.Inline)continue;const d=Math.max(i.startLineNumber,l.range.startLineNumber),h=Math.min(i.endLineNumber,l.range.endLineNumber);if(d>h)continue;const p=u.getColor(this._theme);if(!p||p.isTransparent())continue;let v=o.get(p.toString());v||(v=p.transparent(.5).toString(),o.set(p.toString(),v)),e.fillStyle=v;for(let C=d;C<=h;C++){if(n.has(C))continue;n.set(C,!0);const S=(d-i.startLineNumber)*s;e.fillRect(j1,S,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,i,s,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const u of t){const d=Math.max(i.startLineNumber,u.startLineNumber),h=Math.min(i.endLineNumber,u.endLineNumber);if(!(d>h))for(let p=d;p<=h;p++)this.renderDecorationOnLine(e,n,u,this._selectionColor,i,p,s,s,o,a,l)}}_renderDecorationsHighlights(e,t,n,i,s,o,a,l){for(const u of t){const d=u.options.minimap;if(!d)continue;const h=Math.max(i.startLineNumber,u.range.startLineNumber),p=Math.min(i.endLineNumber,u.range.endLineNumber);if(h>p)continue;const v=d.getColor(this._theme);if(!(!v||v.isTransparent()))for(let C=h;C<=p;C++)switch(d.position){case Pd.Inline:this.renderDecorationOnLine(e,n,u.range,v,i,C,s,s,o,a,l);continue;case Pd.Gutter:const S=(C-i.startLineNumber)*s,E=2;this.renderDecoration(e,v,E,S,mxe,s);continue}}}renderDecorationOnLine(e,t,n,i,s,o,a,l,u,d,h){const p=(o-s.startLineNumber)*l;if(p+a<0||p>this._model.options.canvasInnerHeight)return;const{startLineNumber:v,endLineNumber:C}=n,S=v===o?n.startColumn:1,E=C===o?n.endColumn:this._model.getLineMaxColumn(o),k=this.getXOffsetForPosition(t,o,S,u,d,h),D=this.getXOffsetForPosition(t,o,E,u,d,h);this.renderDecoration(e,i,k,p,D-k,a)}getXOffsetForPosition(e,t,n,i,s,o){if(n===1)return j1;if((n-1)*s>=o)return o;let l=e.get(t);if(!l){const u=this._model.getLineContent(t);l=[j1];let d=j1;for(let h=1;h<u.length+1;h++){const p=u.charCodeAt(h-1),v=p===9?i*s:Iv(p)?2*s:s,C=d+v;if(C>=o){l[h]=o;break}l[h]=C,d=C}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,i,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,s,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const Z=this._lastRenderData._get();return new WY(e,Z.imageData,Z.lines)}const s=this._getBuffer();if(!s)return null;let[o,a,l]=LR._renderUntouchedLines(s,t,n,i,this._lastRenderData);const u=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,p=this._model.options.backgroundColor,v=this._model.options.foregroundAlpha,C=this._model.tokensColorTracker,S=C.backgroundIsLight(),E=this._model.options.renderMinimap,k=this._model.options.charRenderer(),D=this._model.options.fontScale,O=this._model.options.minimapCharWidth,V=(E===1?2:2+1)*D,X=i>V?Math.floor((i-V)/2):0,$=p.a/255,P=new Sf(Math.round((p.r-h.r)*$+h.r),Math.round((p.g-h.g)*$+h.g),Math.round((p.b-h.b)*$+h.b),255);let z=0;const M=[];for(let Z=0,ee=n-t+1;Z<ee;Z++)l[Z]&&LR._renderLine(s,P,p.a,S,E,O,C,v,k,z,X,d,u[Z],D,i),M[Z]=new SR(z),z+=i;const W=o===-1?0:o,R=(a===-1?s.height:a)-W;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,W,s.width,R),new WY(e,s,M)}static _renderUntouchedLines(e,t,n,i,s){const o=[];if(!s){for(let P=0,z=n-t+1;P<z;P++)o[P]=!0;return[-1,-1,o]}const a=s._get(),l=a.imageData.data,u=a.rendLineNumberStart,d=a.lines,h=d.length,p=e.width,v=e.data,C=(n-t+1)*i*p*4;let S=-1,E=-1,k=-1,D=-1,O=-1,H=-1,V=0;for(let P=t;P<=n;P++){const z=P-t,M=P-u,W=M>=0&&M<h?d[M].dy:-1;if(W===-1){o[z]=!0,V+=i;continue}const I=W*p*4,R=(W+i)*p*4,G=V*p*4,Z=(V+i)*p*4;D===I&&H===G?(D=R,H=Z):(k!==-1&&(v.set(l.subarray(k,D),O),S===-1&&k===0&&k===O&&(S=D),E===-1&&D===C&&k===O&&(E=k)),k=I,D=R,O=G,H=Z),o[z]=!1,V+=i}k!==-1&&(v.set(l.subarray(k,D),O),S===-1&&k===0&&k===O&&(S=D),E===-1&&D===C&&k===O&&(E=k));const X=S===-1?-1:S/(p*4),$=E===-1?-1:E/(p*4);return[X,$,o]}static _renderLine(e,t,n,i,s,o,a,l,u,d,h,p,v,C,S){const E=v.content,k=v.tokens,D=e.width-o,O=S===1;let H=j1,V=0,X=0;for(let $=0,P=k.getCount();$<P;$++){const z=k.getEndOffset($),M=k.getForeground($),W=a.getColor(M);for(;V<z;V++){if(H>D)return;const I=E.charCodeAt(V);if(I===9){const R=p-(V+X)%p;X+=R-1,H+=R*o}else if(I===32)H+=o;else{const R=Iv(I)?2:1;for(let G=0;G<R;G++)if(s===2?u.blockRenderChar(e,H,d+h,W,l,t,n,O):u.renderChar(e,H,d+h,I,W,l,t,n,C,i,O),H+=o,H>D)return}}}}}class VY{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,s=this._endLineNumber-this._startLineNumber+1;i<s;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}ds((r,e)=>{const t=r.getColor(fye);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=r.getColor(gye);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const i=r.getColor(pye);i&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${i}; }`);const s=r.getColor(sD);s&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${s} -6px 0 6px -6px inset; }`)});class vxe extends Ff{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=tr(document.createElement("div")),Tv.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=tr(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._renderWidget(this._widgets[s])}}}class bxe{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(128),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const i=t.getColor(DLe);this.borderColor=i?i.toString():null,this.hideCursor=n.get(51);const s=t.getColor(Gse);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(64),a=o.enabled,l=o.side,u=a?t.getColor(ILe)||Qs.getDefaultBackground():null;u===null||l==="left"?this.backgroundColor=null:this.backgroundColor=We.Format.CSS.formatHex(u);const h=n.get(130).overviewRuler;this.top=h.top,this.right=h.right,this.domWidth=h.width,this.domHeight=h.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,v]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=v}_initLanes(e,t,n){const i=t-e;if(n>=3){const s=Math.floor(i/3),o=Math.floor(i/3),a=i-s-o,l=e,u=l+s,d=l+s+a;return[[0,l,u,l,d,l,u,l],[0,s,a,s+a,o,s+a+o,a+o,s+a+o]]}else if(n===2){const s=Math.floor(i/2),o=i-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,o,s+o,s+o,s+o]]}else{const s=e,o=i;return[[0,s,s,s,s,s,s,s],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Cxe extends Ff{constructor(e){super(e),this._domNode=tr(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Qs.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new bxe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(ze.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,i=this._context.viewLayout,s=this._context.viewLayout.getScrollHeight(),o=t/s,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,u=l/2|0,d=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));const h=this._settings.x,p=this._settings.w;a.sort(poe.cmp);for(const v of a){const C=v.color,S=v.data;d.fillStyle=C;let E=0,k=0,D=0;for(let O=0,H=S.length/3;O<H;O++){const V=S[3*O],X=S[3*O+1],$=S[3*O+2];let P=i.getVerticalOffsetForLineNumber(X)*o|0,z=(i.getVerticalOffsetForLineNumber($)+n)*o|0;if(z-P<l){let W=(P+z)/2|0;W<u?W=u:W+u>t&&(W=t-u),P=W-u,z=W+u}P>D+1||V!==E?(O!==0&&d.fillRect(h[E],k,p[E],D-k),E=V,k=P,D=z):z>D&&(D=z)}d.fillRect(h[E],k,p[E],D-k)}if(!this._settings.hideCursor&&this._settings.cursorColor){const v=2*this._settings.pixelRatio|0,C=v/2|0,S=this._settings.x[7],E=this._settings.w[7];d.fillStyle=this._settings.cursorColor;let k=-100,D=-100;for(let O=0,H=this._cursorPositions.length;O<H;O++){const V=this._cursorPositions[O];let X=i.getVerticalOffsetForLineNumber(V.lineNumber)*o|0;X<C?X=C:X+C>t&&(X=t-C);const $=X-C,P=$+v;$>D+1?(O!==0&&d.fillRect(S,k,E,D-k),k=$,D=P):P>D&&(D=P)}d.fillRect(S,k,E,D-k)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}}class HY{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Jk{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class yxe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Jk.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),s=n/i,o=Math.floor(4*this._pixelRatio/2);let a=[];for(let l=0,u=this._zones.length;l<u;l++){const d=this._zones[l];if(!e){const D=d.getColorZones();if(D){a.push(D);continue}}const h=Math.floor(s*this._getVerticalOffsetForLine(d.startLineNumber)),p=Math.floor(s*(this._getVerticalOffsetForLine(d.endLineNumber)+t));let v=Math.floor((h+p)/2),C=p-v;C<o&&(C=o),v-C<0&&(v=C),v+C>n&&(v=n-C);const S=d.color;let E=this._color2Id[S];E||(E=++this._lastAssignedId,this._color2Id[S]=E,this._id2Color[E]=S);const k=new HY(v-C,v+C,E);d.setColorZone(k),a.push(k)}return this._colorZonesInvalid=!1,a.sort(HY.compare),a}}class wxe extends p2{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=tr(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new yxe(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(128)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(128)&&(this._zoneManager.setPixelRatio(t.get(128)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,i,e),!0}_renderOneLane(e,t,n,i){let s=0,o=0,a=0;for(const l of t){const u=l.colorId,d=l.from,h=l.to;u!==s?(e.fillRect(0,o,i,a-o),s=u,e.fillStyle=n[s],o=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,o,i,a-o),o=d,a=h)}e.fillRect(0,o,i,a-o)}}class Sxe extends Ff{constructor(e){super(e),this.domNode=tr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.model.getTextModelOptions(),s=i;let o=t-e;for(;o>0;){const a=tr(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],s=this._rulers[t];i.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}ds((r,e)=>{const t=r.getColor(ELe);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class Lxe extends Ff{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=tr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(130);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}ds((r,e)=>{const t=r.getColor(sD);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class Exe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class xxe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Dxe(r){return new Exe(r)}function Ixe(r){return new xxe(r.lineNumber,r.ranges.map(Dxe))}class io extends aD{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let u=0;!s&&u<n.length;u++)n[u].lineNumber===a&&(s=n[u].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let u=n.length-1;!o&&u>=0;u--)n[u].lineNumber===l&&(o=n[u].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const u=t[a].ranges[0],d=u.left,h=u.left+u.width,p={top:0,bottom:0},v={top:0,bottom:0};if(a>0){const C=t[a-1].ranges[0].left,S=t[a-1].ranges[0].left+t[a-1].ranges[0].width;PA(d-C)<i?p.top=2:d>C&&(p.top=1),PA(h-S)<i?v.top=2:C<h&&h<S&&(v.top=1)}else s&&(p.top=s.startStyle.top,v.top=s.endStyle.top);if(a+1<l){const C=t[a+1].ranges[0].left,S=t[a+1].ranges[0].left+t[a+1].ranges[0].width;PA(d-C)<i?p.bottom=2:C<d&&d<S&&(p.bottom=1),PA(h-S)<i?v.bottom=2:h<S&&(v.bottom=1)}else o&&(p.bottom=o.startStyle.bottom,v.bottom=o.endStyle.bottom);u.startStyle=p,u.endStyle=v}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(Ixe);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,i,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const s=!!i[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,u=i[i.length-1].lineNumber;for(let d=0,h=i.length;d<h;d++){const p=i[d],v=p.lineNumber,C=v-t,S=n&&(v===u||v===l)?a:o,E=n&&v===l?1:0;let k="",D="";for(let O=0,H=p.ranges.length;O<H;O++){const V=p.ranges[O];if(s){const $=V.startStyle,P=V.endStyle;if($.top===1||$.bottom===1){k+=this._createSelectionPiece(E,S,io.SELECTION_CLASS_NAME,V.left-io.ROUNDED_PIECE_WIDTH,io.ROUNDED_PIECE_WIDTH);let z=io.EDITOR_BACKGROUND_CLASS_NAME;$.top===1&&(z+=" "+io.SELECTION_TOP_RIGHT),$.bottom===1&&(z+=" "+io.SELECTION_BOTTOM_RIGHT),k+=this._createSelectionPiece(E,S,z,V.left-io.ROUNDED_PIECE_WIDTH,io.ROUNDED_PIECE_WIDTH)}if(P.top===1||P.bottom===1){k+=this._createSelectionPiece(E,S,io.SELECTION_CLASS_NAME,V.left+V.width,io.ROUNDED_PIECE_WIDTH);let z=io.EDITOR_BACKGROUND_CLASS_NAME;P.top===1&&(z+=" "+io.SELECTION_TOP_LEFT),P.bottom===1&&(z+=" "+io.SELECTION_BOTTOM_LEFT),k+=this._createSelectionPiece(E,S,z,V.left+V.width,io.ROUNDED_PIECE_WIDTH)}}let X=io.SELECTION_CLASS_NAME;if(s){const $=V.startStyle,P=V.endStyle;$.top===0&&(X+=" "+io.SELECTION_TOP_LEFT),$.bottom===0&&(X+=" "+io.SELECTION_BOTTOM_LEFT),P.top===0&&(X+=" "+io.SELECTION_TOP_RIGHT),P.bottom===0&&(X+=" "+io.SELECTION_BOTTOM_RIGHT)}D+=this._createSelectionPiece(E,S,X,V.left,V.width)}e[C][0]+=k,e[C][1]+=D}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let o=n;o<=i;o++){const a=o-n;t[a]=["",""]}const s=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){s[o]=null;continue}const u=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=u,this._actualRenderOneSelection(t,n,this._selections.length>1,u)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}io.SELECTION_CLASS_NAME="selected-text";io.SELECTION_TOP_LEFT="top-left-radius";io.SELECTION_BOTTOM_LEFT="bottom-left-radius";io.SELECTION_TOP_RIGHT="top-right-radius";io.SELECTION_BOTTOM_RIGHT="bottom-right-radius";io.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";io.ROUNDED_PIECE_WIDTH=10;ds((r,e)=>{const t=r.getColor(gC);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=r.getColor(WU);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const i=r.getColor(pCe);i&&!i.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)});function PA(r){return r<0?-r:r}class zY{constructor(e,t,n,i,s,o){this.top=e,this.left=t,this.width=n,this.height=i,this.textContent=s,this.textContentClassName=o}}class UY{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=tr(document.createElement("div")),this._domNode.setClassName(`cursor ${Hw}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),lc.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new ze(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),lc.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===ul.Line||this._cursorStyle===ul.LineThin){const p=e.visibleRangeForPosition(this._position);if(!p||p.outsideRenderedLine)return null;let v;if(this._cursorStyle===ul.Line){if(v=vG(this._lineCursorWidth>0?this._lineCursorWidth:2),v>2){const E=this._context.model.getLineContent(this._position.lineNumber),k=VM(E,this._position.column-1);t=E.substr(this._position.column-1,k)}}else v=vG(1);let C=p.left;v>=2&&C>=1&&(C-=1);const S=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new zY(S,C,v,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),i=VM(n,this._position.column-1),s=e.linesVisibleRangesForRange(new se(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+i),!1);if(!s||s.length===0)return null;const o=s[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let u="";if(this._cursorStyle===ul.Block){const p=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,i);const v=p.tokens.findTokenIndexAtOffset(this._position.column-1);u=p.tokens.getClassName(v)}let d=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===ul.Underline||this._cursorStyle===ul.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new zY(d,a.left,l,h,t,u)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Hw} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class eN extends Ff{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new UY(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=tr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new cc,this._cursorFlatBlinkInterval=new d2,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let i=0;i<n;i++){const s=new UY(this._context);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let i=0;i<n;i++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let i=0,s=e.selections.length;i<s;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let i=0,s=e.ranges.length;i<s;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},eN.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},eN.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ul.Line:e+=" cursor-line-style";break;case ul.Block:e+=" cursor-block-style";break;case ul.Underline:e+=" cursor-underline-style";break;case ul.LineThin:e+=" cursor-line-thin-style";break;case ul.BlockOutline:e+=" cursor-block-outline-style";break;case ul.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}eN.BLINK_INTERVAL=500;ds((r,e)=>{const t=r.getColor(Gse);if(t){let n=r.getColor(SLe);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),r.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const L5=()=>{throw new Error("Invalid change accessor")};class Txe extends Ff{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=tr(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=tr(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.model.changeWhitespace(i=>{const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._zones[l],d=this._computeWhitespaceProps(u.delegate);u.isInHiddenArea=d.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(i.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(u.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new ze(o,this._context.model.getModelLineMaxColumn(o))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),s=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:i.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const i={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{s&&(t=this._removeZone(n,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(n,s)||t)}};kxe(e,i),i.addZone=L5,i.removeZone=L5,i.layoutZone=L5}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:tr(t.domNode),marginDomNode:t.marginDomNode?tr(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Jn(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Jn(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,i=!0);const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._zones[l];let d=0,h=0,p="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,p="block",u.isVisible||(u.domNode.setAttribute("monaco-visible-view-zone","true"),u.isVisible=!0),this._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(u.isVisible&&(u.domNode.removeAttribute("monaco-visible-view-zone"),u.isVisible=!1),this._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),u.domNode.setTop(d),u.domNode.setHeight(h),u.domNode.setDisplay(p),u.marginDomNode&&(u.marginDomNode.setTop(d),u.marginDomNode.setHeight(h),u.marginDomNode.setDisplay(p))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function kxe(r,e){try{return r(e)}catch(t){Jn(t)}}class Nxe{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Axe{constructor(e,t,n){this.configuration=e,this.theme=new Nxe(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class Oxe{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new se(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Mxe extends p2{constructor(e,t,n,i,s,o){super(),this._selections=[new un(1,1,1,1)],this._renderAnimationFrame=null;const a=new REe(t,i,s,e);this._context=new Axe(t,n.getColorTheme(),i),this._configPixelRatio=this._context.configuration.options.get(128),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(S=>{this._context.theme.update(S),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new IEe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=tr(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=tr(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=tr(document.createElement("div")),Tv.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new ixe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new T4(this._context,this._linesContent),this._viewZones=new Txe(this._context),this._viewParts.push(this._viewZones);const l=new Cxe(this._context);this._viewParts.push(l);const u=new Lxe(this._context);this._viewParts.push(u);const d=new BEe(this._context);this._viewParts.push(d),d.addDynamicOverlay(new zEe(this._context)),d.addDynamicOverlay(new io(this._context)),d.addDynamicOverlay(new sxe(this._context)),d.addDynamicOverlay(new $Ee(this._context));const h=new WEe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new UEe(this._context)),h.addDynamicOverlay(new rxe(this._context)),h.addDynamicOverlay(new cxe(this._context)),h.addDynamicOverlay(new uxe(this._context)),h.addDynamicOverlay(new vx(this._context));const p=new dS(this._context);p.getDomNode().appendChild(this._viewZones.marginDomNode),p.getDomNode().appendChild(h.getDomNode()),this._viewParts.push(p),this._contentWidgets=new VEe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new eN(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new vxe(this._context),this._viewParts.push(this._overlayWidgets);const v=new Sxe(this._context);this._viewParts.push(v);const C=new _xe(this._context);if(this._viewParts.push(C),l){const S=this._scrollbar.getOverviewRulerLayoutInfo();S.parent.insertBefore(l.getDomNode(),S.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(v.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(C.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new DEe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new gEe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new ze(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new ze(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(130);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(127)+" "+jM(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(128),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=Zie(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){Rxe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!hU(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new Oxe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new Dye(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(i);for(const s of e)s.render(i),s.onDidRender();Math.abs(Ik()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),i=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new ze(i.lineNumber,i.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?D4.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new wxe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const i=e.position?e.position.position:null;i!==null&&(t=new se(i.lineNumber,i.column,i.lineNumber,i.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function Rxe(r){try{return r()}catch(e){Jn(e)}}class ER{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new ll(new se(1,1,1,1),0,new ze(1,1),0),new ll(new se(1,1,1,1),0,new ze(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Ii(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return un.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,o),l=this._validatePositionWithCache(e,s,i,a);return n.equals(o)&&i.equals(a)&&s.equals(l)?t:new ll(se.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+i.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=ER._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new ll(i,s,o,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new ll(i,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new ll(i,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new ze(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new ze(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new se(i.lineNumber,i.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new ll(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class $Y{constructor(e){this.context=e,this.primaryCursor=new ER(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const i=this.secondaryCursors[t].viewState.position;i.isBefore(e)&&(e=i)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const i=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(i)&&(e=i)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Ii.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let i=n-t;for(let s=0;s<i;s++)this._addSecondaryCursor()}else if(t>n){let i=t-n;for(let s=0;s<i;s++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let i=0;i<n;i++)this.secondaryCursors[i].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new ER(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,i)=>n.selection.startLineNumber===i.selection.startLineNumber?n.selection.startColumn-i.selection.startColumn:n.selection.startLineNumber-i.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1],o=i.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const u=i.index<s.index?n:n+1,d=i.index<s.index?n+1:n,h=t[d].index,p=t[u].index,v=t[d].selection,C=t[u].selection;if(!v.equalsSelection(C)){const S=v.plusRange(C),E=v.selectionStartLineNumber===v.startLineNumber&&v.selectionStartColumn===v.startColumn,k=C.selectionStartLineNumber===C.startLineNumber&&C.selectionStartColumn===C.startColumn;let D;h===this.lastAddedCursorIndex?(D=E,this.lastAddedCursorIndex=p):D=k;let O;D?O=new un(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn):O=new un(S.endLineNumber,S.endColumn,S.startLineNumber,S.startColumn),t[u].selection=O;const H=Ii.fromModelSelection(O);e[p].setState(this.context,H.modelState,H.viewState)}for(const S of t)S.index>h&&S.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),n--}}}}class Pxe{constructor(){this.type=0}}class Fxe{constructor(){this.type=1}}class Bxe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class Wxe{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class $L{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class FA{constructor(){this.type=5}}class Vxe{constructor(e){this.type=6,this.isFocused=e}}class Hxe{constructor(){this.type=7}}class BA{constructor(){this.type=8}}class moe{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class iW{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class rW{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class $O{constructor(e,t,n,i,s,o){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=i,this.revealHorizontal=s,this.scrollType=o}}class zxe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class Uxe{constructor(){this.type=14}}class $xe{constructor(e){this.type=15,this.ranges=e}}class jxe{constructor(){this.type=16}}let qxe=class{constructor(){this.type=17}};class Kxe extends Je{constructor(){super(),this._onEvent=this._register(new Ae),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new Gxe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class Gxe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class b${constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new b$(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class C${constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new C$(this.oldHasFocus,e.hasFocus)}}class y${constructor(e,t,n,i,s,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new y$(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class jY{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class xR{constructor(e,t,n,i,s,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return xR._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new xR(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class Yxe{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class E5{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class qY{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(se.compareRangesUsingStarts),e.sort(se.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class Cx extends Je{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new xY(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new $Y(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=nr(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new xY(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let s=!1;i!==null&&i.length>Cx.MAX_CURSOR_COUNT&&(i=i.slice(0,Cx.MAX_CURSOR_COUNT),s=!0);const o=new E5(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i){const s=this._cursors.getViewPositions();if(s.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,i);return}else{const o=s[0],a=new se(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,0,n,i)}}_revealPrimaryCursor(e,t,n,i,s){const o=this._cursors.getViewPositions();if(o.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,i,s);else{const a=o[0],l=new se(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,n,i,s)}}_emitCursorRevealRange(e,t,n,i,s,o,a){e.emitViewEvent(new $O(t,n,i,s,o,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){let n=[];for(let i=0,s=t.length;i<s;i++){const o=t[i];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let u=a,d=l;o.selectionStart&&o.selectionStart.lineNumber&&(u=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(d=o.selectionStart.column),n.push({selectionStartLineNumber:u,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Ii.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof Fse){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new $Y(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const i=Ii.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,i)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const i=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Ii.fromModelSelections(i))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:ls.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:ls.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,Ii.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],i);this._autoClosedActions.push(new qY(this._model,s,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=Zxe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],i=[];for(let s=0;s<e.commands.length;s++){const o=e.commands[s];o instanceof aoe&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),i.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,s){const o=new E5(this._model,this);if(o.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new Wxe(l,a)),!i||i.cursorState.length!==o.cursorState.length||o.cursorState.some((u,d)=>!u.modelState.equals(i.cursorState[d].modelState))){const u=i?i.cursorState.map(h=>h.modelState.selection):null,d=i?i.modelVersionId:0;e.emitOutgoingEvent(new xR(u,a,d,o.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const o=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const u=l[0].open,d=s.text.length-o[2].length-1,h=s.text.lastIndexOf(u,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,n,i){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);let o=[],a=[];const l=this._model.pushEditOperations(this.getSelections(),n,u=>{if(s)for(let h=0,p=s.length;h<p;h++){const[v,C]=s[h],S=u[h],E=S.range.startLineNumber,k=S.range.startColumn-1+v,D=S.range.startColumn-1+C;o.push(new se(E,D+1,E,D+2)),a.push(new se(E,k+1,E,D+2))}const d=i(u);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const s=new E5(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){Jn(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return qY.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(zs.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let s=0;for(;s<i;){const o=VM(t,s),a=t.substr(s,o);this._executeEditOperation(zs.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=o}}else this._executeEditOperation(zs.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,s,o){if(t.length===0&&n===0&&i===0){if(s!==0){const a=this.getSelections().map(l=>{const u=l.getPosition();return new un(u.lineNumber,u.column+s,u.lineNumber,u.column+s)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(zs.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,s))},e,o)}paste(e,t,n,i,s){this._executeEdit(()=>{this._executeEditOperation(zs.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(hS.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Dd(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Dd(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}Cx.MAX_CURSOR_COUNT=1e4;class Zxe{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(i,n);for(let o=0,a=i.trackedRanges.length;o<a;o++)i.model._setTrackedRange(i.trackedRanges[o],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,s=this._getLoserCursorMap(i);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let o=[];for(let u=0,d=i.length;u<d;u++)s.hasOwnProperty(i[u].identifier.major.toString())||o.push(i[u]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,u=>{let d=[];for(let v=0;v<e.selectionsBefore.length;v++)d[v]=[];for(const v of u)v.identifier&&d[v.identifier.major].push(v);const h=(v,C)=>v.identifier.minor-C.identifier.minor;let p=[];for(let v=0;v<e.selectionsBefore.length;v++)d[v].length>0?(d[v].sort(h),p[v]=t[v].computeCursorState(e.model,{getInverseEditOperations:()=>d[v],getTrackedSelection:C=>{const S=parseInt(C,10),E=e.model._getTrackedRange(e.trackedRanges[S]);return e.trackedRangesDirection[S]===0?new un(E.startLineNumber,E.startColumn,E.endLineNumber,E.endColumn):new un(E.endLineNumber,E.endColumn,E.startLineNumber,E.startColumn)}})):p[v]=e.selectionsBefore[v];return p});a||(a=e.selectionsBefore);let l=[];for(let u in s)s.hasOwnProperty(u)&&l.push(parseInt(u,10));l.sort((u,d)=>d-u);for(const u of l)a.splice(u,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){let i=[],s=0;const o=(h,p,v=!1)=>{se.isEmpty(h)&&p===""||i.push({identifier:{major:t,minor:s++},range:h,text:p,forceMoveMarkers:v,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:o,addTrackedEditOperation:(h,p,v)=>{a=!0,o(h,p,v)},trackSelection:(h,p)=>{const v=un.liftSelection(h);let C;if(v.isEmpty())if(typeof p=="boolean")p?C=2:C=3;else{const k=e.model.getLineMaxColumn(v.startLineNumber);v.startColumn===k?C=2:C=3}else C=1;const S=e.trackedRanges.length,E=e.model._setTrackedRange(null,v,C);return e.trackedRanges[S]=E,e.trackedRangesDirection[S]=v.getDirection(),S.toString()}};try{n.getEditOperations(e.model,d)}catch(h){return Jn(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-se.compareRangesUsingEnds(n.range,i.range));let t={};for(let n=1;n<e.length;n++){const i=e[n-1],s=e[n];if(se.getStartPosition(i.range).isBefore(se.getEndPosition(s.range))){let o;i.identifier.major>s.identifier.major?o=i.identifier.major:o=s.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class _oe{constructor(e,t,n,i,s,o){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=s,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const w2={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},KY={getInitialState:()=>m2,tokenize2:(r,e,t,n)=>r$(0,r,t,n)};function voe(r,e,t=KY){return Qxe(r,e,t||KY)}function Xxe(r,e,t,n,i,s,o){let a="<div>",l=n,u=0,d=!0;for(let h=0,p=e.getCount();h<p;h++){const v=e.getEndOffset(h);if(v<=n)continue;let C="";for(;l<v&&l<i;l++){const S=r.charCodeAt(l);switch(S){case 9:let E=s-(l+u)%s;for(u+=E-1;E>0;)o&&d?(C+="&#160;",d=!1):(C+=" ",d=!0),E--;break;case 60:C+="&lt;",d=!1;break;case 62:C+="&gt;",d=!1;break;case 38:C+="&amp;",d=!1;break;case 0:C+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:C+="",d=!1;break;case 13:C+="&#8203",d=!1;break;case 32:o&&d?(C+="&#160;",d=!1):(C+=" ",d=!0);break;default:C+=String.fromCharCode(S),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${C}</span>`,v>i||l>=i)break}return a+="</div>",a}function Qxe(r,e,t){let n='<div class="monaco-tokenized-source">';const i=Dv(r);let s=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o];o>0&&(n+="<br/>");const u=t.tokenize2(l,!0,s,0);$a.convertToEndOffset(u.tokens,l.length);const h=new $a(u.tokens,l,e).inflate();let p=0;for(let v=0,C=h.getCount();v<C;v++){const S=h.getClassName(v),E=h.getEndOffset(v);n+=`<span class="${S}">${bU(l.substring(p,E))}</span>`,p=E}s=u.endState}return n+="</div>",n}class Jxe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}class eDe{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}}class tN{constructor(e,t,n,i){this._instanceId=fre(++tN.INSTANCE_COUNT),this._pendingChanges=new Jxe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const o=i+s>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?s=o:i=o+1:t<e[o].afterLineNumber?s=o:i=o+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,s,o,a)=>{t=!0,i=i|0,s=s|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new eDe(l,i,s,o,a)),l},changeOneWhitespace:(i,s,o)=>{t=!0,s=s|0,o=o|0,this._pendingChanges.change({id:i,newAfterLineNumber:s,newHeight:o})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const u=this._findWhitespaceIndex(l.id);u!==-1&&this._removeWhitespace(u)}return}const i=new Set;for(const l of n)i.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const o=l=>{let u=[];for(const d of l)if(!i.has(d.id)){if(s.has(d.id)){const h=s.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}u.push(d)}return u},a=o(this._arr).concat(o(e));a.sort((l,u)=>l.afterLineNumber===u.afterLineNumber?l.ordinal-u.ordinal:l.afterLineNumber-u.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=tN.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const s=this._arr[i];this._removeWhitespace(i),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const o=(i-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,s=t;for(;i<s;){const o=(i+s)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)i=o+1;else{if(e>=a)return o;s=o}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(i)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let u,d;a===-1?(a=l,d=o+1,u=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,u=this.getHeightForWhitespaceIndex(a)|0);let h=s,p=h;const v=5e5;let C=0;s>=v&&(C=Math.floor(s/v)*v,C=Math.floor(C/n)*n,p-=C);const S=[],E=e+(t-e)/2;let k=-1;for(let V=i;V<=o;V++){if(k===-1){const X=h,$=h+n;(X<=E&&E<$||X>E)&&(k=V)}for(h+=n,S[V-i]=p,p+=n;d===V;)p+=u,h+=u,a++,a>=l?d=o+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,u=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){o=V;break}}k===-1&&(k=o);const D=this.getVerticalOffsetForLineNumber(o)|0;let O=i,H=o;return O<H&&s<e&&O++,O<H&&D+n>t&&H--,{bigNumbersDelta:C,startLineNumber:i,endLineNumber:o,relativeVerticalOffset:S,centeredLineNumber:k,completelyVisibleStartLineNumber:O,completelyVisibleEndLineNumber:H}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=i+s)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:o,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];let s=[];for(let o=n;o<=i;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}tN.INSTANCE_COUNT=0;const tDe=125;class RT{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class nDe extends Je{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new Ae),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new RT(0,0,0,0),this._scrollable=this._register(new I4(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new b$(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class iDe extends Je{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,s=i.get(130),o=i.get(74);this._linesLayout=new tN(t,i.get(58),o.top,o.bottom),this._scrollable=this._register(new nDe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new RT(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?tDe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(130)){const n=t.get(130),i=n.contentWidth,s=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new RT(i,o.contentWidth,s,this._getContentHeight(i,s,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(91);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(93)?s+=Math.max(0,t-i.get(58)-i.get(74).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new RT(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new RY(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new RY(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(131),i=t.get(43);if(n.isViewportWrapping){const s=t.get(130),o=t.get(64);return e>s.contentWidth+i.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+s.verticalScrollbarWidth:e}else{const s=t.get(92)*i.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+s,o)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new RT(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}function x5(r,e){return r===null?e?DR.INSTANCE:IR.INSTANCE:new rDe(r,e)}class rDe{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.getOutputLineCount():0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,0)}getInputEndOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,this._lineBreakData.getMaxOutputOffset(e))}getViewLineContent(e,t,n){this.assertVisible();const i=n>0?this._lineBreakData.breakOffsets[n-1]:0,s=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let o;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((l,u)=>new km(0,0,l+1,this._lineBreakData.injectionOptions[u],0));o=km.applyInjectedText(e.getLineContent(t),a).substring(i,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(o=GY(this._lineBreakData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){return this.assertVisible(),this._lineBreakData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){this.assertVisible();const i=this._lineBreakData,s=n>0?i.wrappedTextIndentLength:0,o=i.injectionOffsets,a=i.injectionOptions;let l,u;if(o){const S=e.getLineTokens(t).withInserted(o.map((O,H)=>({offset:O,text:a[H].content,tokenMetadata:$a.defaultTokenMetadata}))),E=n>0?i.breakOffsets[n-1]:0,k=i.breakOffsets[n];l=S.sliceAndInflate(E,k,s),u=new Array;let D=0;for(let O=0;O<o.length;O++){const H=a[O].content.length,V=o[O]+D,X=o[O]+D+H;if(V>k)break;if(E<X){const $=a[O];if($.inlineClassName){const P=n>0?i.wrappedTextIndentLength:0,z=P+Math.max(V-E,0),M=P+Math.min(X-E,k);z!==M&&u.push(new hxe(z,M,$.inlineClassName,$.inlineClassNameAffectsLetterSpacing))}}D+=H}}else{const S=this.getInputStartOffsetOfOutputLineIndex(n),E=this.getInputEndOffsetOfOutputLineIndex(n);l=e.getLineTokens(t).sliceAndInflate(S,E,s),u=null}let d=l.getLineContent();n>0&&(d=GY(i.wrappedTextIndentLength)+d);const h=this._lineBreakData.getMinOutputOffset(n)+1,p=d.length+1,v=n+1<this.getViewLineCount(),C=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new _$(d,v,h,p,C,l,u)}getViewLinesData(e,t,n,i,s,o,a){this.assertVisible();for(let l=n;l<i;l++){let u=s+l-n;if(!o[u]){a[u]=null;continue}a[u]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){return this.assertVisible(),this._lineBreakData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this.assertVisible(),this._lineBreakData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this.assertVisible();const n=this._lineBreakData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._lineBreakData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class DR{constructor(){}isVisible(){return!0}setVisible(e){return e?this:IR.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let i=e.getLineTokens(t),s=i.getLineContent();return new _$(s,!1,1,s.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,s,o,a){if(!o[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new ze(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}DR.INSTANCE=new DR;class IR{constructor(){}isVisible(){return!1}setVisible(e){return e?DR.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}IR.INSTANCE=new IR;let D5=[""];function GY(r){if(r>=D5.length)for(let e=1;e<=r;e++)D5[e]=sDe(e);return D5[r]}function sDe(r){return new Array(r+1).join(" ")}class oDe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=UL(e);const n=this.values,i=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=UL(e),t=UL(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=UL(e),t=UL(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=UL(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,s=0,o=0;for(;t<=n;)if(i=t+(n-t)/2|0,s=this.prefixSum[i],o=s-this.values[i],e<o)n=i-1;else if(e>=s)t=i+1;else break;return new boe(i,e-o)}}class aDe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new boe(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=Mk(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let s=0;s<n;s++)this._indexBySum[i+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class boe{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class lDe{constructor(e,t,n,i,s,o,a,l,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new cDe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),s=n.length,o=this.createLineBreaksComputer(),a=new WE(km.fromDecorations(i));for(let S=0;S<s;S++){const E=a.takeWhile(k=>k.lineNumber===S+1);o.addRequest(n[S],E,t?t[S]:null)}const l=o.finalize();let u=[],d=this.hiddenAreasDecorationIds.map(S=>this.model.getDecorationRange(S)).sort(se.compareRangesUsingStarts),h=1,p=0,v=-1,C=v+1<d.length?p+1:s+2;for(let S=0;S<s;S++){let E=S+1;E===C&&(v++,h=d[v].startLineNumber,p=d[v].endLineNumber,C=v+1<d.length?p+1:s+2);let k=E>=h&&E<=p,D=x5(l[S],!k);u[S]=D.getViewLineCount(),this.modelLineProjections[S]=D}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new aDe(u)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(p=>this.model.validateRange(p));let n=uDe(t),i=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(se.compareRangesUsingStarts);if(n.length===i.length){let p=!1;for(let v=0;v<n.length;v++)if(!n[v].equalsRange(i[v])){p=!0;break}if(!p)return!1}const s=n.map(p=>({range:p,options:mi.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);let o=n,a=1,l=0,u=-1,d=u+1<o.length?l+1:this.modelLineProjections.length+2,h=!1;for(let p=0;p<this.modelLineProjections.length;p++){let v=p+1;v===d&&(u++,a=o[u].startLineNumber,l=o[u].endLineNumber,d=u+1<o.length?l+1:this.modelLineProjections.length+2);let C=!1;if(v>=a&&v<=l?this.modelLineProjections[p].isVisible()&&(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!1),C=!0):(h=!0,this.modelLineProjections[p].isVisible()||(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!0),C=!0)),C){let S=this.modelLineProjections[p].getViewLineCount();this.projectedModelLineLineCounts.setValue(p,S)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i){const s=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i;if(s&&o&&a&&l)return!1;const u=s&&o&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i;let d=null;if(u){d=[];for(let h=0,p=this.modelLineProjections.length;h<p;h++)d[h]=this.modelLineProjections[h].getLineBreakData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new iW(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible();let o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,l=[],u=[];for(let d=0,h=i.length;d<h;d++){let p=x5(i[d],!s);l.push(p);let v=p.getViewLineCount();a+=v,u[d]=v}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,u),new rW(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let i=t-1,s=this.modelLineProjections[i].getViewLineCount(),o=this.modelLineProjections[i].isVisible(),a=x5(n,o);this.modelLineProjections[i]=a;let l=this.modelLineProjections[i].getViewLineCount(),u=!1,d=0,h=-1,p=0,v=-1,C=0,S=-1;s>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1,C=h+1,S=C+(s-l)-1,u=!0):s<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+s-1,p=h+1,v=p+(l-s)-1,u=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1),this.projectedModelLineLineCounts.setValue(i,l);const E=d<=h?new moe(d,h):null,k=p<=v?new rW(p,v):null,D=C<=S?new iW(C,S):null;return[u,E,k,D]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(i.lineNumber,s.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),u=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:u.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new YY(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new ze(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new ze(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),s=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const u=this.modelLineProjections[l-1];if(u.isVisible()){let d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:u.getViewLineCount();for(let p=d;p<h;p++)a.push(new YY(l,p))}if(!u.isVisible()&&o){const d=new ze(l-1,this.model.getLineMaxColumn(l-1)+1),h=se.fromPositions(o,d);s.push(new ZY(h,a)),a=[],o=null}else u.isVisible()&&!o&&(o=new ze(l,1))}if(o){const l=se.fromPositions(o,this.getModelEndPositionOfViewLine(i));s.push(new ZY(l,a))}return s}getViewLinesBracketGuides(e,t,n,i){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,u=this.model.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,i);for(const d of a.viewLines)if(d.isWrappedLineContinuation&&this.getMinColumnOfViewLine(d)===1)o.push([]);else{let h=u[d.modelLineNumber-l];h=h.map(p=>p.horizontalLine?new pE(p.visibleColumn,p.className,new q6(p.horizontalLine.top,this.convertModelPositionToViewPosition(d.modelLineNumber,p.horizontalLine.endColumn).column)):p),o.push(h)}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[],o=[],a=[];const l=n.lineNumber-1,u=i.lineNumber-1;let d=null;for(let C=l;C<=u;C++){const S=this.modelLineProjections[C];if(S.isVisible()){let E=S.getViewLineNumberOfModelPosition(0,C===l?n.column:1),k=S.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(C+1)),D=k-E+1,O=0;D>1&&S.getViewLineMinColumn(this.model,C+1,k)===1&&(O=E===0?1:2),o.push(D),a.push(O),d===null&&(d=new ze(C+1,0))}else d!==null&&(s=s.concat(this.model.getLinesIndentGuides(d.lineNumber,C)),d=null)}d!==null&&(s=s.concat(this.model.getLinesIndentGuides(d.lineNumber,i.lineNumber)),d=null);const h=t-e+1;let p=new Array(h),v=0;for(let C=0,S=s.length;C<S;C++){let E=s[C],k=Math.min(h-v,o[C]),D=a[C],O;D===2?O=0:D===1?O=1:O=k;for(let H=0;H<k;H++)H===O&&(E=0),p[v++]=E}return p}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=e,o=i.index,a=i.remainder,l=[];for(let u=o,d=this.model.getLineCount();u<d;u++){let h=this.modelLineProjections[u];if(!h.isVisible())continue;let p=u===o?a:0,v=h.getViewLineCount()-p,C=!1;s+v>t&&(C=!0,v=t-s+1);let S=p+v;if(h.getViewLinesData(this.model,u+1,p,S,s-e,n,l),s+=v,C)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=i.index,o=i.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,o),u=a.getViewLineMaxColumn(this.model,s+1,o);t<l&&(t=l),t>u&&(t=u);let d=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new ze(s+1,d)).equals(n)?new ze(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new se(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e);let i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new ze(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new se(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const i=this.model.validatePosition(new ze(e,t)),s=i.lineNumber,o=i.column;let a=s-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new ze(1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(a);let d;return l?d=this.modelLineProjections[a].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(a+1),n):d=this.modelLineProjections[s-1].getViewPositionOfModelPosition(u,o,n),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return se.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new se(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),s=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(s.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new se(i.lineNumber,1,s.lineNumber,s.column),t,n);let o=[];const a=i.lineNumber-1,l=s.lineNumber-1;let u=null;for(let v=a;v<=l;v++)if(this.modelLineProjections[v].isVisible())u===null&&(u=new ze(v+1,v===a?i.column:1));else if(u!==null){const S=this.model.getLineMaxColumn(v);o=o.concat(this.model.getDecorationsInRange(new se(u.lineNumber,u.column,v,S),t,n)),u=null}u!==null&&(o=o.concat(this.model.getDecorationsInRange(new se(u.lineNumber,u.column,s.lineNumber,s.column),t,n)),u=null),o.sort((v,C)=>{const S=se.compareRangesUsingStarts(v.range,C.range);return S===0?v.id<C.id?-1:v.id>C.id?1:0:S});let d=[],h=0,p=null;for(const v of o){const C=v.id;p!==C&&(p=C,d[h++]=v)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function uDe(r){if(r.length===0)return[];const e=r.slice();e.sort(se.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let s=1,o=e.length;s<o;s++){let a=e[s];a.startLineNumber>i+1?(t.push(new se(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new se(n,1,i,1)),t}class YY{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class ZY{constructor(e,t){this.modelRange=e,this.viewLines=t}}class cDe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class dDe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new hDe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new iW(t,n)}onModelLinesInserted(e,t,n,i){return new rW(t,n)}onModelLineChanged(e,t,n){return[!1,new moe(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new _$(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);let s=[];for(let o=e;o<=t;o++){let a=o-e;n[a]||(s[a]=null),s[a]=this.getViewLineData(o)}return s}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class hDe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class fDe{constructor(e,t,n,i,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,s=e.options;let o;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new ze(i.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new ze(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);o=new se(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new goe(o,s),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,AU(this.configuration.options)),n=e.startLineNumber,i=e.endLineNumber;let s=[],o=0,a=[];for(let l=n;l<=i;l++)a[l-n]=[];for(let l=0,u=t.length;l<u;l++){let d=t[l],h=d.options;if(!w$(this.model,d))continue;let p=this._getOrCreateViewModelDecoration(d),v=p.range;if(s[o++]=p,h.inlineClassName){let C=new lk(v,h.inlineClassName,h.inlineClassNameAffectsLetterSpacing?3:0),S=Math.max(n,v.startLineNumber),E=Math.min(i,v.endLineNumber);for(let k=S;k<=E;k++)a[k-n].push(C)}if(h.beforeContentClassName&&n<=v.startLineNumber&&v.startLineNumber<=i){let C=new lk(new se(v.startLineNumber,v.startColumn,v.startLineNumber,v.startColumn),h.beforeContentClassName,1);a[v.startLineNumber-n].push(C)}if(h.afterContentClassName&&n<=v.endLineNumber&&v.endLineNumber<=i){let C=new lk(new se(v.endLineNumber,v.endColumn,v.endLineNumber,v.endColumn),h.afterContentClassName,2);a[v.endLineNumber-n].push(C)}}return{decorations:s,inlineDecorations:a}}}function w$(r,e){return!(e.options.hideInCommentTokens&&gDe(r,e.range,n=>n===1))}function gDe(r,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=r.getLineTokens(n),s=n===e.startLineNumber,o=n===e.endLineNumber;let a=s?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(o&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}const pDe={ModesRegistry:"editor.modesRegistry"};class mDe{constructor(){this._onDidChangeLanguages=new Ae,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const zw=new mDe;mo.add(pDe.ModesRegistry,zw);const uD="plaintext",_De=".txt";zw.registerLanguage({id:uD,extensions:[_De],aliases:[L("plainText.alias","Plain Text"),"text"],mimetypes:[Hg.text]});hr.register(uD,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);mo.as(QS.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1}}}]);class vDe extends Je{constructor(e,t,n,i,s,o){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new Kxe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Wg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new Qr(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new Qr(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new dDe(this.model);else{const a=this._configuration.options,l=a.get(43),u=a.get(124),d=a.get(131),h=a.get(123);this._lines=new lDe(this._editorId,this.model,i,s,l,this.model.getOptions().tabSize,u,d.wrappingColumn,h)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Cx(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new iDe(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new zxe(a)),this._eventDispatcher.emitOutgoingEvent(new y$(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new fDe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(y2.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new jxe)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new se(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const i of n)this.model.tokenizeViewport(i.startLineNumber,i.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Vxe(e)),this._eventDispatcher.emitOutgoingEvent(new C$(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new Pxe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Fxe)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new Uxe)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let d=new ze(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(d)}let i=!1;const s=this._configuration.options,o=s.get(43),a=s.get(124),l=s.get(131),u=s.get(123);if(this._lines.setWrappingSettings(o,a,l.wrappingColumn,u)&&(e.emitViewEvent(new FA),e.emitViewEvent(new BA),e.emitViewEvent(new $L(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(i=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new $L(null))),e.emitViewEvent(new Bxe(t)),this.viewLayout.onConfigurationChanged(t),i&&n){const d=this.coordinatesConverter.convertModelPositionToViewPosition(n),h=this.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber);this.viewLayout.setScrollPosition({scrollTop:h+this._viewportStartLineDelta},1)}Wg.shouldRecreate(t)&&(this.cursorConfig=new Wg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,i=!1;const s=e.changes,o=e instanceof Fw?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const d of s)switch(d.changeType){case 4:{for(let h=0;h<d.detail.length;h++){const p=d.detail[h];let v=d.injectedTexts[h];v&&(v=v.filter(C=>!C.ownerId||C.ownerId===this._editorId)),a.addRequest(p,v,null)}break}case 2:{let h=null;d.injectedText&&(h=d.injectedText.filter(p=>!p.ownerId||p.ownerId===this._editorId)),a.addRequest(d.detail,h,null);break}}const l=a.finalize(),u=new WE(l);for(const d of s)switch(d.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new FA),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(o,d.fromLineNumber,d.toLineNumber);h!==null&&(t.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),n=!0;break}case 4:{const h=u.takeCount(d.detail.length),p=this._lines.onModelLinesInserted(o,d.fromLineNumber,d.toLineNumber,h);p!==null&&(t.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),n=!0;break}case 2:{const h=u.dequeue(),[p,v,C,S]=this._lines.onModelLineChanged(o,d.lineNumber,h);i=p,v&&t.emitViewEvent(v),C&&(t.emitViewEvent(C),this.viewLayout.onLinesInserted(C.fromLineNumber,C.toLineNumber)),S&&(t.emitViewEvent(S),this.viewLayout.onLinesDeleted(S.fromLineNumber,S.toLineNumber));break}case 5:break}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!n&&i&&(t.emitViewEvent(new BA),t.emitViewEvent(new $L(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:i+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,i=e.ranges.length;n<i;n++){const s=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new ze(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new ze(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new $xe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new Hxe),this.cursorConfig=new Wg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Wg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new FA),t.emitViewEvent(new BA),t.emitViewEvent(new $L(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Wg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new $L(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new FA),n.emitViewEvent(new BA),n.emitViewEvent(new $L(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new jY)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(130),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new se(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let i=[],s=0,o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,u=t.endColumn;for(let d=0,h=n.length;d<h;d++){const p=n[d].startLineNumber,v=n[d].endLineNumber;v<o||p>l||(o<p&&(i[s++]=new se(o,a,p-1,this.model.getLineMaxColumn(p-1))),o=v+1,a=1)}return(o<l||o===l&&a<u)&&(i[s++]=new se(o,a,l,u)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new se(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new se(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new ze(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let i=this.coordinatesConverter.convertViewPositionToModelPosition(new ze(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new se(i.lineNumber,i.column,i.lineNumber,i.column),1);const s=this.viewLayout.getVerticalOffsetForLineNumber(e),o=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=o-s}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=oc(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Cv(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return o.inlineDecorations&&(l=[...l,...o.inlineDecorations.map(u=>u.toInlineDecoration(t))]),new Th(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,i,o.tokens,l,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let i=this._lines.getViewLinesData(e,t,n);return new dxe(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,AU(this._configuration.options)),n=new bDe;for(const i of t){const s=i.options,o=s.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,s.zIndex,u,d,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(o)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(se.compareRangesUsingStarts);let s=!1,o=!1;for(const l of e)l.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const l=e.map(d=>d.startLineNumber);let u="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(u+=this.model.getLineContent(l[d])+i);return u}if(s&&t){let l=[],u=0;for(const d of e){const h=d.startLineNumber;d.isEmpty()?h!==u&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,n?2:0)),u=h}return l.length===1?l[0]:l}let a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===uD||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const d=i.startLineNumber;i=new se(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const s=this._configuration.options.get(43),o=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===ou.fontFamily;let u;return l?u=ou.fontFamily:(u=s.fontFamily,u=u.replace(/"/g,"'"),/[,']/.test(u)||/[+ ]/.test(u)&&(u=`'${u}'`),u=`${u}, ${ou.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${u};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let u=n;u<=s;u++){const d=this.model.getLineTokens(u),h=d.getLineContent(),p=u===n?i-1:0,v=u===s?o-1:h.length;h===""?l+="<br>":l+=Xxe(h,d.inflate(),t,p,v,a,Nl)}return l}_getColorMap(){let e=Qs.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=We.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Yxe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,s){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,i,s))}paste(e,t,n,i){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new se(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new $O(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new se(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new $O(e,n,null,0,!0,0)))}revealRange(e,t,n,i,s){this._withViewEventsCollector(o=>o.emitViewEvent(new $O(e,n,null,i,t,s)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new qxe),this._eventDispatcher.emitOutgoingEvent(new jY))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class bDe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,s){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],u=a[a.length-1];if(l===s&&u+1>=n){i>u&&(a[a.length-1]=i);return}a.push(s,n,i)}else{const a=new poe(e,t,[s,n,i]);this._asMap[e]=a,this.asArray.push(a)}}}class nN{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}var iN;(function(r){r[r.Ignore=0]="Ignore",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error"})(iN||(iN={}));(function(r){const e="error",t="warning",n="warn",i="info",s="ignore";function o(l){return l?NT(e,l)?r.Error:NT(t,l)||NT(n,l)?r.Warning:NT(i,l)?r.Info:r.Ignore:r.Ignore}r.fromValue=o;function a(l){switch(l){case r.Error:return e;case r.Warning:return t;case r.Info:return i;default:return s}}r.toString=a})(iN||(iN={}));const so=iN,Oo=lr("notificationService");class CDe{}const Kc=lr("accessibilityService"),S2=new gn("accessibilityModeEnabled",!1);class dk{constructor(e,t,n,i,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&i>this.injectionOffsets[s];s++)i<this.injectionOffsets[s]+this.injectionOptions[s].content.length?i=this.injectionOffsets[s]:i-=this.injectionOptions[s].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,s=0,o=0;for(;n<=i;){s=n+(i-n)/2|0;const l=this.breakOffsets[s];if(o=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=o)i=s-1;else if(e>l)n=s+1;else break;else if(e<o)i=s-1;else if(e>=l)n=s+1;else break}let a=e-o;return s>0&&(a+=this.wrappedTextIndentLength),new WA(s,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(s!==i)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new WA(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new WA(e+1,this.getMinOutputOffset(e+1))}return new WA(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInInputWithInjections+n.length?n.offsetInInputWithInjections+n.length:n.offsetInInputWithInjections;if(t===1){let o=n.offsetInInputWithInjections+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)o+=this.injectionOptions[a+1].content.length,a++;return o}let i=n.offsetInInputWithInjections,s=n.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)i-=this.injectionOptions[s-1].content.length,s++;return i}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let s=0;s<t.length;s++){const o=n[s].content.length,a=t[s]+i,l=t[s]+i+o;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:o};i+=o}}}}class WA{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new ze(e+this.outputLineIndex,this.outputOffset+1)}}class S${constructor(e,t){this.classifier=new yDe(e,t)}static create(e){return new S$(e.get(119),e.get(118))}createLineBreaksComputer(e,t,n,i){const s=[],o=[],a=[];return{addRequest:(l,u,d)=>{s.push(l),o.push(u),a.push(d)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let u=[];for(let d=0,h=s.length;d<h;d++){const p=o[d],v=a[d];v&&!v.injectionOptions&&!p?u[d]=wDe(this.classifier,v,s[d],t,n,l,i):u[d]=SDe(this.classifier,s[d],p,t,n,l,i)}return sW.length=0,oW.length=0,u}}}}class yDe extends oD{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let sW=[],oW=[];function wDe(r,e,t,n,i,s,o){if(i===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,u=e.breakOffsetsVisibleColumn,d=Coe(t,n,i,s,o),h=i-d;let p=sW,v=oW,C=0,S=0,E=0,k=i;const D=l.length;let O=0;if(O>=0){let H=Math.abs(u[O]-k);for(;O+1<D;){const V=Math.abs(u[O+1]-k);if(V>=H)break;H=V,O++}}for(;O<D;){let H=O<0?0:l[O],V=O<0?0:u[O];S>H&&(H=S,V=E);let X=0,$=0,P=0,z=0;if(V<=k){let W=V,I=H===0?0:t.charCodeAt(H-1),R=H===0?0:r.get(I),G=!0;for(let Z=H;Z<a;Z++){const ee=Z,ne=t.charCodeAt(Z);let ie,te;if(ba(ne)?(Z++,ie=0,te=2):(ie=r.get(ne),te=hk(ne,W,n,s)),ee>S&&aW(I,R,ne,ie)&&(X=ee,$=W),W+=te,W>k){ee>S?(P=ee,z=W-te):(P=Z+1,z=W),W-$>h&&(X=0),G=!1;break}I=ne,R=ie}if(G){C>0&&(p[C]=l[l.length-1],v[C]=u[l.length-1],C++);break}}if(X===0){let W=V,I=t.charCodeAt(H),R=r.get(I),G=!1;for(let Z=H-1;Z>=S;Z--){const ee=Z+1,ne=t.charCodeAt(Z);if(ne===9){G=!0;break}let ie,te;if(dx(ne)?(Z--,ie=0,te=2):(ie=r.get(ne),te=Iv(ne)?s:1),W<=k){if(P===0&&(P=ee,z=W),W<=k-h)break;if(aW(ne,ie,I,R)){X=ee,$=W;break}}W-=te,I=ne,R=ie}if(X!==0){const Z=h-(z-$);if(Z<=n){const ee=t.charCodeAt(P);let ne;ba(ee)?ne=2:ne=hk(ee,z,n,s),Z-ne<0&&(X=0)}}if(G){O--;continue}}if(X===0&&(X=P,$=z),X<=S){const W=t.charCodeAt(S);ba(W)?(X=S+2,$=E+2):(X=S+1,$=E+hk(W,E,n,s))}for(S=X,p[C]=X,E=$,v[C]=$,C++,k=$+h;O<0||O<D&&u[O]<$;)O++;let M=Math.abs(u[O]-k);for(;O+1<D;){const W=Math.abs(u[O+1]-k);if(W>=M)break;M=W,O++}}return C===0?null:(p.length=C,v.length=C,sW=e.breakOffsets,oW=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=v,e.wrappedTextIndentLength=d,e)}function SDe(r,e,t,n,i,s,o){const a=km.applyInjectedText(e,t);let l,u;if(t&&t.length>0?(l=t.map($=>$.options),u=t.map($=>$.column-1)):(l=null,u=null),i===-1)return l?new dk(u,l,[a.length],[],0):null;const d=a.length;if(d<=1)return l?new dk(u,l,[a.length],[],0):null;const h=Coe(a,n,i,s,o),p=i-h;let v=[],C=[],S=0,E=0,k=0,D=i,O=a.charCodeAt(0),H=r.get(O),V=hk(O,0,n,s),X=1;ba(O)&&(V+=1,O=a.charCodeAt(1),H=r.get(O),X++);for(let $=X;$<d;$++){const P=$,z=a.charCodeAt($);let M,W;ba(z)?($++,M=0,W=2):(M=r.get(z),W=hk(z,V,n,s)),aW(O,H,z,M)&&(E=P,k=V),V+=W,V>D&&((E===0||V-k>p)&&(E=P,k=V-W),v[S]=E,C[S]=k,S++,D=k+p,E=0),O=z,H=M}return S===0&&(!t||t.length===0)?null:(v[S]=d,C[S]=V,new dk(u,l,v,C,h))}function hk(r,e,t,n){return r===9?t-e%t:Iv(r)||r<32?n:1}function XY(r,e){return e-r%e}function aW(r,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function Coe(r,e,t,n,i){let s=0;if(i!==0){const o=oc(r);if(o!==-1){for(let l=0;l<o;l++){const u=r.charCodeAt(l)===9?XY(s,e):1;s+=u}const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){const u=XY(s,e);s+=u}s+n>t&&(s=0)}}return s}var I5;const T5=(I5=window.trustedTypes)===null||I5===void 0?void 0:I5.createPolicy("domLineBreaksComputer",{createHTML:r=>r});class L${static create(){return new L$}constructor(){}createLineBreaksComputer(e,t,n,i){let s=[],o=[];return{addRequest:(a,l,u)=>{s.push(a),o.push(l)},finalize:()=>LDe(s,e,t,n,i,o)}}}function LDe(r,e,t,n,i,s){var o;function a(P){const z=s[P];if(z){const M=km.applyInjectedText(r[P],z),W=z.map(R=>R.options),I=z.map(R=>R.column-1);return new dk(I,W,[M.length],[],0)}else return null}if(n===-1){const P=[];for(let z=0,M=r.length;z<M;z++)P[z]=a(z);return P}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),d=Math.round(t*(i===3?2:i===2?1:0)),h=Math.ceil(e.spaceWidth*d),p=document.createElement("div");lc.applyFontInfoSlow(p,e);const v=lS(1e4),C=[],S=[],E=[],k=[],D=[];for(let P=0;P<r.length;P++){const z=km.applyInjectedText(r[P],s[P]);let M=0,W=0,I=l;if(i!==0)if(M=oc(z),M===-1)M=0;else{for(let ee=0;ee<M;ee++){const ne=z.charCodeAt(ee)===9?t-W%t:1;W+=ne}const Z=Math.ceil(e.spaceWidth*W);Z+e.typicalFullwidthCharacterWidth>l?(M=0,W=0):I=l-Z}const R=z.substr(M),G=EDe(R,W,t,I,v,h);C[P]=M,S[P]=W,E[P]=R,k[P]=G[0],D[P]=G[1]}const O=v.build(),H=(o=T5==null?void 0:T5.createHTML(O))!==null&&o!==void 0?o:O;p.innerHTML=H,p.style.position="absolute",p.style.top="10000",p.style.wordWrap="break-word",document.body.appendChild(p);let V=document.createRange();const X=Array.prototype.slice.call(p.children,0);let $=[];for(let P=0;P<r.length;P++){const z=X[P],M=xDe(V,z,E[P],k[P]);if(M===null){$[P]=a(P);continue}const W=C[P],I=S[P]+d,R=D[P],G=[];for(let ie=0,te=M.length;ie<te;ie++)G[ie]=R[M[ie]];if(W!==0)for(let ie=0,te=M.length;ie<te;ie++)M[ie]+=W;let Z,ee;const ne=s[P];ne?(Z=ne.map(ie=>ie.options),ee=ne.map(ie=>ie.column-1)):(Z=null,ee=null),$[P]=new dk(ee,Z,M,G,I)}return document.body.removeChild(p),$}function EDe(r,e,t,n,i,s){if(s!==0){let p=String(s);i.appendASCIIString('<div style="text-indent: -'),i.appendASCIIString(p),i.appendASCIIString("px; padding-left: "),i.appendASCIIString(p),i.appendASCIIString("px; box-sizing: border-box; width:")}else i.appendASCIIString('<div style="width:');i.appendASCIIString(String(n)),i.appendASCIIString('px;">');const o=r.length;let a=e,l=0,u=[],d=[],h=0<o?r.charCodeAt(0):0;i.appendASCIIString("<span>");for(let p=0;p<o;p++){p!==0&&p%16384===0&&i.appendASCIIString("</span><span>"),u[p]=l,d[p]=a;const v=h;h=p+1<o?r.charCodeAt(p+1):0;let C=1,S=1;switch(v){case 9:C=t-a%t,S=C;for(let E=1;E<=C;E++)E<C?i.write1(160):i.appendASCII(32);break;case 32:h===32?i.write1(160):i.appendASCII(32);break;case 60:i.appendASCIIString("&lt;");break;case 62:i.appendASCIIString("&gt;");break;case 38:i.appendASCIIString("&amp;");break;case 0:i.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.write1(65533);break;default:Iv(v)&&S++,v<32?i.write1(9216+v):i.write1(v)}l+=C,a+=S}return i.appendASCIIString("</span>"),u[r.length]=l,d[r.length]=a,i.appendASCIIString("</div>"),[u,d]}function xDe(r,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),s=[];try{lW(r,i,n,0,null,t.length-1,null,s)}catch(o){return console.log(o),null}return s.length===0?null:(s.push(t.length),s)}function lW(r,e,t,n,i,s,o,a){if(n===s||(i=i||k5(r,e,t[n],t[n+1]),o=o||k5(r,e,t[s],t[s+1]),Math.abs(i[0].top-o[0].top)<=.1))return;if(n+1===s){a.push(s);return}const l=n+(s-n)/2|0,u=k5(r,e,t[l],t[l+1]);lW(r,e,t,n,i,l,u,a),lW(r,e,t,l,u,s,o,a)}function k5(r,e,t,n){return r.setStart(e[t/16384|0].firstChild,t%16384),r.setEnd(e[n/16384|0].firstChild,n%16384),r.getClientRects()}var DDe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},qy=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let IDe=0,TDe=class{constructor(e,t,n,i,s){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=s}dispose(){nr(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},rN=class jO extends Je{constructor(e,t,n,i,s,o,a,l,u,d){super(),this._onDidDispose=this._register(new Ae),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Ae),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Ae),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Ae),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Ae),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Ae),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new Ae),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new Ae),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Ae),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Ae),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Ae),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Ae),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new QY),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new QY),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Ae),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Ae),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Ae),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Ae),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Ae),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Ae),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Ae),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Ae),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Ae),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Ae),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new Ae),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Ae),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Ae),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Ae),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Ae),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Ae),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Ae),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Ae),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Ae),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Ae),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const h=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=h.overflowWidgetsDomNode,delete h.overflowWidgetsDomNode,this._id=++IDe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(h,d)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);const C=this._configuration.options;if(v.hasChanged(130)){const S=C.get(130);this._onDidLayoutChange.fire(S)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=u,this._codeEditorService=s,this._commandService=o,this._themeService=l,this._register(new kDe(this,this._contextKeyService)),this._register(new NDe(this,this._contextKeyService)),this._instantiationService=i.createChild(new nN([Xn,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new ADe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=BE.getEditorContributions();for(const v of p){if(this._contributions[v.id]){Jn(new Error(`Cannot have two contributions with the same id ${v.id}`));continue}try{const C=this._instantiationService.createInstance(v.ctor,this);this._contributions[v.id]=C}catch(C){Jn(C)}}BE.getEditorActions().forEach(v=>{if(this._actions[v.id]){Jn(new Error(`Cannot have two actions with the same id ${v.id}`));return}const C=new _oe(v.id,v.label,v.alias,Md(v.precondition),()=>this._instantiationService.invokeFunction(S=>Promise.resolve(v.runEditorCommand(S,this,null))),this._contextKeyService);this._actions[C.id]=C}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new lc(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return w2.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?er.getWordAtPosition(this._modelData.model,this._configuration.options.get(116),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(i)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const i=e.model.validatePosition({lineNumber:t,column:n}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber)}getTopForLineNumber(e){return this._modelData?jO._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?jO._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>se.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return ls.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!ze.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!se.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,o,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new se(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!ze.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new se(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=un.isISelection(e),n=se.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const i={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(i)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new un(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new se(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!se.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(se.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,s=e.length;i<s;i++)if(!un.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const s of t){const o=this._contributions[s];typeof o.saveViewState=="function"&&(e[s]=o.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:n,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const i=t.contributionsState||{},s=Object.keys(this._contributions);for(let a=0,l=s.length;a<l;a++){const u=s[a],d=this._contributions[u];typeof d.restoreViewState=="function"&&d.restoreViewState(i[u])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._actions[s])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run()).then(void 0,Jn);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,s,e)}_paste(e,t,n,i,s){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,i,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new se(o.lineNumber,o.column,a.lineNumber,a.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=BE.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(i.runEditorCommand(s,this,n)).then(void 0,Jn)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let i;return n?Array.isArray(n)?i=()=>n:i=n:i=()=>null,this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,AU(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(130)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(130),s=jO._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){lc.applyFontInfoSlow(e,this._configuration.options.get(43))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.reserveHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new vDe(this._id,this._configuration,e,L$.create(),S$.create(this._configuration.options),o=>xv(o));t.push(e.onDidChangeDecorations(o=>this._onDidChangeModelDecorations.fire(o))),t.push(e.onDidChangeLanguage(o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o)})),t.push(e.onDidChangeLanguageConfiguration(o=>this._onDidChangeModelLanguageConfiguration.fire(o))),t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o))),t.push(e.onDidChangeOptions(o=>this._onDidChangeModelOptions.fire(o))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{o.reachedMaxCursorCount&&this._notificationService.warn(L("cursors.maximum","The number of cursors has been limited to {0}.",Cx.MAX_CURSOR_COUNT));const a=[];for(let d=0,h=o.selections.length;d<h;d++)a[d]=o.selections[d].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(l);const u={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(u);break}}}));const[i,s]=this._createView(n);if(s){this._domElement.appendChild(i.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,l=o.length;a<l;a++){const u=o[a];i.addContentWidget(this._contentWidgets[u])}o=Object.keys(this._overlayWidgets);for(let a=0,l=o.length;a<l;a++){const u=o[a];i.addOverlayWidget(this._overlayWidgets[u])}i.render(!1,!0),i.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new TDe(e,n,i,s,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,o,a,l)=>{this._paste("keyboard",s,o,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,o,a,l)=>{this._compositionType("keyboard",s,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,o,a,l)=>{const u={text:s,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",u)},type:s=>{const o={text:s};this._commandService.executeCommand("type",o)},compositionType:(s,o,a,l)=>{if(a||l){const u={text:s,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",u)}else{const u={text:s,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",u)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new D4(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new Mxe(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};rN=DDe([qy(3,Li),qy(4,vr),qy(5,js),qy(6,Xn),qy(7,Fs),qy(8,Oo),qy(9,Kc)],rN);class QY extends Je{constructor(){super(),this._onDidChangeToTrue=this._register(new Ae),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Ae),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class kDe extends Je{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=ye.editorSimpleInput.bindTo(t),this._editorFocus=ye.focus.bindTo(t),this._textInputFocus=ye.textInputFocus.bindTo(t),this._editorTextFocus=ye.editorTextFocus.bindTo(t),this._editorTabMovesFocus=ye.tabMovesFocus.bindTo(t),this._editorReadonly=ye.readOnly.bindTo(t),this._inDiffEditor=ye.inDiffEditor.bindTo(t),this._editorColumnSelection=ye.columnSelection.bindTo(t),this._hasMultipleSelections=ye.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=ye.hasNonEmptySelection.bindTo(t),this._canUndo=ye.canUndo.bindTo(t),this._canRedo=ye.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(129)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class NDe extends Je{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=ye.languageId.bindTo(t),this._hasCompletionItemProvider=ye.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=ye.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=ye.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=ye.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=ye.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=ye.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=ye.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=ye.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=ye.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=ye.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=ye.hasReferenceProvider.bindTo(t),this._hasRenameProvider=ye.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=ye.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=ye.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=ye.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=ye.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=ye.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=ye.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=ye.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(cm.onDidChange(n)),this._register(Sv.onDidChange(n)),this._register(pb.onDidChange(n)),this._register(Vk.onDidChange(n)),this._register(sR.onDidChange(n)),this._register(oR.onDidChange(n)),this._register(aR.onDidChange(n)),this._register(Wk.onDidChange(n)),this._register(fx.onDidChange(n)),this._register(Kg.onDidChange(n)),this._register(nR.onDidChange(n)),this._register(iR.onDidChange(n)),this._register(ok.onDidChange(n)),this._register(dm.onDidChange(n)),this._register(Pw.onDidChange(n)),this._register(rC.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(cm.has(e)),this._hasCodeActionsProvider.set(Sv.has(e)),this._hasCodeLensProvider.set(pb.has(e)),this._hasDefinitionProvider.set(Vk.has(e)),this._hasDeclarationProvider.set(sR.has(e)),this._hasImplementationProvider.set(oR.has(e)),this._hasTypeDefinitionProvider.set(aR.has(e)),this._hasHoverProvider.set(Wk.has(e)),this._hasDocumentHighlightProvider.set(fx.has(e)),this._hasDocumentSymbolProvider.set(Kg.has(e)),this._hasReferenceProvider.set(nR.has(e)),this._hasRenameProvider.set(iR.has(e)),this._hasSignatureHelpProvider.set(Pw.has(e)),this._hasInlayHintsProvider.set(rC.has(e)),this._hasDocumentFormattingProvider.set(ok.has(e)||dm.has(e)),this._hasDocumentSelectionFormattingProvider.set(dm.has(e)),this._hasMultipleDocumentFormattingProvider.set(ok.all(e).length+dm.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(dm.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===wi.walkThroughSnippet)})}}class ADe extends Je{constructor(e){super(),this._onChange=this._register(new Ae),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(lx(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const ODe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),MDe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function N5(r){return ODe+encodeURIComponent(r.toString())+MDe}const RDe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),PDe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function FDe(r){return RDe+encodeURIComponent(r.toString())+PDe}ds((r,e)=>{const t=r.getColor(nse);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=r.getColor(tk);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${N5(n)}") repeat-x bottom left; }`);const i=r.getColor(tCe);i&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${i}; }`);const s=r.getColor(l4);s&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const o=r.getColor(Db);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${N5(o)}") repeat-x bottom left; }`);const a=r.getColor(nCe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=r.getColor(BU);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const u=r.getColor(Sm);u&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${N5(u)}") repeat-x bottom left; }`);const d=r.getColor(iCe);d&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);const h=r.getColor(sCe);h&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${h}; }`);const p=r.getColor(rCe);p&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${FDe(p)}") no-repeat bottom left; }`);const v=r.getColor(NLe);v&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${v.rgba.a}; }`);const C=r.getColor(kLe);C&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${C}; }`);const S=r.getColor(g2)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${S}}`)});class Hr{constructor(e,t,n){const i=s=>this.emitter.fire(s);this.emitter=new Ae({onFirstListenerAdd:()=>e.addEventListener(t,i,n),onLastListenerRemove:()=>e.removeEventListener(t,i,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function JY(r){return r.preventDefault(),r.stopPropagation(),r}var cD=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};let BDe=!1;var TR;(function(r){r.North="north",r.South="south",r.East="east",r.West="west"})(TR||(TR={}));let WDe=4;const VDe=new Ae;let HDe=300;const zDe=new Ae;class E${constructor(){this.disposables=new Et}get onPointerMove(){return this.disposables.add(new Hr(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Hr(window,"mouseup")).event}dispose(){this.disposables.dispose()}}cD([la],E$.prototype,"onPointerMove",null);cD([la],E$.prototype,"onPointerUp",null);class x${constructor(e){this.el=e,this.disposables=new Et}get onPointerMove(){return this.disposables.add(new Hr(this.el,as.Change)).event}get onPointerUp(){return this.disposables.add(new Hr(this.el,as.End)).event}dispose(){this.disposables.dispose()}}cD([la],x$.prototype,"onPointerMove",null);cD([la],x$.prototype,"onPointerUp",null);class kR{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}cD([la],kR.prototype,"onPointerMove",null);cD([la],kR.prototype,"onPointerUp",null);class ru extends Je{constructor(e,t,n){super(),this.hoverDelay=HDe,this.hoverDelayer=this._register(new Pb(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Ae),this._onDidStart=this._register(new Ae),this._onDidChange=this._register(new Ae),this._onDidReset=this._register(new Ae),this._onDidEnd=this._register(new Ae),this.orthogonalStartSashDisposables=this._register(new Et),this.orthogonalStartDragHandleDisposables=this._register(new Et),this.orthogonalEndSashDisposables=this._register(new Et),this.orthogonalEndDragHandleDisposables=this._register(new Et),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=st(e,Ct(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),zi&&this.el.classList.add("mac");const i=this._register(new Hr(this.el,"mousedown")).event;this._register(i(h=>this.onPointerStart(h,new E$),this));const s=this._register(new Hr(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new Hr(this.el,"mouseenter")).event;this._register(o(()=>ru.onMouseEnter(this)));const a=this._register(new Hr(this.el,"mouseleave")).event;this._register(a(()=>ru.onMouseLeave(this))),this._register(Rr.addTarget(this.el));const l=yn.map(this._register(new Hr(this.el,as.Start)).event,h=>{var p;return Object.assign(Object.assign({},h),{target:(p=h.initialTarget)!==null&&p!==void 0?p:null})});this._register(l(h=>this.onPointerStart(h,new x$(this.el)),this));const u=this._register(new Hr(this.el,as.Tap)).event,d=yn.map(yn.filter(yn.debounce(u,(h,p)=>{var v;return{event:p,count:((v=h==null?void 0:h.count)!==null&&v!==void 0?v:0)+1}},250),({count:h})=>h===2),({event:h})=>{var p;return Object.assign(Object.assign({},h),{target:(p=h.initialTarget)!==null&&p!==void 0?p:null})});this._register(d(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=WDe,this._register(VDe.event(h=>{this.size=h,this.layout()}))),this._register(zDe.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",BDe),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=st(this.el,Ct(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Bi(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Hr(this._orthogonalStartDragHandle,"mouseenter")).event(()=>ru.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Hr(this._orthogonalStartDragHandle,"mouseleave")).event(()=>ru.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=st(this.el,Ct(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Bi(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Hr(this._orthogonalEndDragHandle,"mouseenter")).event(()=>ru.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Hr(this._orthogonalEndDragHandle,"mouseleave")).event(()=>ru.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Ir.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const C=this.getOrthogonalSash(e);C&&(n=!0,e.__orthogonalSashEvent=!0,C.onPointerStart(e,new kR(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new kR(t))),!this.state)return;const i=B0e("iframe");for(const C of i)C.style.pointerEvents="none";const s=e.pageX,o=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const u=kf(this.el),d=()=>{let C="";n?C="all-scroll":this.orientation===1?this.state===1?C="s-resize":this.state===2?C="n-resize":C=zi?"row-resize":"ns-resize":this.state===1?C="e-resize":this.state===2?C="w-resize":C=zi?"col-resize":"ew-resize",u.textContent=`* { cursor: ${C} !important; }`},h=new Et;d(),n||this.onDidEnablementChange.event(d,null,h);const p=C=>{Ir.stop(C,!1);const S={startX:s,currentX:C.pageX,startY:o,currentY:C.pageY,altKey:a};this._onDidChange.fire(S)},v=C=>{Ir.stop(C,!1),this.el.removeChild(u),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const S of i)S.style.pointerEvents="auto"};t.onPointerMove(p,null,h),t.onPointerUp(v,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&ru.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&ru.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){ru.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const D$=lr("IEditorCancelService"),yoe=new gn("cancellableOperation",!1,L("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));KC(D$,class{constructor(){this._tokens=new WeakMap}add(r,e){let t=this._tokens.get(r);t||(t=r.invokeWithinContext(i=>{const s=yoe.bindTo(i.get(Xn)),o=new Eh;return{key:s,tokens:o}}),this._tokens.set(r,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(r){const e=this._tokens.get(r);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class UDe extends Fu{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(D$).add(e,this))}dispose(){this._unregister(),super.dispose()}}Dt(new class extends Rl{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:yoe})}runEditorCommand(r,e){r.get(D$).cancel(e)}});let woe=class uW{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?wf("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof uW))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new uW(e,this.flags))}};class sN extends UDe{constructor(e,t,n,i){super(e,i),this._listener=new Et,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!se.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!se.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class I$ extends Fu{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class AC{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}}return new AC(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const Soe={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Hg.text,TERMINALS:"Terminals"};class $De{constructor(e){this.data=e}update(){}getData(){return this.data}}const sb={CurrentDragAndDropData:void 0};class tv extends Je{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Ef&&this._register(t.onDidChange(i=>{this.element&&this.handleActionChangeEvent(i)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new ux)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Rr.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Bd&&this._register(St(e,xn.DRAG_START,i=>{var s;return(s=i.dataTransfer)===null||s===void 0?void 0:s.setData(Soe.TEXT,this._action.label)}))),this._register(St(t,as.Tap,i=>this.onClick(i,!0))),this._register(St(t,xn.MOUSE_DOWN,i=>{n||Ir.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),zi&&this._register(St(t,xn.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register(St(t,xn.CLICK,i=>{Ir.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register(St(t,xn.DBLCLICK,i=>{Ir.stop(i,!0)})),[xn.MOUSE_UP,xn.MOUSE_OUT].forEach(i=>{this._register(St(t,i,s=>{Ir.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Ir.stop(e,!0);const i=wh(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class oN extends tv{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=st(this.element,Ct("a.action-label"))),this.label&&(this._action.id===Yg.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(st(this.element,Ct("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=L({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var jDe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Nv extends Je{constructor(e,t={}){var n,i,s,o,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Ae),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Ae({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Ae),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new Ae),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(o=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new ux,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._register(this._actionRunner.onBeforeRun(h=>this._onBeforeRun.fire(h))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let u,d;switch(this._orientation){case 0:u=[15],d=[17];break;case 1:u=[16],d=[18],this.domNode.className+=" vertical";break}this._register(St(this.domNode,xn.KEY_DOWN,h=>{const p=new Ts(h);let v=!0;const C=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;u&&(p.equals(u[0])||p.equals(u[1]))?v=this.focusPrevious():d&&(p.equals(d[0])||p.equals(d[1]))?v=this.focusNext():p.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():p.equals(14)?v=this.focusFirst():p.equals(13)?v=this.focusLast():p.equals(2)&&C instanceof tv&&C.trapsArrowNavigation?v=this.focusNext():this.isTriggerKeyEvent(p)?this._triggerKeys.keyDown?this.doTrigger(p):this.triggerKeyDown=!0:v=!1,v&&(p.preventDefault(),p.stopPropagation())})),this._register(St(this.domNode,xn.KEY_UP,h=>{const p=new Ts(h);this.isTriggerKeyEvent(p)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(p)),p.preventDefault(),p.stopPropagation()):(p.equals(2)||p.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(lx(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(RE()===this.domNode||!Eb(RE(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof tv&&n.isEnabled());t instanceof tv&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof tv&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Eb(RE(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=tS(t.index)?t.index:null;n.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(St(o,xn.CONTEXT_MENU,l=>{Ir.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s)),a||(a=new oN(this.context,s,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof tv&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(s.id)):(this.actionsList.insertBefore(o,this.actionsList.children[i]),this.viewItems.splice(i,0,a),this._actionIds.splice(i,0,s.id),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){nr(this.viewItems),this.viewItems=[],this._actionIds=[],Ca(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var i;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((i=this.viewItems[this.previouslyFocusedItem])===null||i===void 0||i.blur());const s=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(s){let o=!0;BM(s.focus)||(o=!1),this.options.focusOnlyEnabledItems&&BM(s.isEnabled)&&!s.isEnabled()&&(o=!1),o?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof tv){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return jDe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){nr(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const qDe={IconContribution:"base.contributions.icons"};class KDe{constructor(){this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:L("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:L("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Fc.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return s}let o={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=o;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;vs.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of i.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${vs.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of i.filter(o=>!vs.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}}const fS=new KDe;mo.add(qDe.IconContribution,fS);function hl(r,e,t,n){return fS.registerIcon(r,e,t,n)}function GDe(){return fS}function YDe(){for(const r of FM.all)fS.registerIcon(r.id,r.definition,r.description);FM.onDidRegister(r=>fS.registerIcon(r.id,r.definition,r.description))}YDe();const Loe="vscode://schemas/icons";let Eoe=mo.as(r4.JSONContribution);Eoe.registerSchema(Loe,fS.getIconSchema());const eZ=new Qr(()=>Eoe.notifySchemaChanged(Loe),200);fS.onDidChange(()=>{eZ.isScheduled()||eZ.schedule()});const xoe=hl("widget-close",Ie.close,L("widgetClose","Icon for the close action in widgets."));var ZDe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XDe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},QDe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},A5;const VA=3;class gT{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class O5{constructor(e){this.entries=e}}const JDe=hl("diff-review-insert",Ie.add,L("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),eIe=hl("diff-review-remove",Ie.remove,L("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),tIe=hl("diff-review-close",Ie.close,L("diffReviewCloseIcon","Icon for 'Close' in diff review."));let NR=class nw extends Je{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=tr(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=tr(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Nv(this.actionBarContainer.domNode)),this._actionBar.push(new Ef("diffreview.close",L("label.close","Close"),"close-diff-review "+vs.asClassName(tIe),!0,()=>QDe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=tr(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=tr(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new C2(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(ja(this.domNode.domNode,"click",n=>{n.preventDefault();let i=Qie(n.target,"diff-review-row");i&&this._goToRow(i)})),this._register(ja(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new ze(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new ze(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new ze(e,1)),this._diffEditor.revealPosition(new ze(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:nw._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let i=[],s=0;for(let u=0,d=e.length;u<d;u++){const h=e[u],p=h.originalStartLineNumber,v=h.originalEndLineNumber,C=h.modifiedStartLineNumber,S=h.modifiedEndLineNumber;let E=[],k=0;{const D=v===0?p:p-1,O=S===0?C:C-1;let H=1,V=1;if(u>0){const P=e[u-1];P.originalEndLineNumber===0?H=P.originalStartLineNumber+1:H=P.originalEndLineNumber+1,P.modifiedEndLineNumber===0?V=P.modifiedStartLineNumber+1:V=P.modifiedEndLineNumber+1}let X=D-VA+1,$=O-VA+1;if(X<H){const P=H-X;X=X+P,$=$+P}if($<V){const P=V-$;X=X+P,$=$+P}E[k++]=new gT(X,D,$,O)}v!==0&&(E[k++]=new gT(p,v,0,0)),S!==0&&(E[k++]=new gT(0,0,C,S));{const D=v===0?p+1:v+1,O=S===0?C+1:S+1;let H=t,V=n;if(u+1<d){const P=e[u+1];P.originalEndLineNumber===0?H=P.originalStartLineNumber:H=P.originalStartLineNumber-1,P.modifiedEndLineNumber===0?V=P.modifiedStartLineNumber:V=P.modifiedStartLineNumber-1}let X=D+VA-1,$=O+VA-1;if(X>H){const P=H-X;X=X+P,$=$+P}if($>V){const P=V-$;X=X+P,$=$+P}E[k++]=new gT(D,X,O,$)}i[s++]=new O5(E)}let o=i[0].entries,a=[],l=0;for(let u=1,d=i.length;u<d;u++){const h=i[u].entries,p=o[o.length-1],v=h[0];if(p.getType()===0&&v.getType()===0&&v.originalLineStart<=p.originalLineEnd){o[o.length-1]=new gT(p.originalLineStart,v.originalLineEnd,p.modifiedLineStart,v.modifiedLineEnd),o=o.concat(h.slice(1));continue}a[l++]=new O5(o),o=h}return a[l++]=new O5(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const s=this._diffs[n].entries,o=s[s.length-1].modifiedLineEnd;if(t<=o)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),s=n.getOptions(),o=i.getOptions();if(!this._isVisible||!n||!i){Ca(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries;let u=document.createElement("div");u.className="diff-review-table",u.setAttribute("role","list"),u.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),lc.applyFontInfoSlow(u,t.get(43));let d=0,h=0,p=0,v=0;for(let $=0,P=l.length;$<P;$++){const z=l[$],M=z.originalLineStart,W=z.originalLineEnd,I=z.modifiedLineStart,R=z.modifiedLineEnd;M!==0&&(d===0||M<d)&&(d=M),W!==0&&(h===0||W>h)&&(h=W),I!==0&&(p===0||I<p)&&(p=I),R!==0&&(v===0||R>v)&&(v=R)}let C=document.createElement("div");C.className="diff-review-row";let S=document.createElement("div");S.className="diff-review-cell diff-review-summary";const E=h-d+1,k=v-p+1;S.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${E} +${p},${k} @@`)),C.setAttribute("data-line",String(p));const D=$=>$===0?L("no_lines_changed","no lines changed"):$===1?L("one_line_changed","1 line changed"):L("more_lines_changed","{0} lines changed",$),O=D(E),H=D(k);C.setAttribute("aria-label",L({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,O,p,H)),C.appendChild(S),C.setAttribute("role","listitem"),u.appendChild(C);const V=t.get(58);let X=p;for(let $=0,P=l.length;$<P;$++){const z=l[$];nw._renderSection(u,z,X,V,this._width,e,n,s,t,i,o,this._modeService.languageIdCodec),z.modifiedLineStart!==0&&(X=z.modifiedLineEnd)}Ca(this._content.domNode),this._content.domNode.appendChild(u),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,s,o,a,l,u,d,h,p){const v=t.getType();let C="diff-review-row",S="";const E="diff-review-spacer";let k=null;switch(v){case 1:C="diff-review-row line-insert",S=" char-insert",k=JDe;break;case 2:C="diff-review-row line-delete",S=" char-delete",k=eIe;break}const D=t.originalLineStart,O=t.originalLineEnd,H=t.modifiedLineStart,V=t.modifiedLineEnd,X=Math.max(V-H,O-D),$=o.get(130),P=$.glyphMarginWidth+$.lineNumbersWidth,z=u.get(130),M=10+z.glyphMarginWidth+z.lineNumbersWidth;for(let W=0;W<=X;W++){const I=D===0?0:D+W,R=H===0?0:H+W,G=document.createElement("div");G.style.minWidth=s+"px",G.className=C,G.setAttribute("role","listitem"),R!==0&&(n=R),G.setAttribute("data-line",String(n));let Z=document.createElement("div");Z.className="diff-review-cell",Z.style.height=`${i}px`,G.appendChild(Z);const ee=document.createElement("span");ee.style.width=P+"px",ee.style.minWidth=P+"px",ee.className="diff-review-line-number"+S,I!==0?ee.appendChild(document.createTextNode(String(I))):ee.innerText="",Z.appendChild(ee);const ne=document.createElement("span");ne.style.width=M+"px",ne.style.minWidth=M+"px",ne.style.paddingRight="10px",ne.className="diff-review-line-number"+S,R!==0?ne.appendChild(document.createTextNode(String(R))):ne.innerText="",Z.appendChild(ne);const ie=document.createElement("span");if(ie.className=E,k){const K=document.createElement("span");K.className=vs.asClassName(k),K.innerText="",ie.appendChild(K)}else ie.innerText="";Z.appendChild(ie);let te;if(R!==0){let K=this._renderLine(d,u,h.tabSize,R,p);nw._ttPolicy&&(K=nw._ttPolicy.createHTML(K)),Z.insertAdjacentHTML("beforeend",K),te=d.getLineContent(R)}else{let K=this._renderLine(a,o,l.tabSize,I,p);nw._ttPolicy&&(K=nw._ttPolicy.createHTML(K)),Z.insertAdjacentHTML("beforeend",K),te=a.getLineContent(I)}te.length===0&&(te=L("blankLine","blank"));let B="";switch(v){case 0:I===R?B=L({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",te,I):B=L("equalLine","{0} original line {1} modified line {2}",te,I,R);break;case 1:B=L("insertLine","+ {0} modified line {1}",te,R);break;case 2:B=L("deleteLine","- {0} original line {1}",te,I);break}G.setAttribute("aria-label",B),e.appendChild(G)}}static _renderLine(e,t,n,i,s){const o=e.getLineContent(i),a=t.get(43),l=$a.createEmpty(o,s),u=Th.isBasicASCII(o,e.mightContainNonBasicASCII()),d=Th.containsRTL(o,u,e.mightContainRTL());return g4(new eL(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,o,!1,u,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==Sh.OFF,null)).html}};NR._ttPolicy=(A5=window.trustedTypes)===null||A5===void 0?void 0:A5.createPolicy("diffReview",{createHTML:r=>r});NR=ZDe([XDe(1,Pl)],NR);ds((r,e)=>{const t=r.getColor(Yse);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=r.getColor(sD);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class nIe extends hn{constructor(){super({id:"editor.action.diffReview.next",label:L("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:qt.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=Doe(e);n&&n.diffReviewNext()}}class iIe extends hn{constructor(){super({id:"editor.action.diffReview.prev",label:L("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:qt.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=Doe(e);n&&n.diffReviewPrev()}}function Doe(r){const e=r.get(vr),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let i=0,s=t.length;i<s;i++){const o=t[i];if(o.getModifiedEditor().getId()===n.getId()||o.getOriginalEditor().getId()===n.getId())return o}return null}It(nIe);It(iIe);const rIe="editorWorkerService",Oh=lr(rIe),$b=lr("contextViewService"),GC=lr("contextMenuService");var M5=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class sIe extends Je{constructor(e,t,n,i,s,o){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=s,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Ie.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const u=[],d=i.modifiedEndLineNumber===0;u.push(new Ef("diff.clipboard.copyDeletedContent",d?i.originalEndLineNumber>i.modifiedStartLineNumber?L("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):L("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalEndLineNumber>i.modifiedStartLineNumber?L("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):L("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>M5(this,void 0,void 0,function*(){const S=new se(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),E=i.originalModel.getValueInRange(S);yield this._clipboardService.writeText(E)})));let h=0,p;i.originalEndLineNumber>i.modifiedStartLineNumber&&(p=new Ef("diff.clipboard.copyDeletedLineContent",d?L("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber):L("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber),void 0,!0,()=>M5(this,void 0,void 0,function*(){const S=i.originalModel.getLineContent(i.originalStartLineNumber+h);if(S===""){const E=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(E===0?`
`:`\r
`)}else yield this._clipboardService.writeText(S)})),u.push(p)),n.getOption(80)||u.push(new Ef("diff.inline.revertChange",L("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>M5(this,void 0,void 0,function*(){const S=new se(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),E=i.originalModel.getValueInRange(S);if(i.modifiedEndLineNumber===0){const k=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new se(i.modifiedStartLineNumber,k,i.modifiedStartLineNumber,k),text:l+E}])}else{const k=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new se(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,k),text:E}])}})));const C=(S,E)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:S,y:E}),getActions:()=>(p&&(p.label=d?L("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+h):L("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber+h)),u),autoSelectFirstItem:!0})};this._register(ja(this._diffActions,"mousedown",S=>{const{top:E,height:k}=su(this._diffActions);let D=Math.floor(a/3);S.preventDefault(),C(S.posx,E+k+D)})),this._register(n.onMouseMove(S=>{S.target.type===8||S.target.type===5?S.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,S.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(S=>{S.event.rightButton&&(S.target.type===8||S.target.type===5)&&S.target.detail.viewZoneId===this._viewZoneId&&(S.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,S.event.browserEvent.y,a),C(S.event.posx,S.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:i}=su(e),s=t-i,o=Math.floor(s/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let u=0;u<this.diff.viewLineCounts.length;u++)if(l+=this.diff.viewLineCounts[u],o<l)return u}return o}}const YC=lr("clipboardService");class nL{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}nL.None=Object.freeze({report(){}});const jb=lr("editorProgressService");var oIe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},X0=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},R5;class tZ{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,i){const s=i?AC.capture(e):null;e.changeViewZones(o=>{var a;for(const l of this._zones)o.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,u=n.zones.length;l<u;l++){const d=n.zones[l];d.suppressMouseDown=!0;const h=o.addZone(d);this._zones.push(h),this._zonesMap[String(h)]=!0,n.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new sIe(h,d.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),s&&s.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let aIe=0;const lIe=hl("diff-insert",Ie.add,L("diffInsertIcon","Line decoration for inserts in the diff editor.")),Ioe=hl("diff-remove",Ie.remove,L("diffRemoveIcon","Line decoration for removals in the diff editor.")),nZ=(R5=window.trustedTypes)===null||R5===void 0?void 0:R5.createPolicy("diffEditorWidget",{createHTML:r=>r});let OC=class tu extends Je{constructor(e,t,n,i,s,o,a,l,u,d,h,p){super(),this._editorProgressService=p,this._onDidDispose=this._register(new Ae),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new Ae),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new Ae),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=s,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new nN([Xn,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=u,this._notificationService=d,this._id=++aIe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=sZ(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new Qr(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=tu._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=tr(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(ja(this._overviewDomElement,"mousedown",C=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(C)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new tZ(h,i),this._modifiedEditorState=new tZ(h,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new Fre(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(NR,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new _b(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new rZ(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(u.onDidColorThemeChange(C=>{this._strategy&&this._strategy.applyColors(C)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=tu._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const v=BE.getDiffEditorContributions();for(const C of v)try{this._register(a.createInstance(C.ctor,this))}catch(S){Jn(S)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=jM(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(43)&&this._updateDecorationsRunner.schedule(),s.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+tu.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(43)&&this._updateDecorationsRunner.schedule(),s.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(s=>{s.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+tu.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createInnerEditor(e,t,n,i){return e.createInstance(rN,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return w2.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=sZ(e,this._options),n=hIe(this._options,t);this._options=t;const i=n.ignoreTrimWhitespace||n.renderIndicators,s=this._isVisible&&(n.maxComputationTime||n.maxFileSize);i?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new _b(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new rZ(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=tu._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=tu.ENTIRE_DIFF_OVERVIEW_WIDTH-2*tu.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:tu.ONE_OVERVIEW_WIDTH,right:n+tu.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:tu.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),tu.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,i=this._options.maxFileSize*1024*1024,s=o=>{const a=o.getValueLength();return i===0||a<=i};if(!s(e)||!s(t)){(!tu._equals(e.uri,this._lastOriginalWarning)||!tu._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(L("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=o,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,i.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,i.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Pm.revealHorizontalRightPadding.defaultValue+tu.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=tu.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-tu.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(tu.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._options.renderOverviewRuler?tu.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),s=Math.max(0,i-2*0),o=n>0?s/n:0,a=Math.max(0,Math.floor(e.height*o)),l=Math.floor(t*o);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let i=0,s=n.length-1;for(;i<s;){const o=Math.floor((i+s)/2),a=t(n[o]),l=o+1<=s?t(n[o+1]):1073741824;e<a?s=o-1:e>=l?i=o+1:(i=o,s=o)}return n[i]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=s?i+Math.min(a,o):i+o-s+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=o?n+Math.min(a,s):n+s-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};OC.ONE_OVERVIEW_WIDTH=15;OC.ENTIRE_DIFF_OVERVIEW_WIDTH=30;OC.UPDATE_DIFF_DECORATIONS_DELAY=200;OC=oIe([X0(3,YC),X0(4,Oh),X0(5,Xn),X0(6,Li),X0(7,vr),X0(8,Fs),X0(9,Oo),X0(10,GC),X0(11,jb)],OC);class Toe extends Je{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(rse)||z6).transparent(2),n=(e.getColor(sse)||U6).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,s){s=s.sort((u,d)=>u.afterLineNumber-d.afterLineNumber),i=i.sort((u,d)=>u.afterLineNumber-d.afterLineNumber);const o=this._getViewZones(e,i,s,n),a=this._getOriginalEditorDecorations(e,t,n),l=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:o.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:o.modified}}}}class iZ{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class Lw{constructor(e,t,n,i,s){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=s}static _getViewLineCount(e,t,n){const i=e.getModel(),s=e._getViewModel();if(i&&s){const o=aN(i,s,t,n);return o.endLineNumber-o.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(131).wrappingColumn!==-1,i=this._modifiedEditor.getOption(131).wrappingColumn!==-1,s=n||i,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,u={original:[],modified:[]};let d=0,h=0,p=0,v=0,C=0,S=0;const E=(X,$)=>X.afterLineNumber-$.afterLineNumber,k=(X,$)=>{if($.domNode===null&&X.length>0){const P=X[X.length-1];if(P.afterLineNumber===$.afterLineNumber&&P.domNode===null){P.heightInLines+=$.heightInLines;return}}X.push($)},D=new iZ(this._modifiedForeignVZ),O=new iZ(this._originalForeignVZ);let H=1,V=1;for(let X=0,$=this._lineChanges.length;X<=$;X++){const P=X<$?this._lineChanges[X]:null;P!==null?(p=P.originalStartLineNumber+(P.originalEndLineNumber>0?-1:0),v=P.modifiedStartLineNumber+(P.modifiedEndLineNumber>0?-1:0),h=P.originalEndLineNumber>0?Lw._getViewLineCount(this._originalEditor,P.originalStartLineNumber,P.originalEndLineNumber):0,d=P.modifiedEndLineNumber>0?Lw._getViewLineCount(this._modifiedEditor,P.modifiedStartLineNumber,P.modifiedEndLineNumber):0,C=Math.max(P.originalStartLineNumber,P.originalEndLineNumber),S=Math.max(P.modifiedStartLineNumber,P.modifiedEndLineNumber)):(p+=1e7+h,v+=1e7+d,C=p,S=v);let z=[],M=[];if(s){let R;P?P.originalEndLineNumber>0?R=P.originalStartLineNumber-H:R=P.modifiedStartLineNumber-V:R=o.getLineCount()-H;for(let G=0;G<R;G++){const Z=H+G,ee=V+G,ne=a.getModelLineViewLineCount(Z),ie=l.getModelLineViewLineCount(ee);ne<ie?z.push({afterLineNumber:Z,heightInLines:ie-ne,domNode:null,marginDomNode:null}):ne>ie&&M.push({afterLineNumber:ee,heightInLines:ne-ie,domNode:null,marginDomNode:null})}P&&(H=(P.originalEndLineNumber>0?P.originalEndLineNumber:P.originalStartLineNumber)+1,V=(P.modifiedEndLineNumber>0?P.modifiedEndLineNumber:P.modifiedStartLineNumber)+1)}for(;D.current&&D.current.afterLineNumber<=S;){let R;D.current.afterLineNumber<=v?R=p-v+D.current.afterLineNumber:R=C;let G=null;P&&P.modifiedStartLineNumber<=D.current.afterLineNumber&&D.current.afterLineNumber<=P.modifiedEndLineNumber&&(G=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),z.push({afterLineNumber:R,heightInLines:D.current.height/t,domNode:null,marginDomNode:G}),D.advance()}for(;O.current&&O.current.afterLineNumber<=C;){let R;O.current.afterLineNumber<=p?R=v-p+O.current.afterLineNumber:R=S,M.push({afterLineNumber:R,heightInLines:O.current.height/e,domNode:null}),O.advance()}if(P!==null&&YE(P)){const R=this._produceOriginalFromDiff(P,h,d);R&&z.push(R)}if(P!==null&&ZE(P)){const R=this._produceModifiedFromDiff(P,h,d);R&&M.push(R)}let W=0,I=0;for(z=z.sort(E),M=M.sort(E);W<z.length&&I<M.length;){const R=z[W],G=M[I],Z=R.afterLineNumber-p,ee=G.afterLineNumber-v;Z<ee?(k(u.original,R),W++):ee<Z?(k(u.modified,G),I++):R.shouldNotShrink?(k(u.original,R),W++):G.shouldNotShrink?(k(u.modified,G),I++):R.heightInLines>=G.heightInLines?(R.heightInLines-=G.heightInLines,I++):(G.heightInLines-=R.heightInLines,W++)}for(;W<z.length;)k(u.original,z[W]),W++;for(;I<M.length;)k(u.modified,M[I]),I++}return{original:Lw._ensureDomNodes(u.original),modified:Lw._ensureDomNodes(u.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=koe()),t))}}function hb(r,e,t,n,i){return{range:new se(r,e,t,n),options:i}}const Mc={charDelete:mi.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:mi.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:mi.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:mi.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:mi.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:mi.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+vs.asClassName(lIe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:mi.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:mi.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+vs.asClassName(Ioe),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:mi.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class _b extends Toe{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new ru(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?OC.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*n);const s=Math.floor(.5*n);return i=this._disableSash?s:i||s,n>_b.MINIMUM_EDITOR_WIDTH*2?(i<_b.MINIMUM_EDITOR_WIDTH&&(i=_b.MINIMUM_EDITOR_WIDTH),i>n-_b.MINIMUM_EDITOR_WIDTH&&(i=n-_b.MINIMUM_EDITOR_WIDTH)):i=s,this._sashPosition!==i&&(this._sashPosition=i,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?OC.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new uIe(e,t,n,i,s).getViewZones()}_getOriginalEditorDecorations(e,t,n){const i=this._dataSource.getOriginalEditor(),s=String(this._removeColor),o={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(ZE(u)){o.decorations.push({range:new se(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:n?Mc.lineDeleteWithSign:Mc.lineDelete}),(!YE(u)||!u.charChanges)&&o.decorations.push(hb(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824,Mc.charDeleteWholeLine));const d=aN(a,l,u.originalStartLineNumber,u.originalEndLineNumber);if(o.overviewZones.push(new Jk(d.startLineNumber,d.endLineNumber,s)),u.charChanges){for(const h of u.charChanges)if(ZE(h))if(t)for(let p=h.originalStartLineNumber;p<=h.originalEndLineNumber;p++){let v,C;p===h.originalStartLineNumber?v=h.originalStartColumn:v=a.getLineFirstNonWhitespaceColumn(p),p===h.originalEndLineNumber?C=h.originalEndColumn:C=a.getLineLastNonWhitespaceColumn(p),o.decorations.push(hb(p,v,p,C,Mc.charDelete))}else o.decorations.push(hb(h.originalStartLineNumber,h.originalStartColumn,h.originalEndLineNumber,h.originalEndColumn,Mc.charDelete))}}return o}_getModifiedEditorDecorations(e,t,n){const i=this._dataSource.getModifiedEditor(),s=String(this._insertColor),o={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(YE(u)){o.decorations.push({range:new se(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:n?Mc.lineInsertWithSign:Mc.lineInsert}),(!ZE(u)||!u.charChanges)&&o.decorations.push(hb(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,Mc.charInsertWholeLine));const d=aN(a,l,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(o.overviewZones.push(new Jk(d.startLineNumber,d.endLineNumber,s)),u.charChanges){for(const h of u.charChanges)if(YE(h))if(t)for(let p=h.modifiedStartLineNumber;p<=h.modifiedEndLineNumber;p++){let v,C;p===h.modifiedStartLineNumber?v=h.modifiedStartColumn:v=a.getLineFirstNonWhitespaceColumn(p),p===h.modifiedEndLineNumber?C=h.modifiedEndColumn:C=a.getLineLastNonWhitespaceColumn(p),o.decorations.push(hb(p,v,p,C,Mc.charInsert))}else o.decorations.push(hb(h.modifiedStartLineNumber,h.modifiedStartColumn,h.modifiedEndLineNumber,h.modifiedEndColumn,Mc.charInsert))}}return o}}_b.MINIMUM_EDITOR_WIDTH=100;class uIe extends Lw{constructor(e,t,n,i,s){super(e,t,n,i,s)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class rZ extends Toe{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const s=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new cIe(e,t,n,s,o,i).getViewZones()}_getOriginalEditorDecorations(e,t,n){const i=String(this._removeColor),s={decorations:[],overviewZones:[]},o=this._dataSource.getOriginalEditor(),a=o.getModel(),l=o._getViewModel();for(const u of e)if(ZE(u)){s.decorations.push({range:new se(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:Mc.lineDeleteMargin});const d=aN(a,l,u.originalStartLineNumber,u.originalEndLineNumber);s.overviewZones.push(new Jk(d.startLineNumber,d.endLineNumber,i))}return s}_getModifiedEditorDecorations(e,t,n){const i=this._dataSource.getModifiedEditor(),s=String(this._insertColor),o={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(YE(u)){o.decorations.push({range:new se(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:n?Mc.lineInsertWithSign:Mc.lineInsert});const d=aN(a,l,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(o.overviewZones.push(new Jk(d.startLineNumber,d.endLineNumber,s)),u.charChanges){for(const h of u.charChanges)if(YE(h))if(t)for(let p=h.modifiedStartLineNumber;p<=h.modifiedEndLineNumber;p++){let v,C;p===h.modifiedStartLineNumber?v=h.modifiedStartColumn:v=a.getLineFirstNonWhitespaceColumn(p),p===h.modifiedEndLineNumber?C=h.modifiedEndColumn:C=a.getLineLastNonWhitespaceColumn(p),o.decorations.push(hb(p,v,p,C,Mc.charInsert))}else o.decorations.push(hb(h.modifiedStartLineNumber,h.modifiedStartColumn,h.modifiedEndLineNumber,h.modifiedEndColumn,Mc.charInsert))}else o.decorations.push(hb(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,Mc.charInsertWholeLine))}return o}layout(){return Math.max(5,this._decorationsLeft)}}class cIe extends Lw{constructor(e,t,n,i,s,o){super(e,t,n,i,s),this._originalModel=i.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${Hw}`;const s=document.createElement("div");s.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:s,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(43),s=t.get(29),o=i.typicalHalfwidthCharacterWidth,a=t.get(92),l=this._originalModel.mightContainNonBasicASCII(),u=this._originalModel.mightContainRTL(),d=t.get(58),p=t.get(130).decorationsWidth,v=t.get(104),C=t.get(87),S=t.get(82),E=t.get(44),k=this._lineBreaksComputer.finalize();let D=0;for(let O=0;O<this._pendingLineChange.length;O++){const H=this._pendingLineChange[O],V=this._pendingViewZones[O],X=V.domNode;lc.applyFontInfoSlow(X,i);const $=V.marginDomNode;lc.applyFontInfoSlow($,i);const P=[];if(H.charChanges)for(const ee of H.charChanges)ZE(ee)&&P.push(new lk(new se(ee.originalStartLineNumber,ee.originalStartColumn,ee.originalEndLineNumber,ee.originalEndColumn),"char-delete",0));const z=P.length>0,M=lS(1e4);let W=0,I=0,R=null;for(let ee=H.originalStartLineNumber;ee<=H.originalEndLineNumber;ee++){const ne=ee-H.originalStartLineNumber,ie=this._originalModel.getLineTokens(ee),te=ie.getLineContent(),B=k[D++],K=xh.filter(P,ee,1,te.length+1);if(B){let de=0;for(const De of B.breakOffsets){const Me=ie.sliceAndInflate(de,De,0),Qe=te.substring(de,De);W=Math.max(W,this._renderOriginalLine(I++,Qe,Me,xh.extractWrapped(K,de,De),z,l,u,i,s,d,p,v,C,S,E,n,M,$)),de=De}for(R||(R=[]);R.length<ne;)R[R.length]=1;R[ne]=B.breakOffsets.length,V.heightInLines+=B.breakOffsets.length-1;const ae=document.createElement("div");ae.className="line-delete",e.original.push({afterLineNumber:ee,afterColumn:0,heightInLines:B.breakOffsets.length-1,domNode:koe(),marginDomNode:ae})}else W=Math.max(W,this._renderOriginalLine(I++,te,ie,K,z,l,u,i,s,d,p,v,C,S,E,n,M,$))}W+=a;const G=M.build(),Z=nZ?nZ.createHTML(G):G;if(X.innerHTML=Z,V.minWidthInPx=W*o,R){const ee=H.originalEndLineNumber-H.originalStartLineNumber;for(;R.length<=ee;)R[R.length]=1}V.diff.viewLineCounts=R}e.original.sort((O,H)=>O.afterLineNumber-H.afterLineNumber)}_renderOriginalLine(e,t,n,i,s,o,a,l,u,d,h,p,v,C,S,E,k,D){k.appendASCIIString('<div class="view-line'),s||k.appendASCIIString(" char-delete"),k.appendASCIIString('" style="top:'),k.appendASCIIString(String(e*d)),k.appendASCIIString('px;width:1000000px;">');const O=Th.isBasicASCII(t,o),H=Th.containsRTL(t,O,a),V=f4(new eL(l.isMonospace&&!u,l.canUseHalfwidthRightwardsArrow,t,!1,O,H,0,n,i,E,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,p,v,C,S!==Sh.OFF,null),k);if(k.appendASCIIString("</div>"),this._renderIndicators){const X=document.createElement("div");X.className=`delete-sign ${vs.asClassName(Ioe)}`,X.setAttribute("style",`position:absolute;top:${e*d}px;width:${h}px;height:${d}px;right:0;`),D.appendChild(X)}return V.characterMapping.getAbsoluteOffset(V.characterMapping.length)}}function dIe(r,e){return Pc(r,e,["off","on","inherit"])}function YE(r){return r.modifiedEndLineNumber>0}function ZE(r){return r.originalEndLineNumber>0}function koe(){const r=document.createElement("div");return r.className="diagonal-fill",r}function aN(r,e,t,n){const i=r.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new se(t,r.getLineMinColumn(t),n,r.getLineMaxColumn(n)))}function sZ(r,e){return{enableSplitViewResizing:Mn(r.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Mn(r.renderSideBySide,e.renderSideBySide),maxComputationTime:R6(r.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:R6(r.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Mn(r.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Mn(r.renderIndicators,e.renderIndicators),originalEditable:Mn(r.originalEditable,e.originalEditable),diffCodeLens:Mn(r.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Mn(r.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:dIe(r.diffWordWrap,e.diffWordWrap)}}function hIe(r,e){return{enableSplitViewResizing:r.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:r.renderSideBySide!==e.renderSideBySide,maxComputationTime:r.maxComputationTime!==e.maxComputationTime,maxFileSize:r.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:r.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:r.renderIndicators!==e.renderIndicators,originalEditable:r.originalEditable!==e.originalEditable,diffCodeLens:r.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:r.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:r.diffWordWrap!==e.diffWordWrap}}ds((r,e)=>{const t=r.getColor(rse);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=r.getColor(sse);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const i=r.getColor(kCe);i&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${r.type==="hc"?"dashed":"solid"} ${i}; }`);const s=r.getColor(NCe);s&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${r.type==="hc"?"dashed":"solid"} ${s}; }`);const o=r.getColor(sD);o&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=r.getColor(ACe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=r.getColor(HE);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);const u=r.getColor(zE);u&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${u};
			}
		`);const d=r.getColor(UE);d&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${d};
			}
		`);const h=r.getColor(OCe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${h} 12.5%,
			#0000 12.5%, #0000 50%,
			${h} 50%, ${h} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});function Av(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===w2.ICodeEditor:!1}function Noe(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===w2.IDiffEditor:!1}function Aoe(r){return Av(r)?r:Noe(r)?r.getModifiedEditor():null}const T$=lr("IWorkspaceEditService");function fIe(r){return Wc(r)&&(!!r.newUri||!!r.oldUri)}function gIe(r){return Wc(r)&&$n.isUri(r.resource)&&Wc(r.edit)}class k4{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(gIe(t))return new Ooe(t.resource,t.edit,t.modelVersionId,t.metadata);if(fIe(t))return new pIe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class Ooe extends k4{constructor(e,t,n,i){super(i),this.resource=e,this.textEdit=t,this.versionId=n}}class pIe extends k4{constructor(e,t,n,i){super(i),this.oldResource=e,this.newResource=t,this.options=n}}class oo{static insert(e,t){return{range:new se(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class mf{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?FSe(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=ub(this.contents),n=ub(this.overrides),i=[...this.keys];for(const s of e){this.mergeContents(t,s.contents);for(const o of s.overrides){const[a]=n.filter(l=>xf(l.identifiers,o.identifiers));a?(this.mergeContents(a.contents,o.contents),a.keys.push(...o.keys),a.keys=iS(a.keys)):n.push(ub(o))}for(const o of s.keys)i.indexOf(o)===-1&&i.push(o)}return new mf(t,i,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const i of iS([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[i],o=t[i];o&&(typeof s=="object"&&typeof o=="object"?(s=ub(s),this.mergeContents(s,o)):s=o),n[i]=s}return new mf(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Wc(e[n])&&Wc(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=ub(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?Vbe(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=s=>{s&&(n?this.mergeContents(n,s):n=ub(s))};for(const s of this.overrides)xf(s.identifiers,[e])?t=s.contents:s.identifiers.includes(e)&&i(s.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),o$(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&PSe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class mIe extends mf{constructor(e={}){const t=mo.as(QS.Configuration).getConfigurationProperties(),n=Object.keys(t),i=Object.create(null),s=[];for(const o in t){const a=e[o],l=a!==void 0?a:t[o].default;o$(i,o,l,u=>console.error(`Conflict in default settings: ${u}`))}for(const o of Object.keys(i))Rk.test(o)&&s.push({identifiers:Wre(o),keys:Object.keys(i[o]),contents:Hse(i[o],a=>console.error(`Conflict in default settings file: ${a}`))});super(i,n,s)}}class N4{constructor(e,t,n=new mf,i=new mf,s=new Mu,o=new mf,a=new Mu,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=i,this._folderConfigurations=s,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Mu,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new mf,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),i=this.parseConfigurationModel(e.workspace),s=e.folders.reduce((o,a)=>(o.set($n.revive(a[0]),this.parseConfigurationModel(a[1])),o),new Mu);return new N4(t,n,new mf,i,s,new mf,new Mu,!1)}static parseConfigurationModel(e){return new mf(e.contents,e.keys,e.overrides).freeze()}}class _Ie{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._previousConfiguration=void 0;const s=new Set;e.keys.forEach(a=>s.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>s.add(l))),this.affectedKeys=[...s.values()];const o=new mf;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=N4.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const i=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,s=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Xg(i,s)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=Hse({[t]:!0},()=>{}),i;for(;typeof n=="object"&&(i=Object.keys(n)[0]);){if(e=e[i],!e)return!1;n=n[i]}return!0}}const vIe=/^(cursor|delete)/;class bIe extends Je{constructor(e,t,n,i,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=s,this._onDidUpdateKeybindings=this._register(new Ae),this._currentChord=null,this._currentChordChecker=new d2,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=yE.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new cc,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:yn.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[i]=n.getDispatchParts();if(i===null)return null;const s=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(s,o,i)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(L("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=yE.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=yE.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getParts();return this._ignoreSingleModifiers=new yE(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let i=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let s=null,o=null;if(n){const[d]=e.getSingleModifierDispatchParts();s=d,o=d}else[s]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(t),l=e.getLabel(),u=this._getResolver().resolve(a,o,s);return this._logService.trace("KeybindingService#dispatch",l,u==null?void 0:u.commandId),u&&u.enterChord?(i=!0,this._enterChordMode(s,l),i):(this._currentChord&&(!u||!u.commandId)&&(this._notificationService.status(L("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),i=!0),this._leaveChordMode(),u&&u.commandId&&(u.bubble||(i=!0),typeof u.commandArgs>"u"?this._commandService.executeCommand(u.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(u.commandId,u.commandArgs).then(void 0,d=>this._notificationService.warn(d)),vIe.test(u.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:u.commandId,from:"keybinding"})),i)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class yE{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}yE.EMPTY=new yE(null);class XE{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let i=0,s=e.length;i<s;i++){const o=e[i].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=XE.combine(e,t);for(let i=0,s=this._keybindings.length;i<s;i++){let o=this._keybindings[i];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,n,i,s){return!(e.command!==i||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||s&&(!e.when||!_be(s,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const i of t){if(!i.command||i.command.length===0||i.command.charAt(0)!=="-"){n.push(i);continue}const s=i.command.substr(1),o=i.keypressParts[0],a=i.keypressParts[1],l=i.when;for(let u=e.length-1;u>=0;u--)this._isTargetedForRemoval(e[u],o,a,s,l)&&e.splice(u,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){let s=n[i];if(s.command===t.command)continue;const o=s.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&s.keypressParts[1]!==t.keypressParts[1]||XE.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:mre(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const s=n[i];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let i=null;if(t!==null){const o=this._map.get(t);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;i=[];for(let a=0,l=o.length;a<l;a++){let u=o[a];u.keypressParts[1]===n&&i.push(u)}}else{const o=this._map.get(n);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;i=o}let s=this._findCommand(e,i);return s?t===null&&s.keypressParts.length>1&&s.keypressParts[1]!==null?(this._log(`\\ From ${i.length} keybinding entries, matched chord, when: ${oZ(s.when)}, source: ${aZ(s)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${i.length} keybinding entries, matched ${s.command}, when: ${oZ(s.when)}, source: ${aZ(s)}.`),{enterChord:!1,leaveChord:s.keypressParts.length>1,commandId:s.command,commandArgs:s.commandArgs,bubble:s.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n];if(XE.contextMatchesRules(e,i.when))return i}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function oZ(r){return r?`${r.serialize()}`:"no when condition"}function aZ(r){return r.extensionId?r.isBuiltinExtension?`built-in extension ${r.extensionId}`:`user extension ${r.extensionId}`:r.isDefault?"built-in":"user"}class lZ{constructor(e,t,n,i,s,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?cW(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=cW(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=a}}function cW(r){let e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(!i)return e;e.push(i)}return e}class k${constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=n(a);if(l===null)return null;i[s]=wIe(a,l,this.modifierLabels[e])}return i.join(" ")}}const N$=new k$({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:L({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:L({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:L({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:L({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),CIe=new k$({ctrlKey:L({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:L({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:L({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:L({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:L({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:L({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:L({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),yIe=new k$({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function wIe(r,e,t){if(e===null)return"";const n=[];return r.ctrlKey&&n.push(t.ctrlKey),r.shiftKey&&n.push(t.shiftKey),r.altKey&&n.push(t.altKey),r.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class SIe extends Yve{constructor(e,t){if(super(),t.length===0)throw ym("parts");this._os=e,this._parts=t}getLabel(){return N$.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return CIe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:yIe.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new Gve(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class lN extends SIe{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return bw.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":bw.toString(e.keyCode)}_getElectronAccelerator(e){return bw.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return lN.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=bw.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=uU[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Qw)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Qw(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=cW(e.map(i=>this._resolveSimpleUserBinding(i)));return n.length>0?[new lN(new kM(n),t)]:[]}}const Moe=lr("contextService");class LIe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var qo;(function(r){r.noSelection=L("noSelection","No selection"),r.singleSelectionRange=L("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),r.singleSelection=L("singleSelection","Line {0}, Column {1}"),r.multiSelectionRange=L("multiSelectionRange","{0} selections ({1} characters selected)"),r.multiSelection=L("multiSelection","{0} selections"),r.emergencyConfOn=L("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),r.openingDocs=L("openingDocs","Now opening the Editor Accessibility documentation page."),r.readonlyDiffEditor=L("readonlyDiffEditor"," in a read-only pane of a diff editor."),r.editableDiffEditor=L("editableDiffEditor"," in a pane of a diff editor."),r.readonlyEditor=L("readonlyEditor"," in a read-only code editor"),r.editableEditor=L("editableEditor"," in a code editor"),r.changeConfigToOnMac=L("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),r.changeConfigToOnWinLinux=L("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),r.auto_on=L("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),r.auto_off=L("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),r.tabFocusModeOnMsg=L("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),r.tabFocusModeOnMsgNoKb=L("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),r.tabFocusModeOffMsg=L("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),r.tabFocusModeOffMsgNoKb=L("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),r.openDocMac=L("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),r.openDocWinLinux=L("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),r.outroMsg=L("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),r.showAccessibilityHelpAction=L("showAccessibilityHelpAction","Show Accessibility Help")})(qo||(qo={}));var dW;(function(r){r.inspectTokensAction=L("inspectTokens","Developer: Inspect Tokens")})(dW||(dW={}));var AR;(function(r){r.gotoLineActionLabel=L("gotoLineActionLabel","Go to Line/Column...")})(AR||(AR={}));var hW;(function(r){r.helpQuickAccessActionLabel=L("helpQuickAccess","Show all Quick Access Providers")})(hW||(hW={}));var uN;(function(r){r.quickCommandActionLabel=L("quickCommandActionLabel","Command Palette"),r.quickCommandHelp=L("quickCommandActionHelp","Show And Run Commands")})(uN||(uN={}));var cN;(function(r){r.quickOutlineActionLabel=L("quickOutlineActionLabel","Go to Symbol..."),r.quickOutlineByCategoryActionLabel=L("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(cN||(cN={}));var OR;(function(r){r.editorViewAccessibleLabel=L("editorViewAccessibleLabel","Editor content"),r.accessibilityHelpMessage=L("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(OR||(OR={}));var fW;(function(r){r.toggleHighContrast=L("toggleHighContrast","Toggle High Contrast Theme")})(fW||(fW={}));var gW;(function(r){r.bulkEditServiceSummary=L("bulkEditServiceSummary","Made {0} edits in {1} files")})(gW||(gW={}));var Roe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Poe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Foe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class EIe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Ae}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function xIe(r,e,t){return Av(r)?e(r):t(r)}let MR=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=xIe(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new Rve(new EIe(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};MR=Roe([Poe(0,aa)],MR);class A4{show(){return A4.NULL_PROGRESS_RUNNER}showWhile(e,t){return Foe(this,void 0,void 0,function*(){yield e})}}A4.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class DIe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,i){return Promise.resolve({choice:0})}}class O4{info(e){return this.notify({severity:so.Info,message:e})}warn(e){return this.notify({severity:so.Warning,message:e})}error(e){return this.notify({severity:so.Error,message:e})}notify(e){switch(e.severity){case so.Error:console.error(e.message);break;case so.Warning:console.warn(e.message);break;default:console.log(e.message);break}return O4.NO_OP}status(e,t){return Je.None}}O4.NO_OP=new CDe;class IIe{constructor(e){this._onWillExecuteCommand=new Ae,this._onDidExecuteCommand=new Ae,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Ki.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}}class Boe extends bIe{constructor(e,t,n,i,s,o){super(e,t,n,i,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(St(o,xn.KEY_DOWN,a=>{const l=new Ts(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(St(window,xn.KEY_UP,a=>{const l=new Ts(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,n,i){const s=b6(t,_f),o=new Et;return s&&(this._dynamicKeybindings.push({keybinding:s.parts,command:e,when:i,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),o.add(Bi(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),o.add(Ki.registerCommand(e,n)),this.updateResolver({source:1}),o}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Al.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new XE(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],i=0;for(const s of e){const o=s.when||void 0,a=s.keybinding;if(!a)n[i++]=new lZ(void 0,s.command,s.commandArgs,o,t,null,!1);else{const l=lN.resolveUserBinding(a,_f);for(const u of l)n[i++]=new lZ(u,s.command,s.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new Qw(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new lN(t,_f)}}function uZ(r){return r&&typeof r=="object"&&(!r.overrideIdentifier||typeof r.overrideIdentifier=="string")&&(!r.resource||r.resource instanceof $n)}class Woe{constructor(){this._onDidChangeConfiguration=new Ae,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new N4(new mIe,new mf)}getValue(e,t){const n=typeof e=="string"?e:void 0,i=uZ(e)?e:uZ(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const i of e){const[s,o]=i;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),n.push(s))}if(n.length>0){const i=new _Ie({keys:n,overrides:[]},t,this._configuration);i.source=7,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}}class TIe{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new Ae,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,i)=>t.affectsConfiguration(i)})})}getValue(e,t,n){const s=(ze.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof s>"u"?this.configurationService.getValue():this.configurationService.getValue(s)}}let pW=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Hc||zi?`
`:`\r
`}};pW=Roe([Poe(0,es)],pW);class kIe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class M4{constructor(){const e=$n.from({scheme:M4.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new LIe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}M4.SCHEME="inmemory";function RR(r,e,t){if(!e||!(r instanceof Woe))return;let n=[];Object.keys(e).forEach(i=>{q1e(i)&&n.push([`editor.${i}`,e[i]]),t&&K1e(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&r.updateValues(n)}class NIe{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return Foe(this,void 0,void 0,function*(){const n=new Map;for(let o of e){if(!(o instanceof Ooe))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(oo.replaceMove(se.lift(o.textEdit.range),o.textEdit.text))}let i=0,s=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),s+=1,i+=a.length;return{ariaSummary:wf(gW.bulkEditServiceSummary,i,s)}})}}class AIe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class Voe{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=yn.None}get dimension(){return this._dimension||(this._dimension=$P(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}class OIe{constructor(){this._neverEmitter=new Ae,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}const ZC=lr("themeService"),ks=lr("keybindingService");class MIe extends Je{constructor(){super(),this._onCodeEditorAdd=this._register(new Ae),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Ae),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Ae),this._onDiffEditorRemove=this._register(new Ae),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const i=e.toString();let s;this._modelProperties.has(i)?s=this._modelProperties.get(i):(s=new Map,this._modelProperties.set(i,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var RIe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},PIe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let mW=class extends MIe{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._globalStyleSheet=e||null,this._themeService=t}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}};mW=RIe([PIe(1,Fs)],mW);var FIe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let PR=class extends mW{constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===wi.http||s===wi.https)return ire(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const s={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};PR=FIe([cZ(1,Xn),cZ(2,Fs)],PR);var A$=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ds=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let BIe=0,dZ=!1;function WIe(r){if(!r){if(dZ)return;dZ=!0}H0e(r||document.body)}let FR=class extends rN{constructor(e,t,n,i,s,o,a,l,u,d){const h=Object.assign({},t);h.ariaLabel=h.ariaLabel||OR.editorViewAccessibleLabel,h.ariaLabel=h.ariaLabel+";"+OR.accessibilityHelpMessage,super(e,h,{},n,i,s,o,l,u,d),a instanceof Boe?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,WIe(h.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let i="DYNAMIC_"+ ++BIe,s=qt.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,s),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Je.None;const t=e.id,n=e.label,i=qt.and(qt.equals("editorId",this.getId()),qt.deserialize(e.precondition)),s=e.keybindings,o=qt.and(i,qt.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,u=(v,...C)=>Promise.resolve(e.run(this,...C)),d=new Et,h=this.getId()+":"+t;if(d.add(Ki.registerCommand(h,u)),a){let v={command:{id:h,title:n},when:i,group:a,order:l};d.add(Pu.appendMenuItem(vn.EditorContext,v))}if(Array.isArray(s))for(const v of s)d.add(this._standaloneKeybindingService.addDynamicKeybinding(h,v,u,o));let p=new _oe(h,n,n,i,u,this._contextKeyService);return this._actions[t]=p,d.add(Bi(()=>{delete this._actions[t]})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof PR)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};FR=A$([Ds(2,Li),Ds(3,vr),Ds(4,js),Ds(5,Xn),Ds(6,ks),Ds(7,Fs),Ds(8,Oo),Ds(9,Kc)],FR);let dN=class extends FR{constructor(e,t,n,i,s,o,a,l,u,d,h,p,v,C,S){const E=Object.assign({},t);RR(p,E,!1);const k=d.registerEditorContainer(e);typeof E.theme=="string"&&d.setTheme(E.theme),typeof E.autoDetectHighContrast<"u"&&d.setAutoDetectHighContrast(!!E.autoDetectHighContrast);let D=E.model;delete E.model,super(e,E,i,s,o,a,l,d,h,v),this._contextViewService=u,this._configurationService=p,this._standaloneThemeService=d,this._register(n),this._register(k);let O;if(typeof D>"u"?(O=Hoe(C,S,E.value||"",E.language||Hg.text,void 0),this._ownsModel=!0):(O=D,this._ownsModel=!1),this._attachModel(O),O){let H={oldModelUrl:null,newModelUrl:O.uri};this._onDidChangeModel.fire(H)}}dispose(){super.dispose()}updateOptions(e){RR(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};dN=A$([Ds(3,Li),Ds(4,vr),Ds(5,js),Ds(6,Xn),Ds(7,ks),Ds(8,$b),Ds(9,ZC),Ds(10,Oo),Ds(11,es),Ds(12,Kc),Ds(13,aa),Ds(14,Pl)],dN);let _W=class extends OC{constructor(e,t,n,i,s,o,a,l,u,d,h,p,v,C,S){const E=Object.assign({},t);RR(p,E,!0);const k=d.registerEditorContainer(e);typeof E.theme=="string"&&d.setTheme(E.theme),typeof E.autoDetectHighContrast<"u"&&d.setAutoDetectHighContrast(!!E.autoDetectHighContrast),super(e,E,{},S,l,s,i,u,d,h,v,C),this._contextViewService=a,this._configurationService=p,this._standaloneThemeService=d,this._register(n),this._register(k),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){RR(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(FR,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};_W=A$([Ds(3,Li),Ds(4,Xn),Ds(5,ks),Ds(6,$b),Ds(7,Oh),Ds(8,vr),Ds(9,ZC),Ds(10,Oo),Ds(11,es),Ds(12,GC),Ds(13,jb),Ds(14,YC)],_W);function Hoe(r,e,t,n,i){if(t=t||"",!n){const s=t.indexOf(`
`);let o=t;return s!==-1&&(o=t.substring(0,s)),hZ(r,t,e.createByFilepathOrFirstLine(i||null,o),i)}return hZ(r,t,e.create(n),i)}function hZ(r,e,t,n){return r.createModel(e,t,n)}const VIe="$initialize";let fZ=!1;function vW(r){eD&&(fZ||(fZ=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(r.message))}class HIe{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}}class gZ{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}class zIe{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}}class UIe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class $Ie{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class jIe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((i,s)=>{this._pendingReplies[n]={resolve:i,reject:s},this._send(new HIe(this._workerId,n,e,t))})}listen(e,t){let n=null;const i=new Ae({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new zIe(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new $Ie(this._workerId,n)),n=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(i=>{this._send(new gZ(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=uG(i.detail)),this._send(new gZ(this._workerId,t,void 0,uG(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(i=>{this._send(new UIe(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class qIe extends Je{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",u=>{this._protocol.handleMessage(u)},u=>{i&&i(u)})),this._protocol=new jIe({sendMessage:(u,d)=>{this._worker.postMessage(u,d)},handleMessage:(u,d)=>{if(typeof n[u]!="function")return Promise.reject(new Error("Missing method "+u+" on main thread host."));try{return Promise.resolve(n[u].apply(n,d))}catch(h){return Promise.reject(h)}},handleEvent:(u,d)=>{if(Uoe(u)){const h=n[u].call(n,d);if(typeof h!="function")throw new Error(`Missing dynamic event ${u} on main thread host.`);return h}if(zoe(u)){const h=n[u];if(typeof h!="function")throw new Error(`Missing event ${u} on main thread host.`);return h}throw new Error(`Malformed event name ${u}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;typeof go.require<"u"&&typeof go.require.getConfig=="function"?s=go.require.getConfig():typeof go.requirejs<"u"&&(s=go.requirejs.s.contexts._.config);const o=vU(n);this._onModuleLoaded=this._protocol.sendMessage(VIe,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,o]);const a=(u,d)=>this._request(u,d),l=(u,d)=>this._protocol.listen(u,d);this._lazyProxy=new Promise((u,d)=>{i=d,this._onModuleLoaded.then(h=>{u(KIe(h,a,l))},h=>{d(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}}function zoe(r){return r[0]==="o"&&r[1]==="n"&&J_(r.charCodeAt(2))}function Uoe(r){return/^onDynamic/.test(r)&&J_(r.charCodeAt(9))}function KIe(r,e,t){const n=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},i=o=>function(a){return t(o,a)};let s={};for(const o of r){if(Uoe(o)){s[o]=i(o);continue}if(zoe(o)){s[o]=t(o,void 0);continue}s[o]=n(o)}return s}var P5;const pZ=(P5=window.trustedTypes)===null||P5===void 0?void 0:P5.createPolicy("defaultWorkerFactory",{createScriptURL:r=>r});function GIe(r,e){if(go.MonacoEnvironment){if(typeof go.MonacoEnvironment.getWorker=="function")return go.MonacoEnvironment.getWorker(r,e);if(typeof go.MonacoEnvironment.getWorkerUrl=="function"){const t=go.MonacoEnvironment.getWorkerUrl(r,e);return new Worker(pZ?pZ.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function YIe(r){return typeof r.then=="function"}class ZIe{constructor(e,t,n,i,s){this.id=t;const o=GIe("workerMain.js",n);YIe(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class R4{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let i=++R4.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new ZIe(e,i,this._label||"anonymous"+i,t,s=>{vW(s),this._webWorkerFailedBeforeError=s,n(s)})}}R4.LAST_WORKER_ID=0;class G1{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class mZ{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}function XIe(r,e,t){return new lv(new mZ(r),new mZ(e)).ComputeDiff(t).changes}class jL{static Assert(e,t){if(!e)throw new Error(t)}}class qL{static Copy(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}static Copy2(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}}class _Z{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new G1(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class lv{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,s,o]=lv._getElements(e),[a,l,u]=lv._getElements(t);this._hasStrings=o&&u,this._originalStringElements=i,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(lv._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,s=t.length;i<s;i++)n[i]=QU(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=lv._getStrictElement(this._originalSequence,e),i=lv._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,s){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,o);return s&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,i,s){for(s[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let h;return n<=i?(jL.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new G1(e,0,n,i-n+1)]):e<=t?(jL.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new G1(e,t-e+1,n,0)]):(jL.Assert(e===t+1,"originalStart should only be one more than originalEnd"),jL.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,o,a,s),u=o[0],d=a[0];if(l!==null)return l;if(!s[0]){const h=this.ComputeDiffRecursive(e,u,n,d,s);let p=[];return s[0]?p=[new G1(u+1,t-(u+1)+1,d+1,i-(d+1)+1)]:p=this.ComputeDiffRecursive(u+1,t,d+1,i,s),this.ConcatenateChanges(h,p)}return[new G1(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,s,o,a,l,u,d,h,p,v,C,S,E,k,D){let O=null,H=null,V=new _Z,X=t,$=n,P=v[0]-E[0]-i,z=-1073741824,M=this.m_forwardHistory.length-1;do{const W=P+e;W===X||W<$&&u[W-1]<u[W+1]?(h=u[W+1],C=h-P-i,h<z&&V.MarkNextChange(),z=h,V.AddModifiedElement(h+1,C),P=W+1-e):(h=u[W-1]+1,C=h-P-i,h<z&&V.MarkNextChange(),z=h-1,V.AddOriginalElement(h,C+1),P=W-1-e),M>=0&&(u=this.m_forwardHistory[M],e=u[0],X=1,$=u.length-1)}while(--M>=-1);if(O=V.getReverseChanges(),D[0]){let W=v[0]+1,I=E[0]+1;if(O!==null&&O.length>0){const R=O[O.length-1];W=Math.max(W,R.getOriginalEnd()),I=Math.max(I,R.getModifiedEnd())}H=[new G1(W,p-W+1,I,S-I+1)]}else{V=new _Z,X=o,$=a,P=v[0]-E[0]-l,z=1073741824,M=k?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const W=P+s;W===X||W<$&&d[W-1]>=d[W+1]?(h=d[W+1]-1,C=h-P-l,h>z&&V.MarkNextChange(),z=h+1,V.AddOriginalElement(h+1,C+1),P=W+1-s):(h=d[W-1],C=h-P-l,h>z&&V.MarkNextChange(),z=h,V.AddModifiedElement(h+1,C+1),P=W-1-s),M>=0&&(d=this.m_reverseHistory[M],s=d[0],X=1,$=d.length-1)}while(--M>=-1);H=V.getChanges()}return this.ConcatenateChanges(O,H)}ComputeRecursionPoint(e,t,n,i,s,o,a){let l=0,u=0,d=0,h=0,p=0,v=0;e--,n--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const C=t-e+(i-n),S=C+1,E=new Int32Array(S),k=new Int32Array(S),D=i-n,O=t-e,H=e-n,V=t-i,$=(O-D)%2===0;E[D]=e,k[O]=t,a[0]=!1;for(let P=1;P<=C/2+1;P++){let z=0,M=0;d=this.ClipDiagonalBound(D-P,P,D,S),h=this.ClipDiagonalBound(D+P,P,D,S);for(let I=d;I<=h;I+=2){I===d||I<h&&E[I-1]<E[I+1]?l=E[I+1]:l=E[I-1]+1,u=l-(I-D)-H;const R=l;for(;l<t&&u<i&&this.ElementsAreEqual(l+1,u+1);)l++,u++;if(E[I]=l,l+u>z+M&&(z=l,M=u),!$&&Math.abs(I-O)<=P-1&&l>=k[I])return s[0]=l,o[0]=u,R<=k[I]&&1447>0&&P<=1447+1?this.WALKTRACE(D,d,h,H,O,p,v,V,E,k,l,t,s,u,i,o,$,a):null}const W=(z-e+(M-n)-P)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(z,W))return a[0]=!0,s[0]=z,o[0]=M,W>0&&1447>0&&P<=1447+1?this.WALKTRACE(D,d,h,H,O,p,v,V,E,k,l,t,s,u,i,o,$,a):(e++,n++,[new G1(e,t-e+1,n,i-n+1)]);p=this.ClipDiagonalBound(O-P,P,O,S),v=this.ClipDiagonalBound(O+P,P,O,S);for(let I=p;I<=v;I+=2){I===p||I<v&&k[I-1]>=k[I+1]?l=k[I+1]-1:l=k[I-1],u=l-(I-O)-V;const R=l;for(;l>e&&u>n&&this.ElementsAreEqual(l,u);)l--,u--;if(k[I]=l,$&&Math.abs(I-D)<=P&&l<=E[I])return s[0]=l,o[0]=u,R>=E[I]&&1447>0&&P<=1447+1?this.WALKTRACE(D,d,h,H,O,p,v,V,E,k,l,t,s,u,i,o,$,a):null}if(P<=1447){let I=new Int32Array(h-d+2);I[0]=D-d+1,qL.Copy2(E,d,I,1,h-d+1),this.m_forwardHistory.push(I),I=new Int32Array(v-p+2),I[0]=O-p+1,qL.Copy2(k,p,I,1,v-p+1),this.m_reverseHistory.push(I)}}return this.WALKTRACE(D,d,h,H,O,p,v,V,E,k,l,t,s,u,i,o,$,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const u=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!u)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,s=0;if(t>0){const h=e[t-1];i=h.originalStart+h.originalLength,s=h.modifiedStart+h.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,u=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const p=n.originalStart-h,v=n.modifiedStart-h;if(p<i||v<s||o&&!this.OriginalElementsAreEqual(p,p+n.originalLength)||a&&!this.ModifiedElementsAreEqual(v,v+n.modifiedLength))break;const S=(p===i&&v===s?5:0)+this._boundaryScore(p,n.originalLength,v,n.modifiedLength);S>u&&(u=S,l=h)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],s=e[t],o=s.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=s.originalStart+s.originalLength,u=l-a,d=i.modifiedStart,h=s.modifiedStart+s.modifiedLength,p=h-d;if(o<5&&u<20&&p<20){const v=this._findBetterContiguousSequence(a,u,d,p,o);if(v){const[C,S]=v;(C!==i.originalStart+i.originalLength||S!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=C-i.originalStart,i.modifiedLength=S-i.modifiedStart,s.originalStart=C+o,s.modifiedStart=S+o,s.originalLength=l-s.originalStart,s.modifiedLength=h-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,s){if(t<s||i<s)return null;const o=e+t-s+1,a=n+i-s+1;let l=0,u=0,d=0;for(let h=e;h<o;h++)for(let p=n;p<a;p++){const v=this._contiguousSequenceScore(h,p,s);v>0&&v>l&&(l=v,u=h,d=p)}return l>0?[u,d]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;i+=this._originalStringElements[e+s].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const s=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,i)?1:0;return s+o}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return qL.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],qL.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return qL.Copy(e,0,i,0,e.length),qL.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(jL.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),jL.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new G1(i,s,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const s=n,o=i-n-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?i-1:i-2}}}const QIe=3;function $oe(r,e,t,n){return new lv(r,e,t).ComputeDiff(n)}class vZ{constructor(e){const t=[],n=[];for(let i=0,s=e.length;i<s;i++)t[i]=bW(e[i],1),n[i]=CW(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],s=[],o=[];let a=0;for(let l=t;l<=n;l++){const u=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:u.length+1;for(let p=d;p<h;p++)i[a]=u.charCodeAt(p-1),s[a]=l+1,o[a]=p,a++}return new JIe(i,s,o)}}class JIe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class hN{constructor(e,t,n,i,s,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let i,s,o,a,l,u,d,h;return e.originalLength===0?(i=0,s=0,o=0,a=0):(i=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,u=0,d=0,h=0):(l=n.getStartLineNumber(e.modifiedStart),u=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new hN(i,s,o,a,l,u,d,h)}}function eTe(r){if(r.length<=1)return r;const e=[r[0]];let t=e[0];for(let n=1,i=r.length;n<i;n++){const s=r[n],o=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<QIe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class fk{constructor(e,t,n,i,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=s}static createFromDiffResult(e,t,n,i,s,o,a){let l,u,d,h,p;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,u=0):(l=n.getStartLineNumber(t.originalStart),u=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=i.getStartLineNumber(t.modifiedStart)-1,h=0):(d=i.getStartLineNumber(t.modifiedStart),h=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const v=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),C=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let S=$oe(v,C,s,!0).changes;a&&(S=eTe(S)),p=[];for(let E=0,k=S.length;E<k;E++)p.push(hN.createFromDiffChange(S[E],v,C))}return new fk(l,u,d,h,p)}}class tTe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new vZ(e),this.modified=new vZ(t),this.continueLineDiff=bZ(n.maxComputationTime),this.continueCharDiff=bZ(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=$oe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,u=t.length;l<u;l++)a.push(fk.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let s=0,o=0;for(let a=-1,l=t.length;a<l;a++){const u=a+1<l?t[a+1]:null,d=u?u.originalStart:this.originalLines.length,h=u?u.modifiedStart:this.modifiedLines.length;for(;s<d&&o<h;){const p=this.originalLines[s],v=this.modifiedLines[o];if(p!==v){{let C=bW(p,1),S=bW(v,1);for(;C>1&&S>1;){const E=p.charCodeAt(C-2),k=v.charCodeAt(S-2);if(E!==k)break;C--,S--}(C>1||S>1)&&this._pushTrimWhitespaceCharChange(i,s+1,1,C,o+1,1,S)}{let C=CW(p,1),S=CW(v,1);const E=p.length+1,k=v.length+1;for(;C<E&&S<k;){const D=p.charCodeAt(C-1),O=p.charCodeAt(S-1);if(D!==O)break;C++,S++}(C<E||S<k)&&this._pushTrimWhitespaceCharChange(i,s+1,C,E,o+1,S,k)}}s++,o++}u&&(i.push(fk.createFromDiffResult(this.shouldIgnoreTrimWhitespace,u,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=u.originalLength,o+=u.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,s,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,s,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new hN(t,n,t,i,s,o,s,a)]),e.push(new fk(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,s,o,a){const l=e.length;if(l===0)return!1;const u=e[l-1];return u.originalEndLineNumber===0||u.modifiedEndLineNumber===0?!1:u.originalEndLineNumber+1===t&&u.modifiedEndLineNumber+1===s?(u.originalEndLineNumber=t,u.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&u.charChanges&&u.charChanges.push(new hN(t,n,t,i,s,o,s,a)),!0):!1}}function bW(r,e){const t=oc(r);return t===-1?e:t+1}function CW(r,e){const t=Cv(r);return t===-1?e:t+2}function bZ(r){if(r===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<r}class nTe{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new ze(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new oDe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=Dv(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let i=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),i[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}class iTe{constructor(e,t,n){const i=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)i[s]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class rTe{constructor(e){let t=0,n=0;for(let s=0,o=e.length;s<o;s++){let[a,l,u]=e[s];l>t&&(t=l),a>n&&(n=a),u>n&&(n=u)}t++,n++;let i=new iTe(n,t,0);for(let s=0,o=e.length;s<o;s++){let[a,l,u]=e[s];i.set(a,l,u)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let F5=null;function sTe(){return F5===null&&(F5=new rTe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),F5}let pT=null;function oTe(){if(pT===null){pT=new oD(0);const r=` 	<>'"`;for(let t=0;t<r.length;t++)pT.set(r.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)pT.set(e.charCodeAt(t),2)}return pT}class BR{static _createLink(e,t,n,i,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:o+2},url:t.substring(i,o+1)}}static computeLinks(e,t=sTe()){const n=oTe();let i=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),l=a.length;let u=0,d=0,h=0,p=1,v=!1,C=!1,S=!1,E=!1;for(;u<l;){let k=!1;const D=a.charCodeAt(u);if(p===13){let O;switch(D){case 40:v=!0,O=0;break;case 41:O=v?0:1;break;case 91:S=!0,C=!0,O=0;break;case 93:S=!1,O=C?0:1;break;case 123:E=!0,O=0;break;case 125:O=E?0:1;break;case 39:O=h===34||h===96?0:1;break;case 34:O=h===39||h===96?0:1;break;case 96:O=h===39||h===34?0:1;break;case 42:O=h===42?1:0;break;case 124:O=h===124?1:0;break;case 32:O=S?0:1;break;default:O=n.get(D)}O===1&&(i.push(BR._createLink(n,a,s,d,u)),k=!0)}else if(p===12){let O;D===91?(C=!0,O=0):O=n.get(D),O===1?k=!0:p=13}else p=t.nextState(p,D),p===0&&(k=!0);k&&(p=1,v=!1,C=!1,E=!1,d=u+1,h=D),u++}p===13&&i.push(BR._createLink(n,a,s,d,l))}return i}}function aTe(r){return!r||typeof r.getLineCount!="function"||typeof r.getLineContent!="function"?[]:BR.computeLinks(r)}class yW{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,s){if(e&&t){let o=this.doNavigateValueSet(t,s);if(o)return{range:e,value:o}}if(n&&i){let o=this.doNavigateValueSet(i,s);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),i=Number(e),s=parseFloat(e);return!isNaN(i)&&!isNaN(s)&&i===s?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let s=0,o=e.length;i===null&&s<o;s++)i=this.valueSetReplace(e[s],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}yW.INSTANCE=new yW;var wW;(function(r){r[r.Unknown=0]="Unknown",r[r.Disabled=1]="Disabled",r[r.Enabled=2]="Enabled"})(wW||(wW={}));var SW;(function(r){r[r.KeepWhitespace=1]="KeepWhitespace",r[r.InsertAsSnippet=4]="InsertAsSnippet"})(SW||(SW={}));var LW;(function(r){r[r.Method=0]="Method",r[r.Function=1]="Function",r[r.Constructor=2]="Constructor",r[r.Field=3]="Field",r[r.Variable=4]="Variable",r[r.Class=5]="Class",r[r.Struct=6]="Struct",r[r.Interface=7]="Interface",r[r.Module=8]="Module",r[r.Property=9]="Property",r[r.Event=10]="Event",r[r.Operator=11]="Operator",r[r.Unit=12]="Unit",r[r.Value=13]="Value",r[r.Constant=14]="Constant",r[r.Enum=15]="Enum",r[r.EnumMember=16]="EnumMember",r[r.Keyword=17]="Keyword",r[r.Text=18]="Text",r[r.Color=19]="Color",r[r.File=20]="File",r[r.Reference=21]="Reference",r[r.Customcolor=22]="Customcolor",r[r.Folder=23]="Folder",r[r.TypeParameter=24]="TypeParameter",r[r.User=25]="User",r[r.Issue=26]="Issue",r[r.Snippet=27]="Snippet"})(LW||(LW={}));var EW;(function(r){r[r.Deprecated=1]="Deprecated"})(EW||(EW={}));var xW;(function(r){r[r.Invoke=0]="Invoke",r[r.TriggerCharacter=1]="TriggerCharacter",r[r.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(xW||(xW={}));var DW;(function(r){r[r.EXACT=0]="EXACT",r[r.ABOVE=1]="ABOVE",r[r.BELOW=2]="BELOW"})(DW||(DW={}));var IW;(function(r){r[r.NotSet=0]="NotSet",r[r.ContentFlush=1]="ContentFlush",r[r.RecoverFromMarkers=2]="RecoverFromMarkers",r[r.Explicit=3]="Explicit",r[r.Paste=4]="Paste",r[r.Undo=5]="Undo",r[r.Redo=6]="Redo"})(IW||(IW={}));var TW;(function(r){r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(TW||(TW={}));var kW;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(kW||(kW={}));var NW;(function(r){r[r.None=0]="None",r[r.Keep=1]="Keep",r[r.Brackets=2]="Brackets",r[r.Advanced=3]="Advanced",r[r.Full=4]="Full"})(NW||(NW={}));var AW;(function(r){r[r.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",r[r.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",r[r.accessibilitySupport=2]="accessibilitySupport",r[r.accessibilityPageSize=3]="accessibilityPageSize",r[r.ariaLabel=4]="ariaLabel",r[r.autoClosingBrackets=5]="autoClosingBrackets",r[r.autoClosingDelete=6]="autoClosingDelete",r[r.autoClosingOvertype=7]="autoClosingOvertype",r[r.autoClosingQuotes=8]="autoClosingQuotes",r[r.autoIndent=9]="autoIndent",r[r.automaticLayout=10]="automaticLayout",r[r.autoSurround=11]="autoSurround",r[r.bracketPairColorization=12]="bracketPairColorization",r[r.guides=13]="guides",r[r.codeLens=14]="codeLens",r[r.codeLensFontFamily=15]="codeLensFontFamily",r[r.codeLensFontSize=16]="codeLensFontSize",r[r.colorDecorators=17]="colorDecorators",r[r.columnSelection=18]="columnSelection",r[r.comments=19]="comments",r[r.contextmenu=20]="contextmenu",r[r.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",r[r.cursorBlinking=22]="cursorBlinking",r[r.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",r[r.cursorStyle=24]="cursorStyle",r[r.cursorSurroundingLines=25]="cursorSurroundingLines",r[r.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",r[r.cursorWidth=27]="cursorWidth",r[r.disableLayerHinting=28]="disableLayerHinting",r[r.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",r[r.domReadOnly=30]="domReadOnly",r[r.dragAndDrop=31]="dragAndDrop",r[r.emptySelectionClipboard=32]="emptySelectionClipboard",r[r.extraEditorClassName=33]="extraEditorClassName",r[r.fastScrollSensitivity=34]="fastScrollSensitivity",r[r.find=35]="find",r[r.fixedOverflowWidgets=36]="fixedOverflowWidgets",r[r.folding=37]="folding",r[r.foldingStrategy=38]="foldingStrategy",r[r.foldingHighlight=39]="foldingHighlight",r[r.foldingImportsByDefault=40]="foldingImportsByDefault",r[r.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",r[r.fontFamily=42]="fontFamily",r[r.fontInfo=43]="fontInfo",r[r.fontLigatures=44]="fontLigatures",r[r.fontSize=45]="fontSize",r[r.fontWeight=46]="fontWeight",r[r.formatOnPaste=47]="formatOnPaste",r[r.formatOnType=48]="formatOnType",r[r.glyphMargin=49]="glyphMargin",r[r.gotoLocation=50]="gotoLocation",r[r.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",r[r.hover=52]="hover",r[r.inDiffEditor=53]="inDiffEditor",r[r.inlineSuggest=54]="inlineSuggest",r[r.letterSpacing=55]="letterSpacing",r[r.lightbulb=56]="lightbulb",r[r.lineDecorationsWidth=57]="lineDecorationsWidth",r[r.lineHeight=58]="lineHeight",r[r.lineNumbers=59]="lineNumbers",r[r.lineNumbersMinChars=60]="lineNumbersMinChars",r[r.linkedEditing=61]="linkedEditing",r[r.links=62]="links",r[r.matchBrackets=63]="matchBrackets",r[r.minimap=64]="minimap",r[r.mouseStyle=65]="mouseStyle",r[r.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",r[r.mouseWheelZoom=67]="mouseWheelZoom",r[r.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",r[r.multiCursorModifier=69]="multiCursorModifier",r[r.multiCursorPaste=70]="multiCursorPaste",r[r.occurrencesHighlight=71]="occurrencesHighlight",r[r.overviewRulerBorder=72]="overviewRulerBorder",r[r.overviewRulerLanes=73]="overviewRulerLanes",r[r.padding=74]="padding",r[r.parameterHints=75]="parameterHints",r[r.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",r[r.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",r[r.quickSuggestions=78]="quickSuggestions",r[r.quickSuggestionsDelay=79]="quickSuggestionsDelay",r[r.readOnly=80]="readOnly",r[r.renameOnType=81]="renameOnType",r[r.renderControlCharacters=82]="renderControlCharacters",r[r.renderFinalNewline=83]="renderFinalNewline",r[r.renderLineHighlight=84]="renderLineHighlight",r[r.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",r[r.renderValidationDecorations=86]="renderValidationDecorations",r[r.renderWhitespace=87]="renderWhitespace",r[r.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",r[r.roundedSelection=89]="roundedSelection",r[r.rulers=90]="rulers",r[r.scrollbar=91]="scrollbar",r[r.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",r[r.scrollBeyondLastLine=93]="scrollBeyondLastLine",r[r.scrollPredominantAxis=94]="scrollPredominantAxis",r[r.selectionClipboard=95]="selectionClipboard",r[r.selectionHighlight=96]="selectionHighlight",r[r.selectOnLineNumbers=97]="selectOnLineNumbers",r[r.showFoldingControls=98]="showFoldingControls",r[r.showUnused=99]="showUnused",r[r.snippetSuggestions=100]="snippetSuggestions",r[r.smartSelect=101]="smartSelect",r[r.smoothScrolling=102]="smoothScrolling",r[r.stickyTabStops=103]="stickyTabStops",r[r.stopRenderingLineAfter=104]="stopRenderingLineAfter",r[r.suggest=105]="suggest",r[r.suggestFontSize=106]="suggestFontSize",r[r.suggestLineHeight=107]="suggestLineHeight",r[r.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",r[r.suggestSelection=109]="suggestSelection",r[r.tabCompletion=110]="tabCompletion",r[r.tabIndex=111]="tabIndex",r[r.unicodeHighlighting=112]="unicodeHighlighting",r[r.unusualLineTerminators=113]="unusualLineTerminators",r[r.useShadowDOM=114]="useShadowDOM",r[r.useTabStops=115]="useTabStops",r[r.wordSeparators=116]="wordSeparators",r[r.wordWrap=117]="wordWrap",r[r.wordWrapBreakAfterCharacters=118]="wordWrapBreakAfterCharacters",r[r.wordWrapBreakBeforeCharacters=119]="wordWrapBreakBeforeCharacters",r[r.wordWrapColumn=120]="wordWrapColumn",r[r.wordWrapOverride1=121]="wordWrapOverride1",r[r.wordWrapOverride2=122]="wordWrapOverride2",r[r.wrappingIndent=123]="wrappingIndent",r[r.wrappingStrategy=124]="wrappingStrategy",r[r.showDeprecated=125]="showDeprecated",r[r.inlayHints=126]="inlayHints",r[r.editorClassName=127]="editorClassName",r[r.pixelRatio=128]="pixelRatio",r[r.tabFocusMode=129]="tabFocusMode",r[r.layoutInfo=130]="layoutInfo",r[r.wrappingInfo=131]="wrappingInfo"})(AW||(AW={}));var OW;(function(r){r[r.TextDefined=0]="TextDefined",r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(OW||(OW={}));var MW;(function(r){r[r.LF=0]="LF",r[r.CRLF=1]="CRLF"})(MW||(MW={}));var RW;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(RW||(RW={}));var PW;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(PW||(PW={}));var FW;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(FW||(FW={}));var BW;(function(r){r[r.DependsOnKbLayout=-1]="DependsOnKbLayout",r[r.Unknown=0]="Unknown",r[r.Backspace=1]="Backspace",r[r.Tab=2]="Tab",r[r.Enter=3]="Enter",r[r.Shift=4]="Shift",r[r.Ctrl=5]="Ctrl",r[r.Alt=6]="Alt",r[r.PauseBreak=7]="PauseBreak",r[r.CapsLock=8]="CapsLock",r[r.Escape=9]="Escape",r[r.Space=10]="Space",r[r.PageUp=11]="PageUp",r[r.PageDown=12]="PageDown",r[r.End=13]="End",r[r.Home=14]="Home",r[r.LeftArrow=15]="LeftArrow",r[r.UpArrow=16]="UpArrow",r[r.RightArrow=17]="RightArrow",r[r.DownArrow=18]="DownArrow",r[r.Insert=19]="Insert",r[r.Delete=20]="Delete",r[r.Digit0=21]="Digit0",r[r.Digit1=22]="Digit1",r[r.Digit2=23]="Digit2",r[r.Digit3=24]="Digit3",r[r.Digit4=25]="Digit4",r[r.Digit5=26]="Digit5",r[r.Digit6=27]="Digit6",r[r.Digit7=28]="Digit7",r[r.Digit8=29]="Digit8",r[r.Digit9=30]="Digit9",r[r.KeyA=31]="KeyA",r[r.KeyB=32]="KeyB",r[r.KeyC=33]="KeyC",r[r.KeyD=34]="KeyD",r[r.KeyE=35]="KeyE",r[r.KeyF=36]="KeyF",r[r.KeyG=37]="KeyG",r[r.KeyH=38]="KeyH",r[r.KeyI=39]="KeyI",r[r.KeyJ=40]="KeyJ",r[r.KeyK=41]="KeyK",r[r.KeyL=42]="KeyL",r[r.KeyM=43]="KeyM",r[r.KeyN=44]="KeyN",r[r.KeyO=45]="KeyO",r[r.KeyP=46]="KeyP",r[r.KeyQ=47]="KeyQ",r[r.KeyR=48]="KeyR",r[r.KeyS=49]="KeyS",r[r.KeyT=50]="KeyT",r[r.KeyU=51]="KeyU",r[r.KeyV=52]="KeyV",r[r.KeyW=53]="KeyW",r[r.KeyX=54]="KeyX",r[r.KeyY=55]="KeyY",r[r.KeyZ=56]="KeyZ",r[r.Meta=57]="Meta",r[r.ContextMenu=58]="ContextMenu",r[r.F1=59]="F1",r[r.F2=60]="F2",r[r.F3=61]="F3",r[r.F4=62]="F4",r[r.F5=63]="F5",r[r.F6=64]="F6",r[r.F7=65]="F7",r[r.F8=66]="F8",r[r.F9=67]="F9",r[r.F10=68]="F10",r[r.F11=69]="F11",r[r.F12=70]="F12",r[r.F13=71]="F13",r[r.F14=72]="F14",r[r.F15=73]="F15",r[r.F16=74]="F16",r[r.F17=75]="F17",r[r.F18=76]="F18",r[r.F19=77]="F19",r[r.NumLock=78]="NumLock",r[r.ScrollLock=79]="ScrollLock",r[r.Semicolon=80]="Semicolon",r[r.Equal=81]="Equal",r[r.Comma=82]="Comma",r[r.Minus=83]="Minus",r[r.Period=84]="Period",r[r.Slash=85]="Slash",r[r.Backquote=86]="Backquote",r[r.BracketLeft=87]="BracketLeft",r[r.Backslash=88]="Backslash",r[r.BracketRight=89]="BracketRight",r[r.Quote=90]="Quote",r[r.OEM_8=91]="OEM_8",r[r.IntlBackslash=92]="IntlBackslash",r[r.Numpad0=93]="Numpad0",r[r.Numpad1=94]="Numpad1",r[r.Numpad2=95]="Numpad2",r[r.Numpad3=96]="Numpad3",r[r.Numpad4=97]="Numpad4",r[r.Numpad5=98]="Numpad5",r[r.Numpad6=99]="Numpad6",r[r.Numpad7=100]="Numpad7",r[r.Numpad8=101]="Numpad8",r[r.Numpad9=102]="Numpad9",r[r.NumpadMultiply=103]="NumpadMultiply",r[r.NumpadAdd=104]="NumpadAdd",r[r.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",r[r.NumpadSubtract=106]="NumpadSubtract",r[r.NumpadDecimal=107]="NumpadDecimal",r[r.NumpadDivide=108]="NumpadDivide",r[r.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",r[r.ABNT_C1=110]="ABNT_C1",r[r.ABNT_C2=111]="ABNT_C2",r[r.AudioVolumeMute=112]="AudioVolumeMute",r[r.AudioVolumeUp=113]="AudioVolumeUp",r[r.AudioVolumeDown=114]="AudioVolumeDown",r[r.BrowserSearch=115]="BrowserSearch",r[r.BrowserHome=116]="BrowserHome",r[r.BrowserBack=117]="BrowserBack",r[r.BrowserForward=118]="BrowserForward",r[r.MediaTrackNext=119]="MediaTrackNext",r[r.MediaTrackPrevious=120]="MediaTrackPrevious",r[r.MediaStop=121]="MediaStop",r[r.MediaPlayPause=122]="MediaPlayPause",r[r.LaunchMediaPlayer=123]="LaunchMediaPlayer",r[r.LaunchMail=124]="LaunchMail",r[r.LaunchApp2=125]="LaunchApp2",r[r.MAX_VALUE=126]="MAX_VALUE"})(BW||(BW={}));var WW;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(WW||(WW={}));var VW;(function(r){r[r.Unnecessary=1]="Unnecessary",r[r.Deprecated=2]="Deprecated"})(VW||(VW={}));var HW;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(HW||(HW={}));var zW;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.TEXTAREA=1]="TEXTAREA",r[r.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",r[r.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",r[r.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",r[r.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",r[r.CONTENT_TEXT=6]="CONTENT_TEXT",r[r.CONTENT_EMPTY=7]="CONTENT_EMPTY",r[r.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",r[r.CONTENT_WIDGET=9]="CONTENT_WIDGET",r[r.OVERVIEW_RULER=10]="OVERVIEW_RULER",r[r.SCROLLBAR=11]="SCROLLBAR",r[r.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",r[r.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(zW||(zW={}));var UW;(function(r){r[r.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",r[r.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",r[r.TOP_CENTER=2]="TOP_CENTER"})(UW||(UW={}));var $W;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})($W||($W={}));var jW;(function(r){r[r.Off=0]="Off",r[r.On=1]="On",r[r.Relative=2]="Relative",r[r.Interval=3]="Interval",r[r.Custom=4]="Custom"})(jW||(jW={}));var qW;(function(r){r[r.None=0]="None",r[r.Text=1]="Text",r[r.Blocks=2]="Blocks"})(qW||(qW={}));var KW;(function(r){r[r.Smooth=0]="Smooth",r[r.Immediate=1]="Immediate"})(KW||(KW={}));var GW;(function(r){r[r.Auto=1]="Auto",r[r.Hidden=2]="Hidden",r[r.Visible=3]="Visible"})(GW||(GW={}));var YW;(function(r){r[r.LTR=0]="LTR",r[r.RTL=1]="RTL"})(YW||(YW={}));var ZW;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(ZW||(ZW={}));var XW;(function(r){r[r.File=0]="File",r[r.Module=1]="Module",r[r.Namespace=2]="Namespace",r[r.Package=3]="Package",r[r.Class=4]="Class",r[r.Method=5]="Method",r[r.Property=6]="Property",r[r.Field=7]="Field",r[r.Constructor=8]="Constructor",r[r.Enum=9]="Enum",r[r.Interface=10]="Interface",r[r.Function=11]="Function",r[r.Variable=12]="Variable",r[r.Constant=13]="Constant",r[r.String=14]="String",r[r.Number=15]="Number",r[r.Boolean=16]="Boolean",r[r.Array=17]="Array",r[r.Object=18]="Object",r[r.Key=19]="Key",r[r.Null=20]="Null",r[r.EnumMember=21]="EnumMember",r[r.Struct=22]="Struct",r[r.Event=23]="Event",r[r.Operator=24]="Operator",r[r.TypeParameter=25]="TypeParameter"})(XW||(XW={}));var QW;(function(r){r[r.Deprecated=1]="Deprecated"})(QW||(QW={}));var JW;(function(r){r[r.Hidden=0]="Hidden",r[r.Blink=1]="Blink",r[r.Smooth=2]="Smooth",r[r.Phase=3]="Phase",r[r.Expand=4]="Expand",r[r.Solid=5]="Solid"})(JW||(JW={}));var eV;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(eV||(eV={}));var tV;(function(r){r[r.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",r[r.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",r[r.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",r[r.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(tV||(tV={}));var nV;(function(r){r[r.None=0]="None",r[r.Same=1]="Same",r[r.Indent=2]="Indent",r[r.DeepIndent=3]="DeepIndent"})(nV||(nV={}));let L2=class{static chord(e,t){return po(e,t)}};L2.CtrlCmd=2048;L2.Shift=1024;L2.Alt=512;L2.WinCtrl=256;function joe(){return{editor:void 0,languages:void 0,CancellationTokenSource:Fu,Emitter:Ae,KeyCode:BW,KeyMod:L2,Position:ze,Range:se,Selection:un,SelectionDirection:YW,MarkerSeverity:WW,MarkerTag:VW,Uri:$n,Token:b4}}class O${static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),o=new CZ(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${lTe(Array.from(a))}`,"g");const u=new _E(null,l),d=[];let h=!1,p,v=0,C=0,S=0;e:for(let E=i,k=s;E<=k;E++){const D=e.getLineContent(E),O=D.length;u.reset(0);do if(p=u.next(D),p){let H=p.index,V=p.index+p[0].length;if(H>0){const P=D.charCodeAt(H-1);ba(P)&&H--}if(V+1<O){const P=D.charCodeAt(V-1);ba(P)&&V++}const X=D.substring(H,V),$=o.shouldHighlightNonBasicASCII(X);if($!==0){$===3?v++:$===2?C++:$===1?S++:are();const P=1e3;if(d.length>=P){h=!0;break e}d.push(new se(E,H+1,E,V+1))}}while(p)}return{ranges:d,hasMore:h,ambiguousCharacterCount:v,invisibleCharacterCount:C,nonBasicAsciiCharacterCount:S}}static computeUnicodeHighlightReason(e,t){switch(new CZ(t).shouldHighlightNonBasicASCII(e)){case 0:return null;case 2:return{kind:1};case 3:const s=rm.getPrimaryConfusable(e.codePointAt(0));return{kind:0,confusableWith:String.fromCodePoint(s)};case 1:return{kind:2}}}}function lTe(r,e){return`[${Af(r.map(n=>String.fromCodePoint(n)).join(""))}]`}class CZ{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints)}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of xb.codePoints)e.add(t);if(this.options.ambiguousCharacters)for(const t of rm.getPrimaryConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e){const t=e.codePointAt(0);return this.allowedCodePoints.has(t)?0:this.options.nonBasicASCII?1:this.options.invisibleCharacters&&!(e===" "||e===`
`||e==="	")&&xb.isInvisibleCharacter(t)?2:this.options.ambiguousCharacters&&rm.isAmbiguous(t)?3:0}}var Ky=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class uTe extends nTe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=GM(e.column,KM(t),this._lines[e.lineNumber-1],0);return n?new se(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,s="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=s.substring(a[o].start,a[o].end);o+=1,yield l}else if(i<t.length)s=t[i],a=n(s,e),o=0,i+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],i=this._wordenize(n,t),s=[];for(const o of i)s.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return s}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<i;o++)s.push(this._lines[o]);return s.push(this._lines[i].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!ze.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{let s=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>s&&(n=s,i=!0)}return i?{lineNumber:t,column:n}:e}}class gS{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new uTe($n.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return Ky(this,void 0,void 0,function*(){const i=this._getModel(e);return i?O$.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,i){return Ky(this,void 0,void 0,function*(){const s=this._getModel(e),o=this._getModel(t);if(!s||!o)return null;const a=s.getLinesContent(),l=o.getLinesContent(),d=new tTe(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:i}).computeDiff(),h=d.changes.length>0?!1:this._modelsAreIdentical(s,o);return{quitEarly:d.quitEarly,identical:h,changes:d.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let s=1;s<=n;s++){const o=e.getLineContent(s),a=t.getLineContent(s);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Ky(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const i=[];let s;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return se.compareRangesUsingStarts(o.range,a.range);let l=o.range?0:1,u=a.range?0:1;return l-u});for(let{range:o,text:a,eol:l}of t){if(typeof l=="number"&&(s=l),se.isEmpty(o)&&!a)continue;const u=n.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,n.eol),u===a)continue;if(Math.max(a.length,u.length)>gS._diffLimit){i.push({range:o,text:a});continue}const d=XIe(u,a,!1),h=n.offsetAt(se.lift(o).getStartPosition());for(const p of d){const v=n.positionAt(h+p.originalStart),C=n.positionAt(h+p.originalStart+p.originalLength),S={text:a.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:v.lineNumber,startColumn:v.column,endLineNumber:C.lineNumber,endColumn:C.column}};n.getValueInRange(S.range)!==S.text&&i.push(S)}}return typeof s=="number"&&i.push({eol:s,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),i})}computeLinks(e){return Ky(this,void 0,void 0,function*(){let t=this._getModel(e);return t?aTe(t):null})}textualSuggest(e,t,n,i){return Ky(this,void 0,void 0,function*(){const s=new Ev(!0),o=new RegExp(n,i),a=new Set;e:for(let l of e){const u=this._getModel(l);if(u){for(let d of u.words(o))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>gS._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,i){return Ky(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let u=s.getLineWords(l,o);for(const d of u){if(!isNaN(Number(d.word)))continue;let h=a[d.word];h||(h=[],a[d.word]=h),h.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,n,i,s){return Ky(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return null;let a=new RegExp(i,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=o.getValueInRange(t),u=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!u)return null;let d=o.getValueInRange(u);return yW.INSTANCE.navigateValueSet(t,l,u,d,n)})}loadForeignModule(e,t,n){let o={host:X0e(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(vU(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}gS._diffLimit=1e5;gS._suggestionsLimit=1e4;typeof importScripts=="function"&&(go.monaco=joe());const M$=lr("textResourceConfigurationService"),qoe=lr("textResourcePropertiesService");var cTe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},B5=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},iV=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const yZ=60*1e3,wZ=5*60*1e3;function dw(r,e){let t=r.getModel(e);return!(!t||t.isTooLargeForSyncing())}let rV=class extends Je{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new hTe(this._modelService)),this._logService=n,this._register(Hk.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(i,s)=>dw(this._modelService,i.uri)?this._workerManager.withWorker().then(o=>o.computeLinks(i.uri)).then(o=>o&&{links:o}):Promise.resolve({links:[]})})),this._register(cm.register("*",new dTe(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return dw(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(i=>i.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,i){return this._workerManager.withWorker().then(s=>s.computeDiff(e,t,n,i))}computeMoreMinimalEdits(e,t){if(Rd(t)){if(!dw(this._modelService,e))return Promise.resolve(t);const n=Ev.create(!0),i=this._workerManager.withWorker().then(s=>s.computeMoreMinimalEdits(e,t));return i.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([i,SC(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return dw(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return dw(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};rV=cTe([B5(0,aa),B5(1,M$),B5(2,$v)],rV);class dTe{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return iV(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")dw(this._modelService,e.uri)&&i.push(e.uri);else for(const h of this._modelService.getModels())dw(this._modelService,h.uri)&&(h===e?i.unshift(h.uri):(n.wordBasedSuggestionsMode==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&i.push(h.uri));if(i.length===0)return;const s=hr.getWordDefinition(e.getLanguageId()),o=e.getWordAtPosition(t),a=o?new se(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):se.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(i,o==null?void 0:o.word,s);if(d)return{duration:d.duration,suggestions:d.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}})}}let hTe=class extends Je{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new d2).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(wZ/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>wZ&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Koe(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}};class fTe extends Je{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let i=new d2;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(yZ/2)),this._register(i)}}dispose(){for(let e in this._syncedModels)nr(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>yZ&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new Et;s.add(n.onDidChangeContent(o=>{this._proxy.acceptModelChanged(i.toString(),o)})),s.add(n.onWillDispose(()=>{this._stopModelSync(i)})),s.add(Bi(()=>{this._proxy.acceptRemovedModel(i)})),this._syncedModels[i]=s}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],nr(t)}}class SZ{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class W5{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class Koe extends Je{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new R4(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new qIe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new W5(this)))}catch(e){vW(e),this._worker=new SZ(new gS(new W5(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(vW(e),this._worker=new SZ(new gS(new W5(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new fTe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return iV(this,void 0,void 0,function*(){return this._disposed?Promise.reject(KS()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return iV(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),s=n.source,o=U3(n);return i.textualSuggest(e.map(a=>a.toString()),t,s,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);let s=hr.getWordDefinition(i.getLanguageId()),o=s.source,a=U3(s);return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{let s=this._modelService.getModel(e);if(!s)return null;let o=hr.getWordDefinition(s.getLanguageId()),a=o.source,l=U3(o);return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}const Gy=Object.prototype.hasOwnProperty;class gTe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(NC,0),this._register(uD,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||NC}}class fN extends Je{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new Ae),this.onDidChange=this._onDidChange.event,fN.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new gTe,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(zw.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){fN.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},bEe();const e=zw.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),mo.as(QS.Configuration).registerOverrideIdentifiers(zw.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;Gy.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)NA({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)NA({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)NA({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);nbe(l)||NA({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){Jn(l)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);let o=s!==null&&s.length>0;if(!(o&&s[0]===null)){let a=(o?s[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return Gy.call(this._mimeTypesMap,e)?!0:Gy.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return Gy.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>Gy.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>Gy.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===NC?NC:Gy.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=CEe(e,t);return this.extractModeIds(n.join(","))}}fN.instanceCount=0;class LZ{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new Ae({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class gN extends Je{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new Ae),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new Ae({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,gN.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new fN(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){gN.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return O6(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return O6(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new LZ(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new LZ(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||NC;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||NC;this._onDidEncounterLanguage.fire(t)}}}gN.instanceCount=0;var pTe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},V5=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let sV=class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._modeService=n,this._logService=i,this._hashTable=new fb,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const i=this._modeService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,i);let o;if(s)o=s.metadata,this._logService.getLevel()===gm.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${Ru.getForeground(o)}, fontStyle ${Ru.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let u=t;for(let h=0;u>0&&h<this._legend.tokenModifiers.length;h++)u&1&&l.push(this._legend.tokenModifiers[h]),u=u>>1;u>0&&this._logService.getLevel()===gm.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof d>"u")o=2147483647;else{if(o=0,typeof d.italic<"u"){const h=(d.italic?1:0)<<11;o|=h|1}if(typeof d.bold<"u"){const h=(d.bold?2:0)<<11;o|=h|2}if(typeof d.underline<"u"){const h=(d.underline?4:0)<<11;o|=h|4}if(d.foreground){const h=d.foreground<<14;o|=h|8}o===0&&(o=2147483647)}}else this._logService.getLevel()===gm.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,o),this._logService.getLevel()===gm.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${Ru.getForeground(o)}, fontStyle ${Ru.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};sV=pTe([V5(1,Fs),V5(2,Pl),V5(3,$v)],sV);function Goe(r,e,t){const n=r.data,i=r.data.length/5|0,s=Math.max(Math.ceil(i/1024),400),o=[];let a=0,l=1,u=0;for(;a<i;){const d=a;let h=Math.min(d+s,i);if(h<i){let O=h;for(;O-1>d&&n[5*O]===0;)O--;if(O-1===d){let H=h;for(;H+1<i&&n[5*H]===0;)H++;h=H}else h=O}let p=new Uint32Array((h-d)*4),v=0,C=0,S=0,E=0,k=0;for(;a<h;){const O=5*a,H=n[O],V=n[O+1],X=l+H|0,$=H===0?u+V|0:V,P=n[O+2],z=n[O+3],M=n[O+4],W=e.getMetadata(z,M,t);W!==2147483647&&(C===0&&(C=X),S===X&&k>$&&(e.warnOverlappingSemanticTokens(X,$+1),E<$?p[v-4+2]=$:v-=4),p[v]=X-C,p[v+1]=$,p[v+2]=$+P,p[v+3]=W,v+=4,S=X,E=$,k=$+P),l=X,u=$,a++}v!==p.length&&(p=p.subarray(0,v));const D=new cR(C,new uR(p));o.push(D)}return o}class mTe{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}class fb{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=fb._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<fb._SIZES.length?2/3*this._currentLength:0),this._elements=[],fb._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let s=this._elements[i];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=fb._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<fb._SIZES.length?2/3*this._currentLength:0),this._elements=[],fb._nullOutEntries(this._elements,this._currentLength);for(const o of s){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new mTe(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}fb._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function _Te(r){for(let e=0,t=r.length;e<t;e+=4){const n=r[e+0],i=r[e+1],s=r[e+2],o=r[e+3];r[e+0]=o,r[e+1]=s,r[e+2]=i,r[e+3]=n}}function vTe(r){const e=new Uint8Array(r.buffer,r.byteOffset,r.length*4);return kie()||_Te(e),h4.wrap(e)}function Yoe(r){const e=new Uint32Array(bTe(r));let t=0;if(e[t++]=r.id,r.type==="full")e[t++]=1,e[t++]=r.data.length,e.set(r.data,t),t+=r.data.length;else{e[t++]=2,e[t++]=r.deltas.length;for(const n of r.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return vTe(e)}function bTe(r){let e=0;if(e+=1+1,r.type==="full")e+=1+r.data.length;else{e+=1,e+=(1+1+1)*r.deltas.length;for(const t of r.deltas)t.data&&(e+=t.data.length)}return e}var MC=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function P4(r){return r&&!!r.data}function Zoe(r){return r&&Array.isArray(r.edits)}class CTe{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function Xoe(r){return px.has(r)}function yTe(r){const e=px.orderedGroups(r);return e.length>0?e[0]:[]}function Qoe(r,e,t,n){return MC(this,void 0,void 0,function*(){const i=yTe(r),s=yield Promise.all(i.map(o=>MC(this,void 0,void 0,function*(){let a,l=null;try{a=yield o.provideDocumentSemanticTokens(r,o===e?t:null,n)}catch(u){l=u,a=null}return(!a||!P4(a)&&!Zoe(a))&&(a=null),new CTe(o,a,l)})));for(const o of s){if(o.error)throw o.error;if(o.tokens)return o}return s.length>0?s[0]:null})}function wTe(r){const e=px.orderedGroups(r);return e.length>0?e[0]:null}class STe{constructor(e,t){this.provider=e,this.tokens=t}}function LTe(r){return v4.has(r)}function Joe(r){const e=v4.orderedGroups(r);return e.length>0?e[0]:[]}function R$(r,e,t){return MC(this,void 0,void 0,function*(){const n=Joe(r),i=yield Promise.all(n.map(s=>MC(this,void 0,void 0,function*(){let o;try{o=yield s.provideDocumentRangeSemanticTokens(r,e,t)}catch(a){Ml(a),o=null}return(!o||!P4(o))&&(o=null),new STe(s,o)})));for(const s of i)if(s.tokens)return s;return i.length>0?i[0]:null})}Ki.registerCommand("_provideDocumentSemanticTokensLegend",(r,...e)=>MC(void 0,void 0,void 0,function*(){const[t]=e;$r(t instanceof $n);const n=r.get(aa).getModel(t);if(!n)return;const i=wTe(n);return i?i[0].getLegend():r.get(js).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Ki.registerCommand("_provideDocumentSemanticTokens",(r,...e)=>MC(void 0,void 0,void 0,function*(){const[t]=e;$r(t instanceof $n);const n=r.get(aa).getModel(t);if(!n)return;if(!Xoe(n))return r.get(js).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const i=yield Qoe(n,null,null,ki.None);if(!i)return;const{provider:s,tokens:o}=i;if(!o||!P4(o))return;const a=Yoe({id:0,type:"full",data:o.data});return o.resultId&&s.releaseDocumentSemanticTokens(o.resultId),a}));Ki.registerCommand("_provideDocumentRangeSemanticTokensLegend",(r,...e)=>MC(void 0,void 0,void 0,function*(){const[t,n]=e;$r(t instanceof $n);const i=r.get(aa).getModel(t);if(!i)return;const s=Joe(i);if(s.length===0)return;if(s.length===1)return s[0].getLegend();if(!n||!se.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),s[0].getLegend();const o=yield R$(i,se.lift(n),ki.None);if(o)return o.provider.getLegend()}));Ki.registerCommand("_provideDocumentRangeSemanticTokens",(r,...e)=>MC(void 0,void 0,void 0,function*(){const[t,n]=e;$r(t instanceof $n),$r(se.isIRange(n));const i=r.get(aa).getModel(t);if(!i)return;const s=yield R$(i,se.lift(n),ki.None);if(!(!s||!s.tokens))return Yoe({id:0,type:"full",data:s.tokens.data})}));var ETe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yy=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function V1(r){return r.toString()}function EZ(r){const e=new m4,t=r.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class xTe{constructor(e,t,n){this._modelEventListeners=new Et,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const DTe=Hc||zi?1:2;class ITe{constructor(e,t,n,i,s,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=s,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let WR=class PT extends Je{constructor(e,t,n,i,s,o,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=i,this._undoRedoService=s,this._modeService=o,this._languageConfigurationService=a,this._onModelAdded=this._register(new Ae),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Ae),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Ae),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new kTe(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new TTe(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let i=Nu.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const v=parseInt(e.editor.tabSize,10);isNaN(v)||(i=v),i<1&&(i=1)}let s=i;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const v=parseInt(e.editor.indentSize,10);isNaN(v)||(s=v),s<1&&(s=1)}let o=Nu.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=DTe;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let u=Nu.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(u=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let d=Nu.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=Nu.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let p=Nu.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(p={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:o,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:u,largeFileOptimizations:h,bracketPairColorizationOptions:p}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:_f===3||_f===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let i=this._modelCreationOptionsByLanguageAndResource[e+t];if(!i){const s=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);i=PT._readModelOptions({editor:s,eol:o},n),this._modelCreationOptionsByLanguageAndResource[e+t]=i}return i}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n],o=this._models[s],a=o.model.getLanguageId(),l=o.model.uri,u=e[a+l],d=this.getCreationOptions(a,l,o.model.isForSimpleWidget);PT._setModelOptionsForModel(o.model,d,u)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Xg(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(V1(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(V1(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(V1(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const s=this.getCreationOptions(t,n,i),o=new Vd(e,s,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(V1(n))){const u=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),h=EZ(o)===u.sha1;if(h||u.sharesUndoRedoStack){for(const p of d.past)cb(p)&&p.matchesResource(n)&&p.setModel(o);for(const p of d.future)cb(p)&&p.matchesResource(n)&&p.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,p=>cb(p)&&p.matchesResource(n)),h&&(o._overwriteVersionId(u.versionId),o._overwriteAlternativeVersionId(u.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(u.initialUndoRedoSnapshot))}else u.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(u.initialUndoRedoSnapshot)}const a=V1(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new xTe(o,u=>this._onWillDispose(u),(u,d)=>this._onDidChangeLanguage(u,d));return this._models[a]=l,l}createModel(e,t,n,i=!1){let s;return t?(s=this._createModelData(e,t.languageId,n,i),this.setMode(s.model,t)):s=this._createModelData(e,uD,n,i),this._onModelAdded.fire(s.model),s.model}setMode(e,t){if(!t)return;const n=this._models[V1(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=V1(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===wi.file||e.scheme===wi.vscodeRemote||e.scheme===wi.userData||e.scheme===wi.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=V1(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const u of l.past)cb(u)&&u.matchesResource(e.uri)&&(s=!0,o+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of l.future)cb(u)&&u.matchesResource(e.uri)&&(s=!0,o+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=PT.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!i&&o>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>cb(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new ITe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,o,EZ(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);PT._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldModeId:n})}};WR.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;WR=ETe([Yy(0,es),Yy(1,qoe),Yy(2,Fs),Yy(3,$v),Yy(4,b2),Yy(5,Pl),Yy(6,v2)],WR);const P$="editor.semanticHighlighting";function oV(r,e,t){var n;const i=(n=t.getValue(P$,{overrideIdentifier:r.getLanguageId(),resource:r.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}class TTe extends Je{constructor(e,t,n,i){super(),this._watchers=Object.create(null),this._semanticStyling=i;const s=l=>{this._watchers[l.uri.toString()]=new Ew(l,t,this._semanticStyling)},o=(l,u)=>{u.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){const u=this._watchers[l.uri.toString()];oV(l,t,n)?u||s(l):u&&o(l,u)}};this._register(e.onModelAdded(l=>{oV(l,t,n)&&s(l)})),this._register(e.onModelRemoved(l=>{const u=this._watchers[l.uri.toString()];u&&o(l,u)})),this._register(n.onDidChangeConfiguration(l=>{l.affectsConfiguration(P$)&&a()})),this._register(t.onDidColorThemeChange(a))}}class kTe extends Je{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new sV(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class NTe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class Ew extends Je{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new Qr(()=>this._fetchDocumentSemanticTokensNow(),Ew.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const i=()=>{nr(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const s of px.all(e))typeof s.onDidChange=="function"&&this._documentProvidersChangeListeners.push(s.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};i(),this._register(px.onDidChange(()=>{i(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(s=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Xoe(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new Fu,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=Qoe(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const s=[],o=this._model.onDidChangeContent(a=>{s.push(a)});i.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:l,tokens:u}=a,d=this._semanticStyling.get(l);this._setDocumentSemanticTokens(l,u||null,d,s)}},a=>{a&&(zv(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||Jn(a),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),s.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,i){const s=this._currentDocumentResponse,o=()=>{i.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),o();return}if(Zoe(t)){if(!s){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const p of t.edits)a+=(p.data?p.data.length:0)-p.deleteCount;const l=s.data,u=new Uint32Array(l.length+a);let d=l.length,h=u.length;for(let p=t.edits.length-1;p>=0;p--){const v=t.edits[p],C=d-(v.start+v.deleteCount);C>0&&(Ew._copy(l,d-C,u,h-C,C),h-=C),v.data&&(Ew._copy(v.data,0,u,h-v.data.length,v.data.length),h-=v.data.length),d=v.start}d>0&&Ew._copy(l,0,u,0,d),t={resultId:t.resultId,data:u}}}if(P4(t)){this._currentDocumentResponse=new NTe(e,t.resultId,t.data);const a=Goe(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const u of a)for(const d of l.changes)u.applyEdit(d.range,d.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);o()}}Ew.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class ATe{constructor(e,t,n,i,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=s}}function OTe(r){if(!r||!Array.isArray(r))return[];let e=[],t=0;for(let n=0,i=r.length;n<i;n++){let s=r[n],o=-1;if(typeof s.fontStyle=="string"){o=0;let u=s.fontStyle.split(" ");for(let d=0,h=u.length;d<h;d++)switch(u[d]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new ATe(s.token||"",n,o,a,l)}return e}function MTe(r,e){r.sort((d,h)=>{let p=WTe(d.token,h.token);return p!==0?p:d.index-h.index});let t=0,n="000000",i="ffffff";for(;r.length>=1&&r[0].token==="";){let d=r.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(i=d.background)}let s=new PTe;for(let d of e)s.getId(d);let o=s.getId(n),a=s.getId(i),l=new F$(t,o,a),u=new B$(l);for(let d=0,h=r.length;d<h;d++){let p=r[d];u.insert(p.token,p.fontStyle,s.getId(p.foreground),s.getId(p.background))}return new eae(s,u)}const RTe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class PTe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(RTe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=We.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class eae{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(OTe(e),t)}static createFromParsedTokenTheme(e,t){return MTe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let i=this._match(t),s=BTe(t);n=(i.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const FTe=/\b(comment|string|regex|regexp)\b/;function BTe(r){let e=r.match(FTe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function WTe(r,e){return r<e?-1:r>e?1:0}class F${constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new F$(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class B${constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));let s=this._children.get(n);return typeof s<"u"?s.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}let s=e.indexOf("."),o,a;s===-1?(o=e,a=""):(o=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(o);typeof l>"u"&&(l=new B$(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,i)}}function VTe(r){let e=[];for(let t=1,n=r.length;t<n;t++){let i=r[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const HTe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Df]:"#FFFFFE",[g2]:"#000000",[WU]:"#E5EBF1",[S4]:"#D3D3D3",[L4]:"#939393",[VU]:"#ADD6FF4D"}},zTe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Df]:"#1E1E1E",[g2]:"#D4D4D4",[WU]:"#3A3D41",[S4]:"#404040",[L4]:"#707070",[VU]:"#ADD6FF26"}},UTe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Df]:"#000000",[g2]:"#FFFFFF",[S4]:"#FFFFFF",[L4]:"#FFFFFF"}};function $Te(){const r=new Ae,e=GDe();return e.onDidChange(()=>r.fire()),{onDidChange:r.event,getCSS(){const t={},n=s=>{let o=s.defaults;for(;vs.isThemeIcon(o);){const l=e.getIcon(o.id);if(!l)return;o=l.defaults}const a=o.fontId;if(a){const l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${s.id}:before { content: '${o.fontCharacter}'; font-family: ${bG(a)}; }`}return`.codicon-${s.id}:before { content: '${o.fontCharacter}'; }`},i=[];for(let s of e.getIcons()){const o=n(s);o&&i.push(o)}for(let s in t){const a=t[s].definition.src.map(l=>`${eS(l.location)} format('${l.format}')`).join(", ");i.push(`@font-face { src: ${a}; font-family: ${bG(s)}; font-display: block; }`)}return i.join(`
`)}}}const xw="vs",VR="vs-dark",QE="hc-black",tae=mo.as(jre.ColorContribution),jTe=mo.as(_re.ThemingContribution);class nae{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(qO(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,We.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=aV(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,We.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=tae.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case xw:return Zg.LIGHT;case QE:return Zg.HIGH_CONTRAST;default:return Zg.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let s=aV(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const s={token:""};n&&(s.foreground=n),i&&(s.background=i),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=eae.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Ru.getForeground(s),a=Ru.getFontStyle(s);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function qO(r){return r===xw||r===VR||r===QE}function aV(r){switch(r){case xw:return HTe;case VR:return zTe;case QE:return UTe}}function H5(r){let e=aV(r);return new nae(r,e)}class qTe extends Je{constructor(){super(),this._onColorThemeChange=this._register(new Ae),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(xw,H5(xw)),this._knownThemes.set(VR,H5(VR)),this._knownThemes.set(QE,H5(QE));const e=$Te();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(xw),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),V0e("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return jP(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=kf(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),Je.None}_registerShadowDomContainer(e){const t=kf(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!qO(t.base)&&!qO(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new nae(e,t)),qO(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(xw),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(QE):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};jTe.getThemingParticipants().forEach(o=>o(this._theme,n,this._environment));const i=[];for(const o of tae.getColors()){const a=this._theme.getColor(o.id,!0);a&&i.push(`${$re(o.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${i.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(VTe(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Qs.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var KTe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},GTe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const gk="data-keybinding-context";let W$=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class yx extends W${constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}yx.INSTANCE=new yx;class pN extends W${constructor(e,t,n){super(e,null),this._configurationService=t,this._values=qE.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===6){const s=Array.from(Xi.map(this._values,([o])=>o));this._values.clear(),n.fire(new DZ(s))}else{const s=[];for(const o of i.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...Xi.map(l,([u])=>u)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new DZ(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(pN._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(pN._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}pN._keyPrefix="config.";class YTe{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class xZ{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class DZ{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class ZTe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class iae{constructor(e){this._onDidChangeContext=new IM({merge:t=>new ZTe(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new YTe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new XTe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return XE.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new xZ(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new xZ(e))}getContext(e){return this._isDisposed?yx.INSTANCE:this.getContextValuesContainer(QTe(e))}}let lV=class extends iae{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Et,this._lastContextId=0;const t=new pN(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?yx.INSTANCE:this._contexts.get(e)||yx.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new W$(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};lV=KTe([GTe(0,es)],lV);class XTe extends iae{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new uc,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(gk)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(gk,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(gk),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?yx.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function QTe(r){for(;r;){if(r.hasAttribute(gk)){const e=r.getAttribute(gk);return e?parseInt(e,10):NaN}r=r.parentElement}return 0}Ki.registerCommand(vbe,function(r,e,t){r.get(Xn).createKey(String(e),t)});Ki.registerCommand({id:"getContextKeyInfo",handler(){return[...gn.all()].sort((r,e)=>r.key.localeCompare(e.key))},description:{description:L("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Ki.registerCommand("_generateContextKeyInfo",function(){const r=[],e=new Set;for(let t of gn.all())e.has(t.key)||(e.add(t.key),r.push(t));r.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(r,void 0,2))});function IZ(r){let e=r.definition;for(;e instanceof Ie;)e=e.definition;return`.codicon-${r.id}:before { content: '${e.fontCharacter}'; }`}var iu;(function(r){function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),l=Math.min(s.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}r.intersect=e;function t(s){return s.end-s.start<=0}r.isEmpty=t;function n(s,o){return!t(e(s,o))}r.intersects=n;function i(s,o){const a=[],l={start:s.start,end:Math.min(o.start,s.end)},u={start:Math.max(o.end,s.start),end:s.end};return t(l)||a.push(l),t(u)||a.push(u),a}r.relativeComplement=i})(iu||(iu={}));var sC;(function(r){r[r.AVOID=0]="AVOID",r[r.ALIGN=1]="ALIGN"})(sC||(sC={}));function wE(r,e,t){const n=t.mode===sC.ALIGN?t.offset:t.offset+t.size,i=t.mode===sC.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=r-n?n:e<=i?i-e:Math.max(r-e,0):e<=i?i-e:e<=r-n?n:0}class wx extends Je{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=Je.None,this.toDisposeOnSetContainer=Je.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Ct(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Rc(this.view),this.setContainer(e,t),this._register(Bi(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=Ct(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=JTe,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Ct("slot"))}else this.container.appendChild(this.view);const i=new Et;wx.BUBBLE_UP_EVENTS.forEach(s=>{i.add(ja(this.container,s,o=>{this.onDOMEvent(o,!1)}))}),wx.BUBBLE_DOWN_EVENTS.forEach(s=>{i.add(ja(this.container,s,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){this.isVisible()&&this.hide(),Ca(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",yh(this.view),this.toDisposeOnClean=e.render(this.view)||Je.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Lv&&UP.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(tre(e)){let h=su(e);t={top:h.top,left:h.left,width:h.width,height:h.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Mg(this.view),i=x6(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,u;if(a===0){const h={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},p={offset:t.left,size:t.width,position:o===0?0:1,mode:sC.ALIGN};l=wE(window.innerHeight,i,h)+window.pageYOffset,iu.intersects({start:l,end:l+i},{start:h.offset,end:h.offset+h.size})&&(p.mode=sC.AVOID),u=wE(window.innerWidth,n,p)}else{const h={offset:t.left,size:t.width,position:o===0?0:1},p={offset:t.top,size:t.height,position:s===0?0:1,mode:sC.ALIGN};u=wE(window.innerWidth,n,h),iu.intersects({start:u,end:u+n},{start:h.offset,end:h.offset+h.size})&&(p.mode=sC.AVOID),l=wE(window.innerHeight,i,p)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=su(this.container);this.view.style.top=`${l-(this.useFixedPosition?su(this.view).top:d.top)}px`,this.view.style.left=`${u-(this.useFixedPosition?su(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Rc(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Eb(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}wx.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];wx.BUBBLE_DOWN_EVENTS=["click"];let JTe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function V$(...r){return function(e,t){for(let n=0,i=r.length;n<i;n++){const s=r[n](e,t);if(s)return s}return null}}const F4=eke.bind(void 0,!0);function eke(r,e,t){if(!t||t.length<e.length)return null;let n;return r?n=wU(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function rae(r,e){const t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function tke(r,e){return uV(r.toLowerCase(),e.toLowerCase(),0,0)}function uV(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]===e[n]){let i=null;return(i=uV(r,e,t+1,n+1))?U$({start:n,end:n+1},i):null}return uV(r,e,t,n+1)}function H$(r){return 97<=r&&r<=122}function B4(r){return 65<=r&&r<=90}function z$(r){return 48<=r&&r<=57}function sae(r){return r===32||r===9||r===10||r===13}const oae=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(r=>oae.add(r.charCodeAt(0)));function HR(r){return sae(r)||oae.has(r)}function nke(r,e){return r===e||HR(r)&&HR(e)}function aae(r){return H$(r)||B4(r)||z$(r)}function U$(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function lae(r,e){for(let t=e;t<r.length;t++){const n=r.charCodeAt(t);if(B4(n)||z$(n)||t>0&&!aae(r.charCodeAt(t-1)))return t}return r.length}function cV(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]!==e[n].toLowerCase())return null;{let i=null,s=n+1;for(i=cV(r,e,t+1,n+1);!i&&(s=lae(e,s))<e.length;)i=cV(r,e,t+1,s),s++;return i===null?null:U$({start:n,end:n+1},i)}}function ike(r){let e=0,t=0,n=0,i=0,s=0;for(let d=0;d<r.length;d++)s=r.charCodeAt(d),B4(s)&&e++,H$(s)&&t++,aae(s)&&n++,z$(s)&&i++;const o=e/r.length,a=t/r.length,l=n/r.length,u=i/r.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:u}}function rke(r){const{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function ske(r){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=r;return t>.2&&e<.8&&n>.6&&i<.2}function oke(r){let e=0,t=0,n=0,i=0;for(let s=0;s<r.length;s++)n=r.charCodeAt(s),B4(n)&&e++,H$(n)&&t++,sae(n)&&i++;return(e===0||t===0)&&i===0?r.length<=30:e<=5}function uae(r,e){if(!e||(e=e.trim(),e.length===0)||!oke(r)||e.length>60)return null;const t=ike(e);if(!ske(t)){if(!rke(t))return null;e=e.toLowerCase()}let n=null,i=0;for(r=r.toLowerCase();i<e.length&&(n=cV(r,e,0,i))===null;)i=lae(e,i+1);return n}function ake(r,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(r=r.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=dV(r,e,0,i,t))===null;)i=cae(e,i+1);return n}function dV(r,e,t,n,i){if(t===r.length)return[];if(n===e.length)return null;if(nke(r.charCodeAt(t),e.charCodeAt(n))){let s=null,o=n+1;if(s=dV(r,e,t+1,n+1,i),!i)for(;!s&&(o=cae(e,o))<e.length;)s=dV(r,e,t+1,o,i),o++;return s===null?null:U$({start:n,end:n+1},s)}else return null}function cae(r,e){for(let t=e;t<r.length;t++)if(HR(r.charCodeAt(t))||t>0&&HR(r.charCodeAt(t-1)))return t;return r.length}const lke=V$(F4,uae,rae),uke=V$(F4,uae,tke),TZ=new qC(1e4);function kZ(r,e,t=!1){if(typeof r!="string"||typeof e!="string")return null;let n=TZ.get(r);n||(n=new RegExp(ebe(r),"i"),TZ.set(r,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?uke(r,e):lke(r,e)}function cke(r,e,t,n,i,s){const o=Math.min(13,r.length);for(;t<o;t++){const a=Sx(r,e,t,n,i,s,!1);if(a)return a}return[0,s]}function W4(r){if(typeof r>"u")return[];const e=[],t=r[1];for(let n=r.length-1;n>1;n--){const i=r[n]+t,s=e[e.length-1];s&&s.end===i?s.end=i+1:e.push({start:i,end:i+1})}return e}const oC=128;function $$(){const r=[],e=[];for(let t=0;t<=oC;t++)e[t]=0;for(let t=0;t<=oC;t++)r.push(e.slice(0));return r}function dae(r){const e=[];for(let t=0;t<=r;t++)e[t]=0;return e}const hae=dae(2*oC),hV=dae(2*oC),Q0=$$(),Zy=$$(),HA=$$();function zA(r,e){if(e<0||e>=r.length)return!1;const t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!HM(t)}}function NZ(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function KO(r,e,t){return e[r]!==t[r]}function dke(r,e,t,n,i,s,o=!1){for(;e<t&&i<s;)r[e]===n[i]&&(o&&(hae[e]=i),e+=1),i+=1;return e===t}var Em;(function(r){r.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}r.isDefault=e})(Em||(Em={}));function Sx(r,e,t,n,i,s,o){const a=r.length>oC?oC:r.length,l=n.length>oC?oC:n.length;if(t>=a||s>=l||a-t>l-s||!dke(e,t,a,i,s,l,!0))return;hke(a,l,t,s,e,i);let u=1,d=1,h=t,p=s;const v=[!1];for(u=1,h=t;h<a;u++,h++){const D=hae[h],O=hV[h],H=h+1<a?hV[h+1]:l;for(d=D-s+1,p=D;p<H;d++,p++){let V=Number.MIN_SAFE_INTEGER,X=!1;p<=O&&(V=fke(r,e,h,t,n,i,p,l,s,Q0[u-1][d-1]===0,v));let $=0;V!==Number.MAX_SAFE_INTEGER&&(X=!0,$=V+Zy[u-1][d-1]);const P=p>D,z=P?Zy[u][d-1]+(Q0[u][d-1]>0?-5:0):0,M=p>D+1&&Q0[u][d-1]>0,W=M?Zy[u][d-2]+(Q0[u][d-2]>0?-5:0):0;if(M&&(!P||W>=z)&&(!X||W>=$))Zy[u][d]=W,HA[u][d]=3,Q0[u][d]=0;else if(P&&(!X||z>=$))Zy[u][d]=z,HA[u][d]=2,Q0[u][d]=0;else if(X)Zy[u][d]=$,HA[u][d]=1,Q0[u][d]=Q0[u-1][d-1]+1;else throw new Error("not possible")}}if(!v[0]&&!o)return;u--,d--;const C=[Zy[u][d],s];let S=0,E=0;for(;u>=1;){let D=d;do{const O=HA[u][D];if(O===3)D=D-2;else if(O===2)D=D-1;else break}while(D>=1);S>1&&e[t+u-1]===i[s+d-1]&&!KO(D+s-1,n,i)&&S+1>Q0[u][D]&&(D=d),D===d?S++:S=1,E||(E=D),u--,d=D-1,C.push(d)}l===a&&(C[0]+=2);const k=E-a;return C[0]-=k,C}function hke(r,e,t,n,i,s){let o=r-1,a=e-1;for(;o>=t&&a>=n;)i[o]===s[a]&&(hV[o]=a,o--),a--}function fke(r,e,t,n,i,s,o,a,l,u,d){if(e[t]!==s[o])return Number.MIN_SAFE_INTEGER;let h=1,p=!1;return o===t-n?h=r[t]===i[o]?7:5:KO(o,i,s)&&(o===0||!KO(o-1,i,s))?(h=r[t]===i[o]?7:5,p=!0):zA(s,o)&&(o===0||!zA(s,o-1))?h=5:(zA(s,o-1)||NZ(s,o-1))&&(h=5,p=!0),h>1&&t===n&&(d[0]=!0),p||(p=KO(o,i,s)||zA(s,o-1)||NZ(s,o-1)),t===n?o>l&&(h-=p?3:5):u?h+=p?2:0:h+=p?0:1,o+1===a&&(h-=p?3:5),h}function gke(r,e,t,n,i,s,o){return pke(r,e,t,n,i,s,!0,o)}function pke(r,e,t,n,i,s,o,a){let l=Sx(r,e,t,n,i,s,a);if(l&&!o)return l;if(r.length>=3){const u=Math.min(7,r.length-1);for(let d=t+1;d<u;d++){const h=mke(r,d);if(h){const p=Sx(h,h.toLowerCase(),t,n,i,s,a);p&&(p[0]-=3,(!l||p[0]>l[0])&&(l=p))}}}return l}function mke(r,e){if(e+1>=r.length)return;const t=r[e],n=r[e+1];if(t!==n)return r.slice(0,e)+n+t+r.slice(e+2)}const pk="$(",j$=new RegExp(`\\$\\(${Fc.iconNameExpression}(?:${Fc.iconModifierExpression})?\\)`,"g"),_ke=new RegExp(Fc.iconNameCharacter),vke=new RegExp(`(\\\\)?${j$.source}`,"g");function bke(r){return r.replace(vke,(e,t)=>t?e:`\\${e}`)}const Cke=new RegExp(`\\\\${j$.source}`,"g");function yke(r){return r.replace(Cke,e=>`\\${e}`)}const wke=new RegExp(`(\\s)?(\\\\)?${j$.source}(\\s)?`,"g");function q$(r){return r.indexOf(pk)===-1?r:r.replace(wke,(e,t,n,i)=>n?e:t||i||"")}function UA(r){const e=r.indexOf(pk);return e===-1?{text:r}:Ske(r,e)}function Ske(r,e){const t=[];let n="";function i(p){if(p){n+=p;for(const v of p)t.push(a)}}let s=-1,o="",a=0,l,u,d=e;const h=r.length;for(i(r.substr(0,e));d<h;){if(l=r[d],u=r[d+1],l===pk[0]&&u===pk[1])s=d,i(o),o=pk,d++;else if(l===")"&&s!==-1){const p=d-s+1;a+=p,s=-1,o=""}else s!==-1?_ke.test(l)?o+=l:(i(o),s=-1,o=""):i(l);d++}return i(o),{text:n,iconOffsets:t}}function $A(r,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return kZ(r,n,t);const s=CU(n," "),o=n.length-s.length,a=kZ(r,s,t);if(a)for(const l of a){const u=i[l.start+o]+o;l.start+=u,l.end+=u}return a}const fV=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,z5=/(&amp;)?(&amp;)([^\s&])/g;var zR;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(zR||(zR={}));let fae=class GO extends Nv{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const i=document.createElement("div");i.classList.add("monaco-menu"),i.setAttribute("role","presentation"),super(i,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,s),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...zi||Hc?[10]:[]],keyDown:!0}}),this.menuElement=i,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Et),this._register(Rr.addTarget(i)),St(i,xn.KEY_DOWN,a=>{new Ts(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(St(i,xn.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){Ir.stop(a,!0);const u=this.mnemonics.get(l);if(u.length===1&&(u[0]instanceof AZ&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(a)),u.length>1){const d=u.shift();d&&d.container&&(this.focusItemByElement(d.container),u.push(d)),this.mnemonics.set(l,u)}}})),Hc&&this._register(St(i,xn.KEY_DOWN,a=>{const l=new Ts(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ir.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ir.stop(a,!0))})),this._register(St(this.domNode,xn.MOUSE_OUT,a=>{let l=a.relatedTarget;Eb(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(St(this.actionsList,xn.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Eb(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(l),u!==this.focusedItem&&this.updateFocus()}}})),this._register(Rr.addTarget(this.actionsList)),this._register(St(this.actionsList,as.Tap,a=>{let l=a.initialTarget;if(!(!l||!Eb(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(l),u!==this.focusedItem&&this.updateFocus()}}}));let s={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new C2(i,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(St(i,as.Change,a=>{Ir.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(St(o,xn.MOUSE_UP,a=>{a.preventDefault()})),i.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof U5)).forEach((a,l,u)=>{a.updatePositionInSet(l+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(jP(e)?this.styleSheet=kf(e):(GO.globalStyleSheet||(GO.globalStyleSheet=kf()),this.styleSheet=GO.globalStyleSheet)),this.styleSheet.textContent=Eke(t)}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",i=e.backgroundColor?`${e.backgroundColor}`:"",s=e.borderColor?`1px solid ${e.borderColor}`:"",o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=s,this.domNode.style.color=n,this.domNode.style.backgroundColor=i,t.style.boxShadow=o,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof gV||a instanceof U5)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Yg)return new U5(t.context,e,{icon:!0});if(e instanceof qP){const i=new AZ(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const s=i.getMnemonic();if(s&&i.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(i),this.mnemonics.set(s,o)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(i.keybinding=a)}}const s=new gV(t.context,e,i);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}};class gV extends tv{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let i=this.getAction().label;if(i){let s=fV.exec(i);s&&(this.mnemonic=(s[1]?s[1]:s[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Qr(()=>{this.element&&(this._register(St(this.element,xn.MOUSE_UP,i=>{if(Ir.stop(i,!0),Bd){if(new yf(i).rightButton)return;this.onClick(i)}else setTimeout(()=>{this.onClick(i)},0)})),this._register(St(this.element,xn.CONTEXT_MENU,i=>{Ir.stop(i,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=st(this.element,Ct("a.action-menu-item")),this._action.id===Yg.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=st(this.item,Ct("span.menu-item-check"+Ie.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=st(this.item,Ct("span.action-label")),this.options.label&&this.options.keybinding&&(st(this.item,Ct("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){Ca(this.label);let e=q$(this.getAction().label);if(e){const t=Lke(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=fV.exec(e);if(n){e=bU(e),z5.lastIndex=0;let i=z5.exec(e);for(;i&&i[1];)i=z5.exec(e);const s=o=>o.replace(/&amp;&amp;/g,"&amp;");i?this.label.append(CU(s(e.substr(0,i.index))," "),Ct("u",{"aria-hidden":"true"},i[3]),ure(s(e.substr(i.index+i[0].length))," ")):this.label.innerText=s(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=L({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=i)}style(e){this.menuStyle=e,this.applyStyle()}}class AZ extends gV{constructor(e,t,n,i){super(e,e,i),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new Et),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:zR.Right,this.showScheduler=new Qr(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Qr(()=>{this.element&&!Eb(RE(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=st(this.item,Ct("span.submenu-indicator"+Ie.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(St(this.element,xn.KEY_UP,t=>{let n=new Ts(t);(n.equals(17)||n.equals(3))&&(Ir.stop(t,!0),this.createSubmenu(!0))})),this._register(St(this.element,xn.KEY_DOWN,t=>{let n=new Ts(t);RE()===this.item&&(n.equals(17)||n.equals(3))&&Ir.stop(t,!0)})),this._register(St(this.element,xn.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(St(this.element,xn.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(St(this.element,xn.FOCUS_OUT,t=>{this.element&&!Eb(RE(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){Ir.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const s={top:0,left:0};return s.left=wE(e.width,t.width,{position:i===zR.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=wE(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=st(this.element,Ct("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new fae(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new KP],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const i=this.element.getBoundingClientRect(),s={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new us(window.innerWidth,window.innerHeight),us.lift(o),s,this.expandDirection);this.submenuContainer.style.left=`${l-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(St(this.submenuContainer,xn.KEY_UP,u=>{new Ts(u).equals(15)&&(Ir.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(St(this.submenuContainer,xn.KEY_DOWN,u=>{new Ts(u).equals(15)&&Ir.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class U5 extends oN{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function Lke(r){const e=fV,t=e.exec(r);if(!t)return r;const n=!t[1];return r.replace(e,n?"$2$3":"").trim()}function Eke(r){let e=`
.monaco-menu {
	font-size: 13px;

}

${IZ(Ie.menuSelection)}
${IZ(Ie.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
`;const t=r.scrollbarShadow;t&&(e+=`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=r.scrollbarSliderBackground;n&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const i=r.scrollbarSliderHoverBackground;i&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);const s=r.scrollbarSliderActiveBackground;return s&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${s};
			}
		`),e}function om(r,e){const t=Object.create(null);for(let n in e){const i=e[n];i&&(t[n]=ib(i,r))}return t}function K$(r,e,t){function n(){const i=om(r.getColorTheme(),e);typeof t=="function"?t(i):t.style(i)}return n(),r.onDidColorThemeChange(n)}function xke(r,e,t){return K$(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||JT,badgeForeground:(t==null?void 0:t.badgeForeground)||ek,badgeBorder:Ao},r)}function pS(r,e,t){return K$(e,Object.assign(Object.assign({},V4),t||{}),r)}const V4={listFocusBackground:MCe,listFocusForeground:RCe,listFocusOutline:PCe,listActiveSelectionBackground:Mw,listActiveSelectionForeground:pC,listActiveSelectionIconForeground:MO,listFocusAndSelectionBackground:Mw,listFocusAndSelectionForeground:pC,listInactiveSelectionBackground:FCe,listInactiveSelectionIconForeground:WCe,listInactiveSelectionForeground:BCe,listInactiveFocusBackground:VCe,listInactiveFocusOutline:HCe,listHoverBackground:zCe,listHoverForeground:UCe,listDropBackground:$Ce,listSelectionOutline:Uc,listHoverOutline:Uc,listFilterWidgetBackground:jCe,listFilterWidgetOutline:qCe,listFilterWidgetNoMatchesOutline:KCe,listMatchesShadow:IC,treeIndentGuidesStroke:GCe,tableColumnsBorder:YCe,tableOddRowsBackgroundColor:ZCe},Dke={shadowColor:IC,borderColor:JCe,foregroundColor:eye,backgroundColor:tye,selectionForegroundColor:nye,selectionBackgroundColor:iye,selectionBorderColor:rye,separatorColor:sye,scrollbarShadow:sD,scrollbarSliderBackground:HE,scrollbarSliderHoverBackground:zE,scrollbarSliderActiveBackground:UE};function Ike(r,e,t){return K$(e,Object.assign(Object.assign({},Dke),t),r)}class Tke{constructor(e,t,n,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.themeService=s,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,i=tre(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{let o=e.getMenuClassName?e.getMenuClassName():"";o&&(s.className+=" "+o),this.options.blockMouse&&(this.block=s.appendChild(Ct(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",St(this.block,xn.MOUSE_DOWN,u=>u.stopPropagation()));const a=new Et,l=e.actionRunner||new ux;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new fae(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)}),a.add(Ike(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(St(window,xn.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(St(window,xn.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;let d=new yf(u),h=d.target;if(!d.rightButton){for(;h;){if(h===s)return;h=h.parentElement}this.contextViewService.hideContextView(!0)}})),cC(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:s=>{e.onHide&&e.onHide(!!s),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},i,!!i)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!zv(e.error)&&this.notificationService.error(e.error)}}var kke=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},mT=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let pV=class extends Je{constructor(e,t,n,i,s){super(),this._onDidShowContextMenu=new Ae,this._onDidHideContextMenu=new Ae,this.contextMenuHandler=new Tke(n,e,t,i,s)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{e.onHide&&e.onHide(t),this._onDidHideContextMenu.fire()}})),Cw.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};pV=kke([mT(0,Uv),mT(1,Oo),mT(2,$b),mT(3,ks),mT(4,Fs)],pV);const E2=lr("layoutService");var Nke=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ake=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let mV=class extends Je{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=Je.None,this.container=e.container,this.contextView=this._register(new wx(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const i=Bi(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};mV=Nke([Ake(0,E2)],mV);const x2=lr("dialogService");let Oke=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class Mke{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new Oke(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(let[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(i,t);if(s)return s;t.delete(n)}}}class OZ extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class UR{constructor(e=new nN,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Li,this)}createChild(e){return new UR(e,this._strict,this)}invokeFunction(e,...t){let n=zg.traceInvocation(e),i=!1;try{return e({get:o=>{if(i)throw Ave("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,n);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof Z1?(n=zg.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=zg.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){let i=fm.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of i){let l=this._getOrCreateServiceInstance(a.id,n);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);s.push(l)}let o=i.length>0?i[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...s)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Z1)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Z1?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new Mke(a=>a.id.toString());let s=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const a=o.pop();if(i.lookupOrInsertNode(a),s++>1e3)throw new OZ(i);for(let l of fm.getServiceDependencies(a.desc.ctor)){let u=this._getServiceInstanceOrDescriptor(l.id);if(!u&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),u instanceof Z1){const d={id:l.id,desc:u,_trace:a._trace.branch(l.id,!0)};i.insertEdge(a,d),o.push(d)}}}for(;;){const a=i.roots();if(a.length===0){if(!i.isEmpty())throw new OZ(i);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Z1){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,s){if(this._services.get(e)instanceof Z1)return this._createServiceInstance(t,n,i,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const s=new OE(()=>this._createInstance(e,t,i));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];let l=s.value,u=l[a];return typeof u!="function"||(u=u.bind(l),o[a]=u),u},set(o,a,l){return s.value[a]=l,!0}})}else return this._createInstance(e,t,i)}}class zg{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return zg._None}static traceCreation(e){return zg._None}branch(e,t){let n=new zg(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;zg._totals+=e;let t=!1;function n(s,o){let a=[],l=new Array(s+1).join("	");for(const[u,d,h]of o._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${u}`);let p=n(s+1,h);p&&a.push(p)}else a.push(`${l}uses -> ${u}`);return a.join(`
`)}let i=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${zg._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(i.join(`
`))}}zg._None=new class extends zg{constructor(){super(-1,null)}stop(){}branch(){return this}};zg._totals=0;const D2=lr("labelService");class Rke{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}class Xy extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function MZ(r,e){const t=[];for(let n of e){if(r.start>=n.range.end)continue;if(r.end<n.range.start)break;const i=iu.intersect(r,n.range);iu.isEmpty(i)||t.push({range:i,size:n.size})}return t}function _V({start:r,end:e},t){return{start:r+t,end:e+t}}function Pke(r){const e=[];let t=null;for(let n of r){const i=n.range.start,s=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:i,end:s},size:o},e.push(t)}return e}function Fke(...r){return Pke(r.reduce((e,t)=>e.concat(t),[]))}class RZ{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const i=n.length-t,s=MZ({start:0,end:e},this.groups),o=MZ({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:_V(l.range,i),size:l.size})),a=n.map((l,u)=>({range:{start:e+u,end:e+u+1},size:l.size}));this.groups=Fke(s,a,o),this._size=this.groups.reduce((l,u)=>l+u.size*(u.range.end-u.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const s=i.range.end-i.range.start,o=n+s*i.size;if(e<o)return t+Math.floor((e-n)/i.size);t+=s,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const s=i.range.end-i.range.start,o=n+s;if(e<o)return t+(e-n)*i.size;t+=s*i.size,n=o}return-1}}function Bke(r){try{r.parentElement&&r.parentElement.removeChild(r)}catch{}}class Wke{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=Ct(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:s}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),Bke(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var iL=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const V_={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class I2{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class Vke{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class Hke{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function zke(r,e){return Array.isArray(r)&&Array.isArray(e)?xf(r,e):r===e}class Uke{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Fm{constructor(e,t,n,i=V_){if(this.virtualDelegate=t,this.domId=`list_id_${++Fm.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Pb(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Je.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Je.None,this.onDragLeaveTimeout=Je.None,this.disposables=new Et,this._onDidChangeContentHeight=new Ae,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new RZ;for(const o of n)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new Wke(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=W_(i,o=>o.horizontalScrolling,V_.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight>"u"?0:i.additionalScrollHeight,this.accessibilityProvider=new Uke(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",W_(i,o=>o.transformOptimization,V_.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Rr.addTarget(this.rowsContainer)),this.scrollable=new I4(W_(i,o=>o.smoothScrolling,!1)?125:0,o=>xv(o)),this.scrollableElement=this.disposables.add(new p$(this.rowsContainer,{alwaysConsumeMouseWheel:W_(i,o=>o.alwaysConsumeMouseWheel,V_.alwaysConsumeMouseWheel),horizontal:1,vertical:W_(i,o=>o.verticalScrollMode,V_.verticalScrollMode),useShadows:W_(i,o=>o.useShadows,V_.useShadows),mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(St(this.rowsContainer,as.Change,o=>this.onTouchChange(o))),this.disposables.add(St(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(St(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(St(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(St(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(St(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=W_(i,o=>o.setRowLineHeight,V_.setRowLineHeight),this.setRowHeight=W_(i,o=>o.setRowHeight,V_.setRowHeight),this.supportDynamicHeights=W_(i,o=>o.supportDynamicHeights,V_.supportDynamicHeights),this.dnd=W_(i,o=>o.dnd,V_.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:H3(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=iu.intersect(i,s),a=new Map;for(let X=o.start;X<o.end;X++){const $=this.items[X];if($.dragStartDisposable.dispose(),$.row){let P=a.get($.templateId);P||(P=[],a.set($.templateId,P));const z=this.renderers.get($.templateId);z&&z.disposeElement&&z.disposeElement($.element,X,$.row.templateData,$.size),P.push($.row)}$.row=null}const l={start:e+t,end:this.items.length},u=iu.intersect(l,i),d=iu.relativeComplement(l,i),h=n.map(X=>({id:String(this.itemId++),element:X,templateId:this.virtualDelegate.getTemplateId(X),size:this.virtualDelegate.getHeight(X),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(X),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Je.None}));let p;e===0&&t>=this.items.length?(this.rangeMap=new RZ,this.rangeMap.splice(0,0,h),p=this.items,this.items=h):(this.rangeMap.splice(e,t,h),p=this.items.splice(e,t,...h));const v=n.length-t,C=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),S=_V(u,v),E=iu.intersect(C,S);for(let X=E.start;X<E.end;X++)this.updateItemInDOM(this.items[X],X);const k=iu.relativeComplement(S,C);for(const X of k)for(let $=X.start;$<X.end;$++)this.removeItemFromDOM($);const D=d.map(X=>_V(X,v)),H=[{start:e,end:e+n.length},...D].map(X=>iu.intersect(C,X)),V=this.getNextToLastElement(H);for(const X of H)for(let $=X.start;$<X.end;$++){const P=this.items[$],z=a.get(P.templateId),M=z==null?void 0:z.pop();this.insertItemInDOM($,V,M)}for(const X of a.values())for(const $ of X)this.cache.release($);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),p.map(X=>X.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=xv(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:A0e(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:H3(this.domNode)})}render(e,t,n,i,s,o=!1){const a=this.getRenderRange(t,n),l=iu.relativeComplement(a,e),u=iu.relativeComplement(e,a),d=this.getNextToLastElement(l);if(o){const h=iu.intersect(e,a);for(let p=h.start;p<h.end;p++)this.updateItemInDOM(this.items[p],p)}for(const h of l)for(let p=h.start;p<h.end;p++)this.insertItemInDOM(p,d);for(const h of u)for(let p=h.start;p<h.end;p++)this.removeItemFromDOM(p);i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];i.row||(i.row=n??this.cache.alloc(i.templateId));const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const o=this.accessibilityProvider.isChecked(i.element);typeof o<"u"&&i.row.domNode.setAttribute("aria-checked",String(!!o)),i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const a=this.renderers.get(i.templateId);if(!a)throw new Error(`No renderer found for template id ${i.templateId}`);a&&a.renderElement(i.element,e,i.row.templateData,i.size);const l=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!l,l&&(i.dragStartDisposable=St(i.row.domNode,"dragstart",u=>this.onDragStart(i.element,l,u))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Bd?"-moz-fit-content":"fit-content",e.width=H3(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return yn.map(this.disposables.add(new Hr(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return yn.map(this.disposables.add(new Hr(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return yn.filter(yn.map(this.disposables.add(new Hr(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return yn.map(this.disposables.add(new Hr(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return yn.any(yn.map(this.disposables.add(new Hr(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),yn.map(this.disposables.add(new Hr(this.domNode,as.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return yn.map(this.disposables.add(new Hr(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return yn.map(this.disposables.add(new Hr(this.rowsContainer,as.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(Soe.TEXT,t),n.dataTransfer.setDragImage){let s;this.dnd.getDragLabel&&(s=this.dnd.getDragLabel(i,n)),typeof s>"u"&&(s=String(i.length));const o=Ct(".monaco-drag-image");o.textContent=s,document.body.appendChild(o),n.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>document.body.removeChild(o),0)}this.currentDragData=new I2(i),sb.CurrentDragAndDropData=new Vke(i),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),sb.CurrentDragAndDropData&&sb.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(sb.CurrentDragAndDropData)this.currentDragData=sb.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new Hke}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=iS(n).filter(i=>i>=-1&&i<this.length).sort((i,s)=>i-s),n=n[0]===-1?[-1]:n,zke(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Bi(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const i of n){const s=this.items[i];s.dropTarget=!0,s.row&&s.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Bi(()=>{for(const i of n){const s=this.items[i];s.dropTarget=!1,s.row&&s.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Jw(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,sb.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,sb.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Je.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=Xie(this.domNode).top;this.dragOverAnimationDisposable=W0e(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Jw(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const s=Number(i);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let s,o;e===this.elementTop(i.start)?(s=i.start,o=0):i.end-i.start>1&&(s=i.start+1,o=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let u=!1;for(let d=l.start;d<l.end;d++){const h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,u=u||h!==0}if(!u){a!==0&&this.eventuallyUpdateScrollDimensions();const d=iu.relativeComplement(i,l);for(const p of d)for(let v=p.start;v<p.end;v++)this.items[v].row&&this.removeItemFromDOM(v);const h=iu.relativeComplement(l,i);for(const p of h)for(let v=p.start;v<p.end;v++){const C=v+1,S=C<this.items.length?this.items[C].row:null,E=S?S.domNode:null;this.insertItemInDOM(v,E)}for(let p=l.start;p<l.end;p++)this.items[p].row&&this.updateItemInDOM(this.items[p],p);if(typeof s=="number"){const p=this.scrollable.getFutureScrollPosition().scrollTop-e,v=this.elementTop(s)-o+p;this.setScrollTop(v,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let o=t.row.domNode.offsetHeight;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-n}const i=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);const s=this.renderers.get(t.templateId);return s&&(s.renderElement(t.element,e,i.templateData,void 0),s.disposeElement&&s.disposeElement(t.element,e,i.templateData,void 0)),t.size=i.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(i.domNode),this.cache.release(i),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),nr(this.disposables)}}Fm.InstanceCount=0;iL([la],Fm.prototype,"onMouseClick",null);iL([la],Fm.prototype,"onMouseDblClick",null);iL([la],Fm.prototype,"onMouseMiddleClick",null);iL([la],Fm.prototype,"onMouseDown",null);iL([la],Fm.prototype,"onContextMenu",null);iL([la],Fm.prototype,"onTouchStart",null);iL([la],Fm.prototype,"onTap",null);var rL=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},PZ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class $ke{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(s=>s.templateData===n);if(i>=0){const s=this.renderedElements[i];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const s of this.renderedElements)s.index<e?i.push(s):s.index>=e+t&&i.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let $R=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new Ae,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new $ke(this)}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,o=e+t,a=[...this.sortedIndexes.filter(u=>u<e),...n.map((u,d)=>u?d+e:-1).filter(u=>u!==-1),...this.sortedIndexes.filter(u=>u>=o).map(u=>u+s)],l=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const u=(i=this.sortedIndexes.find(d=>d>=e))!==null&&i!==void 0?i:l-1;a.push(Math.min(u,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(BZ),t)}_set(e,t,n){const i=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=vV(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return kU(this.sortedIndexes,e,BZ)>=0}dispose(){nr(this._onChange)}};rL([la],$R.prototype,"renderer",null);class jke extends $R{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class $5{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const i=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),s=n.map(o=>i.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,s)}}function RC(r){return r.tagName==="INPUT"||r.tagName==="TEXTAREA"}function SE(r){return r.classList.contains("monaco-editor")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:SE(r.parentElement)}class gae{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Et,this.multipleSelectionDisposables=new Et,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(i=>(zi?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return yn.chain(this.disposables.add(new Hr(this.view.domNode,"keydown")).event).filter(e=>!RC(e.target)).map(e=>new Ts(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(zi?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(rc(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}rL([la],gae.prototype,"onKeyDown",null);var LE;(function(r){r[r.Idle=0]="Idle",r[r.Typing=1]="Typing"})(LE||(LE={}));const pae=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=93&&r.keyCode<=102||r.keyCode>=80&&r.keyCode<=90}};class qke{constructor(e,t,n,i){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=i,this.enabled=!1,this.state=LE.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Et,this.disposables=new Et,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=yn.chain(this.enabledDisposables.add(new Hr(this.view.domNode,"keydown")).event).filter(i=>!RC(i.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(i=>new Ts(i)).filter(i=>this.delegate.mightProducePrintableCharacter(i)).forEach(i=>i.preventDefault()).map(i=>i.browserEvent.key).event,t=yn.debounce(e,()=>null,800);yn.reduce(yn.any(e,t),(i,s)=>s===null?null:(i||"")+s)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Il(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=LE.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===LE.Idle?1:0;this.state=LE.Typing;for(let s=0;s<this.list.length;s++){const o=(n+s+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l>"u"||F4(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class Kke{constructor(e,t){this.list=e,this.view=t,this.disposables=new Et,yn.chain(this.disposables.add(new Hr(t.domNode,"keydown")).event).filter(i=>!RC(i.target)).map(i=>new Ts(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const s=window.getComputedStyle(i);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}function mae(r){return zi?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function _ae(r){return r.browserEvent.shiftKey}function Gke(r){return r instanceof MouseEvent&&r.button===2}const FZ={isSelectionSingleChangeEvent:mae,isSelectionRangeChangeEvent:_ae};class vae{constructor(e){this.list=e,this.disposables=new Et,this._onPointer=new Ae,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||FZ),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Rr.addTarget(e.getHTMLElement()))),yn.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||FZ))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){SE(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(SE(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||RC(e.browserEvent.target)||SE(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Gke(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(RC(e.browserEvent.target)||SE(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const d=this.list.getFocus()[0];n=d??t,this.list.setAnchor(n)}const i=Math.min(n,t),s=Math.max(n,t),o=rc(i,s+1),a=this.list.getSelection(),l=Xke(vV(a,[n]),n);if(l.length===0)return;const u=vV(o,Qke(a,l));this.list.setSelection(u,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),s=i.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class bae{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):zi||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const Yke={listFocusBackground:We.fromHex("#7FB0D0"),listActiveSelectionBackground:We.fromHex("#0E639C"),listActiveSelectionForeground:We.fromHex("#FFFFFF"),listActiveSelectionIconForeground:We.fromHex("#FFFFFF"),listFocusAndSelectionBackground:We.fromHex("#094771"),listFocusAndSelectionForeground:We.fromHex("#FFFFFF"),listInactiveSelectionBackground:We.fromHex("#3F3F46"),listInactiveSelectionIconForeground:We.fromHex("#FFFFFF"),listHoverBackground:We.fromHex("#2A2D2E"),listDropBackground:We.fromHex("#383B3D"),treeIndentGuidesStroke:We.fromHex("#a9a9a9"),tableColumnsBorder:We.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:We.fromHex("#cccccc").transparent(.04)},Zke={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Xke(r,e){const t=r.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&r[i]===e-(t-i);)n.push(r[i--]);for(n.reverse(),i=t;i<r.length&&r[i]===e+(i-t);)n.push(r[i++]);return n}function vV(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){t.push(r[n]),n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):t.push(e[i++]);return t}function Qke(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):i++;return t}const BZ=(r,e)=>r-e;class Jke{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let s=0;for(const o of this.renderers)o.renderElement(e,t,n[s++],i)}disposeElement(e,t,n,i){let s=0;for(const o of this.renderers)o.disposeElement&&o.disposeElement(e,t,n[s],i),s+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class eNe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class tNe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var s,o;(o=(s=this.dnd).onDragLeave)===null||o===void 0||o.call(s,e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}}class Kv{constructor(e,t,n,i,s=Zke){var o;this.user=e,this._options=s,this.focus=new $R("focused"),this.anchor=new $R("anchor"),this.eventBufferer=new rU,this._ariaLabel="",this.disposables=new Et,this._onDidDispose=new Ae,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new jke(a!=="listbox"),qv(s,Yke,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(l.push(new eNe(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(d=>new Jke(d.templateId,[...l,d]));const u=Object.assign(Object.assign({},s),{dnd:s.dnd&&new tNe(this,s.dnd)});if(this.view=new Fm(t,n,i,u),this.view.domNode.setAttribute("role",a),s.styleController)this.styleController=s.styleController(this.view.domId);else{const d=kf(this.view.domNode);this.styleController=new bae(d,this.view.domId)}if(this.spliceable=new Rke([new $5(this.focus,this.view,s.identityProvider),new $5(this.selection,this.view,s.identityProvider),new $5(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Kke(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new gae(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const d=s.keyboardNavigationDelegate||pae;this.typeLabelController=new qke(this,this.view,s.keyboardNavigationLabelProvider,d),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return yn.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return yn.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=yn.chain(this.disposables.add(new Hr(this.view.domNode,"keydown")).event).map(s=>new Ts(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(JY).filter(()=>!1).event,n=yn.chain(this.disposables.add(new Hr(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(s=>new Ts(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(JY).map(({browserEvent:s})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,u=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:u,browserEvent:s}}).event,i=yn.chain(this.view.onContextMenu).filter(s=>!e).map(({element:s,index:o,browserEvent:a})=>({element:s,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return yn.any(t,n,i)}get onKeyDown(){return this.disposables.add(new Hr(this.view.domNode,"keydown")).event}get onDidFocus(){return yn.signal(this.disposables.add(new Hr(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new vae(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new Xy(this.user,`Invalid start index: ${e}`);if(t<0)throw new Xy(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new Xy(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Xy(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return O6(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new Xy(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,i);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,i);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return PZ(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.view.element(n),s=this.getFocusedElements()[0];if(s!==i){const o=this.findPreviousIndex(n,!1,t);o>-1&&s!==this.view.element(o)?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==o&&(this.setFocus([]),yield SC(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return PZ(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const s=this.view.element(n),o=this.getFocusedElements()[0];if(o!==s){const a=this.findNextIndex(n,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield SC(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new Xy(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(tS(t)){const o=s-this.view.renderHeight;this.view.setScrollTop(o*Fg(t,0,1)+i)}else{const o=i+s,a=n+this.view.renderHeight;i<n&&o>=a||(i<n||o>=a&&s>=this.view.renderHeight?this.view.setScrollTop(i):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new Xy(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),i=this.view.elementHeight(e);if(n<t||n+i>t+this.view.renderHeight)return null;const s=i-this.view.renderHeight;return Math.abs((t-n)/s)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}rL([la],Kv.prototype,"onDidChangeFocus",null);rL([la],Kv.prototype,"onDidChangeSelection",null);rL([la],Kv.prototype,"onContextMenu",null);rL([la],Kv.prototype,"onKeyDown",null);rL([la],Kv.prototype,"onDidFocus",null);class nNe{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Je.None}}renderElement(e,t,n,i){if(n.disposable&&n.disposable.dispose(),!n.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,n.data,i);const o=new Fu,a=s.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class iNe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function rNe(r,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new iNe(r,e.accessibilityProvider)})}class sNe{constructor(e,t,n,i,s={}){const o=()=>this.model,a=i.map(l=>new nNe(l,o));this.list=new Kv(e,t,n,a,rNe(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return yn.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return yn.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return yn.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,rc(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const oNe={separatorBorder:We.transparent};class Cae{constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=Fg(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class aNe extends Cae{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class lNe extends Cae{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var ob;(function(r){r[r.Idle=0]="Idle",r[r.Busy=1]="Busy"})(ob||(ob={}));var jR;(function(r){r.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}r.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}r.Invisible=t})(jR||(jR={}));class yae extends Je{constructor(e,t={}){var n,i,s,o,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=ob.Idle,this._onDidSashChange=this._register(new Ae),this._onDidSashReset=this._register(new Ae),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(i=t.inverseAltBehavior)!==null&&i!==void 0?i:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=st(this.el,Ct(".sash-container")),this.viewContainer=Ct(".split-view-container"),this.scrollable=new I4(125,xv),this.scrollableElement=this._register(new p$(this.viewContainer,{vertical:this.orientation===0?(o=t.scrollbarVisibility)!==null&&o!==void 0?o:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(l=>{this.viewContainer.scrollTop=l.scrollTop,this.viewContainer.scrollLeft=l.scrollLeft})),st(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||oNe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((l,u)=>{const d=Od(l.visible)||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},h=l.view;this.doAddView(h,d,u,!0)}),this.contentSize=this.viewItems.reduce((l,u)=>l+u.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let i=0;i<this.viewItems.length;i++){const s=this.viewItems[i];s.size=Fg(Math.round(this.proportions[i]*e),s.minimumSize,s.maximumSize)}else{const i=rc(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),s=cC(St(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),St(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const u=this.viewItems.map(C=>C.size);let d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const S=this.viewItems[i];d=(S.minimumSize-S.size)/2,h=(S.maximumSize-S.size)/2}else{const S=this.viewItems[i+1];d=(S.size-S.maximumSize)/2,h=(S.size-S.minimumSize)/2}let p,v;if(!l){const C=rc(i,-1),S=rc(i+1,this.viewItems.length),E=C.reduce((P,z)=>P+(this.viewItems[z].minimumSize-u[z]),0),k=C.reduce((P,z)=>P+(this.viewItems[z].viewMaximumSize-u[z]),0),D=S.length===0?Number.POSITIVE_INFINITY:S.reduce((P,z)=>P+(u[z]-this.viewItems[z].minimumSize),0),O=S.length===0?Number.NEGATIVE_INFINITY:S.reduce((P,z)=>P+(u[z]-this.viewItems[z].viewMaximumSize),0),H=Math.max(E,O),V=Math.min(D,k),X=this.findFirstSnapIndex(C),$=this.findFirstSnapIndex(S);if(typeof X=="number"){const P=this.viewItems[X],z=Math.floor(P.viewMinimumSize/2);p={index:X,limitDelta:P.visible?H-z:H+z,size:P.size}}if(typeof $=="number"){const P=this.viewItems[$],z=Math.floor(P.viewMinimumSize/2);v={index:$,limitDelta:P.visible?V+z:V-z,size:P.size}}}this.sashDragState={start:a,current:a,index:i,sizes:u,minDelta:d,maxDelta:h,alt:l,snapBefore:p,snapAfter:v,disposable:s}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:s,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:u}=this.sashDragState;this.sashDragState.current=e;const d=e-n,h=this.resize(t,d,i,void 0,void 0,o,a,l,u);if(s){const p=t===this.sashItems.length-1,v=this.viewItems.map(O=>O.size),C=p?t:t+1,S=this.viewItems[C],E=S.size-S.maximumSize,k=S.size-S.minimumSize,D=p?t-1:t+1;this.resize(D,-h,v,void 0,void 0,E,k)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Fg(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==ob.Idle)throw new Error("Cant modify splitview");if(this.state=ob.Busy,e<0||e>=this.viewItems.length)return;const n=rc(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=Fg(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(i,s),this.state=ob.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Fg(n,a.minimumSize,a.maximumSize);const i=rc(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==ob.Idle)throw new Error("Cant modify splitview");this.state=ob.Busy;const s=Ct(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const o=e.onDidChange(p=>this.onViewChange(d,p)),a=Bi(()=>this.viewContainer.removeChild(s)),l=cC(o,a);let u;typeof t=="number"?u=t:t.type==="split"?u=this.getViewSize(t.index)/2:t.type==="invisible"?u={cachedVisibleSize:t.cachedVisibleSize}:u=e.minimumSize;const d=this.orientation===0?new aNe(s,e,u,l):new lNe(s,e,u,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){let p={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const v=this.orientation===0?new ru(this.sashContainer,{getHorizontalSashTop:P=>this.getSashPosition(P),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:1})):new ru(this.sashContainer,{getVerticalSashLeft:P=>this.getSashPosition(P),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:0})),C=this.orientation===0?P=>({sash:v,start:P.startY,current:P.currentY,alt:P.altKey}):P=>({sash:v,start:P.startX,current:P.currentX,alt:P.altKey}),E=yn.map(v.onDidStart,C)(this.onSashStart,this),D=yn.map(v.onDidChange,C)(this.onSashChange,this),H=yn.map(v.onDidEnd,()=>this.sashItems.findIndex(P=>P.sash===v))(this.onSashEnd,this),V=v.onDidReset(()=>{const P=this.sashItems.findIndex(R=>R.sash===v),z=rc(P,-1),M=rc(P+1,this.viewItems.length),W=this.findFirstSnapIndex(z),I=this.findFirstSnapIndex(M);typeof W=="number"&&!this.viewItems[W].visible||typeof I=="number"&&!this.viewItems[I].visible||this._onDidSashReset.fire(P)}),X=cC(E,D,H,V,v),$={sash:v,disposable:X};this.sashItems.splice(n-1,0,$)}s.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),i||this.relayout([n],h),this.state=ob.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,s)=>i+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),i,s,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,u){if(e<0||e>=this.viewItems.length)return 0;const d=rc(e,-1),h=rc(e+1,this.viewItems.length);if(s)for(const $ of s)$3(d,$),$3(h,$);if(i)for(const $ of i)vA(d,$),vA(h,$);const p=d.map($=>this.viewItems[$]),v=d.map($=>n[$]),C=h.map($=>this.viewItems[$]),S=h.map($=>n[$]),E=d.reduce(($,P)=>$+(this.viewItems[P].minimumSize-n[P]),0),k=d.reduce(($,P)=>$+(this.viewItems[P].maximumSize-n[P]),0),D=h.length===0?Number.POSITIVE_INFINITY:h.reduce(($,P)=>$+(n[P]-this.viewItems[P].minimumSize),0),O=h.length===0?Number.NEGATIVE_INFINITY:h.reduce(($,P)=>$+(n[P]-this.viewItems[P].maximumSize),0),H=Math.max(E,O,o),V=Math.min(D,k,a);let X=!1;if(l){const $=this.viewItems[l.index],P=t>=l.limitDelta;X=P!==$.visible,$.setVisible(P,l.size)}if(!X&&u){const $=this.viewItems[u.index],P=t<u.limitDelta;X=P!==$.visible,$.setVisible(P,u.size)}if(X)return this.resize(e,t,n,i,s,o,a);t=Fg(t,H,V);for(let $=0,P=t;$<p.length;$++){const z=p[$],M=Fg(v[$]+P,z.minimumSize,z.maximumSize),W=M-v[$];P-=W,z.size=M}for(let $=0,P=t;$<C.length;$++){const z=C[$],M=Fg(S[$]-P,z.minimumSize,z.maximumSize),W=M-S[$];P+=W,z.size=M}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=rc(this.viewItems.length-1,-1),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);for(const a of o)$3(i,a);for(const a of s)vA(i,a);typeof e=="number"&&vA(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],u=Fg(l.size+n,l.minimumSize,l.maximumSize),d=u-l.size;n-=d,l.size=u}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const s=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:u}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const h=!(t[l]&&o[l+1]),p=!(n[l]&&s[l+1]);if(h&&p){const v=rc(l,-1),C=rc(l+1,this.viewItems.length),S=this.findFirstSnapIndex(v),E=this.findFirstSnapIndex(C),k=typeof S=="number"&&!this.viewItems[S].visible,D=typeof E=="number"&&!this.viewItems[E].visible;k&&s[l]&&(a>0||this.startSnappingEnabled)?u.state=1:D&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?u.state=2:u.state=0}else h&&!p?u.state=1:!h&&p?u.state=2:u.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class T2{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=T2.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const o=i.get(s.templateId);if(!o)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=st(e,Ct(".monaco-table-tr")),n=[],i=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=st(t,Ct(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),i.push(a.renderTemplate(l))}const s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}renderElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],i)}}disposeElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const l=this.columns[s].project(e);o.disposeElement(l,t,n.cellTemplateData[s],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Ca(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}T2.TemplateId="row";function uNe(r){return{getHeight(e){return r.getHeight(e)},getTemplateId(){return T2.TemplateId}}}class cNe{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new Ae,this.onDidLayout=this._onDidLayout.event,this.element=Ct(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:yn.None}layout(e){this._onDidLayout.fire([this.index,e])}}class H4{constructor(e,t,n,i,s,o){this.virtualDelegate=n,this.domId=`table_id_${++H4.InstanceCount}`,this.disposables=new Et,this.cachedWidth=0,this.cachedHeight=0,this.domNode=st(t,Ct(`.monaco-table.${this.domId}`));const a=i.map((d,h)=>new cNe(d,h)),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new yae(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const u=new T2(i,s,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Kv(e,this.domNode,uNe(n),[u],o)),yn.any(...a.map(d=>d.onDidLayout))(([d,h])=>u.layoutColumn(d,h),null,this.disposables),this.splitview.onDidSashReset(d=>{const h=i.reduce((v,C)=>v+C.weight,0),p=i[d].weight/h*this.cachedWidth;this.splitview.resizeView(d,p)},null,this.disposables),this.styleElement=kf(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}H4.InstanceCount=0;var mk;(function(r){r[r.Unknown=0]="Unknown",r[r.Twistie=1]="Twistie",r[r.Element=2]="Element"})(mk||(mk={}));class Cf extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class G${constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function Y$(r){return typeof r=="object"&&"visibility"in r&&"data"in r}function mN(r){switch(r){case!0:return 1;case!1:return 0;default:return r}}function j5(r){return typeof r.collapsible=="boolean"}class dNe{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new rU,this._onDidChangeCollapseState=new Ae,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Ae,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Ae,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Xi.empty(),i={}){if(e.length===0)throw new Cf(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,s,o){var a;i===void 0&&(i=Xi.empty()),o===void 0&&(o=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,i,s);const u=[...i],d=t[t.length-1],h=new lv({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...u,...l.children.slice(d+n)].map(E=>e.getId(E.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,u,s);const p=t.slice(0,-1),v=(E,k,D)=>{if(o>0)for(let O=0;O<D;O++)E--,k--,this.spliceSmart(e,[...p,E,0],Number.MAX_SAFE_INTEGER,u[k].children,s,o-1)};let C=Math.min(l.children.length,d+n),S=u.length;for(const E of h.changes.sort((k,D)=>D.originalStart-k.originalStart))v(C,S,C-(E.originalStart+E.originalLength)),C=E.originalStart,S=E.modifiedStart-d,this.spliceSimple([...p,C],E.originalLength,Xi.slice(u,S,S+E.modifiedLength),s);v(C,S,C)}spliceSimple(e,t,n=Xi.empty(),{onDidCreateNode:i,onDidDeleteNode:s,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:u,visible:d}=this.getParentNodeWithListIndex(e),h=[],p=Xi.map(n,$=>this.createTreeNode($,a,a.visible?1:0,u,h,i)),v=e[e.length-1],C=a.children.length>0;let S=0;for(let $=v;$>=0&&$<a.children.length;$--){const P=a.children[$];if(P.visible){S=P.visibleChildIndex;break}}const E=[];let k=0,D=0;for(const $ of p)E.push($),D+=$.renderNodeCount,$.visible&&($.visibleChildIndex=S+k++);const O=SG(a.children,v,t,E);o?a.lastDiffIds?SG(a.lastDiffIds,v,t,E.map($=>o.getId($.element).toString())):a.lastDiffIds=a.children.map($=>o.getId($.element).toString()):a.lastDiffIds=void 0;let H=0;for(const $ of O)$.visible&&H++;if(H!==0)for(let $=v+E.length;$<a.children.length;$++){const P=a.children[$];P.visible&&(P.visibleChildIndex-=H)}if(a.visibleChildrenCount+=k-H,u&&d){const $=O.reduce((P,z)=>P+(z.visible?z.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,D-$),this.list.splice(l,$,h)}if(O.length>0&&s){const $=P=>{s(P),P.children.forEach($)};O.forEach($)}const V=a.children.length>0;C!==V&&this.setCollapsible(e.slice(0,-1),V),this._onDidSplice.fire({insertedNodes:E,deletedNodes:O});let X=a;for(;X;){if(X.visibility===2){this.refilter();break}X=X.parent}}rerender(e){if(e.length===0)throw new Cf(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,i,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!j5(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,i){const s=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!s)return s;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(j5(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!j5(t)&&t.recursive)for(const s of e.children)i=this._setNodeCollapseState(s,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,i,s,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&s.push(a);const u=e.children||Xi.empty(),d=i&&l!==0&&!a.collapsed,h=Xi.map(u,C=>this.createTreeNode(C,a,l,d,s,o));let p=0,v=1;for(const C of h)a.children.push(C),v+=C.renderNodeCount,C.visible&&(C.visibleChildIndex=p++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=p,a.visible=l===2?p>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=v):(a.renderNodeCount=0,i&&s.pop()),o&&o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const u of e.children)a=this._updateNodeAfterFilterChange(u,s,n,i&&!e.collapsed)||a,u.visible&&(u.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):Y$(n)?(e.filterData=n.data,mN(n.visibility)):(e.filterData=void 0,mN(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new Cf(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Cf(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:i,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,s=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Cf(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:s}:this.getParentNodeWithListIndex(a,t.children[o],n+1,i,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Pbe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class hNe extends I2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function q5(r){return r instanceof I2?new hNe(r):r}class fNe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Je.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(q5(e),t)}onDragOver(e,t,n,i,s=!0){const o=this.dnd.onDragOver(q5(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=Jw(()=>{const p=this.modelProvider(),v=p.getNodeLocation(t);p.isCollapsed(v)&&p.setCollapsed(v,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble>"u"||o.feedback){if(!s){const p=typeof o=="boolean"?o:o.accept,v=typeof o=="boolean"?void 0:o.effect;return{accept:p,effect:v,feedback:[n]}}return o}if(o.bubble===1){const p=this.modelProvider(),v=p.getNodeLocation(t),C=p.getParentNodeLocation(v),S=p.getNode(C),E=C&&p.getListIndex(C);return this.onDragOver(e,S,E,i,!1)}const l=this.modelProvider(),u=l.getNodeLocation(t),d=l.getListIndex(u),h=l.getListRenderCount(u);return Object.assign(Object.assign({},o),{feedback:rc(d,d+h)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(q5(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function gNe(r,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new fNe(r,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=r(),i=n.getNodeLocation(t),s=n.getParentNodeLocation(i);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class Z${constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var _N;(function(r){r.None="none",r.OnHover="onHover",r.Always="always"})(_N||(_N={}));class pNe{constructor(e,t=[]){this._elements=t,this.onDidChange=yn.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class vN{constructor(e,t,n,i,s={}){this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=vN.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new B1e,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Je.None,this.disposables=new Et,this.templateId=e.templateId,this.updateOptions(s),yn.map(n,o=>o.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=Fg(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==_N.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new Et;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=st(e,Ct(".monaco-tl-row")),n=st(t,Ct(".monaco-tl-indent")),i=st(t,Ct(".monaco-tl-twistie")),s=st(t,Ct(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:i,indentGuidesDisposable:Je.None,templateData:o}}renderElement(e,t,n,i){typeof i=="number"&&(this.renderedNodes.set(e,{templateData:n,height:i}),this.renderedElements.set(e.element,e));const s=vN.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${s}px`,n.indent.style.width=`${s+this.indent-16}px`,this.renderTwistie(e,n),typeof i=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...Ie.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...Ie.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Ca(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Et,i=this.modelProvider();let s=e;for(;;){const o=i.getNodeLocation(s),a=i.getParentNodeLocation(o);if(!a)break;const l=i.getNode(a),u=Ct(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&u.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(u):t.indent.insertBefore(u,t.indent.firstElementChild),this.renderedIndentGuides.add(l,u),n.add(Bi(()=>this.renderedIndentGuides.delete(l,u))),s=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const s=n.getNodeLocation(i);try{const o=n.getParentNodeLocation(s);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),nr(this.disposables)}}vN.DefaultIndent=8;class mNe{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Et,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const s=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return s;let o;if(typeof s=="boolean"?o=s?1:0:Y$(s)?o=mN(s.visibility):o=s,o===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Em.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),i=Array.isArray(n)?n:[n];for(const s of i){const o=s&&s.toString();if(typeof o>"u")return{data:Em.Default,visibility:!0};const a=Sx(this._pattern,this._lowercasePattern,0,o,o.toLowerCase(),0,!0);if(a)return this._matchCount++,i.length===1?{data:a,visibility:!0}:{data:{label:o,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Em.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){nr(this.disposables)}}class _Ne{constructor(e,t,n,i,s){this.tree=e,this.view=n,this.filter=i,this.keyboardNavigationDelegate=s,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new Ae,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new Ae,this.enabledDisposables=new Et,this.disposables=new Et,this.domNode=Ct(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(St(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=st(n.getHTMLElement(),Ct(".monaco-list-type-filter-message")),this.labelDomNode=st(this.domNode,Ct("span.label"));const o=st(this.domNode,Ct(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=st(o,Ct("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(St(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=st(o,Ct("button.clear"+Ie.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=L("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new Hr(this.view.getHTMLElement(),"keydown")),t=yn.chain(e.event).filter(i=>!RC(i.target)||i.target===this.filterOnTypeDomNode).filter(i=>i.key!=="Dead"&&!/^Media/.test(i.key)).map(i=>new Ts(i)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(i=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(i)&&!(i.keyCode===18||i.keyCode===16||i.keyCode===15||i.keyCode===17)||(this.pattern.length>0||this.triggered)&&(i.keyCode===9||i.keyCode===1)&&!i.altKey&&!i.ctrlKey&&!i.metaKey||i.keyCode===1&&(zi?i.altKey&&!i.metaKey:i.ctrlKey)&&!i.shiftKey).forEach(i=>{i.stopPropagation(),i.preventDefault()}).event,n=this.enabledDisposables.add(new Hr(this.clearDomNode,"click"));yn.chain(yn.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(zi?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,i=>!Em.isDefault(i.filterData));const n=this.tree.getFocus();if(n.length>0){const i=n[0];this.tree.getRelativeTop(i)===null&&this.tree.reveal(i,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=su(e),n=e.clientWidth,i=n/2,s=this.domNode.clientWidth,o=new Et;let a=this.positionClassName;const l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-s-6}px`;break}},u=h=>{h.preventDefault();const p=h.clientX-t;h.dataTransfer&&(h.dataTransfer.dropEffect="none"),p<i?a="nw":a="ne",l()},d=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",nr(o)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),o.add(Bi(()=>this.domNode.classList.remove("dragging"))),o.add(St(document,"dragover",h=>u(h))),o.add(St(this.domNode,"dragend",()=>d())),sb.CurrentDragAndDropData=new $De("vscode-ui"),o.add(Bi(()=>sb.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...Ie.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(...Ie.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=L("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...Ie.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(...Ie.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=L("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=L("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=L("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?""+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Em.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),nr(this.disposables)}}function WZ(r){let e=mk.Unknown;return mG(r.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=mk.Twistie:mG(r.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=mk.Element),{browserEvent:r.browserEvent,element:r.element?r.element.element:null,target:e}}function YO(r,e){e(r),r.children.forEach(t=>YO(t,e))}class K5{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&xf(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),u=d=>l.delete(d);t.forEach(d=>YO(d,u)),this.set([...l.values()]);return}const n=new Set,i=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>YO(l,i));const s=new Map,o=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>YO(l,o));const a=[];for(const l of this.nodes){const u=this.identityProvider.getId(l.element).toString();if(!n.has(u))a.push(l);else{const h=s.get(u);h&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class vNe extends vae{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(RC(e.browserEvent.target)||SE(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,l),s&&i)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class bNe extends Kv{constructor(e,t,n,i,s,o,a,l){super(e,t,n,i,l),this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new vNe(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],s=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),i.length>0&&super.setFocus(iS([...super.getFocus(),...i])),s.length>0&&super.setSelection(iS([...super.getSelection(),...s])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class wae{constructor(e,t,n,i,s={}){this._options=s,this.eventBufferer=new rU,this.disposables=new Et,this._onWillRefilter=new Ae,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Ae;const o=new Z$(n),a=new hG,l=new hG,u=new pNe(l.event);this.renderers=i.map(p=>new vN(p,()=>this.model,a.event,u,s));for(let p of this.renderers)this.disposables.add(p);let d;s.keyboardNavigationLabelProvider&&(d=new mNe(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:d}),this.disposables.add(d)),this.focus=new K5(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new K5(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new K5(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new bNe(e,t,o,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},gNe(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),a.input=this.model.onDidChangeCollapseState;const h=yn.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})});if(h(()=>null,null,this.disposables),l.input=yn.chain(yn.any(h,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const p=new Set;for(const v of this.focus.getNodes())p.add(v);for(const v of this.selection.getNodes())p.add(v);return[...p.values()]}).event,s.keyboardSupport!==!1){const p=yn.chain(this.view.onKeyDown).filter(v=>!RC(v.target)).map(v=>new Ts(v));p.filter(v=>v.keyCode===15).on(this.onLeftArrow,this,this.disposables),p.filter(v=>v.keyCode===17).on(this.onRightArrow,this,this.disposables),p.filter(v=>v.keyCode===10).on(this.onSpace,this,this.disposables)}if(s.keyboardNavigationLabelProvider){const p=s.keyboardNavigationDelegate||pae;this.typeFilterController=new _Ne(this,this.model,this.view,d,p),this.focusNavigationFilter=v=>this.typeFilterController.shouldAllowFocus(v),this.disposables.add(this.typeFilterController)}this.styleElement=kf(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===_N.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return yn.map(this.view.onMouseDblClick,WZ)}get onPointer(){return yn.map(this.view.onPointer,WZ)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return yn.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===_N.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(i,t,!0)}focusNext(e=1,t=!1,n,i=this.focusNavigationFilter){this.view.focusNext(e,t,n,i)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const o=this.model.getParentNodeLocation(i);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,s)}dispose(){nr(this.disposables),this.view.dispose()}}class X${constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new dNe(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,s){return n.sorter.compare(i.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Xi.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=Xi.empty(),n){const i=new Set,s=new Set,o=l=>{var u;if(l.element===null)return;const d=l;if(i.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();s.add(h),this.nodesByIdentity.set(h,d)}(u=n.onDidCreateNode)===null||u===void 0||u.call(n,d)},a=l=>{var u;if(l.element===null)return;const d=l;if(i.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();s.has(h)||this.nodesByIdentity.delete(h)}(u=n.onDidDeleteNode)===null||u===void 0||u.call(n,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=Xi.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Xi.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,s=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:i,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Cf(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Cf(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Cf(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Cf(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function ZO(r){const e=[r.element],t=r.incompressible||!1;return{element:{elements:e,incompressible:t},children:Xi.map(Xi.from(r.children),ZO),collapsible:r.collapsible,collapsed:r.collapsed}}function XO(r){const e=[r.element],t=r.incompressible||!1;let n,i;for(;[i,n]=Xi.consume(Xi.from(r.children),2),!(i.length!==1||i[0].incompressible);)r=i[0],e.push(r.element);return{element:{elements:e,incompressible:t},children:Xi.map(Xi.concat(i,n),XO),collapsible:r.collapsible,collapsed:r.collapsed}}function bV(r,e=0){let t;return e<r.element.elements.length-1?t=[bV(r,e+1)]:t=Xi.map(Xi.from(r.children),n=>bV(n,0)),e===0&&r.element.incompressible?{element:r.element.elements[e],children:t,incompressible:!0,collapsible:r.collapsible,collapsed:r.collapsed}:{element:r.element.elements[e],children:t,collapsible:r.collapsible,collapsed:r.collapsed}}function VZ(r){return bV(r,0)}function Sae(r,e,t){return r.element===e?Object.assign(Object.assign({},r),{children:t}):Object.assign(Object.assign({},r),{children:Xi.map(Xi.from(r.children),n=>Sae(n,e,t))})}const CNe=r=>({getId(e){return e.elements.map(t=>r.getId(t).toString()).join("\0")}});class yNe{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new X$(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Xi.empty(),n){const i=n.diffIdentityProvider&&CNe(n.diffIdentityProvider);if(e===null){const v=Xi.map(t,this.enabled?XO:ZO);this._setChildren(null,v,{diffIdentityProvider:i,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new Error("Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),u=VZ(o),d=Sae(u,e,t),h=(this.enabled?XO:ZO)(d),p=l.children.map(v=>v===o?h:v);this._setChildren(l.element,p,{diffIdentityProvider:i,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=Xi.map(n,VZ),s=Xi.map(i,e?XO:ZO);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,s=a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Cf(this.user,`Tree element not found: ${e}`);return t}}const wNe=r=>r[r.length-1];class Q${constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new Q$(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function SNe(r,e){return{splice(t,n,i){e.splice(t,n,i.map(s=>r.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function LNe(r,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(r(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(r(t),n)}}})}class ENe{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||wNe;const i=s=>this.elementMapper(s.elements);this.nodeMapper=new G$(s=>new Q$(i,s)),this.model=new yNe(e,SNe(this.nodeMapper,t),LNe(i,n))}get onDidSplice(){return yn.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return yn.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return yn.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Xi.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var xNe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class J$ extends wae{constructor(e,t,n,i,s={}){super(e,t,n,i,s)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Xi.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new X$(e,t,n)}}class Lae{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,i))}disposeElement(e,t,n,i){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,i):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}xNe([la],Lae.prototype,"compressedTreeNodeProvider",null);function DNe(r,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=r().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class Eae extends J${constructor(e,t,n,i,s={}){const o=()=>this,a=i.map(l=>new Lae(o,l));super(e,t,n,a,DNe(o,s))}setChildren(e,t=Xi.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new ENe(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var H1=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function G5(r){return Object.assign(Object.assign({},r),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function CV(r,e){return e.parent?e.parent===r?!0:CV(r,e.parent):!1}function INe(r,e){return r===e||CV(r,e)||CV(e,r)}class ej{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new ej(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class TNe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ie.treeItemLoading.classNamesArray),!0):(t.classList.remove(...Ie.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function HZ(r){return{browserEvent:r.browserEvent,elements:r.elements.map(e=>e.element)}}function zZ(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,target:r.target}}class kNe extends I2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function Y5(r){return r instanceof I2?new kNe(r):r}class NNe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(Y5(e),t)}onDragOver(e,t,n,i,s=!0){return this.dnd.onDragOver(Y5(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(Y5(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function xae(r){return r&&Object.assign(Object.assign({},r),{collapseByDefault:!0,identityProvider:r.identityProvider&&{getId(e){return r.identityProvider.getId(e.element)}},dnd:r.dnd&&new NNe(r.dnd),multipleSelectionController:r.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return r.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return r.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:r.accessibilityProvider&&Object.assign(Object.assign({},r.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:r.accessibilityProvider.getRole?e=>r.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:r.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=r.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return r.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return r.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:r.accessibilityProvider.getWidgetRole?()=>r.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:r.accessibilityProvider.getAriaLevel&&(e=>r.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:r.accessibilityProvider.getActiveDescendantId&&(e=>r.accessibilityProvider.getActiveDescendantId(e.element))}),filter:r.filter&&{filter(e,t){return r.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:r.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},r.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return r.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof r.expandOnlyOnTwistieClick>"u"?void 0:typeof r.expandOnlyOnTwistieClick!="function"?r.expandOnlyOnTwistieClick:e=>r.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:r.additionalScrollHeight})}function yV(r,e){e(r),r.children.forEach(t=>yV(t,e))}class Dae{constructor(e,t,n,i,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Ae,this._onDidChangeNodeSlowState=new Ae,this.nodeMapper=new G$(a=>new ej(a)),this.disposables=new Et,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,i,o),this.root=G5({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return yn.map(this.tree.onDidChangeFocus,HZ)}get onDidChangeSelection(){return yn.map(this.tree.onDidChangeSelection,HZ)}get onMouseDblClick(){return yn.map(this.tree.onMouseDblClick,zZ)}get onPointer(){return yn.map(this.tree.onPointer,zZ)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,s){const o=new Z$(n),a=i.map(u=>new TNe(u,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=xae(s)||{};return new J$(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return H1(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,s){return H1(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Cf(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield yn.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,i,s),n)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return H1(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Cf(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield yn.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield yn.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield yn.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Cf(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return H1(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return H1(this,void 0,void 0,function*(){let i;return this.subTreeRefreshPromises.forEach((s,o)=>{!i&&INe(o,e)&&(i=s.then(()=>this.refreshNode(e,t,n)))}),i||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return H1(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(s=>i=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield w6.settled(s.map(o=>this.doRefreshSubTree(o,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return H1(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(Xi.empty());else{const s=SC(800);s.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},o=>null),i=this.doGetChildren(e).finally(()=>s.cancel())}try{const s=yield i;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),zv(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=dl(()=>H1(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Jn))}setChildren(e,t,n,i){const s=[...t];if(e.children.length===0&&s.length===0)return[];const o=new Map,a=new Map;for(const d of e.children)if(o.set(d.element,d),this.identityProvider){const h=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:h})}const l=[],u=s.map(d=>{const h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const S=G5({element:d,parent:e,hasChildren:h});return h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(S.collapsedByDefault=!1,l.push(S)),S}const p=this.identityProvider.getId(d).toString(),v=a.get(p);if(v){const S=v.node;return o.delete(S.element),this.nodes.delete(S.element),this.nodes.set(d,S),S.element=d,S.hasChildren=h,n?v.collapsed?(S.children.forEach(E=>yV(E,k=>this.nodes.delete(k.element))),S.children.splice(0,S.children.length),S.stale=!0):l.push(S):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(S.collapsedByDefault=!1,l.push(S)),S}const C=G5({element:d,parent:e,id:p,hasChildren:h});return i&&i.viewState.focus&&i.viewState.focus.indexOf(p)>-1&&i.focus.push(C),i&&i.viewState.selection&&i.viewState.selection.indexOf(p)>-1&&i.selection.push(C),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(p)>-1?l.push(C):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(C.collapsedByDefault=!1,l.push(C)),C});for(const d of o.values())yV(d,h=>this.nodes.delete(h.element));for(const d of u)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...u),e!==this.root&&this.autoExpandSingleChildren&&u.length===1&&l.length===0&&(u[0].collapsedByDefault=!1,l.push(u[0])),l}render(e,t,n){const i=e.children.map(o=>this.asTreeElement(o,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,i,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Xi.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class tj{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new tj(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class ANe{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ie.treeItemLoading.classNamesArray),!0):(t.classList.remove(...Ie.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=nr(this.disposables)}}function ONe(r){const e=r&&xae(r);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return r.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class MNe extends Dae{constructor(e,t,n,i,s,o,a={}){super(e,t,n,s,o,a),this.compressionDelegate=i,this.compressibleNodeMapper=new G$(l=>new tj(l)),this.filter=a.filter}createTree(e,t,n,i,s){const o=new Z$(n),a=i.map(u=>new ANe(u,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=ONe(s)||{};return new Eae(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=p=>this.identityProvider.getId(p).toString(),i=p=>{const v=new Set;for(const C of p){const S=this.tree.getCompressedTreeNode(C===this.root?null:C);if(S.element)for(const E of S.element.elements)v.add(n(E.element))}return v},s=i(this.tree.getSelection()),o=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const u=this.getFocus();let d=!1;const h=p=>{const v=p.element;if(v)for(let C=0;C<v.elements.length;C++){const S=n(v.elements[C].element),E=v.elements[v.elements.length-1].element;s.has(S)&&a.indexOf(E)===-1&&(a.push(E),l=!0),o.has(S)&&u.indexOf(E)===-1&&(u.push(E),d=!0)}p.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(u)}processChildren(e){return this.filter&&(e=Xi.filter(e,t=>{const n=this.filter.filter(t,1),i=RNe(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}function RNe(r){return typeof r=="boolean"?r?1:0:Y$(r)?mN(r.visibility):mN(r)}class PNe extends wae{constructor(e,t,n,i,s,o={}){super(e,t,n,i,o),this.user=e,this.dataSource=s,this.identityProvider=o.identityProvider}createModel(e,t,n){return new X$(e,t,n)}}const z4=new gn("isWindows",Nl,L("isWindows","Whether the operating system is Windows")),FNe="inputFocus";var Gv=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Si=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Bf=lr("listService");let wV=class{constructor(e){this._themeService=e,this.disposables=new Et,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const i=new bae(kf(),"");this.disposables.add(pS(i,this._themeService))}if(this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),cC(e.onDidFocus(()=>this.setLastFocusedList(e)),Bi(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};wV=Gv([Si(0,Fs)],wV);const Iae=new gn("listFocus",!0),U4=new gn("listSupportsMultiselect",!0),Tae=qt.and(Iae,qt.not(FNe)),nj=new gn("listHasSelectionOrFocus",!1),ij=new gn("listDoubleSelection",!1),rj=new gn("listMultiSelection",!1),$4=new gn("listSelectionNavigation",!1),BNe=new gn("treeElementCanCollapse",!1),WNe=new gn("treeElementHasParent",!1),VNe=new gn("treeElementCanExpand",!1),HNe=new gn("treeElementHasChild",!1),kae="listAutomaticKeyboardNavigation";function j4(r,e){const t=r.createScoped(e.getHTMLElement());return Iae.bindTo(t),t}const sL="workbench.list.multiSelectModifier",SV="workbench.list.openMode",If="workbench.list.horizontalScrolling",qR="workbench.list.keyboardNavigation",sj="workbench.list.automaticKeyboardNavigation",bN="workbench.tree.indent",KR="workbench.tree.renderIndentGuides",Nm="workbench.list.smoothScrolling",Ov="workbench.list.mouseWheelScrollSensitivity",Mv="workbench.list.fastScrollSensitivity",GR="workbench.tree.expandMode";function Rv(r){return r.getValue(sL)==="alt"}class zNe extends Je{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Rv(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(sL)&&(this.useAltAsMultipleSelectionModifier=Rv(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:mae(e)}isSelectionRangeChangeEvent(e){return _ae(e)}}function q4(r,e,t){var n;const i=new Et;return[Object.assign(Object.assign({},r),{keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return t.mightProducePrintableCharacter(o)}},smoothScrolling:!!e.getValue(Nm),mouseWheelScrollSensitivity:e.getValue(Ov),fastScrollSensitivity:e.getValue(Mv),multipleSelectionController:(n=r.multipleSelectionController)!==null&&n!==void 0?n:i.add(new zNe(e))}),i]}let LV=class extends Kv{constructor(e,t,n,i,s,o,a,l,u,d){const h=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!u.getValue(If),[p,v]=q4(s,u,d);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},om(l.getColorTheme(),V4)),p),{horizontalScrolling:h})),this.disposables.add(v),this.contextKeyService=j4(o,this),this.themeService=l,this.listSupportsMultiSelect=U4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),$4.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=nj.bindTo(this.contextKeyService),this.listDoubleSelection=ij.bindTo(this.contextKeyService),this.listMultiSelection=rj.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Rv(u),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const S=this.getSelection(),E=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(S.length>0||E.length>0),this.listMultiSelection.set(S.length>1),this.listDoubleSelection.set(S.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const S=this.getSelection(),E=this.getFocus();this.listHasSelectionOrFocus.set(S.length>0||E.length>0)})),this.disposables.add(u.onDidChangeConfiguration(S=>{S.affectsConfiguration(sL)&&(this._useAltAsMultipleSelectionModifier=Rv(u));let E={};if(S.affectsConfiguration(If)&&this.horizontalScrolling===void 0){const k=!!u.getValue(If);E=Object.assign(Object.assign({},E),{horizontalScrolling:k})}if(S.affectsConfiguration(Nm)){const k=!!u.getValue(Nm);E=Object.assign(Object.assign({},E),{smoothScrolling:k})}if(S.affectsConfiguration(Ov)){const k=u.getValue(Ov);E=Object.assign(Object.assign({},E),{mouseWheelScrollSensitivity:k})}if(S.affectsConfiguration(Mv)){const k=u.getValue(Mv);E=Object.assign(Object.assign({},E),{fastScrollSensitivity:k})}Object.keys(E).length>0&&this.updateOptions(E)})),this.navigator=new Nae(this,Object.assign({configurationService:u},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=pS(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};LV=Gv([Si(5,Xn),Si(6,Bf),Si(7,Fs),Si(8,es),Si(9,ks)],LV);let UZ=class extends sNe{constructor(e,t,n,i,s,o,a,l,u,d){const h=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!u.getValue(If),[p,v]=q4(s,u,d);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},om(l.getColorTheme(),V4)),p),{horizontalScrolling:h})),this.disposables=new Et,this.disposables.add(v),this.contextKeyService=j4(o,this),this.themeService=l,this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=U4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),$4.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=Rv(u),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),s.overrideStyles&&this.disposables.add(pS(this,l,s.overrideStyles)),this.disposables.add(u.onDidChangeConfiguration(S=>{S.affectsConfiguration(sL)&&(this._useAltAsMultipleSelectionModifier=Rv(u));let E={};if(S.affectsConfiguration(If)&&this.horizontalScrolling===void 0){const k=!!u.getValue(If);E=Object.assign(Object.assign({},E),{horizontalScrolling:k})}if(S.affectsConfiguration(Nm)){const k=!!u.getValue(Nm);E=Object.assign(Object.assign({},E),{smoothScrolling:k})}if(S.affectsConfiguration(Ov)){const k=u.getValue(Ov);E=Object.assign(Object.assign({},E),{mouseWheelScrollSensitivity:k})}if(S.affectsConfiguration(Mv)){const k=u.getValue(Mv);E=Object.assign(Object.assign({},E),{fastScrollSensitivity:k})}Object.keys(E).length>0&&this.updateOptions(E)})),this.navigator=new Nae(this,Object.assign({configurationService:u},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=pS(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};UZ=Gv([Si(5,Xn),Si(6,Bf),Si(7,Fs),Si(8,es),Si(9,ks)],UZ);let $Z=class extends H4{constructor(e,t,n,i,s,o,a,l,u,d,h){const p=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!d.getValue(If),[v,C]=q4(o,d,h);super(e,t,n,i,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},om(u.getColorTheme(),V4)),v),{horizontalScrolling:p})),this.disposables.add(C),this.contextKeyService=j4(a,this),this.themeService=u,this.listSupportsMultiSelect=U4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),$4.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=nj.bindTo(this.contextKeyService),this.listDoubleSelection=ij.bindTo(this.contextKeyService),this.listMultiSelection=rj.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Rv(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const E=this.getSelection(),k=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(E.length>0||k.length>0),this.listMultiSelection.set(E.length>1),this.listDoubleSelection.set(E.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const E=this.getSelection(),k=this.getFocus();this.listHasSelectionOrFocus.set(E.length>0||k.length>0)})),this.disposables.add(d.onDidChangeConfiguration(E=>{E.affectsConfiguration(sL)&&(this._useAltAsMultipleSelectionModifier=Rv(d));let k={};if(E.affectsConfiguration(If)&&this.horizontalScrolling===void 0){const D=!!d.getValue(If);k=Object.assign(Object.assign({},k),{horizontalScrolling:D})}if(E.affectsConfiguration(Nm)){const D=!!d.getValue(Nm);k=Object.assign(Object.assign({},k),{smoothScrolling:D})}if(E.affectsConfiguration(Ov)){const D=d.getValue(Ov);k=Object.assign(Object.assign({},k),{mouseWheelScrollSensitivity:D})}if(E.affectsConfiguration(Mv)){const D=d.getValue(Mv);k=Object.assign(Object.assign({},k),{fastScrollSensitivity:D})}Object.keys(k).length>0&&this.updateOptions(k)})),this.navigator=new UNe(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=pS(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};$Z=Gv([Si(6,Xn),Si(7,Bf),Si(8,Fs),Si(9,es),Si(10,ks)],$Z);class oj extends Je{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new Ae),this.onDidOpen=this._onDidOpen.event,this._register(yn.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(SV))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(SV))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,i,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,s=!0,o=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}_open(e,t,n,i,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:s})}}class Nae extends oj{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class UNe extends oj{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class $Ne extends oj{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function jNe(r,e){let t=!1;return n=>{if(t)return t=!1,!1;const i=e.softDispatch(n,r);return i&&i.enterChord?(t=!0,!1):(t=!1,!0)}}let jZ=class extends J${constructor(e,t,n,i,s,o,a,l,u,d,h){const{options:p,getAutomaticKeyboardNavigation:v,disposable:C}=k2(t,s,o,u,d,h);super(e,t,n,i,p),this.disposables.add(C),this.internals=new mS(this,s,v,s.overrideStyles,o,a,l,u,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};jZ=Gv([Si(5,Xn),Si(6,Bf),Si(7,Fs),Si(8,es),Si(9,ks),Si(10,Kc)],jZ);let qZ=class extends Eae{constructor(e,t,n,i,s,o,a,l,u,d,h){const{options:p,getAutomaticKeyboardNavigation:v,disposable:C}=k2(t,s,o,u,d,h);super(e,t,n,i,p),this.disposables.add(C),this.internals=new mS(this,s,v,s.overrideStyles,o,a,l,u,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};qZ=Gv([Si(5,Xn),Si(6,Bf),Si(7,Fs),Si(8,es),Si(9,ks),Si(10,Kc)],qZ);let KZ=class extends PNe{constructor(e,t,n,i,s,o,a,l,u,d,h,p){const{options:v,getAutomaticKeyboardNavigation:C,disposable:S}=k2(t,o,a,d,h,p);super(e,t,n,i,s,v),this.disposables.add(S),this.internals=new mS(this,o,C,o.overrideStyles,a,l,u,d,p),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};KZ=Gv([Si(6,Xn),Si(7,Bf),Si(8,Fs),Si(9,es),Si(10,ks),Si(11,Kc)],KZ);let EV=class extends Dae{constructor(e,t,n,i,s,o,a,l,u,d,h,p){const{options:v,getAutomaticKeyboardNavigation:C,disposable:S}=k2(t,o,a,d,h,p);super(e,t,n,i,s,v),this.disposables.add(S),this.internals=new mS(this,o,C,o.overrideStyles,a,l,u,d,p),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};EV=Gv([Si(6,Xn),Si(7,Bf),Si(8,Fs),Si(9,es),Si(10,ks),Si(11,Kc)],EV);let GZ=class extends MNe{constructor(e,t,n,i,s,o,a,l,u,d,h,p,v){const{options:C,getAutomaticKeyboardNavigation:S,disposable:E}=k2(t,a,l,h,p,v);super(e,t,n,i,s,o,C),this.disposables.add(E),this.internals=new mS(this,a,S,a.overrideStyles,l,u,d,h,v),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};GZ=Gv([Si(7,Xn),Si(8,Bf),Si(9,Fs),Si(10,es),Si(11,ks),Si(12,Kc)],GZ);function k2(r,e,t,n,i,s){var o;const a=()=>{let C=!!t.getContextKeyValue(kae);return C&&(C=!!n.getValue(sj)),C},l=s.isScreenReaderOptimized(),u=e.simpleKeyboardNavigation||l?"simple":n.getValue(qR),d=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(If),[h,p]=q4(e,n,i),v=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:p,options:Object.assign(Object.assign({keyboardSupport:!1},h),{indent:typeof n.getValue(bN)=="number"?n.getValue(bN):void 0,renderIndentGuides:n.getValue(KR),smoothScrolling:!!n.getValue(Nm),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:u==="simple",filterOnType:u==="filter",horizontalScrolling:d,keyboardNavigationEventFilter:jNe(r,i),additionalScrollHeight:v,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(o=e.expandOnlyOnTwistieClick)!==null&&o!==void 0?o:n.getValue(GR)==="doubleClick"})}}let mS=class{constructor(e,t,n,i,s,o,a,l,u){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=j4(s,e),this.listSupportsMultiSelect=U4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),$4.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=nj.bindTo(this.contextKeyService),this.hasDoubleSelection=ij.bindTo(this.contextKeyService),this.hasMultiSelection=rj.bindTo(this.contextKeyService),this.treeElementCanCollapse=BNe.bindTo(this.contextKeyService),this.treeElementHasParent=WNe.bindTo(this.contextKeyService),this.treeElementCanExpand=VNe.bindTo(this.contextKeyService),this.treeElementHasChild=HNe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Rv(l);const h=new Set;h.add(kae);const p=()=>{const S=u.isScreenReaderOptimized()?"simple":l.getValue(qR);e.updateOptions({simpleKeyboardNavigation:S==="simple",filterOnType:S==="filter"})};this.updateStyleOverrides(i);const v=()=>{const C=e.getFocus()[0];if(!C)return;const S=e.getNode(C);this.treeElementCanCollapse.set(S.collapsible&&!S.collapsed),this.treeElementHasParent.set(!!e.getParentElement(C)),this.treeElementCanExpand.set(S.collapsible&&S.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(C))};this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const C=e.getSelection(),S=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(C.length>0||S.length>0),this.hasMultiSelection.set(C.length>1),this.hasDoubleSelection.set(C.length===2)})}),e.onDidChangeFocus(()=>{const C=e.getSelection(),S=e.getFocus();this.hasSelectionOrFocus.set(C.length>0||S.length>0),v()}),e.onDidChangeCollapseState(v),e.onDidChangeModel(v),l.onDidChangeConfiguration(C=>{let S={};if(C.affectsConfiguration(sL)&&(this._useAltAsMultipleSelectionModifier=Rv(l)),C.affectsConfiguration(bN)){const E=l.getValue(bN);S=Object.assign(Object.assign({},S),{indent:E})}if(C.affectsConfiguration(KR)){const E=l.getValue(KR);S=Object.assign(Object.assign({},S),{renderIndentGuides:E})}if(C.affectsConfiguration(Nm)){const E=!!l.getValue(Nm);S=Object.assign(Object.assign({},S),{smoothScrolling:E})}if(C.affectsConfiguration(qR)&&p(),C.affectsConfiguration(sj)&&(S=Object.assign(Object.assign({},S),{automaticKeyboardNavigation:n()})),C.affectsConfiguration(If)&&t.horizontalScrolling===void 0){const E=!!l.getValue(If);S=Object.assign(Object.assign({},S),{horizontalScrolling:E})}if(C.affectsConfiguration(GR)&&t.expandOnlyOnTwistieClick===void 0&&(S=Object.assign(Object.assign({},S),{expandOnlyOnTwistieClick:l.getValue(GR)==="doubleClick"})),C.affectsConfiguration(Ov)){const E=l.getValue(Ov);S=Object.assign(Object.assign({},S),{mouseWheelScrollSensitivity:E})}if(C.affectsConfiguration(Mv)){const E=l.getValue(Mv);S=Object.assign(Object.assign({},S),{fastScrollSensitivity:E})}Object.keys(S).length>0&&e.updateOptions(S)}),this.contextKeyService.onDidChangeContext(C=>{C.affectsSome(h)&&e.updateOptions({automaticKeyboardNavigation:n()})}),u.onDidChangeScreenReaderOptimized(()=>p())),this.navigator=new $Ne(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){nr(this.styler),this.styler=e?pS(this.tree,this.themeService,e):Je.None}dispose(){this.disposables=nr(this.disposables),nr(this.styler),this.styler=void 0}};mS=Gv([Si(4,Xn),Si(5,Bf),Si(6,Fs),Si(7,es),Si(8,Kc)],mS);const qNe=mo.as(QS.Configuration);qNe.registerConfiguration({id:"workbench",order:7,title:L("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[sL]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[L("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),L("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:L({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[SV]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:L({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[If]:{type:"boolean",default:!1,description:L("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[bN]:{type:"number",default:8,minimum:0,maximum:40,description:L("tree indent setting","Controls tree indentation in pixels.")},[KR]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:L("render tree indent guides","Controls whether the tree should render indent guides.")},[Nm]:{type:"boolean",default:!1,description:L("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Ov]:{type:"number",default:1,description:L("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Mv]:{type:"number",default:5,description:L("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[qR]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[L("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),L("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),L("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:L("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[sj]:{type:"boolean",default:!0,markdownDescription:L("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[GR]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:L("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var $s;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})($s||($s={}));(function(r){function e(o,a){return a-o}r.compare=e;const t=Object.create(null);t[r.Error]=L("sev.error","Error"),t[r.Warning]=L("sev.warning","Warning"),t[r.Info]=L("sev.info","Info");function n(o){return t[o]||""}r.toString=n;function i(o){switch(o){case so.Error:return r.Error;case so.Warning:return r.Warning;case so.Info:return r.Info;case so.Ignore:return r.Hint}}r.fromSeverity=i;function s(o){switch(o){case r.Error:return so.Error;case r.Warning:return so.Warning;case r.Info:return so.Info;case r.Hint:return so.Ignore}}r.toSeverity=s})($s||($s={}));var YR;(function(r){const e="";function t(i){return n(i,!0)}r.makeKey=t;function n(i,s){let o=[e];return i.source?o.push(i.source.replace("","\\")):o.push(e),i.code?typeof i.code=="string"?o.push(i.code.replace("","\\")):o.push(i.code.value.replace("","\\")):o.push(e),i.severity!==void 0&&i.severity!==null?o.push($s.toString(i.severity)):o.push(e),i.message&&s?o.push(i.message.replace("","\\")):o.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?o.push(i.startLineNumber.toString()):o.push(e),i.startColumn!==void 0&&i.startColumn!==null?o.push(i.startColumn.toString()):o.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?o.push(i.endLineNumber.toString()):o.push(e),i.endColumn!==void 0&&i.endColumn!==null?o.push(i.endColumn.toString()):o.push(e),o.push(e),o.join("")}r.makeKeyOptionalMessage=n})(YR||(YR={}));const N2=lr("markerService");class KNe{constructor(){this._byResource=new Mu,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let s=this._byOwner.get(t);s||(s=new Mu,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,i=!1,s=this._byResource.get(e);s&&(n=s.delete(t));let o=this._byOwner.get(t);if(o&&(i=o.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:Xi.empty():$n.isUri(e)?(s=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&s!==void 0?s:Xi.empty():Xi.map(Xi.concat(...this._byOwner.values()),o=>o[1])}}class GNe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Mu,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===wi.inMemory||e.scheme===wi.walkThrough||e.scheme===wi.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===$s.Error?t.errors+=1:n===$s.Warning?t.warnings+=1:n===$s.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class hw{constructor(){this._onMarkerChanged=new $ve({delay:0,merge:hw._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new KNe,this._stats=new GNe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(Nre(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const s of n){const o=hw._toMarker(e,t,s);o&&i.push(o)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:s,message:o,source:a,startLineNumber:l,startColumn:u,endLineNumber:d,endColumn:h,relatedInformation:p,tags:v}=n;if(o)return l=l>0?l:1,u=u>0?u:1,d=d>=l?d:l,h=h>0?h:u,{resource:t,owner:e,code:i,severity:s,message:o,source:a,startLineNumber:l,startColumn:u,endLineNumber:d,endColumn:h,relatedInformation:p,tags:v}}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(hw._accept(l,i)){const u=a.push(l);if(s>0&&u===s)break}return a}else return[]}else if(!t&&!n){const o=[];for(let a of this._data.values())for(let l of a)if(hw._accept(l,i)){const u=o.push(l);if(s>0&&u===s)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const u of l)if(hw._accept(u,i)){const d=a.push(u);if(s>0&&d===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Mu;for(let n of e)for(let i of n)t.set(i,!0);return Array.from(t.keys())}}var FT=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},EE;(function(r){r[r.None=0]="None",r[r.Initialized=1]="Initialized",r[r.Closed=2]="Closed"})(EE||(EE={}));class CN extends Je{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Ae),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=EE.None,this.cache=new Map,this.flushDelayer=new r0e(CN.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((i,s)=>this.accept(s,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.accept(i,void 0))}accept(e,t){if(this.state===EE.Closed)return;let n=!1;wh(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return wh(n)?t:n}getBoolean(e,t){const n=this.get(e);return wh(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return wh(n)?t:parseInt(n,10)}set(e,t){return FT(this,void 0,void 0,function*(){if(this.state===EE.Closed)return;if(wh(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return FT(this,void 0,void 0,function*(){if(!(this.state===EE.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return FT(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return FT(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}CN.DEFAULT_FLUSH_DELAY=100;class YZ{constructor(){this.onDidChangeItemsExternal=yn.None,this.items=new Map}updateItems(e){return FT(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const jA="__$__targetStorageMarker",Yv=lr("storageService");var ZR;(function(r){r[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN"})(ZR||(ZR={}));class K4 extends Je{constructor(e={flushInterval:K4.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new IM),this._onDidChangeTarget=this._register(new IM),this._onWillSaveState=this._register(new Ae),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===jA?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i){if(wh(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,n,i),(s=this.getStorage(n))===null||s===void 0||s.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var i,s;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(i=this.getStorage(t))===null||i===void 0||i.set(jA,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(s=this.getStorage(t))===null||s===void 0||s.set(jA,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(jA,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}K4.DEFAULT_FLUSH_INTERVAL=60*1e3;class YNe extends K4{constructor(){super(),this.globalStorage=this._register(new CN(new YZ)),this.workspaceStorage=this._register(new CN(new YZ)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var Aae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},QO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let xV=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new DV(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};xV=Aae([QO(0,js)],xV);let DV=class uE{constructor(e,t,n,i,s){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=i,this._menuService=s,this._disposables=new Et,this._menuGroups=[],this._contextKeys=new Set,this._build();const o=new Qr(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(o),this._disposables.add(Pu.onDidChangeMenu(u=>{u.has(e)&&o.schedule()}));const a=this._disposables.add(new Et),l=()=>{const u=new Qr(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(u),a.add(i.onDidChangeContext(d=>{d.affectsSome(this._contextKeys)&&u.schedule()}))};this._onDidChange=new Ae({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Pu.getMenuItems(this._id);let t;e.sort(uE._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(uE._fillInKbExprKeys(e.when,this._contextKeys),AT(e)){if(e.command.precondition&&uE._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;uE._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Pu.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[i,s]=n,o=[];for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=AT(a)?new DC(a.command,a.alt,e,this._contextKeyService,this._commandService):new TU(a,this._menuService,this._contextKeyService,e);o.push(l)}o.length>0&&t.push([i,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;let a=n.localeCompare(i);if(a!==0)return a}let s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:uE._compareTitles(AT(e)?e.command.title:e.title,AT(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}};DV=Aae([QO(2,js),QO(3,Xn),QO(4,ZS)],DV);var ZNe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class XNe extends Je{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Bi(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let s=0;s<i.length;s++)this._markersData.set(i[s],e[s]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}}let IV=class extends Je{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new Ae),this._markerDecorations=new Mu,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new XNe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===wi.inMemory||e.uri.scheme===wi.internal||e.uri.scheme===wi.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=se.lift(t);return t.severity===$s.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,i,s,o;switch(e.severity){case $s.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case $s.Warning:t="squiggly-warning",n=Ps(FLe),i=20,o={color:Ps(uye),position:Pd.Inline};break;case $s.Info:t="squiggly-info",n=Ps(BLe),i=10;break;case $s.Error:default:t="squiggly-error",n=Ps(PLe),i=30,o={color:Ps(lye),position:Pd.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Wd.Right},minimap:o,zIndex:i,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};IV=ZNe([ZZ(0,aa),ZZ(1,N2)],IV);var QNe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let TV=class extends Je{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Ae,this._accessibilityModeEnabledContext=S2.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};TV=QNe([XZ(0,Xn),XZ(1,es)],TV);var qA=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class JNe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return qA(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,i=document.body.appendChild(Ct("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return qA(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return qA(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return qA(this,void 0,void 0,function*(){this.findText=e})}}var e2e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},QZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},KA=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function GA(r){return r.scheme===wi.file?r.fsPath:r.path}let Oae=0;class YA{constructor(e,t,n,i,s,o,a){this.id=++Oae,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class JZ{constructor(e,t){this.resourceLabel=e,this.reason=t}}class eX{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);let n=[];return e.length>0&&n.push(L({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(L({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class t2e{constructor(e,t,n,i,s,o,a){this.id=++Oae,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new eX),this.removedResources.has(t)||this.removedResources.set(t,new JZ(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new eX),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new JZ(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Mae{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new jse(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const u=this._past[a];n&&(i>=t||u.id!==e.elements[i])&&(n=!1,s=0),!n&&u.type===1&&u.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class Z5{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const Rae=new Mae("","");Rae.locked=!0;let XR=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=mx.None,n=av.None){if(e.type===0){const i=GA(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new YA(e,i,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,s=[],o=[];for(const a of e.resources){const l=GA(a),u=this.getUriComparisonKey(a);i.has(u)||(i.add(u),s.push(l),o.push(u))}s.length===1?this._pushElement(new YA(e,s[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new t2e(e,s,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],s=e.strResources[t];let o;this._editStacks.has(s)?o=this._editStacks.get(s):(o=new Mae(i,s),this._editStacks.set(s,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const o=GA(s.resource),a=this.getUriComparisonKey(s.resource),l=new YA(s,o,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const o=GA(s.resource),a=this.getUriComparisonKey(s.resource),l=new YA(s,o,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new jse(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=i)}return[t,n]}canUndo(e){if(e instanceof av){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Jn(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,s){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),i.dispose(),s()),l=>(o(),i.dispose(),this._onError(l,e))):(o(),i.dispose(),s())}_invokeWorkspacePrepare(e){return KA(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return Je.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?Je.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(Je.None);const n=e.actual.prepareUndoRedo();return n?nU(n)?t(n):n.then(i=>t(i)):t(Je.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||Rae);return new Z5(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new ZA(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new ZA}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,L({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,L({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,L({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,L({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,L({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,i,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return KA(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(so.Info,L("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[L({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),L("nok","Undo this File"),L("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;i=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return s.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=L({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new Z5([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof av){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),s=i.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(i,s,n)}finally{}}_confirmAndContinueUndo(e,t,n){return KA(this,void 0,void 0,function*(){if((yield this._dialogService.show(so.Info,L("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[L("confirmDifferentSource.yes","Yes"),L("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=i)}return[t,n]}canRedo(e){if(e instanceof av){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new ZA(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new ZA}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,L({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,L({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,L({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,L({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,L({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return KA(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return i.dispose(),s.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=L({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new Z5([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof av){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[i,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};XR=e2e([QZ(0,x2),QZ(1,Oo)],XR);class ZA{constructor(e){this.returnValue=e}}KC(b2,XR);const n2e=new RegExp(`(\\\\)?\\$\\((${Fc.iconNameExpression}(?:${Fc.iconModifierExpression})?)\\)`,"g");function Uw(r){const e=new Array;let t,n=0,i=0;for(;(t=n2e.exec(r))!==null;){i=t.index||0,e.push(r.substring(n,i)),n=(t.index||0)+t[0].length;const[,s,o]=t;e.push(s?`$(${o})`:i2e({id:o}))}return n<r.length&&e.push(r.substring(n)),e}function i2e(r){const e=Ct("span");return e.classList.add(...Fc.asClassNameArray(r)),e}const r2e={buttonBackground:We.fromHex("#0E639C"),buttonHoverBackground:We.fromHex("#006BB3"),buttonForeground:We.white};class tX extends Je{constructor(e,t){super(),this._onDidClick=this._register(new Ae),this.options=t||Object.create(null),qv(this.options,r2e,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Rr.addTarget(this._element)),[xn.CLICK,as.Tap].forEach(n=>{this._register(St(this._element,n,i=>{if(!this.enabled){Ir.stop(i);return}this._onDidClick.fire(i)}))}),this._register(St(this._element,xn.KEY_DOWN,n=>{const i=new Ts(n);let s=!1;this.enabled&&(i.equals(3)||i.equals(10))?(this._onDidClick.fire(n),s=!0):i.equals(9)&&(this._element.blur(),s=!0),s&&Ir.stop(i,!0)})),this._register(St(this._element,xn.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(St(this._element,xn.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(lx(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?EC(this._element,...Uw(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const s2e={badgeBackground:We.fromHex("#4D4D4D"),badgeForeground:We.fromHex("#FFFFFF")};class kV{constructor(e,t){this.count=0,this.options=t||Object.create(null),qv(this.options,s2e,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=st(e,Ct(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=wf(this.countFormat,this.count),this.element.title=wf(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const nX="done",iX="active",X5="infinite",rX="discrete",o2e={progressBarBackground:We.fromHex("#0E70C0")};class a2e extends Je{constructor(e,t){super(),this.options=t||Object.create(null),qv(this.options,o2e,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new Qr(()=>yh(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(iX,X5,rX),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(nX),this.element.classList.contains(X5)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(rX,nX),this.element.classList.add(iX,X5),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class aj{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const Pae=new aj("id#");const Q5={},l2e=new aj("quick-input-button-icon-");function NV(r){if(!r)return;let e;const t=r.dark.toString();return Q5[t]?e=Q5[t]:(e=l2e.nextId(),D6(`.${e}`,`background-image: ${eS(r.light||r.dark)}`),D6(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${eS(r.dark)}`),Q5[t]=e),e}const u2e={ctrlCmd:!1,alt:!1};var yN;(function(r){r[r.Blur=1]="Blur",r[r.Gesture=2]="Gesture",r[r.Other=3]="Other"})(yN||(yN={}));var nm;(function(r){r[r.NONE=0]="NONE",r[r.FIRST=1]="FIRST",r[r.SECOND=2]="SECOND",r[r.LAST=3]="LAST"})(nm||(nm={}));function c2e(r,e={}){const t=lj(e);return t.textContent=r,t}function Fae(r,e={}){const t=lj(e);return Bae(t,h2e(r,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function lj(r){const e=r.inline?"span":"div",t=document.createElement(e);return r.className&&(t.className=r.className),t}class d2e{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Bae(r,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");s.href="#",t.disposables.add(ja(s,"click",o=>{t.callback(String(e.index),o)})),i=s}else e.type===8?i=document.createElement("br"):e.type===1&&(i=r);i&&r!==i&&r.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(s=>{Bae(i,s,t,n)})}function h2e(r,e){const t={type:1,children:[]};let n=0,i=t;const s=[],o=new d2e(r);for(;!o.eos();){let a=o.next();const l=a==="\\"&&AV(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&f2e(a,e)&&a===o.peek()){o.advance(),i.type===2&&(i=s.pop());const u=AV(a,e);if(i.type===u||i.type===5&&u===6)i=s.pop();else{const d={type:u,children:[]};u===5&&(d.index=n,n++),i.children.push(d),s.push(i),i=d}}else if(a===`
`)i.type===2&&(i=s.pop()),i.children.push({type:8});else if(i.type!==2){const u={type:2,content:a};i.children.push(u),s.push(i),i=u}else i.content+=a}return i.type===2&&(i=s.pop()),t}function f2e(r,e){return AV(r,e)!==0}function AV(r,e){switch(r){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class g2e{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class p2e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new g2e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const _T=Ct,m2e={inputBackground:We.fromHex("#3C3C3C"),inputForeground:We.fromHex("#CCCCCC"),inputValidationInfoBorder:We.fromHex("#55AAFF"),inputValidationInfoBackground:We.fromHex("#063B49"),inputValidationWarningBorder:We.fromHex("#B89500"),inputValidationWarningBackground:We.fromHex("#352A05"),inputValidationErrorBorder:We.fromHex("#BE1100"),inputValidationErrorBackground:We.fromHex("#5A1D1D")};class Wae extends Ah{constructor(e,t,n){var i;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Ae),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Ae),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),qv(this.options,m2e,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=st(e,_T(".monaco-inputbox.idle"));let s=this.options.flexibleHeight?"textarea":"input",o=st(this.element,_T(".ibwrapper"));if(this.input=st(o,_T(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=st(o,_T("div.mirror")),this.mirror.innerText="",this.scrollableElement=new g$(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),st(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(u=>this.input.scrollTop=u.scrollTop));const a=this._register(new Hr(document,"selectionchange")),l=yn.filter(a.event,()=>{const u=document.getSelection();return(u==null?void 0:u.anchorNode)===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Nv(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:x6(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Mg(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Mg(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=st(i,_T(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?Fae(this.message.content,s):c2e(this.message.content,s);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",st(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=L("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=L("alertWarningMessage","Warning: {0}",this.message.content):n=L("alertInfoMessage","Info: {0}",this.message.content),Il(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=x6(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,s=t.value;n!==null&&i!==null&&(this.value=s.substr(0,n)+e+s.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class Vae extends Wae{constructor(e,t,n){const i=L({key:"history.inputbox.hint",comment:["Text will be prefixed with  plus a single space, then used as a hint where input field keeps history"]},"for history"),s=` or  ${i}`,o=` ( ${i})`;super(e,t,n),this.history=new p2e(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?s:o,u=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=u:this.setPlaceHolder(u)}};this.observer=new MutationObserver((l,u)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=u=>{if(this.placeholder.endsWith(u)){const d=this.placeholder.slice(0,this.placeholder.length-u.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(o)||l(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,MM(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,MM(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const _2e=Ct;class v2e extends Je{constructor(e){super(),this.parent=e,this.onKeyDown=t=>St(this.inputBox.inputElement,xn.KEY_DOWN,n=>{t(new Ts(n))}),this.onMouseDown=t=>St(this.inputBox.inputElement,xn.MOUSE_DOWN,n=>{t(new yf(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=st(this.parent,_2e(".quick-input-box")),this.inputBox=this._register(new Wae(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===so.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===so.Info?1:e===so.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===so.Info?1:e===so.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class _S{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t==null?void 0:t.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=st(e,Ct("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=_S.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Xg(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);e.push(Ct("span",void 0,...this.supportIcons?Uw(o):[o])),t=n.end}const i=this.text.substring(n.start,n.end),s=Ct("span.highlight",void 0,...this.supportIcons?Uw(i):[i]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(Ct("span",void 0,...this.supportIcons?Uw(n):[n]))}EC(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(s,o)=>{i=s===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=i),a.end>=o&&(a.end+=i));return n+=i,""})}}class Wb{constructor(e="",t=!1){var n,i,s;if(this.value=e,typeof this.value!="string")throw ym("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(i=t.supportThemeIcons)!==null&&i!==void 0?i:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=b2e(this.supportThemeIcons?bke(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function wN(r){return Hae(r)?!r.value:Array.isArray(r)?r.every(wN):!0}function Hae(r){return r instanceof Wb?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function b2e(r){return r.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function J5(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function C2e(r){const e=[],t=r.split("|").map(i=>i.trim());r=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),o=i?i[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),u=isFinite(parseInt(o));l&&e.push(`width="${a}"`),u&&e.push(`height="${o}"`)}return{href:r,dimensions:e}}var OV=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function y2e(r,e){Nf(e)?r.title=e:e!=null&&e.markdownNotSupportedFallback?r.title=e.markdownNotSupportedFallback:r.removeAttribute("title")}class w2e{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return OV(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let i;if(e===void 0||Nf(e)||e instanceof HTMLElement)i=e;else if(!BM(e.markdown))i=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(L("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Fu;const s=this._cancellationTokenSource.token;if(i=yield e.markdown(s),this.isDisposed||s.isCancellationRequested)return}this.show(i,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const i={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(i,t)}n==null||n.dispose()}hasContent(e){return e?Hae(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function S2e(r,e,t){let n,i;const s=(d,h)=>{var p;d&&(i==null||i.dispose(),i=void 0),h&&(n==null||n.dispose(),n=void 0),(p=r.onDidHideHover)===null||p===void 0||p.call(r)},o=(d,h,p)=>new cc(()=>OV(this,void 0,void 0,function*(){(!i||i.isDisposed)&&(i=new w2e(r,p||e,d>0),yield i.update(t,h))}),d),a=()=>{if(n)return;const d=new Et,h=C=>s(!1,C.fromElement===e);d.add(St(e,xn.MOUSE_LEAVE,h,!0));const p=()=>s(!0,!0);d.add(St(e,xn.MOUSE_DOWN,p,!0));const v={targetElements:[e],dispose:()=>{}};if(r.placement===void 0||r.placement==="mouse"){const C=S=>v.x=S.x+10;d.add(St(e,xn.MOUSE_MOVE,C,!0))}d.add(o(r.delay,!1,v)),n=d},l=St(e,xn.MOUSE_OVER,a,!0);return{show:d=>{s(!1,!0),o(0,d)},hide:()=>{s(!0,!0)},update:d=>OV(this,void 0,void 0,function*(){t=d,yield i==null?void 0:i.update(t)}),dispose:()=>{l.dispose(),s(!0,!0)}}}class eB{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class QR extends Je{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new eB(st(e,Ct(".monaco-icon-label")))),this.labelContainer=st(this.domNode.element,Ct(".monaco-icon-label-container"));const n=st(this.labelContainer,Ct("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new eB(st(this.labelContainer,Ct("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new x2e(n,!!t.supportIcons):this.nameNode=new L2e(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new _S(st(this.descriptionContainer.element,Ct("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new eB(st(this.descriptionContainer.element,Ct("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"];n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough")),this.domNode.className=i.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof _S?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)y2e(e,t);else{const i=S2e(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class L2e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Xg(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=st(this.container,Ct("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],s=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;st(this.container,Ct("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&st(this.container,Ct("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function E2e(r,e,t){if(!t)return;let n=0;return r.map(i=>{const s={start:n,end:n+i.length},o=t.map(a=>iu.intersect(s,a)).filter(a=>!iu.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=s.end+e.length,o})}class x2e{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Xg(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new _S(st(this.container,Ct("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",i=E2e(e,n,t==null?void 0:t.matches);for(let s=0;s<e.length;s++){const o=e[s],a=i?i[s]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${s}`,u=Ct("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new _S(st(this.container,u),{supportIcons:this.supportIcons}).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),s<e.length-1&&st(u,Ct("span.label-separator",void 0,n))}}}}const XA=Ct;class uj{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=st(e,XA(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&uj.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(st(this.domNode,XA("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Ca(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const i=N$.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,!!(n!=null&&n.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,!!(n!=null&&n.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,!!(n!=null&&n.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,!!(n!=null&&n.metaKey),i.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,i){st(e,this.createKeyElement(t,n?".highlight":"")),i&&st(e,XA("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){st(e,this.createKeyElement(L("unbound","Unbound")))}createKeyElement(e,t=""){const n=XA("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Xg(e.firstPart,t.firstPart)&&Xg(e.chordPart,t.chordPart)}}const sX=new OE(()=>{const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}});function D2e(r,e,t=!1){const n=r||"",i=e||"",s=sX.value.collator.compare(n,i);return sX.value.collatorIsNumeric&&s===0&&n!==i?n<i?-1:1:s}function I2e(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),s=T2e(r,e,t);if(s)return s;const o=n.endsWith(t),a=i.endsWith(t);if(o!==a)return o?-1:1;const l=D2e(n,i);return l!==0?l:n.localeCompare(i)}function T2e(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),s=n.startsWith(t),o=i.startsWith(t);if(s!==o)return s?-1:1;if(s&&o){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}var zae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},k2e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const K_=Ct;class N2e{constructor(e){this.hidden=!1,this._onChecked=new Ae,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class A2{get templateId(){return A2.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=st(e,K_(".quick-input-list-entry"));const n=st(t.entry,K_("label.quick-input-list-label"));t.toDisposeTemplate.push(ja(n,xn.CLICK,u=>{t.checkbox.offsetParent||u.preventDefault()})),t.checkbox=st(n,K_("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(ja(t.checkbox,xn.CHANGE,u=>{t.element.checked=t.checkbox.checked}));const i=st(n,K_(".quick-input-list-rows")),s=st(i,K_(".quick-input-list-row")),o=st(i,K_(".quick-input-list-row"));t.label=new QR(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=st(s,K_(".quick-input-list-entry-keybinding"));t.keybinding=new uj(a,_f);const l=st(o,K_(".quick-input-list-label-meta"));return t.detail=new QR(l,{supportHighlights:!0,supportIcons:!0}),t.separator=st(t.entry,K_(".quick-input-list-separator")),t.actionBar=new Nv(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=nr(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(u=>n.checkbox.checked=u));const{labelHighlights:i,descriptionHighlights:s,detailHighlights:o}=e,a=Object.create(null);a.matches=i||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=s||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:o,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((u,d)=>{let h=u.iconClass||(u.iconPath?NV(u.iconPath):void 0);u.alwaysVisible&&(h=h?`${h} always-visible`:"always-visible");const p=new Ef(`id-${d}`,"",h,!0,()=>k2e(this,void 0,void 0,function*(){e.fireButtonTriggered({button:u,item:e.item})}));return p.tooltip=u.tooltip||"",p}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=nr(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=nr(e.toDisposeElement),e.toDisposeTemplate=nr(e.toDisposeTemplate)}}A2.ID="listelement";class A2e{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return A2.ID}}var To;(function(r){r[r.First=1]="First",r[r.Second=2]="Second",r[r.Last=3]="Last",r[r.Next=4]="Next",r[r.Previous=5]="Previous",r[r.NextPage=6]="NextPage",r[r.PreviousPage=7]="PreviousPage"})(To||(To={}));class cj{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new Ae,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Ae,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Ae,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Ae,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Ae,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new Ae,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Ae,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=st(this.parent,K_(".quick-input-list"));const i=new A2e,s=new M2e;this.list=n.createList("QuickInput",this.container,i,[new A2],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:s}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new Ts(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(zi?o.metaKey:o.ctrlKey)&&this.list.setFocus(rc(this.list.length));break;case 16:const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:const u=this.list.getFocus();u.length===1&&u[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(St(this.container,xn.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return yn.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return yn.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=nr(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,i,s)=>{var o,a,l;if(i.type!=="separator"){const u=s&&e[s-1],d=i.label&&i.label.replace(/\r?\n/g," "),h=i.meta&&i.meta.replace(/\r?\n/g," "),p=i.description&&i.description.replace(/\r?\n/g," "),v=i.detail&&i.detail.replace(/\r?\n/g," "),C=i.ariaLabel||[d,p,v].map(S=>q0e(S)).filter(S=>!!S).join(", ");n.push(new N2e({index:s,item:i,saneLabel:d,saneMeta:h,saneAriaLabel:C,saneDescription:p,saneDetail:v,labelHighlights:(o=i.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=i.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=i.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:u&&u.type==="separator"?u:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,i,s)=>(n.set(i.item,s),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===To.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=To.First),e===To.Previous&&this.list.getFocus()[0]===0&&(e=To.Last),e===To.Second&&this.list.length<2&&(e=To.First),e){case To.First:this.list.focusFirst();break;case To.Second:this.list.focusNth(1);break;case To.Last:this.list.focusLast();break;case To.Next:this.list.focusNext();break;case To.Previous:this.list.focusPrevious();break;case To.NextPage:this.list.focusNextPage();break;case To.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const i=n.index&&this.inputElements[n.index-1];n.separator=i&&i.type==="separator"?i:void 0});else{let n;this.elements.forEach(i=>{const s=this.matchOnLabel?Md($A(e,UA(i.saneLabel))):void 0,o=this.matchOnDescription?Md($A(e,UA(i.saneDescription||""))):void 0,a=this.matchOnDetail?Md($A(e,UA(i.saneDetail||""))):void 0,l=this.matchOnMeta?Md($A(e,UA(i.saneMeta||""))):void 0;if(s||o||a||l?(i.labelHighlights=s,i.descriptionHighlights=o,i.detailHighlights=a,i.hidden=!1):(i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!i.item.alwaysShow),i.separator=void 0,!this.sortByLabel){const u=i.index&&this.inputElements[i.index-1];n=u&&u.type==="separator"?u:n,n&&!i.hidden&&(i.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((i,s)=>O2e(i,s,n))}return this.elementsToIndexes=t.reduce((n,i,s)=>(n.set(i.item,s),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=nr(this.elementDisposables),this.disposables=nr(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}zae([la],cj.prototype,"onDidChangeFocus",null);zae([la],cj.prototype,"onDidChangeSelection",null);function O2e(r,e,t){const n=r.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:I2e(r.saneLabel,e.saneLabel,t)}class M2e{getWidgetAriaLabel(){return L("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var oX=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const _h=Ct,MV={iconClass:Ie.quickInputBack.classNames,tooltip:L("quickInput.back","Back"),handle:-1};class G4 extends Je{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=G4.noPromptMessage,this._severity=so.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new Ae),this.onDidHideEmitter=this._register(new Ae),this.onDisposeEmitter=this._register(new Ae),this.visibleDisposables=this._register(new Et),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Lv;this._ignoreFocusOut=e&&!Lv,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=yN.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new cc,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const i=this.buttons.filter(o=>o===MV);this.ui.leftActionBar.push(i.map((o,a)=>{const l=new Ef(`id-${a}`,"",o.iconClass||NV(o.iconPath),!0,()=>oX(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const s=this.buttons.filter(o=>o!==MV);this.ui.rightActionBar.push(s.map((o,a)=>{const l=new Ef(`id-${a}`,"",o.iconClass||NV(o.iconPath),!0,()=>oX(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,EC(this.ui.message,...Uw(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?L("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==so.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}G4.noPromptMessage=L("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class SN extends G4{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Ae),this.onWillAcceptEmitter=this._register(new Ae),this.onDidAcceptEmitter=this._register(new Ae),this.onDidCustomEmitter=this._register(new Ae),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?nm.NONE:nm.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Ae),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Ae),this.onDidTriggerItemButtonEmitter=this._register(new Ae),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?u2e:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(To.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(To.Next),this.canSelectMany&&this.ui.list.domFocus(),Ir.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(To.Previous):this.ui.list.focus(To.Last),this.canSelectMany&&this.ui.list.domFocus(),Ir.stop(e,!0);break;case 12:this.ui.list.focus(To.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ir.stop(e,!0);break;case 11:this.ui.list.focus(To.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ir.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(To.First),Ir.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(To.Last),Ir.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&xf(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&xf(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&xf(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return St(this.ui.container,xn.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Ts(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,l]=o.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const i=this.ariaLabel||this.placeholder||SN.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case nm.NONE:this._itemActivation=nm.FIRST;break;case nm.SECOND:this.ui.list.focus(To.Second),this._itemActivation=nm.FIRST;break;case nm.LAST:this.ui.list.focus(To.Last),this._itemActivation=nm.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(To.First)),this.keepScrollPosition&&(this.scrollTop=e)}}SN.DEFAULT_ARIA_LABEL=L("quickInputBox.ariaLabel","Type to narrow down results.");class Y4 extends Je{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Ae),this.onDidCustomEmitter=this._register(new Ae),this.onDidTriggerButtonEmitter=this._register(new Ae),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Ae),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Ae),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(St(window,xn.KEY_DOWN,e,!0)),this._register(St(window,xn.KEY_UP,e,!0)),this._register(St(window,xn.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=st(this.parentElement,_h(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=kf(e),n=st(e,_h(".quick-input-titlebar")),i=this._register(new Nv(n));i.domNode.classList.add("quick-input-left-action-bar");const s=st(n,_h(".quick-input-title")),o=this._register(new Nv(n));o.domNode.classList.add("quick-input-right-action-bar");const a=st(e,_h(".quick-input-description")),l=st(e,_h(".quick-input-header")),u=st(l,_h("input.quick-input-check-all"));u.type="checkbox",this._register(ja(u,xn.CHANGE,M=>{const W=u.checked;$.setAllVisibleChecked(W)})),this._register(St(u,xn.CLICK,M=>{(M.x||M.y)&&v.setFocus()}));const d=st(l,_h(".quick-input-description")),h=st(l,_h(".quick-input-and-message")),p=st(h,_h(".quick-input-filter")),v=this._register(new v2e(p));v.setAttribute("aria-describedby",`${this.idPrefix}message`);const C=st(p,_h(".quick-input-visible-count"));C.setAttribute("aria-live","polite"),C.setAttribute("aria-atomic","true");const S=new kV(C,{countFormat:L({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),E=st(p,_h(".quick-input-count"));E.setAttribute("aria-live","polite");const k=new kV(E,{countFormat:L({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),D=st(l,_h(".quick-input-action")),O=new tX(D);O.label=L("ok","OK"),this._register(O.onDidClick(M=>{this.onDidAcceptEmitter.fire()}));const H=st(l,_h(".quick-input-action")),V=new tX(H);V.label=L("custom","Custom"),this._register(V.onDidClick(M=>{this.onDidCustomEmitter.fire()}));const X=st(h,_h(`#${this.idPrefix}message.quick-input-message`)),$=this._register(new cj(e,this.idPrefix+"list",this.options));this._register($.onChangedAllVisibleChecked(M=>{u.checked=M})),this._register($.onChangedVisibleCount(M=>{S.setCount(M)})),this._register($.onChangedCheckedCount(M=>{k.setCount(M)})),this._register($.onLeave(()=>{setTimeout(()=>{v.setFocus(),this.controller instanceof SN&&this.controller.canSelectMany&&$.clearFocus()},0)})),this._register($.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const P=new a2e(e);P.getContainer().classList.add("quick-input-progress");const z=lx(e);return this._register(z),this._register(St(e,xn.FOCUS,M=>{this.previousFocusElement=M.relatedTarget instanceof HTMLElement?M.relatedTarget:void 0},!0)),this._register(z.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(yN.Blur),this.previousFocusElement=void 0})),this._register(St(e,xn.FOCUS,M=>{v.setFocus()})),this._register(St(e,xn.KEY_DOWN,M=>{const W=new Ts(M);switch(W.keyCode){case 3:Ir.stop(M,!0),this.onDidAcceptEmitter.fire();break;case 9:Ir.stop(M,!0),this.hide(yN.Gesture);break;case 2:if(!W.altKey&&!W.ctrlKey&&!W.metaKey){const I=[".action-label.codicon"];e.classList.contains("show-checkboxes")?I.push("input"):I.push("input[type=text]"),this.getUI().list.isDisplayed()&&I.push(".monaco-list");const R=e.querySelectorAll(I.join(", "));W.shiftKey&&W.target===R[0]?(Ir.stop(M,!0),R[R.length-1].focus()):!W.shiftKey&&W.target===R[R.length-1]&&(Ir.stop(M,!0),R[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:i,titleBar:n,title:s,description1:a,description2:d,rightActionBar:o,checkAll:u,filterContainer:p,inputBox:v,visibleCountContainer:C,visibleCount:S,countContainer:E,count:k,okContainer:D,ok:O,message:X,customButtonContainer:H,customButton:V,list:$,progressBar:P,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:M=>this.show(M),hide:()=>this.hide(),setVisibilities:M=>this.setVisibilities(M),setComboboxAccessibility:M=>this.setComboboxAccessibility(M),setEnabled:M=>this.setEnabled(M),setContextKey:M=>this.options.setContextKey(M)},this.updateStyles(),this.ui}pick(e,t={},n=ki.None){return new Promise((i,s)=>{let o=d=>{o=i,t.onKeyMods&&t.onKeyMods(a.keyMods),i(d)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const u=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(o(d),a.hide())}}),a.onDidChangeActive(d=>{const h=d[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const h=d[0];h&&(o(h),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const h=a.items.indexOf(d.item);if(h!==-1){const p=a.items.slice(),v=p.splice(h,1),C=a.activeItems.filter(E=>E!==v[0]),S=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=p,C&&(a.activeItems=C),a.keepScrollPosition=S}}}))),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{nr(u),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,h])=>{l=h,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(p=>p.type!=="separator"&&p.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{s(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new SN(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(so.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),EC(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const i=this.options.backKeybindingLabel();MV.tooltip=i?L("quickInput.backWithKeybinding","Back ({0})",i):L("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const i=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!i){let s=this.previousFocusElement;for(;s&&!s.offsetParent;)s=Md(s.parentElement);s!=null&&s.offsetParent?(s.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Y4.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:i,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}Y4.MAX_WIDTH=600;var RV;(function(r){r[r.PRESERVE=0]="PRESERVE",r[r.LAST=1]="LAST"})(RV||(RV={}));const XC={Quickaccess:"workbench.contributions.quickaccess"};let R2e=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Bi(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return nD([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}};mo.add(XC.Quickaccess,new R2e);const Wf=lr("quickInputService");var P2e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},aX=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let PV=class extends Je{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=mo.as(XC.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[s,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&o&&l===o){e!==o.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!(n!=null&&n.preserveValue)){let v;if(a&&l&&l!==o){const C=a.value.substr(l.prefix.length);C&&(v=`${o.prefix}${C}`)}if(!v){const C=s==null?void 0:s.defaultFilterValue;C===RV.LAST?v=this.lastAcceptedPickerValues.get(o):typeof C=="string"&&(v=`${o.prefix}${C}`)}typeof v=="string"&&(e=v)}const u=new Et,d=u.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,o,n),d.placeholder=o==null?void 0:o.placeholder,d.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(d.itemActivation=(i=n==null?void 0:n.itemActivation)!==null&&i!==void 0?i:nm.SECOND),d.contextKey=o==null?void 0:o.contextKey,d.filterValue=v=>v.substring(o?o.prefix.length:0),o!=null&&o.placeholder&&(d.ariaLabel=o==null?void 0:o.placeholder);let h;t&&(h=new Bie,u.add(Rb(d.onWillAccept)(v=>{v.veto(),d.hide()}))),u.add(this.registerPickerListeners(d,s,o,e));const p=u.add(new Fu);if(s&&u.add(s.provide(d,p.token)),Rb(d.onDidHide)(()=>{d.selectedItems.length===0&&p.cancel(),u.dispose(),h==null||h.complete(d.selectedItems.slice(0))}),d.show(),t)return h==null?void 0:h.p}adjustValueSelection(e,t,n){var i;let s;n!=null&&n.preserveValue?s=[e.value.length,e.value.length]:s=[(i=t==null?void 0:t.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,i){const s=new Et,o=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return s.add(Bi(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),s.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):o.value=a})),n&&s.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),s}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};PV=P2e([aX(0,Wf),aX(1,Li)],PV);var F2e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},vT=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let JR=class extends ybe{constructor(e,t,n,i,s){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=i,this.layoutService=s,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(PV))),this._quickAccess}createController(e=this.layoutService,t){var n,i;const s={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,u,d,h)=>this.instantiationService.createInstance(LV,a,l,u,d,h),styles:this.computeStyles()},o=this._register(new Y4(Object.assign(Object.assign({},s),t)));return o.layout(e.dimension,(i=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&i!==void 0?i:0),this._register(e.onDidLayout(a=>{var l,u;return o.layout(a,(u=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&u!==void 0?u:0)})),this._register(o.onShow(()=>this.resetContextKeys())),this._register(o.onHide(()=>this.resetContextKeys())),o}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new gn(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=ki.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},om(this.theme,{quickInputBackground:kG,quickInputForeground:aCe,quickInputTitleBackground:lCe,contrastBorder:Ao,widgetShadow:IC})),inputBox:om(this.theme,{inputForeground:PU,inputBackground:RU,inputBorder:FU,inputValidationInfoBackground:Kre,inputValidationInfoForeground:Gre,inputValidationInfoBorder:Yre,inputValidationWarningBackground:Zre,inputValidationWarningForeground:Xre,inputValidationWarningBorder:Qre,inputValidationErrorBackground:Jre,inputValidationErrorForeground:ese,inputValidationErrorBorder:tse}),countBadge:om(this.theme,{badgeBackground:JT,badgeForeground:ek,badgeBorder:Ao}),button:om(this.theme,{buttonForeground:Q1e,buttonBackground:V6,buttonHoverBackground:J1e,buttonBorder:Ao}),progressBar:om(this.theme,{progressBarBackground:eCe}),keybindingLabel:om(this.theme,{keybindingLabelBackground:dCe,keybindingLabelForeground:hCe,keybindingLabelBorder:fCe,keybindingLabelBottomBorder:gCe,keybindingLabelShadow:IC}),list:om(this.theme,{listBackground:kG,listInactiveFocusForeground:XCe,listInactiveSelectionIconForeground:QCe,listInactiveFocusBackground:RO,listFocusOutline:Uc,listInactiveFocusOutline:Uc,pickerGroupBorder:cCe,pickerGroupForeground:uCe})}}};JR=F2e([vT(0,Li),vT(1,Xn),vT(2,Fs),vT(3,Kc),vT(4,E2)],JR);var Uae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fw=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let FV=class extends JR{constructor(e,t,n,i,s,o){super(t,n,i,s,o),this.host=void 0;const a=Lx.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};FV=Uae([fw(1,Li),fw(2,Xn),fw(3,Fs),fw(4,Kc),fw(5,E2)],FV);let BV=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(FV,e);this.mapEditorToService.set(e,t),Rb(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=ki.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};BV=Uae([fw(0,Li),fw(1,vr)],BV);class Lx{constructor(e){this.editor=e,this.widget=new Z4(this.editor)}static get(e){return e.getContribution(Lx.ID)}dispose(){this.widget.dispose()}}Lx.ID="editor.controller.quickInput";class Z4{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return Z4.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}Z4.ID="editor.contrib.quickInputWidget";br(Lx.ID,Lx);const $ae=lr("workspaceTrustManagementService");var gr;(function(r){const e=new nN;class t{constructor(l,u){this._serviceId=l,this._factory=u,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}r.LazyStaticService=t;let n=[];function i(a,l){let u=new t(a,l);return n.push(u),u}function s(a){let l=new nN;for(const[d,h]of BSe())l.set(d,h);for(let d in a)a.hasOwnProperty(d)&&l.set(lr(d),a[d]);n.forEach(d=>l.set(d.id,d.get(a)));let u=new UR(l,!0);return l.set(Li,u),[l,u]}r.init=s,r.instantiationService=i(Li,()=>new UR(e,!0));const o=new Woe;r.configurationService=i(es,()=>o),r.resourceConfigurationService=i(M$,()=>new TIe(o)),r.resourcePropertiesService=i(qoe,()=>new pW(o)),r.contextService=i(Moe,()=>new M4),r.labelService=i(D2,()=>new AIe),r.telemetryService=i(Uv,()=>new kIe),r.dialogService=i(x2,()=>new DIe),r.notificationService=i(Oo,()=>new O4),r.markerService=i(N2,()=>new hw),r.modeService=i(Pl,a=>new gN),r.standaloneThemeService=i(ZC,()=>new qTe),r.logService=i($v,()=>new Dbe(new xbe)),r.undoRedoService=i(b2,a=>new XR(r.dialogService.get(a),r.notificationService.get(a))),r.languageConfigurationService=i(v2,a=>new fR(r.configurationService.get(a),r.modeService.get(a))),r.modelService=i(aa,a=>new WR(r.configurationService.get(a),r.resourcePropertiesService.get(a),r.standaloneThemeService.get(a),r.logService.get(a),r.undoRedoService.get(a),r.modeService.get(a),r.languageConfigurationService.get(a))),r.markerDecorationsService=i(_U,a=>new IV(r.modelService.get(a),r.markerService.get(a))),r.contextKeyService=i(Xn,a=>new lV(r.configurationService.get(a))),r.codeEditorService=i(vr,a=>new PR(null,r.contextKeyService.get(a),r.standaloneThemeService.get(a))),r.editorProgressService=i(jb,()=>new A4),r.storageService=i(Yv,()=>new YNe),r.editorWorkerService=i(Oh,a=>new rV(r.modelService.get(a),r.resourceConfigurationService.get(a),r.logService.get(a)))})(gr||(gr={}));class jae extends Je{constructor(e,t){super();const[n,i]=gr.init(t);this._serviceCollection=n,this._instantiationService=i;const s=this.get(es),o=this.get(Oo),a=this.get(Uv),l=this.get(Fs),u=this.get($v),d=this.get(Xn);let h=(E,k)=>{let D=null;return t&&(D=t[E.toString()]),D||(D=k()),this._serviceCollection.set(E,D),D};h(Kc,()=>new TV(d,s)),h(Bf,()=>new wV(l));let p=h(js,()=>new IIe(this._instantiationService)),v=h(ks,()=>this._register(new Boe(d,p,a,o,u,e))),C=h(E2,()=>new Voe(gr.codeEditorService.get(vr),e));h(Wf,()=>new BV(i,gr.codeEditorService.get(vr)));let S=h($b,()=>this._register(new mV(C)));h(YC,()=>new JNe),h(GC,()=>{const E=new pV(a,o,S,v,l);return E.configure({blockMouse:!1}),this._register(E)}),h(ZS,()=>new xV(p)),h(T$,()=>new NIe(gr.modelService.get(aa))),h($ae,()=>new OIe)}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}var lX=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Hd=lr("openerService"),B2e=Object.freeze({_serviceBrand:void 0,registerOpener(){return Je.None},registerValidator(){return Je.None},registerExternalUriResolver(){return Je.None},setDefaultExternalOpener(){},registerExternalOpener(){return Je.None},open(){return lX(this,void 0,void 0,function*(){return!1})},resolveExternalUri(r){return lX(this,void 0,void 0,function*(){return{resolved:r,dispose(){}}})}});function qae(r,e){return $n.isUri(r)?NT(r.scheme,e):wU(r,e+":")}function uX(r,...e){return e.some(t=>qae(r,t))}function WV(r){let e=JSON.parse(r);return e=VV(e),e}function VV(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return $n.revive(r);case 2:return new RegExp(r.source,r.flags)}if(r instanceof h4||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=VV(r[t],e+1);else for(const t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=VV(r[t],e+1))}return r}var eP;(function(r){r[r.API=0]="API",r[r.USER=1]="USER"})(eP||(eP={}));var dj=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tP=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},gw=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let HV=class{constructor(e){this._commandService=e}open(e,t){return gw(this,void 0,void 0,function*(){if(!qae(e,wi.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=$n.parse(e));let n=[];try{n=WV(decodeURIComponent(e.query))}catch{try{n=WV(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};HV=dj([tP(0,js)],HV);let zV=class{constructor(e){this._editorService=e}open(e,t){return gw(this,void 0,void 0,function*(){typeof e=="string"&&(e=$n.parse(e));let n;const i=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return i&&(n={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1},e=e.with({fragment:""})),e.scheme===wi.file&&(e=uwe(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?eP.USER:eP.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};zV=dj([tP(0,vr)],zV);let nP=class{constructor(e,t){this._openers=new Eh,this._validators=new Eh,this._resolvers=new Eh,this._resolvedUriTargets=new Mu(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Eh,this._defaultExternalOpener={openExternal:n=>gw(this,void 0,void 0,function*(){return uX(n,wi.http,wi.https)?ire(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>gw(this,void 0,void 0,function*(){return i!=null&&i.openExternal||uX(n,wi.mailto,wi.http,wi.https,wi.vsls)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new HV(t)),this._openers.push(new zV(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return gw(this,void 0,void 0,function*(){const i=typeof e=="string"?$n.parse(e):e,s=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(s)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return gw(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return gw(this,void 0,void 0,function*(){const n=typeof e=="string"?$n.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch{i=n}let s;if(typeof e=="string"&&n.toString()===i.toString()?s=e:s=encodeURI(i.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:o},ki.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},ki.None)})}dispose(){this._validators.clear()}};nP=dj([tP(0,vr),tP(1,js)],nP);var W2e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},V2e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Pv=class{constructor(){this.simpleEditorModelResolverService=null}initWorkspace(e){this._container=e,this._services=this.createStandaloneServices()}get container(){return this._container}get services(){return this._services}get commandService(){return this.services.get(js)}mergeEditorServices(e){if(e){const t=this.services;for(const n in e)n&&t.get(n)&&e[n]&&t.set(n,e[n])}}create(e,t,n){const i=this.services;this.mergeEditorServices(n),i.has(zc)||(this.simpleEditorModelResolverService=new MR(gr.modelService.get()),i.set(zc,this.simpleEditorModelResolverService));const s=new dN(e,t,i,i.get(Li),i.get(vr),i.get(js),i.get(Xn),i.get(ks),i.get($b),i.get(ZC),i.get(Oo),i.get(es),i.get(Kc),i.get(aa),i.get(Pl));return this.simpleEditorModelResolverService&&this.simpleEditorModelResolverService.setEditor(s),s}createStandaloneServices(){const e=new jae(this.container),t=e.get(Li);e.has(Hd)||e.set(Hd,new nP(e.get(vr),e.get(js)));const n=t.createInstance(JR),i=new Voe(gr.codeEditorService.get(vr),this.container);return e.set(E2,i),e.set(Wf,n),e}};Pv=W2e([zr(),V2e("design:paramtypes",[])],Pv);const H2e=`${MP}-monaco-editor`;class hj extends we.PureComponent{constructor(e){super(e),this.monacoService=pt.resolve(Pv)}componentDidMount(){var e;const{options:t={},override:n,editorInstanceRef:i}=this.props;this.monacoInstance||(this.monacoInstance=(e=this.monacoService)===null||e===void 0?void 0:e.create(this.monacoDom,t,n),i==null||i(this.monacoInstance))}componentDidUpdate(e){const{onChangeEditorProps:t}=this.props;!Is.isEqual(e,this.props)&&(t==null||t(e,this.props))}render(){const{style:e}=this.props;let t={position:"relative",minHeight:"400px",height:"100%",width:"100%"};return t=e?Object.assign(t,e):t,pe.createElement("div",{style:t,className:H2e,ref:n=>{this.monacoDom=n}})}}const O2=Ni("scrollBar"),z2e=Ht(O2,"wrapper"),fj=Ht(O2,"container"),Kae=Ht(O2,"shadow"),X4=Ht(O2,"track"),U2e=Ht(O2,"thumb"),$2e=si(fj,"horizontal"),j2e=si(fj,"vertical"),q2e=si(X4,"hidden"),K2e=si(X4,"vertical"),G2e=si(X4,"horizontal"),Y2e=si(Kae,"hidden");var Ex;(function(r){r.vertical="vertical",r.horizontal="horizontal"})(Ex||(Ex={}));function Jp(r){return r===Ex.vertical}function KL(r,e){const t=Jp(r)?"height":"width";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}function QA(r,e){const t=Jp(r)?"top":"left";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}const dD=we.forwardRef(function({children:r,style:e,trackStyle:t,className:n,isShowShadow:i=!1,inactiveHidden:s=!0,direction:o=Ex.vertical,onScroll:a,onScrollStart:l,onScrollEnd:u},d){const[h,p]=we.useState(.1),[v,C]=we.useState(!0),[S,E]=we.useState(!1),[k,D]=we.useState(!1),O=we.useRef(null),H=we.useRef(null),V=we.useRef(null),X=we.useRef(null),$=we.useRef({y:0,startOffset:0}),P=()=>{var K;return((K=H.current)===null||K===void 0?void 0:K[KL(o,"scroll")])||0},z=()=>{var K;return((K=O.current)===null||K===void 0?void 0:K[KL(o,"client")])||0},M=()=>{var K;return((K=O.current)===null||K===void 0?void 0:K[QA(o,"scroll")])||0},W=()=>{var K;return((K=V.current)===null||K===void 0?void 0:K.getBoundingClientRect()[KL(o)])||0},I=()=>{var K;return((K=X.current)===null||K===void 0?void 0:K.getBoundingClientRect()[KL(o)])||0},R=()=>{var K;return((K=X.current)===null||K===void 0?void 0:K[QA(o,"offset")])||0};we.useImperativeHandle(d,()=>{var K;return{scrollTo:de=>{if(G()&&typeof de=="number"){const ae=de/P()*W();ee(de),Z(ae)}},scrollHeight:((K=O.current)===null||K===void 0?void 0:K.scrollHeight)||0}}),we.useEffect(()=>{const K=new ResizeObserver(de=>{for(const ae of de){const Me=ae.contentRect[KL(o)],Qe=P();let ct=Me/Qe;Number.isNaN(ct)&&(ct=1);const Rt=M(),Ye=Rt/Qe*W();ee(Rt),Z(Ye),p(ct>1?1:ct)}});return K.observe(O.current),()=>{K.disconnect()}},[]),we.useEffect(()=>{const K=new ResizeObserver(de=>{for(const ae of de){const De=P(),Qe=z()/De;p(Qe>1?1:Qe)}});return K.observe(H.current),()=>{K.disconnect()}},[]),we.useEffect(()=>{var K;let de=0;function ae(De){if(!G())return;De.preventDefault();const Me=M();de?window.clearTimeout(de):(l==null||l({scrollTop:Me},De),E(!0)),de=window.setTimeout(()=>{u==null||u({scrollTop:Me},De),de=0,E(!1)},150);const ct=5*(De[Jp(o)?"deltaY":"deltaX"]/10),Rt=Me/this[Jp(o)?"scrollHeight":"scrollWidth"]*W();Z(Rt),ee(Me+ct),a==null||a({scrollTop:Me},De)}return(K=O.current)===null||K===void 0||K.addEventListener("wheel",ae),()=>{var De;(De=O.current)===null||De===void 0||De.removeEventListener("wheel",ae)}},[]);const G=()=>P()>z(),Z=K=>{const de=W(),ae=I();requestAnimationFrame(()=>{const De=QA(o);K<=0?X.current.style[De]="0px":K>=de-ae?X.current.style[De]=`${de-ae}px`:X.current.style[De]=`${K}px`})},ee=K=>{requestAnimationFrame(()=>{var de,ae,De;const Me=QA(o);K<=0?((de=O.current)===null||de===void 0||de.scrollTo({[Me]:0}),C(!0)):K>=P()-W()?((ae=O.current)===null||ae===void 0||ae.scrollTo({[Me]:P()}),C(!1)):((De=O.current)===null||De===void 0||De.scrollTo({[Me]:K}),C(!1))})},ne=K=>{if(K.stopPropagation(),!G())return;const{y:de,height:ae,x:De,width:Me}=K.target.getBoundingClientRect(),ct=I()/2,Rt=P(),gt=K[Jp(o)?"clientY":"clientX"]-(Jp(o)?de:De)-ct,Ut=gt/(Jp(o)?ae:Me);l==null||l({scrollTop:M()},K),ee(Rt*Ut),Z(gt),a==null||a({scrollTop:M()},K),u==null||u({scrollTop:M()},K)},ie=we.useCallback(K=>{const ae=K[Jp(o)?"clientY":"clientX"]-$.current.y,De=$.current.startOffset,Me=W(),Qe=De+ae,ct=Qe/Me,Rt=P();ee(Rt*ct),Z(Qe),a==null||a({scrollTop:M()},K)},[]),te=K=>{G()&&(E(!0),l==null||l({scrollTop:M()},K),$.current={y:K[Jp(o)?"clientY":"clientX"],startOffset:R()},document.body.style.userSelect="none",window.addEventListener("mouseup",de=>{de.stopPropagation(),de.preventDefault(),E(!1),u==null||u({scrollTop:M()},de),document.body.style.removeProperty("user-select"),window.removeEventListener("mousemove",ie)},{once:!0}),window.addEventListener("mousemove",ie,{passive:!1}))},B=we.useMemo(()=>{const K=P(),de=z();return K<=de?!0:!S&&!k},[S,k]);return pe.createElement("div",{className:ni(z2e,n),ref:O,style:e,onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1)},i&&pe.createElement("div",{className:ni(Kae,v&&Y2e)}),pe.createElement("div",{className:ni(fj,Jp(o)?j2e:$2e),ref:H},r),pe.createElement("div",{className:ni(X4,Jp(o)?K2e:G2e,s&&B&&q2e),ref:V,onClick:ne,style:t},pe.createElement("div",{className:U2e,style:{[KL(o)]:`calc(100% * ${h})`},ref:X,onClick:K=>K.stopPropagation(),onMouseDown:te})))}),Zv=Ni("search"),cX=Ht(Zv,"input"),Z2e=Ht(Zv,"group"),X2e=Ht(Zv,"toolbar"),Gae=Ht(Zv,"replace"),Q2e=Ht(Zv,"target"),J2e=Ht(Gae,"button"),eAe=Ht(Zv,"base"),tAe=Ht(Zv,"info"),nAe=Ht(Zv,"warning"),iAe=Ht(Zv,"error");var JE;(function(r){r.info="info",r.warning="warning",r.error="error"})(JE||(JE={}));function JO(r){const{className:e,placeholder:t,toolbarData:n=[],onChange:i,value:s,info:o}=r,[a,l]=we.useState(!1),u=we.useRef(null),d=(E,k)=>{var D,O;(D=u.current)===null||D===void 0||D.focus(),(O=r.onToolbarClick)===null||O===void 0||O.call(r,k)},h=E=>{switch(E){case JE.info:return tAe;case JE.warning:return nAe;case JE.error:return iAe;default:return""}},p=()=>{l(!0)},v=()=>{l(!1)},C=E=>{if(u.current){u.current.style.height="24px";const D=u.current.scrollHeight/24,O=5;D>O?u.current.style.height=`${24*O}px`:u.current.style.height=`${u.current.scrollHeight}px`}i==null||i(E.target.value||"")},S=E=>{E.keyCode===13&&(i==null||i(E.target.value||""),E.preventDefault())};return pe.createElement("div",{className:e},pe.createElement("textarea",{ref:u,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",className:ni((o==null?void 0:o.text)&&h((o==null?void 0:o.type)||"")),value:s||"",placeholder:t,title:t,onKeyDown:S,onFocus:p,onBlur:v,onChange:C}),(o==null?void 0:o.text)&&a&&pe.createElement("div",{className:ni(eAe,h(o.type))},o.text),pe.createElement(s2,{className:X2e,data:n,onClick:d}))}function rAe({children:r}){return pe.createElement("div",{className:Z2e},r)}JO.Group=rAe;function Yae(r){const{className:e="",style:t,placeholders:n=[],validationInfo:i,addons:s=[],values:o=[],onAddonClick:a,onButtonClick:l,onChange:u,onSearch:d}=r,[h="Search",p="Replace"]=n,[v,C]=s,[S,E]=o,[k,D]=we.useState(!1),O=()=>{D(!k),l==null||l(!k),d==null||d([S,E])},H=(P,z)=>{if(u){const M=z==="search"?[P,E]:[S,P];u(M),d==null||d(M)}},V=P=>{a==null||a(P),d==null||d([S,E])},$=(()=>{if(i)return typeof i=="string"?{type:JE.info,text:i}:i})();return pe.createElement("div",{style:t,className:ni(Zv,e)},pe.createElement(cs,{className:J2e,type:k?"chevron-down":"chevron-right",onClick:O}),pe.createElement(JO.Group,null,pe.createElement(JO,{value:S,className:ni(cX,Q2e),info:$,placeholder:h,onChange:P=>H(P,"search"),toolbarData:v,onToolbarClick:V}),k&&pe.createElement(JO,{value:E,className:ni(cX,Gae),placeholder:p,onChange:P=>H(P,"replace"),toolbarData:C,onToolbarClick:V})))}var sAe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const oAe={isOpen:!1,option:{name:"",value:"",description:""}},QC=Ni("select"),aAe=Ht(QC,"container"),lAe=Ht(QC,"options"),dX=Ht(QC,"descriptor"),uAe=Ht(QC,"input"),hX=si(QC,"active"),cAe=Ht(QC,"arrow");class LN extends we.PureComponent{constructor(e){super(e),this.handleOnClickOption=t=>{const n=t.target,i=tA(n,"data-value"),s=tA(n,"data-name"),o=tA(n,"data-desc");if(s){const a={value:i,name:s,description:o};this.setState({option:a},()=>{var l,u;(u=(l=this.props).onSelect)===null||u===void 0||u.call(l,t,a),this.contextView.hide()})}},this.handleOnHoverOption=t=>{const n=t.target,i=tA(n,"data-desc"),s=this.contextView.view.querySelector("."+dX);if(s){const o=i||"None";s.innerHTML=o,s.setAttribute("title",o)}},this.handleOnClickSelect=t=>{const n=this.selectElm.current,{children:i}=this.props;if(n){const s=n==null?void 0:n.getBoundingClientRect();s.y=s.y+s.height,this.setState({isOpen:!0}),this.contextView.show(s,()=>pe.createElement("div",{style:{width:s.width},className:ni(aAe,hX),onMouseOver:this.handleOnHoverOption},pe.createElement("div",{className:lAe},t2(i,{onClick:this.handleOnClickOption})),pe.createElement("div",{className:dX},"None")))}},this.contextView=Zx({shadowOutline:!1}),this.state=this.getDefaultState(this.props),this.selectElm=pe.createRef(),this.selectInput=pe.createRef()}static getDerivedStateFromProps(e,t){return e.value!==t.value?{option:LN.getSelectOption(e)}:null}componentDidMount(){this.contextView.onHide(()=>{this.state.isOpen&&this.setState({isOpen:!1})})}componentWillUnmount(){this.contextView.dispose()}static getSelectOption(e){let t={};const n=e.value||e.defaultValue,i=we.Children.toArray(e.children);for(const s of i)if(we.isValidElement(s)){const o=s.props;if(o.value&&o.value===n){t=Object.assign(Object.assign({},o),{name:o.name||o.children});break}}return t}getDefaultState(e){return Object.assign(Object.assign({},oAe),{option:Object.assign({},LN.getSelectOption(e))})}render(){const{option:e,isOpen:t}=this.state,n=this.props,{className:i,placeholder:s,onSelect:o}=n,a=sAe(n,["className","placeholder","onSelect"]),u=ni(QC,i,t?hX:"");return pe.createElement("div",Object.assign({ref:this.selectElm,className:u},a),pe.createElement("input",{onClick:this.handleOnClickSelect,ref:this.selectInput,autoComplete:"off",placeholder:s,className:uAe,value:e.name,readOnly:!0}),pe.createElement("span",{className:cAe},pe.createElement(cs,{type:"chevron-down"})))}}var dAe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Zae=Ht(QC,"option"),hAe=si(Zae,"disabled");function Xae(r){const{className:e,value:t,title:n,name:i,description:s,disabled:o,children:a,onClick:l}=r,u=dAe(r,["className","value","title","name","description","disabled","children","onClick"]),d=ni(Zae,e,o?hAe:""),h=p=>{o||l==null||l(p)};return pe.createElement("div",Object.assign({className:d,title:n,"data-name":i||a,"data-value":t,"data-desc":s,onClick:h},u),a)}var JA={exports:{}},fX;function fAe(){return fX||(fX=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0});function t($){return typeof $=="object"&&!("toString"in $)?Object.prototype.toString.call($).slice(8,-1):$}var n=typeof process=="object"&&!0;function i($,P){if(!$)throw n?new Error("Invariant failed"):new Error(P())}e.invariant=i;var s=Object.prototype.hasOwnProperty,o=Array.prototype.splice,a=Object.prototype.toString;function l($){return a.call($).slice(8,-1)}var u=Object.assign||function($,P){return d(P).forEach(function(z){s.call(P,z)&&($[z]=P[z])}),$},d=typeof Object.getOwnPropertySymbols=="function"?function($){return Object.keys($).concat(Object.getOwnPropertySymbols($))}:function($){return Object.keys($)};function h($){return Array.isArray($)?u($.constructor($.length),$):l($)==="Map"?new Map($):l($)==="Set"?new Set($):$&&typeof $=="object"?u(Object.create(Object.getPrototypeOf($)),$):$}var p=function(){function $(){this.commands=u({},v),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(P,z){return P===z},this.update.newContext=function(){return new $().update}}return Object.defineProperty($.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(P){this.update.isEquals=P},enumerable:!0,configurable:!0}),$.prototype.extend=function(P,z){this.commands[P]=z},$.prototype.update=function(P,z){var M=this,W=typeof z=="function"?{$apply:z}:z;Array.isArray(P)&&Array.isArray(W)||i(!Array.isArray(W),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),i(typeof W=="object"&&W!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(M.commands).join(", ")+".")});var I=P;return d(W).forEach(function(R){if(s.call(M.commands,R)){var G=P===I;I=M.commands[R](W[R],I,W,P),G&&M.isEquals(I,P)&&(I=P)}else{var Z=l(P)==="Map"?M.update(P.get(R),W[R]):M.update(P[R],W[R]),ee=l(I)==="Map"?I.get(R):I[R];(!M.isEquals(Z,ee)||typeof Z>"u"&&!s.call(P,R))&&(I===P&&(I=h(P)),l(I)==="Map"?I.set(R,Z):I[R]=Z)}}),I},$}();e.Context=p;var v={$push:function($,P,z){return S(P,z,"$push"),$.length?P.concat($):P},$unshift:function($,P,z){return S(P,z,"$unshift"),$.length?$.concat(P):P},$splice:function($,P,z,M){return k(P,z),$.forEach(function(W){D(W),P===M&&W.length&&(P=h(M)),o.apply(P,W)}),P},$set:function($,P,z){return H(z),$},$toggle:function($,P){E($,"$toggle");var z=$.length?h(P):P;return $.forEach(function(M){z[M]=!P[M]}),z},$unset:function($,P,z,M){return E($,"$unset"),$.forEach(function(W){Object.hasOwnProperty.call(P,W)&&(P===M&&(P=h(M)),delete P[W])}),P},$add:function($,P,z,M){return X(P,"$add"),E($,"$add"),l(P)==="Map"?$.forEach(function(W){var I=W[0],R=W[1];P===M&&P.get(I)!==R&&(P=h(M)),P.set(I,R)}):$.forEach(function(W){P===M&&!P.has(W)&&(P=h(M)),P.add(W)}),P},$remove:function($,P,z,M){return X(P,"$remove"),E($,"$remove"),$.forEach(function(W){P===M&&P.has(W)&&(P=h(M)),P.delete(W)}),P},$merge:function($,P,z,M){return V(P,$),d($).forEach(function(W){$[W]!==P[W]&&(P===M&&(P=h(M)),P[W]=$[W])}),P},$apply:function($,P){return O($),$(P)}},C=new p;e.isEquals=C.update.isEquals,e.extend=C.extend,e.default=C.update,e.default.default=r.exports=u(e.default,e);function S($,P,z){i(Array.isArray($),function(){return"update(): expected target of "+t(z)+" to be an array; got "+t($)+"."}),E(P[z],z)}function E($,P){i(Array.isArray($),function(){return"update(): expected spec of "+t(P)+" to be an array; got "+t($)+". Did you forget to wrap your parameter in an array?"})}function k($,P){i(Array.isArray($),function(){return"Expected $splice target to be an array; got "+t($)}),D(P.$splice)}function D($){i(Array.isArray($),function(){return"update(): expected spec of $splice to be an array of arrays; got "+t($)+". Did you forget to wrap your parameters in an array?"})}function O($){i(typeof $=="function",function(){return"update(): expected spec of $apply to be a function; got "+t($)+"."})}function H($){i(Object.keys($).length===1,function(){return"Cannot have more than one key in an object with $set"})}function V($,P){i(P&&typeof P=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+t(P)}),i($&&typeof $=="object",function(){return"update(): $merge expects a target of type 'object'; got "+t($)})}function X($,P){var z=l($);i(z==="Map"||z==="Set",function(){return"update(): "+t(P)+" expects a target of type Set or Map; got "+t(z)})}}(JA,JA.exports)),JA.exports}var gAe=fAe();const pAe=Rm(gAe),Qae=we.createContext({dragDropManager:void 0});function kg(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var gX=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),tB=function(){return Math.random().toString(36).substring(7).split("").join(".")},pX={INIT:"@@redux/INIT"+tB(),REPLACE:"@@redux/REPLACE"+tB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+tB()}};function mAe(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function Jae(r,e,t){var n;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(kg(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(kg(1));return t(Jae)(r,e)}if(typeof r!="function")throw new Error(kg(2));var i=r,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(kg(3));return s}function h(S){if(typeof S!="function")throw new Error(kg(4));if(l)throw new Error(kg(5));var E=!0;return u(),a.push(S),function(){if(E){if(l)throw new Error(kg(6));E=!1,u();var D=a.indexOf(S);a.splice(D,1),o=null}}}function p(S){if(!mAe(S))throw new Error(kg(7));if(typeof S.type>"u")throw new Error(kg(8));if(l)throw new Error(kg(9));try{l=!0,s=i(s,S)}finally{l=!1}for(var E=o=a,k=0;k<E.length;k++){var D=E[k];D()}return S}function v(S){if(typeof S!="function")throw new Error(kg(10));i=S,p({type:pX.REPLACE})}function C(){var S,E=h;return S={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(kg(11));function O(){D.next&&D.next(d())}O();var H=E(O);return{unsubscribe:H}}},S[gX]=function(){return this},S}return p({type:pX.INIT}),n={dispatch:p,subscribe:h,getState:d,replaceReducer:v},n[gX]=C,n}function fr(r,e,...t){if(_Ae()&&e===void 0)throw new Error("invariant requires an error message argument");if(!r){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return t[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function _Ae(){return typeof process<"u"&&process.env.NODE_ENV==="production"}function vAe(r,e,t){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:t||null,r)}function bAe(r,e){return r.filter(t=>t!==e)}function ele(r){return typeof r=="object"}function CAe(r,e){const t=new Map,n=s=>{t.set(s,t.has(s)?t.get(s)+1:1)};r.forEach(n),e.forEach(n);const i=[];return t.forEach((s,o)=>{s===1&&i.push(o)}),i}function yAe(r,e){return r.filter(t=>e.indexOf(t)>-1)}const gj="dnd-core/INIT_COORDS",Q4="dnd-core/BEGIN_DRAG",pj="dnd-core/PUBLISH_DRAG_SOURCE",J4="dnd-core/HOVER",eF="dnd-core/DROP",tF="dnd-core/END_DRAG";function mX(r,e){return{type:gj,payload:{sourceClientOffset:e||null,clientOffset:r||null}}}const wAe={type:gj,payload:{clientOffset:null,sourceClientOffset:null}};function SAe(r){return function(t=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=n,a=r.getMonitor(),l=r.getRegistry();r.dispatch(mX(s)),LAe(t,a,l);const u=DAe(t,a);if(u==null){r.dispatch(wAe);return}let d=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");EAe(o),d=o(u)}r.dispatch(mX(s,d));const p=l.getSource(u).beginDrag(a,u);if(p==null)return;xAe(p),l.pinSource(u);const v=l.getSourceType(u);return{type:Q4,payload:{itemType:v,item:p,sourceId:u,clientOffset:s||null,sourceClientOffset:d||null,isSourcePublic:!!i}}}}function LAe(r,e,t){fr(!e.isDragging(),"Cannot call beginDrag while dragging."),r.forEach(function(n){fr(t.getSource(n),"Expected sourceIds to be registered.")})}function EAe(r){fr(typeof r=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function xAe(r){fr(ele(r),"Item must be an object.")}function DAe(r,e){let t=null;for(let n=r.length-1;n>=0;n--)if(e.canDragSource(r[n])){t=r[n];break}return t}function IAe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TAe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){IAe(r,i,t[i])})}return r}function kAe(r){return function(t={}){const n=r.getMonitor(),i=r.getRegistry();NAe(n),MAe(n).forEach((o,a)=>{const l=AAe(o,a,i,n),u={type:eF,payload:{dropResult:TAe({},t,l)}};r.dispatch(u)})}}function NAe(r){fr(r.isDragging(),"Cannot call drop while not dragging."),fr(!r.didDrop(),"Cannot call drop twice during one drag operation.")}function AAe(r,e,t,n){const i=t.getTarget(r);let s=i?i.drop(n,r):void 0;return OAe(s),typeof s>"u"&&(s=e===0?{}:n.getDropResult()),s}function OAe(r){fr(typeof r>"u"||ele(r),"Drop result must either be an object or undefined.")}function MAe(r){const e=r.getTargetIds().filter(r.canDropOnTarget,r);return e.reverse(),e}function RAe(r){return function(){const t=r.getMonitor(),n=r.getRegistry();PAe(t);const i=t.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(t,i),n.unpinSource()),{type:tF}}}function PAe(r){fr(r.isDragging(),"Cannot call endDrag while not dragging.")}function UV(r,e){return e===null?r===null:Array.isArray(r)?r.some(t=>t===e):r===e}function FAe(r){return function(t,{clientOffset:n}={}){BAe(t);const i=t.slice(0),s=r.getMonitor(),o=r.getRegistry(),a=s.getItemType();return VAe(i,o,a),WAe(i,s,o),HAe(i,s,o),{type:J4,payload:{targetIds:i,clientOffset:n||null}}}}function BAe(r){fr(Array.isArray(r),"Expected targetIds to be an array.")}function WAe(r,e,t){fr(e.isDragging(),"Cannot call hover while not dragging."),fr(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<r.length;n++){const i=r[n];fr(r.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const s=t.getTarget(i);fr(s,"Expected targetIds to be registered.")}}function VAe(r,e,t){for(let n=r.length-1;n>=0;n--){const i=r[n],s=e.getTargetType(i);UV(s,t)||r.splice(n,1)}}function HAe(r,e,t){r.forEach(function(n){t.getTarget(n).hover(e,n)})}function zAe(r){return function(){if(r.getMonitor().isDragging())return{type:pj}}}function UAe(r){return{beginDrag:SAe(r),publishDragSource:zAe(r),hover:FAe(r),drop:kAe(r),endDrag:RAe(r)}}class $Ae{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function n(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&t(a)}}const i=UAe(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=n(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function jAe(r,e){return{x:r.x+e.x,y:r.y+e.y}}function tle(r,e){return{x:r.x-e.x,y:r.y-e.y}}function qAe(r){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:n}=r;return!e||!t||!n?null:tle(jAe(e,n),t)}function KAe(r){const{clientOffset:e,initialClientOffset:t}=r;return!e||!t?null:tle(e,t)}const _k=[],mj=[];_k.__IS_NONE__=!0;mj.__IS_ALL__=!0;function GAe(r,e){return r===_k?!1:r===mj||typeof e>"u"?!0:yAe(e,r).length>0}class YAe{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;fr(typeof e=="function","listener must be a function."),fr(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!GAe(o.dirtyHandlerIds,n)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){fr(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return fr(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(fr(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return UV(n,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(fr(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!UV(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return n?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return qAe(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return KAe(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const _X=typeof global<"u"?global:self,nle=_X.MutationObserver||_X.WebKitMutationObserver;function ile(r){return function(){const t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),r()}}}function ZAe(r){let e=1;const t=new nle(r),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const XAe=typeof nle=="function"?ZAe:ile;class QAe{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=XAe(this.flush),this.requestErrorThrow=ile(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class JAe{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class eOe{create(e){const t=this.freeTasks,n=t.length?t.pop():new JAe(this.onError,i=>t[t.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const rle=new QAe,tOe=new eOe(rle.registerPendingError);function nOe(r){rle.enqueueTask(tOe.create(r))}const _j="dnd-core/ADD_SOURCE",vj="dnd-core/ADD_TARGET",bj="dnd-core/REMOVE_SOURCE",nF="dnd-core/REMOVE_TARGET";function iOe(r){return{type:_j,payload:{sourceId:r}}}function rOe(r){return{type:vj,payload:{targetId:r}}}function sOe(r){return{type:bj,payload:{sourceId:r}}}function oOe(r){return{type:nF,payload:{targetId:r}}}function aOe(r){fr(typeof r.canDrag=="function","Expected canDrag to be a function."),fr(typeof r.beginDrag=="function","Expected beginDrag to be a function."),fr(typeof r.endDrag=="function","Expected endDrag to be a function.")}function lOe(r){fr(typeof r.canDrop=="function","Expected canDrop to be a function."),fr(typeof r.hover=="function","Expected hover to be a function."),fr(typeof r.drop=="function","Expected beginDrag to be a function.")}function $V(r,e){if(e&&Array.isArray(r)){r.forEach(t=>$V(t,!1));return}fr(typeof r=="string"||typeof r=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Vg;(function(r){r.SOURCE="SOURCE",r.TARGET="TARGET"})(Vg||(Vg={}));let uOe=0;function cOe(){return uOe++}function dOe(r){const e=cOe().toString();switch(r){case Vg.SOURCE:return`S${e}`;case Vg.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${r}`)}}function vX(r){switch(r[0]){case"S":return Vg.SOURCE;case"T":return Vg.TARGET;default:throw new Error(`Cannot parse handler ID: ${r}`)}}function bX(r,e){const t=r.entries();let n=!1;do{const{done:i,value:[,s]}=t.next();if(s===e)return!0;n=!!i}while(!n);return!1}class hOe{addSource(e,t){$V(e),aOe(t);const n=this.addHandler(Vg.SOURCE,e,t);return this.store.dispatch(iOe(n)),n}addTarget(e,t){$V(e,!0),lOe(t);const n=this.addHandler(Vg.TARGET,e,t);return this.store.dispatch(rOe(n)),n}containsHandler(e){return bX(this.dragSources,e)||bX(this.dropTargets,e)}getSource(e,t=!1){return fr(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return fr(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return fr(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return fr(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return vX(e)===Vg.SOURCE}isTargetId(e){return vX(e)===Vg.TARGET}removeSource(e){fr(this.getSource(e),"Expected an existing source."),this.store.dispatch(sOe(e)),nOe(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){fr(this.getTarget(e),"Expected an existing target."),this.store.dispatch(oOe(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);fr(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){fr(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const i=dOe(e);return this.types.set(i,t),e===Vg.SOURCE?this.dragSources.set(i,n):e===Vg.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const fOe=(r,e)=>r===e;function gOe(r,e){return!r&&!e?!0:!r||!e?!1:r.x===e.x&&r.y===e.y}function pOe(r,e,t=fOe){if(r.length!==e.length)return!1;for(let n=0;n<r.length;++n)if(!t(r[n],e[n]))return!1;return!0}function mOe(r=_k,e){switch(e.type){case J4:break;case _j:case vj:case nF:case bj:return _k;case Q4:case pj:case tF:case eF:default:return mj}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,i=CAe(t,n);if(!(i.length>0||!pOe(t,n)))return _k;const o=n[n.length-1],a=t[t.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function _Oe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vOe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){_Oe(r,i,t[i])})}return r}const CX={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function bOe(r=CX,e){const{payload:t}=e;switch(e.type){case gj:case Q4:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case J4:return gOe(r.clientOffset,t.clientOffset)?r:vOe({},r,{clientOffset:t.clientOffset});case tF:case eF:return CX;default:return r}}function COe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function GL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){COe(r,i,t[i])})}return r}const yOe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function wOe(r=yOe,e){const{payload:t}=e;switch(e.type){case Q4:return GL({},r,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case pj:return GL({},r,{isSourcePublic:!0});case J4:return GL({},r,{targetIds:t.targetIds});case nF:return r.targetIds.indexOf(t.targetId)===-1?r:GL({},r,{targetIds:bAe(r.targetIds,t.targetId)});case eF:return GL({},r,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case tF:return GL({},r,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return r}}function SOe(r=0,e){switch(e.type){case _j:case vj:return r+1;case bj:case nF:return r-1;default:return r}}function LOe(r=0){return r+1}function EOe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xOe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){EOe(r,i,t[i])})}return r}function DOe(r={},e){return{dirtyHandlerIds:mOe(r.dirtyHandlerIds,{type:e.type,payload:xOe({},e.payload,{prevTargetIds:vAe(r,"dragOperation.targetIds",[])})}),dragOffset:bOe(r.dragOffset,e),refCount:SOe(r.refCount,e),dragOperation:wOe(r.dragOperation,e),stateId:LOe(r.stateId)}}function IOe(r,e=void 0,t={},n=!1){const i=TOe(n),s=new YAe(i,new hOe(i)),o=new $Ae(i,s),a=r(o,e,t);return o.receiveBackend(a),o}function TOe(r){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Jae(DOe,r&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function kOe(r,e){if(r==null)return{};var t=NOe(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function NOe(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}let yX=0;const eM=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var AOe=we.memo(function(e){var{children:t}=e,n=kOe(e,["children"]);const[i,s]=OOe(n);return we.useEffect(()=>{if(s){const o=sle();return++yX,()=>{--yX===0&&(o[eM]=null)}}},[]),Bg.jsx(Qae.Provider,{value:i,children:t})});function OOe(r){if("manager"in r)return[{dragDropManager:r.manager},!1];const e=MOe(r.backend,r.context,r.options,r.debugMode),t=!r.context;return[e,t]}function MOe(r,e=sle(),t,n){const i=e;return i[eM]||(i[eM]={dragDropManager:IOe(r,e,t,n)}),i[eM]}function sle(){return typeof global<"u"?global:window}var nB,wX;function ROe(){return wX||(wX=1,nB=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!r(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),nB}var POe=ROe();const FOe=Rm(POe),vS=typeof window<"u"?we.useLayoutEffect:we.useEffect;function BOe(r,e,t){const[n,i]=we.useState(()=>e(r)),s=we.useCallback(()=>{const o=e(r);FOe(n,o)||(i(o),t&&t())},[n,r,t]);return vS(s),[n,s]}function WOe(r,e,t){const[n,i]=BOe(r,e,t);return vS(function(){const o=r.getHandlerId();if(o!=null)return r.subscribeToStateChange(i,{handlerIds:[o]})},[r,i]),n}function ole(r,e,t){return WOe(e,r||(()=>({})),()=>t.reconnect())}function ale(r,e){const t=[...e||[]];return e==null&&typeof r!="function"&&t.push(r),we.useMemo(()=>typeof r=="function"?r():r,t)}function VOe(r){return we.useMemo(()=>r.hooks.dragSource(),[r])}function HOe(r){return we.useMemo(()=>r.hooks.dragPreview(),[r])}let iB=!1,rB=!1;class zOe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){fr(!iB,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return iB=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{iB=!1}}isDragging(){if(!this.sourceId)return!1;fr(!rB,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return rB=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{rB=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let sB=!1;class UOe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;fr(!sB,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return sB=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{sB=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function $Oe(r,e,t){const n=t.getRegistry(),i=n.addTarget(r,e);return[i,()=>n.removeTarget(i)]}function jOe(r,e,t){const n=t.getRegistry(),i=n.addSource(r,e);return[i,()=>n.removeSource(i)]}function jV(r,e,t,n){let i=t?t.call(n,r,e):void 0;if(i!==void 0)return!!i;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const s=Object.keys(r),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const u=s[l];if(!a(u))return!1;const d=r[u],h=e[u];if(i=t?t.call(n,d,h,u):void 0,i===!1||i===void 0&&d!==h)return!1}return!0}function qV(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function qOe(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function KOe(r){return(e=null,t=null)=>{if(!we.isValidElement(e)){const s=e;return r(s,t),s}const n=e;return qOe(n),GOe(n,t?s=>r(s,t):r)}}function lle(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];if(t.endsWith("Ref"))e[t]=r[t];else{const i=KOe(n);e[t]=()=>i}}),e}function SX(r,e){typeof r=="function"?r(e):r.current=e}function GOe(r,e){const t=r.ref;return fr(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?we.cloneElement(r,{ref:n=>{SX(t,n),SX(e,n)}}):we.cloneElement(r,{ref:e})}class YOe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!jV(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!jV(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=lle({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,qV(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,qV(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ZOe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!jV(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=lle({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,qV(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function hD(){const{dragDropManager:r}=we.useContext(Qae);return fr(r!=null,"Expected drag drop context"),r}function XOe(r,e){const t=hD(),n=we.useMemo(()=>new YOe(t.getBackend()),[t]);return vS(()=>(n.dragSourceOptions=r||null,n.reconnect(),()=>n.disconnectDragSource()),[n,r]),vS(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function QOe(){const r=hD();return we.useMemo(()=>new zOe(r),[r])}class JOe{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,i=this.monitor,{isDragging:s}=n;return s?s(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:i}=e;i&&i(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function eMe(r,e,t){const n=we.useMemo(()=>new JOe(r,e,t),[e,t]);return we.useEffect(()=>{n.spec=r},[r]),n}function tMe(r){return we.useMemo(()=>{const e=r.type;return fr(e!=null,"spec.type must be defined"),e},[r])}function nMe(r,e,t){const n=hD(),i=eMe(r,e,t),s=tMe(r);vS(function(){if(s!=null){const[a,l]=jOe(s,i,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),l}},[n,e,t,i,s])}function iMe(r,e){const t=ale(r,e);fr(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=QOe(),i=XOe(t.options,t.previewOptions);return nMe(t,n,i),[ole(t.collect,n,i),VOe(i),HOe(i)]}function rMe(r){return we.useMemo(()=>r.hooks.dropTarget(),[r])}function sMe(r){const e=hD(),t=we.useMemo(()=>new ZOe(e.getBackend()),[e]);return vS(()=>(t.dropTargetOptions=r||null,t.reconnect(),()=>t.disconnectDropTarget()),[r]),t}function oMe(){const r=hD();return we.useMemo(()=>new UOe(r),[r])}function aMe(r){const{accept:e}=r;return we.useMemo(()=>(fr(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class lMe{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function uMe(r,e){const t=we.useMemo(()=>new lMe(r,e),[e]);return we.useEffect(()=>{t.spec=r},[r]),t}function cMe(r,e,t){const n=hD(),i=uMe(r,e),s=aMe(r);vS(function(){const[a,l]=$Oe(s,i,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),l},[n,e,i,t,s.map(o=>o.toString()).join("|")])}function dMe(r,e){const t=ale(r,e),n=oMe(),i=sMe(t.options);return cMe(t,n,i),[ole(t.collect,n,i),rMe(i)]}function ule(r){let e=null;return()=>(e==null&&(e=r()),e)}function hMe(r,e){return r.filter(t=>t!==e)}function fMe(r,e){const t=new Set,n=s=>t.add(s);r.forEach(n),e.forEach(n);const i=[];return t.forEach(s=>i.push(s)),i}class gMe{enter(e){const t=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=fMe(this.entered.filter(n),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=hMe(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class pMe{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(t[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const cle="__NATIVE_FILE__",dle="__NATIVE_URL__",hle="__NATIVE_TEXT__",fle="__NATIVE_HTML__",LX=Object.freeze(Object.defineProperty({__proto__:null,FILE:cle,HTML:fle,TEXT:hle,URL:dle},Symbol.toStringTag,{value:"Module"}));function oB(r,e,t){const n=e.reduce((i,s)=>i||r.getData(s),"");return n??t}const KV={[cle]:{exposeProperties:{files:r=>Array.prototype.slice.call(r.files),items:r=>r.items,dataTransfer:r=>r},matchesTypes:["Files"]},[fle]:{exposeProperties:{html:(r,e)=>oB(r,e,""),dataTransfer:r=>r},matchesTypes:["Html","text/html"]},[dle]:{exposeProperties:{urls:(r,e)=>oB(r,e,"").split(`
`),dataTransfer:r=>r},matchesTypes:["Url","text/uri-list"]},[hle]:{exposeProperties:{text:(r,e)=>oB(r,e,""),dataTransfer:r=>r},matchesTypes:["Text","text/plain"]}};function mMe(r,e){const t=KV[r];if(!t)throw new Error(`native type ${r} has no configuration`);const n=new pMe(t);return n.loadDataTransfer(e),n}function aB(r){if(!r)return null;const e=Array.prototype.slice.call(r.types||[]);return Object.keys(KV).filter(t=>{const n=KV[t];return n!=null&&n.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const _Me=ule(()=>/firefox/i.test(navigator.userAgent)),gle=ule(()=>!!window.safari);class EX{interpolate(e){const{xs:t,ys:n,c1s:i,c2s:s,c3s:o}=this;let a=t.length-1;if(e===t[a])return n[a];let l=0,u=o.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));const v=t[d];if(v<e)l=d+1;else if(v>e)u=d-1;else return n[d]}a=Math.max(0,u);const h=e-t[a],p=h*h;return n[a]+i[a]*h+s[a]*p+o[a]*h*p}constructor(e,t){const{length:n}=e,i=[];for(let v=0;v<n;v++)i.push(v);i.sort((v,C)=>e[v]<e[C]?-1:1);const s=[],o=[];let a,l;for(let v=0;v<n-1;v++)a=e[v+1]-e[v],l=t[v+1]-t[v],s.push(a),o.push(l/a);const u=[o[0]];for(let v=0;v<s.length-1;v++){const C=o[v],S=o[v+1];if(C*S<=0)u.push(0);else{a=s[v];const E=s[v+1],k=a+E;u.push(3*k/((k+E)/C+(k+a)/S))}}u.push(o[o.length-1]);const d=[],h=[];let p;for(let v=0;v<u.length-1;v++){p=o[v];const C=u[v],S=1/s[v],E=C+u[v+1]-p-p;d.push((p-C-E)*S),h.push(E*S*S)}this.xs=e,this.ys=t,this.c1s=u,this.c2s=d,this.c3s=h}}const vMe=1;function ple(r){const e=r.nodeType===vMe?r:r.parentElement;if(!e)return null;const{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function eO(r){return{x:r.clientX,y:r.clientY}}function bMe(r){var e;return r.nodeName==="IMG"&&(_Me()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(r)))}function CMe(r,e,t,n){let i=r?e.width:t,s=r?e.height:n;return gle()&&r&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function yMe(r,e,t,n,i){const s=bMe(e),a=ple(s?r:e),l={x:t.x-a.x,y:t.y-a.y},{offsetWidth:u,offsetHeight:d}=r,{anchorX:h,anchorY:p}=n,{dragPreviewWidth:v,dragPreviewHeight:C}=CMe(s,e,u,d),S=()=>{let X=new EX([0,.5,1],[l.y,l.y/d*C,l.y+C-d]).interpolate(p);return gle()&&s&&(X+=(window.devicePixelRatio-1)*C),X},E=()=>new EX([0,.5,1],[l.x,l.x/u*v,l.x+v-u]).interpolate(h),{offsetX:k,offsetY:D}=i,O=k===0||k,H=D===0||D;return{x:O?k:E(),y:H?D:S()}}class wMe{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function SMe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xX(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){SMe(r,i,t[i])})}return r}class LMe{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",s),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",i),t.addEventListener("drop",s),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",i),t.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return xX({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return xX({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(LX).some(t=>LX[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=mMe(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&ple(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=eO(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=aB(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const d=this.monitor.getSourceId(),h=this.sourceNodes.get(d),p=this.sourcePreviewNodes.get(d)||h;if(p){const{anchorX:v,anchorY:C,offsetX:S,offsetY:E}=this.getCurrentSourcePreviewNodeOptions(),O=yMe(h,p,o,{anchorX:v,anchorY:C},{offsetX:S,offsetY:E});a.setDragImage(p,O.x,O.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=aB(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:eO(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=eO(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else aB(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:eO(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new wMe(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new gMe(this.isNodeInDocument)}}const EMe=function(e,t,n){return new LMe(e,t,n)},xMe=({onClick:r,classNames:e="",renderStatus:t})=>{const[n,i]=we.useState(!1),s=()=>{i(!0)},o=()=>{i(!1)};return pe.createElement("div",{role:"button",className:e,onClick:r,onMouseOver:s,onMouseOut:o},t==null?void 0:t(n))};var DMe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const IMe=Ni("tab"),iF=Ht(IMe,"item"),GV=si(iF,"active"),TMe=Ht(iF,"label"),kMe=Ht(iF,"extra");function mle(r){var{tab:e,active:t}=r,n=DMe(r,["tab","active"]);const{name:i,closable:s,id:o,icon:a,status:l}=e,{onCloseTab:u,onSelectTab:d,onContextMenu:h,onDrag:p}=n,v=we.useRef(null),C=O=>{O.preventDefault(),h==null||h(O,e)},[,S]=iMe({collect:O=>({isDragging:O.isDragging()}),type:"DND_NODE",item:e}),[,E]=dMe({accept:"DND_NODE",hover(O,H){if(!v.current)return;const V=v.current,X=V==null?void 0:V.getBoundingClientRect(),$=(X.right-X.left)/2,z=H.getClientOffset().x-X.left,M={hoverMiddleX:$,hoverClientX:z};p==null||p(O,e,M)}});S(E(v));const k=O=>typeof O=="string"?pe.createElement(cs,{type:O}):O,D=(O,H)=>{if(O&&!H){if(typeof O=="function")return O(e);switch(O){case"edited":return pe.createElement(cs,{type:"primitive-dot"});default:return pe.createElement(cs,{type:"close"})}}return pe.createElement(cs,{type:"close"})};return pe.createElement("div",{ref:v,className:ni(iF,{[GV]:t}),onClick:O=>d==null?void 0:d(o),onContextMenu:C},a&&pe.createElement("span",{className:TMe},k(a)),i,(typeof s>"u"||s)&&pe.createElement(xMe,{classNames:kMe,onClick:O=>{O.stopPropagation(),u==null||u(o)},renderStatus:O=>D(l,O)}))}const YV=Ni("tabs"),NMe=Ht(YV,"header");function Cj(r){var e;const{role:t,activeTab:n,className:i,data:s=[],type:o="line",style:a,onMoveTab:l,onCloseTab:u,onSelectTab:d,onContextMenu:h}=r,p=we.useRef(null),v=we.useRef(null),C=we.useCallback((E,k)=>{const D=s[E];l==null||l(pAe(s,{$splice:[[E,1],[k,0,D]]}))},[s]),S=(E,k,D)=>{const O=s.indexOf(E),H=s.indexOf(k),{hoverClientX:V,hoverMiddleX:X}=D;O!==H&&(O<H&&V<X||O>H&&V>X||C==null||C(O,H))};return we.useEffect(()=>{var E,k;const D=(E=p.current)===null||E===void 0?void 0:E.querySelector(`.${GV}`);if(D){const O=((k=p.current)===null||k===void 0?void 0:k.clientWidth)||0,H=D.offsetLeft;H>O&&setTimeout(()=>{var V;(V=v.current)===null||V===void 0||V.scrollTo(H+D.clientWidth)},0)}},[(e=p.current)===null||e===void 0?void 0:e.querySelector(`.${GV}`)]),pe.createElement(AOe,{backend:EMe,context:window},pe.createElement("div",{style:a,className:ni(YV,si(YV,o),i),role:t,ref:p},pe.createElement(dD,{className:NMe,direction:Ex.horizontal,ref:v,trackStyle:{height:3}},s.map((E,k)=>pe.createElement(mle,{key:E.id,active:n===E.id,tab:E,onDrag:S,onCloseTab:u,onContextMenu:h,onSelectTab:d})))))}const yj=Ni("tree"),M2=Ht(yj,"treenode"),AMe=si(M2,"active"),OMe=si(M2,"open"),MMe=si(M2,"close"),_le=Ht(yj,"indent"),RMe=Ht(_le,"guide"),PMe=Ht(M2,"title"),FMe=8,BMe=({data:r,indent:e,className:t,name:n,renderIcon:i,renderTitle:s,draggable:o,onContextMenu:a,onClick:l,onNodeDragStart:u,onNodeDragEnter:d,onNodeDragOver:h,onNodeDrop:p,onNodeDragEnd:v})=>{const C=r.id,S=we.useRef(null),E=X=>{X.stopPropagation(),u==null||u(X,r);try{X.dataTransfer.setData("text/plain","")}catch{}},k=X=>{X.preventDefault(),X.stopPropagation(),d==null||d(X,r)},D=X=>{X.preventDefault(),X.stopPropagation(),h==null||h(X,r)},O=X=>{X.preventDefault(),X.stopPropagation(),p==null||p(X,r)},H=X=>{X.stopPropagation(),v==null||v(X,r)},V=`${e?e+"_":""}${r.id}`;return pe.createElement("div",{ref:S,key:`${C}-${e}`,tabIndex:0,"data-indent":e,"data-key":C,"data-id":`mo_treeNode_${V}`,className:t,title:n,draggable:o,onContextMenu:a,onClick:l,onDragStart:E,onDragOver:D,onDragEnter:k,onDragEnd:H,onDrop:O},pe.createElement("div",{className:_le,style:{width:FMe*e}},new Array(e).fill("").map((X,$)=>pe.createElement("div",{key:$,className:RMe}))),i(),pe.createElement("span",{className:PMe},s()))};var lB,DX;function WMe(){if(DX)return lB;DX=1;function r(){this.__data__=[],this.size=0}return lB=r,lB}var uB,IX;function wj(){if(IX)return uB;IX=1;function r(e,t){return e===t||e!==e&&t!==t}return uB=r,uB}var cB,TX;function rF(){if(TX)return cB;TX=1;var r=wj();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return cB=e,cB}var dB,kX;function VMe(){if(kX)return dB;kX=1;var r=rF(),e=Array.prototype,t=e.splice;function n(i){var s=this.__data__,o=r(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return dB=n,dB}var hB,NX;function HMe(){if(NX)return hB;NX=1;var r=rF();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return hB=e,hB}var fB,AX;function zMe(){if(AX)return fB;AX=1;var r=rF();function e(t){return r(this.__data__,t)>-1}return fB=e,fB}var gB,OX;function UMe(){if(OX)return gB;OX=1;var r=rF();function e(t,n){var i=this.__data__,s=r(i,t);return s<0?(++this.size,i.push([t,n])):i[s][1]=n,this}return gB=e,gB}var pB,MX;function sF(){if(MX)return pB;MX=1;var r=WMe(),e=VMe(),t=HMe(),n=zMe(),i=UMe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,pB=s,pB}var mB,RX;function $Me(){if(RX)return mB;RX=1;var r=sF();function e(){this.__data__=new r,this.size=0}return mB=e,mB}var _B,PX;function jMe(){if(PX)return _B;PX=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return _B=r,_B}var vB,FX;function qMe(){if(FX)return vB;FX=1;function r(e){return this.__data__.get(e)}return vB=r,vB}var bB,BX;function KMe(){if(BX)return bB;BX=1;function r(e){return this.__data__.has(e)}return bB=r,bB}var CB,WX;function vle(){if(WX)return CB;WX=1;var r=typeof Ou=="object"&&Ou&&Ou.Object===Object&&Ou;return CB=r,CB}var yB,VX;function Xv(){if(VX)return yB;VX=1;var r=vle(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return yB=t,yB}var wB,HX;function R2(){if(HX)return wB;HX=1;var r=Xv(),e=r.Symbol;return wB=e,wB}var SB,zX;function GMe(){if(zX)return SB;zX=1;var r=R2(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function s(o){var a=t.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var d=n.call(o);return u&&(a?o[i]=l:delete o[i]),d}return SB=s,SB}var LB,UX;function YMe(){if(UX)return LB;UX=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return LB=t,LB}var EB,$X;function P2(){if($X)return EB;$X=1;var r=R2(),e=GMe(),t=YMe(),n="[object Null]",i="[object Undefined]",s=r?r.toStringTag:void 0;function o(a){return a==null?a===void 0?i:n:s&&s in Object(a)?e(a):t(a)}return EB=o,EB}var xB,jX;function oL(){if(jX)return xB;jX=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return xB=r,xB}var DB,qX;function ble(){if(qX)return DB;qX=1;var r=P2(),e=oL(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var l=r(a);return l==n||l==i||l==t||l==s}return DB=o,DB}var IB,KX;function ZMe(){if(KX)return IB;KX=1;var r=Xv(),e=r["__core-js_shared__"];return IB=e,IB}var TB,GX;function XMe(){if(GX)return TB;GX=1;var r=ZMe(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return TB=t,TB}var kB,YX;function Cle(){if(YX)return kB;YX=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return kB=t,kB}var NB,ZX;function QMe(){if(ZX)return NB;ZX=1;var r=ble(),e=XMe(),t=oL(),n=Cle(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,d=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!t(p)||e(p))return!1;var v=r(p)?d:s;return v.test(n(p))}return NB=h,NB}var AB,XX;function JMe(){if(XX)return AB;XX=1;function r(e,t){return e==null?void 0:e[t]}return AB=r,AB}var OB,QX;function aL(){if(QX)return OB;QX=1;var r=QMe(),e=JMe();function t(n,i){var s=e(n,i);return r(s)?s:void 0}return OB=t,OB}var MB,JX;function Sj(){if(JX)return MB;JX=1;var r=aL(),e=Xv(),t=r(e,"Map");return MB=t,MB}var RB,eQ;function oF(){if(eQ)return RB;eQ=1;var r=aL(),e=r(Object,"create");return RB=e,RB}var PB,tQ;function eRe(){if(tQ)return PB;tQ=1;var r=oF();function e(){this.__data__=r?r(null):{},this.size=0}return PB=e,PB}var FB,nQ;function tRe(){if(nQ)return FB;nQ=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return FB=r,FB}var BB,iQ;function nRe(){if(iQ)return BB;iQ=1;var r=oF(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(s){var o=this.__data__;if(r){var a=o[s];return a===e?void 0:a}return n.call(o,s)?o[s]:void 0}return BB=i,BB}var WB,rQ;function iRe(){if(rQ)return WB;rQ=1;var r=oF(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var s=this.__data__;return r?s[i]!==void 0:t.call(s,i)}return WB=n,WB}var VB,sQ;function rRe(){if(sQ)return VB;sQ=1;var r=oF(),e="__lodash_hash_undefined__";function t(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=r&&i===void 0?e:i,this}return VB=t,VB}var HB,oQ;function sRe(){if(oQ)return HB;oQ=1;var r=eRe(),e=tRe(),t=nRe(),n=iRe(),i=rRe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,HB=s,HB}var zB,aQ;function oRe(){if(aQ)return zB;aQ=1;var r=sRe(),e=sF(),t=Sj();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return zB=n,zB}var UB,lQ;function aRe(){if(lQ)return UB;lQ=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return UB=r,UB}var $B,uQ;function aF(){if(uQ)return $B;uQ=1;var r=aRe();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return $B=e,$B}var jB,cQ;function lRe(){if(cQ)return jB;cQ=1;var r=aF();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return jB=e,jB}var qB,dQ;function uRe(){if(dQ)return qB;dQ=1;var r=aF();function e(t){return r(this,t).get(t)}return qB=e,qB}var KB,hQ;function cRe(){if(hQ)return KB;hQ=1;var r=aF();function e(t){return r(this,t).has(t)}return KB=e,KB}var GB,fQ;function dRe(){if(fQ)return GB;fQ=1;var r=aF();function e(t,n){var i=r(this,t),s=i.size;return i.set(t,n),this.size+=i.size==s?0:1,this}return GB=e,GB}var YB,gQ;function Lj(){if(gQ)return YB;gQ=1;var r=oRe(),e=lRe(),t=uRe(),n=cRe(),i=dRe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,YB=s,YB}var ZB,pQ;function hRe(){if(pQ)return ZB;pQ=1;var r=sF(),e=Sj(),t=Lj(),n=200;function i(s,o){var a=this.__data__;if(a instanceof r){var l=a.__data__;if(!e||l.length<n-1)return l.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(l)}return a.set(s,o),this.size=a.size,this}return ZB=i,ZB}var XB,mQ;function Ej(){if(mQ)return XB;mQ=1;var r=sF(),e=$Me(),t=jMe(),n=qMe(),i=KMe(),s=hRe();function o(a){var l=this.__data__=new r(a);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,XB=o,XB}var QB,_Q;function fRe(){if(_Q)return QB;_Q=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return QB=r,QB}var JB,vQ;function gRe(){if(vQ)return JB;vQ=1;var r=aL(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return JB=e,JB}var e8,bQ;function yle(){if(bQ)return e8;bQ=1;var r=gRe();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return e8=e,e8}var t8,CQ;function xj(){if(CQ)return t8;CQ=1;var r=yle(),e=wj(),t=Object.prototype,n=t.hasOwnProperty;function i(s,o,a){var l=s[o];(!(n.call(s,o)&&e(l,a))||a===void 0&&!(o in s))&&r(s,o,a)}return t8=i,t8}var n8,yQ;function lF(){if(yQ)return n8;yQ=1;var r=xj(),e=yle();function t(n,i,s,o){var a=!s;s||(s={});for(var l=-1,u=i.length;++l<u;){var d=i[l],h=o?o(s[d],n[d],d,s,n):void 0;h===void 0&&(h=n[d]),a?e(s,d,h):r(s,d,h)}return s}return n8=t,n8}var i8,wQ;function pRe(){if(wQ)return i8;wQ=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return i8=r,i8}var r8,SQ;function lL(){if(SQ)return r8;SQ=1;function r(e){return e!=null&&typeof e=="object"}return r8=r,r8}var s8,LQ;function mRe(){if(LQ)return s8;LQ=1;var r=P2(),e=lL(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return s8=n,s8}var o8,EQ;function wle(){if(EQ)return o8;EQ=1;var r=mRe(),e=lL(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(o){return e(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return o8=s,o8}var a8,xQ;function qb(){if(xQ)return a8;xQ=1;var r=Array.isArray;return a8=r,a8}var BT={exports:{}},l8,DQ;function _Re(){if(DQ)return l8;DQ=1;function r(){return!1}return l8=r,l8}BT.exports;var IQ;function Dj(){return IQ||(IQ=1,function(r,e){var t=Xv(),n=_Re(),i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;r.exports=u}(BT,BT.exports)),BT.exports}var u8,TQ;function Ij(){if(TQ)return u8;TQ=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var s=typeof n;return i=i??r,!!i&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return u8=t,u8}var c8,kQ;function Tj(){if(kQ)return c8;kQ=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return c8=e,c8}var d8,NQ;function vRe(){if(NQ)return d8;NQ=1;var r=P2(),e=Tj(),t=lL(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",p="[object RegExp]",v="[object Set]",C="[object String]",S="[object WeakMap]",E="[object ArrayBuffer]",k="[object DataView]",D="[object Float32Array]",O="[object Float64Array]",H="[object Int8Array]",V="[object Int16Array]",X="[object Int32Array]",$="[object Uint8Array]",P="[object Uint8ClampedArray]",z="[object Uint16Array]",M="[object Uint32Array]",W={};W[D]=W[O]=W[H]=W[V]=W[X]=W[$]=W[P]=W[z]=W[M]=!0,W[n]=W[i]=W[E]=W[s]=W[k]=W[o]=W[a]=W[l]=W[u]=W[d]=W[h]=W[p]=W[v]=W[C]=W[S]=!1;function I(R){return t(R)&&e(R.length)&&!!W[r(R)]}return d8=I,d8}var h8,AQ;function kj(){if(AQ)return h8;AQ=1;function r(e){return function(t){return e(t)}}return h8=r,h8}var WT={exports:{}};WT.exports;var OQ;function Nj(){return OQ||(OQ=1,function(r,e){var t=vle(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();r.exports=a}(WT,WT.exports)),WT.exports}var f8,MQ;function Sle(){if(MQ)return f8;MQ=1;var r=vRe(),e=kj(),t=Nj(),n=t&&t.isTypedArray,i=n?e(n):r;return f8=i,f8}var g8,RQ;function Lle(){if(RQ)return g8;RQ=1;var r=pRe(),e=wle(),t=qb(),n=Dj(),i=Ij(),s=Sle(),o=Object.prototype,a=o.hasOwnProperty;function l(u,d){var h=t(u),p=!h&&e(u),v=!h&&!p&&n(u),C=!h&&!p&&!v&&s(u),S=h||p||v||C,E=S?r(u.length,String):[],k=E.length;for(var D in u)(d||a.call(u,D))&&!(S&&(D=="length"||v&&(D=="offset"||D=="parent")||C&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||i(D,k)))&&E.push(D);return E}return g8=l,g8}var p8,PQ;function Aj(){if(PQ)return p8;PQ=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return p8=e,p8}var m8,FQ;function Ele(){if(FQ)return m8;FQ=1;function r(e,t){return function(n){return e(t(n))}}return m8=r,m8}var _8,BQ;function bRe(){if(BQ)return _8;BQ=1;var r=Ele(),e=r(Object.keys,Object);return _8=e,_8}var v8,WQ;function CRe(){if(WQ)return v8;WQ=1;var r=Aj(),e=bRe(),t=Object.prototype,n=t.hasOwnProperty;function i(s){if(!r(s))return e(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return v8=i,v8}var b8,VQ;function xle(){if(VQ)return b8;VQ=1;var r=ble(),e=Tj();function t(n){return n!=null&&e(n.length)&&!r(n)}return b8=t,b8}var C8,HQ;function uF(){if(HQ)return C8;HQ=1;var r=Lle(),e=CRe(),t=xle();function n(i){return t(i)?r(i):e(i)}return C8=n,C8}var y8,zQ;function yRe(){if(zQ)return y8;zQ=1;var r=lF(),e=uF();function t(n,i){return n&&r(i,e(i),n)}return y8=t,y8}var w8,UQ;function wRe(){if(UQ)return w8;UQ=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return w8=r,w8}var S8,$Q;function SRe(){if($Q)return S8;$Q=1;var r=oL(),e=Aj(),t=wRe(),n=Object.prototype,i=n.hasOwnProperty;function s(o){if(!r(o))return t(o);var a=e(o),l=[];for(var u in o)u=="constructor"&&(a||!i.call(o,u))||l.push(u);return l}return S8=s,S8}var L8,jQ;function Oj(){if(jQ)return L8;jQ=1;var r=Lle(),e=SRe(),t=xle();function n(i){return t(i)?r(i,!0):e(i)}return L8=n,L8}var E8,qQ;function LRe(){if(qQ)return E8;qQ=1;var r=lF(),e=Oj();function t(n,i){return n&&r(i,e(i),n)}return E8=t,E8}var VT={exports:{}};VT.exports;var KQ;function ERe(){return KQ||(KQ=1,function(r,e){var t=Xv(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(u,d){if(d)return u.slice();var h=u.length,p=a?a(h):new u.constructor(h);return u.copy(p),p}r.exports=l}(VT,VT.exports)),VT.exports}var x8,GQ;function xRe(){if(GQ)return x8;GQ=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return x8=r,x8}var D8,YQ;function DRe(){if(YQ)return D8;YQ=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[s++]=a)}return o}return D8=r,D8}var I8,ZQ;function Dle(){if(ZQ)return I8;ZQ=1;function r(){return[]}return I8=r,I8}var T8,XQ;function Mj(){if(XQ)return T8;XQ=1;var r=DRe(),e=Dle(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),r(i(o),function(a){return n.call(o,a)}))}:e;return T8=s,T8}var k8,QQ;function IRe(){if(QQ)return k8;QQ=1;var r=lF(),e=Mj();function t(n,i){return r(n,e(n),i)}return k8=t,k8}var N8,JQ;function Ile(){if(JQ)return N8;JQ=1;function r(e,t){for(var n=-1,i=t.length,s=e.length;++n<i;)e[s+n]=t[n];return e}return N8=r,N8}var A8,eJ;function Tle(){if(eJ)return A8;eJ=1;var r=Ele(),e=r(Object.getPrototypeOf,Object);return A8=e,A8}var O8,tJ;function kle(){if(tJ)return O8;tJ=1;var r=Ile(),e=Tle(),t=Mj(),n=Dle(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)r(a,t(o)),o=e(o);return a}:n;return O8=s,O8}var M8,nJ;function TRe(){if(nJ)return M8;nJ=1;var r=lF(),e=kle();function t(n,i){return r(n,e(n),i)}return M8=t,M8}var R8,iJ;function Nle(){if(iJ)return R8;iJ=1;var r=Ile(),e=qb();function t(n,i,s){var o=i(n);return e(n)?o:r(o,s(n))}return R8=t,R8}var P8,rJ;function Ale(){if(rJ)return P8;rJ=1;var r=Nle(),e=Mj(),t=uF();function n(i){return r(i,t,e)}return P8=n,P8}var F8,sJ;function Ole(){if(sJ)return F8;sJ=1;var r=Nle(),e=kle(),t=Oj();function n(i){return r(i,t,e)}return F8=n,F8}var B8,oJ;function kRe(){if(oJ)return B8;oJ=1;var r=aL(),e=Xv(),t=r(e,"DataView");return B8=t,B8}var W8,aJ;function NRe(){if(aJ)return W8;aJ=1;var r=aL(),e=Xv(),t=r(e,"Promise");return W8=t,W8}var V8,lJ;function ARe(){if(lJ)return V8;lJ=1;var r=aL(),e=Xv(),t=r(e,"Set");return V8=t,V8}var H8,uJ;function ORe(){if(uJ)return H8;uJ=1;var r=aL(),e=Xv(),t=r(e,"WeakMap");return H8=t,H8}var z8,cJ;function cF(){if(cJ)return z8;cJ=1;var r=kRe(),e=Sj(),t=NRe(),n=ARe(),i=ORe(),s=P2(),o=Cle(),a="[object Map]",l="[object Object]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",v=o(r),C=o(e),S=o(t),E=o(n),k=o(i),D=s;return(r&&D(new r(new ArrayBuffer(1)))!=p||e&&D(new e)!=a||t&&D(t.resolve())!=u||n&&D(new n)!=d||i&&D(new i)!=h)&&(D=function(O){var H=s(O),V=H==l?O.constructor:void 0,X=V?o(V):"";if(X)switch(X){case v:return p;case C:return a;case S:return u;case E:return d;case k:return h}return H}),z8=D,z8}var U8,dJ;function MRe(){if(dJ)return U8;dJ=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return U8=t,U8}var $8,hJ;function Mle(){if(hJ)return $8;hJ=1;var r=Xv(),e=r.Uint8Array;return $8=e,$8}var j8,fJ;function Rj(){if(fJ)return j8;fJ=1;var r=Mle();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return j8=e,j8}var q8,gJ;function RRe(){if(gJ)return q8;gJ=1;var r=Rj();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return q8=e,q8}var K8,pJ;function PRe(){if(pJ)return K8;pJ=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return K8=e,K8}var G8,mJ;function FRe(){if(mJ)return G8;mJ=1;var r=R2(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return G8=n,G8}var Y8,_J;function BRe(){if(_J)return Y8;_J=1;var r=Rj();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return Y8=e,Y8}var Z8,vJ;function WRe(){if(vJ)return Z8;vJ=1;var r=Rj(),e=RRe(),t=PRe(),n=FRe(),i=BRe(),s="[object Boolean]",o="[object Date]",a="[object Map]",l="[object Number]",u="[object RegExp]",d="[object Set]",h="[object String]",p="[object Symbol]",v="[object ArrayBuffer]",C="[object DataView]",S="[object Float32Array]",E="[object Float64Array]",k="[object Int8Array]",D="[object Int16Array]",O="[object Int32Array]",H="[object Uint8Array]",V="[object Uint8ClampedArray]",X="[object Uint16Array]",$="[object Uint32Array]";function P(z,M,W){var I=z.constructor;switch(M){case v:return r(z);case s:case o:return new I(+z);case C:return e(z,W);case S:case E:case k:case D:case O:case H:case V:case X:case $:return i(z,W);case a:return new I;case l:case h:return new I(z);case u:return t(z);case d:return new I;case p:return n(z)}}return Z8=P,Z8}var X8,bJ;function VRe(){if(bJ)return X8;bJ=1;var r=oL(),e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return X8=t,X8}var Q8,CJ;function HRe(){if(CJ)return Q8;CJ=1;var r=VRe(),e=Tle(),t=Aj();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return Q8=n,Q8}var J8,yJ;function zRe(){if(yJ)return J8;yJ=1;var r=cF(),e=lL(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return J8=n,J8}var e7,wJ;function URe(){if(wJ)return e7;wJ=1;var r=zRe(),e=kj(),t=Nj(),n=t&&t.isMap,i=n?e(n):r;return e7=i,e7}var t7,SJ;function $Re(){if(SJ)return t7;SJ=1;var r=cF(),e=lL(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return t7=n,t7}var n7,LJ;function jRe(){if(LJ)return n7;LJ=1;var r=$Re(),e=kj(),t=Nj(),n=t&&t.isSet,i=n?e(n):r;return n7=i,n7}var i7,EJ;function qRe(){if(EJ)return i7;EJ=1;var r=Ej(),e=fRe(),t=xj(),n=yRe(),i=LRe(),s=ERe(),o=xRe(),a=IRe(),l=TRe(),u=Ale(),d=Ole(),h=cF(),p=MRe(),v=WRe(),C=HRe(),S=qb(),E=Dj(),k=URe(),D=oL(),O=jRe(),H=uF(),V=Oj(),X=1,$=2,P=4,z="[object Arguments]",M="[object Array]",W="[object Boolean]",I="[object Date]",R="[object Error]",G="[object Function]",Z="[object GeneratorFunction]",ee="[object Map]",ne="[object Number]",ie="[object Object]",te="[object RegExp]",B="[object Set]",K="[object String]",de="[object Symbol]",ae="[object WeakMap]",De="[object ArrayBuffer]",Me="[object DataView]",Qe="[object Float32Array]",ct="[object Float64Array]",Rt="[object Int8Array]",Ye="[object Int16Array]",gt="[object Int32Array]",Ut="[object Uint8Array]",_t="[object Uint8ClampedArray]",sn="[object Uint16Array]",rn="[object Uint32Array]",on={};on[z]=on[M]=on[De]=on[Me]=on[W]=on[I]=on[Qe]=on[ct]=on[Rt]=on[Ye]=on[gt]=on[ee]=on[ne]=on[ie]=on[te]=on[B]=on[K]=on[de]=on[Ut]=on[_t]=on[sn]=on[rn]=!0,on[R]=on[G]=on[ae]=!1;function qn(Ft,Pt,At,an,ot,Mt){var cn,bn=Pt&X,Pe=Pt&$,at=Pt&P;if(At&&(cn=ot?At(Ft,an,ot,Mt):At(Ft)),cn!==void 0)return cn;if(!D(Ft))return Ft;var rt=S(Ft);if(rt){if(cn=p(Ft),!bn)return o(Ft,cn)}else{var yt=h(Ft),ln=yt==G||yt==Z;if(E(Ft))return s(Ft,bn);if(yt==ie||yt==z||ln&&!ot){if(cn=Pe||ln?{}:C(Ft),!bn)return Pe?l(Ft,i(cn,Ft)):a(Ft,n(cn,Ft))}else{if(!on[yt])return ot?Ft:{};cn=v(Ft,yt,bn)}}Mt||(Mt=new r);var Rn=Mt.get(Ft);if(Rn)return Rn;Mt.set(Ft,cn),O(Ft)?Ft.forEach(function(Tt){cn.add(qn(Tt,Pt,At,Tt,Ft,Mt))}):k(Ft)&&Ft.forEach(function(Tt,tn){cn.set(tn,qn(Tt,Pt,At,tn,Ft,Mt))});var Xt=at?Pe?d:u:Pe?V:H,Tn=rt?void 0:Xt(Ft);return e(Tn||Ft,function(Tt,tn){Tn&&(tn=Tt,Tt=Ft[tn]),t(cn,tn,qn(Tt,Pt,At,tn,Ft,Mt))}),cn}return i7=qn,i7}var r7,xJ;function KRe(){if(xJ)return r7;xJ=1;var r=qRe(),e=1,t=4;function n(i){return r(i,e|t)}return r7=n,r7}var GRe=KRe();const xm=Rm(GRe);class tM{constructor(e){this.hashMap=new Map,this.count=0,this.getHashMap=t=>this.hashMap.get(t.toString())||null,this.removeHashMap=t=>{var n;const i=this.hashMap.get(t.toString());i&&(this.hashMap.delete(t.toString()),!((n=i.children)===null||n===void 0)&&n.length&&i.children.forEach(s=>{this.removeHashMap(s)}))},this.getNode=t=>{const n=this.getHashMap(t);return(n==null?void 0:n.node)||null},this.removeNode=t=>{var n,i;const s=this.getHashMap(t);if(s){const{node:o,parent:a}=s;if(!a)return Ti.error("You're going to remove a root node"),null;const l=this.getHashMap(a),u=l==null?void 0:l.node;if(u)return(n=u.children)===null||n===void 0||n.splice(u.children.indexOf(o),1),(i=l.children)===null||i===void 0||i.splice(l.children.indexOf(t.toString()),1),this.removeHashMap(t),this.updateChildren(l.children),o}return null},this.updateNode=(t,n)=>{const i=this.getNode(t);return i?(Object.assign(i,n),i):null},this.insertNode=(t,n,i)=>{const s=this.getHashMap(n);if(s){const o=s.node,a=this.generate(t);if(a.parent=n.toString(),o.children=o.children||[],s.children=s.children||[],o.children.splice(i,0,t),s.children.splice(i,0,a.id),this.updateChildren(s.children),s.parent){const l=this.getHashMap(s.parent);l&&this.updateChildren(l.children)}return a}return null},this.insertBefore=(t,n)=>{const i=this.getHashMap(n);if(i){const s=i.parent;if(!s)return Ti.error("You're going to insert a obj before the root node"),null;const o=this.getHashMap(s);if(o){const a=(o.children||[]).indexOf(n.toString());return this.insertNode(t,s,a)}}return null},this.insertAfter=(t,n)=>{const i=this.getHashMap(n);if(i){const s=i.parent;if(!s)return Ti.error("You're going to insert a obj after the root node"),null;const o=this.getHashMap(s);if(o){const a=(o.children||[]).indexOf(n.toString());return this.insertNode(t,s,a+1)}}return null},this.prepend=(t,n)=>this.insertNode(t,n,0),this.append=(t,n)=>{const i=this.getHashMap(n);return i?(i.children=i.children||[],this.insertNode(t,n,i.children.length)):null},this.obj=xm(e),this.count=1,this.generate(this.obj)}addMap(e,t){if(this.hashMap.has(e)){Ti.error(`There is already a data whose key is ${e} in hashMap`);return}else this.hashMap.set(e,t),this.count+=1}generateChildren(e,t){const n=[];e.forEach(i=>{var s;const o={id:i.id.toString(),node:i};t.id&&(o.parent=t.id),this.addMap(i.id.toString(),o),n.push(i.id.toString()),!((s=i.children)===null||s===void 0)&&s.length&&this.generateChildren(i.children,o)}),t.children=n,n.forEach((i,s)=>{const o=this.hashMap.get(i);s>0&&(o.prev=n[s-1]),s<n.length-1&&(o.next=n[s+1])})}generate(e){var t;const n=e.id.toString(),i={id:n,node:e};return this.addMap(n,i),!((t=e.children)===null||t===void 0)&&t.length&&this.generateChildren(e.children,i),i}updateChildren(e=[]){e.forEach((t,n)=>{const i=this.getHashMap(t);i&&(i.prev=i.next=void 0,n>0&&(i.prev=e[n-1]),n<e.length-1&&(i.next=e[n+1]))})}}const dF=({className:r,data:e=[],draggable:t=!1,loadedKeys:n,expandKeys:i,activeKey:s,onExpand:o,onDropTree:a,onRightClick:l,renderTitle:u,onSelect:d,onLoadData:h,onTreeClick:p})=>{const[v,C]=we.useState([]),[S,E]=we.useState(null),[k,D]=we.useState([]),O=we.useRef(),H=we.useRef({x:0,y:0,dragNode:null,flattenTree:null}),V=we.useRef(null),X=ae=>!(!h||n!=null&&n.includes(ae)),$=ae=>{const De=ae.id.toString();X(De)&&(D(Me=>{const Qe=Me.concat();return Qe.push(De),Qe}),h(ae).finally(()=>{D(Me=>{const Qe=Me.concat(),ct=Qe.indexOf(De);return Qe.splice(ct,1),Qe})}))},P=(ae,De)=>{const Me=(i||v).concat(),Qe=Me.findIndex(ct=>ct===ae);Qe>-1?Me.splice(Qe,1):Me.push(ae),o?o(Me.concat(),De):C(Me.concat())},z=(ae,De)=>{De.stopPropagation();const Me=ae.id.toString();E(Me),ae.isLeaf||($(ae),P(Me,ae)),d==null||d(ae)},M=(ae,De,Me,Qe)=>De?ae||null:Qe?pe.createElement(cs,{type:"loading~spin"}):pe.createElement(cs,{type:Me?"chevron-down":"chevron-right"}),W=(ae,De)=>{ae.stopPropagation(),l==null||l(ae,De)},I=we.useCallback(ae=>{te(ae,null,!0),window.removeEventListener("dragend",I)},[]),R=(ae,De)=>{H.current={x:ae.clientX,y:ae.clientY,dragNode:De,flattenTree:new tM({id:Number.MAX_SAFE_INTEGER,children:e})};const Me=De.id.toString(),Qe=(i||v).indexOf(Me);if(Qe>-1){const ct=v.concat();ct.splice(Qe,1),o?o(ct,De):C(ct)}window.addEventListener("dragend",I)},G=Is.debounce((ae,De)=>{const Me=De.id.toString(),Qe=(i||v).includes(Me),Rt=H.current.dragNode.id.toString(),Ye=Me===Rt;!De.isLeaf&&!Ye&&!Qe&&!X(Me)&&P(Me,De)},300),Z=ae=>{const De=ae.id.toString(),Me=document.querySelector(`div[data-key="${De}"]`);let Qe=Me;for(;Qe;){Qe.classList.contains("drag-over")||Qe.classList.add("drag-over");const ct=Qe.nextElementSibling;(ct==null?void 0:ct.dataset.indent)===Me.dataset.indent?Qe=null:Qe=ct}},ee=()=>{var ae;(ae=V.current)===null||ae===void 0||ae.querySelectorAll(".drag-over").forEach(De=>{De.classList.remove("drag-over")})},ne=ae=>{var De,Me;const Qe=H.current.flattenTree,ct=(De=Qe.getHashMap(ae.id))===null||De===void 0?void 0:De.parent;return(Me=Qe.getHashMap(ct))===null||Me===void 0?void 0:Me.node},ie=(ae,De)=>{const Me=De.isLeaf?ne(De):De;Me!==O.current&&(ee(),O.current=Me,Z(Me))},te=(ae,De,Me=!1)=>{ee(),O.current=void 0,H.current={x:0,y:0,dragNode:null,flattenTree:null}},B=(ae,De)=>{if(De.isLeaf){const Me=ne(De),Qe=ne(H.current.dragNode),ct=(Me.key||Me.id).toString(),Rt=(Qe.key||Qe.id).toString();if(ct===Rt){H.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(H.current.dragNode,Me)}else{const Me=ne(H.current.dragNode),Qe=(Me.key||Me.id).toString(),ct=De.id.toString(),Ye=H.current.dragNode.id.toString();if(Qe===ct||Ye===ct){H.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(H.current.dragNode,De)}H.current={x:0,y:0,dragNode:null,flattenTree:null}},K=(ae,De)=>ae.map((Me,Qe)=>{const ct=Me.id.toString(),Rt=(i||v).includes(ct),Ye=k.includes(ct),gt=S===ct,Ut=(u==null?void 0:u(Me,Qe,!!Me.isLeaf))||Me.name,_t=typeof Me.icon=="string"?pe.createElement(cs,{type:Me.icon}):Me.icon,sn=pe.createElement(BMe,{key:`${ct}-${De}`,draggable:t,data:Me,name:typeof Ut=="string"?Ut:void 0,indent:De,className:ni(M2,gt&&AMe,Rt?OMe:MMe),renderIcon:()=>M(_t,!!Me.isLeaf,Rt,Ye),renderTitle:()=>Ut,onContextMenu:on=>W(on,Me),onClick:on=>z(Me,on),onNodeDragStart:t?R:void 0,onNodeDragEnter:t?G:void 0,onNodeDragOver:t?ie:void 0,onNodeDragEnd:t?te:void 0,onNodeDrop:t?B:void 0}),rn=Rt&&!Ye&&K(Me.children||[],De+1);return[sn,rn]}),de=()=>{E(null),p==null||p()};return we.useLayoutEffect(()=>{var ae,De;const Me=[];for(e.forEach(Qe=>{Me.push({paths:[Qe],data:Qe})});Me.length;){const{paths:Qe,data:ct}=Me.pop();if((ae=ct.children)===null||ae===void 0?void 0:ae.find(Ye=>Ye.isEditable)){const Ye=Qe.map(Ut=>($(Ut),Ut.id.toString())),gt=Array.from(new Set([...Ye,...i||v]));o?o(gt,ct):C(gt);break}else{const Ye=((De=ct.children)===null||De===void 0?void 0:De.map(gt=>({paths:[...Qe,gt],data:gt})))||[];Me.push(...Ye)}}},[e]),we.useEffect(()=>{s&&E(s.toString())},[s]),pe.createElement("div",{role:"tree",ref:V,draggable:t,onClick:de,className:ni(yj,r)},K(e,0))};var YRe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const HT=r=>{const{visible:e=!0,children:t,className:n,style:i={}}=r,s=YRe(r,["visible","children","className","style"]);return pe.createElement("div",Object.assign({className:n,style:Object.assign({display:e?void 0:"none"},i)},s),t)},ZRe=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:s2,Breadcrumb:lie,Button:Zw,Checkbox:Tme,Collapse:die,get DirectionKind(){return Ex},Display:HT,DropDown:Xz,Icon:cs,Input:Qz,Item:kve,List:xve,Menu:Vc,MenuItem:yne,get MenuMode(){return wC},Modal:l2,MonacoEditor:hj,Option:Xae,Pane:Sb,Scrollbar:dD,Search:Yae,Select:LN,SplitPane:Dk,SubMenu:Sne,Tab:mle,Tabs:Cj,Toolbar:o2,Tooltip:Uz,TreeView:dF,useContextMenu:PP,useContextView:Zx,useContextViewEle:n2},Symbol.toStringTag,{value:"Module"}));var Pf;(function(r){r[r.EditorCore=0]="EditorCore",r[r.EditorContrib=100]="EditorContrib",r[r.WorkbenchContrib=200]="WorkbenchContrib",r[r.BuiltinExtension=300]="BuiltinExtension",r[r.ExternalExtension=400]="ExternalExtension"})(Pf||(Pf={}));const Rle={View:{value:L("view","View"),original:"View"},Help:{value:L("help","Help"),original:"Help"},Preferences:{value:L("preferences","Preferences"),original:"Preferences"},Developer:{value:L({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}};var XRe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class ep{constructor(e){this.desc=e}}function QRe(r){const e=new Et,t=new r,n=t.desc,{f1:i,menu:s,keybinding:o,description:a}=n,l=XRe(n,["f1","menu","keybinding","description"]);if(e.add(Ki.registerCommand({id:l.id,handler:(u,...d)=>t.run(u,...d),description:a})),Array.isArray(s)?e.add(Pu.appendMenuItems(s.map(u=>({id:u.id,item:Object.assign({command:l},u)})))):s&&e.add(Pu.appendMenuItem(s.id,Object.assign({command:l},s))),i&&(e.add(Pu.appendMenuItem(vn.CommandPalette,{command:l,when:l.precondition})),e.add(Pu.addCommand(l))),Array.isArray(o))for(const u of o)Al.registerKeybindingRule(Object.assign(Object.assign({},u),{id:l.id,when:l.precondition?qt.and(l.precondition,u.when):u.when}));else o&&Al.registerKeybindingRule(Object.assign(Object.assign({},o),{id:l.id,when:l.precondition?qt.and(l.precondition,o.when):o.when}));return e}const JRe=Object.freeze(Object.defineProperty({__proto__:null,Action2:ep,KeyChord:po,get KeybindingWeight(){return Pf}},Symbol.toStringTag,{value:"Module"})),ePe="ko-KR",tPe="",nPe={"molecule.welcome":"Molecule   ",menubar:" ","menu.file":"","menu.settings":"","menu.account":"","menu.colorTheme":" ","menu.newFile":" ","menu.newFolder":" ","menu.open":"","menu.edit":"","menu.undo":"","menu.redo":" ","menu.selection":"","menu.selectAll":" ","menu.copyLineUp":"  ","menu.view":"","menu.commandPalette":" ","menu.openView":" ","menu.appearance":"","menu.showMenuBar":"  ","menu.showSideBar":"  ","menu.showSideBar.label":"    ","menu.showStatusBar":"  ","menu.showActivityBar":"  ","menu.hideActivityBar":"  ","menu.showPanel":" ","menu.showPanel.title":" ","menu.defaultProjectName":"  ","menu.run":"","menu.runTask":" ","menu.help":"","menu.about":"","menu.menuBarHorizontal":"   ","menu.menuBarVertical":"   ","sidebar.explore.folders":"","sidebar.explore.title":"","sidebar.explore.openEditor":" ","sidebar.explore.openEditor.group":"${i} ","sidebar.explore.outline":"","sidebar.search.title":"","sidebar.replace.placement":"","sidebar.explore.refresh":"  ","sidebar.explore.collapseFolders":"   ","sidebar.explore.toggleVertical":" ","sidebar.explore.saveAll":" ","sidebar.explore.actionDesc":"    ...","sidebar.explore.outlineMore":"  ...","toolbar.refresh":" ","toolbar.clearAll":" ","toolbar.collapseAll":" ","search.matchCase":"/ ","search.matchWholeWord":"  ","search.useRegularExpression":" ","search.preserveCase":"/ ","search.replaceAll":" ","panel.output.title":"","panel.toolbox.closePanel":" ","panel.toolbox.maximize":"  ","panel.toolbox.restoreSize":"  ","panel.problems.title":"","panel.problems.empty":"    .","notification.title":"","notification.title.no":"  .","editor.closeToRight":"   ","editor.closeToLeft":"   ","editor.closeAll":" ","editor.closeSaved":"  ","editor.closeOthers":"  ","editor.close":"","editor.actions.splitRight":" ","editor.showOpenEditors":"   ","contextmenu.rename":" ","contextmenu.delete":"","contextmenu.newFile":" ","contextmenu.newFolder":" ","contextmenu.removeFolder":" ","contextmenu.openToTheSide":" ","contextmenu.addFolderToSpace":"   ...","contextmenu.findInSpace":"  ...","contextmenu.download":"..."},iPe={id:ePe,name:tPe,source:nPe},rPe="zh-CN",sPe="",oPe={"molecule.welcome":"!",menubar:"","menu.file":"","menu.settings":"","menu.account":"","menu.colorTheme":"","menu.newFile":"","menu.newFolder":"","menu.open":"","menu.edit":"","menu.undo":"","menu.redo":"","menu.selection":"","menu.selectAll":"","menu.copyLineUp":"","menu.view":"","menu.commandPalette":"","menu.openView":"","menu.appearance":"","menu.showMenuBar":"","menu.showAuxiliaryBar":"","menu.showSideBar":"","menu.showSideBar.label":"","menu.showStatusBar":"","menu.showActivityBar":"","menu.hideActivityBar":"","menu.showPanel":"","menu.showPanel.title":"","menu.defaultProjectName":"","menu.run":"","menu.runTask":"","menu.help":"","menu.about":"","menu.menuBarHorizontal":"","menu.menuBarVertical":"","sidebar.explore.folders":"","sidebar.explore.title":"","sidebar.explore.openEditor":"","sidebar.explore.openEditor.group":" ${i} ","sidebar.explore.outline":"","sidebar.search.title":"","sidebar.replace.placement":"","sidebar.explore.refresh":"","sidebar.explore.collapseFolders":"","sidebar.explore.toggleVertical":"","sidebar.explore.saveAll":"","sidebar.explore.actionDesc":"...","sidebar.explore.outlineMore":"...","toolbar.refresh":"","toolbar.clearAll":"","toolbar.collapseAll":"","search.matchCase":"","search.matchWholeWord":"","search.useRegularExpression":"","search.preserveCase":"","search.replaceAll":"","panel.output.title":"","panel.problems.title":"","panel.problems.empty":"","panel.toolbox.closePanel":"","panel.toolbox.maximize":"","panel.toolbox.restoreSize":"","notification.title":"","notification.title.no":"","notification.locale.title":", ","notification.locale.description":"","notification.locale.button":"","editor.closeToRight":"","editor.closeToLeft":"","editor.closeAll":"","editor.closeOthers":"","editor.closeSaved":"","editor.close":"","editor.actions.splitRight":"","editor.showOpenEditors":"","contextmenu.rename":"","contextmenu.delete":"","contextmenu.newFile":"","contextmenu.newFolder":"","contextmenu.removeFolder":"","contextmenu.openToTheSide":"","contextmenu.addFolderToSpace":"...","contextmenu.findInSpace":"...","contextmenu.download":"..."},aPe={id:rPe,name:sPe,source:oPe},lPe="en",uPe="English",cPe={"molecule.welcome":"Welcome to Molecule",menubar:"Menu Bar","menu.file":"File","menu.settings":"Settings","menu.account":"Account","menu.colorTheme":"Color Theme","menu.newFile":"New File","menu.newFolder":"New Folder","menu.open":"Open","menu.edit":"Edit","menu.undo":"Undo","menu.redo":"Redo","menu.selection":"Selection","menu.selectAll":"Select All","menu.copyLineUp":"Copy Line Up","menu.view":"View","menu.commandPalette":"Command Palette","menu.openView":"Open View","menu.appearance":"Appearance","menu.showMenuBar":"Show Menu Bar","menu.showAuxiliaryBar":"Show Auxiliary Bar","menu.showSideBar":"Show Side Bar","menu.showSideBar.label":"Toggle Side Bar Visibility","menu.showStatusBar":"Show Status Bar","menu.showActivityBar":"Show Activity Bar","menu.hideActivityBar":"Hide Activity Bar","menu.showPanel":"Show Panel","menu.showPanel.title":"Toggle Panel","menu.defaultProjectName":"Default Project Name","menu.run":"Run","menu.runTask":"Run Task","menu.help":"Help","menu.about":"About","menu.menuBarHorizontal":"Menu Bar Horizontal Mode","menu.menuBarVertical":"Menu Bar Vertical Mode","sidebar.explore.folders":"Folders","sidebar.explore.title":"Explorer","sidebar.explore.openEditor":"Open Editors","sidebar.explore.openEditor.group":"Group ${i}","sidebar.explore.outline":"Outline","sidebar.search.title":"Search","sidebar.replace.placement":"Replace","sidebar.explore.refresh":"Refresh Explorer","sidebar.explore.collapseFolders":"Collapse Folders in Explorer","sidebar.explore.toggleVertical":"Toggle Vertical","sidebar.explore.saveAll":"Save All","sidebar.explore.actionDesc":"View and More Actions...","sidebar.explore.outlineMore":"More Actions...","toolbar.refresh":"Refresh","toolbar.clearAll":"Clear all","toolbar.collapseAll":"Collapse all","search.matchCase":"Match Case","search.matchWholeWord":"Match Whole Word","search.useRegularExpression":"Use Regular Expression","search.preserveCase":"Preserve Case","search.replaceAll":"Replace All","panel.output.title":"output","panel.toolbox.closePanel":"Close Panel","panel.toolbox.maximize":"Maximize Panel Size","panel.toolbox.restoreSize":"Restore Panel Size","panel.problems.title":"Problems","panel.problems.empty":"No problems have been detected in the workspace.","notification.title":"Notifications","notification.title.no":"No new notifications","notification.locale.title":"A reload is required for the change in display language to take effect.","notification.locale.description":"Press the confirm button to reload and change the display language.","notification.locale.button":"Confirm Reload","editor.closeToRight":"Close To Right","editor.closeToLeft":"Close To Left","editor.closeAll":"Close All","editor.closeSaved":"Close Saved","editor.closeOthers":"Close Others","editor.close":"Close","editor.actions.splitRight":"Split Editor Right","editor.showOpenEditors":"Show Opened Editors","contextmenu.rename":"Rename","contextmenu.delete":"Delete","contextmenu.newFile":"New File","contextmenu.newFolder":"New Folder","contextmenu.removeFolder":"Remove Folder","contextmenu.openToTheSide":"Open to the Side","contextmenu.addFolderToSpace":"Add Folder to Workspace...","contextmenu.findInSpace":"Find in Workspace...","contextmenu.download":"Download..."},dPe={id:lPe,name:uPe,source:cPe};var ZV;(function(r){r.Theme="Themes",r.Normal="normal",r.Settings="settings",r.Locals="locales",r.Menus="menus",r.Workbench="workbench"})(ZV||(ZV={}));var xx;(function(r){r.Languages="languages",r.Commands="commands",r.Configuration="configuration",r.Grammar="grammars",r.Themes="themes",r.IconTheme="iconThemes"})(xx||(xx={}));const hPe=iPe,fPe=aPe,Ple=dPe,Fle=[fPe,Ple,hPe],gPe={id:"ExtendsLocales",name:"Extends locales",contributes:{[xx.Languages]:Fle},activate(){},dispose(){}},pPe=Ple.id;Fle.find(r=>r.id===pPe);var iP;(function(r){r.OnChange="localization.onchange"})(iP||(iP={}));var mPe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_Pe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},XV;const QV=`${MP}.localeId`;let Am=XV=class extends jc{constructor(){super(),this.state={},this._locales=new Map}reset(){localStorage.removeItem(QV),this._current=void 0,this._locales.clear()}getLocales(){return Array.from(this._locales.values())}initialize(e,t){this.addLocales(e),this._locales.get(t)?this._current=this._locales.get(t):Ti.error(`Cannot initialize the locale with ${t}`)}getCurrentLocale(){return this._current&&Object.assign({},this._current)}getLocale(e){if(e)return this._locales.get(e)}removeLocale(e){const t=this._locales.get(e);if(t!==void 0){if(this._locales.size===1){Ti.error("You can't remove this Locale because there must have one locale at least");return}return this._current&&this._current.id===t.id&&(this._current=this._locales.values().next().value),this._locales.delete(e),t}}setCurrentLocale(e){if(this._current&&this._current.id===e)return!0;const t=this._locales.get(e);return t?(this.emit(iP.OnChange,this._current,t),this._current=t,localStorage.setItem(QV,t.id),!0):!1}transformLocaleData(e){const t=Object.assign({},e);if(e.source instanceof Map||(t.source=new Map(Object.entries(e.source))),t.inherit){const n=this._locales.get(t.inherit);n&&(t.source=new Map([...n.source,...t.source]))}return t}addLocales(e){if(e.length>0){const t=this._locales;e.forEach(n=>{const i=n.id;t.has(i)||t.set(i,this.transformLocaleData(n))})}}onChange(e){this.subscribe(iP.OnChange,e)}localize(e,t="",...n){let i=t;return this._current&&(i=this._current.source.get(e)||t),n.length&&n.forEach(s=>{i=i.replace(XV.LOCALIZE_REPLACED_WORD,s)}),i}};Am.LOCALIZE_REPLACED_WORD="${i}";Am=XV=mPe([zr(),_Pe("design:paramtypes",[])],Am);function Vt(r,e,...t){return pt.resolve(Am).localize(r,e,...t)}class eXe extends pe.PureComponent{constructor(e){super(e),this.state={localeId:""},this.getValue=()=>{const{sourceKey:t,defaultValue:n=""}=this.props;return this.localeService?this.localeService.localize(t,n):n}}componentDidMount(){var e;this.update((e=this.localeService.getCurrentLocale())===null||e===void 0?void 0:e.id),this.localeService.onChange((t,n)=>{this.update(n.id)})}update(e){this.setState({localeId:e})}get localeService(){return pt.resolve(Am)}render(){return this.getValue()}}var ho;(function(r){r.OnCloseTab="editor.closeTab",r.OnCloseAll="editor.closeAll",r.OnCloseOther="editor.closeOther",r.OnCloseToLeft="editor.closeToLeft",r.OnCloseToRight="editor.closeToRight",r.OnMoveTab="editor.moveTab",r.OpenTab="editor.openTab",r.OnSelectTab="editor.selectTab",r.OnUpdateTab="editor.updateTab",r.onActionsClick="editor.actionsClick",r.OnSplitEditorRight="editor.splitEditorRight",r.onEditorInstanceMount="editor.onEditorInstanceMount"})(ho||(ho={}));class Ble{constructor(e,t,n,i,s=[],o=[],a){this.id=e,this.data=i,this.menu=o,this.actions=s,this.tab=t,this.activeTab=n,this.editorInstance=a}}class Wle{constructor(e=null,t=[],n,i={}){this.current=e,this.groups=t,this.entry=n,this.editorOptions=i}}const vPe="modulepreload",bPe=function(r){return"/monaco-sql-languages/"+r},DJ={},mn=function(e,t,n){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=bPe(s),s in DJ)return;DJ[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":vPe,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};const CPe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class yPe extends Je{constructor(e,t={}){super(),this._onDidUpdate=this._register(new Ae),this._editor=e,this._options=qv(t,CPe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new se(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new se(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new se(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>se.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,s=this.ranges.length;i<s&&!t;i++){let o=this.ranges[i].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(AO(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}function wPe(r,e){return new SPe(r,e)}class SPe extends Koe{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?vU(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=(a,l)=>e.fmr(a,l),s=(a,l)=>function(){const u=Array.prototype.slice.call(arguments,0);return l(a,u)};let o={};for(const a of n)o[a]=s(a,i);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}function LPe(r){return Array.isArray(r)}function EPe(r){return!LPe(r)}function Vle(r){return typeof r=="string"}function IJ(r){return!Vle(r)}function cE(r){return!r}function _C(r,e){return r.ignoreCase&&e?e.toLowerCase():e}function TJ(r){return r.replace(/[&<>'"_]/g,"-")}function xPe(r,e){console.log(`${r.languageId}: ${e}`)}function ss(r,e){return new Error(`${r.languageId}: ${e}`)}function J1(r,e,t,n,i){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(s,function(a,l,u,d,h,p,v,C,S){return cE(u)?cE(d)?!cE(h)&&h<n.length?_C(r,n[h]):!cE(v)&&r&&typeof r[v]=="string"?r[v]:(o===null&&(o=i.split("."),o.unshift(i)),!cE(p)&&p<o.length?_C(r,o[p]):""):_C(r,t):"$"})}function tO(r,e){let t=e;for(;t&&t.length>0;){const n=r.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}function DPe(r,e){let t=e;for(;t&&t.length>0;){if(r.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}const Hle=5;class EN{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new ex(e,t);let n=ex.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new ex(e,t),this._entries[n]=i,i)}}EN._INSTANCE=new EN(Hle);class ex{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return ex._equals(this,e)}push(e){return EN.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return EN.create(this.parent,e)}}class vk{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new vk(this.languageId,this.state)}}class eC{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new bk(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new bk(e,t);let n=ex.getStackElementId(e),i=this._entries[n];return i||(i=new bk(e,null),this._entries[n]=i,i)}}eC._INSTANCE=new eC(Hle);class bk{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:eC.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof bk)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class IPe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new b4(e,t,this._languageId)))}nestedModeTokenize(e,t,n,i){const s=n.languageId,o=n.state,a=Qs.get(s);if(!a)return this.enterMode(i,s),this.emit(i,""),o;let l=a.tokenize(e,t,o,i);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new i$(this._tokens,e)}}class rP{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let i=e!==null?e.length:0,s=t.length,o=n!==null?n.length:0;if(i===0&&s===0&&o===0)return new Uint32Array(0);if(i===0&&s===0)return n;if(s===0&&o===0)return e;let a=new Uint32Array(i+s+o);e!==null&&a.set(e);for(let l=0;l<s;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+s),a}nestedModeTokenize(e,t,n,i){const s=n.languageId,o=n.state,a=Qs.get(s);if(!a)return this.enterMode(i,s),this.emit(i,""),o;let l=a.tokenize2(e,t,o,i);return this._prependTokens=rP._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new C4(rP._merge(this._prependTokens,this._tokens,null),e)}}class hF{constructor(e,t,n,i){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let s=!1;this._tokenizationRegistryListener=Qs.onDidChange(o=>{if(s)return;let a=!1;for(let l=0,u=o.changedLanguages.length;l<u;l++){let d=o.changedLanguages[l];if(this._embeddedModes[d]){a=!0;break}}a&&(s=!0,Qs.fire([this._languageId]),s=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=Qs.get(t);if(n){if(n instanceof hF){const s=n.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}const i=Qs.getPromise(t);i&&e.push(i)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=EN.create(null,this._lexer.start);return eC.create(e,null)}tokenize(e,t,n,i){let s=new IPe,o=this._tokenize(e,t,n,i,s);return s.finalize(o)}tokenize2(e,t,n,i){let s=new rP(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,i,s);return s.finalize(o)}_tokenize(e,t,n,i,s){return n.embeddedModeData?this._nestedTokenize(e,t,n,i,s):this._myTokenize(e,t,n,i,s)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=tO(this._lexer,t.stack.state),!n))throw ss(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,s=!1;for(const o of n){if(!IJ(o.action)||o.action.nextEmbedded!=="@pop")continue;s=!0;let a=o.regex,l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}let u=e.search(a);u===-1||u!==0&&o.matchOnlyAtLineStart||(i===-1||u<i)&&(i=u)}if(!s)throw ss(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,s){let o=this._findLeavingNestedModeOffset(e,n);if(o===-1){let u=s.nestedModeTokenize(e,t,n.embeddedModeData,i);return eC.create(n.stack,new vk(n.embeddedModeData.languageId,u))}let a=e.substring(0,o);a.length>0&&s.nestedModeTokenize(a,!1,n.embeddedModeData,i);let l=e.substring(o);return this._myTokenize(l,t,n,i+o,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,s){s.enterMode(i,this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let u=n.embeddedModeData,d=n.stack,h=0,p=null,v=!0;for(;v||h<l;){const C=h,S=d.depth,E=p?p.groups.length:0,k=d.state;let D=null,O=null,H=null,V=null,X=null;if(p){D=p.matches;const z=p.groups.shift();O=z.matched,H=z.action,V=p.rule,p.groups.length===0&&(p=null)}else{if(!v&&h>=l)break;v=!1;let z=this._lexer.tokenizer[k];if(!z&&(z=tO(this._lexer,k),!z))throw ss(this._lexer,"tokenizer state is not defined: "+k);let M=a.substr(h);for(const W of z)if((h===0||!W.matchOnlyAtLineStart)&&(D=M.match(W.regex),D)){O=D[0],H=W.action;break}}if(D||(D=[""],O=""),H||(h<l&&(D=[a.charAt(h)],O=D[0]),H=this._lexer.defaultToken),O===null)break;for(h+=O.length;EPe(H)&&IJ(H)&&H.test;)H=H.test(O,D,k,h===l);let $=null;if(typeof H=="string"||Array.isArray(H))$=H;else if(H.group)$=H.group;else if(H.token!==null&&H.token!==void 0){if(H.tokenSubst?$=J1(this._lexer,H.token,O,D,k):$=H.token,H.nextEmbedded)if(H.nextEmbedded==="@pop"){if(!u)throw ss(this._lexer,"cannot pop embedded mode if not inside one");u=null}else{if(u)throw ss(this._lexer,"cannot enter embedded mode from within an embedded mode");X=J1(this._lexer,H.nextEmbedded,O,D,k)}if(H.goBack&&(h=Math.max(0,h-H.goBack)),H.switchTo&&typeof H.switchTo=="string"){let z=J1(this._lexer,H.switchTo,O,D,k);if(z[0]==="@"&&(z=z.substr(1)),tO(this._lexer,z))d=d.switchTo(z);else throw ss(this._lexer,"trying to switch to a state '"+z+"' that is undefined in rule: "+this._safeRuleName(V))}else{if(H.transform&&typeof H.transform=="function")throw ss(this._lexer,"action.transform not supported");if(H.next)if(H.next==="@push"){if(d.depth>=this._lexer.maxStack)throw ss(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(k)}else if(H.next==="@pop"){if(d.depth<=1)throw ss(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(V));d=d.pop()}else if(H.next==="@popall")d=d.popall();else{let z=J1(this._lexer,H.next,O,D,k);if(z[0]==="@"&&(z=z.substr(1)),tO(this._lexer,z))d=d.push(z);else throw ss(this._lexer,"trying to set a next state '"+z+"' that is undefined in rule: "+this._safeRuleName(V))}}H.log&&typeof H.log=="string"&&xPe(this._lexer,this._lexer.languageId+": "+J1(this._lexer,H.log,O,D,k))}if($===null)throw ss(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(V));const P=z=>{let M=this._modeService.getModeIdForLanguageName(z);M&&(z=M);const W=this._getNestedEmbeddedModeData(z);if(h<l){const I=e.substr(h);return this._nestedTokenize(I,t,eC.create(d,W),i+h,s)}else return eC.create(d,W)};if(Array.isArray($)){if(p&&p.groups.length>0)throw ss(this._lexer,"groups cannot be nested: "+this._safeRuleName(V));if(D.length!==$.length+1)throw ss(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(V));let z=0;for(let M=1;M<D.length;M++)z+=D[M].length;if(z!==O.length)throw ss(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(V));p={rule:V,matches:D,groups:[]};for(let M=0;M<$.length;M++)p.groups[M]={action:$[M],matched:D[M+1]};h-=O.length;continue}else{if($==="@rematch"&&(h-=O.length,O="",D=null,$="",X!==null))return P(X);if(O.length===0){if(l===0||S!==d.depth||k!==d.state||(p?p.groups.length:0)!==E)continue;throw ss(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(V))}let z=null;if(Vle($)&&$.indexOf("@brackets")===0){let M=$.substr(9),W=TPe(this._lexer,O);if(!W)throw ss(this._lexer,"@brackets token returned but no bracket defined as: "+O);z=TJ(W.token+M)}else{let M=$===""?"":$+this._lexer.tokenPostfix;z=TJ(M)}C<o&&s.emit(C+i,z)}if(X!==null)return P(X)}return eC.create(d,u)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=Qs.get(t);if(n)return new vk(t,n.getInitialState())}return new vk(t||NC,m2)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function TPe(r,e){if(!e)return null;e=_C(r,e);let t=r.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function kPe(r,e,t,n){return new hF(r,e,t,n)}var s7;const o7=(s7=window.trustedTypes)===null||s7===void 0?void 0:s7.createPolicy("standaloneColorizer",{createHTML:r=>r});class Pj{static colorizeElement(e,t,n,i){i=i||{};let s=i.theme||"vs",o=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();e.setTheme(s);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;let l=u=>{var d;const h=(d=o7==null?void 0:o7.createHTML(u))!==null&&d!==void 0?d:u;n.innerHTML=h};return this.colorize(t,a||"",o,i).then(l,u=>console.error(u))}static colorize(e,t,n,i){const s=e.languageIdCodec;let o=4;i&&typeof i.tabSize=="number"&&(o=i.tabSize),EU(t)&&(t=t.substr(1));let a=Dv(t),l=e.getModeId(n);if(!l)return Promise.resolve(kJ(a,o,s));e.triggerMode(l);const u=Qs.get(l);if(u)return a7(a,o,u,s);const d=Qs.getPromise(l);return d?new Promise((h,p)=>{d.then(v=>{a7(a,o,v,s).then(h,p)},p)}):new Promise((h,p)=>{let v=null,C=null;const S=()=>{v&&(v.dispose(),v=null),C&&(C.dispose(),C=null);const E=Qs.get(l);if(E){a7(a,o,E,s).then(h,p);return}h(kJ(a,o,s))};C=new cc,C.cancelAndSet(S,500),v=Qs.onDidChange(E=>{E.changedLanguages.indexOf(l)>=0&&S()})})}static colorizeLine(e,t,n,i,s=4){const o=Th.isBasicASCII(e,t),a=Th.containsRTL(e,o,n);return g4(new eL(!1,!0,e,!1,o,a,0,i,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let i=e.getLineContent(t);e.forceTokenization(t);let o=e.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function a7(r,e,t,n){return new Promise((i,s)=>{const o=()=>{const a=NPe(r,e,t,n);if(t instanceof hF){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,s);return}}i(a)};o()})}function kJ(r,e,t){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=16793600;for(let o=0,a=r.length;o<a;o++){let l=r[o];s[0]=l.length;const u=new $a(s,l,t),d=Th.isBasicASCII(l,!0),h=Th.containsRTL(l,d,!0);let p=g4(new eL(!1,!0,l,!1,d,h,0,u,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(p.html),n.push("<br/>")}return n.join("")}function NPe(r,e,t,n){let i=[],s=t.getInitialState();for(let o=0,a=r.length;o<a;o++){let l=r[o],u=t.tokenize2(l,!0,s,0);$a.convertToEndOffset(u.tokens,l.length);let d=new $a(u.tokens,l,n);const h=Th.isBasicASCII(l,!0),p=Th.containsRTL(l,h,!0);let v=g4(new eL(!1,!0,l,!1,h,p,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(v.html),i.push("<br/>"),s=u.endState}return i.join("")}function zle(r,e,t){let n=new jae(r,e),i=null;n.has(zc)||(i=new MR(gr.modelService.get()),n.set(zc,i)),n.has(Hd)||n.set(Hd,new nP(n.get(vr),n.get(js)));let s=t(n);return i&&i.setEditor(s),s}function APe(r,e,t){return zle(r,t||{},n=>new dN(r,e,n,n.get(Li),n.get(vr),n.get(js),n.get(Xn),n.get(ks),n.get($b),n.get(ZC),n.get(Oo),n.get(es),n.get(Kc),n.get(aa),n.get(Pl)))}function OPe(r){return gr.codeEditorService.get().onCodeEditorAdd(e=>{r(e)})}function MPe(r,e,t){return zle(r,t||{},n=>new _W(r,e,n,n.get(Li),n.get(Xn),n.get(ks),n.get($b),n.get(Oh),n.get(vr),n.get(ZC),n.get(Oo),n.get(es),n.get(GC),n.get(jb),n.get(YC)))}function RPe(r,e){return new yPe(r,e)}function PPe(r,e,t){return Hoe(gr.modelService.get(),gr.modeService.get(),r,e,t)}function FPe(r,e){gr.modelService.get().setMode(r,gr.modeService.get().create(e))}function BPe(r,e,t){r&&gr.markerService.get().changeOne(e,r.uri,t)}function WPe(r){return gr.markerService.get().read(r)}function VPe(r){return gr.markerService.get().onMarkerChanged(r)}function HPe(r){return gr.modelService.get().getModel(r)}function zPe(){return gr.modelService.get().getModels()}function UPe(r){return gr.modelService.get().onModelAdded(r)}function $Pe(r){return gr.modelService.get().onModelRemoved(r)}function jPe(r){return gr.modelService.get().onModelModeChanged(e=>{r({model:e.model,oldLanguage:e.oldModeId})})}function qPe(r){return wPe(gr.modelService.get(),r)}function KPe(r,e){const t=gr.standaloneThemeService.get();return t.registerEditorContainer(r),Pj.colorizeElement(t,gr.modeService.get(),r,e)}function GPe(r,e,t){return gr.standaloneThemeService.get().registerEditorContainer(document.body),Pj.colorize(gr.modeService.get(),r,e,t)}function YPe(r,e,t=4){return gr.standaloneThemeService.get().registerEditorContainer(document.body),Pj.colorizeModelLine(r,e,t)}function ZPe(r){let e=Qs.get(r);return e||{getInitialState:()=>m2,tokenize:(t,n,i,s)=>Bse(r,t,i,s)}}function XPe(r,e){gr.modeService.get().triggerMode(e);let n=ZPe(e),i=Dv(r),s=[],o=n.getInitialState();for(let a=0,l=i.length;a<l;a++){let u=i[a],d=n.tokenize(u,!0,o,0);s[a]=d.tokens,o=d.endState}return s}function QPe(r,e){gr.standaloneThemeService.get().defineTheme(r,e)}function JPe(r){gr.standaloneThemeService.get().setTheme(r)}function e4e(){G1e()}function t4e(r,e){return Ki.registerCommand({id:r,handler:e})}function n4e(){return{create:APe,onDidCreateEditor:OPe,createDiffEditor:MPe,createDiffNavigator:RPe,createModel:PPe,setModelLanguage:FPe,setModelMarkers:BPe,getModelMarkers:WPe,onDidChangeMarkers:VPe,getModels:zPe,getModel:HPe,onDidCreateModel:UPe,onWillDisposeModel:$Pe,onDidChangeModelLanguage:jPe,createWebWorker:qPe,colorizeElement:KPe,colorize:GPe,colorizeModelLine:YPe,tokenize:XPe,defineTheme:QPe,setTheme:JPe,remeasureFonts:e4e,registerCommand:t4e,AccessibilitySupport:wW,ContentWidgetPositionPreference:DW,CursorChangeReason:IW,DefaultEndOfLine:TW,EditorAutoIndentStrategy:NW,EditorOption:AW,EndOfLinePreference:OW,EndOfLineSequence:MW,MinimapPosition:HW,MouseTargetType:zW,OverlayWidgetPositionPreference:UW,OverviewRulerLane:$W,RenderLineNumbersType:jW,RenderMinimap:qW,ScrollbarVisibility:GW,ScrollType:KW,TextEditorCursorBlinkingStyle:JW,TextEditorCursorStyle:eV,TrackedRangeStickiness:tV,WrappingIndent:nV,ConfigurationChangedEvent:Rre,BareFontInfo:Nw,FontInfo:P6,TextModelResolvedOptions:PO,FindMatch:Fk,ApplyUpdateResult:QT,EditorType:w2,EditorOptions:Pm}}function i4e(r,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!r(t))return!1;return!0}function nO(r,e){return typeof r=="boolean"?r:e}function NJ(r,e){return typeof r=="string"?r:e}function r4e(r){const e={};for(const t of r)e[t]=!0;return e}function AJ(r,e=!1){e&&(r=r.map(function(n){return n.toLowerCase()}));const t=r4e(r);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function JV(r,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,o){n=!0;let a="";if(typeof r[o]=="string")a=r[o];else if(r[o]&&r[o]instanceof RegExp)a=r[o].source;else throw r[o]===void 0?ss(r,"language definition does not contain attribute '"+o+"', used at: "+e):ss(r,"attribute reference '"+o+"' must be a string, used at: "+e);return cE(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let i=(r.ignoreCase?"i":"")+(r.unicode?"u":"");return new RegExp(e,i)}function s4e(r,e,t,n){if(n<0)return r;if(n<e.length)return e[n];if(n>=100){n=n-100;let i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}function o4e(r,e,t,n){let i=-1,s=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(i=parseInt(o[3]),o[2]&&(i=i+100)),s=o[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let u;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let d=AJ(l.split("|"),r.ignoreCase);u=function(h){return a==="~"?d(h):!d(h)}}else if(a==="@"||a==="!@"){let d=r[l];if(!d)throw ss(r,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!i4e(function(p){return typeof p=="string"},d))throw ss(r,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let h=AJ(d,r.ignoreCase);u=function(p){return a==="@"?h(p):!h(p)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let d=JV(r,"^"+l+"$");u=function(h){return a==="~"?d.test(h):!d.test(h)}}else u=function(d,h,p,v){return JV(r,"^"+J1(r,l,h,p,v)+"$").test(d)};else if(l.indexOf("$")<0){let d=_C(r,l);u=function(h){return a==="=="?h===d:h!==d}}else{let d=_C(r,l);u=function(h,p,v,C,S){let E=J1(r,d,p,v,C);return a==="=="?h===E:h!==E}}return i===-1?{name:t,value:n,test:function(d,h,p,v){return u(d,d,h,p,v)}}:{name:t,value:n,test:function(d,h,p,v){let C=s4e(d,h,p,i);return u(C||"",d,h,p,v)}}}function eH(r,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw ss(r,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw ss(r,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw ss(r,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!DPe(r,J1(r,i,"",[],""))))throw ss(r,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,r.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let i=0,s=t.length;i<s;i++)n[i]=eH(r,e,t[i]);return{group:n}}else if(t.cases){let n=[];for(let s in t.cases)if(t.cases.hasOwnProperty(s)){const o=eH(r,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:o,name:s}):s==="@eos"?n.push({test:function(a,l,u,d){return d},value:o,name:s}):n.push(o4e(r,e,s,o))}const i=r.defaultToken;return{test:function(s,o,a,l){for(const u of n)if(!u.test||u.test(s,o,a,l))return u.value;return i}}}else throw ss(r,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class a4e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw ss(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=JV(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=eH(e,this.name,t)}}function l4e(r,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=r,t.includeLF=nO(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=nO(e.ignoreCase,!1),t.unicode=nO(e.unicode,!1),t.tokenPostfix=NJ(e.tokenPostfix,"."+t.languageId),t.defaultToken=NJ(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=r,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(o,a,l){for(const u of l){let d=u.include;if(d){if(typeof d!="string")throw ss(t,"an 'include' attribute must be a string at: "+o);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw ss(t,"include target '"+d+"' is not defined at: "+o);i(o+"."+d,a,e.tokenizer[d])}else{const h=new a4e(o);if(Array.isArray(u)&&u.length>=1&&u.length<=3)if(h.setRegex(n,u[0]),u.length>=3)if(typeof u[1]=="string")h.setAction(n,{token:u[1],next:u[2]});else if(typeof u[1]=="object"){const p=u[1];p.next=u[2],h.setAction(n,p)}else throw ss(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else h.setAction(n,u[1]);else{if(!u.regex)throw ss(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);u.name&&typeof u.name=="string"&&(h.name=u.name),u.matchOnlyAtStart&&(h.matchOnlyAtLineStart=nO(u.matchOnlyAtLineStart,!1)),h.setRegex(n,u.regex),h.setAction(n,u.action)}a.push(h)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw ss(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,i("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw ss(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let s=[];for(let o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw ss(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:_C(t,a.open),close:_C(t,a.close)});else throw ss(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}function u4e(r){zw.registerLanguage(r)}function c4e(){let r=[];return r=r.concat(zw.getLanguages()),r}function d4e(r){return gr.modeService.get().languageIdCodec.encodeLanguageId(r)}function h4e(r,e){let t=gr.modeService.get().onDidEncounterLanguage(n=>{n===r&&(t.dispose(),e())});return t}function f4e(r,e){const t=gr.modeService.get().validateLanguageId(r);if(!t)throw new Error(`Cannot set configuration for unknown language ${r}`);return hr.register(t,e,100)}class g4e{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,i){if(typeof this._actual.tokenize=="function")return xN.adaptTokenize(this._languageId,this._actual,e,n,i);throw new Error("Not supported!")}tokenize2(e,t,n){let i=this._actual.tokenizeEncoded(e,n);return new C4(i.tokens,i.endState)}}class xN{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=i}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let i=[],s=0;for(let o=0,a=e.length;o<a;o++){const l=e[o];let u=l.startIndex;o===0?u=0:u<s&&(u=s),i[o]=new b4(u+n,l.scopes,t),s=u}return i}static adaptTokenize(e,t,n,i,s){let o=t.tokenize(n,i),a=xN._toClassicTokens(o.tokens,e,s),l;return o.endState.equals(i)?l=i:l=o.endState,new i$(a,l)}tokenize(e,t,n,i){return xN.adaptTokenize(this._languageId,this._actual,e,n,i)}_toBinaryTokens(e,t,n){const i=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme;let o=[],a=0,l=0;for(let d=0,h=t.length;d<h;d++){const p=t[d],v=s.match(i,p.scopes);if(a>0&&o[a-1]===v)continue;let C=p.startIndex;d===0?C=0:C<l&&(C=l),o[a++]=C+n,o[a++]=v,l=C}let u=new Uint32Array(a);for(let d=0;d<a;d++)u[d]=o[d];return u}tokenize2(e,t,n,i){let s=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._modeService.languageIdCodec,s.tokens,i),a;return s.endState.equals(n)?a=n:a=s.endState,new C4(o,a)}}function p4e(r){return"tokenizeEncoded"in r}function Ule(r){return r&&typeof r.then=="function"}function m4e(r){if(r){const e=[null];for(let t=1,n=r.length;t<n;t++)e[t]=We.fromHex(r[t]);gr.standaloneThemeService.get().setColorMapOverride(e)}else gr.standaloneThemeService.get().setColorMapOverride(null)}function _4e(r,e){const t=gr.modeService.get().validateLanguageId(r);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${r}`);const n=i=>p4e(i)?new g4e(t,i):new xN(t,i,gr.modeService.get(),gr.standaloneThemeService.get());return Ule(e)?Qs.registerPromise(r,e.then(i=>n(i))):Qs.register(r,n(e))}function v4e(r,e){const t=n=>kPe(gr.modeService.get(),gr.standaloneThemeService.get(),r,l4e(r,n));return Ule(e)?Qs.registerPromise(r,e.then(n=>t(n))):Qs.register(r,t(e))}function b4e(r,e){return nR.register(r,e)}function C4e(r,e){return iR.register(r,e)}function y4e(r,e){return Pw.register(r,e)}function w4e(r,e){return Wk.register(r,{provideHover:(t,n,i)=>{let s=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,i)).then(o=>{if(o)return!o.range&&s&&(o.range=new se(n.lineNumber,s.startColumn,n.lineNumber,s.endColumn)),o.range||(o.range=new se(n.lineNumber,n.column,n.lineNumber,n.column)),o})}})}function S4e(r,e){return Kg.register(r,e)}function L4e(r,e){return fx.register(r,e)}function E4e(r,e){return rR.register(r,e)}function x4e(r,e){return Vk.register(r,e)}function D4e(r,e){return oR.register(r,e)}function I4e(r,e){return aR.register(r,e)}function T4e(r,e){return pb.register(r,e)}function k4e(r,e,t){return Sv.register(r,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,i,s,o)=>{let a=gr.markerService.get().read({resource:n.uri}).filter(l=>se.areIntersectingOrTouching(l,i));return e.provideCodeActions(n,i,{markers:a,only:s.only},o)},resolveCodeAction:e.resolveCodeAction})}function N4e(r,e){return ok.register(r,e)}function A4e(r,e){return dm.register(r,e)}function O4e(r,e){return lR.register(r,e)}function M4e(r,e){return Hk.register(r,e)}function R4e(r,e){return cm.register(r,e)}function P4e(r,e){return gx.register(r,e)}function F4e(r,e){return Z6.register(r,e)}function B4e(r,e){return sR.register(r,e)}function W4e(r,e){return _4.register(r,e)}function V4e(r,e){return px.register(r,e)}function H4e(r,e){return v4.register(r,e)}function z4e(r,e){return e$.register(r,e)}function U4e(r,e){return rC.register(r,e)}function $4e(){return{register:u4e,getLanguages:c4e,onLanguage:h4e,getEncodedLanguageId:d4e,setLanguageConfiguration:f4e,setColorMap:m4e,setTokensProvider:_4e,setMonarchTokensProvider:v4e,registerReferenceProvider:b4e,registerRenameProvider:C4e,registerCompletionItemProvider:R4e,registerSignatureHelpProvider:y4e,registerHoverProvider:w4e,registerDocumentSymbolProvider:S4e,registerDocumentHighlightProvider:L4e,registerLinkedEditingRangeProvider:E4e,registerDefinitionProvider:x4e,registerImplementationProvider:D4e,registerTypeDefinitionProvider:I4e,registerCodeLensProvider:T4e,registerCodeActionProvider:k4e,registerDocumentFormattingEditProvider:N4e,registerDocumentRangeFormattingEditProvider:A4e,registerOnTypeFormattingEditProvider:O4e,registerLinkProvider:M4e,registerColorProvider:P4e,registerFoldingRangeProvider:F4e,registerDeclarationProvider:B4e,registerSelectionRangeProvider:W4e,registerDocumentSemanticTokensProvider:V4e,registerDocumentRangeSemanticTokensProvider:H4e,registerInlineCompletionsProvider:z4e,registerInlayHintsProvider:U4e,DocumentHighlightKind:kW,CompletionItemKind:LW,CompletionItemTag:EW,CompletionItemInsertTextRule:SW,SymbolKind:XW,SymbolTag:QW,IndentAction:RW,CompletionTriggerKind:xW,SignatureHelpTriggerKind:ZW,InlayHintKind:PW,InlineCompletionTriggerKind:FW,FoldingRangeKind:Tm}}class Dx{static _handleEolEdits(e,t){let n,i=[];for(let s of t)typeof s.eol=="number"&&(n=s.eol),s.range&&typeof s.text=="string"&&i.push(s);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=Dx._handleEolEdits(e,t);i.length===1&&Dx._isFullModelReplaceEdit(e,i[0])?e.executeEdits("formatEditsCommand",i.map(s=>oo.replace(se.lift(s.range),s.text))):e.executeEdits("formatEditsCommand",i.map(s=>oo.replaceMove(se.lift(s.range),s.text))),n&&e.pushUndoStop()}}class l7{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var Om=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function Fj(r){if(r=r.filter(i=>i.range),!r.length)return;let{range:e}=r[0];for(let i=1;i<r.length;i++)e=se.plusRange(e,r[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?r.length===1?Il(L("hint11","Made 1 formatting edit on line {0}",t)):Il(L("hintn1","Made {0} formatting edits on line {1}",r.length,t)):r.length===1?Il(L("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):Il(L("hintnn","Made {0} formatting edits between lines {1} and {2}",r.length,t,n))}function $le(r){const e=[],t=new Set,n=ok.ordered(r);for(const s of n)e.push(s),s.extensionId&&t.add(l7.toKey(s.extensionId));const i=dm.ordered(r);for(const s of i){if(s.extensionId){if(t.has(l7.toKey(s.extensionId)))continue;t.add(l7.toKey(s.extensionId))}e.push({displayName:s.displayName,extensionId:s.extensionId,provideDocumentFormattingEdits(o,a,l){return s.provideDocumentRangeFormattingEdits(o,o.getFullModelRange(),a,l)}})}return e}class bS{static setFormatterSelector(e){return{dispose:bS._selectors.unshift(e)}}static select(e,t,n){return Om(this,void 0,void 0,function*(){if(e.length===0)return;const i=Xi.first(bS._selectors);if(i)return yield i(e,t,n)})}}bS._selectors=new Eh;function jle(r,e,t,n,i,s){return Om(this,void 0,void 0,function*(){const o=r.get(Li),a=Av(e)?e.getModel():e,l=dm.ordered(a),u=yield bS.select(l,a,n);u&&(i.report(u),yield o.invokeFunction(j4e,u,e,t,s))})}function j4e(r,e,t,n,i){return Om(this,void 0,void 0,function*(){const s=r.get(Oh);let o,a;Av(t)?(o=t.getModel(),a=new sN(t,5,void 0,i)):(o=t,a=new I$(t,i));let l=[],u=0;for(let C of NU(n).sort(se.compareRangesUsingStarts))u>0&&se.areIntersectingOrTouching(l[u-1],C)?l[u-1]=se.fromPositions(l[u-1].getStartPosition(),C.getEndPosition()):u=l.push(C);const d=C=>Om(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(o,C,o.getFormattingOptions(),a.token))||[]}),h=(C,S)=>{if(!C.length||!S.length)return!1;const E=C.reduce((k,D)=>se.plusRange(k,D.range),C[0].range);if(!S.some(k=>se.intersectRanges(E,k.range)))return!1;for(let k of C)for(let D of S)if(se.intersectRanges(k.range,D.range))return!0;return!1},p=[],v=[];try{for(let C of l){if(a.token.isCancellationRequested)return!0;v.push(yield d(C))}for(let C=0;C<l.length;++C)for(let S=C+1;S<l.length;++S){if(a.token.isCancellationRequested)return!0;if(h(v[C],v[S])){const E=se.plusRange(l[C],l[S]),k=yield d(E);l.splice(S,1),l.splice(C,1),l.push(E),v.splice(S,1),v.splice(C,1),v.push(k),C=0,S=0}}for(let C of v){if(a.token.isCancellationRequested)return!0;const S=yield s.computeMoreMinimalEdits(o.uri,C);S&&p.push(...S)}}finally{a.dispose()}if(p.length===0)return!1;if(Av(t))Dx.execute(t,p,!0),Fj(p),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:C}]=p,S=new un(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn);o.pushEditOperations([S],p.map(E=>({text:E.text,range:se.lift(E.range),forceMoveMarkers:!0})),E=>{for(const{range:k}of E)if(se.areIntersectingOrTouching(k,S))return[new un(k.startLineNumber,k.startColumn,k.endLineNumber,k.endColumn)];return null})}return!0})}function q4e(r,e,t,n,i){return Om(this,void 0,void 0,function*(){const s=r.get(Li),o=Av(e)?e.getModel():e,a=$le(o),l=yield bS.select(a,o,t);l&&(n.report(l),yield s.invokeFunction(K4e,l,e,t,i))})}function K4e(r,e,t,n,i){return Om(this,void 0,void 0,function*(){const s=r.get(Oh);let o,a;Av(t)?(o=t.getModel(),a=new sN(t,5,void 0,i)):(o=t,a=new I$(t,i));let l;try{const u=yield e.provideDocumentFormattingEdits(o,o.getFormattingOptions(),a.token);if(l=yield s.computeMoreMinimalEdits(o.uri,u),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(Av(t))Dx.execute(t,l,n!==2),n!==2&&(Fj(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:u}]=l,d=new un(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn);o.pushEditOperations([d],l.map(h=>({text:h.text,range:se.lift(h.range),forceMoveMarkers:!0})),h=>{for(const{range:p}of h)if(se.areIntersectingOrTouching(p,d))return[new un(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn)];return null})}return!0})}function G4e(r,e,t,n,i){return Om(this,void 0,void 0,function*(){const s=dm.ordered(e);for(const o of s){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(e,t,n,i)).catch(Ml);if(Rd(a))return yield r.computeMoreMinimalEdits(e.uri,a)}})}function Y4e(r,e,t,n){return Om(this,void 0,void 0,function*(){const i=$le(e);for(const s of i){let o=yield Promise.resolve(s.provideDocumentFormattingEdits(e,t,n)).catch(Ml);if(Rd(o))return yield r.computeMoreMinimalEdits(e.uri,o)}})}function qle(r,e,t,n,i){const s=lR.ordered(e);return s.length===0||s[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(s[0].provideOnTypeFormattingEdits(e,t,n,i,ki.None)).catch(Ml).then(o=>r.computeMoreMinimalEdits(e.uri,o))}Ki.registerCommand("_executeFormatRangeProvider",function(r,...e){return Om(this,void 0,void 0,function*(){const[t,n,i]=e;$r($n.isUri(t)),$r(se.isIRange(n));const s=r.get(zc),o=r.get(Oh),a=yield s.createModelReference(t);try{return G4e(o,a.object.textEditorModel,se.lift(n),i,ki.None)}finally{a.dispose()}})});Ki.registerCommand("_executeFormatDocumentProvider",function(r,...e){return Om(this,void 0,void 0,function*(){const[t,n]=e;$r($n.isUri(t));const i=r.get(zc),s=r.get(Oh),o=yield i.createModelReference(t);try{return Y4e(s,o.object.textEditorModel,n,ki.None)}finally{o.dispose()}})});Ki.registerCommand("_executeFormatOnTypeProvider",function(r,...e){return Om(this,void 0,void 0,function*(){const[t,n,i,s]=e;$r($n.isUri(t)),$r(ze.isIPosition(n)),$r(typeof i=="string");const o=r.get(zc),a=r.get(Oh),l=yield o.createModelReference(t);try{return qle(a,l.object.textEditorModel,ze.lift(n),i,s)}finally{l.dispose()}})});var u7;Pm.wrappingIndent.defaultValue=0;Pm.glyphMargin.defaultValue=!1;Pm.autoIndent.defaultValue=3;Pm.overviewRulerLanes.defaultValue=2;bS.setFormatterSelector((r,e,t)=>Promise.resolve(r[0]));const dc=joe();dc.editor=n4e();dc.languages=$4e();const Z4e=dc.CancellationTokenSource,Kle=dc.Emitter,Yn=dc.KeyCode,$c=dc.KeyMod,X4e=dc.Position,Q4e=dc.Range,J4e=dc.Selection,eFe=dc.SelectionDirection,tFe=dc.MarkerSeverity,nFe=dc.MarkerTag,vC=dc.Uri,iFe=dc.Token,ac=dc.editor,Lf=dc.languages;(!((u7=go.MonacoEnvironment)===null||u7===void 0)&&u7.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=dc);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const F2=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:Z4e,Emitter:Kle,KeyCode:Yn,KeyMod:$c,MarkerSeverity:tFe,MarkerTag:nFe,Position:X4e,Range:Q4e,Selection:J4e,SelectionDirection:eFe,Token:iFe,Uri:vC,editor:ac,languages:Lf},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Gle=Object.defineProperty,rFe=Object.getOwnPropertyDescriptor,sFe=Object.getOwnPropertyNames,oFe=Object.prototype.hasOwnProperty,aFe=r=>Gle(r,"__esModule",{value:!0}),lFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of sFe(e))!oFe.call(r,n)&&n!=="default"&&Gle(r,n,{get:()=>e[n],enumerable:!(t=rFe(e,n))||t.enumerable});return r},uFe="4.4.4",CS={};aFe(CS);lFe(CS,F2);var tH;(function(r){r[r.None=0]="None",r[r.CommonJS=1]="CommonJS",r[r.AMD=2]="AMD",r[r.UMD=3]="UMD",r[r.System=4]="System",r[r.ES2015=5]="ES2015",r[r.ESNext=99]="ESNext"})(tH||(tH={}));var nH;(function(r){r[r.None=0]="None",r[r.Preserve=1]="Preserve",r[r.React=2]="React",r[r.ReactNative=3]="ReactNative",r[r.ReactJSX=4]="ReactJSX",r[r.ReactJSXDev=5]="ReactJSXDev"})(nH||(nH={}));var iH;(function(r){r[r.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",r[r.LineFeed=1]="LineFeed"})(iH||(iH={}));var rH;(function(r){r[r.ES3=0]="ES3",r[r.ES5=1]="ES5",r[r.ES2015=2]="ES2015",r[r.ES2016=3]="ES2016",r[r.ES2017=4]="ES2017",r[r.ES2018=5]="ES2018",r[r.ES2019=6]="ES2019",r[r.ES2020=7]="ES2020",r[r.ESNext=99]="ESNext",r[r.JSON=100]="JSON",r[r.Latest=99]="Latest"})(rH||(rH={}));var sH;(function(r){r[r.Classic=1]="Classic",r[r.NodeJs=2]="NodeJs"})(sH||(sH={}));var Yle=class{constructor(e,t,n,i){this._onDidChange=new CS.Emitter,this._onDidExtraLibsChange=new CS.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(n),this.setInlayHintsOptions(i),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let n;if(typeof t>"u"?n=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:n=t,this._extraLibs[n]&&this._extraLibs[n].content===e)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[n]&&(i=this._removedExtraLibs[n]+1),this._extraLibs[n]&&(i=this._extraLibs[n].version+1),this._extraLibs[n]={content:e,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let s=this._extraLibs[n];s&&s.version===i&&(delete this._extraLibs[n],this._removedExtraLibs[n]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(const t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(const t of e){const n=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=t.content;let s=1;this._removedExtraLibs[n]&&(s=this._removedExtraLibs[n]+1),this._extraLibs[n]={content:i,version:s}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}},cFe=uFe,Zle=new Yle({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),Xle=new Yle({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),dFe=()=>fF().then(r=>r.getTypeScriptWorker()),hFe=()=>fF().then(r=>r.getJavaScriptWorker());CS.languages.typescript={ModuleKind:tH,JsxEmit:nH,NewLineKind:iH,ScriptTarget:rH,ModuleResolutionKind:sH,typescriptVersion:cFe,typescriptDefaults:Zle,javascriptDefaults:Xle,getTypeScriptWorker:dFe,getJavaScriptWorker:hFe};function fF(){return mn(()=>import("./tsMode-5f90d682.js"),[])}CS.languages.onLanguage("typescript",()=>fF().then(r=>r.setupTypeScript(Zle)));CS.languages.onLanguage("javascript",()=>fF().then(r=>r.setupJavaScript(Xle)));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Qle=Object.defineProperty,fFe=Object.getOwnPropertyDescriptor,gFe=Object.getOwnPropertyNames,pFe=Object.prototype.hasOwnProperty,mFe=r=>Qle(r,"__esModule",{value:!0}),_Fe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of gFe(e))!pFe.call(r,n)&&n!=="default"&&Qle(r,n,{get:()=>e[n],enumerable:!(t=fFe(e,n))||t.enumerable});return r},uL={};mFe(uL);_Fe(uL,F2);var Bj=class{constructor(e,t,n){this._onDidChange=new uL.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},Wj={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},Vj={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Jle=new Bj("css",Wj,Vj),eue=new Bj("scss",Wj,Vj),tue=new Bj("less",Wj,Vj);uL.languages.css={cssDefaults:Jle,lessDefaults:tue,scssDefaults:eue};function Hj(){return mn(()=>import("./cssMode-6a4f029e.js"),[])}uL.languages.onLanguage("less",()=>{Hj().then(r=>r.setupMode(tue))});uL.languages.onLanguage("scss",()=>{Hj().then(r=>r.setupMode(eue))});uL.languages.onLanguage("css",()=>{Hj().then(r=>r.setupMode(Jle))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var nue=Object.defineProperty,vFe=Object.getOwnPropertyDescriptor,bFe=Object.getOwnPropertyNames,CFe=Object.prototype.hasOwnProperty,yFe=r=>nue(r,"__esModule",{value:!0}),wFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of bFe(e))!CFe.call(r,n)&&n!=="default"&&nue(r,n,{get:()=>e[n],enumerable:!(t=vFe(e,n))||t.enumerable});return r},fD={};yFe(fD);wFe(fD,F2);var SFe=class{constructor(e,t,n){this._onDidChange=new fD.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},LFe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},EFe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},iue=new SFe("json",LFe,EFe);fD.languages.json={jsonDefaults:iue};function xFe(){return mn(()=>import("./jsonMode-80cdddfb.js"),[])}fD.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});fD.languages.onLanguage("json",()=>{xFe().then(r=>r.setupMode(iue))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var rue=Object.defineProperty,DFe=Object.getOwnPropertyDescriptor,IFe=Object.getOwnPropertyNames,TFe=Object.prototype.hasOwnProperty,kFe=r=>rue(r,"__esModule",{value:!0}),NFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of IFe(e))!TFe.call(r,n)&&n!=="default"&&rue(r,n,{get:()=>e[n],enumerable:!(t=DFe(e,n))||t.enumerable});return r},B2={};kFe(B2);NFe(B2,F2);var AFe=class{constructor(e,t,n){this._onDidChange=new B2.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},OFe={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},gF={format:OFe,suggest:{},data:{useDefaultDataProvider:!0}};function pF(r){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:r===Ck,documentFormattingEdits:r===Ck,documentRangeFormattingEdits:r===Ck}}var Ck="html",OJ="handlebars",MJ="razor",sue=mF(Ck,gF,pF(Ck)),MFe=sue.defaults,oue=mF(OJ,gF,pF(OJ)),RFe=oue.defaults,aue=mF(MJ,gF,pF(MJ)),PFe=aue.defaults;B2.languages.html={htmlDefaults:MFe,razorDefaults:PFe,handlebarDefaults:RFe,htmlLanguageService:sue,handlebarLanguageService:oue,razorLanguageService:aue,registerHTMLLanguageService:mF};function FFe(){return mn(()=>import("./htmlMode-942a6e4c.js"),[])}function mF(r,e=gF,t=pF(r)){const n=new AFe(r,e,t);let i;const s=B2.languages.onLanguage(r,async()=>{i=(await FFe()).setupMode(n)});return{defaults:n,dispose(){s.dispose(),i==null||i.dispose(),i=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var lue=Object.defineProperty,BFe=Object.getOwnPropertyDescriptor,WFe=Object.getOwnPropertyNames,VFe=Object.prototype.hasOwnProperty,HFe=r=>lue(r,"__esModule",{value:!0}),zFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of WFe(e))!VFe.call(r,n)&&n!=="default"&&lue(r,n,{get:()=>e[n],enumerable:!(t=BFe(e,n))||t.enumerable});return r},xE={};HFe(xE);zFe(xE,F2);var uue={},c7={},cue=class{static getOrCreate(e){return c7[e]||(c7[e]=new cue(e)),c7[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,uue[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function Nn(r){const e=r.id;uue[e]=r,xE.languages.register(r);const t=cue.getOrCreate(e);xE.languages.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),xE.languages.onLanguage(e,()=>{t.load().then(n=>{xE.languages.setLanguageConfiguration(e,n.conf)})})}Nn({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>mn(()=>import("./abap-c25c4b29.js"),[])});Nn({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>mn(()=>import("./apex-90b58cb1.js"),[])});Nn({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>mn(()=>import("./azcli-c8384527.js"),[])});Nn({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>mn(()=>import("./bat-dd03db3a.js"),[])});Nn({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>mn(()=>import("./bicep-b5110554.js"),[])});Nn({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>mn(()=>import("./cameligo-3323522b.js"),[])});Nn({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>mn(()=>import("./clojure-d45fb7b6.js"),[])});Nn({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>mn(()=>import("./coffee-912c6d0d.js"),[])});Nn({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>mn(()=>import("./cpp-30cc099a.js"),[])});Nn({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>mn(()=>import("./cpp-30cc099a.js"),[])});Nn({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>mn(()=>import("./csharp-0553c8db.js"),[])});Nn({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>mn(()=>import("./csp-dbe8a1fa.js"),[])});Nn({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>mn(()=>import("./css-64c40e4a.js"),[])});Nn({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>mn(()=>import("./dart-4b7e6961.js"),[])});Nn({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>mn(()=>import("./dockerfile-1b41f08d.js"),[])});Nn({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>mn(()=>import("./ecl-eaf29bcc.js"),[])});Nn({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>mn(()=>import("./elixir-4f68332f.js"),[])});Nn({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>mn(()=>import("./flow9-6536bbb8.js"),[])});Nn({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>mn(()=>import("./fsharp-d4a13be8.js"),[])});Nn({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>mn(()=>import("./go-514c6bed.js"),[])});Nn({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>mn(()=>import("./graphql-dcd71327.js"),[])});Nn({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>mn(()=>import("./handlebars-4f86eed0.js"),[])});Nn({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>mn(()=>import("./hcl-69c09a16.js"),[])});Nn({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>mn(()=>import("./html-9453612d.js"),[])});Nn({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>mn(()=>import("./ini-ddcf22bb.js"),[])});Nn({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>mn(()=>import("./java-7b3bef9f.js"),[])});Nn({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>mn(()=>import("./javascript-b849c98e.js"),["assets/javascript-b849c98e.js","assets/typescript-2220d962.js"])});Nn({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>mn(()=>import("./julia-d49177e7.js"),[])});Nn({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>mn(()=>import("./kotlin-12177a5b.js"),[])});Nn({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>mn(()=>import("./less-dd974dd5.js"),[])});Nn({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>mn(()=>import("./lexon-7236519e.js"),[])});Nn({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>mn(()=>import("./lua-de05fd08.js"),[])});Nn({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>mn(()=>import("./liquid-c6591636.js"),[])});Nn({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>mn(()=>import("./m3-ceb8ffc4.js"),[])});Nn({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>mn(()=>import("./markdown-6a6346da.js"),[])});Nn({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>mn(()=>import("./mips-6fb0802a.js"),[])});Nn({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>mn(()=>import("./msdax-bf1578ea.js"),[])});Nn({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>mn(()=>import("./mysql-4cfd205e.js"),[])});Nn({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>mn(()=>import("./objective-c-fadd4d71.js"),[])});Nn({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>mn(()=>import("./pascal-4479a90f.js"),[])});Nn({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>mn(()=>import("./pascaligo-7d1a5852.js"),[])});Nn({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>mn(()=>import("./perl-4a4b182f.js"),[])});Nn({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>mn(()=>import("./pgsql-e04cad37.js"),[])});Nn({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>mn(()=>import("./php-f332f715.js"),[])});Nn({id:"pla",extensions:[".pla"],loader:()=>mn(()=>import("./pla-649d56b2.js"),[])});Nn({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>mn(()=>import("./postiats-52f8c4e6.js"),[])});Nn({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>mn(()=>import("./powerquery-ee00e87c.js"),[])});Nn({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>mn(()=>import("./powershell-d33e9d1b.js"),[])});Nn({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>mn(()=>import("./protobuf-16b10ef3.js"),[])});Nn({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>mn(()=>import("./pug-768921d2.js"),[])});Nn({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>mn(()=>import("./python-d47e2731.js"),[])});Nn({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>mn(()=>import("./qsharp-c7533acc.js"),[])});Nn({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>mn(()=>import("./r-d1be5f1d.js"),[])});Nn({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>mn(()=>import("./razor-fb533db6.js"),[])});Nn({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>mn(()=>import("./redis-bd6165ff.js"),[])});Nn({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>mn(()=>import("./redshift-c705624d.js"),[])});Nn({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>mn(()=>import("./restructuredtext-947094fa.js"),[])});Nn({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>mn(()=>import("./ruby-1816fcd8.js"),[])});Nn({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>mn(()=>import("./rust-c4db2e19.js"),[])});Nn({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>mn(()=>import("./sb-adba4cc1.js"),[])});Nn({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>mn(()=>import("./scala-af9b4756.js"),[])});Nn({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>mn(()=>import("./scheme-812b9ffd.js"),[])});Nn({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>mn(()=>import("./scss-b21c6880.js"),[])});Nn({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>mn(()=>import("./shell-a62a83b7.js"),[])});Nn({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>mn(()=>import("./solidity-9a528bff.js"),[])});Nn({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>mn(()=>import("./sophia-dc39a193.js"),[])});Nn({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>mn(()=>import("./sparql-658eb489.js"),[])});Nn({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>mn(()=>import("./sql-233b53ac.js"),[])});Nn({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>mn(()=>import("./st-27efd63b.js"),[])});Nn({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>mn(()=>import("./swift-a2a125fe.js"),[])});Nn({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>mn(()=>import("./systemverilog-8bcc1c37.js"),[])});Nn({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>mn(()=>import("./systemverilog-8bcc1c37.js"),[])});Nn({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>mn(()=>import("./tcl-5c798828.js"),[])});Nn({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>mn(()=>import("./twig-5245532a.js"),[])});Nn({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>mn(()=>import("./typescript-2220d962.js"),[])});Nn({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>mn(()=>import("./vb-818b3fb1.js"),[])});Nn({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>mn(()=>import("./xml-5d9fdbd3.js"),[])});Nn({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>mn(()=>import("./yaml-eee3d8e3.js"),[])});var UFe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$Fe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},_F=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const vF=new gn("selectionAnchorSet",!1);let Vb=class due{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=vF.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(due.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],n=this.editor.deltaDecorations(t,[{range:un.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:new Wb().appendText(L("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=n[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),Il(L("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(un.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Vb.ID="editor.contrib.selectionAnchorController";Vb=UFe([$Fe(1,Xn)],Vb);class jFe extends hn{constructor(){super({id:"editor.action.setSelectionAnchor",label:L("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2080),weight:100}})}run(e,t){return _F(this,void 0,void 0,function*(){Vb.get(t).setSelectionAnchor()})}}class qFe extends hn{constructor(){super({id:"editor.action.goToSelectionAnchor",label:L("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:vF})}run(e,t){return _F(this,void 0,void 0,function*(){Vb.get(t).goToSelectionAnchor()})}}class KFe extends hn{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:L("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:vF,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2089),weight:100}})}run(e,t){return _F(this,void 0,void 0,function*(){Vb.get(t).selectFromAnchorToCursor()})}}class GFe extends hn{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:L("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:vF,kbOpts:{kbExpr:ye.editorTextFocus,primary:9,weight:100}})}run(e,t){return _F(this,void 0,void 0,function*(){Vb.get(t).cancelSelectionAnchor()})}}br(Vb.ID,Vb);It(jFe);It(qFe);It(KFe);It(GFe);const YFe=Oe("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},L("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class ZFe extends hn{constructor(){super({id:"editor.action.jumpToBracket",label:L("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=Dm.get(t);n&&n.jumpToBracket()}}class XFe extends hn{constructor(){super({id:"editor.action.selectToBracket",label:L("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const i=Dm.get(t);if(!i)return;let s=!0;n&&n.selectBrackets===!1&&(s=!1),i.selectToBracket(s)}}class QFe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class Dm extends Je{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new Qr(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(Dm.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),s=e.bracketPairs.matchBracket(i);let o=null;if(s)s[0].containsPosition(i)?o=s[1].getStartPosition():s[1].containsPosition(i)&&(o=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)o=a[0].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(o=l.range.getStartPosition())}}return o?new un(o.lineNumber,o.column,o.lineNumber,o.column):new un(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const s=i.getStartPosition();let o=t.bracketPairs.matchBracket(s);if(!o&&(o=t.bracketPairs.findEnclosingBrackets(s),!o)){const u=t.bracketPairs.findNextBracket(s);u&&u.range&&(o=t.bracketPairs.matchBracket(u.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(se.compareRangesUsingStarts);const[u,d]=o;if(a=e?u.getStartPosition():u.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(s)){const h=a;a=l,l=h}}a&&l&&n.push(new un(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);let s=[],o=0;for(let h=0,p=e.length;h<p;h++){let v=e[h];v.isEmpty()&&(s[o++]=v.getStartPosition())}s.length>1&&s.sort(ze.compare);let a=[],l=0,u=0,d=i.length;for(let h=0,p=s.length;h<p;h++){let v=s[h];for(;u<d&&i[u].position.isBefore(v);)u++;if(u<d&&i[u].position.equals(v))a[l++]=i[u];else{let C=t.bracketPairs.matchBracket(v),S=Dm._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!C&&this._matchBrackets==="always"&&(C=t.bracketPairs.findEnclosingBrackets(v,20),S=Dm._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new QFe(v,C,S)}}this._lastBracketsData=a,this._lastVersionId=n}}Dm.ID="editor.contrib.bracketMatchingController";Dm._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=mi.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Ps(YFe),position:Wd.Center}});Dm._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=mi.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});br(Dm.ID,Dm);It(XFe);It(ZFe);ds((r,e)=>{const t=r.getColor(xLe);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=r.getColor(Zse);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});Pu.appendMenuItem(vn.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:L({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class JFe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(n)))if(this._isMovingLeft){const o=new se(n,i-1,n,i),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new se(n,s,n,s),a)}else{const o=new se(n,s,n,s+1),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new se(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new un(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new un(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class hue extends hn{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let n=[],i=t.getSelections();for(const s of i)n.push(new JFe(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class e3e extends hue{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:L("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:ye.writable})}}class t3e extends hue{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:L("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:ye.writable})}}It(e3e);It(t3e);class n3e extends hn{constructor(){super({id:"editor.action.transposeLetters",label:L("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),i=[],s=t.getSelections();for(let o of s){if(!o.isEmpty())continue;let a=o.startLineNumber,l=o.startColumn,u=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&u===2))continue;let d=l===u?o.getPosition():ur.rightPosition(n,o.getPosition().lineNumber,o.getPosition().column),h=ur.leftPosition(n,d),p=ur.leftPosition(n,h),v=n.getValueInRange(se.fromPositions(p,h)),C=n.getValueInRange(se.fromPositions(h,d)),S=se.fromPositions(p,d);i.push(new xl(S,C+v))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}It(n3e);var i3e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const yS="9_cutcopypaste",r3e=wm||document.queryCommandSupported("cut"),fue=wm||document.queryCommandSupported("copy"),s3e=typeof navigator.clipboard>"u"||Bd?document.queryCommandSupported("paste"):!0;function zj(r){return r.register(),r}const o3e=r3e?zj(new tD({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:wm?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:vn.MenubarEditMenu,group:"2_ccp",title:L({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:vn.EditorContext,group:yS,title:L("actions.clipboard.cutLabel","Cut"),when:ye.writable,order:1},{menuId:vn.CommandPalette,group:"",title:L("actions.clipboard.cutLabel","Cut"),order:1},{menuId:vn.SimpleEditorContext,group:yS,title:L("actions.clipboard.cutLabel","Cut"),when:ye.writable,order:1}]})):void 0,a3e=fue?zj(new tD({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:wm?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:vn.MenubarEditMenu,group:"2_ccp",title:L({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:vn.EditorContext,group:yS,title:L("actions.clipboard.copyLabel","Copy"),order:2},{menuId:vn.CommandPalette,group:"",title:L("actions.clipboard.copyLabel","Copy"),order:1},{menuId:vn.SimpleEditorContext,group:yS,title:L("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Pu.appendMenuItem(vn.MenubarEditMenu,{submenu:vn.MenubarCopy,title:{value:L("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Pu.appendMenuItem(vn.EditorContext,{submenu:vn.EditorContextCopy,title:{value:L("copy as","Copy As"),original:"Copy As"},group:yS,order:3});const d7=s3e?zj(new tD({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:wm?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:vn.MenubarEditMenu,group:"2_ccp",title:L({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:vn.EditorContext,group:yS,title:L("actions.clipboard.pasteLabel","Paste"),when:ye.writable,order:4},{menuId:vn.CommandPalette,group:"",title:L("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:vn.SimpleEditorContext,group:yS,title:L("actions.clipboard.pasteLabel","Paste"),when:ye.writable,order:4}]})):void 0;class l3e extends hn{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:L("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:ye.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(32)&&t.getSelection().isEmpty()||(J6.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),J6.forceCopyWithSyntaxHighlighting=!1)}}function gue(r,e){r&&(r.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(vr).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const s=i.getOption(32),o=i.getSelection();return o&&o.isEmpty()&&!s||document.execCommand(e),!0}return!1}),r.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}gue(o3e,"cut");gue(a3e,"copy");d7&&(d7.addImplementation(1e4,"code-editor",(r,e)=>{const t=r.get(vr),n=r.get(YC),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?!document.execCommand("paste")&&eD?(()=>i3e(void 0,void 0,void 0,function*(){const o=yield n.readText();if(o!==""){const a=Kk.INSTANCE.get(o);let l=!1,u=null,d=null;a&&(l=i.getOption(32)&&!!a.isFromEmptySelection,u=typeof a.multicursorText<"u"?a.multicursorText:null,d=a.mode),i.trigger("keyboard","paste",{text:o,pasteOnNewLine:l,multicursorText:u,mode:d})}}))():!0:!1}),d7.addImplementation(0,"generic-dom",(r,e)=>(document.execCommand("paste"),!0)));fue&&It(l3e);class sP{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}class Fi{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Fi.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new Fi(this.value+Fi.sep+e)}}Fi.sep=".";Fi.None=new Fi("@@none@@");Fi.Empty=new Fi("");Fi.QuickFix=new Fi("quickfix");Fi.Refactor=new Fi("refactor");Fi.Source=new Fi("source");Fi.SourceOrganizeImports=Fi.Source.append("organizeImports");Fi.SourceFixAll=Fi.Source.append("fixAll");function u3e(r,e){return!(r.include&&!r.include.intersects(e)||r.excludes&&r.excludes.some(t=>pue(e,t,r.include))||!r.includeSourceActions&&Fi.Source.contains(e))}function c3e(r,e){const t=e.kind?new Fi(e.kind):void 0;return!(r.include&&(!t||!r.include.contains(t))||r.excludes&&t&&r.excludes.some(n=>pue(t,n,r.include))||!r.includeSourceActions&&t&&Fi.Source.contains(t)||r.onlyIncludePreferredActions&&!e.isPreferred)}function pue(r,e,t){return!(!e.contains(r)||t&&e.contains(t))}class uv{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new uv(t.kind,t.apply,!1):new uv(uv.getKindFromUser(e,t.kind),uv.getApplyFromUser(e,t.apply),uv.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Fi(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var Uj=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const mue="editor.action.codeAction",_ue="editor.action.refactor",vue="editor.action.sourceAction",$j="editor.action.organizeImports",jj="editor.action.fixAll";class bue{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return Uj(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(i){Ml(i)}n&&(this.action.edit=n.edit)}return this})}}class qj extends Je{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(qj.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:Rd(e.diagnostics)?Rd(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Rd(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Fi.QuickFix.contains(new Fi(e.kind))&&!!e.isPreferred)}}const RJ={actions:[],documentation:void 0};function Kj(r,e,t,n,i){var s;const o=t.filter||{},a={only:(s=o.include)===null||s===void 0?void 0:s.value,trigger:t.type},l=new I$(r,i),u=d3e(r,o),d=new Et,h=u.map(v=>Uj(this,void 0,void 0,function*(){try{n.report(v);const C=yield v.provideCodeActions(r,e,a,l.token);if(C&&d.add(C),l.token.isCancellationRequested)return RJ;const S=((C==null?void 0:C.actions)||[]).filter(k=>k&&c3e(o,k)),E=h3e(v,S,o.include);return{actions:S.map(k=>new bue(k,v)),documentation:E}}catch(C){if(zv(C))throw C;return Ml(C),RJ}})),p=Sv.onDidChange(()=>{const v=Sv.all(r);xf(v,u)||l.cancel()});return Promise.all(h).then(v=>{const C=Are(v.map(E=>E.actions)),S=nD(v.map(E=>E.documentation));return new qj(C,S,d)}).finally(()=>{p.dispose(),l.dispose()})}function d3e(r,e){return Sv.all(r).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>u3e(e,new Fi(n))):!0)}function h3e(r,e,t){if(!r.documentation)return;const n=r.documentation.map(i=>({kind:new Fi(i.kind),command:i.command}));if(t){let i;for(const s of n)s.kind.contains(t)&&(i?i.kind.contains(s.kind)&&(i=s):i=s);if(i)return i==null?void 0:i.command}for(const i of e)if(i.kind){for(const s of n)if(s.kind.contains(new Fi(i.kind)))return s.command}}Ki.registerCommand("_executeCodeActionProvider",function(r,e,t,n,i){return Uj(this,void 0,void 0,function*(){if(!(e instanceof $n))throw ym();const s=r.get(aa).getModel(e);if(!s)throw ym();const o=un.isISelection(t)?un.liftSelection(t):se.isIRange(t)?s.validateRange(t):void 0;if(!o)throw ym();const a=typeof n=="string"?new Fi(n):void 0,l=yield Kj(s,o,{type:1,filter:{includeSourceActions:!0,include:a}},nL.None,ki.None),u=[],d=Math.min(l.validActions.length,typeof i=="number"?i:0);for(let h=0;h<d;h++)u.push(l.validActions[h].resolve(ki.None));try{return yield Promise.all(u),l.validActions.map(h=>h.action)}finally{setTimeout(()=>l.dispose(),100)}})});var f3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},g3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let kh=class oH{constructor(e,t){this._messageWidget=new uc,this._messageListeners=new Et,this._editor=e,this._visible=oH.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(oH.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Il(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new PJ(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new cc(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{i.target.position&&(n?n.containsPosition(i.target.position)||this.closeMessage():n=new se(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(PJ.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(L("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};kh.ID="editor.contrib.messageController";kh.MESSAGE_VISIBLE=new gn("messageVisible",!1,L("messageVisible","Whether the editor is currently showing an inline message"));kh=f3e([g3e(1,Xn)],kh);const p3e=Rl.bindToContribution(kh.get);Dt(new p3e({id:"leaveEditorMessage",precondition:kh.MESSAGE_VISIBLE,handler:r=>r.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let PJ=class{constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const o=document.createElement("div");o.classList.add("message"),o.textContent=i,this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};br(kh.ID,kh);var m3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},FJ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},_3e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class BJ extends Ef{constructor(e,t){super(e.command?e.command.id:e.title,v3e(e.title),void 0,!e.disabled,t),this.action=e}}function v3e(r){return r.replace(/\r\n|\r|\n/g," ")}let aH=class extends Je{constructor(e,t,n,i){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new uc),this._keybindingResolver=new bF({getKeybindings:()=>i.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,i){return _3e(this,void 0,void 0,function*(){const s=i.includeDisabledActions?t.allActions:t.validActions;if(!s.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,KS();this._visible=!0,this._showingActions.value=t;const o=this.getMenuActions(e,s,t.documentation),a=ze.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},l=this._keybindingResolver.getResolver(),u=this._editor.getOption(114);this._contextMenuService.showContextMenu({domForShadowRoot:u?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>o,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:d=>d instanceof BJ?l(d.action):void 0})})}getMenuActions(e,t,n){var i,s;const o=d=>new BJ(d.action,()=>this._delegate.onSelectCodeAction(d)),a=t.map(o),l=[...n],u=this._editor.getModel();if(u&&a.length)for(const d of Sv.all(u))d._getAdditionalMenuItems&&l.push(...d._getAdditionalMenuItems({trigger:e.type,only:(s=(i=e.filter)===null||i===void 0?void 0:i.include)===null||s===void 0?void 0:s.value},t.map(h=>h.action)));return l.length&&a.push(new Yg,...l.map(d=>o(new bue({title:d.title,command:d},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=su(this._editor.getDomNode()),i=n.left+t.left,s=n.top+t.top+t.height;return{x:i,y:s}}};aH=m3e([FJ(2,GC),FJ(3,ks)],aH);class bF{constructor(e){this._keybindingProvider=e}getResolver(){const e=new sP(()=>this._keybindingProvider.getKeybindings().filter(t=>bF.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===$j?n={kind:Fi.SourceOrganizeImports.value}:t.command===jj&&(n={kind:Fi.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},uv.fromUser(n,{kind:Fi.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new Fi(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,s)=>i?i.kind.contains(s.kind)?s:i:s,void 0)}}bF.codeActionCommands=[_ue,mue,vue,$j,jj];var b3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},C3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},yk;(function(r){r.Hidden={type:0};class e{constructor(n,i,s,o){this.actions=n,this.trigger=i,this.editorPosition=s,this.widgetPosition=o,this.type=1}}r.Showing=e})(yk||(yk={}));let oP=class Cue extends Je{constructor(e,t,n,i){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=i,this._onClick=this._register(new Ae),this.onClick=this._onClick.event,this._state=yk.Hidden,this._domNode=document.createElement("div"),this._domNode.className=Ie.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(s=>{const o=this._editor.getModel();(this.state.type!==1||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()})),Rr.ignoreTarget(this._domNode),this._register(E0e(this._domNode,s=>{if(this.state.type!==1)return;this._editor.focus(),s.preventDefault();const{top:o,height:a}=su(this._domNode),l=this._editor.getOption(58);let u=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(u+=l),this._onClick.fire({x:s.posx,y:o+a+u,actions:this.state.actions,trigger:this.state.trigger})})),this._register(St(this._domNode,"mouseenter",s=>{if((s.buttons&1)!==1)return;this.hide();const o=new JS;o.startMonitoring(s.target,s.buttons,rD,()=>{},()=>{o.dispose()})})),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const i=this._editor.getOptions();if(!i.get(56).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:o,column:a}=s.validatePosition(n),l=s.getOptions().tabSize,u=i.get(43),d=s.getLineContent(o),h=Vd.computeIndentLevel(d,l),p=u.spaceWidth*h>22,v=S=>S>2&&this._editor.getTopForLineNumber(S)===this._editor.getTopForLineNumber(S-1);let C=o;if(!p){if(o>1&&!v(o-1))C-=1;else if(!v(o+1))C+=1;else if(a*u.spaceWidth<22)return this.hide()}this.state=new yk.Showing(e,t,n,{position:{lineNumber:C,column:1},preference:Cue._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=yk.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...Ie.lightBulb.classNamesArray),this._domNode.classList.add(...Ie.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=L("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...Ie.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...Ie.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=L("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=L("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};oP._posPref=[0];oP=b3e([C3e(3,ks)],oP);ds((r,e)=>{var t;const n=(t=r.getColor(Df))===null||t===void 0?void 0:t.transparent(.7),i=r.getColor(ICe);i&&e.addRule(`
		.monaco-editor .contentWidgets ${Ie.lightBulb.cssSelector} {
			color: ${i};
			background-color: ${n};
		}`);const s=r.getColor(TCe);s&&e.addRule(`
		.monaco-editor .contentWidgets ${Ie.lightbulbAutofix.cssSelector} {
			color: ${s};
			background-color: ${n};
		}`)});var y3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},w3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},h7=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},S3e=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},L3e=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},nM;let lH=class extends Je{constructor(e,t,n,i,s){super(),this._editor=e,this.delegate=i,this._activeCodeActions=this._register(new uc),nM.set(this,!1),this._codeActionWidget=new sP(()=>this._register(s.createInstance(aH,this._editor,{onSelectCodeAction:o=>h7(this,void 0,void 0,function*(){this.delegate.applyCodeAction(o,!0)})}))),this._lightBulbWidget=new sP(()=>{const o=this._register(s.createInstance(oP,this._editor,t,n));return this._register(o.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),o})}dispose(){S3e(this,nM,!0,"f"),super.dispose()}update(e){var t,n,i;return h7(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let s;try{s=yield e.actions}catch(o){Jn(o);return}if(!L3e(this,nM,"f"))if(this._lightBulbWidget.getValue().update(s,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,s);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{s.dispose()}return}if(e.trigger.context){const l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,s);if(l&&l.action.disabled){kh.get(this._editor).showMessage(l.action.disabled,e.trigger.context.position),s.dispose();return}}}const o=!!(!((i=e.trigger.filter)===null||i===void 0)&&i.include);if(e.trigger.context&&(!s.allActions.length||!o&&!s.validActions.length)){kh.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=s,s.dispose();return}this._activeCodeActions.value=s,this._codeActionWidget.getValue().show(e.trigger,s,e.position,{includeDisabledActions:o})}else this._codeActionWidget.getValue().isVisible?s.dispose():this._activeCodeActions.value=s})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,i){return h7(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,i)})}};nM=new WeakMap;lH=y3e([w3e(4,Li)],lH);var f7=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},E3e=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},dE;const yue=new gn("supportedCodeAction","");class x3e extends Je{constructor(e,t,n,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new cc),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>wse(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const i=t.validateRange(n);if(se.intersectRanges(i,e))return se.lift(i)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:i,column:s}=n.getPosition(),o=t.getLineContent(i);if(o.length===0)return;if(s===1){if(/\s/.test(o[0]))return}else if(s===t.getLineMaxColumn(i)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[s-2])&&/\s/.test(o[s-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const i=this._getRangeOfMarker(t),s=i?i.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:s};return this._signalChange(o),o}}var pw;(function(r){r.Empty={type:0};class e{constructor(n,i,s,o){this.trigger=n,this.rangeOrSelection=i,this.position=s,this._cancellablePromise=o,this.type=1,this.actions=o.catch(a=>{if(zv(a))return D3e;throw a})}cancel(){this._cancellablePromise.cancel()}}r.Triggered=e})(pw||(pw={}));const D3e={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class I3e extends Je{constructor(e,t,n,i){super(),this._editor=e,this._markerService=t,this._progressService=i,this._codeActionOracle=this._register(new uc),this._state=pw.Empty,this._onDidChangeState=this._register(new Ae),this.onDidChangeState=this._onDidChangeState.event,dE.set(this,!1),this._supportedCodeActions=yue.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(Sv.onDidChange(()=>this._update())),this._update()}dispose(){f7(this,dE,"f")||(E3e(this,dE,!0,"f"),super.dispose(),this.setState(pw.Empty,!0))}_update(){if(f7(this,dE,"f"))return;this._codeActionOracle.value=void 0,this.setState(pw.Empty);const e=this._editor.getModel();if(e&&Sv.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of Sv.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new x3e(this._editor,this._markerService,n=>{var i;if(!n){this.setState(pw.Empty);return}const s=dl(o=>Kj(e,n.selection,n.trigger,nL.None,o));n.trigger.type===1&&((i=this._progressService)===null||i===void 0||i.showWhile(s,250)),this.setState(new pw.Triggered(n.trigger,n.selection,n.position,s))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!f7(this,dE,"f")&&this._onDidChangeState.fire(e))}}dE=new WeakMap;var T3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},wue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function W2(r){return qt.regex(yue.keys()[0],new RegExp("(\\s|^)"+Af(r.value)+"\\b"))}const Gj={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:L("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:L("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[L("args.schema.apply.first","Always apply the first returned code action."),L("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),L("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:L("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let wS=class Sue extends Je{constructor(e,t,n,i,s){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new I3e(this._editor,t,n,i)),this._register(this._model.onDidChangeState(o=>this.update(o))),this._ui=new sP(()=>this._register(new lH(e,gD.Id,V2.Id,{applyCodeAction:(o,a)=>wue(this,void 0,void 0,function*(){try{yield this._applyCodeAction(o)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(Sue.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;kh.get(this._editor).closeMessage();const i=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:i}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(k3e,e,this._editor)}};wS.ID="editor.contrib.quickFixController";wS=T3e([iO(1,N2),iO(2,Xn),iO(3,jb),iO(4,Li)],wS);function k3e(r,e,t){return wue(this,void 0,void 0,function*(){const n=r.get(T$),i=r.get(js),s=r.get(Uv),o=r.get(Oo);if(s.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(ki.None),e.action.edit&&(yield n.apply(k4.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield i.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const l=N3e(a);o.error(typeof l=="string"?l:L("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function N3e(r){return typeof r=="string"?r:r instanceof Error&&typeof r.message=="string"?r.message:void 0}function cL(r,e,t,n){if(r.hasModel()){const i=wS.get(r);i&&i.manualTriggerAtCurrentPosition(e,t,n)}}class gD extends hn{constructor(){super({id:gD.Id,label:L("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:qt.and(ye.writable,ye.hasCodeActionsProvider),kbOpts:{kbExpr:ye.editorTextFocus,primary:2132,weight:100}})}run(e,t){return cL(t,L("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}gD.Id="editor.action.quickFix";class A3e extends Rl{constructor(){super({id:mue,precondition:qt.and(ye.writable,ye.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:Gj}]}})}runEditorCommand(e,t,n){const i=uv.fromUser(n,{kind:Fi.Empty,apply:"ifSingle"});return cL(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?L("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):L("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?L("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):L("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class O3e extends hn{constructor(){super({id:_ue,label:L("refactor.label","Refactor..."),alias:"Refactor...",precondition:qt.and(ye.writable,ye.hasCodeActionsProvider),kbOpts:{kbExpr:ye.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:qt.and(ye.writable,W2(Fi.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:Gj}]}})}run(e,t,n){const i=uv.fromUser(n,{kind:Fi.Refactor,apply:"never"});return cL(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?L("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):L("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?L("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):L("editor.action.refactor.noneMessage","No refactorings available"),{include:Fi.Refactor.contains(i.kind)?i.kind:Fi.None,onlyIncludePreferredActions:i.preferred},i.apply)}}class M3e extends hn{constructor(){super({id:vue,label:L("source.label","Source Action..."),alias:"Source Action...",precondition:qt.and(ye.writable,ye.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:qt.and(ye.writable,W2(Fi.Source))},description:{description:"Source Action...",args:[{name:"args",schema:Gj}]}})}run(e,t,n){const i=uv.fromUser(n,{kind:Fi.Source,apply:"never"});return cL(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?L("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):L("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?L("editor.action.source.noneMessage.preferred","No preferred source actions available"):L("editor.action.source.noneMessage","No source actions available"),{include:Fi.Source.contains(i.kind)?i.kind:Fi.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class R3e extends hn{constructor(){super({id:$j,label:L("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:qt.and(ye.writable,W2(Fi.SourceOrganizeImports)),kbOpts:{kbExpr:ye.editorTextFocus,primary:1581,weight:100}})}run(e,t){return cL(t,L("editor.action.organize.noneMessage","No organize imports action available"),{include:Fi.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class P3e extends hn{constructor(){super({id:jj,label:L("fixAll.label","Fix All"),alias:"Fix All",precondition:qt.and(ye.writable,W2(Fi.SourceFixAll))})}run(e,t){return cL(t,L("fixAll.noneMessage","No fix all action available"),{include:Fi.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class V2 extends hn{constructor(){super({id:V2.Id,label:L("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:qt.and(ye.writable,W2(Fi.QuickFix)),kbOpts:{kbExpr:ye.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return cL(t,L("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Fi.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}V2.Id="editor.action.autoFix";br(wS.ID,wS);It(gD);It(O3e);It(M3e);It(R3e);It(V2);It(P3e);Dt(new A3e);var WJ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class uH{constructor(){this.lenses=[],this._disposables=new Et}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}function Lue(r,e){return WJ(this,void 0,void 0,function*(){const t=pb.ordered(r),n=new Map,i=new uH,s=t.map((o,a)=>WJ(this,void 0,void 0,function*(){n.set(o,a);try{const l=yield Promise.resolve(o.provideCodeLenses(r,e));l&&i.add(l,o)}catch(l){Ml(l)}}));return yield Promise.all(s),i.lenses=i.lenses.sort((o,a)=>o.symbol.range.startLineNumber<a.symbol.range.startLineNumber?-1:o.symbol.range.startLineNumber>a.symbol.range.startLineNumber?1:n.get(o.provider)<n.get(a.provider)?-1:n.get(o.provider)>n.get(a.provider)?1:o.symbol.range.startColumn<a.symbol.range.startColumn?-1:o.symbol.range.startColumn>a.symbol.range.startColumn?1:0),i})}Ki.registerCommand("_executeCodeLensProvider",function(r,...e){let[t,n]=e;$r($n.isUri(t)),$r(typeof n=="number"||!n);const i=r.get(aa).getModel(t);if(!i)throw ym();const s=[],o=new Et;return Lue(i,ki.None).then(a=>{o.add(a);let l=[];for(const u of a.lenses)n==null||u.symbol.command?s.push(u.symbol):n-- >0&&u.provider.resolveCodeLens&&l.push(Promise.resolve(u.provider.resolveCodeLens(i,u.symbol,ki.None)).then(d=>s.push(d||u.symbol)));return Promise.all(l)}).then(()=>s).finally(()=>{setTimeout(()=>o.dispose(),100)})});var F3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},B3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Eue=lr("ICodeLensCache");class VJ{constructor(e,t){this.lineCount=e,this.data=t}}let cH=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new qC(20,.75);const t="codelens/cache";Tk(()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i),Rb(e.onWillSaveState)(s=>{s.reason===ZR.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(o=>{var a;return{range:o.symbol.range,command:o.symbol.command&&{id:"",title:(a=o.symbol.command)===null||a===void 0?void 0:a.title}}}),i=new uH;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const s=new VJ(e.getLineCount(),i);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const s of n.data.lenses)i.add(s.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],s=[];for(const a of i.lines)s.push({range:new se(a,1,a,11)});const o=new uH;o.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(n,new VJ(i.lineCount,o))}}catch{}}};cH=F3e([B3e(0,Yv)],cH);KC(Eue,cH);class W3e{constructor(e,t,n){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class CF{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${CF._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let n=[],i=!1;for(let s=0;s<e.length;s++){const o=e[s];if(o&&(i=!0,o.command)){const a=Uw(o.command.title.trim());o.command.id?(n.push(Ct("a",{id:String(s),title:o.command.tooltip},...a)),this._commands.set(String(s),o.command)):n.push(Ct("span",{title:o.command.tooltip},...a)),s+1<e.length&&n.push(Ct("span",void 0,"|"))}}i?(EC(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):EC(this._domNode,Ct("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}CF._idPool=0;class g7{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}class HJ{constructor(e,t,n,i,s,o,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let l,u=[];this._data.forEach((d,h)=>{d.symbol.command&&u.push(d.symbol),i.addDecoration({range:d.symbol.range,options:mi.EMPTY},p=>this._decorationIds[h]=p),l?l=se.plusRange(l,d.symbol.range):l=se.lift(d.symbol.range)}),this._viewZone=new W3e(l.startLineNumber-1,o,a),this._viewZoneId=s.addZone(this._viewZone),u.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(u,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new CF(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&se.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:mi.EMPTY},s=>this._decorationIds[i]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}var V3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},p7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},H3e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let Ix=class{constructor(e,t,n,i){this._editor=e,this._commandService=t,this._notificationService=n,this._codeLensCache=i,this._disposables=new Et,this._localToDispose=new Et,this._lenses=[],this._getCodeLensModelDelays=new eR(pb,250,2500),this._oldCodeLensModels=new Et,this._resolveCodeLensesDelays=new eR(pb,250,2500),this._resolveCodeLensesScheduler=new Qr(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(43)||s.hasChanged(16)||s.hasChanged(15))&&this._updateLensStyle(),s.hasChanged(14)&&this._onModelChange()})),this._disposables.add(pb.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+kse(this._editor.getId()).toString(16),this._styleElement=kf(jP(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e=this._editor.getOption(16),t;return!e||e<5?(e=this._editor.getOption(45)*.9|0,t=this._editor.getOption(58)):t=e*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:t,fontSize:e}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),i=this._editor.getOption(43),s=`--codelens-font-family${this._styleClassName}`,o=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${o}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${s}), ${ou.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(s,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(o,i.fontFeatureSettings),this._editor.changeViewZones(l=>{for(let u of this._lenses)u.updateHeight(e,l)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!pb.has(e)){t&&this._localToDispose.add(Jw(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const i of pb.all(e))if(typeof i.onDidChange=="function"){let s=i.onDidChange(()=>n.schedule());this._localToDispose.add(s)}const n=new Qr(()=>{var i;const s=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=dl(o=>Lue(e,o)),this._getCodeLensModelPromise.then(o=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=o,this._codeLensCache.put(e,o);const a=this._getCodeLensModelDelays.update(e,Date.now()-s);n.delay=a,this._renderCodeLensSymbols(o),this._resolveCodeLensesInViewportSoon()},Jn)},this._getCodeLensModelDelays.get(e));this._localToDispose.add(n),this._localToDispose.add(Bi(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(i=>{this._editor.changeViewZones(s=>{let o=[],a=-1;this._lenses.forEach(u=>{!u.isValid()||a===u.getLineNumber()?o.push(u):(u.update(s),a=u.getLineNumber())});let l=new g7;o.forEach(u=>{u.dispose(l,s),this._lenses.splice(this._lenses.indexOf(u),1)}),l.commit(i)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Bi(()=>{if(this._editor.getModel()){const i=AC.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(o=>{this._disposeAllLenses(s,o)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let s=i.target.element;if((s==null?void 0:s.tagName)==="SPAN"&&(s=s.parentElement),(s==null?void 0:s.tagName)==="A")for(const o of this._lenses){let a=o.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new g7;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),n=[],i;for(let a of e.lenses){let l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}const s=AC.capture(this._editor),o=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const u=new g7;let d=0,h=0;for(;h<n.length&&d<this._lenses.length;){let p=n[h][0].symbol.range.startLineNumber,v=this._lenses[d].getLineNumber();v<p?(this._lenses[d].dispose(u,l),this._lenses.splice(d,1)):v===p?(this._lenses[d].updateCodeLensSymbols(n[h],u),h++,d++):(this._lenses.splice(d,0,new HJ(n[h],this._editor,this._styleClassName,u,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,h++)}for(;d<this._lenses.length;)this._lenses[d].dispose(u,l),this._lenses.splice(d,1);for(;h<n.length;)this._lenses.push(new HJ(n[h],this._editor,this._styleClassName,u,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++;u.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),i.push(a))}),n.length===0)return;const s=Date.now(),o=dl(a=>{const l=n.map((u,d)=>{const h=new Array(u.length),p=u.map((v,C)=>!v.symbol.command&&typeof v.provider.resolveCodeLens=="function"?Promise.resolve(v.provider.resolveCodeLens(t,v.symbol,a)).then(S=>{h[C]=S},Ml):(h[C]=v.symbol,Promise.resolve(void 0)));return Promise.all(p).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(h)})});return Promise.all(l)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDelays.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Jn(a),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};Ix.ID="css.editor.codeLens";Ix=V3e([p7(1,js),p7(2,Oo),p7(3,Eue)],Ix);br(Ix.ID,Ix);It(class extends hn{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:ye.hasCodeLensProvider,label:L("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return H3e(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Wf),i=e.get(js),s=e.get(Oo),o=t.getSelection().positionLineNumber,a=t.getContribution(Ix.ID),l=[];for(let d of a.getLenses())if(d.getLineNumber()===o)for(let h of d.getItems()){const{command:p}=h.symbol;p&&l.push({label:p.title,command:p})}if(l.length===0)return;const u=yield n.pick(l,{canPickMany:!1});if(u)try{yield i.executeCommand(u.command.id,...u.command.arguments||[])}catch(d){s.error(d)}})}});function z3e(r,e){const t=[],i=gx.ordered(r).reverse().map(s=>Promise.resolve(s.provideDocumentColors(r,e)).then(o=>{if(Array.isArray(o))for(let a of o)t.push({colorInfo:a,provider:s})}));return Promise.all(i).then(()=>t)}function zJ(r,e,t,n){return Promise.resolve(t.provideColorPresentations(r,e,n))}Ki.registerCommand("_executeDocumentColorProvider",function(r,...e){const[t]=e;if(!(t instanceof $n))throw ym();const n=r.get(aa).getModel(t);if(!n)throw ym();const i=[],o=gx.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,ki.None)).then(l=>{if(Array.isArray(l))for(let u of l)i.push({range:u.range,color:[u.color.red,u.color.green,u.color.blue,u.color.alpha]})}));return Promise.all(o).then(()=>i)});Ki.registerCommand("_executeColorPresentationProvider",function(r,...e){const[t,n]=e,{uri:i,range:s}=n;if(!(i instanceof $n)||!Array.isArray(t)||t.length!==4||!se.isIRange(s))throw ym();const[o,a,l,u]=t,d=r.get(aa).getModel(i);if(!d)throw ym();const h={range:s,color:{red:o,green:a,blue:l,alpha:u}},p=[],C=gx.ordered(d).reverse().map(S=>Promise.resolve(S.provideColorPresentations(d,h,ki.None)).then(E=>{Array.isArray(E)&&p.push(...E)}));return Promise.all(C).then(()=>p)});var U3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const j3e=500;let SS=class xue extends Je{constructor(e,t){super(),this._editor=e,this._configurationService=t,this._localToDispose=this._register(new Et),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new fse(this._editor),this._colorDecorationClassRefs=this._register(new Et),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(gx.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let n=this._isEnabled;this._isEnabled=this.isEnabled(),n!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!gx.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new cc,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},xue.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=dl(e=>{const t=this._editor.getModel();return t?z3e(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Jn)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:mi.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,i)=>this._colorDatas.set(n,e[i]))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let n=0;n<e.length&&t.length<j3e;n++){const{red:i,green:s,blue:o,alpha:a}=e[n].colorInfo.color,l=new ar(Math.round(i*255),Math.round(s*255),Math.round(o*255),a);let u=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`;const d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:u}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:pbe,inlineClassName:`${d.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],t))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(se.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}};SS.ID="editor.contrib.colorDetector";SS.RECOMPUTE_TIME=1e3;SS=U3e([$3e(1,es)],SS);br(SS.ID,SS);function dH(r,e){return!!r[e]}class m7{constructor(e,t){this.target=e.target,this.hasTriggerModifier=dH(e.event,t.triggerModifier),this.hasSideBySideModifier=dH(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class UJ{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=dH(e,t.triggerModifier)}}class rO{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function $J(r){return r==="altKey"?zi?new rO(57,"metaKey",6,"altKey"):new rO(5,"ctrlKey",6,"altKey"):zi?new rO(6,"altKey",57,"metaKey"):new rO(6,"altKey",5,"ctrlKey")}class Due extends Je{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new Ae),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new Ae),this.onExecute=this._onExecute.event,this._onCancel=this._register(new Ae),this.onCancel=this._onCancel.event,this._editor=e,this._opts=$J(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=$J(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new m7(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new m7(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new m7(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new UJ(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new UJ(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var q3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Qy=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let LS=class extends rN{constructor(e,t,n,i,s,o,a,l,u,d){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},i,s,o,a,l,u,d),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(h=>this._onParentConfigurationChanged(h)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){qv(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};LS=q3e([Qy(3,Li),Qy(4,vr),Qy(5,js),Qy(6,Xn),Qy(7,Fs),Qy(8,Oo),Qy(9,Kc)],LS);const jJ=new We(new ar(0,122,204)),K3e={showArrow:!0,showFrame:!0,className:"",frameColor:jJ,arrowColor:jJ,keepEditorSelection:!1},G3e="vs.editor.contrib.zoneWidget";class Y3e{constructor(e,t,n,i,s,o){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=s,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class Z3e{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class yF{constructor(e){this._editor=e,this._ruleName=yF._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),_G(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){_G(this._ruleName),D6(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:se.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}yF._IdGenerator=new aj(".arrow-decoration-");class X3e{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new Et,this.container=null,this._isShowing=!1,this.editor=e,this.options=ub(t),qv(this.options,K3e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new yF(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=se.isIRange(e)?se.lift(e):se.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:mi.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),s=this._getWidth(i);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(i)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let u=0,d=0;if(this._arrow&&this.options.showArrow&&(u=Math.round(a/3),this._arrow.height=u,this._arrow.show(n)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(v=>{this._viewZone&&v.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new Y3e(o,n.lineNumber,n.column,t,C=>this._onViewZoneTop(C),C=>this._onViewZoneHeight(C)),this._viewZone.id=v.addZone(this._viewZone),this._overlayWidget=new Z3e(G3e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const v=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=v+"px",this.container.style.borderBottomWidth=v+"px"}let h=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=u+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,s),this.options.keepEditorSelection||this.editor.setSelection(e);const p=this.editor.getModel();if(p){const v=e.endLineNumber+1;v<=p.getLineCount()?this.revealLine(v,!1):this.revealLine(p.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new ru(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),i=n<0?Math.ceil(n):Math.floor(n),s=e.heightInLines+i;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class Q3e extends ux{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Ae),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=st(e,Ct(".monaco-dropdown")),this._label=st(this._element,Ct(".dropdown-label"));let n=t.labelRenderer;n||(n=s=>(s.textContent=t.label||"",null));for(const s of[xn.CLICK,xn.MOUSE_DOWN,as.Tap])this._register(St(this.element,s,o=>Ir.stop(o,!0)));for(const s of[xn.MOUSE_DOWN,as.Tap])this._register(St(this._label,s,o=>{o instanceof MouseEvent&&o.detail>1||(this.visible?this.hide():this.show())}));this._register(St(this._label,xn.KEY_UP,s=>{const o=new Ts(s);(o.equals(3)||o.equals(10))&&(Ir.stop(s,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(Rr.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class J3e extends Q3e{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class Iue extends tv{constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new Ae),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{this.element=st(s,Ct("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new J3e(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return s.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var Yj=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Tue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function e5e(r,e,t,n,i,s,o){const a=r.getActions(e);return n5e(a,t,!1,typeof n=="string"?u=>u===n:n,i,s,o),t5e(a)}function t5e(r){const e=new Et;for(const[,t]of r)for(const n of t)e.add(n);return e}function n5e(r,e,t,n=a=>a==="navigation",i=Number.MAX_SAFE_INTEGER,s=()=>!1,o=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const u=new Set;for(const[d,h]of r){let p;n(d)?(p=a,p.length>0&&o&&p.push(new Yg)):(p=l,p.length>0&&p.push(new Yg));for(let v of h){t&&(v=v instanceof DC&&v.alt?v.alt:v);const C=p.push(v);v instanceof qP&&u.add({group:d,action:v,index:C-1})}}for(const{group:d,action:h,index:p}of u){const v=n(d)?a:l,C=h.actions;(C.length<=1||v.length+C.length-2<=i)&&s(h,d,v.length)&&v.splice(p,1,...C)}if(a!==l&&a.length>i){const d=a.splice(i,a.length-i);l.unshift(...d,new Yg)}}let Tx=class extends oN{constructor(e,t,n,i,s){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=i,this._contextKeyService=s,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new uc),this._altKey=Cw.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return Tue(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(Nl||Hc)&&this._altKey.keyStatus.shiftKey;const i=()=>{const s=t&&n;s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(s=>{n=s.altKey||(Nl||Hc)&&s.shiftKey,i()})),this._register(St(e,"mouseleave",s=>{t=!1,i()})),this._register(St(e,"mouseenter",s=>{t=!0,i()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let i=t?L("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const s=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?L("titleAndKb","{0} ({1})",s,a):s;i+=`
[${N$.modifierLabels[_f].altKey}] ${l}`}this.label.title=i}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:i}=this;if(!n||!i)return;const s=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(s)if(vs.isThemeIcon(s)){const o=vs.asClassNameArray(s);i.classList.add(...o),this._itemClassDispose.value=Bi(()=>{i.classList.remove(...o)})}else s.light&&i.style.setProperty("--menu-entry-icon-light",eS(s.light)),s.dark&&i.style.setProperty("--menu-entry-icon-dark",eS(s.dark)),i.classList.add("icon"),this._itemClassDispose.value=Bi(()=>{i.classList.remove("icon"),i.style.removeProperty("--menu-entry-icon-light"),i.style.removeProperty("--menu-entry-icon-dark")})}};Tx=Yj([nv(2,ks),nv(3,Oo),nv(4,Xn)],Tx);let hH=class extends Iue{constructor(e,t,n){var i,s;const o=Object.assign({},t??Object.create(null),{menuAsChild:(i=t==null?void 0:t.menuAsChild)!==null&&i!==void 0?i:!1,classNames:(s=t==null?void 0:t.classNames)!==null&&s!==void 0?s:vs.isThemeIcon(e.item.icon)?vs.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,o)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!vs.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",eS(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",eS(t.dark)))}}};hH=Yj([nv(2,GC)],hH);let fH=class extends tv{constructor(e,t,n,i,s,o,a,l){var u,d,h;super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=s,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let p,v=l.get(this._storageKey,1);v&&(p=e.actions.find(S=>v===S.id)),p||(p=e.actions[0]),this._defaultAction=this._instaService.createInstance(Tx,p,void 0);const C=Object.assign({},t??Object.create(null),{menuAsChild:(u=t==null?void 0:t.menuAsChild)!==null&&u!==void 0?u:!0,classNames:(d=t==null?void 0:t.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(h=t==null?void 0:t.actionRunner)!==null&&h!==void 0?h:new ux});this._dropdown=new Iue(e,e.actions,this._contextMenuService,C),this._dropdown.actionRunner.onDidRun(S=>{S.action instanceof DC&&this.update(S.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Tx,e,void 0),this._defaultAction.actionRunner=new class extends ux{runAction(t,n){return Tue(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(P0e(this._container,Ct(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Ct(".action-container");this._defaultAction.render(st(this._container,t)),this._register(St(t,xn.KEY_DOWN,i=>{const s=new Ts(i);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const n=Ct(".dropdown-action-container");this._dropdown.render(st(this._container,n)),this._register(St(n,xn.KEY_DOWN,i=>{var s;const o=new Ts(i);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};fH=Yj([nv(2,ks),nv(3,Oo),nv(4,GC),nv(5,ZS),nv(6,Li),nv(7,Yv)],fH);function i5e(r,e,t){return e instanceof DC?r.createInstance(Tx,e,void 0):e instanceof TU?e.item.rememberDefaultAction?r.createInstance(fH,e,t):r.createInstance(hH,e,t):void 0}var kue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Nue=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Aue=lr("IPeekViewService");KC(Aue,class{constructor(){this._widgets=new Map}addExclusiveWidget(r,e){const t=this._widgets.get(r);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const i=this._widgets.get(r);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(r))};this._widgets.set(r,{widget:e,listener:e.onDidClose(n)})}});var zd;(function(r){r.inPeekEditor=new gn("inReferenceSearchEditor",!0,L("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),r.notInPeekEditor=r.inPeekEditor.toNegated()})(zd||(zd={}));let DN=class{constructor(e,t){e instanceof LS&&zd.inPeekEditor.bindTo(t)}dispose(){}};DN.ID="editor.contrib.referenceController";DN=kue([Nue(1,Xn)],DN);br(DN.ID,DN);function r5e(r){let e=r.get(vr).getFocusedCodeEditor();return e instanceof LS?e.getParentEditor():e}const s5e={headerBackgroundColor:We.white,primaryHeadingColor:We.fromHex("#333333"),secondaryHeadingColor:We.fromHex("#6c6c6cb3")};let aP=class extends X3e{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new Ae,this.onDidClose=this._onDidClose.event,qv(this.options,s5e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=Ct(".head"),this._bodyElement=Ct(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=Ct(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),ja(n,"click",o=>this._onTitleClick(o))),st(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=Ct("span.filename"),this._secondaryHeading=Ct("span.dirname"),this._metaHeading=Ct("span.meta"),st(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=Ct(".peekview-actions");st(this._headElement,i);const s=this._getActionBarOptions();this._actionbarWidget=new Nv(i,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Ef("peekview.close",L("label.close","Close"),Ie.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:i5e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Ca(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,yh(this._metaHeading)):Rc(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};aP=kue([Nue(2,Li)],aP);const o5e=Oe("peekViewTitle.background",{dark:Jr(Sm,.1),light:Jr(Sm,.1),hc:null},L("peekViewTitleBackground","Background color of the peek view title area.")),Oue=Oe("peekViewTitleLabel.foreground",{dark:We.white,light:We.black,hc:We.white},L("peekViewTitleForeground","Color of the peek view title.")),Mue=Oe("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},L("peekViewTitleInfoForeground","Color of the peek view title info.")),a5e=Oe("peekView.border",{dark:Sm,light:Sm,hc:Ao},L("peekViewBorder","Color of the peek view borders and arrow.")),l5e=Oe("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:We.black},L("peekViewResultsBackground","Background color of the peek view result list."));var u5e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class PC{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=Pae.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?L({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Mf(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):L("aria.oneReference","symbol in {0} on line {1} at column {2}",Mf(this.uri),this.range.startLineNumber,this.range.startColumn)}}class c5e{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:s,endLineNumber:o,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:s-t}),u=new se(i,l.startColumn,i,s),d=new se(o,a,o,1073741824),h=n.getValueInRange(u).replace(/^\s+/,""),p=n.getValueInRange(e),v=n.getValueInRange(d).replace(/\s+$/,"");return{value:h+p+v,highlight:{start:h.length,end:h.length+p.length}}}}class IN{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new Mu}dispose(){nr(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?L("aria.fileReferences.1","1 symbol in {0}, full path {1}",Mf(this.uri),this.uri.fsPath):L("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Mf(this.uri),this.uri.fsPath)}resolve(e){return u5e(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new c5e(n))}catch(n){Jn(n)}return this})}}class Fd{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Ae,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Fd._compareReferences);let i;for(let s of e)if((!i||!Bu.isEqual(i.uri,s.uri,!0))&&(i=new IN(this,s.uri),this.groups.push(i)),i.children.length===0||Fd._compareReferences(s,i.children[i.children.length-1])!==0){const o=new PC(n===s,i,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),i.children.push(o)}}dispose(){nr(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Fd(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?L("aria.result.0","No results found"):this.references.length===1?L("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?L("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):L("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,i=n.children.indexOf(e),s=n.children.length,o=n.parent.groups.length;return o===1||t&&i+1<s||!t&&i>0?(t?i=(i+1)%s:i=(i+s-1)%s,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%o,n.parent.groups[i].children[0]):(i=(i+o-1)%o,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,s)=>({idx:s,prefixLen:cx(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,s)=>i.prefixLen>s.prefixLen?-1:i.prefixLen<s.prefixLen?1:i.offsetDist<s.offsetDist?-1:i.offsetDist>s.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&se.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Bu.compare(e.uri,t.uri)||se.compareRangesUsingStarts(e.range,t.range)}}function Rue(r){if(!r)return;typeof r=="string"&&(r=$n.file(r));const e=Mf(r)||(r.scheme===wi.file?r.fsPath:r.path);return Nl&&swe(e)?gH(e):e}function gH(r,e){return yse(r,e)?r.charAt(0).toUpperCase()+r.slice(1):r}var wF=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},TN=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let pH=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Fd||e instanceof IN}getChildren(e){if(e instanceof Fd)return e.groups;if(e instanceof IN)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};pH=wF([TN(0,zc)],pH);class d5e{getHeight(){return 23}getTemplateId(e){return e instanceof IN?kN.id:H2.id}}let mH=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof PC){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return Mf(e.uri)}};mH=wF([TN(0,ks)],mH);class h5e{getId(e){return e instanceof PC?e.id:e.uri}}let _H=class extends Je{constructor(e,t,n){super(),this._uriLabel=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new QR(i,{supportHighlights:!0})),this.badge=new kV(st(i,Ct(".count"))),this._register(xke(this.badge,n)),e.appendChild(i)}set(e,t){let n=qU(e.uri);this.file.setLabel(Rue(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(L("referencesCount","{0} references",i)):this.badge.setTitleFormat(L("referenceCount","{0} reference",i))}};_H=wF([TN(1,D2),TN(2,Fs)],_H);let kN=class Pue{constructor(e){this._instantiationService=e,this.templateId=Pue.id}renderTemplate(e){return this._instantiationService.createInstance(_H,e)}renderElement(e,t,n){n.set(e.element,W4(e.filterData))}disposeTemplate(e){e.dispose()}};kN.id="FileReferencesRenderer";kN=wF([TN(0,Li)],kN);class f5e{constructor(e){this.label=new _S(e)}set(e,t){var n;const i=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${Mf(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:o}=i;t&&!Em.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,W4(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[o]))}}}class H2{constructor(){this.templateId=H2.id}renderTemplate(e){return new f5e(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}H2.id="OneReferenceRenderer";class g5e{getWidgetAriaLabel(){return L("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var p5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},J0=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},qJ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class SF{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Et,this._callOnModelChange=new Et,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let s=0,o=e.children.length;s<o;s++){let a=e.children[s];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:SF.DecorationOptions}),n.push(s))}const i=this._editor.deltaDecorations([],t);for(let s=0;s<i.length;s++)this._decorations.set(i[s],e.children[n[s]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,i]of this._decorations){const s=t.getDecorationRange(n);if(!s)continue;let o=!1;if(!se.equalsRange(s,i.range)){if(se.spansMultipleLines(s))o=!0;else{const a=i.range.endColumn-i.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=s}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}SF.DecorationOptions=mi.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class m5e{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class _5e extends EV{}let vH=class extends aP{constructor(e,t,n,i,s,o,a,l,u,d,h,p){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=s,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=u,this._keybindingService=d,this._modeService=h,this._languageConfigurationService=p,this._disposeOnNewModel=new Et,this._callOnDispose=new Et,this._onDidSelectReference=new Ae,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new us(0,0),this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),nr(this._preview),nr(this._previewNotAvailableMessage),nr(this._tree),nr(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(a5e)||We.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(o5e)||We.transparent,primaryHeadingColor:e.getColor(Oue),secondaryHeadingColor:e.getColor(Mue)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=st(e,Ct("div.messages")),Rc(this._messageContainer),this._splitView=new yae(e,{orientation:1}),this._previewContainer=st(e,Ct("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(LS,this._previewContainer,t,this.editor),Rc(this._previewContainer),this._previewNotAvailableMessage=new Vd(L("missingPreviewMessage","no preview available"),Vd.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=st(e,Ct("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new g5e,keyboardNavigationLabelProvider:this._instantiationService.createInstance(mH),identityProvider:new h5e,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:l5e}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(ja(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(_5e,"ReferencesWidget",this._treeContainer,new d5e,[this._instantiationService.createInstance(kN),this._instantiationService.createInstance(H2)],this._instantiationService.createInstance(pH),n),this._splitView.addView({onDidChange:yn.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},jR.Distribute),this._splitView.addView({onDidChange:yn.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},jR.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let i=(s,o)=>{s instanceof PC&&(o==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:o,source:"tree"}))};this._tree.onDidOpen(s=>{s.sideBySide?i(s.element,"side"):s.editorOptions.pinned?i(s.element,"goto"):i(s.element,"show")}),Rc(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new us(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=L("noResults","No results"),yh(this._messageContainer),Promise.resolve(void 0)):(Rc(this._messageContainer),this._decorationsManager=new SF(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();i&&this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),yh(this._treeContainer),yh(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof PC)return e;if(e instanceof IN&&e.children.length>0)return e.children[0]}revealReference(e){return qJ(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return qJ(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==wi.inMemory?this.setTitle(Sse(e.uri),this._uriLabel.getUriLabel(qU(e.uri))):this.setTitle(L("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const i=yield n;if(!this._model){i.dispose();return}nr(this._previewModelReference);const s=i.object;if(s){const o=this._preview.getModel()===s.textEditorModel?0:1,a=se.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()})}};vH=p5e([J0(3,Fs),J0(4,zc),J0(5,Li),J0(6,Aue),J0(7,D2),J0(8,b2),J0(9,ks),J0(10,Pl),J0(11,v2)],vH);var v5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},YL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},KJ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const dL=new gn("referenceSearchVisible",!1,L("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let FC=class bH{constructor(e,t,n,i,s,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=s,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new Et,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=dL.bindTo(n)}static get(e){return e.getContribution(bH.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",o=m5e.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(vH,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(L("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:u,kind:d}=l;if(u)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(u,!1,!1);break;case"side":this.openReference(u,!0,!1);break;case"goto":n?this._gotoReference(u):this.openReference(u,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var u;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(u=this._model)===null||u===void 0||u.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(L("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let d=this._editor.getModel().uri,h=new ze(e.startLineNumber,e.startColumn),p=this._model.nearestReference(d,h);if(p)return this._widget.setSelection(p).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return KJ(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),s=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(i),yield this._gotoReference(i),s?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return KJ(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=se.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var i;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const s=bH.get(n),o=this._model.clone();this.closeWidget(),n.focus(),s.toggleWidget(t,dl(a=>Promise.resolve(o)),(i=this._peekMode)!==null&&i!==void 0?i:!1)}},n=>{this._ignoreModelChangeEvent=!1,Jn(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:s}=e;this._editorService.openCodeEditor({resource:i,options:{selection:s,pinned:n}},this._editor,t)}};FC.ID="editor.contrib.referencesController";FC=v5e([YL(2,Xn),YL(3,vr),YL(4,Oo),YL(5,Li),YL(6,Yv),YL(7,es)],FC);function hL(r,e){const t=r5e(r);if(!t)return;let n=FC.get(t);n&&e(n)}Al.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:po(2089,60),when:qt.or(dL,zd.inPeekEditor),handler(r){hL(r,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Al.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:qt.or(dL,zd.inPeekEditor),handler(r){hL(r,e=>{e.goToNextOrPreviousReference(!0)})}});Al.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:qt.or(dL,zd.inPeekEditor),handler(r){hL(r,e=>{e.goToNextOrPreviousReference(!1)})}});Ki.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Ki.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Ki.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Ki.registerCommand("closeReferenceSearch",r=>hL(r,e=>e.closeWidget()));Al.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:qt.and(zd.inPeekEditor,qt.not("config.editor.stablePeek"))});Al.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:qt.and(dL,qt.not("config.editor.stablePeek"))});Al.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:qt.and(dL,Tae),handler(r){var e;const n=(e=r.get(Bf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof PC&&hL(r,i=>i.revealReference(n[0]))}});Al.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:qt.and(dL,Tae),handler(r){var e;const n=(e=r.get(Bf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof PC&&hL(r,i=>i.openReference(n[0],!0,!0))}});Ki.registerCommand("openReference",r=>{var e;const n=(e=r.get(Bf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof PC&&hL(r,i=>i.openReference(n[0],!1,!0))});var Fue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zT=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Zj=new gn("hasSymbols",!1,L("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),LF=lr("ISymbolNavigationService");let CH=class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=Zj.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new yH(this._editorService),i=n.onDidChange(s=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let u=!1,d=!1;for(const h of t.references)if(wse(h.uri,a.uri))u=!0,d=d||se.containsPosition(h.range,l);else if(u)break;(!u||!d)&&this.reset()});this._currentState=cC(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:se.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?L("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):L("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};CH=Fue([zT(0,Xn),zT(1,vr),zT(2,Oo),zT(3,ks)],CH);KC(LF,CH,!0);Dt(new class extends Rl{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:Zj,kbOpts:{weight:100,primary:70}})}runEditorCommand(r,e){return r.get(LF).revealNext(e)}});Al.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:Zj,primary:9,handler(r){r.get(LF).reset()}});let yH=class{constructor(e){this._listener=new Map,this._disposables=new Et,this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),nr(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,cC(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};yH=Fue([zT(0,vr)],yH);var Bue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function z2(r,e,t,n){const s=t.ordered(r).map(o=>Promise.resolve(n(o,r,e)).then(void 0,a=>{Ml(a)}));return Promise.all(s).then(o=>{const a=[];for(let l of o)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function Xj(r,e,t){return z2(r,e,Vk,(n,i,s)=>n.provideDefinition(i,s,t))}function Wue(r,e,t){return z2(r,e,sR,(n,i,s)=>n.provideDeclaration(i,s,t))}function Vue(r,e,t){return z2(r,e,oR,(n,i,s)=>n.provideImplementation(i,s,t))}function Hue(r,e,t){return z2(r,e,aR,(n,i,s)=>n.provideTypeDefinition(i,s,t))}function EF(r,e,t,n){return z2(r,e,nR,(i,s,o)=>Bue(this,void 0,void 0,function*(){const a=yield i.provideReferences(s,o,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const l=yield i.provideReferences(s,o,{includeDeclaration:!1},n);return l&&l.length===1?l:a}))}function U2(r){return Bue(this,void 0,void 0,function*(){const e=yield r(),t=new Fd(e,""),n=t.references.map(i=>i.link);return t.dispose(),n})}jv("_executeDefinitionProvider",(r,e)=>U2(()=>Xj(r,e,ki.None)));jv("_executeDeclarationProvider",(r,e)=>U2(()=>Wue(r,e,ki.None)));jv("_executeImplementationProvider",(r,e)=>U2(()=>Vue(r,e,ki.None)));jv("_executeTypeDefinitionProvider",(r,e)=>U2(()=>Hue(r,e,ki.None)));jv("_executeReferenceProvider",(r,e)=>U2(()=>EF(r,e,!1,ki.None)));var Qg=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},_7,v7,b7,C7,y7,w7,S7,L7;Pu.appendMenuItem(vn.EditorContext,{submenu:vn.EditorContextPeek,title:L("peek.submenu","Peek"),group:"navigation",order:100});const zue=new Set;function Bm(r){const e=new r;return Ere(e),zue.add(e.id),e}class pD extends hn{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(Oo),i=e.get(vr),s=e.get(jb),o=e.get(LF),a=t.getModel(),l=t.getPosition(),u=new sN(t,5),d=cU(this._getLocationModel(a,l,u.token),u.token).then(h=>Qg(this,void 0,void 0,function*(){if(!h||u.token.isCancellationRequested)return;Il(h.ariaMessage);let p;if(h.referenceAt(a.uri,l)){const C=this._getAlternativeCommand(t);C!==this.id&&zue.has(C)&&(p=t.getAction(C))}const v=h.references.length;if(v===0){if(!this._configuration.muteMessage){const C=a.getWordAtPosition(l);kh.get(t).showMessage(this._getNoResultFoundMessage(C),l)}}else if(v===1&&p)p.run();else return this._onResult(i,o,t,h)}),h=>{n.error(h)}).finally(()=>{u.dispose()});return s.showWhile(d,250),d}_onResult(e,t,n,i){return Qg(this,void 0,void 0,function*(){const s=this._getGoToPreference(n);if(!(n instanceof LS)&&(this._configuration.openInPeek||s==="peek"&&i.references.length>1))this._openInPeek(n,i);else{const o=i.firstReference(),a=i.references.length>1&&s==="gotoAndPeek",l=yield this._openReference(n,e,o,this._configuration.openToSide,!a);a&&l?this._openInPeek(l,i):i.dispose(),s==="goto"&&t.put(o)}})}_openReference(e,t,n,i,s){return Qg(this,void 0,void 0,function*(){let o;if(fSe(n)&&(o=n.targetSelectionRange),o||(o=n.range),!o)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:se.collapseToStart(o),selectionRevealType:3}},e,i);if(a){if(s){const l=a.getModel(),u=a.deltaDecorations([],[{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(u,[])},350)}return a}})}_openInPeek(e,t){let n=FC.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),dl(i=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class xF extends pD{_getLocationModel(e,t,n){return Qg(this,void 0,void 0,function*(){return new Fd(yield Xj(e,t,n),L("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?L("noResultWord","No definition found for '{0}'",e.word):L("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const Uue=eD&&!aU?2118:70;Bm((_7=class wH extends xF{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:wH.id,label:L("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:qt.and(ye.hasDefinitionProvider,ye.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:ye.editorTextFocus,primary:Uue,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Ki.registerCommandAlias("editor.action.goToDeclaration",wH.id)}},_7.id="editor.action.revealDefinition",_7));Bm((v7=class SH extends xF{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:SH.id,label:L("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:qt.and(ye.hasDefinitionProvider,ye.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,Uue),weight:100}}),Ki.registerCommandAlias("editor.action.openDeclarationToTheSide",SH.id)}},v7.id="editor.action.revealDefinitionAside",v7));Bm((b7=class LH extends xF{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:LH.id,label:L("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:qt.and(ye.hasDefinitionProvider,zd.notInPeekEditor,ye.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:ye.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:vn.EditorContextPeek,group:"peek",order:2}}),Ki.registerCommandAlias("editor.action.previewDeclaration",LH.id)}},b7.id="editor.action.peekDefinition",b7));class $ue extends pD{_getLocationModel(e,t,n){return Qg(this,void 0,void 0,function*(){return new Fd(yield Wue(e,t,n),L("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?L("decl.noResultWord","No declaration found for '{0}'",e.word):L("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}Bm((C7=class jue extends $ue{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:jue.id,label:L("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:qt.and(ye.hasDeclarationProvider,ye.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?L("decl.noResultWord","No declaration found for '{0}'",e.word):L("decl.generic.noResults","No declaration found")}},C7.id="editor.action.revealDeclaration",C7));Bm(class extends $ue{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:L("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:qt.and(ye.hasDeclarationProvider,zd.notInPeekEditor,ye.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:vn.EditorContextPeek,group:"peek",order:3}})}});class que extends pD{_getLocationModel(e,t,n){return Qg(this,void 0,void 0,function*(){return new Fd(yield Hue(e,t,n),L("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?L("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):L("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}Bm((y7=class Kue extends que{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Kue.ID,label:L("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:qt.and(ye.hasTypeDefinitionProvider,ye.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:ye.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},y7.ID="editor.action.goToTypeDefinition",y7));Bm((w7=class Gue extends que{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Gue.ID,label:L("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:qt.and(ye.hasTypeDefinitionProvider,zd.notInPeekEditor,ye.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:vn.EditorContextPeek,group:"peek",order:4}})}},w7.ID="editor.action.peekTypeDefinition",w7));class Yue extends pD{_getLocationModel(e,t,n){return Qg(this,void 0,void 0,function*(){return new Fd(yield Vue(e,t,n),L("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?L("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):L("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}Bm((S7=class Zue extends Yue{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Zue.ID,label:L("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:qt.and(ye.hasImplementationProvider,ye.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:ye.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},S7.ID="editor.action.goToImplementation",S7));Bm((L7=class Xue extends Yue{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Xue.ID,label:L("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:qt.and(ye.hasImplementationProvider,zd.notInPeekEditor,ye.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:ye.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:vn.EditorContextPeek,group:"peek",order:5}})}},L7.ID="editor.action.peekImplementation",L7));class Que extends pD{_getNoResultFoundMessage(e){return e?L("references.no","No references found for '{0}'",e.word):L("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}Bm(class extends Que{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:L("goToReferences.label","Go to References"),alias:"Go to References",precondition:qt.and(ye.hasReferenceProvider,zd.notInPeekEditor,ye.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:ye.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return Qg(this,void 0,void 0,function*(){return new Fd(yield EF(e,t,!0,n),L("ref.title","References"))})}});Bm(class extends Que{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:L("references.action.label","Peek References"),alias:"Peek References",precondition:qt.and(ye.hasReferenceProvider,zd.notInPeekEditor,ye.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:vn.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return Qg(this,void 0,void 0,function*(){return new Fd(yield EF(e,t,!1,n),L("ref.title","References"))})}});class b5e extends pD{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:L("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:qt.and(zd.notInPeekEditor,ye.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return Qg(this,void 0,void 0,function*(){return new Fd(this._references,L("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&L("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Ki.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:$n},{name:"position",description:"The position at which to start",constraint:ze.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(r,e,t,n,i,s,o)=>Qg(void 0,void 0,void 0,function*(){$r($n.isUri(e)),$r(ze.isIPosition(t)),$r(Array.isArray(n)),$r(typeof i>"u"||typeof i=="string"),$r(typeof o>"u"||typeof o=="boolean");const a=r.get(vr),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(Av(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(u=>{const d=new class extends b5e{_getNoResultFoundMessage(h){return s||super._getNoResultFoundMessage(h)}}({muteMessage:!s,openInPeek:!!o,openToSide:!1},n,i);u.get(Li).invokeFunction(d.run.bind(d),l)})})});Ki.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:$n},{name:"position",description:"The position at which to start",constraint:ze.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(r,e,t,n,i)=>Qg(void 0,void 0,void 0,function*(){r.get(js).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)})});Ki.registerCommand({id:"editor.action.findReferences",handler:(r,e,t)=>{$r($n.isUri(e)),$r(ze.isIPosition(t));const n=r.get(vr);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(i=>{if(!Av(i)||!i.hasModel())return;const s=FC.get(i);if(!s)return;const o=dl(l=>EF(i.getModel(),ze.lift(t),!1,l).then(u=>new Fd(u,L("ref.title","References")))),a=new se(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(s.toggleWidget(a,o,!1))})}});Ki.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Pu.appendMenuItems([{id:vn.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:L({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:vn.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:L({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:vn.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:L({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:vn.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:L({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:vn.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:L({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var C5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},GJ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let ES=class UT{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new Et,this.toUnhookForKeyboard=new Et,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let i=new Due(e);this.toUnhook.add(i),this.toUnhook.add(i.onMouseMoveOrRelevantKeyDown(([s,o])=>{this.startFindDefinitionFromMouse(s,Md(o))})),this.toUnhook.add(i.onExecute(s=>{this.isEnabled(s)&&this.gotoDefinition(s.target.position,s.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},o=>{this.removeLinkDecorations(),Jn(o)})})),this.toUnhook.add(i.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(UT.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let i=new woe(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=dl(s=>this.findDefinition(e,s)),this.previousPromise.then(s=>{if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}if(s.length>1)this.addDecoration(new se(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Wb().appendText(L("multipleResults","Click to show {0} definitions.",s.length)));else{let o=s[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:u}=o.range;if(u<1||u>l.getLineCount()){a.dispose();return}const d=this.getPreviewValue(l,u,o);let h;o.originSelectionRange?h=se.lift(o.originSelectionRange):h=new se(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const p=this.modeService.getModeIdByFilepathOrFirstLine(l.uri);this.addDecoration(h,new Wb().appendCodeblock(p||"",d)),a.dispose()})}}).then(void 0,Jn)}getPreviewValue(e,t,n){let i=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return i.endLineNumber-i.startLineNumber>=UT.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+UT.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<i;s++){let o=e.getLineFirstNonWhitespaceColumn(s);if(n===o)break}return new se(t,1,s+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+UT.MAX_SOURCE_PREVIEW_LINES),i=[];let s=!0,o=e.bracketPairs.findNextBracket(new ze(t,1));for(;o!==null;){if(i.length===0)i.push(o);else{const d=i[i.length-1];if(d.open[0]===o.open[0]&&d.isOpen&&!o.isOpen?i.pop():i.push(o),i.length===0)if(s)s=!1;else return new se(t,1,o.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let l=o.range.endLineNumber,u=o.range.endColumn;if(a===o.range.endColumn&&(l++,u=1),l>n)return new se(t,1,n+1,1);o=e.bracketPairs.findNextBracket(new ze(l,u))}return new se(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&Vk.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?Xj(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new xF({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(Xn);return zd.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};ES.ID="editor.contrib.gotodefinitionatposition";ES.MAX_SOURCE_PREVIEW_LINES=8;ES=C5e([GJ(1,zc),GJ(2,Pl)],ES);br(ES.ID,ES);ds((r,e)=>{const t=r.getColor(ise);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const sO=Ct;class Jue extends Je{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new C2(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class Qj extends Je{constructor(e,t,n){super(),this.actionContainer=st(e,sO("div.action-container")),this.action=st(this.actionContainer,sO("a.action")),this.action.setAttribute("role","button"),t.iconClass&&st(this.action,sO(`span.icon.${t.iconClass}`));const i=st(this.action,sO("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._register(St(this.actionContainer,xn.MOUSE_DOWN,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new Qj(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}class y5e{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new Ae,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Ae,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Ae,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const pm=Ct;class w5e extends Je{constructor(e,t,n){super(),this.model=t,this.domNode=pm(".colorpicker-header"),st(e,this.domNode),this.pickedColorNode=st(this.domNode,pm(".picked-color"));const i=L("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",i);const s=st(this.domNode,pm(".original-color"));s.style.backgroundColor=We.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(oS)||We.white,this._register(ds((o,a)=>{this.backgroundColor=o.getColor(oS)||We.white})),this._register(St(this.pickedColorNode,xn.CLICK,()=>this.model.selectNextColorPresentation())),this._register(St(s,xn.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=We.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=We.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(pm(".codicon.codicon-color-mode"))}}class S5e extends Je{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=pm(".colorpicker-body"),st(e,this.domNode),this.saturationBox=new L5e(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new E5e(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new x5e(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new We(new vv(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new We(new vv(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new We(new vv(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class L5e extends Je{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Ae,this.onColorFlushed=this._onColorFlushed.event,this.domNode=pm(".saturation-wrap"),st(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",st(this.domNode,this.canvas),this.selection=pm(".saturation-selection"),st(this.domNode,this.selection),this.layout(),this._register(fU(this.domNode,i=>this.onMouseDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new JS);const t=su(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,rD,i=>this.onDidChangePosition(i.posx-t.left,i.posy-t.top),()=>null);const n=Yie(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new We(new vv(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const s=n.createLinearGradient(0,0,0,this.canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=We.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=s,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class ece extends Je{constructor(e,t){super(),this.model=t,this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Ae,this.onColorFlushed=this._onColorFlushed.event,this.domNode=st(e,pm(".strip")),this.overlay=st(this.domNode,pm(".overlay")),this.slider=st(this.domNode,pm(".slider")),this.slider.style.top="0px",this._register(fU(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new JS),n=su(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,rD,s=>this.onDidChangeTop(s.posy-n.top),()=>null);const i=Yie(document,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class E5e extends ece{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:i}=e.rgba,s=new We(new ar(t,n,i,1)),o=new We(new ar(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class x5e extends ece{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class D5e extends Ah{constructor(e,t,n,i){super(),this.model=t,this.pixelRatio=n,this._register(sU(()=>this.layout()));const s=pm(".colorpicker-widget");e.appendChild(s);const o=new w5e(s,this.model,i);this.body=new S5e(s,this.model,this.pixelRatio),this._register(o),this._register(this.body)}layout(){this.body.layout()}}var I5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},T5e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},YJ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class k5e{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let EH=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return Va.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return YJ(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const i=SS.get(this._editor);for(const s of t){if(!i.isColorDecorationId(s.id))continue;const o=i.getColorData(s.range.getStartPosition());if(o)return[yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}_createColorHover(e,t,n){return YJ(this,void 0,void 0,function*(){const i=e.getValueInRange(t.range),{red:s,green:o,blue:a,alpha:l}=t.color,u=new ar(Math.round(s*255),Math.round(o*255),Math.round(a*255),l),d=new We(u),h=yield zJ(e,t,n,ki.None),p=new y5e(d,[],0);return p.colorPresentations=h||[],p.guessColorPresentation(d,i),new k5e(this,se.lift(t.range),p,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return Je.None;const i=new Et,s=e[0],o=this._editor.getModel(),a=s.model,l=i.add(new D5e(t,a,this._editor.getOption(128),this._themeService));let u=new se(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn);const d=()=>{let p,v;if(a.presentation.textEdit){p=[a.presentation.textEdit],v=new se(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const C=this._editor.getModel()._setTrackedRange(null,v,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p),v=this._editor.getModel()._getTrackedRange(C)||v}else p=[{identifier:null,range:u,text:a.presentation.label,forceMoveMarkers:!1}],v=u.setEndPosition(u.endLineNumber,u.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p);a.presentation.additionalTextEdits&&(p=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",p),this._hover.hide()),this._editor.pushUndoStop(),u=v},h=p=>zJ(o,{range:u,color:{red:p.rgba.r/255,green:p.rgba.g/255,blue:p.rgba.b/255,alpha:p.rgba.a}},s.provider,ki.None).then(v=>{a.colorPresentations=v||[]});return i.add(a.onColorFlushed(p=>{h(p).then(d)})),i.add(a.onDidChangeColor(h)),this._hover.setColorPicker(l),i}};EH=I5e([T5e(2,Fs)],EH);var N5e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},A5e=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,l){o=r[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}};class tce{constructor(e,t,n,i,s){this._computer=e,this._state=0,this._hoverTime=s,this._firstWaitScheduler=new Qr(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new Qr(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new Qr(()=>this._showLoadingMessage(),0),this._asyncIterable=null,this._asyncIterableDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=i}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=o0e(e=>this._computer.computeAsync(e)),N5e(this,void 0,void 0,function*(){var e,t;try{try{for(var n=A5e(this._asyncIterable),i;i=yield n.next(),!i.done;){const s=i.value;s&&(this._computer.onResult([s],!1),this._onProgress())}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,this._withAsyncResult()}catch(s){this._onError(s)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncIterableDone?(this._state=0,this._onComplete()):(this._state=3,this._onProgress())}_showLoadingMessage(){this._state===3&&(this._state=4,this._onProgress())}_withAsyncResult(){(this._state===3||this._state===4)&&(this._state=0,this._onComplete())}_onComplete(){this._completeCallback(this._computer.getResult())}_onError(e){this._errorCallback?this._errorCallback(e):Jn(e)}_onProgress(){this._state===4?this._progressCallback(this._computer.getResultWithLoadingMessage()):this._progressCallback(this._computer.getResult())}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._state=0}}class ZJ{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class E7{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function O5e(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var M5e=Object.hasOwnProperty,XJ=Object.setPrototypeOf,R5e=Object.isFrozen,P5e=Object.getPrototypeOf,F5e=Object.getOwnPropertyDescriptor,Ud=Object.freeze,Hb=Object.seal,B5e=Object.create,nce=typeof Reflect<"u"&&Reflect,lP=nce.apply,xH=nce.construct;lP||(lP=function(e,t,n){return e.apply(t,n)});Ud||(Ud=function(e){return e});Hb||(Hb=function(e){return e});xH||(xH=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(O5e(t))))});var W5e=Mm(Array.prototype.forEach),QJ=Mm(Array.prototype.pop),bT=Mm(Array.prototype.push),iw=Mm(String.prototype.toLowerCase),JJ=Mm(String.prototype.match),z1=Mm(String.prototype.replace),V5e=Mm(String.prototype.indexOf),H5e=Mm(String.prototype.trim),eb=Mm(RegExp.prototype.test),eee=z5e(TypeError);function Mm(r){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return lP(r,e,n)}}function z5e(r){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return xH(r,t)}}function Mr(r,e){XJ&&XJ(r,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var i=iw(n);i!==n&&(R5e(e)||(e[t]=i),n=i)}r[n]=!0}return r}function Jy(r){var e=B5e(null),t=void 0;for(t in r)lP(M5e,r,[t])&&(e[t]=r[t]);return e}function oO(r,e){for(;r!==null;){var t=F5e(r,e);if(t){if(t.get)return Mm(t.get);if(typeof t.value=="function")return Mm(t.value)}r=P5e(r)}function n(i){return console.warn("fallback value for",i),null}return n}var tee=Ud(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),x7=Ud(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D7=Ud(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U5e=Ud(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I7=Ud(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$5e=Ud(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nee=Ud(["#text"]),iee=Ud(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),T7=Ud(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ree=Ud(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),aO=Ud(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j5e=Hb(/\{\{[\s\S]*|[\s\S]*\}\}/gm),q5e=Hb(/<%[\s\S]*|[\s\S]*%>/gm),K5e=Hb(/^data-[\-\w.\u00B7-\uFFFF]/),G5e=Hb(/^aria-[\-\w]+$/),Y5e=Hb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z5e=Hb(/^(?:\w+script|data):/i),X5e=Hb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function H_(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var Q5e=function(){return typeof window>"u"?null:window},J5e=function(e,t){if((typeof e>"u"?"undefined":$T(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function ice(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q5e(),e=function(oe){return ice(oe)};if(e.version="2.3.1",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;var t=r.document,n=r.document,i=r.DocumentFragment,s=r.HTMLTemplateElement,o=r.Node,a=r.Element,l=r.NodeFilter,u=r.NamedNodeMap,d=u===void 0?r.NamedNodeMap||r.MozNamedAttrMap:u,h=r.Text,p=r.Comment,v=r.DOMParser,C=r.trustedTypes,S=a.prototype,E=oO(S,"cloneNode"),k=oO(S,"nextSibling"),D=oO(S,"childNodes"),O=oO(S,"parentNode");if(typeof s=="function"){var H=n.createElement("template");H.content&&H.content.ownerDocument&&(n=H.content.ownerDocument)}var V=J5e(C,t),X=V&&Pt?V.createHTML(""):"",$=n,P=$.implementation,z=$.createNodeIterator,M=$.createDocumentFragment,W=$.getElementsByTagName,I=t.importNode,R={};try{R=Jy(n).documentMode?n.documentMode:{}}catch{}var G={};e.isSupported=typeof O=="function"&&P&&typeof P.createHTMLDocument<"u"&&R!==9;var Z=j5e,ee=q5e,ne=K5e,ie=G5e,te=Z5e,B=X5e,K=Y5e,de=null,ae=Mr({},[].concat(H_(tee),H_(x7),H_(D7),H_(I7),H_(nee))),De=null,Me=Mr({},[].concat(H_(iee),H_(T7),H_(ree),H_(aO))),Qe=null,ct=null,Rt=!0,Ye=!0,gt=!1,Ut=!1,_t=!1,sn=!1,rn=!1,on=!1,qn=!1,Ft=!0,Pt=!1,At=!0,an=!0,ot=!1,Mt={},cn=null,bn=Mr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Pe=null,at=Mr({},["audio","video","img","source","image","track"]),rt=null,yt=Mr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ln="http://www.w3.org/1998/Math/MathML",Rn="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml",Tn=Xt,Tt=!1,tn=null,Qn=n.createElement("form"),oi=function(oe){tn&&tn===oe||((!oe||(typeof oe>"u"?"undefined":$T(oe))!=="object")&&(oe={}),oe=Jy(oe),de="ALLOWED_TAGS"in oe?Mr({},oe.ALLOWED_TAGS):ae,De="ALLOWED_ATTR"in oe?Mr({},oe.ALLOWED_ATTR):Me,rt="ADD_URI_SAFE_ATTR"in oe?Mr(Jy(yt),oe.ADD_URI_SAFE_ATTR):yt,Pe="ADD_DATA_URI_TAGS"in oe?Mr(Jy(at),oe.ADD_DATA_URI_TAGS):at,cn="FORBID_CONTENTS"in oe?Mr({},oe.FORBID_CONTENTS):bn,Qe="FORBID_TAGS"in oe?Mr({},oe.FORBID_TAGS):{},ct="FORBID_ATTR"in oe?Mr({},oe.FORBID_ATTR):{},Mt="USE_PROFILES"in oe?oe.USE_PROFILES:!1,Rt=oe.ALLOW_ARIA_ATTR!==!1,Ye=oe.ALLOW_DATA_ATTR!==!1,gt=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,Ut=oe.SAFE_FOR_TEMPLATES||!1,_t=oe.WHOLE_DOCUMENT||!1,on=oe.RETURN_DOM||!1,qn=oe.RETURN_DOM_FRAGMENT||!1,Ft=oe.RETURN_DOM_IMPORT!==!1,Pt=oe.RETURN_TRUSTED_TYPE||!1,rn=oe.FORCE_BODY||!1,At=oe.SANITIZE_DOM!==!1,an=oe.KEEP_CONTENT!==!1,ot=oe.IN_PLACE||!1,K=oe.ALLOWED_URI_REGEXP||K,Tn=oe.NAMESPACE||Xt,Ut&&(Ye=!1),qn&&(on=!0),Mt&&(de=Mr({},[].concat(H_(nee))),De=[],Mt.html===!0&&(Mr(de,tee),Mr(De,iee)),Mt.svg===!0&&(Mr(de,x7),Mr(De,T7),Mr(De,aO)),Mt.svgFilters===!0&&(Mr(de,D7),Mr(De,T7),Mr(De,aO)),Mt.mathMl===!0&&(Mr(de,I7),Mr(De,ree),Mr(De,aO))),oe.ADD_TAGS&&(de===ae&&(de=Jy(de)),Mr(de,oe.ADD_TAGS)),oe.ADD_ATTR&&(De===Me&&(De=Jy(De)),Mr(De,oe.ADD_ATTR)),oe.ADD_URI_SAFE_ATTR&&Mr(rt,oe.ADD_URI_SAFE_ATTR),oe.FORBID_CONTENTS&&(cn===bn&&(cn=Jy(cn)),Mr(cn,oe.FORBID_CONTENTS)),an&&(de["#text"]=!0),_t&&Mr(de,["html","head","body"]),de.table&&(Mr(de,["tbody"]),delete Qe.tbody),Ud&&Ud(oe),tn=oe)},lt=Mr({},["mi","mo","mn","ms","mtext"]),Bs=Mr({},["foreignobject","desc","title","annotation-xml"]),fi=Mr({},x7);Mr(fi,D7),Mr(fi,U5e);var Ai=Mr({},I7);Mr(Ai,$5e);var bs=function(oe){var Te=O(oe);(!Te||!Te.tagName)&&(Te={namespaceURI:Xt,tagName:"template"});var ut=iw(oe.tagName),et=iw(Te.tagName);if(oe.namespaceURI===Rn)return Te.namespaceURI===Xt?ut==="svg":Te.namespaceURI===ln?ut==="svg"&&(et==="annotation-xml"||lt[et]):!!fi[ut];if(oe.namespaceURI===ln)return Te.namespaceURI===Xt?ut==="math":Te.namespaceURI===Rn?ut==="math"&&Bs[et]:!!Ai[ut];if(oe.namespaceURI===Xt){if(Te.namespaceURI===Rn&&!Bs[et]||Te.namespaceURI===ln&&!lt[et])return!1;var Ot=Mr({},["title","style","font","a","script"]);return!Ai[ut]&&(Ot[ut]||!fi[ut])}return!1},Kn=function(oe){bT(e.removed,{element:oe});try{oe.parentNode.removeChild(oe)}catch{try{oe.outerHTML=X}catch{oe.remove()}}},Pr=function(oe,Te){try{bT(e.removed,{attribute:Te.getAttributeNode(oe),from:Te})}catch{bT(e.removed,{attribute:null,from:Te})}if(Te.removeAttribute(oe),oe==="is"&&!De[oe])if(on||qn)try{Kn(Te)}catch{}else try{Te.setAttribute(oe,"")}catch{}},Sa=function(oe){var Te=void 0,ut=void 0;if(rn)oe="<remove></remove>"+oe;else{var et=JJ(oe,/^[\r\n\t ]+/);ut=et&&et[0]}var Ot=V?V.createHTML(oe):oe;if(Tn===Xt)try{Te=new v().parseFromString(Ot,"text/html")}catch{}if(!Te||!Te.documentElement){Te=P.createDocument(Tn,"template",null);try{Te.documentElement.innerHTML=Tt?"":Ot}catch{}}var Dn=Te.body||Te.documentElement;return oe&&ut&&Dn.insertBefore(n.createTextNode(ut),Dn.childNodes[0]||null),Tn===Xt?W.call(Te,_t?"html":"body")[0]:_t?Te.documentElement:Dn},Oi=function(oe){return z.call(oe.ownerDocument||oe,oe,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},vt=function(oe){return oe instanceof h||oe instanceof p?!1:typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof d)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"},vo=function(oe){return(typeof o>"u"?"undefined":$T(o))==="object"?oe instanceof o:oe&&(typeof oe>"u"?"undefined":$T(oe))==="object"&&typeof oe.nodeType=="number"&&typeof oe.nodeName=="string"},Ge=function(oe,Te,ut){G[oe]&&W5e(G[oe],function(et){et.call(e,Te,ut,tn)})},Ve=function(oe){var Te=void 0;if(Ge("beforeSanitizeElements",oe,null),vt(oe)||JJ(oe.nodeName,/[\u0080-\uFFFF]/))return Kn(oe),!0;var ut=iw(oe.nodeName);if(Ge("uponSanitizeElement",oe,{tagName:ut,allowedTags:de}),!vo(oe.firstElementChild)&&(!vo(oe.content)||!vo(oe.content.firstElementChild))&&eb(/<[/\w]/g,oe.innerHTML)&&eb(/<[/\w]/g,oe.textContent)||ut==="select"&&eb(/<template/i,oe.innerHTML))return Kn(oe),!0;if(!de[ut]||Qe[ut]){if(an&&!cn[ut]){var et=O(oe)||oe.parentNode,Ot=D(oe)||oe.childNodes;if(Ot&&et)for(var Dn=Ot.length,N=Dn-1;N>=0;--N)et.insertBefore(E(Ot[N],!0),k(oe))}return Kn(oe),!0}return oe instanceof a&&!bs(oe)||(ut==="noscript"||ut==="noembed")&&eb(/<\/no(script|embed)/i,oe.innerHTML)?(Kn(oe),!0):(Ut&&oe.nodeType===3&&(Te=oe.textContent,Te=z1(Te,Z," "),Te=z1(Te,ee," "),oe.textContent!==Te&&(bT(e.removed,{element:oe.cloneNode()}),oe.textContent=Te)),Ge("afterSanitizeElements",oe,null),!1)},Ze=function(oe,Te,ut){if(At&&(Te==="id"||Te==="name")&&(ut in n||ut in Qn))return!1;if(!(Ye&&!ct[Te]&&eb(ne,Te))){if(!(Rt&&eb(ie,Te))){if(!De[Te]||ct[Te])return!1;if(!rt[Te]){if(!eb(K,z1(ut,B,""))){if(!((Te==="src"||Te==="xlink:href"||Te==="href")&&oe!=="script"&&V5e(ut,"data:")===0&&Pe[oe])){if(!(gt&&!eb(te,z1(ut,B,"")))){if(ut)return!1}}}}}}return!0},ge=function(oe){var Te=void 0,ut=void 0,et=void 0,Ot=void 0;Ge("beforeSanitizeAttributes",oe,null);var Dn=oe.attributes;if(Dn){var N={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:De};for(Ot=Dn.length;Ot--;){Te=Dn[Ot];var q=Te,le=q.name,fe=q.namespaceURI;if(ut=H5e(Te.value),et=iw(le),N.attrName=et,N.attrValue=ut,N.keepAttr=!0,N.forceKeepAttr=void 0,Ge("uponSanitizeAttribute",oe,N),ut=N.attrValue,!N.forceKeepAttr&&(Pr(le,oe),!!N.keepAttr)){if(eb(/\/>/i,ut)){Pr(le,oe);continue}Ut&&(ut=z1(ut,Z," "),ut=z1(ut,ee," "));var xe=oe.nodeName.toLowerCase();if(Ze(xe,et,ut))try{fe?oe.setAttributeNS(fe,le,ut):oe.setAttribute(le,ut),QJ(e.removed)}catch{}}}Ge("afterSanitizeAttributes",oe,null)}},me=function Le(oe){var Te=void 0,ut=Oi(oe);for(Ge("beforeSanitizeShadowDOM",oe,null);Te=ut.nextNode();)Ge("uponSanitizeShadowNode",Te,null),!Ve(Te)&&(Te.content instanceof i&&Le(Te.content),ge(Te));Ge("afterSanitizeShadowDOM",oe,null)};return e.sanitize=function(Le,oe){var Te=void 0,ut=void 0,et=void 0,Ot=void 0,Dn=void 0;if(Tt=!Le,Tt&&(Le="<!-->"),typeof Le!="string"&&!vo(Le)){if(typeof Le.toString!="function")throw eee("toString is not a function");if(Le=Le.toString(),typeof Le!="string")throw eee("dirty is not a string, aborting")}if(!e.isSupported){if($T(r.toStaticHTML)==="object"||typeof r.toStaticHTML=="function"){if(typeof Le=="string")return r.toStaticHTML(Le);if(vo(Le))return r.toStaticHTML(Le.outerHTML)}return Le}if(sn||oi(oe),e.removed=[],typeof Le=="string"&&(ot=!1),!ot)if(Le instanceof o)Te=Sa("<!---->"),ut=Te.ownerDocument.importNode(Le,!0),ut.nodeType===1&&ut.nodeName==="BODY"||ut.nodeName==="HTML"?Te=ut:Te.appendChild(ut);else{if(!on&&!Ut&&!_t&&Le.indexOf("<")===-1)return V&&Pt?V.createHTML(Le):Le;if(Te=Sa(Le),!Te)return on?null:X}Te&&rn&&Kn(Te.firstChild);for(var N=Oi(ot?Le:Te);et=N.nextNode();)et.nodeType===3&&et===Ot||Ve(et)||(et.content instanceof i&&me(et.content),ge(et),Ot=et);if(Ot=null,ot)return Le;if(on){if(qn)for(Dn=M.call(Te.ownerDocument);Te.firstChild;)Dn.appendChild(Te.firstChild);else Dn=Te;return Ft&&(Dn=I.call(t,Dn,!0)),Dn}var q=_t?Te.outerHTML:Te.innerHTML;return Ut&&(q=z1(q,Z," "),q=z1(q,ee," ")),V&&Pt?V.createHTML(q):q},e.setConfig=function(Le){oi(Le),sn=!0},e.clearConfig=function(){tn=null,sn=!1},e.isValidAttribute=function(Le,oe,Te){tn||oi({});var ut=iw(Le),et=iw(oe);return Ze(ut,et,Te)},e.addHook=function(Le,oe){typeof oe=="function"&&(G[Le]=G[Le]||[],bT(G[Le],oe))},e.removeHook=function(Le){G[Le]&&QJ(G[Le])},e.removeHooks=function(Le){G[Le]&&(G[Le]=[])},e.removeAllHooks=function(){G={}},e}var Qv=ice();Qv.version;Qv.isSupported;const eBe=Qv.sanitize;Qv.setConfig;Qv.clearConfig;Qv.isValidAttribute;const see=Qv.addHook,oee=Qv.removeHook;Qv.removeHooks;Qv.removeAllHooks;let Wm;(function(){function r(e){Wm=e()}r.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof r=="function"&&r.amd?r(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(Ge,Ve){for(var Ze=0;Ze<Ve.length;Ze++){var ge=Ve[Ze];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(Ge,ge.key,ge)}}function t(Ge,Ve,Ze){return Ve&&e(Ge.prototype,Ve),Ze&&e(Ge,Ze),Ge}function n(Ge,Ve){if(Ge){if(typeof Ge=="string")return i(Ge,Ve);var Ze=Object.prototype.toString.call(Ge).slice(8,-1);if(Ze==="Object"&&Ge.constructor&&(Ze=Ge.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(Ge);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return i(Ge,Ve)}}function i(Ge,Ve){(Ve==null||Ve>Ge.length)&&(Ve=Ge.length);for(var Ze=0,ge=new Array(Ve);Ze<Ve;Ze++)ge[Ze]=Ge[Ze];return ge}function s(Ge,Ve){var Ze=typeof Symbol<"u"&&Ge[Symbol.iterator]||Ge["@@iterator"];if(Ze)return(Ze=Ze.call(Ge)).next.bind(Ze);if(Array.isArray(Ge)||(Ze=n(Ge))||Ve&&Ge&&typeof Ge.length=="number"){Ze&&(Ge=Ze);var ge=0;return function(){return ge>=Ge.length?{done:!0}:{done:!1,value:Ge[ge++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(Ge){o.exports.defaults=Ge}o.exports={defaults:a(),getDefaults:a,changeDefaults:l};var u=/[&<>"']/,d=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},C=function(Ve){return v[Ve]};function S(Ge,Ve){if(Ve){if(u.test(Ge))return Ge.replace(d,C)}else if(h.test(Ge))return Ge.replace(p,C);return Ge}var E=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function k(Ge){return Ge.replace(E,function(Ve,Ze){return Ze=Ze.toLowerCase(),Ze==="colon"?":":Ze.charAt(0)==="#"?Ze.charAt(1)==="x"?String.fromCharCode(parseInt(Ze.substring(2),16)):String.fromCharCode(+Ze.substring(1)):""})}var D=/(^|[^\[])\^/g;function O(Ge,Ve){Ge=Ge.source||Ge,Ve=Ve||"";var Ze={replace:function(me,Le){return Le=Le.source||Le,Le=Le.replace(D,"$1"),Ge=Ge.replace(me,Le),Ze},getRegex:function(){return new RegExp(Ge,Ve)}};return Ze}var H=/[^\w:]/g,V=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function X(Ge,Ve,Ze){if(Ge){var ge;try{ge=decodeURIComponent(k(Ze)).replace(H,"").toLowerCase()}catch{return null}if(ge.indexOf("javascript:")===0||ge.indexOf("vbscript:")===0||ge.indexOf("data:")===0)return null}Ve&&!V.test(Ze)&&(Ze=W(Ve,Ze));try{Ze=encodeURI(Ze).replace(/%25/g,"%")}catch{return null}return Ze}var $={},P=/^[^:]+:\/*[^/]*$/,z=/^([^:]+:)[\s\S]*$/,M=/^([^:]+:\/*[^/]*)[\s\S]*$/;function W(Ge,Ve){$[" "+Ge]||(P.test(Ge)?$[" "+Ge]=Ge+"/":$[" "+Ge]=Z(Ge,"/",!0)),Ge=$[" "+Ge];var Ze=Ge.indexOf(":")===-1;return Ve.substring(0,2)==="//"?Ze?Ve:Ge.replace(z,"$1")+Ve:Ve.charAt(0)==="/"?Ze?Ve:Ge.replace(M,"$1")+Ve:Ge+Ve}var I={exec:function(){}};function R(Ge){for(var Ve=1,Ze,ge;Ve<arguments.length;Ve++){Ze=arguments[Ve];for(ge in Ze)Object.prototype.hasOwnProperty.call(Ze,ge)&&(Ge[ge]=Ze[ge])}return Ge}function G(Ge,Ve){var Ze=Ge.replace(/\|/g,function(Le,oe,Te){for(var ut=!1,et=oe;--et>=0&&Te[et]==="\\";)ut=!ut;return ut?"|":" |"}),ge=Ze.split(/ \|/),me=0;if(ge[0].trim()||ge.shift(),ge[ge.length-1].trim()||ge.pop(),ge.length>Ve)ge.splice(Ve);else for(;ge.length<Ve;)ge.push("");for(;me<ge.length;me++)ge[me]=ge[me].trim().replace(/\\\|/g,"|");return ge}function Z(Ge,Ve,Ze){var ge=Ge.length;if(ge===0)return"";for(var me=0;me<ge;){var Le=Ge.charAt(ge-me-1);if(Le===Ve&&!Ze)me++;else if(Le!==Ve&&Ze)me++;else break}return Ge.substr(0,ge-me)}function ee(Ge,Ve){if(Ge.indexOf(Ve[1])===-1)return-1;for(var Ze=Ge.length,ge=0,me=0;me<Ze;me++)if(Ge[me]==="\\")me++;else if(Ge[me]===Ve[0])ge++;else if(Ge[me]===Ve[1]&&(ge--,ge<0))return me;return-1}function ne(Ge){Ge&&Ge.sanitize&&!Ge.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function ie(Ge,Ve){if(Ve<1)return"";for(var Ze="";Ve>1;)Ve&1&&(Ze+=Ge),Ve>>=1,Ge+=Ge;return Ze+Ge}var te={escape:S,unescape:k,edit:O,cleanUrl:X,resolveUrl:W,noopTest:I,merge:R,splitCells:G,rtrim:Z,findClosingBracket:ee,checkSanitizeDeprecation:ne,repeatString:ie},B=o.exports.defaults,K=te.rtrim,de=te.splitCells,ae=te.escape,De=te.findClosingBracket;function Me(Ge,Ve,Ze,ge){var me=Ve.href,Le=Ve.title?ae(Ve.title):null,oe=Ge[1].replace(/\\([\[\]])/g,"$1");if(Ge[0].charAt(0)!=="!"){ge.state.inLink=!0;var Te={type:"link",raw:Ze,href:me,title:Le,text:oe,tokens:ge.inlineTokens(oe,[])};return ge.state.inLink=!1,Te}else return{type:"image",raw:Ze,href:me,title:Le,text:ae(oe)}}function Qe(Ge,Ve){var Ze=Ge.match(/^(\s+)(?:```)/);if(Ze===null)return Ve;var ge=Ze[1];return Ve.split(`
`).map(function(me){var Le=me.match(/^\s+/);if(Le===null)return me;var oe=Le[0];return oe.length>=ge.length?me.slice(ge.length):me}).join(`
`)}var ct=function(){function Ge(Ze){this.options=Ze||B}var Ve=Ge.prototype;return Ve.space=function(ge){var me=this.rules.block.newline.exec(ge);if(me)return me[0].length>1?{type:"space",raw:me[0]}:{raw:`
`}},Ve.code=function(ge){var me=this.rules.block.code.exec(ge);if(me){var Le=me[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:me[0],codeBlockStyle:"indented",text:this.options.pedantic?Le:K(Le,`
`)}}},Ve.fences=function(ge){var me=this.rules.block.fences.exec(ge);if(me){var Le=me[0],oe=Qe(Le,me[3]||"");return{type:"code",raw:Le,lang:me[2]?me[2].trim():me[2],text:oe}}},Ve.heading=function(ge){var me=this.rules.block.heading.exec(ge);if(me){var Le=me[2].trim();if(/#$/.test(Le)){var oe=K(Le,"#");(this.options.pedantic||!oe||/ $/.test(oe))&&(Le=oe.trim())}var Te={type:"heading",raw:me[0],depth:me[1].length,text:Le,tokens:[]};return this.lexer.inline(Te.text,Te.tokens),Te}},Ve.hr=function(ge){var me=this.rules.block.hr.exec(ge);if(me)return{type:"hr",raw:me[0]}},Ve.blockquote=function(ge){var me=this.rules.block.blockquote.exec(ge);if(me){var Le=me[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:me[0],tokens:this.lexer.blockTokens(Le,[]),text:Le}}},Ve.list=function(ge){var me=this.rules.block.list.exec(ge);if(me){var Le,oe,Te,ut,et,Ot,Dn,N,q,le,fe=me[1].trim(),xe=fe.length>1,be={type:"list",raw:"",ordered:xe,start:xe?+fe.slice(0,-1):"",loose:!1,items:[]};fe=xe?"\\d{1,9}\\"+fe.slice(-1):"\\"+fe,this.options.pedantic&&(fe=xe?fe:"[*+-]");for(var qe=new RegExp("^( {0,3}"+fe+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");ge&&!(this.rules.block.hr.test(ge)||!(me=qe.exec(ge)));){q=me[2].split(`
`),this.options.pedantic?(ut=2,le=q[0].trimLeft()):(ut=me[2].search(/[^ ]/),ut=me[1].length+(ut>4?1:ut),le=q[0].slice(ut-me[1].length)),Ot=!1,Le=me[0],!q[0]&&/^ *$/.test(q[1])&&(Le=me[1]+q.slice(0,2).join(`
`)+`
`,be.loose=!0,q=[]);var it=new RegExp("^ {0,"+Math.min(3,ut-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(et=1;et<q.length;et++){if(N=q[et],this.options.pedantic&&(N=N.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),it.test(N)){Le=me[1]+q.slice(0,et).join(`
`)+`
`;break}if(!Ot){N.trim()||(Ot=!0),N.search(/[^ ]/)>=ut?le+=`
`+N.slice(ut):le+=`
`+N;continue}if(N.search(/[^ ]/)>=ut||!N.trim()){le+=`
`+N.slice(ut);continue}else{Le=me[1]+q.slice(0,et).join(`
`)+`
`;break}}be.loose||(Dn?be.loose=!0:/\n *\n *$/.test(Le)&&(Dn=!0)),this.options.gfm&&(oe=/^\[[ xX]\] /.exec(le),oe&&(Te=oe[0]!=="[ ] ",le=le.replace(/^\[[ xX]\] +/,""))),be.items.push({type:"list_item",raw:Le,task:!!oe,checked:Te,loose:!1,text:le}),be.raw+=Le,ge=ge.slice(Le.length)}be.items[be.items.length-1].raw=Le.trimRight(),be.items[be.items.length-1].text=le.trimRight(),be.raw=be.raw.trimRight();var wt=be.items.length;for(et=0;et<wt;et++)this.lexer.state.top=!1,be.items[et].tokens=this.lexer.blockTokens(be.items[et].text,[]),be.items[et].tokens.some(function(kt){return kt.type==="space"})&&(be.loose=!0,be.items[et].loose=!0);return be}},Ve.html=function(ge){var me=this.rules.block.html.exec(ge);if(me){var Le={type:"html",raw:me[0],pre:!this.options.sanitizer&&(me[1]==="pre"||me[1]==="script"||me[1]==="style"),text:me[0]};return this.options.sanitize&&(Le.type="paragraph",Le.text=this.options.sanitizer?this.options.sanitizer(me[0]):ae(me[0]),Le.tokens=[],this.lexer.inline(Le.text,Le.tokens)),Le}},Ve.def=function(ge){var me=this.rules.block.def.exec(ge);if(me){me[3]&&(me[3]=me[3].substring(1,me[3].length-1));var Le=me[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:Le,raw:me[0],href:me[2],title:me[3]}}},Ve.table=function(ge){var me=this.rules.block.table.exec(ge);if(me){var Le={type:"table",header:de(me[1]).map(function(Dn){return{text:Dn}}),align:me[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:me[3]?me[3].replace(/\n$/,"").split(`
`):[]};if(Le.header.length===Le.align.length){Le.raw=me[0];var oe=Le.align.length,Te,ut,et,Ot;for(Te=0;Te<oe;Te++)/^ *-+: *$/.test(Le.align[Te])?Le.align[Te]="right":/^ *:-+: *$/.test(Le.align[Te])?Le.align[Te]="center":/^ *:-+ *$/.test(Le.align[Te])?Le.align[Te]="left":Le.align[Te]=null;for(oe=Le.rows.length,Te=0;Te<oe;Te++)Le.rows[Te]=de(Le.rows[Te],Le.header.length).map(function(Dn){return{text:Dn}});for(oe=Le.header.length,ut=0;ut<oe;ut++)Le.header[ut].tokens=[],this.lexer.inlineTokens(Le.header[ut].text,Le.header[ut].tokens);for(oe=Le.rows.length,ut=0;ut<oe;ut++)for(Ot=Le.rows[ut],et=0;et<Ot.length;et++)Ot[et].tokens=[],this.lexer.inlineTokens(Ot[et].text,Ot[et].tokens);return Le}}},Ve.lheading=function(ge){var me=this.rules.block.lheading.exec(ge);if(me){var Le={type:"heading",raw:me[0],depth:me[2].charAt(0)==="="?1:2,text:me[1],tokens:[]};return this.lexer.inline(Le.text,Le.tokens),Le}},Ve.paragraph=function(ge){var me=this.rules.block.paragraph.exec(ge);if(me){var Le={type:"paragraph",raw:me[0],text:me[1].charAt(me[1].length-1)===`
`?me[1].slice(0,-1):me[1],tokens:[]};return this.lexer.inline(Le.text,Le.tokens),Le}},Ve.text=function(ge){var me=this.rules.block.text.exec(ge);if(me){var Le={type:"text",raw:me[0],text:me[0],tokens:[]};return this.lexer.inline(Le.text,Le.tokens),Le}},Ve.escape=function(ge){var me=this.rules.inline.escape.exec(ge);if(me)return{type:"escape",raw:me[0],text:ae(me[1])}},Ve.tag=function(ge){var me=this.rules.inline.tag.exec(ge);if(me)return!this.lexer.state.inLink&&/^<a /i.test(me[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(me[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(me[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(me[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:me[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(me[0]):ae(me[0]):me[0]}},Ve.link=function(ge){var me=this.rules.inline.link.exec(ge);if(me){var Le=me[2].trim();if(!this.options.pedantic&&/^</.test(Le)){if(!/>$/.test(Le))return;var oe=K(Le.slice(0,-1),"\\");if((Le.length-oe.length)%2===0)return}else{var Te=De(me[2],"()");if(Te>-1){var ut=me[0].indexOf("!")===0?5:4,et=ut+me[1].length+Te;me[2]=me[2].substring(0,Te),me[0]=me[0].substring(0,et).trim(),me[3]=""}}var Ot=me[2],Dn="";if(this.options.pedantic){var N=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Ot);N&&(Ot=N[1],Dn=N[3])}else Dn=me[3]?me[3].slice(1,-1):"";return Ot=Ot.trim(),/^</.test(Ot)&&(this.options.pedantic&&!/>$/.test(Le)?Ot=Ot.slice(1):Ot=Ot.slice(1,-1)),Me(me,{href:Ot&&Ot.replace(this.rules.inline._escapes,"$1"),title:Dn&&Dn.replace(this.rules.inline._escapes,"$1")},me[0],this.lexer)}},Ve.reflink=function(ge,me){var Le;if((Le=this.rules.inline.reflink.exec(ge))||(Le=this.rules.inline.nolink.exec(ge))){var oe=(Le[2]||Le[1]).replace(/\s+/g," ");if(oe=me[oe.toLowerCase()],!oe||!oe.href){var Te=Le[0].charAt(0);return{type:"text",raw:Te,text:Te}}return Me(Le,oe,Le[0],this.lexer)}},Ve.emStrong=function(ge,me,Le){Le===void 0&&(Le="");var oe=this.rules.inline.emStrong.lDelim.exec(ge);if(oe&&!(oe[3]&&Le.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Te=oe[1]||oe[2]||"";if(!Te||Te&&(Le===""||this.rules.inline.punctuation.exec(Le))){var ut=oe[0].length-1,et,Ot,Dn=ut,N=0,q=oe[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(q.lastIndex=0,me=me.slice(-1*ge.length+ut);(oe=q.exec(me))!=null;)if(et=oe[1]||oe[2]||oe[3]||oe[4]||oe[5]||oe[6],!!et){if(Ot=et.length,oe[3]||oe[4]){Dn+=Ot;continue}else if((oe[5]||oe[6])&&ut%3&&!((ut+Ot)%3)){N+=Ot;continue}if(Dn-=Ot,!(Dn>0)){if(Ot=Math.min(Ot,Ot+Dn+N),Math.min(ut,Ot)%2){var le=ge.slice(1,ut+oe.index+Ot);return{type:"em",raw:ge.slice(0,ut+oe.index+Ot+1),text:le,tokens:this.lexer.inlineTokens(le,[])}}var fe=ge.slice(2,ut+oe.index+Ot-1);return{type:"strong",raw:ge.slice(0,ut+oe.index+Ot+1),text:fe,tokens:this.lexer.inlineTokens(fe,[])}}}}}},Ve.codespan=function(ge){var me=this.rules.inline.code.exec(ge);if(me){var Le=me[2].replace(/\n/g," "),oe=/[^ ]/.test(Le),Te=/^ /.test(Le)&&/ $/.test(Le);return oe&&Te&&(Le=Le.substring(1,Le.length-1)),Le=ae(Le,!0),{type:"codespan",raw:me[0],text:Le}}},Ve.br=function(ge){var me=this.rules.inline.br.exec(ge);if(me)return{type:"br",raw:me[0]}},Ve.del=function(ge){var me=this.rules.inline.del.exec(ge);if(me)return{type:"del",raw:me[0],text:me[2],tokens:this.lexer.inlineTokens(me[2],[])}},Ve.autolink=function(ge,me){var Le=this.rules.inline.autolink.exec(ge);if(Le){var oe,Te;return Le[2]==="@"?(oe=ae(this.options.mangle?me(Le[1]):Le[1]),Te="mailto:"+oe):(oe=ae(Le[1]),Te=oe),{type:"link",raw:Le[0],text:oe,href:Te,tokens:[{type:"text",raw:oe,text:oe}]}}},Ve.url=function(ge,me){var Le;if(Le=this.rules.inline.url.exec(ge)){var oe,Te;if(Le[2]==="@")oe=ae(this.options.mangle?me(Le[0]):Le[0]),Te="mailto:"+oe;else{var ut;do ut=Le[0],Le[0]=this.rules.inline._backpedal.exec(Le[0])[0];while(ut!==Le[0]);oe=ae(Le[0]),Le[1]==="www."?Te="http://"+oe:Te=oe}return{type:"link",raw:Le[0],text:oe,href:Te,tokens:[{type:"text",raw:oe,text:oe}]}}},Ve.inlineText=function(ge,me){var Le=this.rules.inline.text.exec(ge);if(Le){var oe;return this.lexer.state.inRawBlock?oe=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Le[0]):ae(Le[0]):Le[0]:oe=ae(this.options.smartypants?me(Le[0]):Le[0]),{type:"text",raw:Le[0],text:oe}}},Ge}(),Rt=te.noopTest,Ye=te.edit,gt=te.merge,Ut={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:Rt,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ut._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,Ut._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Ut.def=Ye(Ut.def).replace("label",Ut._label).replace("title",Ut._title).getRegex(),Ut.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ut.listItemStart=Ye(/^( *)(bull) */).replace("bull",Ut.bullet).getRegex(),Ut.list=Ye(Ut.list).replace(/bull/g,Ut.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ut.def.source+")").getRegex(),Ut._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ut._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ut.html=Ye(Ut.html,"i").replace("comment",Ut._comment).replace("tag",Ut._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ut.paragraph=Ye(Ut._paragraph).replace("hr",Ut.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ut._tag).getRegex(),Ut.blockquote=Ye(Ut.blockquote).replace("paragraph",Ut.paragraph).getRegex(),Ut.normal=gt({},Ut),Ut.gfm=gt({},Ut.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Ut.gfm.table=Ye(Ut.gfm.table).replace("hr",Ut.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ut._tag).getRegex(),Ut.pedantic=gt({},Ut.normal,{html:Ye(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ut._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Rt,paragraph:Ye(Ut.normal._paragraph).replace("hr",Ut.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ut.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var _t={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Rt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Rt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};_t._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",_t.punctuation=Ye(_t.punctuation).replace(/punctuation/g,_t._punctuation).getRegex(),_t.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,_t.escapedEmSt=/\\\*|\\_/g,_t._comment=Ye(Ut._comment).replace("(?:-->|$)","-->").getRegex(),_t.emStrong.lDelim=Ye(_t.emStrong.lDelim).replace(/punct/g,_t._punctuation).getRegex(),_t.emStrong.rDelimAst=Ye(_t.emStrong.rDelimAst,"g").replace(/punct/g,_t._punctuation).getRegex(),_t.emStrong.rDelimUnd=Ye(_t.emStrong.rDelimUnd,"g").replace(/punct/g,_t._punctuation).getRegex(),_t._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,_t._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,_t._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,_t.autolink=Ye(_t.autolink).replace("scheme",_t._scheme).replace("email",_t._email).getRegex(),_t._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,_t.tag=Ye(_t.tag).replace("comment",_t._comment).replace("attribute",_t._attribute).getRegex(),_t._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_t._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,_t._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,_t.link=Ye(_t.link).replace("label",_t._label).replace("href",_t._href).replace("title",_t._title).getRegex(),_t.reflink=Ye(_t.reflink).replace("label",_t._label).getRegex(),_t.reflinkSearch=Ye(_t.reflinkSearch,"g").replace("reflink",_t.reflink).replace("nolink",_t.nolink).getRegex(),_t.normal=gt({},_t),_t.pedantic=gt({},_t.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ye(/^!?\[(label)\]\((.*?)\)/).replace("label",_t._label).getRegex(),reflink:Ye(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_t._label).getRegex()}),_t.gfm=gt({},_t.normal,{escape:Ye(_t.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),_t.gfm.url=Ye(_t.gfm.url,"i").replace("email",_t.gfm._extended_email).getRegex(),_t.breaks=gt({},_t.gfm,{br:Ye(_t.br).replace("{2,}","*").getRegex(),text:Ye(_t.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var sn={block:Ut,inline:_t},rn=ct,on=o.exports.defaults,qn=sn.block,Ft=sn.inline,Pt=te.repeatString;function At(Ge){return Ge.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function an(Ge){var Ve="",Ze,ge,me=Ge.length;for(Ze=0;Ze<me;Ze++)ge=Ge.charCodeAt(Ze),Math.random()>.5&&(ge="x"+ge.toString(16)),Ve+="&#"+ge+";";return Ve}var ot=function(){function Ge(Ze){this.tokens=[],this.tokens.links=Object.create(null),this.options=Ze||on,this.options.tokenizer=this.options.tokenizer||new rn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var ge={block:qn.normal,inline:Ft.normal};this.options.pedantic?(ge.block=qn.pedantic,ge.inline=Ft.pedantic):this.options.gfm&&(ge.block=qn.gfm,this.options.breaks?ge.inline=Ft.breaks:ge.inline=Ft.gfm),this.tokenizer.rules=ge}Ge.lex=function(ge,me){var Le=new Ge(me);return Le.lex(ge)},Ge.lexInline=function(ge,me){var Le=new Ge(me);return Le.inlineTokens(ge)};var Ve=Ge.prototype;return Ve.lex=function(ge){ge=ge.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(ge,this.tokens);for(var me;me=this.inlineQueue.shift();)this.inlineTokens(me.src,me.tokens);return this.tokens},Ve.blockTokens=function(ge,me){var Le=this;me===void 0&&(me=[]),this.options.pedantic&&(ge=ge.replace(/^ +$/gm,""));for(var oe,Te,ut,et;ge;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Dn){return(oe=Dn.call({lexer:Le},ge,me))?(ge=ge.substring(oe.raw.length),me.push(oe),!0):!1}))){if(oe=this.tokenizer.space(ge)){ge=ge.substring(oe.raw.length),oe.type&&me.push(oe);continue}if(oe=this.tokenizer.code(ge)){ge=ge.substring(oe.raw.length),Te=me[me.length-1],Te&&(Te.type==="paragraph"||Te.type==="text")?(Te.raw+=`
`+oe.raw,Te.text+=`
`+oe.text,this.inlineQueue[this.inlineQueue.length-1].src=Te.text):me.push(oe);continue}if(oe=this.tokenizer.fences(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.heading(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.hr(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.blockquote(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.list(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.html(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.def(ge)){ge=ge.substring(oe.raw.length),Te=me[me.length-1],Te&&(Te.type==="paragraph"||Te.type==="text")?(Te.raw+=`
`+oe.raw,Te.text+=`
`+oe.raw,this.inlineQueue[this.inlineQueue.length-1].src=Te.text):this.tokens.links[oe.tag]||(this.tokens.links[oe.tag]={href:oe.href,title:oe.title});continue}if(oe=this.tokenizer.table(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.lheading(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(ut=ge,this.options.extensions&&this.options.extensions.startBlock&&function(){var Dn=1/0,N=ge.slice(1),q=void 0;Le.options.extensions.startBlock.forEach(function(le){q=le.call({lexer:this},N),typeof q=="number"&&q>=0&&(Dn=Math.min(Dn,q))}),Dn<1/0&&Dn>=0&&(ut=ge.substring(0,Dn+1))}(),this.state.top&&(oe=this.tokenizer.paragraph(ut))){Te=me[me.length-1],et&&Te.type==="paragraph"?(Te.raw+=`
`+oe.raw,Te.text+=`
`+oe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Te.text):me.push(oe),et=ut.length!==ge.length,ge=ge.substring(oe.raw.length);continue}if(oe=this.tokenizer.text(ge)){ge=ge.substring(oe.raw.length),Te=me[me.length-1],Te&&Te.type==="text"?(Te.raw+=`
`+oe.raw,Te.text+=`
`+oe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Te.text):me.push(oe);continue}if(ge){var Ot="Infinite loop on byte: "+ge.charCodeAt(0);if(this.options.silent){console.error(Ot);break}else throw new Error(Ot)}}return this.state.top=!0,me},Ve.inline=function(ge,me){this.inlineQueue.push({src:ge,tokens:me})},Ve.inlineTokens=function(ge,me){var Le=this;me===void 0&&(me=[]);var oe,Te,ut,et=ge,Ot,Dn,N;if(this.tokens.links){var q=Object.keys(this.tokens.links);if(q.length>0)for(;(Ot=this.tokenizer.rules.inline.reflinkSearch.exec(et))!=null;)q.includes(Ot[0].slice(Ot[0].lastIndexOf("[")+1,-1))&&(et=et.slice(0,Ot.index)+"["+Pt("a",Ot[0].length-2)+"]"+et.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ot=this.tokenizer.rules.inline.blockSkip.exec(et))!=null;)et=et.slice(0,Ot.index)+"["+Pt("a",Ot[0].length-2)+"]"+et.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ot=this.tokenizer.rules.inline.escapedEmSt.exec(et))!=null;)et=et.slice(0,Ot.index)+"++"+et.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;ge;)if(Dn||(N=""),Dn=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(fe){return(oe=fe.call({lexer:Le},ge,me))?(ge=ge.substring(oe.raw.length),me.push(oe),!0):!1}))){if(oe=this.tokenizer.escape(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.tag(ge)){ge=ge.substring(oe.raw.length),Te=me[me.length-1],Te&&oe.type==="text"&&Te.type==="text"?(Te.raw+=oe.raw,Te.text+=oe.text):me.push(oe);continue}if(oe=this.tokenizer.link(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.reflink(ge,this.tokens.links)){ge=ge.substring(oe.raw.length),Te=me[me.length-1],Te&&oe.type==="text"&&Te.type==="text"?(Te.raw+=oe.raw,Te.text+=oe.text):me.push(oe);continue}if(oe=this.tokenizer.emStrong(ge,et,N)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.codespan(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.br(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.del(ge)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(oe=this.tokenizer.autolink(ge,an)){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(!this.state.inLink&&(oe=this.tokenizer.url(ge,an))){ge=ge.substring(oe.raw.length),me.push(oe);continue}if(ut=ge,this.options.extensions&&this.options.extensions.startInline&&function(){var fe=1/0,xe=ge.slice(1),be=void 0;Le.options.extensions.startInline.forEach(function(qe){be=qe.call({lexer:this},xe),typeof be=="number"&&be>=0&&(fe=Math.min(fe,be))}),fe<1/0&&fe>=0&&(ut=ge.substring(0,fe+1))}(),oe=this.tokenizer.inlineText(ut,At)){ge=ge.substring(oe.raw.length),oe.raw.slice(-1)!=="_"&&(N=oe.raw.slice(-1)),Dn=!0,Te=me[me.length-1],Te&&Te.type==="text"?(Te.raw+=oe.raw,Te.text+=oe.text):me.push(oe);continue}if(ge){var le="Infinite loop on byte: "+ge.charCodeAt(0);if(this.options.silent){console.error(le);break}else throw new Error(le)}}return me},t(Ge,null,[{key:"rules",get:function(){return{block:qn,inline:Ft}}}]),Ge}(),Mt=o.exports.defaults,cn=te.cleanUrl,bn=te.escape,Pe=function(){function Ge(Ze){this.options=Ze||Mt}var Ve=Ge.prototype;return Ve.code=function(ge,me,Le){var oe=(me||"").match(/\S*/)[0];if(this.options.highlight){var Te=this.options.highlight(ge,oe);Te!=null&&Te!==ge&&(Le=!0,ge=Te)}return ge=ge.replace(/\n$/,"")+`
`,oe?'<pre><code class="'+this.options.langPrefix+bn(oe,!0)+'">'+(Le?ge:bn(ge,!0))+`</code></pre>
`:"<pre><code>"+(Le?ge:bn(ge,!0))+`</code></pre>
`},Ve.blockquote=function(ge){return`<blockquote>
`+ge+`</blockquote>
`},Ve.html=function(ge){return ge},Ve.heading=function(ge,me,Le,oe){return this.options.headerIds?"<h"+me+' id="'+this.options.headerPrefix+oe.slug(Le)+'">'+ge+"</h"+me+`>
`:"<h"+me+">"+ge+"</h"+me+`>
`},Ve.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Ve.list=function(ge,me,Le){var oe=me?"ol":"ul",Te=me&&Le!==1?' start="'+Le+'"':"";return"<"+oe+Te+`>
`+ge+"</"+oe+`>
`},Ve.listitem=function(ge){return"<li>"+ge+`</li>
`},Ve.checkbox=function(ge){return"<input "+(ge?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Ve.paragraph=function(ge){return"<p>"+ge+`</p>
`},Ve.table=function(ge,me){return me&&(me="<tbody>"+me+"</tbody>"),`<table>
<thead>
`+ge+`</thead>
`+me+`</table>
`},Ve.tablerow=function(ge){return`<tr>
`+ge+`</tr>
`},Ve.tablecell=function(ge,me){var Le=me.header?"th":"td",oe=me.align?"<"+Le+' align="'+me.align+'">':"<"+Le+">";return oe+ge+"</"+Le+`>
`},Ve.strong=function(ge){return"<strong>"+ge+"</strong>"},Ve.em=function(ge){return"<em>"+ge+"</em>"},Ve.codespan=function(ge){return"<code>"+ge+"</code>"},Ve.br=function(){return this.options.xhtml?"<br/>":"<br>"},Ve.del=function(ge){return"<del>"+ge+"</del>"},Ve.link=function(ge,me,Le){if(ge=cn(this.options.sanitize,this.options.baseUrl,ge),ge===null)return Le;var oe='<a href="'+bn(ge)+'"';return me&&(oe+=' title="'+me+'"'),oe+=">"+Le+"</a>",oe},Ve.image=function(ge,me,Le){if(ge=cn(this.options.sanitize,this.options.baseUrl,ge),ge===null)return Le;var oe='<img src="'+ge+'" alt="'+Le+'"';return me&&(oe+=' title="'+me+'"'),oe+=this.options.xhtml?"/>":">",oe},Ve.text=function(ge){return ge},Ge}(),at=function(){function Ge(){}var Ve=Ge.prototype;return Ve.strong=function(ge){return ge},Ve.em=function(ge){return ge},Ve.codespan=function(ge){return ge},Ve.del=function(ge){return ge},Ve.html=function(ge){return ge},Ve.text=function(ge){return ge},Ve.link=function(ge,me,Le){return""+Le},Ve.image=function(ge,me,Le){return""+Le},Ve.br=function(){return""},Ge}(),rt=function(){function Ge(){this.seen={}}var Ve=Ge.prototype;return Ve.serialize=function(ge){return ge.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Ve.getNextSafeSlug=function(ge,me){var Le=ge,oe=0;if(this.seen.hasOwnProperty(Le)){oe=this.seen[ge];do oe++,Le=ge+"-"+oe;while(this.seen.hasOwnProperty(Le))}return me||(this.seen[ge]=oe,this.seen[Le]=0),Le},Ve.slug=function(ge,me){me===void 0&&(me={});var Le=this.serialize(ge);return this.getNextSafeSlug(Le,me.dryrun)},Ge}(),yt=Pe,ln=at,Rn=rt,Xt=o.exports.defaults,Tn=te.unescape,Tt=function(){function Ge(Ze){this.options=Ze||Xt,this.options.renderer=this.options.renderer||new yt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ln,this.slugger=new Rn}Ge.parse=function(ge,me){var Le=new Ge(me);return Le.parse(ge)},Ge.parseInline=function(ge,me){var Le=new Ge(me);return Le.parseInline(ge)};var Ve=Ge.prototype;return Ve.parse=function(ge,me){me===void 0&&(me=!0);var Le="",oe,Te,ut,et,Ot,Dn,N,q,le,fe,xe,be,qe,it,wt,kt,fn,Yt,pn,Zt=ge.length;for(oe=0;oe<Zt;oe++){if(fe=ge[oe],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[fe.type]&&(pn=this.options.extensions.renderers[fe.type].call({parser:this},fe),pn!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(fe.type))){Le+=pn||"";continue}switch(fe.type){case"space":continue;case"hr":{Le+=this.renderer.hr();continue}case"heading":{Le+=this.renderer.heading(this.parseInline(fe.tokens),fe.depth,Tn(this.parseInline(fe.tokens,this.textRenderer)),this.slugger);continue}case"code":{Le+=this.renderer.code(fe.text,fe.lang,fe.escaped);continue}case"table":{for(q="",N="",et=fe.header.length,Te=0;Te<et;Te++)N+=this.renderer.tablecell(this.parseInline(fe.header[Te].tokens),{header:!0,align:fe.align[Te]});for(q+=this.renderer.tablerow(N),le="",et=fe.rows.length,Te=0;Te<et;Te++){for(Dn=fe.rows[Te],N="",Ot=Dn.length,ut=0;ut<Ot;ut++)N+=this.renderer.tablecell(this.parseInline(Dn[ut].tokens),{header:!1,align:fe.align[ut]});le+=this.renderer.tablerow(N)}Le+=this.renderer.table(q,le);continue}case"blockquote":{le=this.parse(fe.tokens),Le+=this.renderer.blockquote(le);continue}case"list":{for(xe=fe.ordered,be=fe.start,qe=fe.loose,et=fe.items.length,le="",Te=0;Te<et;Te++)wt=fe.items[Te],kt=wt.checked,fn=wt.task,it="",wt.task&&(Yt=this.renderer.checkbox(kt),qe?wt.tokens.length>0&&wt.tokens[0].type==="paragraph"?(wt.tokens[0].text=Yt+" "+wt.tokens[0].text,wt.tokens[0].tokens&&wt.tokens[0].tokens.length>0&&wt.tokens[0].tokens[0].type==="text"&&(wt.tokens[0].tokens[0].text=Yt+" "+wt.tokens[0].tokens[0].text)):wt.tokens.unshift({type:"text",text:Yt}):it+=Yt),it+=this.parse(wt.tokens,qe),le+=this.renderer.listitem(it,fn,kt);Le+=this.renderer.list(le,xe,be);continue}case"html":{Le+=this.renderer.html(fe.text);continue}case"paragraph":{Le+=this.renderer.paragraph(this.parseInline(fe.tokens));continue}case"text":{for(le=fe.tokens?this.parseInline(fe.tokens):fe.text;oe+1<Zt&&ge[oe+1].type==="text";)fe=ge[++oe],le+=`
`+(fe.tokens?this.parseInline(fe.tokens):fe.text);Le+=me?this.renderer.paragraph(le):le;continue}default:{var Ui='Token with "'+fe.type+'" type was not found.';if(this.options.silent){console.error(Ui);return}else throw new Error(Ui)}}}return Le},Ve.parseInline=function(ge,me){me=me||this.renderer;var Le="",oe,Te,ut,et=ge.length;for(oe=0;oe<et;oe++){if(Te=ge[oe],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Te.type]&&(ut=this.options.extensions.renderers[Te.type].call({parser:this},Te),ut!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Te.type))){Le+=ut||"";continue}switch(Te.type){case"escape":{Le+=me.text(Te.text);break}case"html":{Le+=me.html(Te.text);break}case"link":{Le+=me.link(Te.href,Te.title,this.parseInline(Te.tokens,me));break}case"image":{Le+=me.image(Te.href,Te.title,Te.text);break}case"strong":{Le+=me.strong(this.parseInline(Te.tokens,me));break}case"em":{Le+=me.em(this.parseInline(Te.tokens,me));break}case"codespan":{Le+=me.codespan(Te.text);break}case"br":{Le+=me.br();break}case"del":{Le+=me.del(this.parseInline(Te.tokens,me));break}case"text":{Le+=me.text(Te.text);break}default:{var Ot='Token with "'+Te.type+'" type was not found.';if(this.options.silent){console.error(Ot);return}else throw new Error(Ot)}}}return Le},Ge}(),tn=ot,Qn=Tt,oi=ct,lt=Pe,Bs=at,fi=rt,Ai=te.merge,bs=te.checkSanitizeDeprecation,Kn=te.escape,Pr=o.exports.getDefaults,Sa=o.exports.changeDefaults,Oi=o.exports.defaults;function vt(Ge,Ve,Ze){if(typeof Ge>"u"||Ge===null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ge!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ge)+", string expected");if(typeof Ve=="function"&&(Ze=Ve,Ve=null),Ve=Ai({},vt.defaults,Ve||{}),bs(Ve),Ze){var ge=Ve.highlight,me;try{me=tn.lex(Ge,Ve)}catch(ut){return Ze(ut)}var Le=function(et){var Ot;if(!et)try{Ve.walkTokens&&vt.walkTokens(me,Ve.walkTokens),Ot=Qn.parse(me,Ve)}catch(Dn){et=Dn}return Ve.highlight=ge,et?Ze(et):Ze(null,Ot)};if(!ge||ge.length<3||(delete Ve.highlight,!me.length))return Le();var oe=0;vt.walkTokens(me,function(ut){ut.type==="code"&&(oe++,setTimeout(function(){ge(ut.text,ut.lang,function(et,Ot){if(et)return Le(et);Ot!=null&&Ot!==ut.text&&(ut.text=Ot,ut.escaped=!0),oe--,oe===0&&Le()})},0))}),oe===0&&Le();return}try{var Te=tn.lex(Ge,Ve);return Ve.walkTokens&&vt.walkTokens(Te,Ve.walkTokens),Qn.parse(Te,Ve)}catch(ut){if(ut.message+=`
Please report this to https://github.com/markedjs/marked.`,Ve.silent)return"<p>An error occurred:</p><pre>"+Kn(ut.message+"",!0)+"</pre>";throw ut}}vt.options=vt.setOptions=function(Ge){return Ai(vt.defaults,Ge),Sa(vt.defaults),vt},vt.getDefaults=Pr,vt.defaults=Oi,vt.use=function(){for(var Ge=this,Ve=arguments.length,Ze=new Array(Ve),ge=0;ge<Ve;ge++)Ze[ge]=arguments[ge];var me=Ai.apply(void 0,[{}].concat(Ze)),Le=vt.defaults.extensions||{renderers:{},childTokens:{}},oe;Ze.forEach(function(Te){if(Te.extensions&&(oe=!0,Te.extensions.forEach(function(et){if(!et.name)throw new Error("extension name required");if(et.renderer){var Ot=Le.renderers?Le.renderers[et.name]:null;Ot?Le.renderers[et.name]=function(){for(var Dn=arguments.length,N=new Array(Dn),q=0;q<Dn;q++)N[q]=arguments[q];var le=et.renderer.apply(this,N);return le===!1&&(le=Ot.apply(this,N)),le}:Le.renderers[et.name]=et.renderer}if(et.tokenizer){if(!et.level||et.level!=="block"&&et.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");Le[et.level]?Le[et.level].unshift(et.tokenizer):Le[et.level]=[et.tokenizer],et.start&&(et.level==="block"?Le.startBlock?Le.startBlock.push(et.start):Le.startBlock=[et.start]:et.level==="inline"&&(Le.startInline?Le.startInline.push(et.start):Le.startInline=[et.start]))}et.childTokens&&(Le.childTokens[et.name]=et.childTokens)})),Te.renderer&&function(){var et=vt.defaults.renderer||new lt,Ot=function(q){var le=et[q];et[q]=function(){for(var fe=arguments.length,xe=new Array(fe),be=0;be<fe;be++)xe[be]=arguments[be];var qe=Te.renderer[q].apply(et,xe);return qe===!1&&(qe=le.apply(et,xe)),qe}};for(var Dn in Te.renderer)Ot(Dn);me.renderer=et}(),Te.tokenizer&&function(){var et=vt.defaults.tokenizer||new oi,Ot=function(q){var le=et[q];et[q]=function(){for(var fe=arguments.length,xe=new Array(fe),be=0;be<fe;be++)xe[be]=arguments[be];var qe=Te.tokenizer[q].apply(et,xe);return qe===!1&&(qe=le.apply(et,xe)),qe}};for(var Dn in Te.tokenizer)Ot(Dn);me.tokenizer=et}(),Te.walkTokens){var ut=vt.defaults.walkTokens;me.walkTokens=function(et){Te.walkTokens.call(Ge,et),ut&&ut(et)}}oe&&(me.extensions=Le),vt.setOptions(me)})},vt.walkTokens=function(Ge,Ve){for(var Ze=function(){var oe=me.value;switch(Ve(oe),oe.type){case"table":{for(var Te=s(oe.header),ut;!(ut=Te()).done;){var et=ut.value;vt.walkTokens(et.tokens,Ve)}for(var Ot=s(oe.rows),Dn;!(Dn=Ot()).done;)for(var N=Dn.value,q=s(N),le;!(le=q()).done;){var fe=le.value;vt.walkTokens(fe.tokens,Ve)}break}case"list":{vt.walkTokens(oe.items,Ve);break}default:vt.defaults.extensions&&vt.defaults.extensions.childTokens&&vt.defaults.extensions.childTokens[oe.type]?vt.defaults.extensions.childTokens[oe.type].forEach(function(xe){vt.walkTokens(oe[xe],Ve)}):oe.tokens&&vt.walkTokens(oe.tokens,Ve)}},ge=s(Ge),me;!(me=ge()).done;)Ze()},vt.parseInline=function(Ge,Ve){if(typeof Ge>"u"||Ge===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ge!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ge)+", string expected");Ve=Ai({},vt.defaults,Ve||{}),bs(Ve);try{var Ze=tn.lexInline(Ge,Ve);return Ve.walkTokens&&vt.walkTokens(Ze,Ve.walkTokens),Qn.parseInline(Ze,Ve)}catch(ge){if(ge.message+=`
Please report this to https://github.com/markedjs/marked.`,Ve.silent)return"<p>An error occurred:</p><pre>"+Kn(ge.message+"",!0)+"</pre>";throw ge}},vt.Parser=Qn,vt.parser=Qn.parse,vt.Renderer=lt,vt.TextRenderer=Bs,vt.Lexer=tn,vt.lexer=tn.lex,vt.Tokenizer=oi,vt.Slugger=fi,vt.parse=vt;var vo=vt;return vo})})();Wm||exports;(Wm||exports).Parser;(Wm||exports).parser;var tBe=(Wm||exports).Renderer;(Wm||exports).TextRenderer;(Wm||exports).Lexer;(Wm||exports).lexer;(Wm||exports).Tokenizer;(Wm||exports).Slugger;var nBe=(Wm||exports).parse;function iBe(r,e={},t={}){var n;const i=new Et;let s=!1;const o=i.add(new Fu),a=lj(e),l=function(k){let D;try{D=WV(decodeURIComponent(k))}catch{}return D?(D=Hbe(D,O=>{if(r.uris&&r.uris[O])return $n.revive(r.uris[O])}),encodeURIComponent(JSON.stringify(D))):k},u=function(k,D){const O=r.uris&&r.uris[k];let H=$n.revive(O);return D?k.startsWith(wi.data+":")?k:(H||(H=$n.parse(k)),qie.asBrowserUri(H).toString(!0)):!H||$n.parse(k).toString()===H.toString()?k:(H.query&&(H=H.with({query:l(H.query)})),H.toString())};let d;const h=new Promise(k=>d=k),p=new tBe;if(p.image=(k,D,O)=>{let H=[],V=[];return k&&({href:k,dimensions:H}=C2e(k),V.push(`src="${k}"`)),O&&V.push(`alt="${O}"`),D&&V.push(`title="${D}"`),H.length&&(V=V.concat(H)),"<img "+V.join(" ")+">"},p.link=(k,D,O)=>(k===O&&(O=J5(O)),k=u(k,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(k)||(k=HG(e.baseUrl,k).toString())),D=J5(D),k=J5(k),!k||k.match(/^data:|javascript:/i)||k.match(/^command:/i)&&!r.isTrusted||k.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?O:(k=k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${k}" title="${D||k}">${O}</a>`)),p.paragraph=k=>`<p>${k}</p>`,e.codeBlockRenderer&&(p.code=(k,D)=>{const O=e.codeBlockRenderer(D,k),H=Pae.nextId();return cU(Promise.all([O,h]),o.token).then(V=>{var X;if(!s&&V){const $=a.querySelector(`div[data-code="${H}"]`);$&&EC($,V[0]),(X=e.asyncRenderCallback)===null||X===void 0||X.call(e)}}).catch(()=>{}),`<div class="code" data-code="${H}">${bU(k)}</div>`}),e.actionHandler){const k=e.actionHandler.disposables.add(new Hr(a,"click")),D=e.actionHandler.disposables.add(new Hr(a,"auxclick"));e.actionHandler.disposables.add(yn.any(k.event,D.event)(O=>{const H=new yf(O);if(!H.leftButton&&!H.middleButton)return;let V=H.target;if(!(V.tagName!=="A"&&(V=V.parentElement,!V||V.tagName!=="A")))try{const X=V.dataset.href;X&&e.actionHandler.callback(X,H)}catch(X){Jn(X)}finally{H.preventDefault()}}))}r.supportHtml||(t.sanitizer=k=>(r.isTrusted?k.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?k:"",t.sanitize=!0,t.silent=!0),t.renderer=p;let v=(n=r.value)!==null&&n!==void 0?n:"";v.length>1e5&&(v=`${v.substr(0,1e5)}`),r.supportThemeIcons&&(v=yke(v));let C=nBe(v,t);r.supportThemeIcons&&(C=Uw(C).map(D=>typeof D=="string"?D:D.outerHTML).join(""));const E=new DOMParser().parseFromString(aee(r,C),"text/html");if(E.body.querySelectorAll("img").forEach(k=>{if(k.src){let D=u(k.src,!0);try{const O=$n.parse(D);e.baseUrl&&O.scheme===wi.file&&(D=HG(e.baseUrl,D).toString())}catch{}k.src=D}}),a.innerHTML=aee(r,E.body.innerHTML),d(),e.asyncRenderCallback)for(const k of a.getElementsByTagName("img")){const D=i.add(St(k,"load",()=>{D.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{s=!0,o.cancel(),i.dispose()}}}function aee(r,e){const{config:t,allowedSchemes:n}=rBe(r);see("uponSanitizeAttribute",(s,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(s.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const i=document.createElement("a");see("afterSanitizeAttributes",s=>{for(const o of["href","src"])s.hasAttribute(o)&&(i.href=s.getAttribute(o),n.includes(i.protocol.replace(/:$/,""))||s.removeAttribute(o))});try{return eBe(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{oee("uponSanitizeAttribute"),oee("afterSanitizeAttributes")}}function rBe(r){const e=[wi.http,wi.https,wi.mailto,wi.data,wi.file,wi.vscodeFileResource,wi.vscodeRemote,wi.vscodeRemoteResource];return r.isTrusted&&e.push(wi.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var sBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},oBe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},k7;let zb=class rce{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new Ae,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new Et;return{element:i.add(iBe(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n)).element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,i)=>oBe(this,void 0,void 0,function*(){var s,o,a,l;let u;n?u=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(u=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),u||(u="plaintext"),this._modeService.triggerMode(u);const d=(o=yield Qs.getPromise(u))!==null&&o!==void 0?o:void 0,h=document.createElement("span");if(h.innerHTML=(l=(a=rce._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(i,this._modeService.languageIdCodec,d))!==null&&l!==void 0?l:voe(i,this._modeService.languageIdCodec,d),this._options.editor){const p=this._options.editor.getOption(43);lc.applyFontInfoSlow(h,p)}else this._options.codeBlockFontFamily&&(h.style.fontFamily=this._options.codeBlockFontFamily);return h}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Jn),disposables:t}}}};zb._ttpTokenizer=(k7=window.trustedTypes)===null||k7===void 0?void 0:k7.createPolicy("tokenizeToString",{createHTML(r,e,t){return voe(r,e,t)}});zb=sBe([lee(1,Pl),lee(2,Hd)],zb);var aBe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class lBe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function uBe(r,e,t,n,i){return aBe(this,void 0,void 0,function*(){try{const s=yield Promise.resolve(r.provideHover(t,n,i));if(s&&dBe(s))return new lBe(r,s,e)}catch(s){Ml(s)}})}function sce(r,e,t){const i=Wk.ordered(r).map((s,o)=>uBe(s,o,r,e,t));return Va.fromPromises(i).coalesce()}function cBe(r,e,t){return sce(r,e,t).map(n=>n.hover).toPromise()}jv("_executeHoverProvider",(r,e)=>cBe(r,e,ki.None));function dBe(r){const e=typeof r.range<"u",t=typeof r.contents<"u"&&r.contents&&r.contents.length>0;return e&&t}var hBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},N7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const uee=Ct;class jT{constructor(e,t,n,i){this.owner=e,this.range=t,this.contents=n,this.ordinal=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let DH=class{constructor(e,t,n,i,s){this._editor=e,this._hover=t,this._modeService=n,this._openerService=i,this._configurationService=s}createLoadingMessage(e){return new jT(this,e.range,[new Wb().appendText(L("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),o=[];let a=1e3;const l=n.getLineLength(i),u=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:u});typeof d=="number"&&l>=d&&o.push(new jT(this,e.range,[{value:L("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const h of t){const p=h.range.startLineNumber===i?h.range.startColumn:1,v=h.range.endLineNumber===i?h.range.endColumn:s,C=h.options.hoverMessage;if(!C||wN(C))continue;const S=new se(e.range.startLineNumber,p,e.range.startLineNumber,v);o.push(new jT(this,S,NU(C),a++))}return o}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Va.EMPTY;const i=this._editor.getModel();if(!Wk.has(i))return Va.EMPTY;const s=new ze(e.range.startLineNumber,e.range.startColumn);return sce(i,s,n).filter(o=>!wN(o.hover.contents)).map(o=>{const a=o.hover.range?se.lift(o.hover.range):e.range;return new jT(this,a,o.hover.contents,o.ordinal)})}renderHoverParts(e,t,n){return oce(e,t,this._editor,this._hover,this._modeService,this._openerService)}};DH=hBe([N7(2,Pl),N7(3,Hd),N7(4,es)],DH);function oce(r,e,t,n,i,s){r.sort((a,l)=>a.ordinal-l.ordinal);const o=new Et;for(const a of r)for(const l of a.contents){if(wN(l))continue;const u=uee("div.hover-row.markdown-hover"),d=st(u,uee("div.hover-contents")),h=o.add(new zb({editor:t},i,s));o.add(h.onDidRenderAsync(()=>{d.className="hover-contents code-hover-contents",n.onContentsChanged()}));const p=o.add(h.render(l));d.appendChild(p.element),e.appendChild(u)}return o}var ace=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},uP=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class cee{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let IH=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new Ae,this.onDidChange=this._onDidChange.event,this._dispoables=new Et,this._markers=[],this._nextIdx=-1,$n.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),s=(a,l)=>{let u=Ak(a.resource.toString(),l.resource.toString());return i==="position"?u=se.compareRangesUsingStarts(a,l)||$s.compare(a.severity,l.severity):u=$s.compare(a.severity,l.severity)||se.compareRangesUsingStarts(a,l),u},o=()=>{this._markers=this._markerService.read({resource:$n.isUri(e)?e:void 0,severities:$s.Error|$s.Warning|$s.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)};o(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(o(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new cee(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,s=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());s<0&&(s=kU(this._markers,{resource:e.uri},(o,a)=>Ak(o.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let o=s;o<this._markers.length;o++){let a=se.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new se(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,i=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(se.containsPosition(this._markers[n],t))return new cee(this._markers[n],n+1,this._markers.length)}}};IH=ace([uP(1,N2),uP(2,es)],IH);const lce=lr("IMarkerNavigationService");let TH=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new Eh}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new IH(e,this._markerService,this._configService)}};TH=ace([uP(0,N2),uP(1,es)],TH);KC(lce,TH,!0);var kH;(function(r){function e(t){switch(t){case so.Ignore:return"severity-ignore "+Ie.info.classNames;case so.Info:return Ie.info.classNames;case so.Warning:return Ie.warning.classNames;case so.Error:return Ie.error.classNames;default:return""}}r.className=e})(kH||(kH={}));ds((r,e)=>{const t=r.getColor(mye);if(t){const s=Ie.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.text-search-provider-messages .providerMessage ${s},
			.extensions-viewlet > .extensions ${s} {
				color: ${t};
			}
		`)}const n=r.getColor(_ye);if(n){const s=Ie.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.extension-editor ${s},
			.text-search-provider-messages .providerMessage ${s},
			.preferences-editor ${s} {
				color: ${n};
			}
		`)}const i=r.getColor(vye);if(i){const s=Ie.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${s},
			.markers-panel .marker-icon${s},
			.extensions-viewlet > .extensions ${s},
			.text-search-provider-messages .providerMessage ${s},
			.extension-editor ${s} {
				color: ${i};
			}
		`)}});var fBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class gBe{constructor(e,t,n,i,s){this._openerService=i,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Et,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(ja(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new g$(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){nr(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:s}=e;let o=((t==null?void 0:t.length)||0)+2;s&&(typeof s=="string"?o+=s.length:o+=s.value.length);const a=Dv(n);this._lines=a.length,this._longestLineLength=0;for(const p of a)this._longestLineLength=Math.max(p.length+o,this._longestLineLength);Ca(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const p of a)l=document.createElement("div"),l.innerText=p,p===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const p=document.createElement("span");if(p.classList.add("details"),l.appendChild(p),t){const v=document.createElement("span");v.innerText=t,v.classList.add("source"),p.appendChild(v)}if(s)if(typeof s=="string"){const v=document.createElement("span");v.innerText=`(${s})`,v.classList.add("code"),p.appendChild(v)}else{this._codeLink=Ct("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=C=>{this._openerService.open(s.target,{allowCommands:!0}),C.preventDefault(),C.stopPropagation()};const v=st(this._codeLink,Ct("span"));v.innerText=s.value,p.appendChild(this._codeLink)}}if(Ca(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Rd(i)){const p=this._relatedBlock.appendChild(document.createElement("div"));p.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const v of i){let C=document.createElement("div"),S=document.createElement("a");S.classList.add("filename"),S.innerText=`${Rue(v.resource)}(${v.startLineNumber}, ${v.startColumn}): `,S.title=this._labelService.getUriLabel(v.resource),this._relatedDiagnostics.set(S,v);let E=document.createElement("span");E.innerText=v.message,C.appendChild(S),C.appendChild(E),this._lines+=1,p.appendChild(C)}}const u=this._editor.getOption(43),d=Math.ceil(u.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=u.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case $s.Error:t=L("Error","Error");break;case $s.Warning:t=L("Warning","Warning");break;case $s.Info:t=L("Info","Info");break;case $s.Hint:t=L("Hint","Hint");break}let n=L("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}}let kx=class uce extends aP{constructor(e,t,n,i,s,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new Et,this._onDidSelectRelatedInformation=new Ae,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=$s.Warning,this._backgroundColor=We.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(vBe);let t=NH,n=pBe;this._severity===$s.Warning?(t=AH,n=mBe):this._severity===$s.Info&&(t=OH,n=_Be);const i=e.getColor(t),s=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:s,primaryHeadingColor:e.getColor(Oue),secondaryHeadingColor:e.getColor(Mue)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(i=>this.editor.focus()));const t=[],n=this._menuService.createMenu(uce.TitleMenu,this._contextKeyService);e5e(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=st(e,Ct(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new gBe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let i=se.lift(e);const s=this.editor.getPosition();let o=s&&i.containsPosition(s)?s:i.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?L("problems","{0} of {1} problems",t,n):L("change","{0} of {1} problem",t,n);this.setTitle(Mf(a.uri),l)}this._icon.className=`codicon ${kH.className($s.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};kx.TitleMenu=new vn("gotoErrorTitleMenu");kx=fBe([ZL(1,Fs),ZL(2,Hd),ZL(3,ZS),ZL(4,Li),ZL(5,Xn),ZL(6,D2)],kx);let dee=Pk(tk,nse),hee=Pk(Db,l4),fee=Pk(Sm,BU);const NH=Oe("editorMarkerNavigationError.background",{dark:dee,light:dee,hc:Ao},L("editorMarkerNavigationError","Editor marker navigation widget error color.")),pBe=Oe("editorMarkerNavigationError.headerBackground",{dark:Jr(NH,.1),light:Jr(NH,.1),hc:null},L("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),AH=Oe("editorMarkerNavigationWarning.background",{dark:hee,light:hee,hc:Ao},L("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),mBe=Oe("editorMarkerNavigationWarning.headerBackground",{dark:Jr(AH,.1),light:Jr(AH,.1),hc:"#0C141F"},L("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),OH=Oe("editorMarkerNavigationInfo.background",{dark:fee,light:fee,hc:Ao},L("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),_Be=Oe("editorMarkerNavigationInfo.headerBackground",{dark:Jr(OH,.1),light:Jr(OH,.1),hc:null},L("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),vBe=Oe("editorMarkerNavigation.background",{dark:Df,light:Df,hc:Df},L("editorMarkerNavigationBackground","Editor marker navigation widget background."));var bBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},cce=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let BC=class iM{constructor(e,t,n,i,s){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=s,this._sessionDispoables=new Et,this._editor=e,this._widgetVisible=dce.bindTo(this._contextKeyService)}static get(e){return e.getContribution(iM.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(kx,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,s,o;(!(!((i=this._model)===null||i===void 0)&&i.selected)||!se.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,n.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:se.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new ze(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return cce(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const i=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);i&&(iM.get(i).close(),iM.get(i).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};BC.ID="editor.contrib.markerController";BC=bBe([lO(1,lce),lO(2,Xn),lO(3,vr),lO(4,Li)],BC);class DF extends hn{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return cce(this,void 0,void 0,function*(){t.hasModel()&&BC.get(t).nagivate(this._next,this._multiFile)})}}class Tb extends DF{constructor(){super(!0,!1,{id:Tb.ID,label:Tb.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:578,weight:100},menuOpts:{menuId:kx.TitleMenu,title:Tb.LABEL,icon:hl("marker-navigation-next",Ie.arrowDown,L("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Tb.ID="editor.action.marker.next";Tb.LABEL=L("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class Nx extends DF{constructor(){super(!1,!1,{id:Nx.ID,label:Nx.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:1602,weight:100},menuOpts:{menuId:kx.TitleMenu,title:Tb.LABEL,icon:hl("marker-navigation-previous",Ie.arrowUp,L("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}Nx.ID="editor.action.marker.prev";Nx.LABEL=L("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class CBe extends DF{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:L("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:66,weight:100},menuOpts:{menuId:vn.MenubarGoMenu,title:L({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class yBe extends DF{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:L("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:1090,weight:100},menuOpts:{menuId:vn.MenubarGoMenu,title:L({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}br(BC.ID,BC);It(Tb);It(Nx);It(CBe);It(yBe);const dce=new gn("markersNavigationVisible",!1),wBe=Rl.bindToContribution(BC.get);Dt(new wBe({id:"closeMarkersNavigation",precondition:dce,handler:r=>r.close(),kbOpts:{weight:100+50,kbExpr:ye.focus,primary:9,secondary:[1033]}}));var SBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Ng=Ct;class LBe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const pee={type:1,filter:{include:Fi.QuickFix}};let MH=class{constructor(e,t,n,i){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=i,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),o=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,u=a.range.endLineNumber===i?a.range.endColumn:s,d=this._markerDecorationsService.getMarker(n.uri,a);if(!d)continue;const h=new se(e.range.startLineNumber,l,e.range.startLineNumber,u);o.push(new LBe(this,h,d))}return o}renderHoverParts(e,t,n){if(!e.length)return Je.None;const i=new Et;e.forEach(o=>t.appendChild(this.renderMarkerHover(o,i)));const s=e.length===1?e[0]:e.sort((o,a)=>$s.compare(o.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(s,n,i),i}renderMarkerHover(e,t){const n=Ng("div.hover-row"),i=st(n,Ng("div.marker.hover-contents")),{source:s,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const u=st(i,Ng("span"));if(u.style.whiteSpace="pre-wrap",u.innerText=o,s||a)if(a&&typeof a!="string"){const d=Ng("span");if(s){const C=st(d,Ng("span"));C.innerText=s}const h=st(d,Ng("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(St(h,"click",C=>{this._openerService.open(a.target,{allowCommands:!0}),C.preventDefault(),C.stopPropagation()}));const p=st(h,Ng("span"));p.innerText=a.value;const v=st(i,d);v.style.opacity="0.6",v.style.paddingLeft="6px"}else{const d=st(i,Ng("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(Rd(l))for(const{message:d,resource:h,startLineNumber:p,startColumn:v}of l){const C=st(i,Ng("div"));C.style.marginTop="8px";const S=st(C,Ng("a"));S.innerText=`${Mf(h)}(${p}, ${v}): `,S.style.cursor="pointer",t.add(St(S,"click",k=>{k.stopPropagation(),k.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:p,startColumn:v}}}).catch(Jn)}));const E=st(C,Ng("span"));E.innerText=d,this._editor.applyFontInfo(E)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===$s.Error||e.marker.severity===$s.Warning||e.marker.severity===$s.Info)&&t.addAction({label:L("view problem","View Problem"),commandId:Tb.ID,run:()=>{this._hover.hide(),BC.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const i=t.append(Ng("div"));this.recentMarkerCodeActionsInfo&&(YR.makeKey(this.recentMarkerCodeActionsInfo.marker)===YR.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=L("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?Je.None:n.add(Jw(()=>i.textContent=L("checkingForQuickFixes","Checking for quick fixes..."),200));i.textContent||(i.textContent=String.fromCharCode(160));const o=this.getCodeActions(e.marker);n.add(Bi(()=>o.cancel())),o.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=L("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(Bi(()=>{l||a.dispose()})),t.addAction({label:L("quick fixes","Quick Fix..."),commandId:gD.Id,run:u=>{l=!0;const d=wS.get(this._editor),h=su(u);this._hover.hide(),d.showCodeActions(pee,a,{x:h.left+6,y:h.top+h.height+6})}})},Jn)}}getCodeActions(e){return dl(t=>Kj(this._editor.getModel(),new se(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),pee,nL.None,t))}};MH=SBe([gee(2,_U),gee(3,Hd)],MH);ds((r,e)=>{const t=r.getColor(o4);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=r.getColor(a4);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const hce="editor.action.inlineSuggest.commit";class fce{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return xBe(n,this.parts.map(s=>({range:{startLineNumber:1,endLineNumber:1,startColumn:s.column,endColumn:s.column},text:s.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class EBe{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function xBe(r,e){const t=new EBe(r),n=e.map(i=>{const s=se.lift(i.range);return{startOffset:t.getOffset(s.getStartPosition()),endOffset:t.getOffset(s.getEndPosition()),text:i.text}});n.sort((i,s)=>s.startOffset-i.startOffset);for(const i of n)r=r.substring(0,i.startOffset)+i.text+r.substring(i.endOffset);return r}class mee{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class gce extends Je{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new Ae,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function DBe(r,e){return r===e?!0:!r||!e?!1:r.range.equalsRange(e.range)&&r.text===e.text&&r.command===e.command}function pce(r,e,t,n,i=0){if(r.range.startLineNumber!==r.range.endLineNumber)return;const s=e.getLineContent(r.range.startLineNumber),o=Vr(s).length;if(r.range.startColumn-1<=o){const v=Vr(r.text).length,C=s.substring(r.range.startColumn-1,o),S=se.fromPositions(r.range.getStartPosition().delta(0,C.length),r.range.getEndPosition()),E=r.text.startsWith(C)?r.text.substring(C.length):r.text.substring(v);r={range:S,text:E,command:r.command}}const l=e.getValueInRange(r.range),u=IBe(l,r.text);if(!u)return;const d=r.range.startLineNumber,h=new Array;if(t==="prefix"){const v=u.filter(C=>C.originalLength===0);if(v.length>1||v.length===1&&v[0].originalStart!==l.length)return}const p=r.text.length-i;for(const v of u){const C=r.range.startColumn+v.originalStart+v.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===r.range.startLineNumber&&C<n.column||v.originalLength>0)return;if(v.modifiedLength===0)continue;const S=v.modifiedStart+v.modifiedLength,E=Math.max(v.modifiedStart,Math.min(S,p)),k=r.text.substring(v.modifiedStart,E),D=r.text.substring(E,Math.max(v.modifiedStart,S));if(k.length>0){const O=Dv(k);h.push(new mee(C,O,!1))}if(D.length>0){const O=Dv(D);h.push(new mee(C,O,!0))}}return new fce(d,h,0)}let z_;function IBe(r,e){if((z_==null?void 0:z_.originalValue)===r&&(z_==null?void 0:z_.newValue)===e)return z_==null?void 0:z_.changes;{const t=TBe(r,e);return z_={originalValue:r,newValue:e,changes:t},t}}function TBe(r,e){if(r.length>5e3||e.length>5e3)return;function t(l){let u=0;for(let d=0,h=l.length;d<h;d++){const p=l.charCodeAt(d);p>u&&(u=p)}return u}const n=Math.max(t(r),t(e));function i(l){if(l<0)throw new Error("unexpected");return n+l+1}function s(l){let u=0,d=0;const h=new Int32Array(l.length);for(let p=0,v=l.length;p<v;p++){const C=d*100+u;l[p]==="("?(h[p]=i(2*C),u++):l[p]===")"?(h[p]=i(2*C+1),u===1&&d++,u=Math.max(u-1,0)):h[p]=l.charCodeAt(p)}return h}const o=s(r),a=s(e);return new lv({getElements:()=>o},{getElements:()=>a}).ComputeDiff(!1).changes}var kBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},NBe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},gb=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let RH=class extends Je{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new Ae,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new uc),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(i=>{new Set([GE.Tab.id,GE.DeleteLeft.id,GE.DeleteRight.id,hce,"acceptSelectedSuggestion"]).has(i.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(i=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Bi(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(bf.Automatic))}trigger(e){if(this.completionSession.value){e===bf.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new ABe(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return gb(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};RH=kBe([NBe(2,js)],RH);class ABe extends gce{constructor(e,t,n,i,s,o){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=i,this.cache=s,this.initialTriggerKind=o,this.minReservedLineCount=0,this.updateOperation=this._register(new uc),this.updateSoon=this._register(new Qr(()=>{let l=this.initialTriggerKind;return this.initialTriggerKind=bf.Automatic,this.update(l)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const l=this.currentCompletion;if(l&&l.sourceInlineCompletion!==a){a=l.sourceInlineCompletion;const u=l.sourceProvider;u.handleItemDidShow&&u.handleItemDidShow(l.sourceInlineCompletions,a)}})),this._register(Bi(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(l=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(l=>{this.scheduleAutomaticUpdate()})),this._register(e$.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return gb(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return gb(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return gb(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===bf.Explicit?yield this.updateOperation.value.promise:yield this.update(bf.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==bf.Explicit&&(yield this.update(bf.Explicit))})}hasMultipleInlineCompletions(){var e;return gb(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?pce(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return gb(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=dl(s=>gb(this,void 0,void 0,function*(){let o;try{o=yield _ce(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},s)}catch(a){Jn(a);return}s.isCancellationRequested||(this.cache.setValue(this.editor,o,e),this.onDidChangeEmitter.fire())})),i=new mce(n,e);this.updateOperation.value=i,yield n,this.updateOperation.value===i&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[oo.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Ml):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class mce{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class OBe extends Je{constructor(e,t,n,i){super(),this.triggerKind=i;const s=e.deltaDecorations([],t.items.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._register(Bi(()=>{e.deltaDecorations(s,[])})),this.completions=t.items.map((o,a)=>new MBe(o,s[a])),this._register(e.onDidChangeModelContent(()=>{let o=!1;const a=e.getModel();for(const l of this.completions){const u=a.getDecorationRange(l.decorationId);if(!u){Jn(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(u)||(o=!0,l.synchronizedRange=u)}o&&n()})),this._register(t)}}class MBe{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function RBe(r,e){const t=e.getWordAtPosition(r),n=e.getLineMaxColumn(r.lineNumber);return t?new se(r.lineNumber,t.startColumn,r.lineNumber,n):se.fromPositions(r,r.with(void 0,n))}function _ce(r,e,t,n=ki.None){return gb(this,void 0,void 0,function*(){const i=RBe(r,e),s=e$.all(e),o=yield Promise.all(s.map(l=>gb(this,void 0,void 0,function*(){const u=yield l.provideInlineCompletions(e,r,t,n);return{completions:u,provider:l,dispose:()=>{u&&l.freeInlineCompletions(u)}}}))),a=new Map;for(const l of o){const u=l.completions;if(u)for(const d of u.items.map(h=>({text:h.text,range:h.range?se.lift(h.range):i,command:h.command,sourceProvider:l.provider,sourceInlineCompletions:u,sourceInlineCompletion:h})))d.range.startLineNumber===d.range.endLineNumber&&a.set(JSON.stringify({text:d.text,range:d.range}),d)}return{items:[...a.values()],dispose:()=>{for(const l of o)l.dispose()}}})}function cP(r,e){if(!e)return e;const t=r.getValueInRange(e.range),n=cx(t,e.text),i=r.getOffsetAt(e.range.getStartPosition())+n,s=r.getPositionAt(i),o=t.substr(n),a=WM(o,e.text),l=r.getPositionAt(Math.max(i,r.getOffsetAt(e.range.getEndPosition())-a));return{range:se.fromPositions(s,l),text:e.text.substr(n,e.text.length-n-a)}}class Rg{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),i;if(i=Rg._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(Rg.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(Rg.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(Rg.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(Rg.isVariableCharacter(n)||Rg.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Rg._table[n]>"u"&&!Rg.isDigitCharacter(n)&&!Rg.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}}Rg._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class mD{constructor(){this._children=[]}appendChild(e){return e instanceof Nd&&this._children[this._children.length-1]instanceof Nd?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),s=n.children.slice(0);s.splice(i,1,...t),n._children=s,function o(a,l){for(const u of a)u.parent=l,o(u.children,u)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof IF)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Nd extends mD{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Nd(this.value)}}class vce extends mD{}class Ug extends vce{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof $2?this._children[0]:void 0}clone(){let e=new Ug(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class $2 extends mD{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Nd&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new $2;return this.options.forEach(e.appendChild,e),e}}class Jj extends mD{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(s=>s instanceof am&&!!s.elseValue)&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof am){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){let e=new Jj;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class am extends mD{constructor(e,t,n,i){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new am(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class NN extends vce{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Nd(t)],!0):!1}clone(){const e=new NN(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function _ee(r,e){const t=[...r];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class IF extends mD{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof Ug&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return _ee([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof Ug&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof NN&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new IF;return this._children=this.children.map(t=>t.clone()),e}walk(e){_ee(this.children,e)}}class TF{constructor(){this._scanner=new Rg,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const i=new IF;for(;this._parse(i););const s=new Map,o=[];let a=0;i.walk(l=>(l instanceof Ug&&(a+=1,l.isFinalTabstop?s.set(0,void 0):!s.has(l.index)&&l.children.length>0?s.set(l.index,l.children):o.push(l)),!0));for(const l of o){const u=s.get(l.index);if(u){const d=new Ug(l.index);d.transform=l.transform;for(const h of u)d.appendChild(h.clone());i.replace(l,[d])}}return n||(n=a>0&&t),!s.has(0)&&n&&i.appendChild(new Ug(0)),i}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Nd(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Ug(Number(t)):new NN(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const s=new Ug(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new Nd("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const o=new $2;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(o),this._accept(4)))return e.appendChild(s),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new Nd(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const s=new NN(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new Nd("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseTransform(e){let t=new Jj,n="",i="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,n+=s;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new Nd(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new am(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new am(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){let s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new am(Number(i),s)),!0)}else if(this._accept(11)){let s=this._until(4);if(s)return e.appendChild(new am(Number(i),void 0,s,void 0)),!0}else if(this._accept(12)){let s=this._until(4);if(s)return e.appendChild(new am(Number(i),void 0,void 0,s)),!0}else if(this._accept(13)){let s=this._until(1);if(s){let o=this._until(4);if(o)return e.appendChild(new am(Number(i),void 0,s,o)),!0}}else{let s=this._until(4);if(s)return e.appendChild(new am(Number(i),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Nd(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const ol=new Uint8Array(16),ic=[];for(let r=0;r<256;r++)ic.push(r.toString(16).padStart(2,"0"));let PH;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?PH=crypto.getRandomValues.bind(crypto):PH=function(r){for(let e=0;e<r.length;e++)r[e]=Math.floor(Math.random()*256);return r};function PBe(){PH(ol),ol[6]=ol[6]&15|64,ol[8]=ol[8]&63|128;let r=0,e="";return e+=ic[ol[r++]],e+=ic[ol[r++]],e+=ic[ol[r++]],e+=ic[ol[r++]],e+="-",e+=ic[ol[r++]],e+=ic[ol[r++]],e+="-",e+=ic[ol[r++]],e+=ic[ol[r++]],e+="-",e+=ic[ol[r++]],e+=ic[ol[r++]],e+="-",e+=ic[ol[r++]],e+=ic[ol[r++]],e+=ic[ol[r++]],e+=ic[ol[r++]],e+=ic[ol[r++]],e+=ic[ol[r++]],e}const vee="code-workspace";function bee(r){const e=r;return typeof(e==null?void 0:e.id)=="string"&&$n.isUri(e.uri)}function FBe(r){if(r.configuration)return{id:r.id,configPath:r.configuration};if(r.folders.length===1)return{id:r.id,uri:r.folders[0].uri}}class BBe{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class WBe{constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(n=s.value,i=s.multiline)}if(n&&i&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),o=Vr(s,0,this._selection.startColumn-1);let a=o;e.snippet.walk(u=>u===e?!1:(u instanceof Nd&&(a=Vr(Dv(u.value).pop())),!0));const l=cx(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(u,d,h)=>`${d}${a.substr(l)}${h}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class VBe{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Tw(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Tw(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return Hie(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(qU(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class HBe{constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!lre(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class zBe{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=hr.getComments(n);if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}}class bv{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return bv.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return bv.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return bv.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return bv.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}bv.dayNames=[L("Sunday","Sunday"),L("Monday","Monday"),L("Tuesday","Tuesday"),L("Wednesday","Wednesday"),L("Thursday","Thursday"),L("Friday","Friday"),L("Saturday","Saturday")];bv.dayNamesShort=[L("SundayShort","Sun"),L("MondayShort","Mon"),L("TuesdayShort","Tue"),L("WednesdayShort","Wed"),L("ThursdayShort","Thu"),L("FridayShort","Fri"),L("SaturdayShort","Sat")];bv.monthNames=[L("January","January"),L("February","February"),L("March","March"),L("April","April"),L("May","May"),L("June","June"),L("July","July"),L("August","August"),L("September","September"),L("October","October"),L("November","November"),L("December","December")];bv.monthNamesShort=[L("JanuaryShort","Jan"),L("FebruaryShort","Feb"),L("MarchShort","Mar"),L("AprilShort","Apr"),L("MayShort","May"),L("JuneShort","Jun"),L("JulyShort","Jul"),L("AugustShort","Aug"),L("SeptemberShort","Sep"),L("OctoberShort","Oct"),L("NovemberShort","Nov"),L("DecemberShort","Dec")];class UBe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=FBe(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(bee(e))return Tw(e.uri.path);let t=Tw(e.configPath.path);return t.endsWith(vee)&&(t=t.substr(0,t.length-vee.length-1)),t}_resoveWorkspacePath(e){if(bee(e))return gH(e.uri.fsPath);let t=Tw(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?gH(n):"/"}}class $Be{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return PBe()}}class Pg{constructor(e,t,n,i){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=i,this._nestingLevel=1,this._placeholderGroups=wG(t.placeholders,Ug.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),s=this._snippet.fullLen(n),o=se.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+s)),a=n.isFinalTabstop?Pg._decor.inactiveFinal:Pg._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let i=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const o=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),u=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<u.length;d++)u[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+u[d]);i.push(oo.replace(a,u.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const s=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),u=this._editor.getModel().getDecorationRange(l);o.push(new un(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?Pg._decor.activeFinal:Pg._decor.active),s.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const h=this._placeholderDecorations.get(d);i.changeDecorationOptions(h,d.isFinalTabstop?Pg._decor.activeFinal:Pg._decor.active),s.add(d)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?Pg._decor.inactiveFinal:Pg._decor.inactive);return o});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Ug){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const s=this._placeholderDecorations.get(i),o=this._editor.getModel().getDecorationRange(s);if(!o){e.delete(i.index);break}n.push(o)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(!s._placeholderDecorations);const o=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(o+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,s._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of s._snippet.placeholders){const u=s._snippet.offset(l),d=s._snippet.fullLen(l),h=se.fromPositions(t.getPositionAt(s._offset+u),t.getPositionAt(s._offset+u+d)),p=n.addDecoration(h,Pg._decor.inactive);this._placeholderDecorations.set(l,p)}}this._placeholderGroups=wG(this._snippet.placeholders,Ug.compareByIndex)})}}Pg._decor={active:mi.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:mi.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:mi.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:mi.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const Cee={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class X_{constructor(e,t,n=Cee){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,i,s){const o=e.getLineContent(t.lineNumber),a=Vr(o,0,t.column-1);let l;return n.walk(u=>{if(!(u instanceof Nd)||u.parent instanceof $2)return!0;const d=u.value.split(/\r\n|\r|\n/);if(i){const p=n.offset(u);if(p===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??n.toString();let v=l.charCodeAt(p-1);(v===10||v===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let v=1;v<d.length;v++)d[v]=e.normalizeIndentation(a+d[v])}const h=d.join(e.getEOL());return h!==u.value&&(u.parent.replace(u,[new Nd(h)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:s,positionColumn:o}=t,a=o-n,l=o+i,u=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=un.createWithDirection(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,i,s,o,a,l){const u=[],d=[];if(!e.hasModel())return{edits:u,snippets:d};const h=e.getModel(),p=e.invokeWithinContext(H=>H.get(Moe)),v=e.invokeWithinContext(H=>new VBe(H.get(D2),h)),C=()=>a;let S=0,E=h.getValueInRange(X_.adjustSelection(h,e.getSelection(),n,0)),k=h.getValueInRange(X_.adjustSelection(h,e.getSelection(),0,i)),D=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const O=e.getSelections().map((H,V)=>({selection:H,idx:V})).sort((H,V)=>se.compareRangesUsingStarts(H.selection,V.selection));for(const{selection:H,idx:V}of O){let X=X_.adjustSelection(h,H,n,0),$=X_.adjustSelection(h,H,0,i);E!==h.getValueInRange(X)&&(X=H),k!==h.getValueInRange($)&&($=H);const P=H.setStartPosition(X.startLineNumber,X.startColumn).setEndPosition($.endLineNumber,$.endColumn),z=new TF().parse(t,!0,s),M=P.getStartPosition(),W=X_.adjustWhitespace(h,M,z,o||V>0&&D!==h.getLineFirstNonWhitespaceColumn(H.positionLineNumber),!0);z.resolveVariables(new BBe([v,new HBe(C,V,O.length,e.getOption(70)==="spread"),new WBe(h,H,V,l),new zBe(h,H),new bv,new UBe(p),new $Be]));const I=h.getOffsetAt(M)+S;S+=z.toString().length-h.getValueLengthInRange(P),u[V]=oo.replace(P,z.toString()),u[V].identifier={major:V,minor:0},d[V]=new Pg(e,z,I,W)}return{edits:u,snippets:d}}dispose(){nr(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=X_.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(i=>!!i.identifier).map(i=>un.fromPositions(i.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=Cee){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=X_.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,s=>{for(const o of this._snippets)o.merge(i);return console.assert(i.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):s.filter(o=>!!o.identifier).map(o=>un.fromPositions(o.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[s,o]of i){o.sort(se.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,o)=>{s.push(...i.get(o))})}e.sort(se.compareRangesUsingStarts);for(let[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(se.compareRangesUsingStarts);for(let s=0;s<i.length;s++)if(!i[s].containsRange(e[s])){t.delete(n);continue}}return t.size>0}}var wk=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Pi={Visible:new gn("suggestWidgetVisible",!1,L("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new gn("suggestWidgetDetailsVisible",!1,L("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new gn("suggestWidgetMultipleSuggestions",!1,L("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new gn("suggestionMakesTextEdit",!0,L("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new gn("acceptSuggestionOnEnter",!0,L("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new gn("suggestionHasInsertAndReplaceRange",!1,L("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new gn("suggestionInsertMode",void 0,{type:"string",description:L("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new gn("suggestionCanResolve",!1,L("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},WC=new vn("suggestWidgetStatusBar");class jBe{constructor(e,t,n,i){this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=Em.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),se.isIRange(t.range)?(this.editStart=new ze(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new ze(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new ze(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||se.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new ze(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new ze(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new ze(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||se.spansMultipleLines(t.range.insert)||se.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return wk(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{zv(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class dP{constructor(e=2,t=new Set,n=new Set,i=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=i}}dP.default=new dP;let qBe;function KBe(){return qBe}class GBe{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}}function bce(r,e,t=dP.default,n={triggerKind:0},i=ki.None){return wk(this,void 0,void 0,function*(){const s=new Ev(!0);e=e.clone();const o=r.getWordAtPosition(e),a=o?new se(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn):se.fromPositions(e),l={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},u=[],d=new Et,h=[];let p=!1;const v=(S,E,k)=>{var D,O,H;if(E){for(let V of E.suggestions)if(!t.kindFilter.has(V.kind)){if(!t.showDeprecated&&(!((D=V==null?void 0:V.tags)===null||D===void 0)&&D.includes(1)))continue;V.range||(V.range=l),V.sortText||(V.sortText=typeof V.label=="string"?V.label:V.label.label),!p&&V.insertTextRules&&V.insertTextRules&4&&(p=TF.guessNeedsClipboard(V.insertText)),u.push(new jBe(e,V,E,S))}nU(E)&&d.add(E),h.push({providerName:(O=S._debugDisplayName)!==null&&O!==void 0?O:"unkown_provider",elapsedProvider:(H=E.duration)!==null&&H!==void 0?H:-1,elapsedOverall:k.elapsed()})}},C=(()=>wk(this,void 0,void 0,function*(){}))();for(let S of cm.orderedGroups(r)){let E=u.length;if(yield Promise.all(S.map(k=>wk(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(k)))try{const D=new Ev(!0),O=yield k.provideCompletionItems(r,e,n,i);v(k,O,D)}catch(D){Ml(D)}}))),E!==u.length||i.isCancellationRequested)break}return yield C,i.isCancellationRequested?(d.dispose(),Promise.reject(KS())):new GBe(u.sort(Cce(t.snippetSortOrder)),p,{entries:h,elapsed:s.elapsed()},d)})}function eq(r,e){if(r.sortTextLow&&e.sortTextLow){if(r.sortTextLow<e.sortTextLow)return-1;if(r.sortTextLow>e.sortTextLow)return 1}return r.completion.label<e.completion.label?-1:r.completion.label>e.completion.label?1:r.completion.kind-e.completion.kind}function YBe(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return eq(r,e)}function ZBe(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return eq(r,e)}const kF=new Map;kF.set(0,YBe);kF.set(2,ZBe);kF.set(1,eq);function Cce(r){return kF.get(r)}Ki.registerCommand("_executeCompletionItemProvider",(r,...e)=>wk(void 0,void 0,void 0,function*(){const[t,n,i,s]=e;$r($n.isUri(t)),$r(ze.isIPosition(n)),$r(typeof i=="string"||!i),$r(typeof s=="number"||!s);const o=yield r.get(zc).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},l=[],u=yield bce(o.object.textEditorModel,ze.lift(n),void 0,{triggerCharacter:i,triggerKind:i?1:0});for(const d of u.items)l.length<(s??0)&&l.push(d.resolve(ki.None)),a.incomplete=a.incomplete||d.container.incomplete,a.suggestions.push(d.completion);try{return yield Promise.all(l),a}finally{setTimeout(()=>u.disposable.dispose(),100)}}finally{o.dispose()}}));const FH=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};cm.register("*",FH);function XBe(r,e){setTimeout(()=>{FH.onlyOnceSuggestions.push(...e),r.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(FH))},0)}var QBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const wee={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Ol=class qT{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new Et,this._modelVersionId=-1,this._inSnippet=qT.InSnippetMode.bindTo(n),this._hasNextTabstop=qT.HasNextTabstop.bindTo(n),this._hasPrevTabstop=qT.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(qT.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?wee:Object.assign(Object.assign({},wee),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new X_(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>un.fromPositions(n.getStartPosition())));const[t]=e.options;XBe(this._editor,e.options.map((n,i)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(i+1),range:se.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};Ol.ID="snippetController2";Ol.InSnippetMode=new gn("inSnippetMode",!1,L("inSnippetMode","Whether the editor in current in snippet mode"));Ol.HasNextTabstop=new gn("hasNextTabstop",!1,L("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Ol.HasPrevTabstop=new gn("hasPrevTabstop",!1,L("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Ol=QBe([yee(1,$v),yee(2,Xn)],Ol);br(Ol.ID,Ol);const NF=Rl.bindToContribution(Ol.get);Dt(new NF({id:"jumpToNextSnippetPlaceholder",precondition:qt.and(Ol.InSnippetMode,Ol.HasNextTabstop),handler:r=>r.next(),kbOpts:{weight:100+30,kbExpr:ye.editorTextFocus,primary:2}}));Dt(new NF({id:"jumpToPrevSnippetPlaceholder",precondition:qt.and(Ol.InSnippetMode,Ol.HasPrevTabstop),handler:r=>r.prev(),kbOpts:{weight:100+30,kbExpr:ye.editorTextFocus,primary:1026}}));Dt(new NF({id:"leaveSnippet",precondition:Ol.InSnippetMode,handler:r=>r.cancel(!0),kbOpts:{weight:100+30,kbExpr:ye.editorTextFocus,primary:9,secondary:[1033]}}));Dt(new NF({id:"acceptSnippet",precondition:Ol.InSnippetMode,handler:r=>r.finish()}));var JBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},See=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class tq{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let i=n[0].score[0];for(let s=0;s<n.length;s++){const{score:o,completion:a}=n[s];if(o[0]!==i)break;if(a.preselect)return s}return 0}}class yce extends tq{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class e8e extends tq{constructor(){super("recentlyUsed"),this._cache=new qC(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);let s=n[0].score[0],o=-1,a=-1,l=-1;for(let u=0;u<n.length&&n[u].score[0]===s;u++){const d=`${e.getLanguageId()}/${n[u].textLabel}`,h=this._cache.peek(d);if(h&&h.touch>l&&h.type===n[u].completion.kind&&h.insertText===n[u].completion.insertText&&(l=h.touch,a=u),n[u].completion.preselect&&o===-1)return o=u}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:Pse(i.type),this._cache.set(n,i);this._seq=this._cache.size}}class t8e extends tq{constructor(){super("recentlyUsedByPrefix"),this._trie=qE.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${i}`;this._trie.set(s,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);let s=`${e.getLanguageId()}/${i}`,o=this._trie.get(s);if(o||(o=this._trie.findSubstr(s)),o)for(let a=0;a<n.length;a++){let{kind:l,insertText:u}=n[a].completion;if(l===o.type&&u===o.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:Pse(n.type),this._trie.set(t,n)}}}let AN=class rM{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Et,this._persistSoon=new Qr(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===ZR.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==i){this._saveState();const s=rM._strategyCtors.get(i)||yce;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${rM._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${rM._storagePrefix}/${this._strategy.name}`,n,t,1)}}};AN._strategyCtors=new Map([["recentlyUsedByPrefix",t8e],["recentlyUsed",e8e],["first",yce]]);AN._storagePrefix="suggest/memories";AN=JBe([See(0,Yv),See(1,es)],AN);const wce=lr("ISuggestMemories");KC(wce,AN,!0);var n8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},i8e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let ON=class Sce{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=Sce.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),s=n.getWordAtPosition(i.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===i.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};ON.AtEnd=new gn("atEndOfWord",!1);ON=n8e([i8e(1,Xn)],ON);var r8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},s8e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let xS=class sM{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=sM.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(sM._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(;i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits););return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=sM._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};xS.OtherSuggestions=new gn("hasOtherSuggestions",!1);xS=r8e([s8e(1,Xn)],xS);class o8e{constructor(e,t,n){this._disposables=new Et,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(i=>{if(this._active&&!t.isFrozen()){const s=i.charCodeAt(i.length-1);this._active.acceptCharacters.has(s)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!Rd(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new mE;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var a8e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Ch{provideSelectionRanges(e,t){return a8e(this,void 0,void 0,function*(){const n=[];for(const i of t){const s=[];n.push(s);const o=new Map;yield new Promise(a=>Ch._bracketsRightYield(a,0,e,i,o)),yield new Promise(a=>Ch._bracketsLeftYield(a,0,e,i,o,s))}return n})}static _bracketsRightYield(e,t,n,i,s){const o=new Map,a=Date.now();for(;;){if(t>=Ch._maxRounds){e();break}if(!i){e();break}let l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>Ch._maxDuration){setTimeout(()=>Ch._bracketsRightYield(e,t+1,n,i,s));break}const d=l.close[0];if(l.isOpen){let h=o.has(d)?o.get(d):0;o.set(d,h+1)}else{let h=o.has(d)?o.get(d):0;if(h-=1,o.set(d,Math.max(0,h)),h<0){let p=s.get(d);p||(p=new Eh,s.set(d,p)),p.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,s,o){const a=new Map,l=Date.now();for(;;){if(t>=Ch._maxRounds&&s.size===0){e();break}if(!i){e();break}let u=n.bracketPairs.findPrevBracket(i);if(!u){e();break}if(Date.now()-l>Ch._maxDuration){setTimeout(()=>Ch._bracketsLeftYield(e,t+1,n,i,s,o));break}const h=u.close[0];if(u.isOpen){let p=a.has(h)?a.get(h):0;if(p-=1,a.set(h,Math.max(0,p)),p<0){let v=s.get(h);if(v){let C=v.shift();v.size===0&&s.delete(h);const S=se.fromPositions(u.range.getEndPosition(),C.getStartPosition()),E=se.fromPositions(u.range.getStartPosition(),C.getEndPosition());o.push({range:S}),o.push({range:E}),Ch._addBracketLeading(n,E,o)}}}else{let p=a.has(h)?a.get(h):0;a.set(h,p+1)}i=u.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(i);s!==0&&s!==t.startColumn&&(n.push({range:se.fromPositions(new ze(i,s),t.getEndPosition())}),n.push({range:se.fromPositions(new ze(i,1),t.getEndPosition())}));const o=i-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:se.fromPositions(new ze(o,a),t.getEndPosition())}),n.push({range:se.fromPositions(new ze(o,1),t.getEndPosition())}))}}}Ch._maxDuration=30;Ch._maxRounds=2;var l8e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class iv{static create(e,t){return l8e(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return iv.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return iv.None;const[s]=yield new Ch().provideSelectionRanges(n,[i]);if(s.length===0)return iv.None;const o=yield e.computeWordRanges(n.uri,s[0].range);if(!o)return iv.None;const a=n.getWordUntilPosition(i);return delete o[a.word],new class extends iv{distance(l,u){if(!i.equals(t.getPosition()))return 0;if(u.kind===17)return 2<<20;let d=typeof u.label=="string"?u.label:u.label.label,h=o[d];if(Nre(h))return 2<<20;let p=kU(h,se.fromPositions(l),se.compareRangesUsingStarts),v=p>=0?h[p]:h[Math.max(0,~p-1)],C=s.length;for(const S of s){if(!se.containsRange(S.range,v))break;C-=1}return C}}})}}iv.None=new class extends iv{distance(){return 0}};class mw{constructor(e,t,n,i,s,o,a){this.clipboardText=a,this._snippetCompareFn=mw._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=s,this._refilterKind=1,this._lineContext=n,o==="top"?this._snippetCompareFn=mw._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=mw._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",s="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?Sx:gke;for(let u=0;u<o.length;u++){const d=o[u];if(d.isInvalid)continue;this._providerInfo.set(d.provider,!!d.container.incomplete);const h=d.position.column-d.editStart.column,p=h+n-(d.position.column-this._column);if(i.length!==p&&(i=p===0?"":t.slice(-p),s=i.toLowerCase()),d.word=i,p===0)d.score=Em.Default;else{let v=0;for(;v<h;){const C=i.charCodeAt(v);if(C===32||C===9)v+=1;else break}if(v>=p)d.score=Em.Default;else if(typeof d.completion.filterText=="string"){let C=l(i,s,v,d.completion.filterText,d.filterTextLow,0,!1);if(!C)continue;k6(d.completion.filterText,d.textLabel)===0?d.score=C:(d.score=cke(i,s,v,d.textLabel,d.labelLow,0),d.score[0]=C[0])}else{let C=l(i,s,v,d.textLabel,d.labelLow,0,!1);if(!C)continue;d.score=C}}d.idx=u,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?A6(e.length-.85,e,(u,d)=>u-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return mw._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return mw._compareCompletionItems(e,t)}}var u8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},c8e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class QL{constructor(e,t,n,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=i}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column||!isNaN(Number(i.word)))}}function d8e(r,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function h8e(r,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let BH=class Lce{constructor(e,t,n,i,s,o,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=s,this._contextKeyService=o,this._configurationService=a,this._toDispose=new Et,this._quickSuggestDelay=10,this._triggerCharacterListener=new Et,this._triggerQuickSuggest=new cc,this._state=0,this._completionDisposables=new Et,this._onDidCancel=new Ae,this._onDidTrigger=new Ae,this._onDidSuggest=new Ae,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new un(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(cm.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(u=>{this._onCursorChange(u)}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{l||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){nr(this._triggerCharacterListener),nr([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of cm.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let s=e.get(i);s||(s=new Set,s.add(KBe()),e.set(i,s)),s.add(n)}const t=n=>{if(!h8e(this._editor,this._contextKeyService,this._configurationService)||QL.shouldAutoTrigger(this._editor))return;if(!n){const o=this._editor.getPosition();n=this._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}let i="";dx(n.charCodeAt(n.length-1))?ba(n.charCodeAt(n.length-2))&&(i=n.substr(n.length-2)):i=n.charAt(n.length-1);const s=e.get(i);if(s){const o=this._completionModel?{items:this._completionModel.adopt(s),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:i},!!this._completionModel,s,o)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!cm.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&Ol.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!QL.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const i=e.getLineTokens(t.lineNumber),s=i.getStandardTokenType(i.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&s===0||n.comments&&s===1||n.strings&&s===2))return}d8e(this._editor,this._contextKeyService,this._configurationService)&&cm.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new QL(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,i){var s;if(!this._editor.hasModel())return;const o=this._editor.getModel(),a=e.auto,l=new QL(o,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let u={triggerKind:(s=e.triggerKind)!==null&&s!==void 0?s:0};e.triggerCharacter&&(u={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Fu;const d=this._editor.getOption(100);let h=1;switch(d){case"top":h=0;break;case"bottom":h=2;break}const{itemKind:p,showDeprecated:v}=Lce._createSuggestFilter(this._editor),C=iv.create(this._editorWorkerService,this._editor),S=bce(o,this._editor.getPosition(),new dP(h,p,n,v),u,this._requestToken.token);Promise.all([S,C]).then(([E,k])=>c8e(this,void 0,void 0,function*(){var D;if((D=this._requestToken)===null||D===void 0||D.dispose(),!this._editor.hasModel())return;let O=i==null?void 0:i.clipboardText;if(!O&&E.needsClipboard&&(O=yield this._clipboardService.readText()),this._state===0)return;const H=this._editor.getModel();let V=E.items;if(i){const $=Cce(h);V=V.concat(i.items).sort($)}const X=new QL(H,this._editor.getPosition(),a,e.shy);this._completionModel=new mw(V,this._context.column,{leadingLineContent:X.leadingLineContent,characterCountDelta:X.column-this._context.column},k,this._editor.getOption(105),this._editor.getOption(100),O),this._completionDisposables.add(E.disposable),this._onNewContext(X),this._reportDurationsTelemetry(E.durations)})).catch(Jn)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const i=e.getOption(105);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Vr(e.leadingLineContent)!==Vr(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(cm.all(this._editor.getModel()));for(let i of this._completionModel.allProvider)t.delete(i);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(QL.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};BH=u8e([XL(1,Oh),XL(2,YC),XL(3,Uv),XL(4,$v),XL(5,Xn),XL(6,es)],BH);class AF{constructor(e,t){this._disposables=new Et,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),i=n.length;let s=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){s=!0;break}if(!s)return;this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(o.getValueLengthInRange(l)>AF._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}AF._maxSelectionLength=51200;var f8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},A7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class nq extends Tx{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=L("ddd","{0} ({1})",this._action.label,nq.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"")}}let WH=class{constructor(e,t,n,i){this._menuService=n,this._contextKeyService=i,this._menuDisposables=new Et,this.element=st(e,Ct(".suggest-status-bar"));const s=o=>o instanceof DC?t.createInstance(nq,o,void 0):void 0;this._leftActions=new Nv(this.element,{actionViewItemProvider:s}),this._rightActions=new Nv(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(WC,this._contextKeyService),t=()=>{const n=[],i=[];for(let[s,o]of e.getActions())s==="left"?n.push(...o):i.push(...o);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};WH=f8e([A7(1,Li),A7(2,ZS),A7(3,Xn)],WH);const g8e=Oe("symbolIcon.arrayForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),p8e=Oe("symbolIcon.booleanForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),m8e=Oe("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},L("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_8e=Oe("symbolIcon.colorForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),v8e=Oe("symbolIcon.constantForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),b8e=Oe("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},L("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),C8e=Oe("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},L("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),y8e=Oe("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},L("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),w8e=Oe("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},L("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),S8e=Oe("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},L("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),L8e=Oe("symbolIcon.fileForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),E8e=Oe("symbolIcon.folderForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),x8e=Oe("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},L("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),D8e=Oe("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},L("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),I8e=Oe("symbolIcon.keyForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),T8e=Oe("symbolIcon.keywordForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),k8e=Oe("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},L("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),N8e=Oe("symbolIcon.moduleForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),A8e=Oe("symbolIcon.namespaceForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),O8e=Oe("symbolIcon.nullForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),M8e=Oe("symbolIcon.numberForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),R8e=Oe("symbolIcon.objectForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),P8e=Oe("symbolIcon.operatorForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),F8e=Oe("symbolIcon.packageForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),B8e=Oe("symbolIcon.propertyForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),W8e=Oe("symbolIcon.referenceForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),V8e=Oe("symbolIcon.snippetForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),H8e=Oe("symbolIcon.stringForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),z8e=Oe("symbolIcon.structForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),U8e=Oe("symbolIcon.textForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$8e=Oe("symbolIcon.typeParameterForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),j8e=Oe("symbolIcon.unitForeground",{dark:kn,light:kn,hc:kn},L("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),q8e=Oe("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},L("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));ds((r,e)=>{const t=r.getColor(g8e);t&&e.addRule(`${Ie.symbolArray.cssSelector} { color: ${t}; }`);const n=r.getColor(p8e);n&&e.addRule(`${Ie.symbolBoolean.cssSelector} { color: ${n}; }`);const i=r.getColor(m8e);i&&e.addRule(`${Ie.symbolClass.cssSelector} { color: ${i}; }`);const s=r.getColor(k8e);s&&e.addRule(`${Ie.symbolMethod.cssSelector} { color: ${s}; }`);const o=r.getColor(_8e);o&&e.addRule(`${Ie.symbolColor.cssSelector} { color: ${o}; }`);const a=r.getColor(v8e);a&&e.addRule(`${Ie.symbolConstant.cssSelector} { color: ${a}; }`);const l=r.getColor(b8e);l&&e.addRule(`${Ie.symbolConstructor.cssSelector} { color: ${l}; }`);const u=r.getColor(C8e);u&&e.addRule(`
			${Ie.symbolValue.cssSelector},${Ie.symbolEnum.cssSelector} { color: ${u}; }`);const d=r.getColor(y8e);d&&e.addRule(`${Ie.symbolEnumMember.cssSelector} { color: ${d}; }`);const h=r.getColor(w8e);h&&e.addRule(`${Ie.symbolEvent.cssSelector} { color: ${h}; }`);const p=r.getColor(S8e);p&&e.addRule(`${Ie.symbolField.cssSelector} { color: ${p}; }`);const v=r.getColor(L8e);v&&e.addRule(`${Ie.symbolFile.cssSelector} { color: ${v}; }`);const C=r.getColor(E8e);C&&e.addRule(`${Ie.symbolFolder.cssSelector} { color: ${C}; }`);const S=r.getColor(x8e);S&&e.addRule(`${Ie.symbolFunction.cssSelector} { color: ${S}; }`);const E=r.getColor(D8e);E&&e.addRule(`${Ie.symbolInterface.cssSelector} { color: ${E}; }`);const k=r.getColor(I8e);k&&e.addRule(`${Ie.symbolKey.cssSelector} { color: ${k}; }`);const D=r.getColor(T8e);D&&e.addRule(`${Ie.symbolKeyword.cssSelector} { color: ${D}; }`);const O=r.getColor(N8e);O&&e.addRule(`${Ie.symbolModule.cssSelector} { color: ${O}; }`);const H=r.getColor(A8e);H&&e.addRule(`${Ie.symbolNamespace.cssSelector} { color: ${H}; }`);const V=r.getColor(O8e);V&&e.addRule(`${Ie.symbolNull.cssSelector} { color: ${V}; }`);const X=r.getColor(M8e);X&&e.addRule(`${Ie.symbolNumber.cssSelector} { color: ${X}; }`);const $=r.getColor(R8e);$&&e.addRule(`${Ie.symbolObject.cssSelector} { color: ${$}; }`);const P=r.getColor(P8e);P&&e.addRule(`${Ie.symbolOperator.cssSelector} { color: ${P}; }`);const z=r.getColor(F8e);z&&e.addRule(`${Ie.symbolPackage.cssSelector} { color: ${z}; }`);const M=r.getColor(B8e);M&&e.addRule(`${Ie.symbolProperty.cssSelector} { color: ${M}; }`);const W=r.getColor(W8e);W&&e.addRule(`${Ie.symbolReference.cssSelector} { color: ${W}; }`);const I=r.getColor(V8e);I&&e.addRule(`${Ie.symbolSnippet.cssSelector} { color: ${I}; }`);const R=r.getColor(H8e);R&&e.addRule(`${Ie.symbolString.cssSelector} { color: ${R}; }`);const G=r.getColor(z8e);G&&e.addRule(`${Ie.symbolStruct.cssSelector} { color: ${G}; }`);const Z=r.getColor(U8e);Z&&e.addRule(`${Ie.symbolText.cssSelector} { color: ${Z}; }`);const ee=r.getColor($8e);ee&&e.addRule(`${Ie.symbolTypeParameter.cssSelector} { color: ${ee}; }`);const ne=r.getColor(j8e);ne&&e.addRule(`${Ie.symbolUnit.cssSelector} { color: ${ne}; }`);const ie=r.getColor(q8e);ie&&e.addRule(`${Ie.symbolVariable.cssSelector} { color: ${ie}; }`)});class Ece{constructor(){this._onDidWillResize=new Ae,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Ae,this.onDidResize=this._onDidResize.event,this._sashListener=new Et,this._size=new us(0,0),this._minSize=new us(0,0),this._maxSize=new us(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new ru(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new ru(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new ru(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:TR.North}),this._southSash=new ru(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:TR.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(yn.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(yn.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(yn.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(yn.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:s,width:o}=this._maxSize;e=Math.max(n,Math.min(s,e)),t=Math.max(i,Math.min(o,t));const a=new us(t,e);us.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var K8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},G8e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function iq(r){return!!r&&!!(r.completion.documentation||r.completion.detail&&r.completion.detail!==r.completion.label)}let VH=class{constructor(e,t){this._editor=e,this._onDidClose=new Ae,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Ae,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Et,this._renderDisposeable=new Et,this._borderWidth=1,this._size=new us(330,0),this.domNode=Ct(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(zb,{editor:e}),this._body=Ct(".body"),this._scrollbar=new C2(this._body,{}),st(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=st(this._body,Ct(".header")),this._close=st(this._header,Ct("span"+Ie.close.cssSelector)),this._close.title=L("details.close","Close"),this._type=st(this._header,Ct("p.type")),this._docs=st(this._body,Ct("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily(qg?ou.fontFamily:null),i=e.get(106)||t.fontSize,s=e.get(107)||t.lineHeight,o=t.fontWeight,a=`${i}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/i}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=L("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,i;this._renderDisposeable.clear();let{detail:s,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(i=e.completion.commitCharacters)===null||i===void 0?void 0:i.join("")}
`,o=new Wb().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!iq(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}`:s;this._type.textContent=a,this._type.title=a,yh(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Ca(this._type),this._type.title="",Rc(this._type),this.domNode.classList.add("no-type");if(Ca(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),Ca(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new us(e,t);us.equals(n,this._size)||(this._size=n,N0e(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};VH=K8e([G8e(1,Li)],VH);class Y8e{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Et,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Ece,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,s=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=i.width-a.dimension.width,l=!0),a.north&&(s=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+s,left:n.left+o})}a.done&&(n=void 0,i=void 0,s=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var i;const s=$P(document.body),o=this.widget.getLayoutInfo(),a=new us(220,2*o.lineHeight),l=e.top,u=function(){const O=s.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),H=-o.borderWidth+e.left+e.width,V=new us(O,s.height-e.top-o.borderHeight-o.verticalPadding),X=V.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:l,left:H,fit:O-t.width,maxSizeTop:V,maxSizeBottom:X,minSize:a.with(Math.min(O,a.width))}}(),d=function(){const O=e.left-o.borderWidth-o.horizontalPadding,H=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),V=new us(O,s.height-e.top-o.borderHeight-o.verticalPadding),X=V.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:l,left:H,fit:O-t.width,maxSizeTop:V,maxSizeBottom:X,minSize:a.with(Math.min(O,a.width))}}(),h=function(){const O=e.left,H=-o.borderWidth+e.top+e.height,V=new us(e.width-o.borderHeight,s.height-e.top-e.height-o.verticalPadding);return{top:H,left:O,fit:V.height-t.height,maxSizeBottom:V,maxSizeTop:V,minSize:a.with(V.width)}}(),p=[u,d,h],v=(i=p.find(O=>O.fit>=0))!==null&&i!==void 0?i:p.sort((O,H)=>H.fit-O.fit)[0],C=e.top+e.height-o.borderHeight;let S,E=t.height;const k=Math.max(v.maxSizeTop.height,v.maxSizeBottom.height);E>k&&(E=k);let D;n?E<=v.maxSizeTop.height?(S=!0,D=v.maxSizeTop):(S=!1,D=v.maxSizeBottom):E<=v.maxSizeBottom.height?(S=!1,D=v.maxSizeBottom):(S=!0,D=v.maxSizeTop),this._applyTopLeft({left:v.left,top:S?v.top:C-E}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!S,v===u,S,v!==u),this._resizable.minSize=v.minSize,this._resizable.maxSize=D,this._resizable.layout(E,Math.min(D.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var wb;(function(r){r[r.FILE=0]="FILE",r[r.FOLDER=1]="FOLDER",r[r.ROOT_FOLDER=2]="ROOT_FOLDER"})(wb||(wb={}));function uO(r,e,t,n){const i=n===wb.ROOT_FOLDER?["rootfolder-icon"]:n===wb.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===wi.data?s=TC.parseMetaData(t).get(TC.META_DATA_LABEL):s=Lee(Sse(t).toLowerCase()),n===wb.FOLDER)i.push(`${s}-name-folder-icon`);else{if(s){if(i.push(`${s}-name-file-icon`),s.length<=255){const a=s.split(".");for(let l=1;l<a.length;l++)i.push(`${a.slice(l).join(".")}-ext-file-icon`)}i.push("ext-file-icon")}const o=Z8e(r,e,t);o&&i.push(`${Lee(o)}-lang-file-icon`)}}return i}function Z8e(r,e,t){if(!t)return null;let n=null;if(t.scheme===wi.data){const s=TC.parseMetaData(t).get(TC.META_DATA_MIME);s&&(n=e.getModeId(s))}else{const i=r.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==uD?n:e.getModeIdByFilepathOrFirstLine(t)}function Lee(r){return r.replace(/[\11\12\14\15\40]/g,"/")}var X8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},O7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},CT;function xce(r){return`suggest-aria-id:${r}`}const Q8e=hl("suggest-more-info",Ie.chevronRight,L("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),J8e=new(CT=class oM{extract(e,t){if(e.textLabel.match(oM._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(oM._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=oM._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},CT._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,CT._regexStrict=new RegExp(`^${CT._regexRelaxed.source}$`,"i"),CT);let HH=class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=i,this._onDidToggleDetails=new Ae,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Et,t.root=e,t.root.classList.add("show-file-icons"),t.icon=st(e,Ct(".icon")),t.colorspan=st(t.icon,Ct("span.colorspan"));const n=st(e,Ct(".contents")),i=st(n,Ct(".main"));t.iconContainer=st(i,Ct(".icon-label.codicon")),t.left=st(i,Ct("span.left")),t.right=st(i,Ct("span.right")),t.iconLabel=new QR(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=st(t.left,Ct("span.signature-label")),t.qualifierLabel=st(t.left,Ct("span.qualifier-label")),t.detailsLabel=st(t.right,Ct("span.details-label")),t.readMore=st(t.right,Ct("span.readMore"+vs.asCSSSelector(Q8e))),t.readMore.title=L("readMore","Read More");const s=()=>{const o=this._editor.getOptions(),a=o.get(43),l=a.getMassagedFontFamily(qg?ou.fontFamily:null),u=a.fontFeatureSettings,d=o.get(106)||a.fontSize,h=o.get(107)||a.lineHeight,p=a.fontWeight,v=`${d}px`,C=`${h}px`;t.root.style.fontSize=v,t.root.style.fontWeight=p,i.style.fontFamily=l,i.style.fontFeatureSettings=u,i.style.lineHeight=C,t.icon.style.height=C,t.icon.style.width=C,t.readMore.style.height=C,t.readMore.style.width=C};return s(),t.disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(106)||o.hasChanged(107))&&s()})),t}renderElement(e,t,n){const{completion:i}=e;n.root.id=xce(t),n.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:W4(e.score)};let o=[];if(i.kind===19&&J8e.extract(e,o))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=o[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=uO(this._modelService,this._modeService,$n.from({scheme:"fake",path:e.textLabel}),wb.FILE),l=uO(this._modelService,this._modeService,$n.from({scheme:"fake",path:i.detail}),wb.FILE);s.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",s.extraClasses=Are([uO(this._modelService,this._modeService,$n.from({scheme:"fake",path:e.textLabel}),wb.FOLDER),uO(this._modelService,this._modeService,$n.from({scheme:"fake",path:i.detail}),wb.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...hSe(i.kind).split(" ")));i.tags&&i.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,s),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=M7(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=M7(i.label.detail||""),n.detailsLabel.textContent=M7(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?yh(n.detailsLabel):Rc(n.detailsLabel),iq(e)?(n.right.classList.add("can-expand-details"),yh(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Rc(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};HH=X8e([O7(1,aa),O7(2,Pl),O7(3,Fs)],HH);function M7(r){return r.replace(/\r\n|\r|\n/g,"")}var e7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},t7e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const n7e=Oe("editorSuggestWidget.selectedBackground",{dark:RO,light:RO,hc:RO},L("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));class i7e{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof LS}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(us.is(n))return us.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let MN=class zH{constructor(e,t,n,i,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new cc,this._disposables=new Et,this._onDidSelect=new Ae,this._onDidFocus=new Ae,this._onDidHide=new Ae,this._onDidShow=new Ae,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Ae,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Ece,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new r7e(this,e),this._persistedSize=new i7e(t,e);class o{constructor(v,C,S=!1,E=!1){this.persistedSize=v,this.currentSize=C,this.persistHeight=S,this.persistWidth=E}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(p=>{var v,C,S,E;if(this._resize(p.dimension.width,p.dimension.height),a&&(a.persistHeight=a.persistHeight||!!p.north||!!p.south,a.persistWidth=a.persistWidth||!!p.east||!!p.west),!!p.done){if(a){const{itemHeight:k,defaultSize:D}=this.getLayoutInfo(),O=Math.round(k/2);let{width:H,height:V}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-V)<=O)&&(V=(C=(v=a.persistedSize)===null||v===void 0?void 0:v.height)!==null&&C!==void 0?C:D.height),(!a.persistWidth||Math.abs(a.currentSize.width-H)<=O)&&(H=(E=(S=a.persistedSize)===null||S===void 0?void 0:S.width)!==null&&E!==void 0?E:D.width),this._persistedSize.store(new us(H,V))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=st(this.element.domNode,Ct(".message")),this._listElement=st(this.element.domNode,Ct(".tree"));const l=s.createInstance(VH,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Y8e(l,this.editor);const u=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);u();const d=s.createInstance(HH,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Kv("SuggestWidget",this._listElement,{getHeight:p=>this.getLayoutInfo().itemHeight,getTemplateId:p=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:p=>{if(p.isResolved&&this._isDetailsVisible()){const{documentation:v,detail:C}=p.completion,S=wf("{0}{1}",C||"",v?typeof v=="string"?v:v.value:"");return L("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p.textLabel,S)}else return p.textLabel},getWidgetAriaLabel:()=>L("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=s.createInstance(WH,this.element.domNode);const h=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);h(),this._disposables.add(pS(this._list,i,{listInactiveFocusBackground:n7e,listInactiveFocusOutline:Uc})),this._disposables.add(i.onDidColorThemeChange(p=>this._onThemeChange(p))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onTap(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onDidChangeSelection(p=>this._onListSelection(p))),this._disposables.add(this._list.onDidChangeFocus(p=>this._onListFocus(p))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(p=>{p.hasChanged(105)&&(h(),u())})),this._ctxSuggestWidgetVisible=Pi.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Pi.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Pi.MultipleSuggestions.bindTo(n),this._disposables.add(ja(this._details.widget.domNode,"keydown",p=>{this._onDetailsKeydown.fire(p)})),this._disposables.add(this.editor.onMouseDown(p=>this._onEditorMouseDown(p)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],i=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i),this._currentSuggestionDetails=dl(s=>t7e(this,void 0,void 0,function*(){const o=Jw(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);s.onCancellationRequested(()=>o.dispose());const a=yield n.resolve(s);return o.dispose(),a})),this._currentSuggestionDetails.then(()=>{i>=this._list.length||n!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[n]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:xce(i)}))}).catch(Jn)),this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Rc(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=zH.LOADING_MESSAGE,Rc(this._listElement,this._status.element),yh(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=zH.NO_SUGGESTIONS_MESSAGE,Rc(this._listElement,this._status.element),yh(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Rc(this._messageElement),yh(this._listElement,this._status.element),this._show();break;case 4:Rc(this._messageElement),yh(this._listElement,this._status.element),this._show();break;case 5:Rc(this._messageElement),yh(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Jw(()=>this._setState(1),t)))}showSuggestions(e,t,n,i){var s,o;if(this._contentWidget.setPosition(this.editor.getPosition()),(s=this._loadingTimeout)===null||s===void 0||s.dispose(),(o=this._currentSuggestionDetails)===null||o===void 0||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(iq(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,i;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=$P(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,l=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new us(l,a),this._contentWidget.setPreference(2);else{const u=s.width-o.borderHeight-2*o.horizontalPadding;l>u&&(l=u);const d=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:l,h=o.statusBarHeight+this._list.contentHeight+o.borderHeight,p=o.itemHeight+o.statusBarHeight,v=su(this.editor.getDomNode()),C=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),S=v.top+C.top+C.height,E=Math.min(s.height-S-o.verticalPadding,h),k=v.top+C.top-o.verticalPadding,D=Math.min(k,h);let O=Math.min(Math.max(D,E)+o.borderHeight,h);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<p&&(a=p),a>O&&(a=O);const H=150;a>E||this._forceRenderingAbove&&k>H?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),O=D):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),O=E),this.element.preferredSize=new us(d,o.defaultSize.height),this.element.maxSize=new us(u,O),this.element.minSize=new us(220,p),this._cappedHeight=a===h?{wanted:(i=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&i!==void 0?i:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(43),t=Fg(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,s=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new us(430,n+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};MN.LOADING_MESSAGE=L("suggestWidget.loading","Loading...");MN.NO_SUGGESTIONS_MESSAGE=L("suggestWidget.noSuggestions","No suggestions.");MN=e7e([cO(1,Yv),cO(2,Xn),cO(3,Fs),cO(4,Li)],MN);class r7e{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new us(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var s7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class o7e{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),s=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:se.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Gg=class Dce{constructor(e,t,n,i,s,o,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=s,this._logService=o,this._telemetryService=a,this._lineSuffix=new uc,this._toDispose=new Et,this._selectors=new a7e(h=>h.priority),this._telemetryGate=0,this.editor=e,this.model=s.createInstance(BH,this.editor);const l=Pi.InsertMode.bindTo(i);l.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new OE(()=>{const h=this._instantiationService.createInstance(MN,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(E=>this._insertSuggestion(E,0),this));const p=new o8e(this.editor,h,E=>this._insertSuggestion(E,2));this._toDispose.add(p),this._toDispose.add(this.model.onDidSuggest(E=>{E.completionModel.items.length===0&&p.reset()}));const v=Pi.MakesTextEdit.bindTo(this._contextKeyService),C=Pi.HasInsertAndReplaceRange.bindTo(this._contextKeyService),S=Pi.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Bi(()=>{v.reset(),C.reset(),S.reset()})),this._toDispose.add(h.onDidFocus(({item:E})=>{const k=this.editor.getPosition(),D=E.editStart.column,O=k.column;let H=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!E.completion.additionalTextEdits&&!(E.completion.insertTextRules&4)&&O-D===E.completion.insertText.length&&(H=this.editor.getModel().getValueInRange({startLineNumber:k.lineNumber,startColumn:D,endLineNumber:k.lineNumber,endColumn:O})!==E.completion.insertText),v.set(H),C.set(!ze.equals(E.editInsertEnd,E.editReplaceEnd)),S.set(!!E.provider.resolveCompletionItem||!!E.completion.documentation||E.completion.detail!==E.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(E=>{if(E.toKeybinding().equals(new Qw(!0,!1,!1,!1,33))||zi&&E.toKeybinding().equals(new Qw(!1,!1,!1,!0,33))){E.stopPropagation();return}E.toKeybinding().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new OE(()=>this._toDispose.add(new AF(this.editor,this.model)))),this._alternatives=this._toDispose.add(new OE(()=>this._toDispose.add(new xS(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(ON,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new o7e(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(!h.shy){let p=-1;for(const v of this._selectors.itemsOrderedByPriorityDesc)if(p=v.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),p!==-1)break;p===-1&&(p=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items)),this.widget.value.showSuggestions(h.completionModel,p,h.isFrozen,h.auto)}})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let u=Pi.AcceptSuggestionsOnEnter.bindTo(i),d=()=>{const h=this.editor.getOption(1);u.set(h==="on"||h==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}static get(e){return e.getContribution(Dce.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),i=n.getAlternativeVersionId(),{item:s}=e,o=[],a=new Fu;t&1||this.editor.pushUndoStop();const l=this.getOverwriteInfo(s,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),s),Array.isArray(s.completion.additionalTextEdits)){const d=AC.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",s.completion.additionalTextEdits.map(h=>oo.replace(se.lift(h.range),h.text))),d.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!s.isResolved){const d=new Ev(!0);let h;const p=n.onDidChangeContent(E=>{if(E.isFlush){a.cancel(),p.dispose();return}for(let k of E.changes){const D=se.getEndPosition(k.range);(!h||ze.isBefore(D,h))&&(h=D)}});let v=t;t|=2;let C=!1,S=this.editor.onWillType(()=>{S.dispose(),C=!0,v&2||this.editor.pushUndoStop()});o.push(s.resolve(a.token).then(()=>{if(!s.completion.additionalTextEdits||a.token.isCancellationRequested||h&&s.completion.additionalTextEdits.some(k=>ze.isBefore(h,se.getStartPosition(k.range))))return!1;C&&this.editor.pushUndoStop();const E=AC.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",s.completion.additionalTextEdits.map(k=>oo.replace(se.lift(k.range),k.text))),E.restoreRelativeVerticalPositionOfCursor(this.editor),(C||!(v&2))&&this.editor.pushUndoStop(),!0}).then(E=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",d.elapsed(),E),p.dispose(),S.dispose()}))}let{insertText:u}=s.completion;s.completion.insertTextRules&4||(u=TF.escape(u)),Ol.get(this.editor).insert(u,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(s.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),s.completion.command?s.completion.command.id===j2.id?this.model.trigger({auto:!0,shy:!1},!0):(o.push(this._commandService.executeCommand(s.completion.command.id,...s.completion.command.arguments?[...s.completion.command.arguments]:[]).catch(Jn)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,d=>{for(a.cancel();n.canUndo();){i!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(d,3|(t&8?8:0));break}}),this._alertCompletionItem(s),Promise.all(o).finally(()=>{this._reportSuggestionAcceptedTelemetry(n,e),this.model.clear(),a.dispose()})}_reportSuggestionAcceptedTelemetry(e,t){var n;if(this._telemetryGate++%100!==0)return;const i=((n=t.item.provider._debugDisplayName)!==null&&n!==void 0?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:i,basenameHash:kse(Mf(e.uri)).toString(16),languageId:e.getLanguageId(),fileExtension:awe(e.uri)})}getOverwriteInfo(e,t){$r(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,s=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+o,overwriteAfter:s+a}}_alertCompletionItem(e){if(Rd(e.completion.additionalTextEdits)){let t=L("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Il(t)}}triggerSuggest(e,t){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},i=s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=s.editStart.column,l=o.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==s.completion.insertText};yn.once(this.model.onDidTrigger)(s=>{let o=[];yn.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{nr(o),n()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(nr(o),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),u=a.items[l];if(!i(u)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:u,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Gg.ID="editor.contrib.suggestController";Gg=s7e([JL(1,wce),JL(2,js),JL(3,Xn),JL(4,Li),JL(5,$v),JL(6,Uv)],Gg);class a7e{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class j2 extends hn{constructor(){super({id:j2.id,label:L("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:qt.and(ye.writable,ye.hasCompletionItemProvider),kbOpts:{kbExpr:ye.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=Gg.get(t);if(!i)return;let s;n&&typeof n=="object"&&n.auto===!0&&(s=!0),i.triggerSuggest(void 0,s)}}j2.id="editor.action.triggerSuggest";br(Gg.ID,Gg);It(j2);const Vf=100+90,qd=Rl.bindToContribution(Gg.get);Dt(new qd({id:"acceptSelectedSuggestion",precondition:Pi.Visible,handler(r){r.acceptSelectedSuggestion(!0,!1)}}));Al.registerKeybindingRule({id:"acceptSelectedSuggestion",when:qt.and(Pi.Visible,ye.textInputFocus),primary:2,weight:Vf});Al.registerKeybindingRule({id:"acceptSelectedSuggestion",when:qt.and(Pi.Visible,ye.textInputFocus,Pi.AcceptSuggestionsOnEnter,Pi.MakesTextEdit),primary:3,weight:Vf});Pu.appendMenuItem(WC,{command:{id:"acceptSelectedSuggestion",title:L("accept.insert","Insert")},group:"left",order:1,when:Pi.HasInsertAndReplaceRange.toNegated()});Pu.appendMenuItem(WC,{command:{id:"acceptSelectedSuggestion",title:L("accept.insert","Insert")},group:"left",order:1,when:qt.and(Pi.HasInsertAndReplaceRange,Pi.InsertMode.isEqualTo("insert"))});Pu.appendMenuItem(WC,{command:{id:"acceptSelectedSuggestion",title:L("accept.replace","Replace")},group:"left",order:1,when:qt.and(Pi.HasInsertAndReplaceRange,Pi.InsertMode.isEqualTo("replace"))});Dt(new qd({id:"acceptAlternativeSelectedSuggestion",precondition:qt.and(Pi.Visible,ye.textInputFocus),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:1027,secondary:[1026]},handler(r){r.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:WC,group:"left",order:2,when:qt.and(Pi.HasInsertAndReplaceRange,Pi.InsertMode.isEqualTo("insert")),title:L("accept.replace","Replace")},{menuId:WC,group:"left",order:2,when:qt.and(Pi.HasInsertAndReplaceRange,Pi.InsertMode.isEqualTo("replace")),title:L("accept.insert","Insert")}]}));Ki.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");Dt(new qd({id:"hideSuggestWidget",precondition:Pi.Visible,handler:r=>r.cancelSuggestWidget(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:9,secondary:[1033]}}));Dt(new qd({id:"selectNextSuggestion",precondition:qt.and(Pi.Visible,Pi.MultipleSuggestions),handler:r=>r.selectNextSuggestion(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));Dt(new qd({id:"selectNextPageSuggestion",precondition:qt.and(Pi.Visible,Pi.MultipleSuggestions),handler:r=>r.selectNextPageSuggestion(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:12,secondary:[2060]}}));Dt(new qd({id:"selectLastSuggestion",precondition:qt.and(Pi.Visible,Pi.MultipleSuggestions),handler:r=>r.selectLastSuggestion()}));Dt(new qd({id:"selectPrevSuggestion",precondition:qt.and(Pi.Visible,Pi.MultipleSuggestions),handler:r=>r.selectPrevSuggestion(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));Dt(new qd({id:"selectPrevPageSuggestion",precondition:qt.and(Pi.Visible,Pi.MultipleSuggestions),handler:r=>r.selectPrevPageSuggestion(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:11,secondary:[2059]}}));Dt(new qd({id:"selectFirstSuggestion",precondition:qt.and(Pi.Visible,Pi.MultipleSuggestions),handler:r=>r.selectFirstSuggestion()}));Dt(new qd({id:"toggleSuggestionDetails",precondition:Pi.Visible,handler:r=>r.toggleSuggestionDetails(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:WC,group:"right",order:1,when:qt.and(Pi.DetailsVisible,Pi.CanResolve),title:L("detail.more","show less")},{menuId:WC,group:"right",order:1,when:qt.and(Pi.DetailsVisible.toNegated(),Pi.CanResolve),title:L("detail.less","show more")}]}));Dt(new qd({id:"toggleExplainMode",precondition:Pi.Visible,handler:r=>r.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));Dt(new qd({id:"toggleSuggestionFocus",precondition:Pi.Visible,handler:r=>r.toggleSuggestionFocus(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:2570,mac:{primary:778}}}));Dt(new qd({id:"insertBestCompletion",precondition:qt.and(ye.textInputFocus,qt.equals("config.editor.tabCompletion","on"),ON.AtEnd,Pi.Visible.toNegated(),xS.OtherSuggestions.toNegated(),Ol.InSnippetMode.toNegated()),handler:(r,e)=>{r.triggerSuggestAndAcceptBest(Wc(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Vf,primary:2}}));Dt(new qd({id:"insertNextSuggestion",precondition:qt.and(ye.textInputFocus,qt.equals("config.editor.tabCompletion","on"),xS.OtherSuggestions,Pi.Visible.toNegated(),Ol.InSnippetMode.toNegated()),handler:r=>r.acceptNextSuggestion(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:2}}));Dt(new qd({id:"insertPrevSuggestion",precondition:qt.and(ye.textInputFocus,qt.equals("config.editor.tabCompletion","on"),xS.OtherSuggestions,Pi.Visible.toNegated(),Ol.InSnippetMode.toNegated()),handler:r=>r.acceptPrevSuggestion(),kbOpts:{weight:Vf,kbExpr:ye.textInputFocus,primary:1026}}));It(class extends hn{constructor(){super({id:"editor.action.resetSuggestSize",label:L("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(r,e){Gg.get(e).resetWidgetSize()}});function l7e(r,e){return{object:r,dispose:()=>e==null?void 0:e.dispose()}}function u7e(r,e){return(t,n)=>e(r(t),r(n))}function c7e(){return(r,e)=>r-e}function d7e(r,e){let t;for(const n of r)(t===void 0||e(n,t)>0)&&(t=n);return t}class h7e extends Je{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new Ae,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new Qr(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(i=>{i.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(i=>{i.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=Gg.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(o,a,l)=>{const u=this.editor.getModel(),d=cP(u,this.suggestControllerPreselector());if(!d)return-1;const h=ze.lift(a),p=l.map((C,S)=>{const E=Eee(n,h,C,this.isShiftKeyPressed),k=cP(u,E==null?void 0:E.normalizedInlineCompletion);if(!k)return;const D=f7e(d.range,k.range)&&d.text.startsWith(k.text);return{index:S,valid:D,prefixLength:k.text.length,suggestItem:C}}).filter(C=>C&&C.valid),v=d7e(p,u7e(C=>C.prefixLength,c7e()));return v?v.index:-1}}));let i=!1;const s=()=>{i||(i=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(yn.once(n.model.onDidTrigger)(o=>{s()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;g7e(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=Gg.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return Eee(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Gg.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Gg.get(this.editor);e&&e.forceRenderingAbove()}}function f7e(r,e){return e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&(e.endLineNumber<r.endLineNumber||e.endLineNumber===r.endLineNumber&&e.endColumn<=r.endColumn)}function g7e(r,e){return r===e?!0:!r||!e?!1:r.completionItemKind===e.completionItemKind&&r.isSnippetText===e.isSnippetText&&DBe(r.normalizedInlineCompletion,e.normalizedInlineCompletion)}function Eee(r,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:se.fromPositions(e,e),text:""}};let{insertText:i}=t.completion,s=!1;if(t.completion.insertTextRules&4){const a=new TF().parse(i),l=r.editor.getModel();if(a.children.length>100)return;X_.adjustWhitespace(l,e,a,!0,!0),i=a.toString(),s=!0}const o=r.getOverwriteInfo(t,n);return{isSnippetText:s,completionItemKind:t.completion.kind,normalizedInlineCompletion:{text:i,range:se.fromPositions(e.delta(0,-o.overwriteBefore),e.delta(0,Math.max(o.overwriteAfter,0)))}}}var xee=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class p7e extends gce{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new h7e(this.editor,()=>{var n,i;return(i=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||i===void 0?void 0:i.toLiveInlineCompletion()})),this.updateOperation=this._register(new uc),this.updateCacheSoon=this._register(new Qr(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const i=this.ghostText;i&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,m7e(i.parts.map(s=>s.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(Bi(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return xee(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.text,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition(),i=dl(o=>xee(this,void 0,void 0,function*(){let a;try{a=yield _ce(n,this.editor.getModel(),{triggerKind:bf.Automatic,selectedSuggestionInfo:t},o)}catch(l){Jn(l);return}o.isCancellationRequested||(this.cache.setValue(this.editor,a,bf.Automatic),this.onDidChangeEmitter.fire())})),s=new mce(i,bf.Automatic);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const i=this.isSuggestionPreviewEnabled(),s=cP(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),o=this.suggestionInlineCompletionSource.state,a=cP(this.editor.getModel(),(n=o==null?void 0:o.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),l=s&&a&&s.text.startsWith(a.text)&&s.range.equalsRange(a.range);if(!i&&!l)return;const u=l?s:a||s,d=l?u.text.length-a.text.length:0;return this.toGhostText(u,d)}toGhostText(e,t){const n=this.editor.getOptions().get(105).previewMode;return e?pce(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new fce(e.range.endLineNumber,[],this.minReservedLineCount):void 0}}function m7e(r){return r.reduce((e,t)=>e+t,0)}var _7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},v7e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},b7e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class C7e extends Je{constructor(){super(...arguments),this.onDidChangeEmitter=new Ae,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new uc)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?l7e(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let UH=class extends C7e{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new y7e),this.suggestWidgetAdapterModel=this._register(new p7e(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new RH(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(i=>e.containsPosition(new ze(n.lineNumber,i.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(bf.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return b7e(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};UH=_7e([v7e(1,js)],UH);class y7e extends Je{constructor(){super(...arguments),this.onDidChangeEmitter=new Ae,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new uc)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new OBe(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var w7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Dee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},R7;const Iee=(R7=window.trustedTypes)===null||R7===void 0?void 0:R7.createPolicy("editorGhostText",{createHTML:r=>r});let $H=class extends Je{constructor(e,t,n,i){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=i,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(S7e,this.editor)),this.additionalLinesWidget=this._register(new L7e(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(29)||s.hasChanged(104)||s.hasChanged(87)||s.hasChanged(82)||s.hasChanged(44)||s.hasChanged(43)||s.hasChanged(58))&&this.update()})),this._register(Bi(()=>{var s;this.disposed=!0,this.update(),(s=this.viewMoreContentWidget)===null||s===void 0||s.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,i=new Array;function s(u,d){if(i.length>0){const h=i[i.length-1];d&&h.decorations.push(new xh(h.content.length+1,h.content.length+1+u[0].length,d,0)),h.content+=u[0],u=u.slice(1)}for(const h of u)i.push({content:h,decorations:d?[new xh(1,h.length+1,d,0)]:[]})}const o=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(const u of t.parts){let d=u.lines;a===void 0?(n.push({column:u.column,text:d[0],preview:u.preview}),d=d.slice(1)):s([o.substring(l,u.column-1)],void 0),d.length>0&&(s(d,"ghost-text"),a===void 0&&u.column<=o.length&&(a=u.column)),l=u.column-1}a!==void 0&&s([o.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,i,t.additionalReservedLineCount),t.parts.some(u=>u.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new ze(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const i=this.editor.getOption(43),s=document.createElement("div");s.className="suggest-preview-additional-widget",lc.applyFontInfoSlow(s,i);const o=document.createElement("span");o.className="content-spacer",o.append(t),s.append(o);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("  "),s.append(a);const l=new Et,u=document.createElement("div");return u.className="button suggest-preview-text",u.append(`+${n} lines`),l.add(ja(u,"mousedown",d=>{var h;(h=this.model)===null||h===void 0||h.setExpanded(!0),d.preventDefault(),this.editor.focus()})),s.append(u),new x7e(this.editor,e,s,l)}};$H=w7e([Dee(2,Li),Dee(3,Pl)],$H);class S7e{constructor(e){this.editor=e,this.decorationIds=[],this.disposableStore=new Et}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){if(this.disposableStore.clear(),!this.editor.getModel())return;const s=new Array;n&&s.push({range:se.fromPositions(new ze(e,n.column),new ze(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(o=>({range:se.fromPositions(new ze(e,o.column)),options:{description:"ghost-text",after:{content:o.text,inlineClassName:o.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}})).concat(s))}}class L7e{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:s}=i.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");E7e(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l})}})}}function E7e(r,e,t,n,i){const s=n.get(29),o=n.get(104),a="none",l=n.get(82),u=n.get(44),d=n.get(43),h=n.get(58),p=lS(1e4);p.appendASCIIString('<div class="suggest-preview-text">');for(let S=0,E=t.length;S<E;S++){const k=t[S],D=k.content;p.appendASCIIString('<div class="view-line'),p.appendASCIIString('" style="top:'),p.appendASCIIString(String(S*h)),p.appendASCIIString('px;width:1000000px;">');const O=LU(D),H=GP(D),V=$a.createEmpty(D,i);f4(new eL(d.isMonospace&&!s,d.canUseHalfwidthRightwardsArrow,D,!1,O,H,0,V,k.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,o,a,l,u!==Sh.OFF,null),p),p.appendASCIIString("</div>")}p.appendASCIIString("</div>"),lc.applyFontInfoSlow(r,d);const v=p.build(),C=Iee?Iee.createHTML(v):v;r.innerHTML=C}class x7e extends Je{constructor(e,t,n,i){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(i),this._register(Bi(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}ds((r,e)=>{const t=r.getColor(OLe);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=r.getColor(MLe);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const i=r.getColor(ALe);i&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${i}; }`))});var Ice=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jH=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},OF=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let qa=class Tce extends Je{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new uc),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(Tce.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(qH,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return OF(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};qa.inlineSuggestionVisible=new gn("inlineSuggestionVisible",!1,L("inlineSuggestionVisible","Whether an inline suggestion is visible"));qa.inlineSuggestionHasIndentation=new gn("inlineSuggestionHasIndentation",!1,L("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));qa.inlineSuggestionHasIndentationLessThanTabSize=new gn("inlineSuggestionHasIndentationLessThanTabSize",!0,L("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));qa.ID="editor.contrib.ghostTextController";qa=Ice([jH(1,Li)],qa);class D7e{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=qa.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=qa.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=qa.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let qH=class extends Je{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new D7e(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(UH,this.editor)),this.widget=this._register(this.instantiationService.createInstance($H,this.editor,this.model)),this._register(Bi(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const i=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&i&&i.parts.length>0){const{column:s,lines:o}=i.parts[0],a=o[0],l=this.editor.getModel().getLineIndentColumn(i.lineNumber);if(s<=l){let d=oc(a);d===-1&&(d=a.length-1),t=d>0;const h=this.editor.getModel().getOptions().tabSize;n=ls.visibleColumnFromColumn(a,d+1,h)<h}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};qH=Ice([jH(1,Li),jH(2,Xn)],qH);const kce=Rl.bindToContribution(qa.get),RN=new kce({id:hce,precondition:qa.inlineSuggestionVisible,handler(r){r.commit(),r.editor.focus()}});Dt(RN);Al.registerKeybindingRule({primary:2,weight:200,id:RN.id,when:qt.and(RN.precondition,ye.tabMovesFocus.toNegated(),qa.inlineSuggestionHasIndentationLessThanTabSize)});Dt(new kce({id:"editor.action.inlineSuggest.hide",precondition:qa.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(r){r.hide()}}));class Ax extends hn{constructor(){super({id:Ax.ID,label:L("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:qt.and(ye.writable,qa.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return OF(this,void 0,void 0,function*(){const n=qa.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}Ax.ID="editor.action.inlineSuggest.showNext";class Ox extends hn{constructor(){super({id:Ox.ID,label:L("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:qt.and(ye.writable,qa.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return OF(this,void 0,void 0,function*(){const n=qa.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}Ox.ID="editor.action.inlineSuggest.showPrevious";class I7e extends hn{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:L("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:ye.writable})}run(e,t){return OF(this,void 0,void 0,function*(){const n=qa.get(t);n&&n.trigger()})}}br(qa.ID,qa);It(I7e);It(Ax);It(Ox);var T7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},eE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class k7e{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let KH=class{constructor(e,t,n,i,s,o,a,l){this._editor=e,this._hover=t,this._commandService=n,this._menuService=i,this._contextKeyService=s,this._modeService=o,this._openerService=a,this.accessibilityService=l}suggestHoverAnchor(e){const t=qa.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new E7(1e3,this,se.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new E7(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new E7(1e3,this,e.target.range):null}computeSync(e,t){const n=qa.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new k7e(this,e.range,n)]:[]}renderHoverParts(e,t,n){const i=new Et,s=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(s,t,i);const o=i.add(this._menuService.createMenu(vn.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:L("showNextInlineSuggestion","Next"),commandId:Ax.ID,run:()=>this._commandService.executeCommand(Ax.ID)}),l=n.addAction({label:L("showPreviousInlineSuggestion","Previous"),commandId:Ox.ID,run:()=>this._commandService.executeCommand(Ox.ID)});n.addAction({label:L("acceptInlineSuggestion","Accept"),commandId:RN.id,run:()=>this._commandService.executeCommand(RN.id)});const u=[a,l];for(const d of u)d.setEnabled(!1);s.hasMultipleSuggestions().then(d=>{for(const h of u)h.setEnabled(d)});for(const[d,h]of o.getActions())for(const p of h)p instanceof DC&&n.addAction({label:p.label,commandId:p.item.id,run:()=>this._commandService.executeCommand(p.item.id)});return i}renderScreenReaderText(e,t,n){var i,s;const o=Ct,a=o("div.hover-row.markdown-hover"),l=st(a,o("div.hover-contents")),u=n.add(new zb({editor:this._editor},this._modeService,this._openerService)),d=p=>{n.add(u.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const v=L("inlineSuggestionFollows","Suggestion:"),C=n.add(u.render(new Wb().appendText(v).appendCodeblock("text",p)));l.replaceChildren(C.element)},h=(s=(i=e.controller.activeModel)===null||i===void 0?void 0:i.inlineCompletionsModel)===null||s===void 0?void 0:s.ghostText;if(h){const p=this._editor.getModel().getLineContent(h.lineNumber);d(h.renderForScreenReader(p))}t.appendChild(a)}};KH=T7e([eE(2,js),eE(3,ZS),eE(4,Xn),eE(5,Pl),eE(6,Hd),eE(7,Kc)],KH);var N7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},A7e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let GH=class extends Je{constructor(e,t,n={},i){var s;super(),this._link=t,this._enabled=!0,this.el=st(e,Ct("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const o=this._register(new Hr(this.el,"click")),a=this._register(new Hr(this.el,"keypress")),l=yn.chain(a.event).map(h=>new Ts(h)).filter(h=>h.keyCode===3).event,u=this._register(new Hr(this.el,as.Tap)).event;this._register(Rr.addTarget(this.el));const d=yn.any(o.event,l,u);this._register(d(h=>{this.enabled&&(Ir.stop(h,!0),n!=null&&n.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};GH=N7e([A7e(3,Hd)],GH);ds((r,e)=>{const t=r.getColor(o4);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=r.getColor(a4);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var Nce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ace=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const O7e=26;let YH=class extends Je{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(ZH))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{this.hide(),e.onClose&&e.onClose()}})),this._editor.setBanner(this.banner.element,O7e)}};YH=Nce([Ace(1,Li)],YH);let ZH=class extends Je{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(zb,{}),this.element=Ct("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=Ct("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Ca(this.element)}show(e){Ca(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=st(this.element,Ct("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(Ct(`div${vs.asCSSSelector(e.icon)}`));const i=st(this.element,Ct("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=st(this.element,Ct("div.message-actions-container")),e.actions)for(const o of e.actions)this._register(this.instantiationService.createInstance(GH,this.messageActionsContainer,Object.assign(Object.assign({},o),{tabIndex:-1}),{}));const s=st(this.element,Ct("div.action-container"));this.actionBar=this._register(new Nv(s)),this.actionBar.push(this._register(new Ef("banner.close","Close Banner",vs.asClassName(xoe),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};ZH=Nce([Ace(0,Li)],ZH);var rq=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tx=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},mm=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const M7e=hl("extensions-warning-message",Ie.warning,L("warningIcon","Icon shown with a warning message in the extensions editor."));let Mx=class extends Je{constructor(e,t,n,i){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const o=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=o)a={message:L("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new bD};else if(s.ambiguousCharacterCount>=o)a={message:L("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new _D};else if(s.invisibleCharacterCount>=o)a={message:L("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new vD};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:M7e,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(YH,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(112),this._register(n.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(112)&&(this._options=e.getOption(112),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=R7e(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new XH(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new P7e(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};Mx.ID="editor.contrib.unicodeHighlighter";Mx=rq([tx(1,Oh),tx(2,$ae),tx(3,Li)],Mx);function R7e(r,e){var t;return{nonBasicASCII:e.nonBasicASCII===G_?!r:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===G_?!r:e.includeComments,allowedCharacters:(t=e.allowedCharacters)!==null&&t!==void 0?t:{}}}let XH=class extends Je{constructor(e,t,n,i){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new Qr(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:this._options.includeComments?fP:hP});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),n))})}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e);if(!w$(t,{range:n,options:this._options.includeComments?fP:hP,id:e,ownerId:0}))return null;const i=t.getValueInRange(n);return{reason:Oce(i,this._options)}}};XH=rq([tx(3,Oh)],XH);class P7e extends Je{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new Qr(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const s=O$.computeUnicodeHighlights(this._model,this._options,i);for(const o of s.ranges)n.ranges.push(o);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||s.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:this._options.includeComments?fP:hP});this._updateState(n),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),t))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e),i=t.getValueInRange(n);return w$(t,{range:n,options:this._options.includeComments?fP:hP,id:e,ownerId:0})?{reason:Oce(i,this._options)}:null}}let QH=class{constructor(e,t,n,i){this._editor=e,this._hover=t,this._modeService=n,this._openerService=i}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(Mx.ID),s=[];let o=300;for(const a of t){let h=function(k){let D=`\`U+${k.toString(16).padStart(4,"0")}\``;return xb.isInvisibleCharacter(k)||(D+=` "${`${F7e(k)}`}"`),D};const l=i.getDecorationInfo(a.id);if(!l)continue;const d=n.getValueInRange(a.range).codePointAt(0),p=h(d);let v;switch(l.reason.kind){case 0:v=L("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",p,h(l.reason.confusableWith.codePointAt(0)));break;case 1:v=L("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",p);break;case 2:v=L("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",p);break}const C={codePoint:d,reason:l.reason.kind},S=L("unicodeHighlight.adjustSettings","Adjust settings"),E=[{value:`${v} [${S}](command:${q2.ID}?${encodeURIComponent(JSON.stringify(C))})`,isTrusted:!0}];s.push(new jT(this,a.range,E,o++))}return s}renderHoverParts(e,t,n){return oce(e,t,this._editor,this._hover,this._modeService,this._openerService)}};QH=rq([tx(2,Pl),tx(3,Hd)],QH);function F7e(r){return r===96?"`` ` ``":"`"+String.fromCodePoint(r)+"`"}function Oce(r,e){return O$.computeUnicodeHighlightReason(r,e)}const hP=mi.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Ps(aye),position:Wd.Center},minimap:{color:Ps(hye),position:Pd.Inline},hideInCommentTokens:!0}),fP=mi.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Ps(u4),position:Wd.Center},minimap:{color:Ps(UU),position:Pd.Inline}});class _D extends hn{constructor(){super({id:_D.ID,label:L("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=L("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return mm(this,void 0,void 0,function*(){let i=e==null?void 0:e.get(es);i&&this.runAction(i)})}runAction(e){return mm(this,void 0,void 0,function*(){yield e.updateValue(sv.ambiguousCharacters,!1,1)})}}_D.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class vD extends hn{constructor(){super({id:vD.ID,label:L("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=L("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return mm(this,void 0,void 0,function*(){let i=e==null?void 0:e.get(es);i&&this.runAction(i)})}runAction(e){return mm(this,void 0,void 0,function*(){yield e.updateValue(sv.invisibleCharacters,!1,1)})}}vD.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class bD extends hn{constructor(){super({id:bD.ID,label:L("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=L("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return mm(this,void 0,void 0,function*(){let i=e==null?void 0:e.get(es);i&&this.runAction(i)})}runAction(e){return mm(this,void 0,void 0,function*(){yield e.updateValue(sv.nonBasicASCII,!1,1)})}}bD.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class q2 extends hn{constructor(){super({id:q2.ID,label:L("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return mm(this,void 0,void 0,function*(){const{codePoint:i,reason:s}=n,o=String.fromCodePoint(i),a=e.get(Wf),l=e.get(es);function u(p){return xb.isInvisibleCharacter(p)?L("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",`U+${p.toString(16)}`):L("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`U+${p.toString(16)} "${o}"`)}const d=[{label:u(i),run:()=>B7e(l,[i])}];if(s===0){const p=new _D;d.push({label:p.label,run:()=>mm(this,void 0,void 0,function*(){return p.runAction(l)})})}else if(s===1){const p=new vD;d.push({label:p.label,run:()=>mm(this,void 0,void 0,function*(){return p.runAction(l)})})}else if(s===2){const p=new bD;d.push({label:p.label,run:()=>mm(this,void 0,void 0,function*(){return p.runAction(l)})})}else W7e(s);const h=yield a.pick(d,{title:L("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});h&&(yield h.run())})}}q2.ID="editor.action.unicodeHighlight.showExcludeOptions";function B7e(r,e){return mm(this,void 0,void 0,function*(){const t=r.getValue(sv.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;yield r.updateValue(sv.allowedCharacters,n,1)})}function W7e(r){throw new Error(`Unexpected value: ${r}`)}It(_D);It(vD);It(bD);It(q2);br(Mx.ID,Mx);var Mce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},aM=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Tee=Ct;let JH=class extends Je{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=Tee("div.hover-row.status-bar"),this.actionsElement=st(this.hoverElement,Tee("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(Qj.render(this.actionsElement,e,n))}append(e){const t=st(this.actionsElement,e);return this._hasContent=!0,t}};JH=Mce([aM(0,ks)],JH);class gP{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),i=t.range.startLineNumber,s=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===i?o.range.startColumn:1,l=o.range.endLineNumber===i?o.range.endColumn:s;if(o.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Va.EMPTY;const n=gP._getLineDecorations(this._editor,t);return Va.merge(this._participants.map(i=>this._computeAsync(i,n,t,e)))}_computeAsync(e,t,n,i){return e.computeAsync?e.computeAsync(n,t,i):Va.EMPTY}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=gP._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return nD(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let aC=class ez extends Ah{constructor(e,t,n,i,s){super(),this._hoverVisibleKey=t,this._keybindingService=i,this._contextKeyService=s,this.allowEditorOverflow=!0,this._participants=[n.createInstance(EH,e,this),n.createInstance(DH,e,this),n.createInstance(KH,e,this),n.createInstance(QH,e,this),n.createInstance(MH,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new Jue),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,o=>{o.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._messagesAreComplete=!1,this._lastAnchor=null,this._computer=new gP(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new tce(this._computer,o=>this._withResult(o,!0),null,o=>this._withResult(o,!1),this._editor.getOption(52).delay),this._register(ja(this.getDomNode(),xn.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(ja(this.getDomNode(),xn.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(Qs.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return ez.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&typeof i.horizontalDistanceToText=="number"&&i.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const i of this._participants)if(typeof i.suggestHoverAnchor=="function"){const s=i.suggestHoverAnchor(e);s&&n.push(s)}if(this._shouldShowAt(e)&&e.target.range){const s=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new se(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new ZJ(0,s))}return n.length===0?!1:(n.sort((i,s)=>s.priority-i.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(Pi.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new ZJ(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const i=this._messages.filter(s=>s.isValidForHoverAnchor(e));if(i.length===0)this.hide();else{if(i.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,i)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._messagesAreComplete=t,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,i=t[0].range,s=null,o=document.createDocumentFragment();const a=new Et,l=new Map;for(const d of t)n=Math.min(n,d.range.startColumn),i=se.plusRange(i,d.range),d.forceShowAtRange&&(s=d.range),l.has(d.owner)||l.set(d.owner,[]),l.get(d.owner).push(d);const u=a.add(new JH(this._keybindingService));for(const d of this._participants)if(l.has(d)){const h=l.get(d);a.add(d.renderHoverParts(h,o,u))}u.hasContent&&o.appendChild(u.hoverElement),this._renderDisposable=a,o.hasChildNodes()&&(s?this._showAt(s.getStartPosition(),s,this._shouldFocus):this._showAt(new ze(e.range.startLineNumber,n),i,this._shouldFocus),this._updateContents(o)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,i?[{range:i,options:ez._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};aC.ID="editor.contrib.modesContentHoverWidget";aC._DECORATION_OPTIONS=mi.register({description:"content-hover-highlight",className:"hoverHighlight"});aC=Mce([aM(2,Li),aM(3,ks),aM(4,Xn)],aC);const kee=Ct;class V7e{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=i=>({value:i}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const s=i.options.glyphMarginHoverMessage;!s||wN(s)||n.push(...NU(s).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class Dw extends Ah{constructor(e,t,n=B2e){super(),this._renderDisposeables=this._register(new Et),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new Jue),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new zb({editor:this._editor},t,n)),this._computer=new V7e(this._editor),this._hoverOperation=new tce(this._computer,i=>this._withResult(i),void 0,i=>this._withResult(i),300),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Dw.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),s=this._editor.getOption(58),o=this._hover.containerDomNode.clientHeight,a=n-i-(o-s)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const s=kee("div.hover-row.markdown-hover"),o=st(s,kee("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));o.appendChild(a.element),n.appendChild(s)}this._updateContents(n),this._showAt(e)}}Dw.ID="editor.contrib.modesGlyphHoverWidget";var H7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let VC=class Rce{constructor(e,t,n,i,s){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=i,this._toUnhook=new Et,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(o=>{o.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=ye.hoverVisible.bindTo(s)}static get(e){return e.getContribution(Rce.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===aC.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===Dw.ID||(t!==12&&e.target.detail!==Dw.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,i,s,o;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===aC.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===aC.ID&&(!((i=this._contentWidget)===null||i===void 0)&&i.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===Dw.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(s=this._glyphWidget)===null||s===void 0||s.hide();return}if(a===2&&e.target.position){(o=this._contentWidget)===null||o===void 0||o.hide(),this._glyphWidget||(this._glyphWidget=new Dw(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(aC,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};VC.ID="editor.contrib.hover";VC=H7e([dO(1,Li),dO(2,Hd),dO(3,Pl),dO(4,Xn)],VC);class z7e extends hn{constructor(){super({id:"editor.action.showHover",label:L({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=VC.get(t);if(!n)return;const i=t.getPosition(),s=new se(i.lineNumber,i.column,i.lineNumber,i.column),o=t.getOption(2)===2;n.showContentHover(s,1,o)}}class U7e extends hn{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:L({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=VC.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const s=new se(i.lineNumber,i.column,i.lineNumber,i.column);ES.get(t).startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(s,1,!0)})}}br(VC.ID,VC);It(z7e);It(U7e);ds((r,e)=>{const t=r.getColor(wCe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=r.getColor(oS);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const i=r.getColor(zU);i&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`));const s=r.getColor(o4);s&&e.addRule(`.monaco-editor .monaco-hover a { color: ${s}; }`);const o=r.getColor(a4);o&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${o}; }`);const a=r.getColor(HU);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=r.getColor(SCe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const u=r.getColor(qre);u&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${u}; }`)});class tz extends Je{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){var t;if(e.target.type!==6||![...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))||!e.target.range)return;const s=this._editor.getContribution(VC.ID);if(!s.isColorPickerVisible()){const o=new se(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);s.showContentHover(o,0,!1)}}}tz.ID="editor.contrib.colorContribution";br(tz.ID,tz);class lC{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,s=e.length;if(n+i>s)return!1;for(let o=0;o<i;o++){const a=e.charCodeAt(n+o),l=t.charCodeAt(o);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,s,o){const a=e.startLineNumber,l=e.startColumn,u=e.endLineNumber,d=e.endColumn,h=s.getLineContent(a),p=s.getLineContent(u);let v=h.lastIndexOf(t,l-1+t.length),C=p.indexOf(n,d-1-n.length);if(v!==-1&&C!==-1)if(a===u)h.substring(v+t.length,C).indexOf(n)>=0&&(v=-1,C=-1);else{const E=h.substring(v+t.length),k=p.substring(0,C);(E.indexOf(n)>=0||k.indexOf(n)>=0)&&(v=-1,C=-1)}let S;v!==-1&&C!==-1?(i&&v+t.length<h.length&&h.charCodeAt(v+t.length)===32&&(t=t+" "),i&&C>0&&p.charCodeAt(C-1)===32&&(n=" "+n,C-=1),S=lC._createRemoveBlockCommentOperations(new se(a,v+t.length+1,u,C+1),t,n)):(S=lC._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=S.length===1?n:null);for(const E of S)o.addTrackedEditOperation(E.range,E.text)}static _createRemoveBlockCommentOperations(e,t,n){let i=[];return se.isEmpty(e)?i.push(oo.delete(new se(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(oo.delete(new se(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(oo.delete(new se(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){let s=[];return se.isEmpty(e)?s.push(oo.replace(new se(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(s.push(oo.insert(new ze(e.startLineNumber,e.startColumn),t+(i?" ":""))),s.push(oo.insert(new ze(e.endLineNumber,e.endColumn),(i?" ":"")+n))),s}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenizeIfCheap(n);const s=e.getLanguageIdAtPosition(n,i),o=hr.getComments(s);!o||!o.blockCommentStartToken||!o.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],s=n[1];return new un(i.range.endLineNumber,i.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const i=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new un(i.endLineNumber,i.endColumn+s,i.endLineNumber,i.endColumn+s)}}}class ab{constructor(e,t,n,i,s,o){this._selection=e,this._tabSize=t,this._type=n,this._insertSpace=i,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=o||!1}static _gatherPreflightCommentStrings(e,t,n){e.tokenizeIfCheap(t);const i=e.getLanguageIdAtPosition(t,1),s=hr.getComments(i),o=s?s.lineCommentToken:null;if(!o)return null;let a=[];for(let l=0,u=n-t+1;l<u;l++)a[l]={ignore:!1,commentStr:o,commentStrOffset:0,commentStrLength:o.length};return a}static _analyzeLines(e,t,n,i,s,o,a){let l=!0,u;e===0?u=!0:e===1?u=!1:u=!0;for(let d=0,h=i.length;d<h;d++){const p=i[d],v=s+d;if(v===s&&a){p.ignore=!0;continue}const C=n.getLineContent(v),S=oc(C);if(S===-1){p.ignore=o,p.commentStrOffset=C.length;continue}if(l=!1,p.ignore=!1,p.commentStrOffset=S,u&&!lC._haystackHasNeedleAtOffset(C,p.commentStr,S)&&(e===0?u=!1:e===1||(p.ignore=!0)),u&&t){const E=S+p.commentStrLength;E<C.length&&C.charCodeAt(E)===32&&(p.commentStrLength+=1)}}if(e===0&&l){u=!1;for(let d=0,h=i.length;d<h;d++)i[d].ignore=!1}return{supported:!0,shouldRemoveComments:u,lines:i}}static _gatherPreflightData(e,t,n,i,s,o,a){const l=ab._gatherPreflightCommentStrings(n,i,s);return l===null?{supported:!1}:ab._analyzeLines(e,t,n,l,i,o,a)}_executeLineComments(e,t,n,i){let s;n.shouldRemoveComments?s=ab._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(ab._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._tabSize),s=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const o=new ze(i.positionLineNumber,i.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),se.isEmpty(s[a].range)&&se.getStartPosition(s[a].range).equals(o)&&e.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let s=t.startLineNumber,o=t.endLineNumber,a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),l=e.getLineContent(s).lastIndexOf(n,a-1),u=e.getLineContent(o).indexOf(i,t.endColumn-1-n.length);return l!==-1&&u===-1&&(u=e.getLineContent(s).indexOf(i,l+n.length),o=s),l===-1&&u!==-1&&(l=e.getLineContent(o).lastIndexOf(n,u),s=o),t.isEmpty()&&(l===-1||u===-1)&&(l=e.getLineContent(s).indexOf(n),l!==-1&&(u=e.getLineContent(s).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+n.length)===32&&(n+=" "),u!==-1&&e.getLineContent(o).charCodeAt(u-1)===32&&(i=" "+i,u-=1),l!==-1&&u!==-1?lC._createRemoveBlockCommentOperations(new se(s,l+n.length+1,o,u+1),n,i):null}_executeBlockComment(e,t,n){e.tokenizeIfCheap(n.startLineNumber);let i=e.getLanguageIdAtPosition(n.startLineNumber,1),s=hr.getComments(i);if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const o=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,o,a);if(!l){if(n.isEmpty()){const u=e.getLineContent(n.startLineNumber);let d=oc(u);d===-1&&(d=u.length),l=lC._createAddBlockCommentOperations(new se(n.startLineNumber,d+1,n.startLineNumber,u.length+1),o,a,this._insertSpace)}else l=lC._createAddBlockCommentOperations(new se(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),o,a,this._insertSpace);l.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=t.trackSelection(n);for(const u of l)t.addEditOperation(u.range,u.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new se(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=ab._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new un(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];o.ignore||n.push(oo.delete(new se(t+i,o.commentStrOffset+1,t+i,o.commentStrOffset+o.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[];const i=this._insertSpace?" ":"";for(let s=0,o=e.length;s<o;s++){const a=e[s];a.ignore||n.push(oo.insert(new ze(t+s,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let s=1073741824,o,a;for(let l=0,u=t.length;l<u;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(let p=0,v=t[l].commentStrOffset;h<s&&p<v;p++)h=ab.nextVisibleColumn(h,i,d.charCodeAt(p)===9,1);h<s&&(s=h)}s=Math.floor(s/i)*i;for(let l=0,u=t.length;l<u;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(o=0,a=t[l].commentStrOffset;h<s&&o<a;o++)h=ab.nextVisibleColumn(h,i,d.charCodeAt(o)===9,1);h>s?t[l].commentStrOffset=o-1:t[l].commentStrOffset=o}}}class sq extends hn{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=[],s=n.getOptions(),o=t.getOption(19),a=t.getSelections().map((u,d)=>({selection:u,index:d,ignoreFirstLine:!1}));a.sort((u,d)=>se.compareRangesUsingStarts(u.selection,d.selection));let l=a[0];for(let u=1;u<a.length;u++){const d=a[u];l.selection.endLineNumber===d.selection.startLineNumber&&(l.index<d.index?d.ignoreFirstLine=!0:(l.ignoreFirstLine=!0,l=d))}for(const u of a)i.push(new ab(u.selection,s.tabSize,this._type,o.insertSpace,o.ignoreEmptyLines,u.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class $7e extends sq{constructor(){super(0,{id:"editor.action.commentLine",label:L("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:vn.MenubarEditMenu,group:"5_insert",title:L({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class j7e extends sq{constructor(){super(1,{id:"editor.action.addCommentLine",label:L("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2081),weight:100}})}}class q7e extends sq{constructor(){super(2,{id:"editor.action.removeCommentLine",label:L("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2099),weight:100}})}}class K7e extends hn{constructor(){super({id:"editor.action.blockComment",label:L("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:vn.MenubarEditMenu,group:"5_insert",title:L({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const n=t.getOption(19),i=[],s=t.getSelections();for(const o of s)i.push(new lC(o,n.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}It($7e);It(j7e);It(q7e);It(K7e);var G7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yT=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Rx=class Pce{constructor(e,t,n,i,s,o){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=s,this._menuService=o,this._toDispose=new Et,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(a=>this._onContextMenu(a))),this._toDispose.add(this._editor.onMouseWheel(a=>{if(this._contextMenuIsBeingShownCount>0){const l=this._contextViewService.getContextViewElement(),u=a.srcElement;u.shadowRoot&&LC(l)===u.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(a=>{a.keyCode===58&&(a.preventDefault(),a.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(Pce.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||(e.event.preventDefault(),e.event.stopPropagation(),e.target.type!==6&&e.target.type!==7&&e.target.type!==1))return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?vn.SimpleEditorContext:vn.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.createMenu(t,this._contextKeyService),s=i.getActions({arg:e.uri});i.dispose();for(let o of s){const[,a]=o;let l=0;for(const u of a)if(u instanceof TU){const d=this._getMenuActions(e,u.item.submenu);d.length>0&&(n.push(new qP(u.id,u.label,d)),l++)}else n.push(u),l++;l&&n.push(new Yg)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const s=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),o=su(this._editor.getDomNode()),a=o.left+s.left,l=o.top+s.top+s.height;t={x:a,y:l}}const i=this._editor.getOption(114)&&!Lv;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:i?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:s=>{const o=this._keybindingFor(s);if(o)return new oN(s,s,{label:!0,keybinding:o.getLabel(),isMenu:!0});const a=s;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new oN(s,s,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:s=>this._keybindingFor(s),onHide:s=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};Rx.ID="editor.contrib.contextmenu";Rx=G7e([yT(1,GC),yT(2,$b),yT(3,Xn),yT(4,ks),yT(5,ZS)],Rx);class Y7e extends hn{constructor(){super({id:"editor.action.showContextMenu",label:L("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:ye.textInputFocus,primary:1092,weight:100}})}run(e,t){Rx.get(t).showContextMenu()}}br(Rx.ID,Rx);It(Y7e);class P7{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}class F7{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}class DS extends Je{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new P7(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new F7(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(DS.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new F7(new P7(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new F7(new P7(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}DS.ID="editor.contrib.cursorUndoRedoController";class Z7e extends hn{constructor(){super({id:"cursorUndo",label:L("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:ye.textInputFocus,primary:2099,weight:100}})}run(e,t,n){DS.get(t).cursorUndo()}}class X7e extends hn{constructor(){super({id:"cursorRedo",label:L("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){DS.get(t).cursorRedo()}}br(DS.ID,DS);It(Z7e);It(X7e);class Q7e{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new se(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new un(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new un(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new un(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new un(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new un(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function tE(r){return zi?r.altKey:r.ctrlKey}class kb extends Je{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(tE(e)&&(this._modifierPressed=!0),this._mouseDown&&tE(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(tE(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===kb.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let i=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}tE(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new ze(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){let i=this._editor.getSelection();if(i){const{selectionStartLineNumber:s,selectionStartColumn:o}=i;n=[new un(s,o,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new un(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(tE(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(kb.ID,new Q7e(this._dragSelection,t,tE(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new se(e.lineNumber,e.column,e.lineNumber,e.column),options:kb._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}kb.ID="editor.contrib.dragAndDrop";kb.TRIGGER_KEY_VALUE=zi?6:5;kb._DECORATION_OPTIONS=mi.register({description:"dnd-target",className:"dnd-target"});br(kb.ID,kb);class ku{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===ku._FIND_MATCH_DECORATION||i===ku._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,s=this._decorations.length;i<s;i++){let o=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(o)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,ku._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,ku._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){let o=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);s=new se(s.startLineNumber,s.startColumn,o,a)}this._rangeHighlightDecorationId=i.addDecoration(s,ku._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=ku._FIND_MATCH_DECORATION,s=[];if(e.length>1e3){i=ku._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),u=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/u));let h=e[0].range.startLineNumber,p=e[0].range.endLineNumber;for(let v=1,C=e.length;v<C;v++){const S=e[v].range;p+d>=S.startLineNumber?S.endLineNumber>p&&(p=S.endLineNumber):(s.push({range:new se(h,1,p,1),options:ku._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=S.startLineNumber,p=S.endLineNumber)}s.push({range:new se(h,1,p,1),options:ku._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,ku._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}ku._CURRENT_FIND_MATCH_DECORATION=mi.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Ps(u4),position:Wd.Center},minimap:{color:Ps(UU),position:Pd.Inline}});ku._FIND_MATCH_DECORATION=mi.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Ps(u4),position:Wd.Center},minimap:{color:Ps(UU),position:Pd.Inline}});ku._FIND_MATCH_NO_OVERVIEW_DECORATION=mi.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});ku._FIND_MATCH_ONLY_OVERVIEW_DECORATION=mi.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Ps(u4),position:Wd.Center}});ku._RANGE_HIGHLIGHT_DECORATION=mi.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});ku._FIND_SCOPE_DECORATION=mi.register({description:"find-scope",className:"findScope",isWholeLine:!0});class J7e{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let o=0;o<this._ranges.length;o++)n.push({range:this._ranges[o],text:this._replaceStrings[o]});n.sort((o,a)=>se.compareRangesUsingStarts(o.range,a.range));let i=[],s=n[0];for(let o=1;o<n.length;o++)s.range.endLineNumber===n[o].range.startLineNumber&&s.range.endColumn===n[o].range.startColumn?(s.range=s.range.plusRange(n[o].range),s.text=s.text+n[o].text):(i.push(s),s=n[o]);i.push(s);for(const o of i)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Fce(r,e){if(r&&r[0]!==""){const t=Nee(r,e,"-"),n=Nee(r,e,"_");return t&&!n?Aee(r,e,"-"):!t&&n?Aee(r,e,"_"):r[0].toUpperCase()===r[0]?e.toUpperCase():r[0].toLowerCase()===r[0]?e.toLowerCase():cbe(r[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):r[0][0].toUpperCase()!==r[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Nee(r,e,t){return r[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&r[0].split(t).length===e.split(t).length}function Aee(r,e,t){const n=e.split(t),i=r[0].split(t);let s="";return n.forEach((o,a)=>{s+=Fce([i[a]],o)+t}),s.slice(0,-1)}class Oee{constructor(e){this.staticValue=e,this.kind=0}}class e9e{constructor(e){this.pieces=e,this.kind=1}}class Px{constructor(e){!e||e.length===0?this._state=new Oee(""):e.length===1&&e[0].staticValue!==null?this._state=new Oee(e[0].staticValue):this._state=new e9e(e)}static fromStaticValue(e){return new Px([$w.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?Fce(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,s=this._state.pieces.length;i<s;i++){let o=this._state.pieces[i];if(o.staticValue!==null){n+=o.staticValue;continue}let a=Px._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){let l=[],u=o.caseOps.length,d=0;for(let h=0,p=a.length;h<p;h++){if(d>=u){l.push(a.slice(h));break}switch(o.caseOps[d]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),d++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),d++;break;default:l.push(a[h])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class $w{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new $w(e,-1,null)}static caseOps(e,t){return new $w(null,e,t)}}class t9e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=$w.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=$w.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=$w.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Px(this._result)}}function n9e(r){if(!r||r.length===0)return new Px(null);let e=[],t=new t9e(r);for(let n=0,i=r.length;n<i;n++){let s=r.charCodeAt(n);if(s===92){if(n++,n>=i)break;let o=r.charCodeAt(n);switch(o){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(o));break}continue}if(s===36){if(n++,n>=i)break;let o=r.charCodeAt(n);if(o===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(o===48||o===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(n+1<i){let l=r.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const fL=new gn("findWidgetVisible",!1),MF=new gn("findInputFocussed",!1),oq=new gn("replaceInputFocussed",!1),hO={primary:545,mac:{primary:2593}},fO={primary:565,mac:{primary:2613}},gO={primary:560,mac:{primary:2608}},pO={primary:554,mac:{primary:2602}},mO={primary:558,mac:{primary:2606}},os={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},uC=19999,i9e=240;class Sk{constructor(e,t){this._toDispose=new Et,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new cc,this._decorations=new ku(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Qr(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,nr(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},i9e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new se(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let i=this._findMatches(n,!1,uC);this._decorations.set(i,n);const s=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(s);if(o===0&&i.length>0){const a=kre(i.map(l=>l.range),l=>se.compareRangesUsingStarts(l,s)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:i}=e,s=this._editor.getModel();return t||i===1?(n===1?n=s.getLineCount():n--,i=s.getLineMaxColumn(n)):i--,new ze(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<uC){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),i=Sk._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());let{lineNumber:s,column:o}=e,a=this._editor.getModel(),l=new ze(s,o),u=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);if(u&&u.range.isEmpty()&&u.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),u=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),!!u){if(!t&&!i.containsRange(u.range))return this._moveToPrevMatch(u.range.getStartPosition(),!0);this._setCurrentFindMatch(u.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:i}=e,s=this._editor.getModel();return t||i===s.getLineMaxColumn(n)?(n===s.getLineCount()?n=1:n++,i=1):i++,new ze(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<uC){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;let s=this._decorations.getFindScope(),o=Sk._getSearchRange(this._editor.getModel(),s);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());let{lineNumber:a,column:l}=e,u=this._editor.getModel(),d=new ze(a,l),h=u.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=u.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t)),h?!i&&!o.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,n,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?n9e(this._state.replaceString):Px.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let i=e.buildReplaceString(n.matches,this._state.preserveCase),s=new xl(t,i);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new ze(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(s=>Sk._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=uC?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new tw(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let h="mu";n.ignoreCase&&(h+="i"),n.global&&(h+="g"),n=new RegExp(n.source,h)}const i=this._editor.getModel(),s=i.getValue(1),o=i.getFullModelRange(),a=this._getReplacePattern();let l;const u=this._state.preserveCase;a.hasReplacementPatterns||u?l=s.replace(n,function(){return a.buildReplaceString(arguments,u)}):l=s.replace(n,a.buildReplaceString(null,u));let d=new f$(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let o=0,a=n.length;o<a;o++)i[o]=t.buildReplaceString(n[o].matches,this._state.preserveCase);let s=new J7e(this._editor.getSelection(),n.map(o=>o.range),i);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(s=>new un(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)),i=this._editor.getSelection();for(let s=0,o=n.length;s<o;s++)if(n[s].equalsRange(i)){n=[i].concat(n.slice(0,s)).concat(n.slice(s+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const r9e={inputActiveOptionBorder:We.fromHex("#007ACC00"),inputActiveOptionForeground:We.fromHex("#FFFFFF"),inputActiveOptionBackground:We.fromHex("#0E639C50")};class K2 extends Ah{constructor(e){super(),this._onChange=this._register(new Ae),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Ae),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},r9e),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Fc.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const s9e=L("caseDescription","Match Case"),o9e=L("wordsDescription","Match Whole Word"),a9e=L("regexDescription","Use Regular Expression");class Bce extends K2{constructor(e){super({icon:Ie.caseSensitive,title:s9e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Wce extends K2{constructor(e){super({icon:Ie.wholeWord,title:o9e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Vce extends K2{constructor(e){super({icon:Ie.regex,title:a9e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class RF extends Ah{constructor(e,t,n,i){super(),this._hideSoon=this._register(new Qr(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s=i.getColorTheme().getColor(F6),o=i.getColorTheme().getColor(W6),a=i.getColorTheme().getColor(B6);this.caseSensitive=this._register(new Bce({appendTitle:this._keybindingLabelFor(os.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Wce({appendTitle:this._keybindingLabelFor(os.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Vce({appendTitle:this._keybindingLabelFor(os.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let u=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,u=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,u=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,u=!0),!this._state.isRevealed&&u&&this._revealTemporarily()})),this._register(gU(this._domNode,l=>this._onMouseOut())),this._register(St(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(i.getColorTheme()),this._register(i.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return RF.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(F6),inputActiveOptionForeground:e.getColor(W6),inputActiveOptionBackground:e.getColor(B6)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}RF.ID="editor.contrib.findOptionsWidget";ds((r,e)=>{const t=r.getColor(Lm);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=r.getColor(Ib);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const i=r.getColor(IC);i&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${i}; }`);const s=r.getColor(Ao);s&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${s}; }`)});function _O(r,e){return r===1?!0:r===2?!1:e}class l9e extends Je{constructor(){super(),this._onFindReplaceStateChange=this._register(new Ae),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return _O(this._isRegexOverride,this._isRegex)}get wholeWord(){return _O(this._wholeWordOverride,this._wholeWord)}get matchCase(){return _O(this._matchCaseOverride,this._matchCase)}get preserveCase(){return _O(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,s=!0),typeof n<"u"&&(se.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var i;let s={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;const a=this.isRegex,l=this.wholeWord,u=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((i=e.searchScope)===null||i===void 0)&&i.every(h=>{var p;return(p=this._searchScope)===null||p===void 0?void 0:p.some(v=>!se.equalsRange(v,h))})||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,s.isRegex=!0),l!==this.wholeWord&&(o=!0,s.wholeWord=!0),u!==this.matchCase&&(o=!0,s.matchCase=!0),d!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=uC}}const u9e=L("defaultLabel","input");class c9e extends Ah{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new Ae),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Ae),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Ae),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new Ae),this._onKeyUp=this._register(new Ae),this._onCaseSensitiveKeyDown=this._register(new Ae),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new Ae),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||u9e,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const s=i.appendCaseSensitiveLabel||"",o=i.appendWholeWordsLabel||"",a=i.appendRegexLabel||"",l=i.history||[],u=!!i.flexibleHeight,d=!!i.flexibleWidth,h=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Vae(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:i.showHistoryHint,flexibleHeight:u,flexibleWidth:d,flexibleMaxHeight:h})),this.regex=this._register(new Vce({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(C=>{this._onRegexKeyDown.fire(C)})),this.wholeWords=this._register(new Wce({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Bce({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(C=>{this._onCaseSensitiveKeyDown.fire(C)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let p=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,C=>{if(C.equals(15)||C.equals(17)||C.equals(9)){let S=p.indexOf(document.activeElement);if(S>=0){let E=-1;C.equals(17)?E=(S+1)%p.length:C.equals(15)&&(S===0?E=p.length-1:E=S-1),C.equals(9)?(p[S].blur(),this.inputBox.focus()):E>=0&&p[E].focus(),Ir.stop(C,!0)}}});let v=document.createElement("div");v.className="controls",v.style.display=this._showOptionButtons?"block":"none",v.appendChild(this.caseSensitive.domNode),v.appendChild(this.wholeWords.domNode),v.appendChild(this.regex.domNode),this.domNode.appendChild(v),e&&e.appendChild(this.domNode),this._register(St(this.inputBox.inputElement,"compositionstart",C=>{this.imeSessionInProgress=!0})),this._register(St(this.inputBox.inputElement,"compositionend",C=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,C=>this._onKeyDown.fire(C)),this.onkeyup(this.inputBox.inputElement,C=>this._onKeyUp.fire(C)),this.oninput(this.inputBox.inputElement,C=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,C=>this._onMouseDown.fire(C))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const d9e=L("defaultLabel","input"),h9e=L("label.preserveCaseCheckbox","Preserve Case");class f9e extends K2{constructor(e){super({icon:Ie.preserveCase,title:h9e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class g9e extends Ah{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new Ae),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Ae),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Ae),this._onInput=this._register(new Ae),this._onKeyUp=this._register(new Ae),this._onPreserveCaseKeyDown=this._register(new Ae),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||d9e,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const s=i.appendPreserveCaseLabel||"",o=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,u=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Vae(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:o,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:u})),this.preserveCase=this._register(new f9e({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(p=>{this._onPreserveCaseKeyDown.fire(p)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let d=[this.preserveCase.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){let v=d.indexOf(document.activeElement);if(v>=0){let C=-1;p.equals(17)?C=(v+1)%d.length:p.equals(15)&&(v===0?C=d.length-1:C=v-1),p.equals(9)?(d[v].blur(),this.inputBox.focus()):C>=0&&d[C].focus(),Ir.stop(p,!0)}}});let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Hce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zce=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const PN="historyNavigationWidget",Uce="historyNavigationForwardsEnabled",$ce="historyNavigationBackwardsEnabled";function p9e(r,e,t){new gn(t,e).bindTo(r)}function m9e(r,e){return r.createScoped(e.target)}function jce(r,e){return r.getContext(document.activeElement).getValue(e)}function qce(r,e){const t=m9e(r,e);p9e(t,e,PN);const n=new gn(Uce,!0).bindTo(t),i=new gn($ce,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:i}}let nz=class extends c9e{constructor(e,t,n,i,s=!1){super(e,t,s,n),this._register(qce(i,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};nz=Hce([zce(3,Xn)],nz);let iz=class extends g9e{constructor(e,t,n,i,s=!1){super(e,t,s,n),this._register(qce(i,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};iz=Hce([zce(3,Xn)],iz);Al.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:qt.and(qt.has(PN),qt.equals($ce,!0),Pi.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:r=>{const e=jce(r.get(Xn),PN);e&&e.historyNavigator.showPreviousValue()}});Al.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:qt.and(qt.has(PN),qt.equals(Uce,!0),Pi.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:r=>{const e=jce(r.get(Xn),PN);e&&e.historyNavigator.showNextValue()}});function Mee(r){var e,t;return((e=r.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=r.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var _9e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const v9e=hl("find-selection",Ie.selection,L("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Ree=hl("find-collapsed",Ie.chevronRight,L("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Pee=hl("find-expanded",Ie.chevronDown,L("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),b9e=hl("find-replace",Ie.replace,L("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),C9e=hl("find-replace-all",Ie.replaceAll,L("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),y9e=hl("find-previous-match",Ie.arrowUp,L("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),w9e=hl("find-next-match",Ie.arrowDown,L("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),S9e=L("label.find","Find"),L9e=L("placeholder.find","Find"),E9e=L("label.previousMatchButton","Previous Match"),x9e=L("label.nextMatchButton","Next Match"),D9e=L("label.toggleSelectionFind","Find in Selection"),I9e=L("label.closeButton","Close"),T9e=L("label.replace","Replace"),k9e=L("placeholder.replace","Replace"),N9e=L("label.replaceButton","Replace"),A9e=L("label.replaceAllButton","Replace All"),O9e=L("label.toggleReplaceButton","Toggle Replace"),M9e=L("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",uC),R9e=L("label.matchesLocation","{0} of {1}"),Fee=L("label.noResults","No results"),U_=419,P9e=275,F9e=P9e-54;let wT=69;const B9e=33,Bee="ctrlEnterReplaceAll.windows.donotask",Wee=zi?256:2048;class B7{constructor(e){this.afterLineNumber=e,this.heightInPx=B9e,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Vee(r,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){r.stopPropagation();return}}function Hee(r,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){r.stopPropagation();return}}class PF extends Ah{constructor(e,t,n,i,s,o,a,l,u){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=s,this._contextKeyService=o,this._storageService=l,this._notificationService=u,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(Bee,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Pb(500),this._register(Bi(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(130)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(35)){const h=this._codeEditor.getOption(35).addExtraSpaceOnTop;h&&!this._viewZone&&(this._viewZone=new B7(0),this._showViewZone()),!h&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>_9e(this,void 0,void 0,function*(){if(this._isVisible){let d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=MF.bindTo(o),this._findFocusTracker=this._register(lx(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=oq.bindTo(o),this._replaceFocusTracker=this._register(lx(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new B7(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return PF.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Mg(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Jn)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=wT+"px",this._state.matchesCount>=uC?this._matchesCount.title=M9e:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=uC&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=wf(R9e,n,t)}else e=Fee;this._matchesCount.appendChild(document.createTextNode(e)),Il(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),wT=Math.max(wT,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===Fee)return n===""?L("ariaSearchNoResultEmpty","{0} found",e):L("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=L("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${i}`:i}return L("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=su(n),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=i.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=Xie(this._domNode).left;o>l&&(t=!1);const u=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(u?u.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new B7(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===n.heightInPx)return;let o=s-n.heightInPx;n.heightInPx=s,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(74).top,s<=0)return;n.heightInPx=s,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(F6),inputActiveOptionBackground:e.getColor(B6),inputActiveOptionForeground:e.getColor(W6),inputBackground:e.getColor(RU),inputForeground:e.getColor(PU),inputBorder:e.getColor(FU),inputValidationInfoBackground:e.getColor(Kre),inputValidationInfoForeground:e.getColor(Gre),inputValidationInfoBorder:e.getColor(Yre),inputValidationWarningBackground:e.getColor(Zre),inputValidationWarningForeground:e.getColor(Xre),inputValidationWarningBorder:e.getColor(Qre),inputValidationErrorBackground:e.getColor(Jre),inputValidationErrorForeground:e.getColor(ese),inputValidationErrorBorder:e.getColor(tse)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!hU(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let s=!1,o=!1,a=!1;if(this._resized&&Mg(this._domNode)>U_){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=Mg(this._findInput.domNode);return}if(U_+28+i>=n&&(o=!0),U_+28+i-wT>=n&&(a=!0),U_+28+i-wT>=n+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!s&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Mg(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!se.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(Wee|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Vee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return Hee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(Wee|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Nl&&wm&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(L("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Bee,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Vee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return Hee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new nz(null,this._contextViewProvider,{width:F9e,label:S9e,placeholder:L9e,appendCaseSensitiveLabel:this._keybindingLabelFor(os.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(os.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(os.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(u){return{content:u.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Mee(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),Hc&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new nE({label:E9e+this._keybindingLabelFor(os.PreviousMatchFindAction),icon:y9e,onTrigger:()=>{this._codeEditor.getAction(os.PreviousMatchFindAction).run().then(void 0,Jn)}})),this._nextBtn=this._register(new nE({label:x9e+this._keybindingLabelFor(os.NextMatchFindAction),icon:w9e,onTrigger:()=>{this._codeEditor.getAction(os.NextMatchFindAction).run().then(void 0,Jn)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const i=document.createElement("div");i.className="find-actions",n.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new K2({icon:v9e,title:D9e+this._keybindingLabelFor(os.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(u=>(u.endColumn===1&&u.endLineNumber>u.startLineNumber&&(u=u.setEndPosition(u.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(u.endLineNumber-1))),u.isEmpty()?null:u)).filter(u=>!!u),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new nE({label:I9e+this._keybindingLabelFor(os.CloseFindWidgetCommand),icon:xoe,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new iz(null,void 0,{label:T9e,placeholder:k9e,appendPreserveCaseLabel:this._keybindingLabelFor(os.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Mee(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new nE({label:N9e+this._keybindingLabelFor(os.ReplaceOneAction),icon:b9e,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new nE({label:A9e+this._keybindingLabelFor(os.ReplaceAllAction),icon:C9e,onTrigger:()=>{this._controller.replaceAll()}}));let s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",s.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new nE({label:O9e,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Mg(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${U_}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(s),this._resizeSash=new ru(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=U_;this._register(this._resizeSash.onDidStart(()=>{a=Mg(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let u=a+l.startX-l.currentX;if(u<U_)return;const d=parseFloat(mU(this._domNode).maxWidth)||0;u>d||(this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Mg(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=Mg(this._domNode);if(l<U_)return;let u=U_;if(!this._resized||l===U_){const d=this._codeEditor.getLayoutInfo();u=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Mg(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}PF.ID="editor.contrib.findWidget";class nE extends Ah{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+vs.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...vs.asClassNameArray(Ree)),this._domNode.classList.add(...vs.asClassNameArray(Pee))):(this._domNode.classList.remove(...vs.asClassNameArray(Pee)),this._domNode.classList.add(...vs.asClassNameArray(Ree)))}}ds((r,e)=>{const t=(C,S)=>{S&&e.addRule(`.monaco-editor ${C} { background-color: ${S}; }`)};t(".findMatch",r.getColor(H6)),t(".currentFindMatch",r.getColor(_Ce)),t(".findScope",r.getColor(vCe));const n=r.getColor(Lm);t(".find-widget",n);const i=r.getColor(IC);i&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${i}; }`);const s=r.getColor(CCe);s&&e.addRule(`.monaco-editor .findMatch { border: 1px ${r.type==="hc"?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const o=r.getColor(bCe);o&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${o}; padding: 1px; box-sizing: border-box; }`);const a=r.getColor(yCe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${r.type==="hc"?"dashed":"solid"} ${a}; }`);const l=r.getColor(Ao);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const u=r.getColor(Ib);u&&e.addRule(`.monaco-editor .find-widget { color: ${u}; }`);const d=r.getColor(X1e);d&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${d}; }`);const h=r.getColor(oCe);if(h)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${h}; }`);else{const C=r.getColor(OO);C&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${C}; }`)}const p=r.getColor(oye);p&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${p} !important;
		}
	`);const v=r.getColor(sS);v&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${v}; }`)});var Kce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Q_=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},IS=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const W9e=524288;function rz(r,e="single",t=!1){if(!r.hasModel())return null;const n=r.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=r.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(r.getModel().getValueLengthInRange(n)<W9e)return r.getModel().getValueInRange(n)}return null}let $d=class Gce extends Je{constructor(e,t,n,i){super(),this._editor=e,this._findWidgetVisible=fL.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._updateHistoryDelayer=new Pb(500),this._state=this._register(new l9e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(s=>this._onStateChanged(s))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let s=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),s&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(Gce.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!MF.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Af(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return IS(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let i=rz(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=Af(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let i=rz(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let i=this._editor.getSelections();i.some(s=>!s.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new Sk(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return IS(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};$d.ID="editor.contrib.findController";$d=Kce([Q_(1,Xn),Q_(2,Yv),Q_(3,YC)],$d);let sz=class extends $d{constructor(e,t,n,i,s,o,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=i,this._themeService=s,this._notificationService=o,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return IS(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":s=!!i&&i.startLineNumber!==i.endLineNumber;break}e.updateSearchScope=e.updateSearchScope||s,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new PF(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new RF(this._editor,this._state,this._keybindingService,this._themeService))}};sz=Kce([Q_(1,$b),Q_(2,Xn),Q_(3,ks),Q_(4,Fs),Q_(5,Oo),Q_(6,Yv),Q_(7,YC)],sz);const V9e=Lre(new Sre({id:os.StartFindAction,label:L("startFindAction","Find"),alias:"Find",precondition:qt.or(ye.focus,qt.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:vn.MenubarEditMenu,group:"3_find",title:L({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));V9e.addImplementation(0,(r,e,t)=>{const n=$d.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});const H9e={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:L("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:L("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:L("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:L("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class z9e extends hn{constructor(){super({id:os.StartFindWithArgs,label:L("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:H9e})}run(e,t,n){return IS(this,void 0,void 0,function*(){let i=$d.get(t);if(i){const s=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(n==null?void 0:n.findInSelection)||!1,loop:t.getOption(35).loop},s),i.setGlobalBufferTerm(i.getState().searchString)}})}}class U9e extends hn{constructor(){super({id:os.StartFindWithSelection,label:L("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return IS(this,void 0,void 0,function*(){let n=$d.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class Yce extends hn{run(e,t){return IS(this,void 0,void 0,function*(){let n=$d.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class $9e extends Yce{constructor(){super({id:os.NextMatchFindAction,label:L("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:ye.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:qt.and(ye.focus,MF),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class j9e extends Yce{constructor(){super({id:os.PreviousMatchFindAction,label:L("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:ye.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:qt.and(ye.focus,MF),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class Zce extends hn{run(e,t){return IS(this,void 0,void 0,function*(){let n=$d.get(t);if(!n)return;const i=t.getOption(35).seedSearchStringFromSelection==="selection";let s=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(s=rz(t,"single",i)),s&&n.setSearchString(s),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class q9e extends Zce{constructor(){super({id:os.NextSelectionMatchFindAction,label:L("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class K9e extends Zce{constructor(){super({id:os.PreviousSelectionMatchFindAction,label:L("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const G9e=Lre(new Sre({id:os.StartFindReplaceAction,label:L("startReplace","Replace"),alias:"Replace",precondition:qt.or(ye.focus,qt.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:vn.MenubarEditMenu,group:"3_find",title:L({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));G9e.addImplementation(0,(r,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=$d.get(e);if(!n)return!1;const i=e.getSelection(),s=n.isFindInputFocused(),o=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!s,a=s||o?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});br($d.ID,sz);It(z9e);It(U9e);It($9e);It(j9e);It(q9e);It(K9e);const Vm=Rl.bindToContribution($d.get);Dt(new Vm({id:os.CloseFindWidgetCommand,precondition:fL,handler:r=>r.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:qt.and(ye.focus,qt.not("isComposing")),primary:9,secondary:[1033]}}));Dt(new Vm({id:os.ToggleCaseSensitiveCommand,precondition:void 0,handler:r=>r.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:hO.primary,mac:hO.mac,win:hO.win,linux:hO.linux}}));Dt(new Vm({id:os.ToggleWholeWordCommand,precondition:void 0,handler:r=>r.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:fO.primary,mac:fO.mac,win:fO.win,linux:fO.linux}}));Dt(new Vm({id:os.ToggleRegexCommand,precondition:void 0,handler:r=>r.toggleRegex(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:gO.primary,mac:gO.mac,win:gO.win,linux:gO.linux}}));Dt(new Vm({id:os.ToggleSearchScopeCommand,precondition:void 0,handler:r=>r.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:pO.primary,mac:pO.mac,win:pO.win,linux:pO.linux}}));Dt(new Vm({id:os.TogglePreserveCaseCommand,precondition:void 0,handler:r=>r.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:mO.primary,mac:mO.mac,win:mO.win,linux:mO.linux}}));Dt(new Vm({id:os.ReplaceOneAction,precondition:fL,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:3094}}));Dt(new Vm({id:os.ReplaceOneAction,precondition:fL,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:qt.and(ye.focus,oq),primary:3}}));Dt(new Vm({id:os.ReplaceAllAction,precondition:fL,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:2563}}));Dt(new Vm({id:os.ReplaceAllAction,precondition:fL,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:qt.and(ye.focus,oq),primary:void 0,mac:{primary:2051}}}));Dt(new Vm({id:os.SelectAllMatchesAction,precondition:fL,handler:r=>r.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:ye.focus,primary:515}}));const zee=65535,vb=16777215,Uee=4278190080;class FN{constructor(e,t,n){if(e.length!==t.length||e.length>zee)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,i)=>{let s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=i};for(let n=0,i=this._startIndexes.length;n<i;n++){let s=this._startIndexes[n],o=this._endIndexes[n];if(s>vb||o>vb)throw new Error("startLineNumber or endLineNumber must not exceed "+vb);for(;e.length>0&&!t(s,o);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((a&255)<<24),this._endIndexes[n]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&vb}getEndLineNumber(e){return this._endIndexes[e]&vb}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,i=e%32,s=this._collapseStates[n];t?this._collapseStates[n]=s|1<<i:this._collapseStates[n]=s&~(1<<i)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new Y9e(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&Uee)>>>24)+((this._endIndexes[e]&Uee)>>>16);return t===zee?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class Y9e{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class Z9e{constructor(e,t){this._updateEventEmitter=new Ae,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new FN(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,s=-1,o=-1;const a=l=>{for(;i<l;){const u=this._regions.getEndLineNumber(i),d=this._regions.isCollapsed(i);u<=s&&n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(d,u<=o)),d&&u>o&&(o=u),i++}};for(let l of e){let u=l.regionIndex,d=this._editorDecorationIds[u];if(d&&!t[d]){t[d]=!0,a(u);let h=!this._regions.isCollapsed(u);this._regions.setCollapsed(u,h),s=Math.max(s,this._regions.getEndLineNumber(u))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],i=(h,p)=>{for(let v of t)if(h<v&&v<=p)return!0;return!1},s=-1,o=(h,p)=>{const v=e.getStartLineNumber(h),C=e.getEndLineNumber(h);p||(p=e.isCollapsed(h)),p&&i(v,C)&&(p=!1),e.setCollapsed(h,p);const S=this._textModel.getLineMaxColumn(v),E={startLineNumber:v,startColumn:Math.max(S-1,1),endLineNumber:v,endColumn:S};n.push({range:E,options:this._decorationProvider.getDecorationOption(p,C<=s)}),p&&C>s&&(s=C)},a=0,l=()=>{for(;a<this._regions.length;){let h=this._regions.isCollapsed(a);if(a++,h)return a-1}return-1},u=0,d=l();for(;d!==-1&&u<e.length;){let h=this._textModel.getDecorationRange(this._editorDecorationIds[d]);if(h){let p=h.startLineNumber;if(h.startColumn===Math.max(h.endColumn-1,1)&&this._textModel.getLineMaxColumn(p)===h.endColumn)for(;u<e.length;){let v=e.getStartLineNumber(u);if(p>=v)o(u,p===v),u++;else break}}d=l()}for(;u<e.length;)o(u,!1),u++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let i=n.startLineNumber,s=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:i,endLineNumber:s})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let i=this.getRegionAtLine(n.startLineNumber);i&&!i.isCollapsed&&t.push(i)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let i=this._regions.findRange(e),s=1;for(;i>=0;){let o=this._regions.toRegion(i);(!t||t(o,s))&&n.push(o),s++,i=o.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],i=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=i,l=this._regions.length;a<l;a++){let u=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;o.length>0&&!u.containedBy(o[o.length-1]);)o.pop();o.push(u),t(u,o.length)&&n.push(u)}else break}}else for(let o=i,a=this._regions.length;o<a;o++){let l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<s)(!t||t(l))&&n.push(l);else break}return n}}function X9e(r,e,t){let n=[];for(let i of t){let s=r.getRegionAtLine(i);if(s){const o=!s.isCollapsed;if(n.push(s),e>1){let a=r.getRegionsInside(s,(l,u)=>l.isCollapsed!==o&&u<e);n.push(...a)}}}r.toggleCollapseState(n)}function CD(r,e,t=Number.MAX_VALUE,n){let i=[];if(n&&n.length>0)for(let s of n){let o=r.getRegionAtLine(s);if(o&&(o.isCollapsed!==e&&i.push(o),t>1)){let a=r.getRegionsInside(o,(l,u)=>l.isCollapsed!==e&&u<t);i.push(...a)}}else{let s=r.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);i.push(...s)}r.toggleCollapseState(i)}function Xce(r,e,t,n){let i=[];for(let s of n){let o=r.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...o)}r.toggleCollapseState(i)}function Q9e(r,e,t){let n=[];for(let i of t){let s=r.getAllRegionsAtLine(i,o=>o.isCollapsed!==e);s.length>0&&n.push(s[0])}r.toggleCollapseState(n)}function J9e(r,e,t,n){let i=(o,a)=>a===e&&o.isCollapsed!==t&&!n.some(l=>o.containsLine(l)),s=r.getRegionsInside(null,i);r.toggleCollapseState(s)}function Qce(r,e,t){let n=[];for(let o of t)n.push(r.getAllRegionsAtLine(o,void 0)[0]);let i=o=>n.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,s=r.getRegionsInside(null,i);r.toggleCollapseState(s)}function aq(r,e,t){let n=r.textModel,i=r.regions,s=[];for(let o=i.length-1;o>=0;o--)if(t!==i.isCollapsed(o)){let a=i.getStartLineNumber(o);e.test(n.getLineContent(a))&&s.push(i.toRegion(o))}r.toggleCollapseState(s)}function lq(r,e,t){let n=r.regions,i=[];for(let s=n.length-1;s>=0;s--)t!==n.isCollapsed(s)&&e===n.getType(s)&&i.push(n.toRegion(s));r.toggleCollapseState(i)}function e6e(r,e){let t=null,n=e.getRegionAtLine(r);if(n!==null&&(t=n.startLineNumber,r===t)){let i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}function t6e(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){if(r!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<r)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function n6e(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){let n=t.parentIndex,i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>r)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class i6e{constructor(e){this._updateEventEmitter=new Ae,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||uS(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,i=0,s=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let l=a.getStartLineNumber(n)+1,u=a.getEndLineNumber(n);s<=l&&u<=o||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===u?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new se(l,1,u,1))),s=l,o=u)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new se(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return $ee(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,i=null,s=o=>((!i||!r6e(o,i))&&(i=$ee(this._hiddenRanges,o)),i?i.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o],u=s(l.startLineNumber);u&&(l=l.setStartPosition(u,n.getLineMaxColumn(u)),t=!0);let d=s(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function r6e(r,e){return r>=e.startLineNumber&&r<=e.endLineNumber}function $ee(r,e){let t=kre(r,n=>e<n.startLineNumber)-1;return t>=0&&r[t].endLineNumber>=e?r[t]:null}const s6e=5e3,o6e="indent";class a6e{constructor(e){this.editorModel=e,this.id=o6e}dispose(){}compute(e){let t=hr.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(u6e(this.editorModel,n,i))}}let l6e=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>vb||t>vb)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=this._length-1,s=0;i>=0;i--,s++)t[s]=this._startIndexes[i],n[s]=this._endIndexes[i];return new FN(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const i=e.getOptions().tabSize;let s=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let u=this._startIndexes[a],d=e.getLineContent(u),h=Vd.computeIndentLevel(d,i);(h<n||h===n&&t++<this._foldingRangesLimit)&&(s[l]=u,o[l]=this._endIndexes[a],l++)}return new FN(s,o)}}};function u6e(r,e,t,n=s6e){const i=r.getOptions().tabSize;let s=new l6e(n),o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],l=r.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let u=r.getLineCount();u>0;u--){let d=r.getLineContent(u),h=Vd.computeIndentLevel(d,i),p=a[a.length-1];if(h===-1){e&&(p.endAbove=u);continue}let v;if(o&&(v=d.match(o)))if(v[1]){let C=a.length-1;for(;C>0&&a[C].indent!==-2;)C--;if(C>0){a.length=C+1,p=a[C],s.insertFirst(u,p.line,h),p.line=u,p.indent=h,p.endAbove=u;continue}}else{a.push({indent:-2,endAbove:u,line:u});continue}if(p.indent>h){do a.pop(),p=a[a.length-1];while(p.indent>h);let C=p.endAbove-1;C-u>=1&&s.insertFirst(u,C,h)}p.indent===h?p.endAbove=u:a.push({indent:h,endAbove:u,line:u})}return s.toIndentRanges(r)}const c6e=5e3,d6e={},Jce="syntax";class h6e{constructor(e,t,n,i=c6e){this.editorModel=e,this.providers=t,this.limit=i,this.id=Jce;for(const s of t)typeof s.onDidChange=="function"&&(this.disposables||(this.disposables=new Et),this.disposables.add(s.onDidChange(n)))}compute(e){return f6e(this.providers,this.editorModel,e).then(t=>t?ede(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function f6e(r,e,t){let n=null,i=r.map((s,o)=>Promise.resolve(s.provideFoldingRanges(e,d6e,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let l=e.getLineCount();for(let u of a)u.start>0&&u.end>u.start&&u.end<=l&&n.push({start:u.start,end:u.end,rank:o,kind:u.kind})}},Ml));return Promise.all(i).then(s=>n)}class g6e{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>vb||t>vb)return;let s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=i,this._types[s]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new FN(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let o=0;o<this._nestingLevelCounts.length;o++){let a=this._nestingLevelCounts[o];if(a){if(a+e>this._foldingRangesLimit){t=o;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),i=new Uint32Array(this._foldingRangesLimit),s=[];for(let o=0,a=0;o<this._length;o++){let l=this._nestingLevels[o];(l<t||l===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[o],i[a]=this._endIndexes[o],s[a]=this._types[o],a++)}return new FN(n,i,s)}}}function ede(r,e){let t=r.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),n=new g6e(e),i,s=[];for(let o of t)if(!i)i=o,n.add(o.start,o.end,o.kind&&o.kind.value,s.length);else if(o.start>i.start)if(o.end<=i.end)s.push(i),i=o,n.add(o.start,o.end,o.kind&&o.kind.value,s.length);else{if(o.start>i.end){do i=s.pop();while(i&&o.start>i.end);i&&s.push(i),i=o}n.add(o.start,o.end,o.kind&&o.kind.value,s.length)}return n.toIndentRanges()}const tde="init";class p6e{constructor(e,t,n,i){if(this.editorModel=e,this.id=tde,t.length){let s=o=>({range:{startLineNumber:o.startLineNumber,startColumn:0,endLineNumber:o.endLineNumber,endColumn:e.getLineLength(o.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(s)),this.timeout=setTimeout(n,i)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let i=this.editorModel.getDecorationRange(n);i&&t.push({start:i.startLineNumber,end:i.endLineNumber,rank:1})}return Promise.resolve(ede(t,Number.MAX_VALUE))}}const uq=hl("folding-expanded",Ie.chevronDown,L("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),cq=hl("folding-collapsed",Ie.chevronRight,L("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class $g{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?$g.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?$g.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:$g.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?$g.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:$g.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}$g.COLLAPSED_VISUAL_DECORATION=mi.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:vs.asClassName(cq)});$g.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=mi.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:vs.asClassName(cq)});$g.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=mi.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:vs.asClassName(uq)});$g.EXPANDED_VISUAL_DECORATION=mi.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+vs.asClassName(uq)});$g.HIDDEN_RANGE_DECORATION=mi.register({description:"folding-hidden-range-decoration",stickiness:1});var m6e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_6e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const hc=new gn("foldingEnabled",!1);let Fx=class nde extends Je{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new Et),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new $g(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=hc.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(i=>{if(i.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),i.hasChanged(98)||i.hasChanged(39)){const s=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=s.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=s.get(39),this.triggerFoldingModelChanged()}i.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),i.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),i.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(nde.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===Jce||e.provider===tde)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const i=this.getFoldingModel();i&&i.then(s=>{if(s){this._restoringViewState=!0;try{s.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,Jn)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new Z9e(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new i6e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Pb(200),this.cursorChangedScheduler=new Qr(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(Z6.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new a6e(e),this._useFoldingProviders&&this.foldingModel){let t=Z6.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new p6e(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new h6e(e,t,()=>this.triggerFoldingModelChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=dl(i=>t.compute(i));return n.then(i=>{if(i&&n===this.foldingRegionPromise){let s;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const l=i.setCollapsedAllOfType(Tm.Imports.value,!0);l&&(s=AC.capture(this.editor),this._currentModelHasFoldedImports=l)}let o=this.editor.getSelections(),a=o?o.map(l=>l.startLineNumber):[];e.update(i,a),s&&s.restore(this.editor)}return e})}).then(void 0,e=>(Jn(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let i=[];for(let s of n){let o=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&i.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,Jn)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const i=e.target.detail,s=e.target.element.offsetLeft;if(i.offsetX-s<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,s=e.target.range;if(!(!s||s.startLineNumber!==n)){if(i){if(e.target.type!==4)return}else{let o=this.editor.getModel();if(!o||s.startColumn!==o.getLineMaxColumn(n))return}t.then(o=>{if(o){let a=o.getRegionAtLine(n);if(a&&a.startLineNumber===n){let l=a.isCollapsed;if(i||l){let u=e.event.altKey,d=[];if(u){let h=v=>!v.containedBy(a)&&!a.containedBy(v),p=o.getRegionsInside(null,h);for(const v of p)v.isCollapsed&&d.push(v);d.length===0&&(d=p)}else{let h=e.event.middleButton||e.event.shiftKey;if(h)for(const p of o.getRegionsInside(a))p.isCollapsed===l&&d.push(p);(l||!h||d.length===0)&&d.push(a)}o.toggleCollapseState(d),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,Jn)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Fx.ID="editor.contrib.folding";Fx=m6e([_6e(1,Xn)],Fx);class Gc extends hn{runEditorCommand(e,t,n){let i=Fx.get(t);if(!i)return;let s=i.getFoldingModel();if(s)return this.reportTelemetry(e,t),s.then(o=>{if(o){this.invoke(i,o,t,n);const a=t.getSelection();a&&i.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function ide(r){if(!Od(r)){if(!Wc(r))return!1;const e=r;if(!Od(e.levels)&&!tS(e.levels)||!Od(e.direction)&&!Nf(e.direction)||!Od(e.selectionLines)&&(!sre(e.selectionLines)||!e.selectionLines.every(tS)))return!1}return!0}class v6e extends Gc{constructor(){super({id:"editor.unfold",label:L("unfoldAction.label","Unfold"),alias:"Unfold",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:ide,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){let s=i&&i.levels||1,o=this.getLineNumbers(i,n);i&&i.direction==="up"?Xce(t,!1,s,o):CD(t,!1,s,o)}}class b6e extends Gc{constructor(){super({id:"editor.unfoldRecursively",label:L("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2137),weight:100}})}invoke(e,t,n,i){CD(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class C6e extends Gc{constructor(){super({id:"editor.fold",label:L("foldAction.label","Fold"),alias:"Fold",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:ide,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){let s=this.getLineNumbers(i,n);const o=i&&i.levels,a=i&&i.direction;typeof o!="number"&&typeof a!="string"?Q9e(t,!0,s):a==="up"?Xce(t,!0,o||1,s):CD(t,!0,o||1,s)}}class y6e extends Gc{constructor(){super({id:"editor.toggleFold",label:L("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2090),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);X9e(t,1,i)}}class w6e extends Gc{constructor(){super({id:"editor.foldRecursively",label:L("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2135),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);CD(t,!0,Number.MAX_VALUE,i)}}class S6e extends Gc{constructor(){super({id:"editor.foldAllBlockComments",label:L("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())lq(t,Tm.Comment.value,!0);else{const i=n.getModel();if(!i)return;const s=hr.getComments(i.getLanguageId());if(s&&s.blockCommentStartToken){let o=new RegExp("^\\s*"+Af(s.blockCommentStartToken));aq(t,o,!0)}}}}class L6e extends Gc{constructor(){super({id:"editor.foldAllMarkerRegions",label:L("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())lq(t,Tm.Region.value,!0);else{const i=n.getModel();if(!i)return;const s=hr.getFoldingRules(i.getLanguageId());if(s&&s.markers&&s.markers.start){let o=new RegExp(s.markers.start);aq(t,o,!0)}}}}class E6e extends Gc{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:L("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())lq(t,Tm.Region.value,!1);else{const i=n.getModel();if(!i)return;const s=hr.getFoldingRules(i.getLanguageId());if(s&&s.markers&&s.markers.start){let o=new RegExp(s.markers.start);aq(t,o,!1)}}}}class x6e extends Gc{constructor(){super({id:"editor.foldAllExcept",label:L("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2131),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);Qce(t,!0,i)}}class D6e extends Gc{constructor(){super({id:"editor.unfoldAllExcept",label:L("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2129),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);Qce(t,!1,i)}}class I6e extends Gc{constructor(){super({id:"editor.foldAll",label:L("foldAllAction.label","Fold All"),alias:"Fold All",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2069),weight:100}})}invoke(e,t,n){CD(t,!0)}}class T6e extends Gc{constructor(){super({id:"editor.unfoldAll",label:L("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2088),weight:100}})}invoke(e,t,n){CD(t,!1)}}class TS extends Gc{getFoldingLevel(){return parseInt(this.id.substr(TS.ID_PREFIX.length))}invoke(e,t,n){J9e(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}TS.ID_PREFIX="editor.foldLevel";TS.ID=r=>TS.ID_PREFIX+r;class k6e extends Gc{constructor(){super({id:"editor.gotoParentFold",label:L("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let s=e6e(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class N6e extends Gc{constructor(){super({id:"editor.gotoPreviousFold",label:L("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let s=t6e(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class A6e extends Gc{constructor(){super({id:"editor.gotoNextFold",label:L("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let s=n6e(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}br(Fx.ID,Fx);It(v6e);It(b6e);It(C6e);It(w6e);It(I6e);It(T6e);It(S6e);It(L6e);It(E6e);It(x6e);It(D6e);It(y6e);It(k6e);It(N6e);It(A6e);for(let r=1;r<=7;r++)Ere(new TS({id:TS.ID(r),label:L("foldLevelAction.label","Fold Level {0}",r),alias:`Fold Level ${r}`,precondition:hc,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2048|21+r),weight:100}}));const O6e=Oe("editor.foldBackground",{light:Jr(gC,.3),dark:Jr(gC,.3),hc:null},L("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),M6e=Oe("editorGutter.foldingControlForeground",{dark:q3,light:q3,hc:q3},L("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));ds((r,e)=>{const t=r.getColor(O6e);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=r.getColor(M6e);n&&e.addRule(`
		.monaco-editor .cldr${vs.asCSSSelector(uq)},
		.monaco-editor .cldr${vs.asCSSSelector(cq)} {
			color: ${n} !important;
		}
		`)});class R6e extends hn{constructor(){super({id:"editor.action.fontZoomIn",label:L("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Fb.setZoomLevel(Fb.getZoomLevel()+1)}}class P6e extends hn{constructor(){super({id:"editor.action.fontZoomOut",label:L("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Fb.setZoomLevel(Fb.getZoomLevel()-1)}}class F6e extends hn{constructor(){super({id:"editor.action.fontZoomReset",label:L("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Fb.setZoomLevel(0)}}It(R6e);It(P6e);It(F6e);var rde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sde=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},dq=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let BN=class{constructor(e,t){this._workerService=t,this._callOnDispose=new Et,this._callOnModel=new Et,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(lR.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=lR.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let n=new mE;for(let i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(i=>{let s=i.charCodeAt(i.length-1);n.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition();let i=!1;const s=this._editor.onDidChangeModelContent(o=>{if(o.isFlush){i=!0,s.dispose();return}for(let a=0,l=o.changes.length;a<l;a++)if(o.changes[a].range.endLineNumber<=n.lineNumber){i=!0,s.dispose();return}});qle(this._workerService,t,n,e,t.getFormattingOptions()).then(o=>{s.dispose(),!i&&Rd(o)&&(Dx.execute(this._editor,o,!0),Fj(o))},o=>{throw s.dispose(),o})}};BN.ID="editor.contrib.autoFormat";BN=rde([sde(1,Oh)],BN);let WN=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new Et,this._callOnModel=new Et,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(dm.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&dm.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(jle,this.editor,e,2,nL.None,ki.None).catch(Jn))}};WN.ID="editor.contrib.formatOnPaste";WN=rde([sde(1,Li)],WN);class B6e extends hn{constructor(){super({id:"editor.action.formatDocument",label:L("formatDocument.label","Format Document"),alias:"Format Document",precondition:qt.and(ye.notInCompositeEditor,ye.writable,ye.hasDocumentFormattingProvider),kbOpts:{kbExpr:ye.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return dq(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Li);yield e.get(jb).showWhile(n.invokeFunction(q4e,t,1,nL.None,ki.None),250)}})}}class W6e extends hn{constructor(){super({id:"editor.action.formatSelection",label:L("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:qt.and(ye.writable,ye.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2084),weight:100},contextMenuOpts:{when:ye.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return dq(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Li),i=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new se(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);yield e.get(jb).showWhile(n.invokeFunction(jle,t,s,1,nL.None,ki.None),250)})}}br(BN.ID,BN);br(WN.ID,WN);It(B6e);It(W6e);Ki.registerCommand("editor.action.format",r=>dq(void 0,void 0,void 0,function*(){const e=r.get(vr).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=r.get(js);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));class DE{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let s=0;t.children.get(i)!==void 0;s++)i=`${n}_${s}`;return i}static empty(e){return e.children.size===0}}class jee extends DE{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class V6e extends DE{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}}class sc extends DE{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let n=this._keys.for(e,!0),i=sc._requests.get(n);if(!i){let s=new Fu;i={promiseCnt:0,source:s,promise:sc._create(e,s.token),model:void 0},sc._requests.set(n,i);const o=Date.now();i.promise.then(()=>{this._requestDurations.update(e,Date.now()-o)})}return i.model?Promise.resolve(i.model):(i.promiseCnt+=1,t.onCancellationRequested(()=>{--i.promiseCnt===0&&(i.source.cancel(),sc._requests.delete(n))}),new Promise((s,o)=>{i.promise.then(a=>{i.model=a,s(a)},a=>{sc._requests.delete(n),o(a)})}))}static _create(e,t){const n=new Fu(t),i=new sc(e.uri),s=Kg.ordered(e),o=s.map((l,u)=>{var d;let h=DE.findId(`provider_${u}`,i),p=new V6e(h,i,(d=l.displayName)!==null&&d!==void 0?d:"Unknown Outline Provider",u);return Promise.resolve(l.provideDocumentSymbols(e,n.token)).then(v=>{for(const C of v||[])sc._makeOutlineElement(C,p);return p},v=>(Ml(v),p)).then(v=>{DE.empty(v)?v.remove():i._groups.set(h,v)})}),a=Kg.onDidChange(()=>{const l=Kg.ordered(e);xf(l,s)||n.cancel()});return Promise.all(o).then(()=>n.token.isCancellationRequested&&!t.isCancellationRequested?sc._create(e,t):i._compact()).finally(()=>{a.dispose()})}static _makeOutlineElement(e,t){let n=DE.findId(e,t),i=new jee(n,t,e);if(e.children)for(const s of e.children)sc._makeOutlineElement(s,i);t.children.set(i.id,i)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=Xi.first(this._groups.values());for(let[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof jee?e.push(t.symbol):e.push(...Xi.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>se.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return sc._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>se.compareRangesUsingStarts(n.range,i.range))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&sc._flattenDocumentSymbols(e,i.children,i.name)}}sc._requestDurations=new eR(Kg,350);sc._requests=new qC(9,.75);sc._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(r,e){return`${r.id}/${e?r.getVersionId():""}/${this._hash(Kg.all(r))}`}_hash(r){let e="";for(const t of r){let n=this._data.get(t);typeof n>"u"&&(n=this._counter++,this._data.set(t,n)),e+=n}return e}};var ode=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function qee(r,e,t){return ode(this,void 0,void 0,function*(){const n=yield sc.create(r,t);return e?n.asListOfDocumentSymbols():n.getTopLevelSymbols()})}Ki.registerCommand("_executeDocumentSymbolProvider",function(r,...e){return ode(this,void 0,void 0,function*(){const[t]=e;$r($n.isUri(t));const n=r.get(aa).getModel(t);if(n)return qee(n,!1,ki.None);const i=yield r.get(zc).createModelReference(t);try{return yield qee(i.object.textEditorModel,!1,ki.None)}finally{i.dispose()}})});function Id(r,e){let t=0;for(let n=0;n<r.length;n++)r.charAt(n)==="	"?t+=e:t++;return t}function Lk(r,e,t){r=r<0?0:r;let n="";if(!t){let i=Math.floor(r/e);r=r%e;for(let s=0;s<i;s++)n+="	"}for(let i=0;i<r;i++)n+=" ";return n}function ade(r,e,t,n){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return[];const i=hr.getIndentationRules(r.getLanguageId());if(!i)return[];for(t=Math.min(t,r.getLineCount());e<=t&&i.unIndentedLinePattern;){let S=r.getLineContent(e);if(!i.unIndentedLinePattern.test(S))break;e++}if(e>t-1)return[];const{tabSize:s,indentSize:o,insertSpaces:a}=r.getOptions(),l=(S,E)=>(E=E||1,Lh.shiftIndent(S,S.length+E,s,o,a)),u=(S,E)=>(E=E||1,Lh.unshiftIndent(S,S.length+E,s,o,a));let d=[],h,p=r.getLineContent(e),v=p;if(n!=null){h=n;let S=Vr(p);v=h+p.substring(S.length),i.decreaseIndentPattern&&i.decreaseIndentPattern.test(v)&&(h=u(h),v=h+p.substring(S.length)),p!==v&&d.push(oo.replaceMove(new un(e,1,e,S.length+1),Vd.normalizeIndentation(h,o,a)))}else h=Vr(p);let C=h;i.increaseIndentPattern&&i.increaseIndentPattern.test(v)?(C=l(C),h=l(h)):i.indentNextLinePattern&&i.indentNextLinePattern.test(v)&&(C=l(C)),e++;for(let S=e;S<=t;S++){let E=r.getLineContent(S),k=Vr(E),D=C+E.substring(k.length);i.decreaseIndentPattern&&i.decreaseIndentPattern.test(D)&&(C=u(C),h=u(h)),k!==C&&d.push(oo.replaceMove(new un(S,1,S,k.length+1),Vd.normalizeIndentation(C,o,a))),!(i.unIndentedLinePattern&&i.unIndentedLinePattern.test(E))&&(i.increaseIndentPattern&&i.increaseIndentPattern.test(D)?(h=l(h),C=h):i.indentNextLinePattern&&i.indentNextLinePattern.test(D)?C=l(C):C=h)}return d}class FF extends hn{constructor(){super({id:FF.ID,label:L("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:ye.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),s=t.getSelection();if(!s)return;const o=new $6e(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}FF.ID="editor.action.indentationToSpaces";class BF extends hn{constructor(){super({id:BF.ID,label:L("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:ye.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),s=t.getSelection();if(!s)return;const o=new j6e(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}BF.ID="editor.action.indentationToTabs";class lde extends hn{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(Wf),i=e.get(aa);let s=t.getModel();if(!s)return;const o=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(u=>({id:u.toString(),label:u.toString(),description:u===o.tabSize?L("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:L({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(u=>{u&&s&&!s.isDisposed()&&s.updateOptions({tabSize:parseInt(u.label,10),insertSpaces:this.insertSpaces})})},50)}}class WF extends lde{constructor(){super(!1,{id:WF.ID,label:L("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}WF.ID="editor.action.indentUsingTabs";class VF extends lde{constructor(){super(!0,{id:VF.ID,label:L("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}VF.ID="editor.action.indentUsingSpaces";class HF extends hn{constructor(){super({id:HF.ID,label:L("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(aa);let i=t.getModel();if(!i)return;const s=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(s.insertSpaces,s.tabSize)}}HF.ID="editor.action.detectIndentation";class H6e extends hn{constructor(){super({id:"editor.action.reindentlines",label:L("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:ye.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=ade(n,1,n.getLineCount());i.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,i),t.pushUndoStop())}}class z6e extends hn{constructor(){super({id:"editor.action.reindentselectedlines",label:L("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:ye.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=t.getSelections();if(i===null)return;let s=[];for(let o of i){let a=o.startLineNumber,l=o.endLineNumber;if(a!==l&&o.endColumn===1&&l--,a===1){if(a===l)continue}else a--;let u=ade(n,a,l);s.push(...u)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class U6e{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let i of this._edits)t.addEditOperation(se.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class oz{constructor(e){this.callOnDispose=new Et,this.callOnModel=new Et,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(47))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(9),{tabSize:s,indentSize:o,insertSpaces:a}=n.getOptions();let l=[],u={shiftIndent:v=>Lh.shiftIndent(v,v.length+1,s,o,a),unshiftIndent:v=>Lh.unshiftIndent(v,v.length+1,s,o,a)},d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(n,d)){d++;continue}break}if(d>e.endLineNumber)return;let h=n.getLineContent(d);if(!/\S/.test(h.substring(0,e.startColumn-1))){const v=hr.getGoodIndentForLine(i,n,n.getLanguageId(),d,u);if(v!==null){let C=Vr(h),S=Id(v,s),E=Id(C,s);if(S!==E){let k=Lk(S,s,a);l.push({range:new se(d,1,d,C.length+1),text:k}),h=k+h.substr(C.length)}else{let k=hr.getIndentMetadata(n,d);if(k===0||k===8)return}}}const p=d;for(;d<e.endLineNumber;){if(!/\S/.test(n.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){let v={getLineTokens:S=>n.getLineTokens(S),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(S,E)=>n.getLanguageIdAtPosition(S,E),getLineContent:S=>S===p?h:n.getLineContent(S)},C=hr.getGoodIndentForLine(i,v,n.getLanguageId(),d+1,u);if(C!==null){let S=Id(C,s),E=Id(Vr(n.getLineContent(d+1)),s);if(S!==E){let k=S-E;for(let D=d+1;D<=e.endLineNumber;D++){let O=n.getLineContent(D),H=Vr(O),X=Id(H,s)+k,$=Lk(X,s,a);$!==H&&l.push({range:new se(D,1,D,H.length+1),text:$})}}}}if(l.length>0){this.editor.pushUndoStop();let v=new U6e(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",v),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;let i=e.getLineTokens(t);if(i.getCount()>0){let s=i.findTokenIndexAtOffset(n);if(s>=0&&i.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}oz.ID="editor.contrib.autoIndentOnPaste";function ude(r,e,t,n){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let i="";for(let o=0;o<t;o++)i+=" ";let s=new RegExp(i,"gi");for(let o=1,a=r.getLineCount();o<=a;o++){let l=r.getLineFirstNonWhitespaceColumn(o);if(l===0&&(l=r.getLineMaxColumn(o)),l===1)continue;const u=new se(o,1,o,l),d=r.getValueInRange(u),h=n?d.replace(/\t/ig,i):d.replace(s,"	");e.addEditOperation(u,h)}}class $6e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),ude(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class j6e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),ude(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}br(oz.ID,oz);It(FF);It(BF);It(WF);It(VF);It(HF);It(H6e);It(z6e);var pP=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const q6e=1500;class cde{constructor(){this._data=new Mu}push(e,t){const n=this._data.get(e.uri);n===void 0?this._data.set(e.uri,new Set([t])):n.add(t)}pop(e,t){const n=this._data.get(e.uri);n&&(n.delete(t),n.size===0&&this._data.delete(e.uri))}has(e,t){var n;return!!(!((n=this._data.get(e.uri))===null||n===void 0)&&n.has(t))}}function dde(r,e,t,n){return pP(this,void 0,void 0,function*(){const i=[],o=rC.ordered(r).reverse().map(a=>e.map(l=>pP(this,void 0,void 0,function*(){try{t.push(r,a);const u=yield a.provideInlayHints(r,l,n);u!=null&&u.length&&i.push(u.filter(d=>l.containsPosition(d.position)))}catch(u){Ml(u)}finally{t.pop(r,a)}})));return yield Promise.all(o.flat()),i.flat().sort((a,l)=>ze.compare(a.position,l.position))})}class mP{constructor(){this._entries=new qC(50)}get(e){const t=mP._key(e);return this._entries.get(t)}set(e,t){const n=mP._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}class Bx{constructor(e){this._editor=e,this._decorationOwnerId=++Bx._decorationOwnerIdPool,this._disposables=new Et,this._sessionDisposables=new Et,this._getInlayHintsDelays=new eR(rC,25,500),this._cache=new mP,this._decorationsMetadata=new Map,this._ruleFactory=new fse(this._editor),this._disposables.add(rC.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(t=>{t.hasChanged(126)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(126).enabled)return;const e=this._editor.getModel();if(!e||!rC.has(e))return;const t=this._cache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t);const n=new cde,i=new Qr(()=>pP(this,void 0,void 0,function*(){const o=Date.now(),a=new Fu;this._sessionDisposables.add(Bi(()=>a.dispose(!0)));const l=this._getHintsRanges(),u=yield dde(e,l,n,a.token);i.delay=this._getInlayHintsDelays.update(e,Date.now()-o),!a.token.isCancellationRequested&&(this._updateHintsDecorators(l,u),this._cache.set(e,Array.from(this._decorationsMetadata.values()).map(d=>d.hint)))}),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(i),this._sessionDisposables.add(this._editor.onDidChangeModelContent(()=>i.schedule())),this._sessionDisposables.add(this._editor.onDidScrollChange(()=>i.schedule())),i.schedule();const s=new Et;this._sessionDisposables.add(s);for(const o of rC.all(e))typeof o.onDidChangeInlayHints=="function"&&s.add(o.onDidChangeInlayHints(()=>{n.has(e,o)||i.schedule()}))}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const s of n.sort(se.compareRangesUsingStarts)){const o=t.validateRange(new se(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));i.length===0||!se.areIntersectingOrTouching(i[i.length-1],o)?i.push(o):i[i.length-1]=se.plusRange(i[i.length-1],o)}return i}_updateHintsDecorators(e,t){const{fontSize:n,fontFamily:i}=this._getLayoutInfo(),s=this._editor.getModel(),o=[],a="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(a,i);for(const d of t){const{text:h,position:p,whitespaceBefore:v,whitespaceAfter:C}=d,S=v?n/3|0:0,E=C?n/3|0:0;let k,D;d.kind===tR.Parameter?(k=Ps(DCe),D=Ps(xCe)):d.kind===tR.Type?(k=Ps(ECe),D=Ps(LCe)):(k=Ps(Ow),D=Ps(Aw));const O=this._ruleFactory.createClassNameRef({fontSize:`${n}px`,margin:`0px ${E}px 0px ${S}px`,fontFamily:`var(${a}), ${ou.fontFamily}`,padding:`1px ${Math.max(1,n/4)|0}px`,borderRadius:`${n/4|0}px`,verticalAlign:"middle",backgroundColor:k,color:D});let H="before",V=se.fromPositions(p),X=s.getWordAtPosition(p),$=!1;if(X&&(X.endColumn===p.column?(H="after",$=!0,V=Kee(X,p.lineNumber)):X.startColumn===p.column&&($=!0,V=Kee(X,p.lineNumber))),o.push({decoration:{range:V,options:{[H]:{content:K6e(h),inlineClassNameAffectsLetterSpacing:!0,inlineClassName:O.className},description:"InlayHint",showIfCollapsed:!$,stickiness:0}},classNameRef:O}),o.length>q6e)break}const l=[];for(const d of e)for(const{id:h}of s.getDecorationsInRange(d,this._decorationOwnerId,!0)){const p=this._decorationsMetadata.get(h);p&&(l.push(h),p.classNameRef.dispose(),this._decorationsMetadata.delete(h))}const u=s.deltaDecorations(l,o.map(d=>d.decoration),this._decorationOwnerId);for(let d=0;d<u.length;d++)this._decorationsMetadata.set(u[d],{hint:t[d],classNameRef:o[d].classNameRef})}_getLayoutInfo(){const e=this._editor.getOption(126),t=this._editor.getOption(45);let n=e.fontSize;(!n||n<5||n>t)&&(n=t*.9|0);const i=e.fontFamily||this._editor.getOption(42);return{fontSize:n,fontFamily:i}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}}Bx.ID="editor.contrib.InlayHints";Bx._decorationOwnerIdPool=0;function Kee(r,e){return new se(e,r.startColumn,e,r.endColumn)}function K6e(r){const e="";return r.replace(/[ \t]/g,e)}br(Bx.ID,Bx);Ki.registerCommand("_executeInlayHintProvider",(r,...e)=>pP(void 0,void 0,void 0,function*(){const[t,n]=e;$r($n.isUri(t)),$r(se.isIRange(n));const i=yield r.get(zc).createModelReference(t);try{return yield dde(i.object.textEditorModel,[se.lift(n)],new cde,ki.None)}finally{i.dispose()}}));class G6e{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new un(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new un(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var Y6e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Z6e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let HC=class az{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(e){return e.getContribution(az.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),i=this.editor.getModel();if(!i||!n)return;let s=n;if(s.startLineNumber!==s.endLineNumber)return;const o=new woe(this.editor,5),a=i.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=dl(l=>this.editorWorkerService.navigateValueSet(a,s,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!o.validate(this.editor))return;let u=se.lift(l.range),d=l.range,h=l.value.length-(s.endColumn-s.startColumn);d={startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.startColumn+l.value.length},h>1&&(s=new un(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+h-1));const p=new G6e(u,s,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,p),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:d,options:az.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=SC(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(Jn)}).catch(Jn)):Promise.resolve(void 0)}};HC.ID="editor.contrib.inPlaceReplaceController";HC.DECORATION=mi.register({description:"in-place-replace",className:"valueSetReplacement"});HC=Y6e([Z6e(1,Oh)],HC);class X6e extends hn{constructor(){super({id:"editor.action.inPlaceReplace.up",label:L("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=HC.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}class Q6e extends hn{constructor(){super({id:"editor.action.inPlaceReplace.down",label:L("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=HC.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}br(HC.ID,HC);It(X6e);It(Q6e);ds((r,e)=>{const t=r.getColor(Zse);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class J6e extends hn{constructor(){super({id:"expandLineSelection",label:L("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:ye.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,al.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}It(J6e);class eWe{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let n=tWe(e,this._cursors);for(let i=0,s=n.length;i<s;i++){let o=n[i];t.addEditOperation(o.range,o.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function tWe(r,e){e.sort((o,a)=>o.lineNumber===a.lineNumber?o.column-a.column:o.lineNumber-a.lineNumber);for(let o=e.length-2;o>=0;o--)e[o].lineNumber===e[o+1].lineNumber&&e.splice(o,1);let t=[],n=0,i=0,s=e.length;for(let o=1,a=r.getLineCount();o<=a;o++){let l=r.getLineContent(o),u=l.length+1,d=0;if(i<s&&e[i].lineNumber===o&&(d=e[i].column,i++,d===u)||l.length===0)continue;let h=Cv(l),p=0;if(h===-1)p=1;else if(h!==l.length-1)p=h+2;else continue;p=Math.max(d,p),t[n++]=oo.delete(new se(o,p,o,u))}return t}class hde{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let i=[];for(let o=n.startLineNumber;o<=n.endLineNumber;o++)i.push(e.getLineContent(o));const s=i.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new se(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new se(n.startLineNumber,1,n.startLineNumber,1),s+`
`):t.addEditOperation(new se(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,s=n.startColumn,o=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(o=o+this._endLineNumberDelta,a=1),n=un.createWithDirection(i,s,o,a,this._selectionDirection)}return n}}class nWe{constructor(e,t,n){this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const{tabSize:s,indentSize:o,insertSpaces:a}=e.getOptions();let l=this.buildIndentConverter(s,o,a),u={getLineTokens:d=>e.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,h)=>e.getLanguageIdAtPosition(d,h),getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){let d=i.startLineNumber,h=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new se(1,1,1,1),null):(t.addEditOperation(new se(d,1,d,1),e.getLineContent(h)),t.addEditOperation(new se(h,1,h,e.getLineMaxColumn(h)),null)),i=new un(h,1,h,1)}else{let d,h;if(this._isMovingDown){d=i.endLineNumber+1,h=e.getLineContent(d),t.addEditOperation(new se(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let p=h;if(this.shouldAutoIndent(e,i)){let v=this.matchEnterRule(e,l,s,d,i.startLineNumber-1);if(v!==null){let S=Vr(e.getLineContent(d)),E=v+Id(S,s);p=Lk(E,s,a)+this.trimLeft(h)}else{u.getLineContent=E=>E===i.startLineNumber?e.getLineContent(d):e.getLineContent(E);let S=hr.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(d,1),i.startLineNumber,l);if(S!==null){let E=Vr(e.getLineContent(d)),k=Id(S,s),D=Id(E,s);k!==D&&(p=Lk(k,s,a)+this.trimLeft(h))}}t.addEditOperation(new se(i.startLineNumber,1,i.startLineNumber,1),p+`
`);let C=this.matchEnterRuleMovingDown(e,l,s,i.startLineNumber,d,p);if(C!==null)C!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,C);else{u.getLineContent=E=>E===i.startLineNumber?p:E>=i.startLineNumber+1&&E<=i.endLineNumber+1?e.getLineContent(E-1):e.getLineContent(E);let S=hr.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(d,1),i.startLineNumber+1,l);if(S!==null){const E=Vr(e.getLineContent(i.startLineNumber)),k=Id(S,s),D=Id(E,s);if(k!==D){const O=k-D;this.getIndentEditsOfMovingBlock(e,t,i,s,a,O)}}}}else t.addEditOperation(new se(i.startLineNumber,1,i.startLineNumber,1),p+`
`)}else if(d=i.startLineNumber-1,h=e.getLineContent(d),t.addEditOperation(new se(d,1,d+1,1),null),t.addEditOperation(new se(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+h),this.shouldAutoIndent(e,i)){u.getLineContent=v=>v===d?e.getLineContent(i.startLineNumber):e.getLineContent(v);let p=this.matchEnterRule(e,l,s,i.startLineNumber,i.startLineNumber-2);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,p);else{let v=hr.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(i.startLineNumber,1),d,l);if(v!==null){let C=Vr(e.getLineContent(i.startLineNumber)),S=Id(v,s),E=Id(C,s);if(S!==E){let k=S-E;this.getIndentEditsOfMovingBlock(e,t,i,s,a,k)}}}}}this._selectionId=t.trackSelection(i)}buildIndentConverter(e,t,n){return{shiftIndent:i=>Lh.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>Lh.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,s){if(s){let o=s.indentation;s.indentAction===ko.None||s.indentAction===ko.Indent?o=s.indentation+s.appendText:s.indentAction===ko.IndentOutdent?o=s.indentation:s.indentAction===ko.Outdent&&(o=t.unshiftIndent(s.indentation)+s.appendText);let a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(o))>=0){let l=Vr(e.getLineContent(i)),u=Vr(o),d=hr.getIndentMetadata(e,i);d!==null&&d&2&&(u=t.unshiftIndent(u));let h=Id(u,n),p=Id(l,n);return h-p}}return null}matchEnterRuleMovingDown(e,t,n,i,s,o){if(Cv(o)>=0){let a=e.getLineMaxColumn(s),l=hr.getEnterAction(this._autoIndent,e,new se(s,a,s,a));return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){let d=e.getLineContent(a);if(Cv(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),u=hr.getEnterAction(this._autoIndent,e,new se(a,l,a,l));return this.parseEnterResult(e,t,n,i,u)}}matchEnterRule(e,t,n,i,s,o){let a=s;for(;a>=1;){let d;if(a===s&&o!==void 0?d=o:d=e.getLineContent(a),Cv(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),u=hr.getEnterAction(this._autoIndent,e,new se(a,l,a,l));return this.parseEnterResult(e,t,n,i,u)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||hr.getIndentRulesSupport(n)===null)}getIndentEditsOfMovingBlock(e,t,n,i,s,o){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){let l=e.getLineContent(a),u=Vr(l),h=Id(u,i)+o,p=Lk(h,i,s);p!==u&&(t.addEditOperation(new se(a,1,a,u.length+1),p),a===n.endLineNumber&&n.endColumn<=u.length+1&&p===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}class bC{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return bC._COLLATOR||(bC._COLLATOR=new Intl.Collator),bC._COLLATOR}getEditOperations(e,t){let n=iWe(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let i=fde(e,t,n);if(!i)return!1;for(let s=0,o=i.before.length;s<o;s++)if(i.before[s]!==i.after[s])return!0;return!1}}bC._COLLATOR=null;function fde(r,e,t){let n=e.startLineNumber,i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;let s=[];for(let a=n;a<=i;a++)s.push(r.getLineContent(a));let o=s.slice(0);return o.sort(bC.getCollator().compare),t===!0&&(o=o.reverse()),{startLineNumber:n,endLineNumber:i,before:s,after:o}}function iWe(r,e,t){let n=fde(r,e,t);return n?oo.replace(new se(n.startLineNumber,1,n.endLineNumber,r.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class gde extends hn{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((o,a)=>({selection:o,index:a,ignore:!1}));n.sort((o,a)=>se.compareRangesUsingStarts(o.selection,a.selection));let i=n[0];for(let o=1;o<n.length;o++){const a=n[o];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const s=[];for(const o of n)s.push(new hde(o.selection,this.down,o.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class rWe extends gde{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:L("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"2_line",title:L({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class sWe extends gde{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:L("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"2_line",title:L({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class oWe extends hn{constructor(){super({id:"editor.action.duplicateSelection",label:L("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:ye.writable,menuOpts:{menuId:vn.MenubarSelectionMenu,group:"2_line",title:L({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],s=t.getSelections(),o=t.getModel();for(const a of s)if(a.isEmpty())i.push(new hde(a,!0));else{const l=new un(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new AEe(l,o.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class pde extends hn{constructor(e,t){super(t),this.down=e}run(e,t){let n=[],i=t.getSelections()||[];const s=t.getOption(9);for(const o of i)n.push(new nWe(o,this.down,s));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class aWe extends pde{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:L("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"2_line",title:L({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class lWe extends pde{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:L("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"2_line",title:L({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class mde extends hn{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const s of n)if(!bC.canRun(t.getModel(),s,this.descending))return;let i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new bC(n[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class uWe extends mde{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:L("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:ye.writable})}}class cWe extends mde{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:L("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:ye.writable})}}class dWe extends hn{constructor(){super({id:"editor.action.removeDuplicateLines",label:L("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:ye.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let i=[],s=[],o=0;for(let a of t.getSelections()){let l=new Set,u=[];for(let v=a.startLineNumber;v<=a.endLineNumber;v++){let C=n.getLineContent(v);l.has(C)||(u.push(C),l.add(C))}let d=new un(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),h=a.startLineNumber-o,p=new un(h,1,h+u.length-1,u[u.length-1].length);i.push(oo.replace(d,u.join(`
`))),s.push(p),o+=a.endLineNumber-a.startLineNumber+1-u.length}t.pushUndoStop(),t.executeEdits(this.id,i,s),t.pushUndoStop()}}class zF extends hn{constructor(){super({id:zF.ID,label:L("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:po(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(a=>new ze(a.positionLineNumber,a.positionColumn)));let s=t.getSelection();if(s===null)return;let o=new eWe(s,i);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop()}}zF.ID="editor.action.trimTrailingWhitespace";class hWe extends hn{constructor(){super({id:"editor.action.deleteLines",label:L("lines.delete","Delete Line"),alias:"Delete Line",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let s=0,o=[],a=[];for(let l=0,u=n.length;l<u;l++){const d=n[l];let h=d.startLineNumber,p=d.endLineNumber,v=1,C=i.getLineMaxColumn(p);p<i.getLineCount()?(p+=1,C=1):h>1&&(h-=1,v=i.getLineMaxColumn(h)),o.push(oo.replace(new un(h,v,p,C),"")),a.push(new un(h-s,d.positionColumn,h-s,d.positionColumn)),s+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(s=>{let o=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(o-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:o,positionColumn:s.positionColumn}});t.sort((s,o)=>s.startLineNumber===o.startLineNumber?s.endLineNumber-o.endLineNumber:s.startLineNumber-o.startLineNumber);let n=[],i=t[0];for(let s=1;s<t.length;s++)i.endLineNumber+1>=t[s].startLineNumber?i.endLineNumber=t[s].endLineNumber:(n.push(i),i=t[s]);return n.push(i),n}}class fWe extends hn{constructor(){super({id:"editor.action.indentLines",label:L("lines.indent","Indent Line"),alias:"Indent Line",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,zs.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class gWe extends hn{constructor(){super({id:"editor.action.outdentLines",label:L("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:2135,weight:100}})}run(e,t){GE.Outdent.runEditorCommand(e,t,null)}}class pWe extends hn{constructor(){super({id:"editor.action.insertLineBefore",label:L("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,zs.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class mWe extends hn{constructor(){super({id:"editor.action.insertLineAfter",label:L("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,zs.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class _de extends hn{run(e,t){if(!t.hasModel())return;const n=t.getSelection();let i=this._getRangesToDelete(t),s=[];for(let l=0,u=i.length-1;l<u;l++){let d=i[l],h=i[l+1];se.intersectRanges(d,h)===null?s.push(d):i[l+1]=se.plusRange(d,h)}s.push(i[i.length-1]);let o=this._getEndCursorState(n,s),a=s.map(l=>oo.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,o),t.pushUndoStop()}}class _We extends _de{constructor(){super({id:"deleteAllLeft",label:L("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,i=[],s=0;return t.forEach(o=>{let a;if(o.endColumn===1&&s>0){let l=o.startLineNumber-s;a=new un(l,o.startColumn,l,o.startColumn)}else a=new un(o.startLineNumber,o.startColumn,o.startLineNumber,o.startColumn);s+=o.endLineNumber-o.startLineNumber,o.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,i=e.getModel();return i===null?[]:(n.sort(se.compareRangesUsingStarts),n=n.map(s=>{if(s.isEmpty())if(s.startColumn===1){let o=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:i.getLineContent(o).length+1;return new se(o,a,s.startLineNumber,1)}else return new se(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new se(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),n)}}class vWe extends _de{constructor(){super({id:"deleteAllRight",label:L("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,i=[];for(let s=0,o=t.length,a=0;s<o;s++){let l=t[s],u=new un(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=u:i.push(u)}return n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let i=n.map(s=>{if(s.isEmpty()){const o=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===o?new se(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new se(s.startLineNumber,s.startColumn,s.startLineNumber,o)}return s});return i.sort(se.compareRangesUsingStarts),i}}class bWe extends hn{constructor(){super({id:"editor.action.joinLines",label:L("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:ye.writable,kbOpts:{kbExpr:ye.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(se.compareRangesUsingStarts);let s=[],o=n.reduce((p,v)=>p.isEmpty()?p.endLineNumber===v.startLineNumber?(i.equalsSelection(p)&&(i=v),v):v.startLineNumber>p.endLineNumber+1?(s.push(p),v):new un(p.startLineNumber,p.startColumn,v.endLineNumber,v.endColumn):v.startLineNumber>p.endLineNumber?(s.push(p),v):new un(p.startLineNumber,p.startColumn,v.endLineNumber,v.endColumn));s.push(o);let a=t.getModel();if(a===null)return;let l=[],u=[],d=i,h=0;for(let p=0,v=s.length;p<v;p++){let C=s[p],S=C.startLineNumber,E=1,k=0,D,O,H=a.getLineContent(C.endLineNumber).length-C.endColumn;if(C.isEmpty()||C.startLineNumber===C.endLineNumber){let $=C.getStartPosition();$.lineNumber<a.getLineCount()?(D=S+1,O=a.getLineMaxColumn(D)):(D=$.lineNumber,O=a.getLineMaxColumn($.lineNumber))}else D=C.endLineNumber,O=a.getLineMaxColumn(D);let V=a.getLineContent(S);for(let $=S+1;$<=D;$++){let P=a.getLineContent($),z=a.getLineFirstNonWhitespaceColumn($);if(z>=1){let M=!0;V===""&&(M=!1),M&&(V.charAt(V.length-1)===" "||V.charAt(V.length-1)==="	")&&(M=!1,V=V.replace(/[\s\uFEFF\xA0]+$/g," "));let W=P.substr(z-1);V+=(M?" ":"")+W,M?k=W.length+1:k=W.length}else k=0}let X=new se(S,E,D,O);if(!X.isEmpty()){let $;C.isEmpty()?(l.push(oo.replace(X,V)),$=new un(X.startLineNumber-h,V.length-k+1,S-h,V.length-k+1)):C.startLineNumber===C.endLineNumber?(l.push(oo.replace(X,V)),$=new un(C.startLineNumber-h,C.startColumn,C.endLineNumber-h,C.endColumn)):(l.push(oo.replace(X,V)),$=new un(C.startLineNumber-h,C.startColumn,C.startLineNumber-h,V.length-H)),se.intersectRanges(X,i)!==null?d=$:u.push($)}h+=X.endLineNumber-X.startLineNumber}u.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,u),t.pushUndoStop()}}class CWe extends hn{constructor(){super({id:"editor.action.transpose",label:L("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:ye.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getModel();if(i===null)return;let s=[];for(let o=0,a=n.length;o<a;o++){let l=n[o];if(!l.isEmpty())continue;let u=l.getStartPosition(),d=i.getLineMaxColumn(u.lineNumber);if(u.column>=d){if(u.lineNumber===i.getLineCount())continue;let h=new se(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),p=i.getValueInRange(h).split("").reverse().join("");s.push(new xl(new un(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),p))}else{let h=new se(u.lineNumber,Math.max(1,u.column-1),u.lineNumber,u.column+1),p=i.getValueInRange(h).split("").reverse().join("");s.push(new f$(h,p,new un(u.lineNumber,u.column+1,u.lineNumber,u.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class UF extends hn{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=t.getOption(116),o=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),u=t.getConfiguredWordAtPosition(l);if(!u)continue;const d=new se(l.lineNumber,u.startColumn,l.lineNumber,u.endColumn),h=i.getValueInRange(d);o.push(oo.replace(d,this._modifyText(h,s)))}else{const l=i.getValueInRange(a);o.push(oo.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}class yWe extends UF{constructor(){super({id:"editor.action.transformToUppercase",label:L("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:ye.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class wWe extends UF{constructor(){super({id:"editor.action.transformToLowercase",label:L("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:ye.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class hq{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class VN extends UF{constructor(){super({id:"editor.action.transformToTitlecase",label:L("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:ye.writable})}_modifyText(e,t){const n=VN.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}}VN.titleBoundary=new hq("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class CC extends UF{constructor(){super({id:"editor.action.transformToSnakecase",label:L("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:ye.writable})}_modifyText(e,t){const n=CC.caseBoundary.get(),i=CC.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}}CC.caseBoundary=new hq("(\\p{Ll})(\\p{Lu})","gmu");CC.singleLetters=new hq("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");It(rWe);It(sWe);It(oWe);It(aWe);It(lWe);It(uWe);It(cWe);It(dWe);It(zF);It(hWe);It(fWe);It(gWe);It(pWe);It(mWe);It(_We);It(vWe);It(bWe);It(CWe);It(yWe);It(wWe);CC.caseBoundary.isSupported()&&CC.singleLetters.isSupported()&&It(CC);VN.titleBoundary.isSupported()&&It(VN);var SWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},LWe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},lz=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const vde=new gn("LinkedEditingInputVisible",!1),bde="linked-editing-decoration";let zC=class uz extends Je{constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new Et),this._editor=e,this._enabled=!1,this._visibleContextKey=vde.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Et),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(n=>{(n.hasChanged(61)||n.hasChanged(81))&&this.reinitialize(!1)})),this._register(rR.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(uz.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(61)||this._editor.getOption(81))&&rR.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._languageWordPattern=hr.getWordDefinition(t.getLanguageId()),this._localToDispose.add(t.onDidChangeLanguageConfiguration(()=>{this._languageWordPattern=hr.getWordDefinition(t.getLanguageId())}));const i=new Pb(this._debounceDuration),s=()=>{this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),this._debounceDuration)},o=new Pb(0),a=l=>{this._rangeSyncTriggerPromise=o.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const u=t.getDecorationRange(this._currentDecorations[0]);if(u&&l.changes.every(d=>u.intersectRanges(d.range))){a(this._currentDecorations);return}}s()})),this._localToDispose.add({dispose:()=>{i.cancel(),o.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||e.length===0)return;const t=this._editor.getModel(),n=t.getDecorationRange(e[0]);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const o=i.match(this._currentWordPattern);if((o?o[0].length:0)!==i.length)return this.clearRanges()}let s=[];for(let o=1,a=e.length;o<a;o++){const l=t.getDecorationRange(e[o]);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:i});else{let u=t.getValueInRange(l),d=i,h=l.startColumn,p=l.endColumn;const v=cx(u,d);h+=v,u=u.substr(v),d=d.substr(v);const C=WM(u,d);p-=C,u=u.substr(0,u.length-C),d=d.substr(0,d.length-C),(h!==p||d.length!==0)&&s.push({range:new se(l.startLineNumber,h,l.endLineNumber,p),text:d})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const o=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(o)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return lz(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const o=n.getDecorationRange(this._currentDecorations[0]);if(o&&o.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=i;const s=dl(o=>lz(this,void 0,void 0,function*(){try{const a=yield Cde(n,t,o);if(s!==this._currentRequest||(this._currentRequest=null,i!==n.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let u=!1;for(let h=0,p=l.length;h<p;h++)if(se.containsPosition(l[h],t)){if(u=!0,h!==0){const v=l[h];l.splice(h,1),l.unshift(v)}break}if(!u){this.clearRanges();return}const d=l.map(h=>({range:h,options:uz.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,d)}catch(a){zv(a)||Jn(a),(this._currentRequest===s||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=s,s})}};zC.ID="editor.contrib.linkedEditing";zC.DECORATION=mi.register({description:"linked-editing",stickiness:0,className:bde});zC=SWe([LWe(1,Xn)],zC);class EWe extends hn{constructor(){super({id:"editor.action.linkedEditing",label:L("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:qt.and(ye.writable,ye.hasRenameProvider),kbOpts:{kbExpr:ye.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(vr),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return $n.isUri(i)&&ze.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},Jn):super.runCommand(e,t)}run(e,t){const n=zC.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const xWe=Rl.bindToContribution(zC.get);Dt(new xWe({id:"cancelLinkedEditingInput",precondition:vde,handler:r=>r.clearRanges(),kbOpts:{kbExpr:ye.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function Cde(r,e,t){const n=rR.ordered(r);return Fie(n.map(i=>()=>lz(this,void 0,void 0,function*(){try{return yield i.provideLinkedEditingRanges(r,e,t)}catch(s){Ml(s);return}})),i=>!!i&&Rd(i==null?void 0:i.ranges))}const DWe=Oe("editor.linkedEditingBackground",{dark:We.fromHex("#f00").transparent(.3),light:We.fromHex("#f00").transparent(.3),hc:We.fromHex("#f00").transparent(.3)},L("editorLinkedEditingBackground","Background color when the editor auto renames on type."));ds((r,e)=>{const t=r.getColor(DWe);t&&e.addRule(`.monaco-editor .${bde} { background: ${t}; border-left-color: ${t}; }`)});jv("_executeLinkedEditingProvider",(r,e)=>Cde(r,e,ki.None));br(zC.ID,zC);It(EWe);var yde=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class IWe{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return yde(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class _P{constructor(e){this._disposables=new Et;let t=[];for(const[n,i]of e){const s=n.links.map(o=>new IWe(o,i));t=_P._union(t,s),nU(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let n=[],i,s,o,a;for(i=0,o=0,s=e.length,a=t.length;i<s&&o<a;){const l=e[i],u=t[o];if(se.areIntersectingOrTouching(l.range,u.range)){i++;continue}se.compareRangesUsingStarts(l.range,u.range)<0?(n.push(l),i++):(n.push(u),o++)}for(;i<s;i++)n.push(e[i]);for(;o<a;o++)n.push(t[o]);return n}}function wde(r,e){const t=[],n=Hk.ordered(r).reverse().map((i,s)=>Promise.resolve(i.provideLinks(r,e)).then(o=>{o&&(t[s]=[o,i])},Ml));return Promise.all(n).then(()=>{const i=new _P(nD(t));return e.isCancellationRequested?(i.dispose(),new _P([])):i})}Ki.registerCommand("_executeLinkProvider",(r,...e)=>yde(void 0,void 0,void 0,function*(){let[t,n]=e;$r(t instanceof $n),typeof n!="number"&&(n=0);const i=r.get(aa).getModel(t);if(!i)return[];const s=yield wde(i,ki.None);if(!s)return[];for(let a=0;a<Math.min(n,s.links.length);a++)yield s.links[a].resolve(ki.None);const o=s.links.slice(0);return s.dispose(),o}));var TWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},kWe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function NWe(r,e){const t=r.url&&/^command:/i.test(r.url.toString()),n=r.tooltip?r.tooltip:t?L("links.navigate.executeCmd","Execute command"):L("links.navigate.follow","Follow link"),i=e?zi?L("links.navigate.kb.meta.mac","cmd + click"):L("links.navigate.kb.meta","ctrl + click"):zi?L("links.navigate.kb.alt.mac","option + click"):L("links.navigate.kb.alt","alt + click");if(r.url){let s="";if(/^command:/i.test(r.url.toString())){const a=r.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=` "${L("tooltip.explanation","Execute command {0}",l)}"`}}return new Wb("",!0).appendMarkdown(`[${n}](${r.url.toString(!0).replace(/ /g,"%20")}${s}) (${i})`)}else return new Wb().appendText(`${n} (${i})`)}const Yee={general:mi.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:mi.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class nx{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:nx._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i=Object.assign({},n?Yee.active:Yee.general);return i.hoverMessage=NWe(e,t),i}activate(e,t){e.changeDecorationOptions(this.decorationId,nx._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,nx._getOptions(this.link,t,!1))}}let kS=class cz{constructor(e,t,n){this.listenersToRemove=new Et,this.editor=e,this.openerService=t,this.notificationService=n;let i=new Due(e);this.listenersToRemove.add(i),this.listenersToRemove.add(i.onMouseMoveOrRelevantKeyDown(([s,o])=>{this._onEditorMouseMove(s,o)})),this.listenersToRemove.add(i.onExecute(s=>{this.onEditorMouseUp(s)})),this.listenersToRemove.add(i.onCancel(s=>{this.cleanUpActiveLinkDecoration()})),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration(s=>{const o=e.getOption(62);this.enabled!==o&&(this.enabled=o,this.updateDecorations([]),this.stop(),this.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(s=>this.onChange())),this.listenersToRemove.add(e.onDidChangeModel(s=>this.onModelChanged())),this.listenersToRemove.add(e.onDidChangeModelLanguage(s=>this.onModelModeChanged())),this.listenersToRemove.add(Hk.onDidChange(s=>this.onModelModeChanged())),this.timeout=new cc,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(e){return e.getContribution(cz.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet(()=>this.beginCompute(),cz.RECOMPUTE_TIME)}beginCompute(){return kWe(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(Hk.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=dl(t=>wde(e,t));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(t){Jn(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(69)==="altKey";let n=[],i=Object.keys(this.currentOccurrences);for(let a=0,l=i.length;a<l;a++){let u=i[a],d=this.currentOccurrences[u];n.push(d.decorationId)}let s=[];if(e)for(const a of e)s.push(nx.decoration(a,t));let o=this.editor.deltaDecorations(n,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let a=0,l=o.length;a<l;a++){let u=new nx(e[a],o[a]);this.currentOccurrences[u.decorationId]=u}}_onEditorMouseMove(e,t){const n=this.editor.getOption(69)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(s=>{i.activate(s,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(69)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(ki.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const o=this.editor.getModel().uri;if(o.scheme===wi.file&&s.startsWith(`${wi.file}:`)){const a=$n.parse(s);if(a.scheme===wi.file){const l=FO(a);let u=null;l.startsWith("/./")?u=`.${l.substr(1)}`:l.startsWith("//./")&&(u=`.${l.substr(2)}`),u&&(s=lwe(o,u))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0})},s=>{const o=s instanceof Error?s.message:s;o==="invalid"?this.notificationService.warn(L("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):o==="missing"?this.notificationService.warn(L("missing.url","Failed to open this link because its target is missing.")):Jn(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};kS.ID="editor.linkDetector";kS.RECOMPUTE_TIME=1e3;kS=TWe([Gee(1,Hd),Gee(2,Oo)],kS);class AWe extends hn{constructor(){super({id:"editor.action.openLink",label:L("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let n=kS.get(t);if(!n||!t.hasModel())return;let i=t.getSelections();for(let s of i){let o=n.getLinkOccurrence(s.getEndPosition());o&&n.openLinkOccurrence(o,!1)}}}br(kS.ID,kS);It(AWe);ds((r,e)=>{const t=r.getColor(ise);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});function yD(r,e){const t=e.filter(n=>!r.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),i=t.length===1?L("cursorAdded","Cursor added: {0}",n):L("cursorsAdded","Cursors added: {0}",n);MM(i)}}class OWe extends hn{constructor(){super({id:"editor.action.insertCursorAbove",label:L("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"3_multi",title:L({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,al.addCursorUp(s,o,i)),s.revealTopMostCursor(n.source),yD(o,s.getCursorStates())}}class MWe extends hn{constructor(){super({id:"editor.action.insertCursorBelow",label:L("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"3_multi",title:L({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.pushStackElement();const o=s.getCursorStates();s.setCursorStates(n.source,3,al.addCursorDown(s,o,i)),s.revealBottomMostCursor(n.source),yD(o,s.getCursorStates())}}class RWe extends hn{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:L("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"3_multi",title:L({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){let s=t.getLineMaxColumn(i);n.push(new un(i,s,i,s))}e.endColumn>1&&n.push(new un(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),s=t._getViewModel(),o=s.getCursorStates();let a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),yD(o,s.getCursorStates())}}class PWe extends hn{constructor(){super({id:"editor.action.addCursorsToBottom",label:L("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount();let s=[];for(let l=n[0].startLineNumber;l<=i;l++)s.push(new un(l,n[0].startColumn,l,n[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();s.length>0&&t.setSelections(s),yD(a,o.getCursorStates())}}class FWe extends hn{constructor(){super({id:"editor.action.addCursorsToTop",label:L("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new un(a,n[0].startColumn,a,n[0].endColumn));const s=t._getViewModel(),o=s.getCursorStates();i.length>0&&t.setSelections(i),yD(o,s.getCursorStates())}}class vO{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class HN{constructor(e,t,n,i,s,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=s,this.matchCase=o,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new HN(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,s,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,s=!0,o=!0):(s=n.wholeWord,o=n.matchCase);const l=e.getSelection();let u,d=null;if(l.isEmpty()){const h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;u=h.word,d=new un(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else u=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new HN(e,t,i,u,s,o,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new vO(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new vO(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new un(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new vO(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new vO(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new un(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1,1073741824)):[]}}class NS extends Je{constructor(e){super(),this._sessionDispose=this._register(new Et),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(NS.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=HN.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new un(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!Sde(this._editor.getModel(),t,i)){const o=this._editor.getModel();let a=[];for(let l=0,u=t.length;l<u;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(116):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const i=n.searchScope;let s=[];t.forEach(o=>{i.forEach(a=>{o.range.endLineNumber<=a.endLineNumber&&o.range.startLineNumber>=a.startLineNumber&&s.push(o)})}),t=s}if(t.length>0){const i=this._editor.getSelection();for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a.range.intersectRanges(i)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new un(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}NS.ID="editor.contrib.multiCursorController";class wD extends hn{run(e,t){const n=NS.get(t);if(!n)return;const i=$d.get(t);if(!i)return;const s=t._getViewModel();if(s){const o=s.getCursorStates();this._run(n,i),yD(o,s.getCursorStates())}}}class BWe extends wD{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:L("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:2082,weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"3_multi",title:L({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class WWe extends wD{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:L("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:vn.MenubarSelectionMenu,group:"3_multi",title:L({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class VWe extends wD{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:L("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:po(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class HWe extends wD{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:L("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class zWe extends wD{constructor(){super({id:"editor.action.selectHighlights",label:L("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:3114,weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"3_multi",title:L({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class UWe extends wD{constructor(){super({id:"editor.action.changeAll",label:L("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:qt.and(ye.writable,ye.editorTextFocus),kbOpts:{kbExpr:ye.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class $We{constructor(e,t,n,i,s){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(se.compareRangesUsingStarts)),this._cachedFindMatches}}class Nb extends Je{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new Qr(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register($d.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(Nb._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const s=NS.get(n);if(!s)return null;const o=$d.get(n);if(!o)return null;let a=s.getSession(o);if(!a){const d=n.getSelections();if(d.length>1){const p=o.getState().matchCase;if(!Sde(n.getModel(),d,p))return null}a=HN.create(n,o)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=o.getState(),u=l.matchCase;if(l.isRevealed){let d=l.searchString;u||(d=d.toLowerCase());let h=a.searchText;if(u||(h=h.toLowerCase()),d===h&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new $We(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(116):null,e)}_setState(e){if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(se.compareRangesUsingStarts);const s=[];for(let l=0,u=0,d=n.length,h=i.length;l<d;){const p=n[l];if(u>=h)s.push(p),l++;else{const v=se.compareRangesUsingStarts(p,i[u]);v<0?((i[u].isEmpty()||!se.areIntersecting(p,i[u]))&&s.push(p),l++):(v>0||l++,u++)}}const o=fx.has(t)&&this.editor.getOption(71),a=s.map(l=>({range:l,options:o?Nb._SELECTION_HIGHLIGHT:Nb._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}Nb.ID="editor.contrib.selectionHighlighter";Nb._SELECTION_HIGHLIGHT_OVERVIEW=mi.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Ps(c4),position:Pd.Inline},overviewRuler:{color:Ps(ose),position:Wd.Center}});Nb._SELECTION_HIGHLIGHT=mi.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function Sde(r,e,t){const n=Zee(r,e[0],!t);for(let i=1,s=e.length;i<s;i++){const o=e[i];if(o.isEmpty())return!1;const a=Zee(r,o,!t);if(n!==a)return!1}return!0}function Zee(r,e,t){const n=r.getValueInRange(e);return t?n.toLowerCase():n}br(NS.ID,NS);br(Nb.ID,Nb);It(OWe);It(MWe);It(RWe);It(BWe);It(WWe);It(VWe);It(HWe);It(zWe);It(UWe);It(PWe);It(FWe);var Lde=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const AS={Visible:new gn("parameterHintsVisible",!1),MultipleSignatures:new gn("parameterHintsMultipleSignatures",!1)};function Ede(r,e,t,n){return Lde(this,void 0,void 0,function*(){const i=Pw.ordered(r);for(const s of i)try{const o=yield s.provideSignatureHelp(r,e,n,t);if(o)return o}catch(o){Ml(o)}})}Ki.registerCommand("_executeSignatureHelpProvider",(r,...e)=>Lde(void 0,void 0,void 0,function*(){const[t,n,i]=e;$r($n.isUri(t)),$r(ze.isIPosition(n)),$r(typeof i=="string"||!i);const s=yield r.get(zc).createModelReference(t);try{const o=yield Ede(s.object.textEditorModel,ze.lift(n),{triggerKind:wv.Invoke,isRetrigger:!1,triggerCharacter:i},ki.None);return o?(setTimeout(()=>o.dispose(),0),o.value):void 0}finally{s.dispose()}}));var jWe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},X1;(function(r){r.Default={type:0};class e{constructor(i,s){this.request=i,this.previouslyActiveHints=s,this.type=2}}r.Pending=e;class t{constructor(i){this.hints=i,this.type=1}}r.Active=t})(X1||(X1={}));class $F extends Je{constructor(e,t=$F.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new Ae),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=X1.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new uc),this.triggerChars=new mE,this.retriggerChars=new mE,this.triggerId=0,this.editor=e,this.throttledDelayer=new Pb(t),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(Pw.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=X1.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!Pw.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(Jn)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(75).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(75).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new X1.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return jWe(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(qWe);this._pendingTriggers=[];const s={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),a=this.editor.getPosition();this.state=new X1.Pending(dl(l=>Ede(o,a,s,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new X1.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=X1.Default),Jn(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new mE,this.retriggerChars=new mE;const e=this.editor.getModel();if(e)for(const t of Pw.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:wv.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:wv.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:wv.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}$F.DEFAULT_DELAY=120;function qWe(r,e){switch(e.triggerKind){case wv.Invoke:return e;case wv.ContentChange:return r;case wv.TriggerCharacter:default:return e}}var KWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},W7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const vh=Ct,GWe=hl("parameter-hints-next",Ie.chevronDown,L("parameterHintsNextIcon","Icon for show next parameter hint.")),YWe=hl("parameter-hints-previous",Ie.chevronUp,L("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let vP=class xde extends Je{constructor(e,t,n,i){super(),this.editor=e,this.renderDisposeables=this._register(new Et),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new zb({editor:e},i,n)),this.model=this._register(new $F(e)),this.keyVisible=AS.Visible.bindTo(t),this.keyMultipleSignatures=AS.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(s=>{s?(this.show(),this.render(s)):this.hide()}))}createParameterHintDOMNodes(){const e=vh(".editor-widget.parameter-hints-widget"),t=st(e,vh(".phwrapper"));t.tabIndex=-1;const n=st(t,vh(".controls")),i=st(n,vh(".button"+vs.asCSSSelector(YWe))),s=st(n,vh(".overloads")),o=st(n,vh(".button"+vs.asCSSSelector(GWe)));this._register(St(i,"click",p=>{Ir.stop(p),this.previous()})),this._register(St(o,"click",p=>{Ir.stop(p),this.next()}));const a=vh(".body"),l=new C2(a,{});this._register(l),t.appendChild(l.getDomNode());const u=st(a,vh(".signature")),d=st(a,vh(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:u,overloads:s,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(p=>{this.visible&&this.editor.layoutContentWidget(this)}));const h=()=>{if(!this.domNodes)return;const p=this.editor.getOption(43);this.domNodes.element.style.fontSize=`${p.fontSize}px`,this.domNodes.element.style.lineHeight=`${p.lineHeight/p.fontSize}`};h(),this._register(yn.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(p=>p.hasChanged(43)).on(h,null)),this._register(this.editor.onDidLayoutChange(p=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=st(this.domNodes.signature,vh(".code")),o=this.editor.getOption(43);s.style.fontSize=`${o.fontSize}px`,s.style.fontFamily=o.fontFamily;const a=i.parameters.length>0,l=(t=i.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,i,l);else{const h=st(s,vh("span"));h.textContent=i.label}const u=i.parameters[l];if(u!=null&&u.documentation){const h=vh("span.documentation");if(typeof u.documentation=="string")h.textContent=u.documentation;else{const p=this.renderMarkdownDocs(u.documentation);h.appendChild(p.element)}st(this.domNodes.docs,vh("p",{},h))}if(i.documentation!==void 0)if(typeof i.documentation=="string")st(this.domNodes.docs,vh("p",{},i.documentation));else{const h=this.renderMarkdownDocs(i.documentation);st(this.domNodes.docs,h.element)}const d=this.hasDocs(i,u);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,u){let h="";const p=i.parameters[l];Array.isArray(p.label)?h=i.label.substring(p.label[0],p.label[1]):h=p.label,p.documentation&&(h+=typeof p.documentation=="string"?`, ${p.documentation}`:`, ${p.documentation.value}`),i.documentation&&(h+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==h&&(Il(L("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&mA(t.documentation).length>0||t&&typeof t.documentation=="object"&&mA(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&mA(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&mA(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,s]=this.getParameterLabelOffsets(t,n),o=document.createElement("span");o.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),st(e,o,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${Af(n.label)}(?=\\W|$)`,"g");i.test(e.label);const s=i.lastIndex-n.label.length;return s>=0?[s,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return xde.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}};vP.ID="editor.widget.parameterHintsWidget";vP=KWe([W7(1,Xn),W7(2,Hd),W7(3,Pl)],vP);const ZWe=Oe("editorHoverWidget.highlightForeground",{dark:G3,light:G3,hc:G3},L("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));ds((r,e)=>{const t=r.getColor(zU);if(t){const u=r.type===Zg.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${u}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=r.getColor(oS);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const i=r.getColor(o4);i&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${i}; }`);const s=r.getColor(a4);s&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${s}; }`);const o=r.getColor(HU);o&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${o}; }`);const a=r.getColor(qre);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const l=r.getColor(ZWe);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var XWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},QWe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let OS=class Dde extends Je{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(vP,this.editor))}static get(e){return e.getContribution(Dde.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};OS.ID="editor.controller.parameterHints";OS=XWe([QWe(1,Li)],OS);class JWe extends hn{constructor(){super({id:"editor.action.triggerParameterHints",label:L("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:ye.hasSignatureHelpProvider,kbOpts:{kbExpr:ye.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=OS.get(t);n&&n.trigger({triggerKind:wv.Invoke})}}br(OS.ID,OS);It(JWe);const fq=100+75,gq=Rl.bindToContribution(OS.get);Dt(new gq({id:"closeParameterHints",precondition:AS.Visible,handler:r=>r.cancel(),kbOpts:{weight:fq,kbExpr:ye.focus,primary:9,secondary:[1033]}}));Dt(new gq({id:"showPrevParameterHint",precondition:qt.and(AS.Visible,AS.MultipleSignatures),handler:r=>r.previous(),kbOpts:{weight:fq,kbExpr:ye.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));Dt(new gq({id:"showNextParameterHint",precondition:qt.and(AS.Visible,AS.MultipleSignatures),handler:r=>r.next(),kbOpts:{weight:fq,kbExpr:ye.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var eVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},V7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const jF=new gn("renameInputVisible",!1,L("renameInputVisible","Whether the rename input widget is visible"));let dz=class{constructor(e,t,n,i,s){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._disposables=new Et,this.allowEditorOverflow=!0,this._visibleContextKey=jF.bindTo(s),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",L("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var t,n;const[i,s]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=L({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(i))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(s))===null||n===void 0?void 0:n.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,i,s;if(!this._input||!this._domNode)return;const o=e.getColor(IC);this._domNode.style.backgroundColor=String((t=e.getColor(Lm))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=o?` 0 0 8px 2px ${o}`:"",this._domNode.style.color=String((n=e.getColor(PU))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((i=e.getColor(RU))!==null&&i!==void 0?i:"");const a=e.getColor(FU);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(s=a==null?void 0:a.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(43);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,n,i,s,o){this._domNode.classList.toggle("preview",s),this._position=new ze(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Et;return new Promise(l=>{this._currentCancelInput=u=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(u),!0),this._currentAcceptInput=u=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:s&&u})},o.onCancellationRequested(()=>this.cancelInput(!0)),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};dz=eVe([V7(2,Fs),V7(3,ks),V7(4,Xn)],dz);var tVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},jw=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class pq{constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=iR.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return jw(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;let s=yield i.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}const n=this.model.getWordAtPosition(this.position);return n?{range:new se(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:se.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return jw(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,i){return jw(this,void 0,void 0,function*(){const s=this._providers[t];if(!s)return{edits:[],rejectReason:n.join(`
`)};const o=yield s.provideRenameEdits(this.model,this.position,e,i);if(o){if(o.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(o.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(L("no result","No result.")),i);return o})}}function nVe(r,e,t){return jw(this,void 0,void 0,function*(){const n=new pq(r,e),i=yield n.resolveRenameLocation(ki.None);return i!=null&&i.rejectReason?{edits:[],rejectReason:i.rejectReason}:n.provideRenameEdits(t,ki.None)})}let MS=class Ide{constructor(e,t,n,i,s,o,a){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=s,this._logService=o,this._configService=a,this._dispoableStore=new Et,this._cts=new Fu,this._renameInputField=this._dispoableStore.add(new OE(()=>this._dispoableStore.add(this._instaService.createInstance(dz,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(Ide.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return jw(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const e=this.editor.getPosition(),t=new pq(this.editor.getModel(),e);if(!t.hasProvider())return;this._cts=new sN(this.editor,5);let n;try{const d=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(d,250),n=yield d}catch(d){kh.get(this.editor).showMessage(d||L("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e);return}if(!n)return;if(n.rejectReason){kh.get(this.editor).showMessage(n.rejectReason,e);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new sN(this.editor,5,n.range);let i=this.editor.getSelection(),s=0,o=n.text.length;!se.isEmpty(i)&&!se.spansMultipleLines(i)&&se.containsRange(n.range,i)&&(s=Math.max(0,i.startColumn-n.range.startColumn),o=Math.min(n.range.endColumn,i.endColumn)-n.range.startColumn);const a=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),l=yield this._renameInputField.value.getInput(n.range,n.text,s,o,a,this._cts.token);if(typeof l=="boolean"){l&&this.editor.focus();return}this.editor.focus();const u=cU(t.provideRenameEdits(l.newName,this._cts.token),this._cts.token).then(d=>jw(this,void 0,void 0,function*(){if(!(!d||!this.editor.hasModel())){if(d.rejectReason){this._notificationService.info(d.rejectReason);return}this.editor.setSelection(se.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(k4.convert(d),{editor:this.editor,showPreview:l.wantsPreview,label:L("label","Renaming '{0}'",n==null?void 0:n.text),quotableLabel:L("quotableLabel","Renaming {0}",n==null?void 0:n.text)}).then(h=>{h.ariaSummary&&Il(L("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",n.text,l.newName,h.ariaSummary))}).catch(h=>{this._notificationService.error(L("rename.failedApply","Rename failed to apply edits")),this._logService.error(h)})}}),d=>{this._notificationService.error(L("rename.failed","Rename failed to compute edits")),this._logService.error(d)});return this._progressService.showWhile(u,250),u})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};MS.ID="editor.contrib.renameController";MS=tVe([iE(1,Li),iE(2,Oo),iE(3,T$),iE(4,jb),iE(5,$v),iE(6,M$)],MS);class iVe extends hn{constructor(){super({id:"editor.action.rename",label:L("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:qt.and(ye.writable,ye.hasRenameProvider),kbOpts:{kbExpr:ye.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(vr),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return $n.isUri(i)&&ze.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(s),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},Jn):super.runCommand(e,t)}run(e,t){const n=MS.get(t);return n?n.run():Promise.resolve()}}br(MS.ID,MS);It(iVe);const mq=Rl.bindToContribution(MS.get);Dt(new mq({id:"acceptRenameInput",precondition:jF,handler:r=>r.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:ye.focus,primary:3}}));Dt(new mq({id:"acceptRenameInputWithPreview",precondition:qt.and(jF,qt.has("config.editor.rename.enablePreview")),handler:r=>r.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:ye.focus,primary:1024+3}}));Dt(new mq({id:"cancelRenameInput",precondition:jF,handler:r=>r.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:ye.focus,primary:9,secondary:[1033]}}));jv("_executeDocumentRenameProvider",function(r,e,...t){const[n]=t;return $r(typeof n=="string"),nVe(r,e,n)});jv("_executePrepareRename",function(r,e){return jw(this,void 0,void 0,function*(){const n=yield new pq(r,e).resolveRenameLocation(ki.None);if(n!=null&&n.rejectReason)throw new Error(n.rejectReason);return n})});mo.as(QS.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:L("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});class rVe{provideSelectionRanges(e,t){const n=[];for(const i of t){const s=[];n.push(s),this._addInWordRanges(s,e,i),this._addWordRanges(s,e,i),this._addWhitespaceLine(s,e,i),s.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;let{word:s,startColumn:o}=i,a=n.column-o,l=a,u=a,d=0;for(;l>=0;l--){let h=s.charCodeAt(l);if(l!==a&&(h===95||h===45))break;if(nC(h)&&J_(d))break;d=h}for(l+=1;u<s.length;u++){let h=s.charCodeAt(u);if(J_(h)&&nC(d))break;if(h===95||h===45)break;d=h}l<u&&e.push({range:new se(n.lineNumber,o+l,n.lineNumber,o+u)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new se(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new se(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var _q=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class vq{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new vq(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}class Wx{constructor(e){this._editor=e,this._ignoreSelection=!1}static get(e){return e.getContribution(Wx.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return _q(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(!_4.has(n)||(this._state||(yield kde(n,t.map(s=>s.getPosition()),this._editor.getOption(101),ki.None).then(s=>{var o;if(!(!Rd(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!xf(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new vq(0,a)),(o=this._selectionListener)===null||o===void 0||o.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state))return;this._state=this._state.map(s=>s.mov(e));const i=this._state.map(s=>un.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}})}}Wx.ID="editor.contrib.smartSelectController";class Tde extends hn{constructor(e,t){super(t),this._forward=e}run(e,t){return _q(this,void 0,void 0,function*(){let n=Wx.get(t);n&&(yield n.run(this._forward))})}}class sVe extends Tde{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:L("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"1_basic",title:L({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Ki.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class oVe extends Tde{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:L("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:ye.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:vn.MenubarSelectionMenu,group:"1_basic",title:L({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}br(Wx.ID,Wx);It(sVe);It(oVe);_4.register("*",new rVe);function kde(r,e,t,n){return _q(this,void 0,void 0,function*(){const i=_4.all(r);i.length===1&&i.unshift(new Ch);let s=[],o=[];for(const a of i)s.push(Promise.resolve(a.provideSelectionRanges(r,e,n)).then(l=>{if(Rd(l)&&l.length===e.length)for(let u=0;u<e.length;u++){o[u]||(o[u]=[]);for(const d of l[u])se.isIRange(d.range)&&se.containsPosition(d.range,e[u])&&o[u].push(se.lift(d.range))}},Ml));return yield Promise.all(s),o.map(a=>{if(a.length===0)return[];a.sort((h,p)=>ze.isBefore(h.getStartPosition(),p.getStartPosition())?1:ze.isBefore(p.getStartPosition(),h.getStartPosition())||ze.isBefore(h.getEndPosition(),p.getEndPosition())?-1:ze.isBefore(p.getEndPosition(),h.getEndPosition())?1:0);let l=[],u;for(const h of a)(!u||se.containsRange(h,u)&&!se.equalsRange(h,u))&&(l.push(h),u=h);if(!t.selectLeadingAndTrailingWhitespace)return l;let d=[l[0]];for(let h=1;h<l.length;h++){const p=l[h-1],v=l[h];if(v.startLineNumber!==p.startLineNumber||v.endLineNumber!==p.endLineNumber){const C=new se(p.startLineNumber,r.getLineFirstNonWhitespaceColumn(p.startLineNumber),p.endLineNumber,r.getLineLastNonWhitespaceColumn(p.endLineNumber));C.containsRange(p)&&!C.equalsRange(p)&&v.containsRange(C)&&!v.equalsRange(C)&&d.push(C);const S=new se(p.startLineNumber,1,p.endLineNumber,r.getLineMaxColumn(p.endLineNumber));S.containsRange(p)&&!S.equalsRange(C)&&v.containsRange(S)&&!v.equalsRange(S)&&d.push(S)}d.push(v)}return d})})}Ibe("_executeSelectionRangeProvider",function(r,...e){const[t]=e;return kde(r,t,{selectLeadingAndTrailingWhitespace:!0},ki.None)});class aVe extends hn{constructor(){super({id:"editor.action.forceRetokenize",label:L("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.resetTokenization();const i=new Ev(!0);n.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}}It(aVe);class Vx extends hn{constructor(){super({id:Vx.ID,label:L({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const i=!ZM.getTabFocusMode();ZM.setTabFocusMode(i),Il(i?L("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):L("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}Vx.ID="editor.action.toggleTabFocusMode";It(Vx);var lVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},uVe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Nde="ignoreUnusualLineTerminators";function cVe(r,e,t){r.setModelProperty(e.uri,Nde,t)}function dVe(r,e){return r.getModelProperty(e.uri,Nde)}let zN=class extends Je{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(113),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(113)&&(this._config=this._editor.getOption(113),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return uVe(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||dVe(this._codeEditorService,e)===!0||this._editor.getOption(80))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:L("unusualLineTerminators.title","Unusual Line Terminators"),message:L("unusualLineTerminators.message","Detected unusual line terminators"),detail:L("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",Mf(e.uri)),primaryButton:L("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:L("unusualLineTerminators.ignore","Ignore")})).confirmed){cVe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};zN.ID="editor.contrib.unusualLineTerminatorsDetector";zN=lVe([Xee(1,x2),Xee(2,vr)],zN);br(zN.ID,zN);var hVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},H7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let UN=class extends Je{constructor(e,t,n,i){super(),this._modelService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._tokenizeViewport=new Qr(()=>this._tokenizeViewportNow(),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange(()=>{this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModelContent(s=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(v4.onDidChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration(P$)&&(this._cancelAll(),this._tokenizeViewport.schedule())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!oV(e,this._themeService,this._configurationService)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}if(!LTe(e)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=dl(s=>Promise.resolve(R$(e,t,s)));return i.then(s=>{if(!s||!s.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:o,tokens:a}=s,l=this._modelService.getSemanticTokensProviderStyling(o);e.setPartialSemanticTokens(t,Goe(a,l,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}};UN.ID="editor.contrib.viewportSemanticTokens";UN=hVe([H7(1,aa),H7(2,Fs),H7(3,es)],UN);br(UN.ID,UN);var fVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gVe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const pVe=Oe("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},L("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),mVe=Oe("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},L("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),_Ve=Oe("editor.wordHighlightBorder",{light:null,dark:null,hc:Uc},L("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),vVe=Oe("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:Uc},L("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),bVe=Oe("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},L("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),CVe=Oe("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},L("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),qF=new gn("hasWordHighlights",!1);function Ade(r,e,t){const n=fx.ordered(r);return Fie(n.map(i=>()=>Promise.resolve(i.provideDocumentHighlights(r,e,t)).then(void 0,Ml)),Rd)}class Ode{constructor(e,t,n){this._wordRange=this._getCurrentWordRange(e,t),this.result=dl(i=>this._compute(e,t,n,i))}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new se(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,s=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let u=0,d=n.length;!l&&u<d;u++){let h=e.getDecorationRange(n[u]);h&&h.startLineNumber===i&&h.startColumn<=s&&h.endColumn>=o&&(l=!0)}return l}cancel(){this.result.cancel()}}class yVe extends Ode{_compute(e,t,n,i){return Ade(e,t.getPosition(),i).then(s=>s||[])}}class wVe extends Ode{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,i){return SC(250,i).then(()=>{if(!t.isEmpty())return[];const s=e.getWordAtPosition(t.getPosition());return!s||s.word.length>1e3?[]:e.findMatches(s.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:Bk.Text}))})}isValid(e,t,n){const i=t.isEmpty();return this._selectionIsEmpty!==i?!1:super.isValid(e,t,n)}}function SVe(r,e,t){return fx.has(r)?new yVe(r,e,t):new wVe(r,e,t)}jv("_executeDocumentHighlights",(r,e)=>Ade(r,e,ki.None));class SD{constructor(e,t){this.toUnhook=new Et,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=qF.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(n=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(n)})),this.toUnhook.add(e.onDidChangeModelContent(n=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(n=>{let i=this.editor.getOption(71);this.occurrencesHighlight!==i&&(this.occurrencesHighlight=i,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return nD(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(se.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(i.startLineNumber);Il(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const o=this.editor.getModel().getLineContent(i.startLineNumber);Il(`${o}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,n=e.endColumn;const i=this._getWord();if(!i||i.startColumn>t||i.endColumn<n){this._stopAll();return}const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),s)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let o=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=SVe(this.model,this.editor.getSelection(),this.editor.getOption(116)),this.workerRequest.result.then(a=>{o===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},Jn)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:SD._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===Bk.Write?this._WRITE_OPTIONS:e===Bk.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}SD._WRITE_OPTIONS=mi.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Ps(CVe),position:Wd.Center},minimap:{color:Ps(c4),position:Pd.Inline}});SD._TEXT_OPTIONS=mi.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Ps(ose),position:Wd.Center},minimap:{color:Ps(c4),position:Pd.Inline}});SD._REGULAR_OPTIONS=mi.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Ps(bVe),position:Wd.Center},minimap:{color:Ps(c4),position:Pd.Inline}});let RS=class Mde extends Je{constructor(e,t){super(),this.wordHighlighter=null;const n=()=>{e.hasModel()&&(this.wordHighlighter=new SD(e,t))};this._register(e.onDidChangeModel(i=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),n()})),n()}static get(e){return e.getContribution(Mde.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};RS.ID="editor.contrib.wordHighlighter";RS=fVe([gVe(1,Xn)],RS);class Rde extends hn{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=RS.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class LVe extends Rde{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:L("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:qF,kbOpts:{kbExpr:ye.editorTextFocus,primary:65,weight:100}})}}class EVe extends Rde{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:L("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:qF,kbOpts:{kbExpr:ye.editorTextFocus,primary:1089,weight:100}})}}class xVe extends hn{constructor(){super({id:"editor.action.wordHighlight.trigger",label:L("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:qF.toNegated(),kbOpts:{kbExpr:ye.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=RS.get(t);i&&i.restoreViewState(!0)}}br(RS.ID,RS);It(LVe);It(EVe);It(xVe);ds((r,e)=>{const t=r.getColor(VU);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=r.getColor(pVe);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const i=r.getColor(mVe);i&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${i}; }`);const s=r.getColor(mCe);s&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const o=r.getColor(_Ve);o&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${r.type==="hc"?"dashed":"solid"} ${o}; box-sizing: border-box; }`);const a=r.getColor(vVe);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${r.type==="hc"?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class KF extends Rl{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=Rf(t.getOption(116)),s=t.getModel(),a=t.getSelections().map(l=>{const u=new ze(l.positionLineNumber,l.positionColumn),d=this._move(i,s,u,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>Ii.fromModelSelection(l))),a.length===1){const l=new ze(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new un(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new un(t.lineNumber,t.column,t.lineNumber,t.column)}}class JC extends KF{_move(e,t,n,i){return er.moveWordLeft(e,t,n,i)}}class ey extends KF{_move(e,t,n,i){return er.moveWordRight(e,t,n,i)}}class DVe extends JC{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class IVe extends JC{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class TVe extends JC{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:qt.and(ye.textInputFocus,(e=qt.and(S2,z4))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class kVe extends JC{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class NVe extends JC{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class AVe extends JC{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:qt.and(ye.textInputFocus,(e=qt.and(S2,z4))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class OVe extends JC{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i){return super._move(Rf(Pm.wordSeparators.defaultValue),t,n,i)}}class MVe extends JC{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i){return super._move(Rf(Pm.wordSeparators.defaultValue),t,n,i)}}class RVe extends ey{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class PVe extends ey{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:qt.and(ye.textInputFocus,(e=qt.and(S2,z4))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class FVe extends ey{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class BVe extends ey{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class WVe extends ey{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:qt.and(ye.textInputFocus,(e=qt.and(S2,z4))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class VVe extends ey{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class HVe extends ey{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i){return super._move(Rf(Pm.wordSeparators.defaultValue),t,n,i)}}class zVe extends ey{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i){return super._move(Rf(Pm.wordSeparators.defaultValue),t,n,i)}}class GF extends Rl{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=Rf(t.getOption(116)),s=t.getModel(),o=t.getSelections(),a=t.getOption(5),l=t.getOption(8),u=hr.getAutoClosingPairs(s.getLanguageId()),d=t._getViewModel(),h=o.map(p=>{const v=this._delete({wordSeparators:i,model:s,selection:p,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:a,autoClosingQuotes:l,autoClosingPairs:u,autoClosedCharacters:d.getCursorAutoClosedCharacters()},this._wordNavigationType);return new xl(v,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}class bq extends GF{_delete(e,t){let n=er.deleteWordLeft(e,t);return n||new se(1,1,1,1)}}class Cq extends GF{_delete(e,t){let n=er.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new se(i,s,i,s)}}class UVe extends bq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:ye.writable})}}class $Ve extends bq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:ye.writable})}}class jVe extends bq{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class qVe extends Cq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:ye.writable})}}class KVe extends Cq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:ye.writable})}}class GVe extends Cq{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class YVe extends hn{constructor(){super({id:"deleteInsideWord",precondition:ye.writable,label:L("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=Rf(t.getOption(116)),s=t.getModel(),a=t.getSelections().map(l=>{const u=er.deleteInsideWord(i,s,l);return new xl(u,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}Dt(new DVe);Dt(new IVe);Dt(new TVe);Dt(new kVe);Dt(new NVe);Dt(new AVe);Dt(new RVe);Dt(new PVe);Dt(new FVe);Dt(new BVe);Dt(new WVe);Dt(new VVe);Dt(new OVe);Dt(new MVe);Dt(new HVe);Dt(new zVe);Dt(new UVe);Dt(new $Ve);Dt(new jVe);Dt(new qVe);Dt(new KVe);Dt(new GVe);It(YVe);class ZVe extends GF{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let n=x4.deleteWordPartLeft(e);return n||new se(1,1,1,1)}}class XVe extends GF{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:ye.writable,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=x4.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new se(i,s,i,s)}}class Pde extends KF{_move(e,t,n,i){return x4.moveWordPartLeft(e,t,n)}}class QVe extends Pde{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Ki.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class JVe extends Pde{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Ki.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Fde extends KF{_move(e,t,n,i){return x4.moveWordPartRight(e,t,n)}}class eHe extends Fde{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class tHe extends Fde{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:ye.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}Dt(new ZVe);Dt(new XVe);Dt(new QVe);Dt(new JVe);Dt(new eHe);Dt(new tHe);var Bde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lM=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Wde=new gn("accessibilityHelpWidgetVisible",!1);let PS=class Vde extends Je{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(Hx,this._editor))}static get(e){return e.getContribution(Vde.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};PS.ID="editor.contrib.accessibilityHelpController";PS=Bde([lM(1,Li)],PS);function nHe(r,e){return!r||r.length===0?qo.noSelection:r.length===1?e?wf(qo.singleSelectionRange,r[0].positionLineNumber,r[0].positionColumn,e):wf(qo.singleSelection,r[0].positionLineNumber,r[0].positionColumn):e?wf(qo.multiSelectionRange,r.length,e):r.length>0?wf(qo.multiSelection,r.length):""}let Hx=class uM extends Ah{constructor(e,t,n,i){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=i,this._editor=e,this._isVisibleKey=Wde.bindTo(this._contextKeyService),this._domNode=tr(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=tr(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(ja(this._contentDomNode.domNode,"keydown",s=>{if(this._isVisible&&(s.equals(2083)&&(Il(qo.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Ca(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),s.preventDefault(),s.stopPropagation()),s.equals(2086))){Il(qo.openingDocs);let o=this._editor.getRawOptions().accessibilityHelpUrl;typeof o>"u"&&(o="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open($n.parse(o)),s.preventDefault(),s.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return uM.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){let i=this._keybindingService.lookupKeybinding(e);return i?wf(t,i.getAriaLabel()):wf(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(l=>{n+=a.getValueLengthInRange(l)})}let i=nHe(t,n);e.get(53)?e.get(80)?i+=qo.readonlyDiffEditor:i+=qo.editableDiffEditor:e.get(80)?i+=qo.readonlyEditor:i+=qo.editableEditor;const s=zi?qo.changeConfigToOnMac:qo.changeConfigToOnWinLinux;switch(e.get(2)){case 0:i+=`

 - `+s;break;case 2:i+=`

 - `+qo.auto_on;break;case 1:i+=`

 - `+qo.auto_off,i+=" "+s;break}e.get(129)?i+=`

 - `+this._descriptionForCommand(Vx.ID,qo.tabFocusModeOnMsg,qo.tabFocusModeOnMsgNoKb):i+=`

 - `+this._descriptionForCommand(Vx.ID,qo.tabFocusModeOffMsg,qo.tabFocusModeOffMsgNoKb);const o=zi?qo.openDocMac:qo.openDocWinLinux;i+=`

 - `+o,i+=`

`+qo.outroMsg,this._contentDomNode.domNode.appendChild(Fae(i)),this._contentDomNode.domNode.setAttribute("aria-label",i)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Ca(this._contentDomNode.domNode),this._editor.focus())}_layout(){let e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(uM.WIDTH,e.width-40)),n=Math.max(5,Math.min(uM.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);let i=Math.round((e.height-n)/2);this._domNode.setTop(i);let s=Math.round((e.width-t)/2);this._domNode.setLeft(s)}};Hx.ID="editor.contrib.accessibilityHelpWidget";Hx.WIDTH=500;Hx.HEIGHT=300;Hx=Bde([lM(1,Xn),lM(2,ks),lM(3,Hd)],Hx);class iHe extends hn{constructor(){super({id:"editor.action.showAccessibilityHelp",label:qo.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){let n=PS.get(t);n&&n.show()}}br(PS.ID,PS);It(iHe);const rHe=Rl.bindToContribution(PS.get);Dt(new rHe({id:"closeAccessibilityHelp",precondition:Wde,handler:r=>r.hide(),kbOpts:{weight:100+100,kbExpr:ye.focus,primary:9,secondary:[1033]}}));ds((r,e)=>{const t=r.getColor(Lm);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=r.getColor(Ib);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const i=r.getColor(IC);i&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${i}; }`);const s=r.getColor(Ao);s&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${s}; }`)});class hz extends Je{constructor(e){super(),this.editor=e,this.widget=null,Lv&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(80);!this.widget&&e?this.widget=new YF(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}hz.ID="editor.contrib.iPadShowKeyboard";class YF extends Je{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(St(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(St(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return YF.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}YF.ID="editor.contrib.ShowKeyboardWidget";br(hz.ID,hz);var sHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Qee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let zx=class Hde extends Je{constructor(e,t,n){super(),this._editor=e,this._modeService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(Qs.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}static get(e){return e.getContribution(Hde.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new ZF(this._editor,this._modeService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};zx.ID="editor.contrib.inspectTokens";zx=sHe([Qee(1,ZC),Qee(2,Pl)],zx);class oHe extends hn{constructor(){super({id:"editor.action.inspectTokens",label:dW.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let n=zx.get(t);n&&n.launch()}}function aHe(r){let e="";for(let t=0,n=r.length;t<n;t++){let i=r.charCodeAt(t);switch(i){case 9:e+="";break;case 32:e+="";break;default:e+=String.fromCharCode(i)}}return e}function lHe(r,e){const t=Qs.get(e);if(t)return t;const n=r.encodeLanguageId(e);return{getInitialState:()=>m2,tokenize:(i,s,o,a)=>Bse(e,i,o,a),tokenize2:(i,s,o,a)=>r$(n,i,o,a)}}class ZF extends Je{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._modeService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=lHe(this._modeService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return ZF._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let l=t.tokens1.length-1;l>=0;l--){let u=t.tokens1[l];if(e.column-1>=u.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}let s=this._model.getLineContent(e.lineNumber),o="";if(n<t.tokens1.length){let l=t.tokens1[n].offset,u=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;o=s.substring(l,u)}EC(this._domNode,Ct("h2.tm-token",void 0,aHe(o),Ct("span.tm-token-length",void 0,`${o.length} ${o.length===1?"char":"chars"}`))),st(this._domNode,Ct("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;st(this._domNode,Ct("table.tm-metadata-table",void 0,Ct("tbody",void 0,Ct("tr",void 0,Ct("td.tm-metadata-key",void 0,"language"),Ct("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),Ct("tr",void 0,Ct("td.tm-metadata-key",void 0,"token type"),Ct("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),Ct("tr",void 0,Ct("td.tm-metadata-key",void 0,"font style"),Ct("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),Ct("tr",void 0,Ct("td.tm-metadata-key",void 0,"foreground"),Ct("td.tm-metadata-value",void 0,`${a?We.Format.CSS.formatHex(a.foreground):"-?-"}`)),Ct("tr",void 0,Ct("td.tm-metadata-key",void 0,"background"),Ct("td.tm-metadata-value",void 0,`${a?We.Format.CSS.formatHex(a.background):"-?-"}`))))),st(this._domNode,Ct("hr.tokens-inspect-separator")),n<t.tokens1.length&&st(this._domNode,Ct("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=Qs.getColorMap(),n=Ru.getLanguageId(e),i=Ru.getTokenType(e),s=Ru.getFontStyle(e),o=Ru.getForeground(e),a=Ru.getBackground(e);return{languageId:this._modeService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:s,foreground:t[o],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),t.length===0&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t,0),i=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),!0,t,0);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t,0).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}ZF._ID="editor.contrib.inspectTokensWidget";br(zx.ID,zx);It(oHe);ds((r,e)=>{const t=r.getColor(zU);if(t){let s=r.type===Zg.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${s}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=r.getColor(oS);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const i=r.getColor(HU);i&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${i}; }`)});var uHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cHe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let bP=class cM{constructor(e){this.quickInputService=e,this.registry=mo.as(XC.Quickaccess)}provide(e){const t=new Et;t.add(e.onDidAccept(()=>{const[s]=e.selectedItems;s&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(s=>{const o=this.registry.getQuickAccessProvider(s.substr(cM.PREFIX.length));o&&o.prefix&&o.prefix!==cM.PREFIX&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})}));const{editorProviders:n,globalProviders:i}=this.getQuickAccessProviders();return e.items=n.length===0||i.length===0?[...n.length===0?i:n]:[{label:L("globalCommands","global commands"),type:"separator"},...i,{label:L("editorCommands","editor commands"),type:"separator"},...n],t}getQuickAccessProviders(){const e=[],t=[];for(const n of this.registry.getQuickAccessProviders().sort((i,s)=>i.prefix.localeCompare(s.prefix)))if(n.prefix!==cM.PREFIX)for(const i of n.helpEntries){const s=i.prefix||n.prefix,o=s||"";(i.needsEditor?t:e).push({prefix:s,label:o,ariaLabel:L("helpPickAriaLabel","{0}, {1}",o,i.description),description:i.description})}return{editorProviders:t,globalProviders:e}}};bP.PREFIX="?";bP=uHe([cHe(0,Wf)],bP);mo.as(XC.Quickaccess).registerQuickAccessProvider({ctor:bP,prefix:"",helpEntries:[{description:hW.helpQuickAccessActionLabel,needsEditor:!0}]});class zde{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const i=new Et;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=i.add(new uc);return s.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),i}doProvide(e,t){const n=new Et,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){const s={editor:i},o=Aoe(i);if(o){let a=Md(i.saveViewState());n.add(o.onDidChangeCursorPosition(()=>{a=Md(i.saveViewState())})),s.restoreViewState=()=>{a&&i===this.activeTextEditorControl&&i.restoreViewState(a)},n.add(Rb(t.onCancellationRequested)(()=>{var l;return(l=s.restoreViewState)===null||l===void 0?void 0:l.call(s)}))}n.add(Bi(()=>this.clearDecorations(i))),n.add(this.provideWithTextEditor(s,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return Noe(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Ps(RLe),position:Wd.Full}}}],[o,a]=n.deltaDecorations(i,s);this.rangeHighlightDecorationId={rangeHighlightId:o,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class XF extends zde{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=L("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,Je.None}provideWithTextEditor(e,t,n){const i=e.editor,s=new Et;s.add(t.onDidAccept(l=>{const[u]=t.selectedItems;if(u){if(!this.isValidLineNumber(i,u.lineNumber))return;this.gotoLocation(e,{range:this.toRange(u.lineNumber,u.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const o=()=>{const l=this.parsePosition(i,t.value.trim().substr(XF.PREFIX.length)),u=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:u}],t.ariaLabel=u,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const d=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(d,0),this.addDecorations(i,d)};o(),s.add(t.onDidChangeValue(()=>o()));const a=Aoe(i);return a&&a.getOptions().get(59).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(Bi(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?L("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):L("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?L("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,s):L("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const s={lineNumber:t,column:n};return i.validatePosition(s).equals(s)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}XF.PREFIX=":";var dHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hHe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let $N=class extends XF{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=yn.None}get activeTextEditorControl(){return Md(this.editorService.getFocusedCodeEditor())}};$N=dHe([hHe(0,vr)],$N);mo.as(XC.Quickaccess).registerQuickAccessProvider({ctor:$N,prefix:$N.PREFIX,helpEntries:[{description:AR.gotoLineActionLabel,needsEditor:!0}]});let fHe=class extends hn{constructor(){super({id:"editor.action.gotoLine",label:AR.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Wf).quickAccess.show($N.PREFIX)}};It(fHe);const Ude=[void 0,[]];function z7(r,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?gHe(r,i.values,t,n):$de(r,e,t,n)}function gHe(r,e,t,n){let i=0;const s=[];for(const o of e){const[a,l]=$de(r,o,t,n);if(typeof a!="number")return Ude;i+=a,s.push(...l)}return[i,pHe(s)]}function $de(r,e,t,n){const i=Sx(e.original,e.originalLowercase,t,r,r.toLowerCase(),n,!0);return i?[i[0],W4(i)]:Ude}function pHe(r){const e=r.sort((i,s)=>i.start-s.start),t=[];let n;for(const i of e)!n||!mHe(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}function mHe(r,e){return!(r.end<e.start||e.end<r.start)}function Jee(r){return r.startsWith('"')&&r.endsWith('"')}const jde=" ";function fz(r){typeof r!="string"&&(r="");const e=r.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=ete(r),s=t.indexOf(kw)>=0,o=Jee(r);let a;const l=r.split(jde);if(l.length>1)for(const u of l){const d=Jee(u),{pathNormalized:h,normalized:p,normalizedLowercase:v}=ete(u);p&&(a||(a=[]),a.push({original:u,originalLowercase:u.toLowerCase(),pathNormalized:h,normalized:p,normalizedLowercase:v,expectContiguousMatch:d}))}return{original:r,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:s,expectContiguousMatch:o}}function ete(r){let e;Nl?e=r.replace(/\//g,kw):e=r.replace(/\\/g,kw);const t=tbe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function tte(r){return Array.isArray(r)?fz(r.map(e=>e.original).join(jde)):fz(r.original)}var ST=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Tf extends zde{constructor(e=Object.create(null)){super(e),this.options=e,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,L("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),Je.None}provideWithTextEditor(e,t,n){const i=e.editor,s=this.getModel(i);return s?Kg.has(s)?this.doProvideWithEditorSymbols(e,s,t,n):this.doProvideWithoutEditorSymbols(e,s,t,n):Je.None}doProvideWithoutEditorSymbols(e,t,n,i){const s=new Et;return this.provideLabelPick(n,L("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),ST(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,s))||i.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,n,i))}),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return ST(this,void 0,void 0,function*(){if(Kg.has(e))return!0;const n=new Bie,i=t.add(Kg.onDidChange(()=>{Kg.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(Bi(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,i){const s=e.editor,o=new Et;o.add(n.onDidAccept(h=>{const[p]=n.selectedItems;p&&p.range&&(this.gotoLocation(e,{range:p.range.selection,keyMods:n.keyMods,preserveFocus:h.inBackground}),h.inBackground||n.hide())})),o.add(n.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const a=this.getDocumentSymbols(t,i);let l;const u=()=>ST(this,void 0,void 0,function*(){l==null||l.dispose(!0),n.busy=!1,l=new Fu(i),n.busy=!0;try{const h=fz(n.value.substr(Tf.PREFIX.length).trim()),p=yield this.doGetSymbolPicks(a,h,void 0,l.token);if(i.isCancellationRequested)return;p.length>0?n.items=p:h.original.length>0?this.provideLabelPick(n,L("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,L("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}});o.add(n.onDidChangeValue(()=>u())),u();let d=!0;return o.add(n.onDidChangeActive(()=>{const[h]=n.activeItems;if(h&&h.range){if(d){d=!1;return}s.revealRangeInCenter(h.range.selection,0),this.addDecorations(s,h.range.decoration)}})),o}doGetSymbolPicks(e,t,n,i){return ST(this,void 0,void 0,function*(){const s=yield e;if(i.isCancellationRequested)return[];const o=t.original.indexOf(Tf.SCOPE_PREFIX)===0,a=o?1:0;let l,u;t.values&&t.values.length>1?(l=tte(t.values[0]),u=tte(t.values.slice(1))):l=t;const d=[];for(let v=0;v<s.length;v++){const C=s[v],S=J0e(C.name),E=`$(symbol-${Y6.toString(C.kind)||"property"}) ${S}`,k=E.length-S.length;let D=C.containerName;n!=null&&n.extraContainerLabel&&(D?D=`${n.extraContainerLabel}  ${D}`:D=n.extraContainerLabel);let O,H,V,X;if(t.original.length>a){let P=!1;if(l!==t&&([O,H]=z7(E,Object.assign(Object.assign({},t),{values:void 0}),a,k),typeof O=="number"&&(P=!0)),typeof O!="number"&&([O,H]=z7(E,l,a,k),typeof O!="number"))continue;if(!P&&u){if(D&&u.original.length>0&&([V,X]=z7(D,u)),typeof V!="number")continue;typeof O=="number"&&(O+=V)}}const $=C.tags&&C.tags.indexOf(1)>=0;d.push({index:v,kind:C.kind,score:O,label:E,ariaLabel:S,description:D,highlights:$?void 0:{label:H,description:X},range:{selection:se.collapseToStart(C.selectionRange),decoration:C.range},strikethrough:$,buttons:(()=>{var P,z;const M=!((P=this.options)===null||P===void 0)&&P.openSideBySideDirection?(z=this.options)===null||z===void 0?void 0:z.openSideBySideDirection():void 0;if(M)return[{iconClass:M==="right"?Ie.splitHorizontal.classNames:Ie.splitVertical.classNames,tooltip:M==="right"?L("openToSide","Open to the Side"):L("openToBottom","Open to the Bottom")}]})()})}const h=d.sort((v,C)=>o?this.compareByKindAndScore(v,C):this.compareByScore(v,C));let p=[];if(o){let E=function(){C&&typeof v=="number"&&S>0&&(C.label=wf($7[v]||U7,S))},v,C,S=0;for(const k of h)v!==k.kind?(E(),v=k.kind,S=1,C={type:"separator"},p.push(C)):S++,p.push(k);E()}else h.length>0&&(p=[{label:L("symbols","symbols ({0})",d.length),type:"separator"},...h]);return p})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=$7[e.kind]||U7,i=$7[t.kind]||U7,s=n.localeCompare(i);return s===0?this.compareByScore(e,t):s}getDocumentSymbols(e,t){return ST(this,void 0,void 0,function*(){const n=yield sc.create(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}}Tf.PREFIX="@";Tf.SCOPE_PREFIX=":";Tf.PREFIX_BY_CATEGORY=`${Tf.PREFIX}${Tf.SCOPE_PREFIX}`;const U7=L("property","properties ({0})"),$7={5:L("method","methods ({0})"),11:L("function","functions ({0})"),8:L("_constructor","constructors ({0})"),12:L("variable","variables ({0})"),4:L("class","classes ({0})"),22:L("struct","structs ({0})"),23:L("event","events ({0})"),24:L("operator","operators ({0})"),10:L("interface","interfaces ({0})"),2:L("namespace","namespaces ({0})"),3:L("package","packages ({0})"),25:L("typeParameter","type parameters ({0})"),1:L("modules","modules ({0})"),6:L("property","properties ({0})"),9:L("enum","enumerations ({0})"),21:L("enumMember","enumeration members ({0})"),14:L("string","strings ({0})"),0:L("file","files ({0})"),17:L("array","arrays ({0})"),15:L("number","numbers ({0})"),16:L("boolean","booleans ({0})"),18:L("object","objects ({0})"),19:L("key","keys ({0})"),7:L("field","fields ({0})"),13:L("constant","constants ({0})")};var _He=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},vHe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let gz=class extends Tf{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=yn.None}get activeTextEditorControl(){return Md(this.editorService.getFocusedCodeEditor())}};gz=_He([vHe(0,vr)],gz);mo.as(XC.Quickaccess).registerQuickAccessProvider({ctor:gz,prefix:Tf.PREFIX,helpEntries:[{description:cN.quickOutlineActionLabel,prefix:Tf.PREFIX,needsEditor:!0},{description:cN.quickOutlineByCategoryActionLabel,prefix:Tf.PREFIX_BY_CATEGORY,needsEditor:!0}]});let bHe=class extends hn{constructor(){super({id:"editor.action.quickOutline",label:cN.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:ye.hasDocumentSymbolProvider,kbOpts:{kbExpr:ye.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Wf).quickAccess.show(Tf.PREFIX)}};It(bHe);function j7(r,e){return e&&(r.stack||r.stacktrace)?L("stackTrace.format","{0}: {1}",ite(r),nte(r.stack)||nte(r.stacktrace)):ite(r)}function nte(r){return Array.isArray(r)?r.join(`
`):r}function ite(r){return typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?L("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||L("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function qde(r=null,e=!1){if(!r)return L("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){const t=nD(r),n=qde(t[0],e);return t.length>1?L("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(Nf(r))return r;if(r.detail){const t=r.detail;if(t.error)return j7(t.error,e);if(t.exception)return j7(t.exception,e)}return r.stack?j7(r,e):r.message?r.message:L("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var bO=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},Iw;(function(r){r[r.NO_ACTION=0]="NO_ACTION",r[r.CLOSE_PICKER=1]="CLOSE_PICKER",r[r.REFRESH_PICKER=2]="REFRESH_PICKER",r[r.REMOVE_ITEM=3]="REMOVE_ITEM"})(Iw||(Iw={}));function q7(r){const e=r;return Array.isArray(e.items)}function CHe(r){const e=r;return!!e.picks&&e.additionalPicks instanceof Promise}class QF extends Je{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;const i=new Et;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s;const o=i.add(new uc),a=()=>bO(this,void 0,void 0,function*(){const l=o.value=new Et;s==null||s.dispose(!0),e.busy=!1,s=new Fu(t);const u=s.token,d=e.value.substr(this.prefix.length).trim(),h=this._getPicks(d,l,u),p=(v,C)=>{var S;let E,k;if(q7(v)?(E=v.items,k=v.active):E=v,E.length===0){if(C)return!1;d.length>0&&(!((S=this.options)===null||S===void 0)&&S.noResultsPick)&&(E=[this.options.noResultsPick])}return e.items=E,k&&(e.activeItems=[k]),!0};if(h!==null)if(CHe(h)){let v=!1,C=!1;yield Promise.all([(()=>bO(this,void 0,void 0,function*(){yield SC(QF.FAST_PICKS_RACE_DELAY),!u.isCancellationRequested&&(C||(v=p(h.picks,!0)))}))(),(()=>bO(this,void 0,void 0,function*(){e.busy=!0;try{const S=yield h.additionalPicks;if(u.isCancellationRequested)return;let E,k;q7(h.picks)?(E=h.picks.items,k=h.picks.active):E=h.picks;let D,O;if(q7(S)?(D=S.items,O=S.active):D=S,D.length>0||!v){let H;if(!k&&!O){const V=e.activeItems[0];V&&E.indexOf(V)!==-1&&(H=V)}p({items:[...E,...D],active:k||O||H})}}finally{u.isCancellationRequested||(e.busy=!1),C=!0}}))()])}else if(!(h instanceof Promise))p(h);else{e.busy=!0;try{const v=yield h;if(u.isCancellationRequested)return;p(v)}finally{u.isCancellationRequested||(e.busy=!1)}}});return i.add(e.onDidChangeValue(()=>a())),a(),i.add(e.onDidAccept(l=>{const[u]=e.selectedItems;typeof(u==null?void 0:u.accept)=="function"&&(l.inBackground||e.hide(),u.accept(e.keyMods,l))})),i.add(e.onDidTriggerItemButton(({button:l,item:u})=>bO(this,void 0,void 0,function*(){var d,h;if(typeof u.trigger=="function"){const p=(h=(d=u.buttons)===null||d===void 0?void 0:d.indexOf(l))!==null&&h!==void 0?h:-1;if(p>=0){const v=u.trigger(p,e.keyMods),C=typeof v=="number"?v:yield v;if(t.isCancellationRequested)return;switch(C){case Iw.NO_ACTION:break;case Iw.CLOSE_PICKER:e.hide();break;case Iw.REFRESH_PICKER:a();break;case Iw.REMOVE_ITEM:const S=e.items.indexOf(u);if(S!==-1){const E=e.items.slice(),k=E.splice(S,1),D=e.activeItems.filter(H=>H!==k[0]),O=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=E,D&&(e.activeItems=D),e.keepScrollPosition=O}break}}}}))),i}}QF.FAST_PICKS_RACE_DELAY=200;var Kde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_w=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},rte=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let jN=class dM extends QF{constructor(e,t,n,i,s,o){super(dM.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=s,this.dialogService=o,this.commandsHistory=this._register(this.instantiationService.createInstance(FS)),this.options=e}_getPicks(e,t,n){return rte(this,void 0,void 0,function*(){const i=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const s=[];for(const u of i){const d=Md(dM.WORD_FILTER(e,u.label)),h=u.commandAlias?Md(dM.WORD_FILTER(e,u.commandAlias)):void 0;d||h?(u.highlights={label:d,detail:this.options.showAlias?h:void 0},s.push(u)):e===u.commandId&&s.push(u)}const o=new Map;for(const u of s){const d=o.get(u.label);d?(u.description=u.commandId,d.description=d.commandId):o.set(u.label,u)}s.sort((u,d)=>{const h=this.commandsHistory.peek(u.commandId),p=this.commandsHistory.peek(d.commandId);return h&&p?h>p?-1:1:h?-1:p?1:u.label.localeCompare(d.label)});const a=[];let l=!1;for(let u=0;u<s.length;u++){const d=s[u],h=this.keybindingService.lookupKeybinding(d.commandId),p=h?L("commandPickAriaLabelWithKeybinding","{0}, {1}",d.label,h.getAriaLabel()):d.label;u===0&&this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:L("recentlyUsed","recently used")}),l=!0),u!==0&&l&&!this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:L("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},d),{ariaLabel:p,detail:this.options.showAlias&&d.commandAlias!==d.label?d.commandAlias:void 0,keybinding:h,accept:()=>rte(this,void 0,void 0,function*(){this.commandsHistory.push(d.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"quick open"});try{yield this.commandService.executeCommand(d.commandId)}catch(v){zv(v)||this.dialogService.show(so.Error,L("canNotRun","Command '{0}' resulted in an error ({1})",d.label,qde(v)))}})}))}return a})}};jN.PREFIX=">";jN.WORD_FILTER=V$(F4,ake,rae);jN=Kde([_w(1,Li),_w(2,ks),_w(3,js),_w(4,Uv),_w(5,x2)],jN);let FS=class Fa extends Je{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=Fa.getConfiguredCommandHistoryLength(this.configurationService),Fa.cache&&Fa.cache.limit!==this.configuredCommandsHistoryLength&&(Fa.cache.limit=this.configuredCommandsHistoryLength,Fa.saveState(this.storageService))}load(){const e=this.storageService.get(Fa.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=Fa.cache=new qC(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((s,o)=>s.value-o.value),i.forEach(s=>n.set(s.key,s.value))}Fa.counter=this.storageService.getNumber(Fa.PREF_KEY_COUNTER,0,Fa.counter)}push(e){Fa.cache&&(Fa.cache.set(e,Fa.counter++),Fa.saveState(this.storageService))}peek(e){var t;return(t=Fa.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Fa.cache)return;const t={usesLRU:!0,entries:[]};Fa.cache.forEach((n,i)=>t.entries.push({key:i,value:n})),e.store(Fa.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Fa.PREF_KEY_COUNTER,Fa.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const s=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof s=="number"?s:Fa.DEFAULT_COMMANDS_HISTORY_LENGTH}};FS.DEFAULT_COMMANDS_HISTORY_LENGTH=50;FS.PREF_KEY_CACHE="commandPalette.mru.cache";FS.PREF_KEY_COUNTER="commandPalette.mru.counter";FS.counter=1;FS=Kde([_w(0,Yv),_w(1,es)],FS);class Gde extends jN{constructor(e,t,n,i,s,o){super(e,t,n,i,s,o)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:q$(n.label)||n.id});return t}}var yHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},wHe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let qN=class extends Gde{constructor(e,t,n,i,s,o){super({showAlias:!1},e,n,i,s,o),this.codeEditorService=t}get activeTextEditorControl(){return Md(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return wHe(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};qN=yHe([rE(0,Li),rE(1,vr),rE(2,ks),rE(3,js),rE(4,Uv),rE(5,x2)],qN);mo.as(XC.Quickaccess).registerQuickAccessProvider({ctor:qN,prefix:qN.PREFIX,helpEntries:[{description:uN.quickCommandHelp,needsEditor:!0}]});class SHe extends hn{constructor(){super({id:"editor.action.quickCommand",label:uN.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:ye.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Wf).quickAccess.show(qN.PREFIX)}}It(SHe);var LHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let pz=class extends FC{constructor(e,t,n,i,s,o,a){super(!0,e,t,n,i,s,o,a)}};pz=LHe([sE(1,Xn),sE(2,vr),sE(3,Oo),sE(4,Li),sE(5,Yv),sE(6,es)],pz);br(FC.ID,pz);class EHe extends hn{constructor(){super({id:"editor.action.toggleHighContrast",label:fW.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(ZC);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getColorTheme().themeName,n.setTheme("hc-black"))}}It(EHe);var ix;(function(r){r.DARK="dark",r.LIGHT="light",r.HIGH_CONTRAST="hc"})(ix||(ix={}));var rx;(function(r){r.dark="dark",r.light="light"})(rx||(rx={}));var KN;(function(r){r.onChange="colorTheme.onChange"})(KN||(KN={}));const xHe={workbenchBackground:"#F3F3F3",foreground:"#616161",errorForeground:"#A1260D",descriptionForeground:"#717171","icon.foreground":"#424242",focusBorder:"#0090F1","widget.shadow":"#A8A8A8","textSeparator.foreground":"#0000002e","textLink.foreground":"#006AB1","textLink.activeForeground":"#006AB1","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#dcdcdc66","input.background":We.white,"input.foreground":"#616161","input.border":"#616161","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":We.fromHex("#007ACC").transparent(.3),"input.placeholderForeground":We.fromHex("#616161").transparent(.5),"dropdown.background":We.white,"dropdown.border":We.white,"checkbox.background":We.white,"checkbox.border":We.white,"button.background":"#007ACC","button.foreground":We.white,"badge.background":"#C4C4C4","badge.foreground":"#333","scrollbar.shadow":"#DDDDDD","scrollbarSlider.background":We.fromHex("#646464").transparent(.4),"scrollbarSlider.hoverBackground":We.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":We.fromHex("#000000").transparent(.6),"progressBar.background":We.fromHex("#0E70C0"),"editorError.background":"#E51400","editorWarning.foreground":"#E51400","editorInfo.foreground":"#E9A700","editorHint.foreground":"#6c6c6c","editor.background":"#fffffe","editor.foreground":"#333333","editor.selectionBackground":"#ADD6FF","editor.findMatchBackground":"#A8AC94","list.dropBackground":"#E4E6F1","list.hoverBackground":"#F0F0F0","list.activeSelectionBackground":"#0074E8","list.activeSelectionForeground":We.white,"menu.foreground":"#616161","menu.background":We.white,"menu.separatorBackground":"#888888","panel.background":We.white,"panel.border":"rgba(128, 128, 128, 0.35)","panelTitle.activeForeground":"rgb(66, 66, 66)","panelTitle.activeBorder":"rgb(66, 66, 66)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},DHe={workbenchBackground:"#252526",foreground:"#CCCCCC","widget.shadow":"#000000",errorForeground:"#F48771",descriptionForeground:We.fromHex("#CCCCCC").transparent(.7),"icon.foreground":"#C5C5C5",focusBorder:"#007FD4","textSeparator.foreground":"#ffffff2e","textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#0a0a0a66","input.background":"#3C3C3C","input.foreground":"#CCCCCC","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":We.fromHex("#0E639C").transparent(.5),"input.placeholderForeground":We.fromHex("#616161").transparent(.5),"dropdown.background":"#3C3C3C","dropdown.foreground":"#F0F0F0","dropdown.border":"#CECECE","checkbox.border":"#CECECE","button.background":"#0E639C","button.foreground":We.white,"badge.background":"#4D4D4D","badge.foreground":We.white,"scrollbar.shadow":"#000000","scrollbarSlider.background":We.fromHex("#797979").transparent(.4),"scrollbarSlider.hoverBackground":We.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":We.fromHex("#BFBFBF").transparent(.4),"progressBar.background":We.fromHex("#0E70C0"),"editorError.background":"#F48771","editorWarning.foreground":"#CCA700","editorInfo.foreground":"#75BEFF","editorHint.foreground":We.fromHex("#eeeeee").transparent(.7),"editor.background":"#1E1E1E","editor.foreground":"#BBBBBB","editor.selectionBackground":"#264F78","editor.selectionForeground":"#000000","list.dropBackground":"#37373D","list.hoverBackground":"#2A2D2E","list.activeSelectionBackground":"#37373D","list.activeSelectionForeground":We.white,"menu.foreground":"#F0F0F0","menu.background":"#3C3C3C","menu.separatorBackground":"#BBBBBB","panel.background":"rgb(30, 30, 30)","panel.border":"#3C3C3C","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},IHe={workbenchBackground:"#000000",foreground:"#FFFFFF",errorForeground:"#F48771",descriptionForeground:We.fromHex("#FFFFFF").transparent(.7),"icon.foreground":"#FFFFFF",focusBorder:"#F38518",contrastBorder:"#6FC3DF",contrastActiveBorder:"#F38518","textSeparator.foreground":We.black,"textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.border":We.white,"textCodeBlock.background":We.black,"input.background":We.black,"input.foreground":"#FFFFFF","input.border":"#6FC3DF","inputOption.activeBorder":"#6FC3DF","input.placeholderForeground":We.fromHex("#616161").transparent(.7),"dropdown.background":We.black,"dropdown.listBackground":We.black,"dropdown.foreground":We.white,"dropdown.border":"#6FC3DF","checkbox.border":"#6FC3DF","button.foreground":We.white,"badge.background":We.black,"badge.foreground":We.white,"scrollbarSlider.background":We.fromHex("#6FC3DF").transparent(.6),"scrollbarSlider.hoverBackground":We.fromHex("#6FC3DF").transparent(.8),"scrollbarSlider.activeBackground":"#6FC3DF","progressBar.background":"#6FC3DF","editorError.border":We.fromHex("#E47777").transparent(.8),"editorWarning.border":We.fromHex("#FFCC00").transparent(.8),"editorInfo.border":We.fromHex("#FFCC00").transparent(.8),"editorHint.border":We.fromHex("#eeeeee").transparent(.8),"editor.background":We.black,"editor.foreground":We.white,"editor.selectionForeground":"#000000","menu.foreground":We.white,"menu.background":We.black,"menu.separatorBackground":"#6FC3DF","panel.border":"#6FC3DF","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"};function THe(r){switch(r.uiTheme){case"vs-dark":return Object.assign({},DHe);case"vs":return Object.assign({},xHe);default:return Object.assign({},IHe)}}function kHe(r){let e="";for(const t in r)if(t){const n=r[t];if(n){const i=t.replace(".","-");e+=`--${i}: ${n}; 
`}}return`
        :root {
            ${e}
        }
    `}function NHe(r){const e=Is.cloneDeep(r);return[["minimap.background","editor.background"],["minimapSlider.background","scrollbarSlider.background"],["minimapSlider.hoverBackground","scrollbarSlider.hoverBackground"],["minimapSlider.activeBackground","scrollbarSlider.activeBackground"],["panel.background","workbenchBackground"],["sash.hoverBorder","focusBorder"],["button.background","textLink.foreground"],["menu.selectionBackground","button.background"],["button.hoverBackground","button.background",n=>We.fromHex(n).lighten(.2)]].forEach(([n,i,s])=>{!e[n]&&e[i]&&(s?e[n]=s(e[i]):e[n]=e[i])}),e}function AHe(r){const e=THe(r),t=NHe(Object.assign(e,r.colors)),n={};for(const a in t)if(a){const l=t[a];l&&typeof l=="object"?n[a]=l.toString():typeof l=="string"&&(n[a]=l)}const i=r.tokenColors,s=[],o=(a,l)=>{const u=s.findIndex(d=>d.token===a);u>=0?Object.assign(s[u],Object.assign({},l.settings)):a&&s.push(Object.assign({token:a},l.settings))};return i==null||i.forEach(a=>{Array.isArray(a.scope)?a.scope.forEach(l=>o(l,a)):o(a.scope,a)}),{base:r.uiTheme,rules:s,inherit:!0,colors:n}}var OHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},MHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};const KT={id:"Default Dark+",name:"Default Dark+",label:"Default Dark+",uiTheme:"vs-dark"},hM=Ni("customize-theme");let BS=class extends Yx{constructor(){super(),this.colorThemes=[KT],this.colorTheme=KT,this.colorTheme&&this.setTheme(this.colorTheme.id)}addThemes(e){(Array.isArray(e)?e:[e]).forEach(n=>{this.getThemeById(n.id)?(Ti.warn(`There has ${n.name} already in theme, it'll update this theme otherwise please don't add the duplicated theme`),this.updateTheme(n)):this.colorThemes.push(Object.assign({},n))})}updateTheme(e){e.id||Ti.error("Update the theme failed!  The 'id' is required in the theme data.");const t=this.colorThemes.findIndex(sr(e.id));t>-1?(Object.assign(this.colorThemes[t],e),this.colorThemes[t].id===this.getColorTheme().id&&this.reload()):Ti.error(`Update the theme failed! There is no theme found via '${e.id}'`)}getThemeById(e){const t=this.colorThemes.find(sr(e));return t?Object.assign({},t):void 0}getColorTheme(){return Object.assign({},this.colorTheme)}setTheme(e){const t=this.getColorTheme(),n=this.getThemeById(e);if(n){this.colorTheme=Object.assign({},n);const i=AHe(n),s=kHe(i.colors);Jfe(s,hM),ac.defineTheme(hM,i),ac.setTheme(hM);const o=this.getColorThemeMode();this.emit(KN.onChange,t,Object.assign({},this.colorTheme),o)}else Ti.error("Can't get the theme by id:"+e)}getThemes(){return this.colorThemes}reload(){this.setTheme(this.getColorTheme().id)}reset(){this.colorThemes=[KT],this.setTheme(KT.id)}getColorThemeMode(){const{colors:e,type:t}=this.colorTheme;if(t===ix.DARK||t===ix.HIGH_CONTRAST)return rx.dark;if(t===ix.LIGHT)return rx.light;const n=(e==null?void 0:e["editor.background"])||(e==null?void 0:e["tab.activeBackground"])||(e==null?void 0:e["molecule.welcomeBackground"]);return n?Xfe(n):rx.dark}onChange(e){this.subscribe(KN.onChange,e)}};BS=OHe([zr(),MHe("design:paramtypes",[])],BS);var WS;(function(r){r.OnClick="activityBar.onClick",r.OnChange="activityBar.onChange",r.DataChanged="activityBar.data",r.ReRender="activityBar.reRender"})(WS||(WS={}));class Yde{constructor(e=[],t=[],n=""){this.data=e,this.contextMenu=t,this.selected=n}}class Zde{constructor(e=[],t=""){this.panes=e,this.current=t}}var RHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},PHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Fv=class extends jc{constructor(){super(),this.state=pt.resolve(Zde)}getPane(e){const{panes:t}=this.state;return t.find(sr(e))}get(e){const t=this.getPane(e);return t?xm(t):void 0}add(e,t=!1){if(this.getPane(e.id)){Ti.error(`There already has a pane which id is ${e.id}, if you want to modify it, please use the update method`);return}const i=this.state.panes.concat();i.push(xm(e)),t&&this.setState({current:e.id}),this.setState({panes:i})}update(e){const{panes:t}=this.state,n=this.getPane(e.id);if(!n){Ti.error(`There is no pane found via the ${e.id} id`);return}Object.assign(n,e),this.setState({panes:xm(t)})}remove(e){var t,n;const{panes:i,current:s}=this.state,o=i.findIndex(sr(e));if(o===-1){Ti.error(`There is no pane found via the ${e} id`);return}if(e===s){const a=((t=i[o+1])===null||t===void 0?void 0:t.id)||((n=i[o-1])===null||n===void 0?void 0:n.id)||"";this.setActive(a)}i.splice(o,1),this.setState({panes:i.concat()})}setActive(e){if(!e)this.setState({current:""});else{if(!this.getPane(e)){Ti.error(`There is no pane found via the ${e} id`);return}this.setState({current:e})}}reset(){this.setState({panes:[],current:""})}};Fv=RHe([zr(),PHe("design:paramtypes",[])],Fv);var FHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},BHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Bv=class extends jc{constructor(){super(),this.state=pt.resolve(Yde),this.sidebarService=pt.resolve(Fv)}setActive(e){this.setState({selected:e})}reset(){this.setState({data:[],selected:"",contextMenu:[]})}add(e,t=!1){let n=[...this.state.data];Array.isArray(e)?n=n==null?void 0:n.concat(e):(n==null||n.push(e),t&&this.setActive(e.id)),n.sort((i,s)=>{const o=i.sortIndex||Number.MAX_SAFE_INTEGER,a=s.sortIndex||Number.MAX_SAFE_INTEGER;return o-a}),this.setState({data:n})}getRemoveList(e,t){return t.reduce((n,i,s)=>{const o=i.id.toString();return Array.isArray(e)&&e.includes(o)||e===o?n.concat(s):n},[])}remove(e){const{data:t}=this.state;let n=[...t];const i=this.getRemoveList(e,n);i.length?(n=n.filter((s,o)=>!i.includes(o)),this.setState({data:n})):Ti.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}toggleBar(e){const{data:t=[],selected:n}=this.state,i=t.concat(),s=i.findIndex(sr(e)),o=i[s];if(o){if(o.hidden=!o.hidden,e===n){const a=(s+1)%i.length;this.setActive(i[a].id),this.sidebarService.setActive(i[a].id)}this.setState({data:i})}else Ti.error("Toggle activity bar failed, please check your id")}toggleContextMenuChecked(e){const{contextMenu:t=[]}=this.state,n=t.concat(),i=n.find(sr(e));i?(i.icon=i.icon==="check"?"":"check",this.setState({contextMenu:n})):Ti.error(`Toggle the contextmenu failed, can not found any menu by id ${e}`)}addContextMenu(e){let t=[...this.state.contextMenu];Array.isArray(e)?t=t==null?void 0:t.concat(e):t==null||t.push(e),this.setState({contextMenu:t})}removeContextMenu(e){const{contextMenu:t}=this.state;let n=[...t];const i=this.getRemoveList(e,n);i.length?(n=n.filter((s,o)=>!i.includes(o)),this.setState({contextMenu:n})):Ti.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}onClick(e){this.subscribe(WS.OnClick,e)}onChange(e){this.subscribe(WS.OnChange,e)}};Bv=FHe([zr(),BHe("design:paramtypes",[])],Bv);var GN;(function(r){r.onTabClick="AuxiliaryBar.onClick"})(GN||(GN={}));class mz{constructor(e="default",t=[],n,i){this.mode="default",this.data=[],this.mode=e,this.children=i,this.data=t,this.current=n}}var Ab;(function(r){r.left="left",r.right="right"})(Ab||(Ab={}));var YN;(function(r){r.onClick="statusBar.onClick",r.DataChanged="statusBar.data"})(YN||(YN={}));class Xde{constructor(e=[],t=[],n=[]){this.leftItems=[],this.rightItems=[],this.leftItems=e,this.rightItems=t,this.contextMenu=n}}var VS;(function(r){r.onSelect="menuBar.onSelect",r.onChangeMode="menuBar.onChangeMode"})(VS||(VS={}));class Qde{constructor(e=[]){this.data=e}}var jg;(function(r){r.onClick="explorer.onClick",r.onPanelToolbarClick="explorer.onPanelToolbarClick",r.onCollapseChange="explorer.onCollapseChange",r.onRemovePanel="explorer.onRemovePanel",r.onCollapseAllFolders="explorer.onCollapseAllFolders"})(jg||(jg={}));class Jde{constructor(e=[],t,n){this.data=e,this.headerToolBar=t,this.activePanelKeys=n}}var Au;(function(r){r.File="File",r.Folder="Folder",r.RootFolder="RootFolder"})(Au||(Au={}));var Ko;(function(r){r.onSelectFile="folderTree.onSelectFile",r.onDelete="folderTree.onDelete",r.onRename="folderTree.onRename",r.onUpdateFileName="folderTree.onUpdateFileName",r.onRightClick="folderTree.onRightClick",r.onContextMenuClick="folderTree.onContextMenuClick",r.onCreate="folderTree.onCreate",r.onLoadData="folderTree.onLoadData",r.onDrop="folderTree.onDrop",r.onExpandKeys="folderTree.onExpandKeys"})(Ko||(Ko={}));class WHe{constructor(e){this.fileType=Au.File;const{id:t,name:n="",location:i="",fileType:s=Au.File,children:o=[],icon:a="",isEditable:l=!1,content:u="",isLeaf:d=!0,data:h}=e;this.fileType=s,this.isEditable=l,this.name=n,this.id=t,this.location=i,this.children=o,this.icon=a,this.content=u,this.data=h,this.isLeaf=d}}class ehe{constructor(e={contextMenu:[],current:null,folderPanelContextMenu:[],data:[],expandKeys:[]},t=!1,n){this.folderTree=e,this.entry=n,this.autoSort=t}}var sa;(function(r){r.onClose="editorTree.close",r.onSelect="editorTree.select",r.onCloseOthers="editorTree.closeOthers",r.onCloseSaved="editorTree.closeSaved",r.onCloseAll="editorTree.closeAll",r.onSaveAll="editorTree.saveAll",r.onSplitEditorLayout="editorTree.splitEditorLayout",r.onToolbarClick="editorTree.toolbarClick",r.onContextMenu="editorTree.contextMenuClick"})(sa||(sa={}));let VHe=class{constructor(){}};var _m;(function(r){r.onChange="search.onChange",r.onSearch="search.onSearch",r.onReplaceAll="search.onReplaceAll",r.onResultClick="search.onResultClick"})(_m||(_m={}));class the{constructor(e=[],t=[],n=[],i=[],s="",o="",a=!1,l=!1,u=!1,d=!1,h=!1,p={type:"info",text:""}){this.result=[],this.value="",this.replaceValue="",this.replaceMode=!1,this.isRegex=!1,this.isCaseSensitive=!1,this.isWholeWords=!1,this.preserveCase=!1,this.validationInfo={type:"info",text:""},this.headerToolBar=e,this.searchAddons=t,this.replaceAddons=n,this.value=s,this.replaceValue=o,this.replaceMode=a,this.isCaseSensitive=l,this.isWholeWords=u,this.isRegex=d,this.preserveCase=h,this.result=i,this.validationInfo=p}}var Ob;(function(r){r.onTabChange="panel.onTabChange",r.onToolbarClick="panel.onToolbarClick",r.onTabClose="panel.onTabClose"})(Ob||(Ob={}));class nhe{constructor(e=null,t=[],n=[]){this.hidden=!1,this.maximize=!1,this.current=e,this.data=t,this.toolbox=n}}var ZN;(function(r){r.OnChange="settings.onchange"})(ZN||(ZN={}));class ihe{constructor(e,t,n){this.colorTheme=e,this.editor=t,this.locale=n}}var CP;(function(r){r[r.Read=1]="Read",r[r.WaitRead=2]="WaitRead"})(CP||(CP={}));class rhe{constructor(e="",t="",n=[],i=1,s=!1,o=[],a){this.id=e,this.name=t,this.sortIndex=i,this.render=a,this.showNotifications=s,this.data=n,this.actionBar=o}}var Im;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(Im||(Im={}));var XN;(function(r){r.onSelect="problems.onSelect"})(XN||(XN={}));class she{constructor(e="",t="",n=[],i=!1){this.id=e,this.name=t,this.show=i,this.data=n}}const ohe={[Yn.Unknown]:"",[Yn.Backspace]:"",[Yn.Tab]:"",[Yn.Enter]:"",[Yn.PageUp]:"",[Yn.PageDown]:"",[Yn.Digit0]:"0",[Yn.Digit1]:"1",[Yn.Digit2]:"2",[Yn.Digit3]:"3",[Yn.Digit4]:"4",[Yn.Digit5]:"5",[Yn.Digit6]:"6",[Yn.Digit7]:"7",[Yn.Digit8]:"8",[Yn.Digit9]:"9",[Yn.KeyA]:"A",[Yn.KeyB]:"B",[Yn.KeyC]:"C",[Yn.KeyD]:"D",[Yn.KeyE]:"E",[Yn.KeyF]:"F",[Yn.KeyG]:"G",[Yn.KeyH]:"H",[Yn.KeyI]:"I",[Yn.KeyJ]:"J",[Yn.KeyK]:"K",[Yn.KeyL]:"L",[Yn.KeyM]:"M",[Yn.KeyN]:"N",[Yn.KeyO]:"O",[Yn.KeyP]:"P",[Yn.KeyQ]:"Q",[Yn.KeyR]:"R",[Yn.KeyS]:"S",[Yn.KeyT]:"T",[Yn.KeyU]:"U",[Yn.KeyV]:"V",[Yn.KeyW]:"W",[Yn.KeyX]:"X",[Yn.KeyY]:"Y",[Yn.KeyZ]:"Z",[Yn.Semicolon]:";",[Yn.Equal]:"+",[Yn.Comma]:",",[Yn.Minus]:"-",[Yn.Period]:".",[Yn.Slash]:"/",[Yn.Backquote]:"~",[Yn.BracketLeft]:"[",[Yn.Backslash]:"\\",[Yn.BracketRight]:"]",[Yn.Quote]:'"'},HHe=Object.freeze(Object.defineProperty({__proto__:null,get ActivityBarEvent(){return WS},ActivityBarModel:Yde,get AuxiliaryEventKind(){return GN},AuxiliaryModel:mz,get ColorScheme(){return ix},get ColorThemeEvent(){return KN},get ColorThemeMode(){return rx},get EditorEvent(){return ho},EditorGroupModel:Ble,EditorModel:Wle,EditorTree:VHe,get EditorTreeEvent(){return sa},get ExplorerEvent(){return jg},get FileTypes(){return Au},get Float(){return Ab},get FolderTreeEvent(){return Ko},get IContributeType(){return xx},IExplorerModel:Jde,get IExtensionType(){return ZV},IFolderTreeModel:ehe,KeyCodeString:ohe,get MarkerSeverity(){return Im},get MenuBarEvent(){return VS},MenuBarModel:Qde,NotificationModel:rhe,get NotificationStatus(){return CP},get PanelEvent(){return Ob},PanelModel:nhe,get ProblemsEvent(){return XN},ProblemsModel:she,get SearchEvent(){return _m},SearchModel:the,get SettingsEvent(){return ZN},SettingsModel:ihe,SidebarModel:Zde,get StatusBarEvent(){return YN},StatusBarModel:Xde,TreeNodeModel:WHe},Symbol.toStringTag,{value:"Module"}));var zHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},UHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Ux=class extends jc{constructor(){super(),this.getCurrentTab=()=>{const{current:e,data:t}=this.getState();return t==null?void 0:t.find(i=>i.key===e)},this.addAuxiliaryBar=e=>{const t=Array.isArray(e)?e:[e];this.setState({data:this.state.data.concat(t)})},this.setActive=e=>{this.setState({current:e})},this.setChildren=e=>{this.setState({children:e})},this.setMode=e=>{if(typeof e=="string")return this.setState({mode:e}),e;const t=e(this.state.mode);return this.setState({mode:t}),t},this.reset=()=>{this.setState(pt.resolve(mz))},this.state=pt.resolve(mz)}onTabClick(e){this.subscribe(GN.onTabClick,e)}};Ux=zHe([zr(),UHe("design:paramtypes",[])],Ux);var $He=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let UC=class extends jc{constructor(){super(),this.sperator="-",this.setMenus=e=>{this.setState({data:Is.cloneDeep(e)})},this.onSelect=e=>{this.subscribe(VS.onSelect,e)},this.state=pt.resolve(Qde)}getReferenceMenu(e){const{data:t}=this.state,n=t.map((s,o)=>({source:s,path:`${o}`}));let i;for(;n.length;){const{source:s,path:o}=n.shift();s.id===e?i={source:s,path:o}:n.push(...(s.data||[]).map((a,l)=>({source:a,path:`${o}${this.sperator}${l}`})))}return i}getMenuById(e){const t=this.getReferenceMenu(e);return t&&Is.cloneDeep(t.source)}append(e,t){const{data:n}=this.state,i=this.getReferenceMenu(t);if(!i){Ti.error(`There is no menu found by ${t}`);return}const{source:s}=i;Array.isArray(s.data)?s.data.push(e):s.data=[e];const o=Is.cloneDeep(n);this.setState({data:o})}remove(e){const{data:t}=this.state,n=this.getReferenceMenu(e);if(!n){Ti.error(`There is no menu found by ${e}`);return}const{path:i}=n,s=i.split(this.sperator);s.length=s.length-1;const o=s.reduce((l,u)=>{const{data:d}=l;return d[u]},{data:t}),a=o.data.findIndex(l=>l.id===e);o.data.splice(a,1),this.setState({data:Is.cloneDeep(t)})}update(e,t={}){const{data:n}=this.state,i=this.getReferenceMenu(e);if(!i){Ti.error(`There is no menu found by ${e}`);return}const s=i.source;Object.assign(s,t);const o=Is.cloneDeep(n);this.setState({data:o})}reset(){this.setState({data:[]})}};UC=$He([zr(),jHe("design:paramtypes",[])],UC);var qHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},KHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Ub=class extends jc{constructor(){super(),this.state=pt.resolve(Jde)}setExpandedPanels(e){this.setState({activePanelKeys:e})}toggleIcon(e){return e==="check"?"":"check"}getAction(e){var t;const{headerToolBar:n}=this.state,i=(t=n==null?void 0:n.contextMenu)===null||t===void 0?void 0:t.find(sr(e));return i&&xm(i)}updatePanel(e){if(!e.id){Ti.error("Must provide id property in update data");return}const t=this.state.data.concat(),n=t.find(sr(e.id));if(!n){Ti.error(`There is no panel found in state whose id is ${e.id}`);return}Object.assign(n,e),this.setState({data:t}),this.updateAction({id:e.id.toString(),name:e.name,title:e.title,sortIndex:e.sortIndex})}updateAction(e){var t;if(!e.id){Ti.error("Must provide id property in action data");return}const{headerToolBar:n}=this.state;if(!n){Ti.error("Molecule can' update the action, because there is no headerToolBar in Explorer");return}const i=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],s=i.find(sr(e.id));if(!s){Ti.error(`There is no action found in actions whose id is ${e.id}`);return}Object.assign(s,e),this.setState({headerToolBar:Object.assign(Object.assign({},n),{contextMenu:i})})}addPanel(e){const t=Array.isArray(e)?e:[e],n=[...this.state.data],i=[];t.forEach(s=>{n.findIndex(sr(s.id))!==-1?Ti.error(`There is already a panel whose id is ${s.id}`):(n.push(xm(s)),i.push({id:s.id.toString(),name:s.name,title:s.name,icon:"check",sortIndex:s.sortIndex}))}),n.sort(({sortIndex:s=0},{sortIndex:o=0})=>o-s),this.setState({data:n}),this.addAction(i)}addAction(e){var t;const n=Array.isArray(e)?e:[e],{headerToolBar:i}=this.state;if(!i){Ti.error("Molecule can't add the action, because there is no headerToolBar in Explorer");return}const s=((t=i.contextMenu)===null||t===void 0?void 0:t.concat())||[];n.forEach(a=>{s.findIndex(sr(a.id))!==-1?Ti.error(`There is already an action whose id is ${a.id}`):s.push(a)}),s.sort(({sortIndex:a=0},{sortIndex:l=0})=>l-a);const o=Object.assign(Object.assign({},i),{contextMenu:s});this.setState({headerToolBar:o})}removePanel(e){const{data:t}=this.state,n=[...t],i=n.findIndex(sr(e));i>-1&&n.splice(i,1),this.setState({data:n}),this.removeAction(e)}removeAction(e){const{headerToolBar:t}=this.state;if(!t){Ti.error("Molecule can' remove the action, because there is no headerToolBar in Explorer");return}const n=t.contextMenu||[],i=n==null?void 0:n.findIndex(sr(e));i>-1&&n.splice(i,1);const s=Object.assign(Object.assign({},t),{contextMenu:n});this.setState({headerToolBar:s})}togglePanel(e){const{data:t}=this.state,n=t.concat(),i=n.find(sr(e));i&&(i.hidden=!i.hidden,this.setState({data:n}),this.toggleHeaderBar(e))}toggleHeaderBar(e){var t;const{headerToolBar:n}=this.state;if(!n){Ti.error("Molecule can' toggle the header bar, because there is no headerToolBar in Explorer");return}const i=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],s=i.find(sr(e));if(s){s.icon=this.toggleIcon(s.icon);const o=Object.assign(Object.assign({},n),{contextMenu:i});this.setState({headerToolBar:o})}}reset(){this.setState({data:[],headerToolBar:void 0})}onClick(e){this.subscribe(jg.onClick,e)}onRemovePanel(e){this.subscribe(jg.onRemovePanel,e)}onCollapseAllFolders(e){this.subscribe(jg.onCollapseAllFolders,e)}onPanelToolbarClick(e){this.subscribe(jg.onPanelToolbarClick,e)}};Ub=qHe([zr(),KHe("design:paramtypes",[])],Ub);const yq="molecule",ahe="activityBar",G2="sidebar",GHe="explorer",ste="statusBar",YHe="folderTree",ZHe="editorTree";var yP;(function(r){r.left="left",r.right="right"})(yP||(yP={}));var Bc;(function(r){r.horizontal="horizontal",r.vertical="vertical"})(Bc||(Bc={}));var wP;(function(r){r.OnWorkbenchDidMount="workbench.didMount"})(wP||(wP={}));class XHe{constructor(e=[300,"auto",300],t=["auto","150px"],n=[],i={hidden:!1},s={hidden:!0},o={hidden:!1,panelMaximized:!1},a={hidden:!1},l={hidden:!1,position:yP.left},u={hidden:!1,mode:Bc.vertical},d=Bc.vertical){this.splitPanePos=e,this.horizontalSplitPanePos=t,this.groupSplitPos=n,this.activityBar=i,this.auxiliaryBar=s,this.panel=o,this.statusBar=a,this.sidebar=l,this.menuBar=u,this.editorGroupDirection=d}}var QHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Nh=class extends jc{constructor(){super(),this.state=pt.resolve(XHe)}onWorkbenchDidMount(e){this.subscribe(wP.OnWorkbenchDidMount,e)}get container(){return this._container=document.getElementById(yq)||document.body,this._container}toggleMenuBarVisibility(){const{menuBar:e}=this.state,t=e.hidden;return this.setState({menuBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}togglePanelVisibility(){const{panel:e}=this.state,t=e.hidden;return this.setState({panel:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleSidebarVisibility(){const{sidebar:e}=this.state,t=e.hidden;return this.setState({sidebar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleActivityBarVisibility(){const{activityBar:e}=this.state,t=e.hidden;return this.setState({activityBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleStatusBarVisibility(){const{statusBar:e}=this.state,t=e.hidden;return this.setState({statusBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}setSideBarPosition(e){const{sidebar:t}=this.state,{position:n}=t;n!==e&&this.setState({sidebar:{position:e,hidden:!1}})}togglePanelMaximized(){const e=this.state.panel;return this.setState({panel:Object.assign(Object.assign({},e),{panelMaximized:!e.panelMaximized})}),!e.panelMaximized}setPaneSize(e){this.setState({splitPanePos:e})}setHorizontalPaneSize(e){this.setState({horizontalSplitPanePos:e})}setGroupSplitSize(e){this.setState({groupSplitPos:e})}setMenuBarMode(e){const{menuBar:t}=this.state,{mode:n}=t;n!==e&&(this.setState({menuBar:Object.assign(Object.assign({},t),{mode:e,hidden:!1})}),this.emit(VS.onChangeMode,e))}getMenuBarMode(){const{menuBar:e}=this.state;return e.mode}setEditorGroupDirection(e){typeof e=="function"?this.setState({editorGroupDirection:e(this.state.editorGroupDirection)}):this.setState({editorGroupDirection:e})}setAuxiliaryBar(e){if(typeof e=="boolean")return this.setState({auxiliaryBar:{hidden:e}}),e;const t=e(this.state.auxiliaryBar.hidden);return this.setState({auxiliaryBar:{hidden:t}}),t}reset(){this.setState({splitPanePos:["300px","auto"],horizontalSplitPanePos:["70%","auto"],activityBar:{hidden:!1},panel:{hidden:!1,panelMaximized:!1},statusBar:{hidden:!1},sidebar:{hidden:!1,position:yP.left},menuBar:{hidden:!1,mode:Bc.vertical}})}};Nh=QHe([zr(),JHe("design:paramtypes",[])],Nh);var eze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let jd=class extends jc{constructor(){super(),this.defaultActions=[],this.defaultMenus=[],this.updateActions=(e,t)=>{var n;const{current:i,groups:s}=this.getState();if(!i)return;const o=(s==null?void 0:s.concat())||[],a=o.find(sr(t||i.id));if(a){const l=((n=a.actions)===null||n===void 0?void 0:n.concat())||[];l.forEach(u=>{const d=e.find(h=>h.id===u.id);d&&Object.assign(u,d)}),a.actions=l,this.setState({current:a.id===i.id?a:i,groups:o})}},this.state=pt.resolve(Wle),this.explorerService=pt.resolve(Ub),this.layoutService=pt.resolve(Nh)}updateEditorOptions(e){var t;const n=Object.assign({},this.state.editorOptions,e);this.setState({editorOptions:n}),(t=this.editorInstance)===null||t===void 0||t.updateOptions(n)}getDefaultActions(){return Is.cloneDeep(this.defaultActions)}getDefaultMenus(){return Is.cloneDeep(this.defaultMenus)}disposeModel(e){(Array.isArray(e)?e:[e]).forEach(n=>{var i;(i=ac.getModel(vC.parse(n.id.toString())))===null||i===void 0||i.dispose()})}isOpened(e,t){return(t||this.state.groups||[]).some(i=>this.getTabById(e,i.id))}setDefaultActions(e){this.defaultActions=e}setDefaultMenus(e){this.defaultMenus=e}setEntry(e){this.setState({entry:e})}getTabById(e,t){var n;const i=this.getGroupById(t);if(i)return(n=i.data)===null||n===void 0?void 0:n.find(sr(e))}get editorInstance(){var e;return(e=this.state.current)===null||e===void 0?void 0:e.editorInstance}updateTab(e,t){var n,i,s;let o;const a=(n=e==null?void 0:e.data)===null||n===void 0?void 0:n.value;if(t){const l=this.getGroupById(t);if(!((i=l==null?void 0:l.data)===null||i===void 0)&&i.length){const u=l.data.find(sr(e.id));u&&(o=Object.assign(u,e)),l.activeTab===e.id&&(o=Object.assign(l.tab,e));const d=ac.getModel(vC.parse(e.id.toString())),h=d==null?void 0:d.getValue();d&&Is.isString(a)&&h!==a&&d.setValue(a),this.updateGroup(t,l),t===((s=this.state.current)===null||s===void 0?void 0:s.id)&&this.updateCurrentGroup(l)}}else{const{groups:l=[],current:u}=this.state;l.forEach(d=>{const h=this.getTabById(e.id,d.id);h&&(o=Object.assign(h,e)),d.activeTab===e.id&&(o=Object.assign(d.tab,e));const p=ac.getModel(vC.parse(e.id.toString())),v=p==null?void 0:p.getValue();p&&Is.isString(a)&&v!==a&&p.setValue(a)}),(u==null?void 0:u.activeTab)===e.id&&(o=Object.assign(u.tab,e)),this.setState({current:u&&Object.assign({},u),groups:[...l]})}return o}setGroupEditorValue(e,t){var n;const i=(n=e.editorInstance)===null||n===void 0?void 0:n.getModel();if(!i)return;(i==null?void 0:i.getValue())!==t&&(i==null||i.setValue(t))}closeTab(e,t){const n=this.getGroupIndexById(t);if(n===-1)return;const{groups:i=[]}=this.state,s=[...i],o=s[n],a=o.data.findIndex(sr(e)),l=Is.cloneDeep(o.data[a]);if(a!==-1){if(o.data.length===1&&a===0){const u=s[n+1]||s[n-1];s.splice(n,1),this.setState({groups:s,current:(s==null?void 0:s.length)===0?void 0:u},()=>{!this.isOpened(e)&&this.disposeModel(l),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(s.length?new Array(s.length+1).fill("auto"):[]);return}if(e===o.activeTab){const u=o.data[a+1]||o.data[a-1];o.tab=Object.assign({},u),o.activeTab=u==null?void 0:u.id}o.data.splice(a,1),s[n]=o,this.setState({current:o,groups:s},()=>{!this.isOpened(e)&&this.disposeModel(l),this.explorerService.forceUpdate()})}}closeOther(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:i=[]}=this.state,s=[...i],o=e.id,l=s[n].data,u=l.filter(sr(o)),d=Is.cloneDeep(l.filter(h=>h.id!==o&&!this.isOpened(h.id,s.filter(p=>p.id!==t))));this.updateGroup(t,{data:u}),this.setActive(t,o),this.disposeModel(d),this.explorerService.forceUpdate()}closeToRight(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:i=[]}=this.state,s=[...i],o=e.id,l=s[n].data,u=l.findIndex(sr(o));if(u<=-1)return;const d=l==null?void 0:l.slice(0,u+1),h=Is.cloneDeep(l==null?void 0:l.slice(u+1).filter(p=>!this.isOpened(p.id,s.filter(v=>v.id!==t))));this.updateGroup(t,{data:d}),this.setActive(t,o),this.disposeModel(h||[]),this.explorerService.forceUpdate()}closeToLeft(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:i=[]}=this.state,s=[...i],o=e.id,l=s[n].data,u=l.findIndex(sr(o));if(u<=-1)return;const d=l==null?void 0:l.slice(u,l.length),h=Is.cloneDeep(l==null?void 0:l.slice(0,u).filter(p=>!this.isOpened(p.id,s.filter(v=>v.id!==t))));this.updateGroup(t,{data:d}),this.setActive(t,o),this.disposeModel(h||[]),this.explorerService.forceUpdate()}getGroupById(e){const{groups:t}=this.state;return t.find(sr(e))}getGroupIndexById(e){const{groups:t}=this.state;return t.findIndex(sr(e))}getGroupIdByTab(e){const{groups:t=[]}=this.state;return this.isOpened(e,t)?t.find(s=>this.getTabById(e,s.id)).id:null}setActive(e,t){const{groups:n=[]}=this.state,i=this.getGroupIndexById(e);if(i>-1){const s=[...n],o=s[i],a=this.getTabById(t,o.id);if(a){const l=Object.assign({},o);l.tab=Object.assign({},a),l.activeTab=t,s[i]=l,this.setState({current:l,groups:s})}}}updateGroup(e,t){const{groups:n=[]}=this.state,i=[...n],s=this.getGroupIndexById(e);if(s>-1){const o=Object.assign({},i[s],t);i[s]=o,this.setState({groups:i})}}updateCurrentGroup(e){const{current:t}=this.state,n=Object.assign({},t,e);this.setState({current:n})}open(e,t){const{current:n,groups:i=[]}=this.state;let s=n;if(t&&(s=this.getGroupById(t)),s){const{id:o}=e,a=s==null?void 0:s.data.find(sr(o));if(a&&o===(s==null?void 0:s.activeTab))return;const l=this.getGroupIndexById(s.id),u=i[l];a||s.data.push(e),s.tab=e,s.activeTab=o,i[l]=Object.assign(Object.assign({},u),{tab:e,activeTab:o})}else s=new Ble(i.length+1,e,e.id,[e],this.defaultActions,this.defaultMenus),i.push(s);this.emit(ho.OpenTab,e),this.setState({current:s,groups:[...i]}),this.explorerService.forceUpdate()}onOpenTab(e){this.subscribe(ho.OpenTab,e)}closeAll(e){var t;const{current:n,groups:i=[]}=this.state,s=this.getGroupIndexById(e);if(s>-1){const o=[...i];let a=n;const l=o.splice(s,1),u=Is.cloneDeep(((t=l[0].data)===null||t===void 0?void 0:t.filter(d=>!this.isOpened(d.id,o)))||[]);n&&n.id===e&&(a=i[s+1]||i[s-1]),this.setState({groups:o,current:a},()=>{this.disposeModel(u),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(o.length?new Array(o.length+1).fill("auto"):[])}}cloneGroup(e){const{current:t,groups:n=[]}=this.state,i=Object.assign({},e?this.getGroupById(e):t),s=mne(),o=Object.assign({},i.tab);return i.data=[o],i.tab=o,i.activeTab=o.id,i.id=s,this.setState({current:i,groups:[...n,i]}),i}onUpdateTab(e){this.subscribe(ho.OnUpdateTab,e)}onMoveTab(e){this.subscribe(ho.OnMoveTab,e)}onSelectTab(e){this.subscribe(ho.OnSelectTab,e)}onCloseAll(e){this.subscribe(ho.OnCloseAll,e)}onCloseTab(e){this.subscribe(ho.OnCloseTab,e)}onCloseOther(e){this.subscribe(ho.OnCloseOther,e)}onCloseToLeft(e){this.subscribe(ho.OnCloseToLeft,e)}onCloseToRight(e){this.subscribe(ho.OnCloseToRight,e)}onActionsClick(e){this.subscribe(ho.onActionsClick,e)}onEditorInstanceMount(e){this.subscribe(ho.onEditorInstanceMount,e)}};jd=eze([zr(),tze("design:paramtypes",[])],jd);var nze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ize=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Wv=class extends jc{constructor(){super(),this.state=pt.resolve(Xde)}getItem(e,t){const{rightItems:n,leftItems:i}=this.state;if(!t){let a=i.findIndex(sr(e.id));return a>-1?{index:a,item:i[a],source:"leftItems"}:(a=n.findIndex(sr(e.id)),a>-1?{index:a,item:n[a],source:"rightItems"}:{index:-1,item:null,source:null})}const s=t===Ab.left?i:n,o=s.findIndex(sr(e.id));return{index:o,item:s[o]||null,source:t===Ab.left?"leftItems":"rightItems"}}add(e,t){if(this.getItem(e,t).item){Ti.error(`There is already a status whose id is ${e.id}, if you want to update it, please use the update method`);return}const i=t===Ab.left?"leftItems":"rightItems",s=this.state[i].concat();s.push(e),this.setState({[i]:s})}update(e,t){const n=this.getItem(e,t);if(!n.source){Ti.error(`There is no status found whose id is ${e.id}`);return}const{index:i,item:s,source:o}=n,a=this.state[o].concat();a[i]=Object.assign({},s,e),this.setState({[o]:a})}getStatusBarItem(e,t){const n=this.getItem({id:e},t);return n.source?xm(n.item):n.item}remove(e,t){const n=this.getItem({id:e},t);if(!n.source){Ti.error(`There is no status item found whose id is ${e}`);return}const{index:i,source:s}=n,o=this.state[s].concat();o.splice(i,1),this.setState({[s]:o})}reset(){this.setState({rightItems:[],leftItems:[],contextMenu:[]})}onClick(e){this.subscribe(YN.onClick,e)}};Wv=nze([zr(),ize("design:paramtypes",[])],Wv);var rze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},oze=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};let $x=class extends jc{constructor(){super(),this.fileContextMenu=[],this.folderContextMenu=[],this.onDropTree=e=>{this.subscribe(Ko.onDrop,e)},this.onRightClick=e=>{this.subscribe(Ko.onRightClick,e)},this.onCreate=e=>{this.subscribe(Ko.onCreate,e)},this.onContextMenu=e=>{this.subscribe(Ko.onContextMenuClick,e)},this.onLoadData=e=>{this.subscribe(Ko.onLoadData,e)},this.onExpandKeys=e=>{this.subscribe(Ko.onExpandKeys,e)},this.state=pt.resolve(ehe),this.explorerService=pt.resolve(Ub),this.builtinService=pt.resolve(ya)}isHiddenFile(e){var t;return!!(!((t=e.name)===null||t===void 0)&&t.startsWith("."))}sortTree(e){e.sort((t,n)=>{if(t.isLeaf!==n.isLeaf)return t.isLeaf>n.isLeaf?1:-1;if(t.name&&n.name){const i=Number(this.isHiddenFile(t)),s=Number(this.isHiddenFile(n));return i^s?i?-1:1:i&i?t.name.substring(1).localeCompare(n.name.substring(1)):t.name.localeCompare(n.name)}return t.isEditable?-1:1}),e.forEach(t=>this.sortTree(t.children||[]))}reset(){this.setState({folderTree:{contextMenu:[],current:null,folderPanelContextMenu:[],data:[]},entry:void 0})}getFileContextMenu(){return this.fileContextMenu}getParentNode(e){var t,n;const i=(n=(t=this.state.folderTree)===null||t===void 0?void 0:t.data)===null||n===void 0?void 0:n[0];if(!i)return null;const s=new tM(i),o=s.getHashMap(e);return o&&o.parent?s.getNode(o.parent):null}setFileContextMenu(e){this.fileContextMenu=e}getFolderContextMenu(){return this.folderContextMenu}setFolderContextMenu(e){this.folderContextMenu=e}getExpandKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.expandKeys)||[]}setExpandKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{expandKeys:e})})}getLoadedKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.loadedKeys)||[]}setLoadedKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{loadedKeys:e})})}setCurrentFolderLocation(e,t){const n=e.children,{tree:i}=this.getCurrentRootFolderInfo(t),s=i.getHashMap(t);e.location=`${s.node.location}/${e.name}`,n!=null&&n.length&&n.forEach(o=>{o.location=`${e.location}/${o.name}`})}getRootFolderById(e){var t;const n=((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[];for(let i=0;i<n.length;i++){const s=n[i];if(new tM(s).getNode(e))return s}return null}addRootFolder(e){var t;const{folderTree:n,autoSort:i}=this.state;if(!((t=n==null?void 0:n.data)===null||t===void 0)&&t.length)return;i&&this.sortTree(e.children||[]),this.setState({folderTree:Object.assign(Object.assign({},n),{data:[e]})});const{SAMPLE_FOLDER_PANEL_ID:s}=this.builtinService.getConstants();this.explorerService.updatePanel({id:s,name:e.name||"Default Root Folder"})}getRootFolderIndex(e){var t;return(((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[]).findIndex(s=>s.id===e)}getCurrentRootFolderInfo(e){const t=this.getRootFolderById(e);if(!t)return{currentRootFolder:null,index:-1,tree:null};const n=this.getRootFolderIndex(t.id),i=new tM(t);return{currentRootFolder:t,index:n,tree:i}}getPosOfType(e,t){if(!t.length||e===Au.Folder||e===Au.RootFolder)return 0;const n=t.findIndex(i=>i.fileType===Au.File);return n===-1?t.length:n}add(e,t){var n,i;const s=e.fileType==="RootFolder",{autoSort:o}=this.state;if(s){this.addRootFolder(e);return}if(!t&&t!==0)throw new Error("File node or folder node both need id");const a=((n=this.state.folderTree)===null||n===void 0?void 0:n.data)||[],{tree:l,index:u}=this.getCurrentRootFolderInfo(t);if(u<=-1){Ti.error("Please check id again, there is not folder tree");return}const d=l.getHashMap(t);if(d.node.fileType===Au.File){e.location=((i=d.node.location)===null||i===void 0?void 0:i.replace(/[^\/]+$/,`${e.name}`))||"";const h=l.getNode(d.parent),p=this.getPosOfType(e.fileType,h.children||[]);l.insertNode(e,d.parent,p)}else{this.setCurrentFolderLocation(e,t);const h=this.getPosOfType(e.fileType,d.node.children||[]);l==null||l.insertNode(e,d.id,h)}a[u]=l.obj,o&&this.sortTree(a[u].children||[]),this.setState({folderTree:Object.assign(Object.assign({},this.state.folderTree),{data:xm(a)})})}remove(e){var t;const n=xm(this.getState().folderTree||{}),i=n.data||[],{tree:s,index:o}=this.getCurrentRootFolderInfo(e);if(!s||o===-1){Ti.error(`There is unable to find a tree node whose id is ${e}`);return}s.removeNode(e),o>-1&&(i[o]=s.obj),!((t=n.loadedKeys)===null||t===void 0)&&t.includes(e.toString())&&(n.loadedKeys=n.loadedKeys.filter(a=>a!==e.toString())),this.setState({folderTree:n})}update(e){const{id:t}=e,n=oze(e,["id"]),{autoSort:i}=this.state;if(!t&&t!==0)throw new Error("Id is required in updating data");const s=xm(this.getState().folderTree||{}),o=s.data||[],{tree:a,index:l}=this.getCurrentRootFolderInfo(t);if(!a){Ti.error(`There is unable to find a tree node whose id is ${t}`);return}a.updateNode(t,n),l>-1&&(o[l]=a.obj,i&&this.sortTree(o[l].children||[])),this.setState({folderTree:s})}get(e){const{tree:t}=this.getCurrentRootFolderInfo(e);return t?t.getNode(e):null}setActive(e){const{folderTree:t}=this.state,n=typeof e>"u"?null:this.get(e);this.setState({folderTree:Object.assign(Object.assign({},t),{current:n})})}setEntry(e){this.setState({entry:e})}onRename(e){this.subscribe(Ko.onRename,e)}onRemove(e){this.subscribe(Ko.onDelete,e)}onUpdateFileName(e){this.subscribe(Ko.onUpdateFileName,e)}onSelectFile(e){this.subscribe(Ko.onSelectFile,e)}toggleAutoSort(){this.setState({autoSort:!this.state.autoSort})}};$x=rze([zr(),sze("design:paramtypes",[])],$x);var aze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let SP=class extends jc{constructor(){super(),this.editorService=pt.resolve(jd),this.state=this.editorService.getState()}onClose(e){this.subscribe(sa.onClose,e)}onCloseOthers(e){this.subscribe(sa.onCloseOthers,e)}onCloseSaved(e){this.subscribe(sa.onCloseSaved,e)}onSelect(e){this.subscribe(sa.onSelect,e)}onCloseAll(e){this.subscribe(sa.onCloseAll,e)}onSaveAll(e){this.subscribe(sa.onSaveAll,e)}onToolbarClick(e){this.subscribe(sa.onToolbarClick,e)}onLayout(e){this.subscribe(sa.onSplitEditorLayout,e)}onContextMenu(e){this.subscribe(sa.onContextMenu,e)}};SP=aze([zr(),lze("design:paramtypes",[])],SP);const mt={PANEL_PROBLEMS:"panel.problems.title",STATUS_PROBLEMS:"statusbar.problems.title",SAMPLE_FOLDER_PANEL_ID:"sidebar.explore.folders",EDITOR_PANEL_ID:"sidebar.explore.openEditor",OUTLINE_PANEL_ID:"sidebar.explore.outline",OUTLINE_PANEL_MORE_DESC:"sidebar.explore.outlineMore",EXPLORER_ACTIVITY_ITEM:"sidebar.explore.title",EXPLORER_ACTION_TITLE:"sidebar.explore.actionDesc",EXPLORER_TOGGLE_VERTICAL:"sidebar.explore.toggleVertical",EXPLORER_TOGGLE_SAVE_ALL:"sidebar.explore.saveALL",EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:"sidebar.explore.closeAllEditors",EXPLORER_TOGGLE_SAVE_GROUP:"sidebar.explore.saveGroup",EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:"sidebar.explore.closeGroupEditors",NEW_FILE_COMMAND_ID:"explorer.newFile",NEW_FOLDER_COMMAND_ID:"explorer.newFolder",COLLAPSE_COMMAND_ID:"explorer.collapse",RENAME_COMMAND_ID:"explorer.rename",REMOVE_COMMAND_ID:"explorer.remove",DELETE_COMMAND_ID:"explorer.delete",OPEN_TO_SIDE_COMMAND_ID:"explorer.openToSide",FIND_IN_WORKSPACE_ID:"filesExplorer.findInWorkspace",DOWNLOAD_COMMAND_ID:"explorer.download",EDITOR_MENU_CLOSE_TO_RIGHT:"editor.closeToRight",EDITOR_MENU_CLOSE_TO_LEFT:"editor.closeToLeft",EDITOR_MENU_CLOSE_ALL:"editor.closeAll",EDITOR_MENU_CLOSE_OTHERS:"editor.closeOthers",EDITOR_MENU_CLOSE_SAVED:"editor.closeSaved",EDITOR_MENU_CLOSE:"editor.close",EDITOR_MENU_SHOW_OPENEDITORS:"editor.showOpenEditors",EDITOR_MENU_SPILIT:"editor.split",SETTING_ID:"Setting",PROBLEM_MODEL_ID:"MO_PROBLEMS",PROBLEM_MODEL_NAME:"Problems",NOTIFICATION_CLEAR_ALL_ID:"ClearAll",NOTIFICATION_HIDE_ID:"HideNotifications",NOTIFICATION_MODEL_ID:"MO_NOTIFICATION",NOTIFICATION_MODEL_NAME:"Notification",STATUS_BAR_HIDE_ID:"hide",SEARCH_CASE_SENSITIVE_COMMAND_ID:"search.matchCase",SEARCH_WHOLE_WORD_COMMAND_ID:"search.matchWholeWord",SEARCH_REGULAR_EXPRESSION_COMMAND_ID:"search.useRegularExpression",SEARCH_PRESERVE_CASE_COMMAND_ID:"search.preserveCase",SEARCH_REPLACE_ALL_COMMAND_ID:"search.replaceAll",SEARCH_ACTIVITY_ITEM:"sidebar.search.title",SEARCH_TOOLBAR_REFRESH:"search.toolbar.refresh",SEARCH_TOOLBAR_CLEAR:"search.toolbar.clearAll",SEARCH_TOOLBAR_COLLAPSE:"search.toolbar.collapseAll",PANEL_TOOLBOX_CLOSE:"panel.toolbox.closePanel",PANEL_TOOLBOX_RESIZE:"panel.toolbox.maximize",PANEL_TOOLBOX_RESTORE_SIZE:"panel.toolbox.restoreSize",PANEL_OUTPUT:"panel.output.title",MENU_APPEARANCE_ID:"Appearance",MENU_FILE_OPEN:"openFile",MENU_QUICK_COMMAND:"editor.action.quickCommand",MENU_VIEW_MENUBAR:"workbench.action.showMenuBar",MENU_VIEW_AUXILIARY:"workbench.action.showAuxiliary",MENU_VIEW_ACTIVITYBAR:"workbench.action.showActivityBar",MENU_VIEW_STATUSBAR:"workbench.action.showStatusBar",MENU_VIEW_PANEL:"workbench.action.showPanel",ACTION_QUICK_COMMAND:"editor.action.quickCommand",ACTION_QUICK_SELECT_ALL:"editor.action.quickSelectAll",ACTION_QUICK_COPY_LINE_UP:"editor.action.copyLinesUpAction",ACTION_QUICK_UNDO:"editor.action.undo",ACTION_QUICK_REDO:"editor.action.redo",ACTION_QUICK_CREATE_FILE:"workbench.action.quickCreateFile",ACTION_QUICK_CREATE_FOLDER:"workbench.action.quickCreateFolder",ACTION_QUICK_ACCESS_SETTINGS:"workbench.action.quickAccessSettings",ACTION_SELECT_THEME:"workbench.action.selectTheme",ACTION_SELECT_LOCALE:"workbench.action.selectLocale",ACTIVITY_BAR_GLOBAL_SETTINGS:"global.menu.settings",ACTIVITY_BAR_GLOBAL_ACCOUNT:"global.menu.account",CONTEXT_MENU_MENU:"menubar",CONTEXT_MENU_EXPLORER:"sidebar.explore.title",CONTEXT_MENU_SEARCH:"sidebar.search.title",CONTEXT_MENU_HIDE:"menu.hideActivityBar",MENUBAR_MODE_HORIZONTAL:"menuBar.mode.horizontal",MENUBAR_MODE_VERTICAL:"menuBar.mode.vertical",MENUBAR_MENU_MODE_DIVIDER:"menuBar.modeDivider"},ote={builtInExplorerActivityItem:()=>({id:mt.EXPLORER_ACTIVITY_ITEM,name:Vt(mt.EXPLORER_ACTIVITY_ITEM,"Explore"),icon:"files",title:Vt(mt.EXPLORER_ACTIVITY_ITEM,"Explore"),sortIndex:1}),builtInExplorerFolderPanel:()=>({id:mt.SAMPLE_FOLDER_PANEL_ID,sortIndex:8,name:Vt("menu.defaultProjectName","No Open Folder"),toolbar:[{id:mt.NEW_FILE_COMMAND_ID,title:Vt("menu.newFile","New File"),icon:"new-file"},{id:mt.NEW_FOLDER_COMMAND_ID,title:Vt("menu.newFolder","New Folder"),icon:"new-folder"},{id:"refresh",title:Vt("sidebar.explore.refresh","Refresh Explorer"),icon:"refresh"},{id:mt.COLLAPSE_COMMAND_ID,title:Vt("sidebar.explore.collapseFolders","Collapse Folders in Explorer"),icon:"collapse-all"}],config:{grow:2}}),builtInExplorerHeaderToolbar:()=>({id:mt.EXPLORER_ACTION_TITLE,title:Vt(mt.EXPLORER_ACTION_TITLE,"View and More Actions..."),icon:"ellipsis",contextMenu:[]}),builtInExplorerEditorPanel:()=>({id:mt.EDITOR_PANEL_ID,sortIndex:9,name:Vt(mt.EDITOR_PANEL_ID,"OPEN EDITORS"),toolbar:[{id:mt.EXPLORER_TOGGLE_VERTICAL,title:Vt(mt.EXPLORER_TOGGLE_VERTICAL,"Toggle Vertical"),icon:"editor-layout"},{id:mt.EXPLORER_TOGGLE_SAVE_ALL,title:Vt(mt.EXPLORER_TOGGLE_SAVE_ALL,"Save All"),icon:"save-all"},{id:mt.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,title:Vt(mt.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,"Close All Editors"),icon:"close-all"}],groupToolbar:[{id:mt.EXPLORER_TOGGLE_SAVE_GROUP,title:Vt(mt.EXPLORER_TOGGLE_SAVE_GROUP,"Save Group"),icon:"save-all"},{id:mt.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,title:Vt(mt.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,"Close Group Editors"),icon:"close-all"}],config:{grow:0}}),builtInExplorerOutlinePanel:()=>({id:"outline",name:Vt("sidebar.explore.outline","OUTLINE"),toolbar:[{id:"outline-collapse",title:Vt("toolbar.collapseAll","Collapse All"),icon:"collapse-all"},{id:"outline-more",title:Vt("sidebar.explore.outlineMore","More Actions..."),icon:"ellipsis"}]}),BuiltInEditorOptions:()=>({renderWhitespace:"none",tabSize:4,fontSize:12}),builtInEditorInitialActions:()=>[{id:mt.EDITOR_MENU_SPILIT,name:"Split Editor Right",title:Vt("editor.actions.splitRight","Split Editor Right"),icon:"split-horizontal",place:"outer"},{id:mt.EDITOR_MENU_SHOW_OPENEDITORS,name:"Show Opened Editors"},{id:mt.EDITOR_MENU_CLOSE_ALL,name:Vt(mt.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorInitialMenu:()=>[{id:mt.EDITOR_MENU_CLOSE,name:Vt(mt.EDITOR_MENU_CLOSE,"Close")},{id:mt.EDITOR_MENU_CLOSE_OTHERS,name:Vt(mt.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:mt.EDITOR_MENU_CLOSE_TO_RIGHT,name:Vt(mt.EDITOR_MENU_CLOSE_TO_RIGHT,"Close To Right")},{id:mt.EDITOR_MENU_CLOSE_TO_LEFT,name:Vt(mt.EDITOR_MENU_CLOSE_TO_LEFT,"Close To Left")},{id:mt.EDITOR_MENU_CLOSE_ALL,name:Vt(mt.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeHeaderContextMenu:()=>[{id:mt.EDITOR_MENU_CLOSE_SAVED,name:Vt(mt.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:mt.EDITOR_MENU_CLOSE_ALL,name:Vt(mt.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeContextMenu:()=>[{id:mt.EDITOR_MENU_CLOSE,name:Vt(mt.EDITOR_MENU_CLOSE,"Close")},{id:mt.EDITOR_MENU_CLOSE_OTHERS,name:Vt(mt.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:mt.EDITOR_MENU_CLOSE_SAVED,name:Vt(mt.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:mt.EDITOR_MENU_CLOSE_ALL,name:Vt(mt.EDITOR_MENU_CLOSE_ALL,"Close All")}],BuiltInSettingsTab:()=>({id:mt.SETTING_ID,name:"settings.json",data:{language:"json",value:""}}),builtInStatusProblems:()=>({id:mt.STATUS_PROBLEMS,sortIndex:1,data:{warnings:0,errors:0,infos:0},name:"Problems"}),builtInPanelProblems:()=>({id:mt.PANEL_PROBLEMS,name:Vt(mt.PANEL_PROBLEMS,"problems"),data:null,sortIndex:1,closable:!1}),NOTIFICATION_CLEAR_ALL:()=>({id:mt.NOTIFICATION_CLEAR_ALL_ID,title:"Clear All Notifications",icon:"clear-all"}),NOTIFICATION_HIDE:()=>({id:mt.NOTIFICATION_HIDE_ID,title:"Hide Notifications",icon:"chevron-down"}),builtInNotification:()=>({id:mt.NOTIFICATION_MODEL_ID,name:mt.NOTIFICATION_MODEL_NAME,sortIndex:1}),STATUS_EDITOR_INFO:()=>({id:"MoEditorInfo",sortIndex:2,data:{ln:0,col:0},name:"Go to Line/Column"}),CONTEXT_MENU_HIDE_STATUS_BAR:()=>({id:mt.STATUS_BAR_HIDE_ID,name:"Hide Status Bar"}),builtInSearchActivityItem:()=>({id:mt.SEARCH_ACTIVITY_ITEM,name:Vt(mt.SEARCH_ACTIVITY_ITEM,"Search"),title:Vt(mt.SEARCH_ACTIVITY_ITEM,"Search"),sortIndex:2,icon:"search"}),builtInHeaderToolbar:()=>[{id:mt.SEARCH_TOOLBAR_REFRESH,title:Vt(mt.SEARCH_TOOLBAR_REFRESH,"Refresh"),disabled:!0,icon:"refresh"},{id:mt.SEARCH_TOOLBAR_CLEAR,disabled:!0,title:Vt(mt.SEARCH_TOOLBAR_CLEAR,"Clear all"),icon:"clear-all"},{id:mt.SEARCH_TOOLBAR_COLLAPSE,title:Vt(mt.SEARCH_TOOLBAR_COLLAPSE,"Collapse all"),disabled:!0,icon:"collapse-all"}],builtInSearchAddons:()=>[{id:mt.SEARCH_CASE_SENSITIVE_COMMAND_ID,title:Vt(mt.SEARCH_CASE_SENSITIVE_COMMAND_ID,"Match Case"),disabled:!1,checked:!1,icon:"case-sensitive"},{id:mt.SEARCH_WHOLE_WORD_COMMAND_ID,title:Vt(mt.SEARCH_WHOLE_WORD_COMMAND_ID,"Match Whole Word"),disabled:!1,checked:!1,icon:"whole-word"},{id:mt.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,disabled:!1,checked:!1,title:Vt(mt.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,"Use Regular Expression"),icon:"regex"}],builtInReplaceAddons:()=>[{id:mt.SEARCH_PRESERVE_CASE_COMMAND_ID,title:Vt(mt.SEARCH_PRESERVE_CASE_COMMAND_ID,"Preserve Case"),disabled:!1,checked:!1,icon:"preserve-case"},{id:mt.SEARCH_REPLACE_ALL_COMMAND_ID,title:Vt(mt.SEARCH_REPLACE_ALL_COMMAND_ID,"Replace All"),disabled:!1,checked:!1,icon:"replace-all"}],builtInOutputPanel:()=>({id:mt.PANEL_OUTPUT,name:Vt(mt.PANEL_OUTPUT,"output"),data:"",sortIndex:2,closable:!1}),builtInPanelToolboxResize:()=>({id:mt.PANEL_TOOLBOX_RESIZE,title:Vt(mt.PANEL_TOOLBOX_RESIZE,"Maximize Panel Size"),icon:"chevron-up"}),builtInPanelToolboxReStore:()=>({id:mt.PANEL_TOOLBOX_RESIZE,title:Vt(mt.PANEL_TOOLBOX_RESTORE_SIZE,"Restore Panel Siz"),icon:"chevron-down"}),builtInPanelToolbox:()=>({id:mt.PANEL_TOOLBOX_CLOSE,title:Vt(mt.PANEL_TOOLBOX_CLOSE,"Close Panel"),icon:"close"}),builtInMenuBarData:()=>[{id:"File",name:Vt("menu.file","File"),data:[{id:mt.ACTION_QUICK_CREATE_FILE,name:Vt("menu.newFile","New File")},{id:mt.MENU_FILE_OPEN,name:Vt("menu.open","Open")}]},{id:"Edit",name:Vt("menu.edit","Edit"),data:[{id:mt.ACTION_QUICK_UNDO,name:Vt("menu.undo","Undo")},{id:mt.ACTION_QUICK_REDO,name:Vt("menu.redo","Redo")}]},{id:"Selection",name:Vt("menu.selection","Selection"),data:[{id:mt.ACTION_QUICK_SELECT_ALL,name:Vt("menu.selectAll","Select All")},{id:mt.ACTION_QUICK_COPY_LINE_UP,name:Vt("menu.copyLineUp","Copy Line Up")}]},{id:"View",name:Vt("menu.view","View"),data:[{id:mt.MENU_QUICK_COMMAND,name:Vt("menu.commandPalette","Command Palette")},{id:"OpenView",name:Vt("menu.openView","Open View")},{id:mt.MENU_APPEARANCE_ID,name:Vt("menu.appearance","Appearance"),data:[{icon:"check",id:mt.MENU_VIEW_MENUBAR,name:Vt("menu.showMenuBar","Show Menu Bar")},{icon:"check",id:G2,name:Vt("menu.showSideBar","Show Side Bar")},{id:mt.MENU_VIEW_AUXILIARY,name:Vt("menu.showAuxiliaryBar","Show Auxiliary Bar")},{icon:"check",id:mt.MENU_VIEW_STATUSBAR,name:Vt("menu.showStatusBar","Show Status Bar")},{icon:"check",id:mt.MENU_VIEW_ACTIVITYBAR,name:Vt("menu.showActivityBar","Show Activity Bar")},{icon:"check",id:mt.MENU_VIEW_PANEL,name:Vt("menu.showPanel","Show Panel")},{id:mt.MENUBAR_MENU_MODE_DIVIDER,type:"divider"},{id:mt.MENUBAR_MODE_HORIZONTAL,name:Vt("menu.menuBarHorizontal","Menu Bar Horizontal Mode")},{id:mt.MENUBAR_MODE_VERTICAL,name:Vt("menu.menuBarVertical","Menu Bar Vertical Mode")}]}]},{id:"Run",name:Vt("menu.run","Run"),data:[{id:"RunTask",name:Vt("menu.runTask","Run Task")}]},{id:"Help",name:Vt("menu.help","Help"),data:[{id:"About",name:Vt("menu.about","About")}]}],quickAcessViewAction:()=>({id:mt.ACTION_QUICK_COMMAND}),quickSelectColorThemeAction:()=>({id:mt.ACTION_SELECT_THEME}),quickAccessSettingsAction:()=>({id:mt.ACTION_QUICK_ACCESS_SETTINGS}),quickSelectLocaleAction:()=>({id:mt.ACTION_SELECT_LOCALE}),quickTogglePanelAction:()=>({id:mt.MENU_VIEW_PANEL}),quickSelectAllAction:()=>({id:mt.ACTION_QUICK_SELECT_ALL}),quickCopyLineUpAction:()=>({id:mt.ACTION_QUICK_COPY_LINE_UP}),quickUndoAction:()=>({id:mt.ACTION_QUICK_UNDO}),quickRedoAction:()=>({id:mt.ACTION_QUICK_REDO}),quickCreateFileAction:()=>({id:mt.ACTION_QUICK_CREATE_FILE}),COMMON_CONTEXT_MENU:()=>[{id:mt.RENAME_COMMAND_ID,name:Vt("contextmenu.rename","Rename")},{id:mt.DELETE_COMMAND_ID,name:Vt("contextmenu.delete","Delete")}],BASE_CONTEXT_MENU:()=>[{id:mt.NEW_FILE_COMMAND_ID,name:Vt("contextmenu.newFile","New File")},{id:mt.NEW_FOLDER_COMMAND_ID,name:Vt("contextmenu.newFolder","New Folder")}],ROOT_FOLDER_CONTEXT_MENU:()=>[{id:mt.REMOVE_COMMAND_ID,name:Vt("contextmenu.removeFolder","Remove Folder")}],FILE_CONTEXT_MENU:()=>[{id:mt.OPEN_TO_SIDE_COMMAND_ID,name:Vt("contextmenu.openToTheSide","Open to the Side")}],FOLDER_PANEL_CONTEXT_MENU:()=>[{id:mt.NEW_FOLDER_COMMAND_ID,name:Vt("contextmenu.addFolderToSpace","Add Folder to Workspace...")},{id:mt.FIND_IN_WORKSPACE_ID,name:Vt("contextmenu.findInSpace","Find in Workspace...")},{id:mt.DOWNLOAD_COMMAND_ID,name:Vt("contextmenu.download","Download...")}],activityBarData:()=>[{id:mt.ACTIVITY_BAR_GLOBAL_ACCOUNT,name:Vt("menu.account","Account"),title:Vt("menu.account","Account"),icon:"account",type:"global"},{id:mt.ACTIVITY_BAR_GLOBAL_SETTINGS,name:Vt("menu.settings","Settings"),title:Vt("menu.settings","Settings"),icon:"settings-gear",type:"global",contextMenu:[{id:mt.ACTION_QUICK_COMMAND,name:Vt("menu.commandPalette","Command Palette")},{id:mt.ACTION_QUICK_ACCESS_SETTINGS,name:Vt("menu.settings","Settings")},{id:mt.ACTION_SELECT_THEME,name:Vt("menu.colorTheme","Color Theme")}]}],contextMenuData:()=>[{id:mt.CONTEXT_MENU_MENU,name:Vt("menubar","Menu"),icon:"check"},{id:mt.CONTEXT_MENU_EXPLORER,name:Vt("sidebar.explore.title","Explorer"),icon:"check"},{id:mt.CONTEXT_MENU_SEARCH,name:Vt("sidebar.search.title","Search"),icon:"check"},{id:mt.CONTEXT_MENU_HIDE,name:Vt("menu.hideActivityBar","Hide Activity Bar")}]};var uze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let ya=class{constructor(){this.builtinConstants=new Map,this.builtinModules=new Map,this.initialize()}initialize(){Object.keys(mt).forEach(e=>{this.addConstant({id:e,value:mt[e]})}),Object.keys(ote).forEach(e=>{this.addModules({id:e,module:ote[e]})})}addConstant(e){const t=e.id;this.builtinConstants.set(t,Object.assign(Object.assign({},e),{active:!0}))}addModules(e){const t=e.id;this.builtinModules.set(t,Object.assign(Object.assign({},e),{active:!0}))}getConstant(e){return this.builtinConstants.get(e)}getConstants(){const e={};return this.builtinConstants.forEach(t=>{t.active&&(e[t.id]=t.value)}),e}inactiveConstant(e){if(!this.builtinConstants.has(e))return Ti.error(`Can't find constant which is ${e}`),!1;const n=this.builtinConstants.get(e);return this.builtinConstants.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}inactiveModule(e){if(!this.builtinModules.has(e))return Ti.error(`Can't find module which is ${e}`),!1;const n=this.builtinModules.get(e);return this.builtinModules.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}getModule(e){const t=this.builtinModules.get(e);if(!t)return t;t.value||(t.value=t.module());const n=Object.assign({},t);return Reflect.deleteProperty(n,"module"),Is.cloneDeep(n)}getModules(){const e={};return this.builtinModules.forEach(t=>{t.active&&(t.value||(t.value=t.module()),e[t.id]=Is.cloneDeep(t.value))}),e}reset(){this.builtinModules.clear(),this.builtinConstants.clear(),this.initialize()}};ya=uze([zr(),cze("design:paramtypes",[])],ya);var dze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let QN=class extends jc{constructor(){super(),this.state=pt.resolve(the),this.builtinService=pt.resolve(ya)}setValidateInfo(e){this.setState({validationInfo:typeof e=="string"?{type:"info",text:e}:e})}setSearchValue(e){this.setState({value:e})}setReplaceValue(e){this.setState({replaceValue:e})}setResult(e){this.setState({result:e||[]})}toggleMode(e){this.setState({replaceMode:e})}toggleCaseSensitive(){const{isCaseSensitive:e}=this.state,{SEARCH_CASE_SENSITIVE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isCaseSensitive:!e}),this.updateStatus(t,!e))}toggleWholeWord(){const{isWholeWords:e}=this.state,{SEARCH_WHOLE_WORD_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isWholeWords:!e}),this.updateStatus(t,!e))}toggleRegex(){const{isRegex:e}=this.state,{SEARCH_REGULAR_EXPRESSION_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isRegex:!e}),this.updateStatus(t,!e))}togglePreserveCase(){const{preserveCase:e}=this.state,{SEARCH_PRESERVE_CASE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({preserveCase:!e}),this.updateStatus(t,!e))}updateStatus(e,t){const{replaceAddons:n=[],searchAddons:i=[]}=this.state,s=n.find(sr(e))||i.find(sr(e));s&&(s.checked=t,this.setState({replaceAddons:n.concat(),searchAddons:i.concat()}))}reset(){this.setState({headerToolBar:[],searchAddons:[],replaceAddons:[],result:[],value:"",replaceValue:"",replaceMode:!1,isRegex:!1,isCaseSensitive:!1,isWholeWords:!1,preserveCase:!1,validationInfo:{type:"info",text:""}})}onReplaceAll(e){this.subscribe(_m.onReplaceAll,e)}onChange(e){this.subscribe(_m.onChange,e)}onSearch(e){this.subscribe(_m.onSearch,e)}onResultClick(e){this.subscribe(_m.onResultClick,e)}};QN=dze([zr(),hze("design:paramtypes",[])],QN);var K7,ate;function lhe(){if(ate)return K7;ate=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=t(e[n],n,e);return s}return K7=r,K7}var G7,lte;function fze(){if(lte)return G7;lte=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return G7=e,G7}var Y7,ute;function gze(){if(ute)return Y7;ute=1;function r(e){return this.__data__.has(e)}return Y7=r,Y7}var Z7,cte;function pze(){if(cte)return Z7;cte=1;var r=Lj(),e=fze(),t=gze();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new r;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Z7=n,Z7}var X7,dte;function mze(){if(dte)return X7;dte=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return X7=r,X7}var Q7,hte;function _ze(){if(hte)return Q7;hte=1;function r(e,t){return e.has(t)}return Q7=r,Q7}var J7,fte;function uhe(){if(fte)return J7;fte=1;var r=pze(),e=mze(),t=_ze(),n=1,i=2;function s(o,a,l,u,d,h){var p=l&n,v=o.length,C=a.length;if(v!=C&&!(p&&C>v))return!1;var S=h.get(o),E=h.get(a);if(S&&E)return S==a&&E==o;var k=-1,D=!0,O=l&i?new r:void 0;for(h.set(o,a),h.set(a,o);++k<v;){var H=o[k],V=a[k];if(u)var X=p?u(V,H,k,a,o,h):u(H,V,k,o,a,h);if(X!==void 0){if(X)continue;D=!1;break}if(O){if(!e(a,function($,P){if(!t(O,P)&&(H===$||d(H,$,l,u,h)))return O.push(P)})){D=!1;break}}else if(!(H===V||d(H,V,l,u,h))){D=!1;break}}return h.delete(o),h.delete(a),D}return J7=s,J7}var e9,gte;function vze(){if(gte)return e9;gte=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,s){n[++t]=[s,i]}),n}return e9=r,e9}var t9,pte;function bze(){if(pte)return t9;pte=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return t9=r,t9}var n9,mte;function Cze(){if(mte)return n9;mte=1;var r=R2(),e=Mle(),t=wj(),n=uhe(),i=vze(),s=bze(),o=1,a=2,l="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Map]",p="[object Number]",v="[object RegExp]",C="[object Set]",S="[object String]",E="[object Symbol]",k="[object ArrayBuffer]",D="[object DataView]",O=r?r.prototype:void 0,H=O?O.valueOf:void 0;function V(X,$,P,z,M,W,I){switch(P){case D:if(X.byteLength!=$.byteLength||X.byteOffset!=$.byteOffset)return!1;X=X.buffer,$=$.buffer;case k:return!(X.byteLength!=$.byteLength||!W(new e(X),new e($)));case l:case u:case p:return t(+X,+$);case d:return X.name==$.name&&X.message==$.message;case v:case S:return X==$+"";case h:var R=i;case C:var G=z&o;if(R||(R=s),X.size!=$.size&&!G)return!1;var Z=I.get(X);if(Z)return Z==$;z|=a,I.set(X,$);var ee=n(R(X),R($),z,M,W,I);return I.delete(X),ee;case E:if(H)return H.call(X)==H.call($)}return!1}return n9=V,n9}var i9,_te;function yze(){if(_te)return i9;_te=1;var r=Ale(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(s,o,a,l,u,d){var h=a&e,p=r(s),v=p.length,C=r(o),S=C.length;if(v!=S&&!h)return!1;for(var E=v;E--;){var k=p[E];if(!(h?k in o:n.call(o,k)))return!1}var D=d.get(s),O=d.get(o);if(D&&O)return D==o&&O==s;var H=!0;d.set(s,o),d.set(o,s);for(var V=h;++E<v;){k=p[E];var X=s[k],$=o[k];if(l)var P=h?l($,X,k,o,s,d):l(X,$,k,s,o,d);if(!(P===void 0?X===$||u(X,$,a,l,d):P)){H=!1;break}V||(V=k=="constructor")}if(H&&!V){var z=s.constructor,M=o.constructor;z!=M&&"constructor"in s&&"constructor"in o&&!(typeof z=="function"&&z instanceof z&&typeof M=="function"&&M instanceof M)&&(H=!1)}return d.delete(s),d.delete(o),H}return i9=i,i9}var r9,vte;function wze(){if(vte)return r9;vte=1;var r=Ej(),e=uhe(),t=Cze(),n=yze(),i=cF(),s=qb(),o=Dj(),a=Sle(),l=1,u="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype,v=p.hasOwnProperty;function C(S,E,k,D,O,H){var V=s(S),X=s(E),$=V?d:i(S),P=X?d:i(E);$=$==u?h:$,P=P==u?h:P;var z=$==h,M=P==h,W=$==P;if(W&&o(S)){if(!o(E))return!1;V=!0,z=!1}if(W&&!z)return H||(H=new r),V||a(S)?e(S,E,k,D,O,H):t(S,E,$,k,D,O,H);if(!(k&l)){var I=z&&v.call(S,"__wrapped__"),R=M&&v.call(E,"__wrapped__");if(I||R){var G=I?S.value():S,Z=R?E.value():E;return H||(H=new r),O(G,Z,k,D,H)}}return W?(H||(H=new r),n(S,E,k,D,O,H)):!1}return r9=C,r9}var s9,bte;function che(){if(bte)return s9;bte=1;var r=wze(),e=lL();function t(n,i,s,o,a){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,s,o,t,a)}return s9=t,s9}var o9,Cte;function Sze(){if(Cte)return o9;Cte=1;var r=Ej(),e=che(),t=1,n=2;function i(s,o,a,l){var u=a.length,d=u,h=!l;if(s==null)return!d;for(s=Object(s);u--;){var p=a[u];if(h&&p[2]?p[1]!==s[p[0]]:!(p[0]in s))return!1}for(;++u<d;){p=a[u];var v=p[0],C=s[v],S=p[1];if(h&&p[2]){if(C===void 0&&!(v in s))return!1}else{var E=new r;if(l)var k=l(C,S,v,s,o,E);if(!(k===void 0?e(S,C,t|n,l,E):k))return!1}}return!0}return o9=i,o9}var a9,yte;function dhe(){if(yte)return a9;yte=1;var r=oL();function e(t){return t===t&&!r(t)}return a9=e,a9}var l9,wte;function Lze(){if(wte)return l9;wte=1;var r=dhe(),e=uF();function t(n){for(var i=e(n),s=i.length;s--;){var o=i[s],a=n[o];i[s]=[o,a,r(a)]}return i}return l9=t,l9}var u9,Ste;function hhe(){if(Ste)return u9;Ste=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return u9=r,u9}var c9,Lte;function Eze(){if(Lte)return c9;Lte=1;var r=Sze(),e=Lze(),t=hhe();function n(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(o){return o===i||r(o,i,s)}}return c9=n,c9}var d9,Ete;function wq(){if(Ete)return d9;Ete=1;var r=P2(),e=lL(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return d9=n,d9}var h9,xte;function Sq(){if(xte)return h9;xte=1;var r=qb(),e=wq(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(r(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||e(s)?!0:n.test(s)||!t.test(s)||o!=null&&s in Object(o)}return h9=i,h9}var f9,Dte;function xze(){if(Dte)return f9;Dte=1;var r=Lj(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],l=s.cache;if(l.has(a))return l.get(a);var u=n.apply(this,o);return s.cache=l.set(a,u)||l,u};return s.cache=new(t.Cache||r),s}return t.Cache=r,f9=t,f9}var g9,Ite;function Dze(){if(Ite)return g9;Ite=1;var r=xze(),e=500;function t(n){var i=r(n,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return g9=t,g9}var p9,Tte;function Ize(){if(Tte)return p9;Tte=1;var r=Dze(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,a,l,u){s.push(l?u.replace(t,"$1"):a||o)}),s});return p9=n,p9}var m9,kte;function Tze(){if(kte)return m9;kte=1;var r=R2(),e=lhe(),t=qb(),n=wq(),i=1/0,s=r?r.prototype:void 0,o=s?s.toString:void 0;function a(l){if(typeof l=="string")return l;if(t(l))return e(l,a)+"";if(n(l))return o?o.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return m9=a,m9}var _9,Nte;function kze(){if(Nte)return _9;Nte=1;var r=Tze();function e(t){return t==null?"":r(t)}return _9=e,_9}var v9,Ate;function JF(){if(Ate)return v9;Ate=1;var r=qb(),e=Sq(),t=Ize(),n=kze();function i(s,o){return r(s)?s:e(s,o)?[s]:t(n(s))}return v9=i,v9}var b9,Ote;function Y2(){if(Ote)return b9;Ote=1;var r=wq(),e=1/0;function t(n){if(typeof n=="string"||r(n))return n;var i=n+"";return i=="0"&&1/n==-e?"-0":i}return b9=t,b9}var C9,Mte;function Lq(){if(Mte)return C9;Mte=1;var r=JF(),e=Y2();function t(n,i){i=r(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[e(i[s++])];return s&&s==o?n:void 0}return C9=t,C9}var y9,Rte;function Nze(){if(Rte)return y9;Rte=1;var r=Lq();function e(t,n,i){var s=t==null?void 0:r(t,n);return s===void 0?i:s}return y9=e,y9}var w9,Pte;function Aze(){if(Pte)return w9;Pte=1;function r(e,t){return e!=null&&t in Object(e)}return w9=r,w9}var S9,Fte;function Oze(){if(Fte)return S9;Fte=1;var r=JF(),e=wle(),t=qb(),n=Ij(),i=Tj(),s=Y2();function o(a,l,u){l=r(l,a);for(var d=-1,h=l.length,p=!1;++d<h;){var v=s(l[d]);if(!(p=a!=null&&u(a,v)))break;a=a[v]}return p||++d!=h?p:(h=a==null?0:a.length,!!h&&i(h)&&n(v,h)&&(t(a)||e(a)))}return S9=o,S9}var L9,Bte;function Mze(){if(Bte)return L9;Bte=1;var r=Aze(),e=Oze();function t(n,i){return n!=null&&e(n,i,r)}return L9=t,L9}var E9,Wte;function Rze(){if(Wte)return E9;Wte=1;var r=che(),e=Nze(),t=Mze(),n=Sq(),i=dhe(),s=hhe(),o=Y2(),a=1,l=2;function u(d,h){return n(d)&&i(h)?s(o(d),h):function(p){var v=e(p,d);return v===void 0&&v===h?t(p,d):r(h,v,a|l)}}return E9=u,E9}var x9,Vte;function Pze(){if(Vte)return x9;Vte=1;function r(e){return e}return x9=r,x9}var D9,Hte;function Fze(){if(Hte)return D9;Hte=1;function r(e){return function(t){return t==null?void 0:t[e]}}return D9=r,D9}var I9,zte;function Bze(){if(zte)return I9;zte=1;var r=Lq();function e(t){return function(n){return r(n,t)}}return I9=e,I9}var T9,Ute;function Wze(){if(Ute)return T9;Ute=1;var r=Fze(),e=Bze(),t=Sq(),n=Y2();function i(s){return t(s)?r(n(s)):e(s)}return T9=i,T9}var k9,$te;function Vze(){if($te)return k9;$te=1;var r=Eze(),e=Rze(),t=Pze(),n=qb(),i=Wze();function s(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?n(o)?e(o[0],o[1]):r(o):i(o)}return k9=s,k9}var N9,jte;function Hze(){if(jte)return N9;jte=1;var r=xj(),e=JF(),t=Ij(),n=oL(),i=Y2();function s(o,a,l,u){if(!n(o))return o;a=e(a,o);for(var d=-1,h=a.length,p=h-1,v=o;v!=null&&++d<h;){var C=i(a[d]),S=l;if(C==="__proto__"||C==="constructor"||C==="prototype")return o;if(d!=p){var E=v[C];S=u?u(E,C,v):void 0,S===void 0&&(S=n(E)?E:t(a[d+1])?[]:{})}r(v,C,S),v=v[C]}return o}return N9=s,N9}var A9,qte;function zze(){if(qte)return A9;qte=1;var r=Lq(),e=Hze(),t=JF();function n(i,s,o){for(var a=-1,l=s.length,u={};++a<l;){var d=s[a],h=r(i,d);o(h,d)&&e(u,t(d,i),h)}return u}return A9=n,A9}var O9,Kte;function Uze(){if(Kte)return O9;Kte=1;var r=lhe(),e=Vze(),t=zze(),n=Ole();function i(s,o){if(s==null)return{};var a=r(n(s),function(l){return[l]});return o=e(o),t(s,a,function(l,u){return o(l,u[0])})}return O9=i,O9}var $ze=Uze();const jze=Rm($ze);var qze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Kze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let HS=class extends jc{constructor(){super(),this.state=pt.resolve(nhe),this.layoutService=pt.resolve(Nh),this.builtinService=pt.resolve(ya)}updateOutputProperty(e){const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=jze(e,i=>i!==void 0);return this.update(Object.assign(this.getPanel(t),n))}get outputEditorInstance(){var e;const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=(e=this.state.data)===null||e===void 0?void 0:e.find(sr(t));return n==null?void 0:n.outputEditorInstance}setActive(e){const t=this.getPanel(e);t?this.open(t):Ti.error(`There is no panel found in data via ${e}. If you want to open a brand-new panel, please use the open method`)}toggleMaximize(){const{PANEL_TOOLBOX_RESIZE:e}=this.builtinService.getConstants(),{builtInPanelToolboxResize:t,builtInPanelToolboxReStore:n}=this.builtinService.getModules(),{toolbox:i=[]}=this.state;if(t&&n){const s=i==null?void 0:i.findIndex(sr(e));if(i[s]){const a=this.layoutService.togglePanelMaximized();i[s]=a?n:t}}}open(e){const{data:t=[]}=this.state;let n=Is.cloneDeep(e);const i=t.findIndex(sr(n.id));i>-1?n=t[i]:this.add(n),this.setState({current:n})}getPanel(e){const{data:t=[]}=this.state;return Is.cloneDeepWith(t.find(sr(e)),n=>{if(n&&typeof n=="object"&&n instanceof dN)return n})}getOutputValue(){const{PANEL_OUTPUT:e=""}=this.builtinService.getConstants(),t=this.getPanel(e);return(t==null?void 0:t.data)||""}updateOutput(e){const{title:t,name:n,sortIndex:i,active:s,closable:o,editable:a}=e;return this.updateOutputProperty({title:t,name:n,sortIndex:i,active:s,closable:o,editable:a})}appendOutput(e){var t;const n=this.getOutputValue();this.updateOutputProperty({data:n+e}),(t=this.outputEditorInstance)===null||t===void 0||t.setValue(n+e)}cleanOutput(){var e;(e=this.outputEditorInstance)===null||e===void 0||e.setValue("")}add(e){let t=this.state.data||[];const n=Is.cloneDeep(e);Array.isArray(n)?t=t.concat(n):t.push(n),this.setState({data:t})}update(e){const t=this.state.data||[],n=t==null?void 0:t.findIndex(sr(e.id));if(n!==void 0&&n>-1)return Object.assign(t[n],e),this.setState({data:[...t]}),t[n];Ti.error(`There is no panel found in data via the ${e.id}`)}remove(e){const{data:t}=this.state,n=t==null?void 0:t.findIndex(sr(e));if(n!==void 0&&n>-1){const i=(t==null?void 0:t.splice(n,1))||[];return this.setState({data:t}),i[0]}else{Ti.error(`There is no panel found in data via the ${e}`);return}}reset(){this.setState({data:[],current:null,toolbox:[]}),this.cleanOutput()}onTabChange(e){this.subscribe(Ob.onTabChange,e)}onToolbarClick(e){this.subscribe(Ob.onToolbarClick,e)}onTabClose(e){this.subscribe(Ob.onTabClose,e)}};HS=qze([zr(),Kze("design:paramtypes",[])],HS);var Gze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let zS=class extends Yx{constructor(){super(),this.editorService=pt.resolve(jd),this.localeService=pt.resolve(Am),this.colorThemeService=pt.resolve(BS),this.builtinService=pt.resolve(ya),this.settings=this.getBuiltInSettings()}getBuiltInSettings(){const e=this.editorService.getState().editorOptions,t=this.colorThemeService.getColorTheme(),n=this.localeService.getCurrentLocale();return new ihe(t.id,e,n==null?void 0:n.id)}getDefaultSettingsTab(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();return Object.assign({},e)}onChangeSettings(e){this.subscribe(ZN.OnChange,e)}update(e){this.applySettings(e);const t=Is.cloneDeep(this.settings);this.settings=Az(t,e)}append(e){this.update(e)}getSettings(){const e=this.getBuiltInSettings();return Object.assign({},this.settings,e)}applySettings(e){const t=this.settings,{colorTheme:n,locale:i,editor:s}=e;n&&n!==t.colorTheme&&this.colorThemeService.setTheme(n),i&&i!==t.locale&&this.localeService.setCurrentLocale(i),s&&!Is.isEqual(s,t.editor)&&this.editorService.updateEditorOptions(s)}openSettingsInEditor(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();e&&(e.data.value=this.flatObject2JSONString(this.getSettings()),this.editorService.open(e))}normalizeFlatObject(e){try{const t=JSON.parse(e);return Zfe(t)}catch(t){throw new Error(`SettingsService.normalizeFlatJSONObject error: ${t}`)}}flatObject(e){return Yfe(e)}flatObject2JSONString(e){return this.toJSONString(this.flatObject(e))}toJSONString(e,t=4){try{return JSON.stringify(e,null,t)}catch(n){throw new Error(`SettingsService.toJSONString error: ${n}`)}}};zS=Gze([zr(),Yze("design:paramtypes",[])],zS);var Zze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let jx=class extends jc{constructor(){super(),this.state=pt.resolve(rhe)}toggleNotification(){const e=Is.cloneDeep(this.state);e.showNotifications=!this.state.showNotifications,this.setState(e)}update(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(sr(e.id));if(n>-1){const i=t[n];return t[n]=Object.assign(i,e),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]})),t[n]}else Ti.error("There is no notification be found, please check the id")}return null}remove(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(sr(e));n>-1?(t.splice(n,1),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]}))):Ti.error("There is no notification be found, please check the id")}else Ti.error("You can't remove notification because there is no notifications in data.")}add(e){const{data:t=[]}=this.state;if(e&&e.length){e.forEach(i=>{i.id===void 0&&(i.id=mne()),i.status=CP.WaitRead});const n=[...t,...e];return this.setState({data:n}),e}return null}clear(){this.setState({data:[]})}reset(){this.setState({id:"",name:"",data:[],sortIndex:1,showNotifications:!1,actionBar:[],render:void 0})}};jx=Zze([zr(),Xze("design:paramtypes",[])],jx);var Qze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Jze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let JN=class extends jc{constructor(){super(),this.getProblemsMarkers=e=>{let t=0,n=0,i=0;const s=o=>{o.forEach(a=>{switch(a.value.status){case Im.Info:i+=1;break;case Im.Error:n+=1;break;case Im.Warning:t+=1;break}a.children&&a.children.length&&s(a.children)})};return s(e),{warnings:t,errors:n,infos:i}},this.state=pt.resolve(she),this.statusBarService=pt.resolve(Wv),this.builtinService=pt.resolve(ya)}toggleProblems(){this.setState(Object.assign(Object.assign({},this.state),{show:!this.state.show}))}add(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(i=>{const s=n.findIndex(sr(i.id));s>-1?n.splice(s,1,i):n.push(i)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}update(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(i=>{const s=n.findIndex(sr(i.id));s>-1?n.splice(s,1,i):Ti.error(`Update problems failed, because there is no problem found via ${i.id}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}remove(e){const t=Array.isArray(e)?e:[e],{data:n=[]}=this.state;t.forEach(i=>{const s=n.findIndex(sr(i));s>-1?n.splice(s,1):Ti.error(`Remove problems failed, because there is no problem found via ${i}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}reset(){const{builtInStatusProblems:e}=this.builtinService.getModules();this.setState(Object.assign(Object.assign({},this.state),{data:[]})),e&&this.updateStatus(e)}onSelect(e){this.subscribe(XN.onSelect,e)}updateStatusBar(){const{data:e=[]}=this.state,t=this.getProblemsMarkers(e),{builtInStatusProblems:n}=this.builtinService.getModules();n&&this.updateStatus(Object.assign(n,{data:t}))}updateStatus(e){this.statusBarService.update(e)}};JN=Qze([zr(),Jze("design:paramtypes",[])],JN);const eUe={LoadExtensionFail:"Load Extension failed",NotFoundActivateMethod:"Not found activate function, the extension must export an activate function as entry."};var tUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let e2=class{constructor(){this.extensions=[],this._isLoaded=!1,this.colorThemeService=pt.resolve(BS),this.monacoService=pt.resolve(Pv),this.localeService=pt.resolve(Am)}setLoaded(e){this._isLoaded=e!==void 0?e:!0}isLoaded(){return this._isLoaded}getExtension(e){return this.extensions.find(sr(e))}reset(){this.extensions=[]}getAllExtensions(){return this.extensions.concat()}add(e){if(!e||(e==null?void 0:e.length)===0)return null;const t=e.filter(n=>{const i=this.extensions.find(sr(n.id));return i&&Ti.warn("Warning: Unable to load the existed Extension:"+n.id),!i});return t.length>0&&(this.extensions=this.extensions.concat(t)),t}load(e){try{const t=this.add(e);if(!t)return;this.activate(t)}catch(t){Ti.error(eUe.LoadExtensionFail,t)}}loadContributes(e){Object.keys(e).forEach(n=>{switch(n){case xx.Themes:{const i=e[n];return i?this.colorThemeService.addThemes(i):void 0}case xx.Languages:{const i=e[n];return i?this.localeService.addLocales(i):void 0}}})}registerAction(e){return QRe(e)}executeCommand(e,...t){this.monacoService.commandService.executeCommand(e,...t)}activate(e){if(e.length===0)return;const t=this;e==null||e.forEach((n,i)=>{!n||this.isInactive(n)||(n.activate&&n.activate(t),n.contributes&&this.loadContributes(n.contributes))})}dispose(e){var t;const n=this,i=this.extensions.findIndex(sr(e));if(i>-1){const s=this.extensions[i];(t=s.dispose)===null||t===void 0||t.call(s,n),this.extensions.splice(i,1)}}disposeAll(){this.extensions.forEach(e=>{var t;(t=e.dispose)===null||t===void 0||t.call(e,this)}),this.reset()}inactive(e){this._inactive=e}isInactive(e){return this._inactive&&typeof this._inactive=="function"?this._inactive(e):!1}splitLanguagesExts(e){const t=[],n=[];return e.forEach(i=>{var s;!((s=i.contributes)===null||s===void 0)&&s.languages?t.push(i):n.push(i)}),[t,n]}};e2=tUe([zr(),nUe("design:paramtypes",[])],e2);var iUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let LP=class extends Wu{constructor(){super(),this.editorStates=new Map,this.onClickContextMenu=(e,t,n)=>{const i=t==null?void 0:t.id,s=n==null?void 0:n.id,{current:o}=this.editorService.getState(),a=o==null?void 0:o.id,{EDITOR_MENU_CLOSE:l,EDITOR_MENU_CLOSE_OTHERS:u,EDITOR_MENU_CLOSE_ALL:d,EDITOR_MENU_CLOSE_TO_RIGHT:h,EDITOR_MENU_CLOSE_TO_LEFT:p}=this.builtinService.getConstants();switch(i){case l:{this.onCloseTab(s,a);break}case u:{this.onCloseOther(n,a);break}case d:{this.onCloseAll(a);break}case h:{this.onCloseToRight(n,a);break}case p:{this.onCloseToLeft(n,a);break}default:this.emit(ho.onActionsClick,i,o)}},this.onCloseAll=e=>{this.emit(ho.OnCloseAll,e)},this.onCloseTab=(e,t)=>{e&&t&&this.emit(ho.OnCloseTab,e,t)},this.onCloseToRight=(e,t)=>{this.emit(ho.OnCloseToRight,e,t)},this.onCloseToLeft=(e,t)=>{this.emit(ho.OnCloseToLeft,e,t)},this.onCloseOther=(e,t)=>{this.emit(ho.OnCloseOther,e,t)},this.onMoveTab=(e,t)=>{this.editorService.updateGroup(t,{data:e}),this.emit(ho.OnMoveTab,e,t)},this.onSelectTab=(e,t)=>{this.editorService.setActive(t,e),this.emit(ho.OnSelectTab,e,t)},this.onUpdateEditorIns=(e,t)=>{var n,i;if(!e)return;this.initEditorEvents(e,t),this.editorService.updateGroup(t,{editorInstance:e}),this.editorService.updateCurrentGroup({editorInstance:e});const{current:s}=this.editorService.getState(),o=s==null?void 0:s.tab;this.openTab(e,o.id.toString(),(n=o==null?void 0:o.data)===null||n===void 0?void 0:n.value,(i=o==null?void 0:o.data)===null||i===void 0?void 0:i.language),this.onEditorInstanceMount(e)},this.onClickActions=e=>{const{current:t}=this.editorService.getState();if(!t)return;const{EDITOR_MENU_CLOSE_ALL:n,EDITOR_MENU_SHOW_OPENEDITORS:i,EDITOR_MENU_SPILIT:s}=this.builtinService.getConstants();switch(e.id){case n:{this.onCloseAll(t.id);break}case i:break;case s:{this.editorService.cloneGroup();const{groupSplitPos:o}=this.layoutService.getState();this.layoutService.setGroupSplitSize(new Array(o.length+1).fill("auto")),this.emit(ho.OnSplitEditorRight);break}default:this.emit(ho.onActionsClick,e.id,t)}},this.onPaneSizeChange=e=>{this.layoutService.setGroupSplitSize(e)},this.getViewState=e=>this.editorStates.get(e),this.onChangeEditorProps=(e,t)=>{const{path:n,options:i}=t;if((e==null?void 0:e.path)!==n){const{current:s}=this.editorService.getState(),o=s==null?void 0:s.editorInstance;this.editorStates.set(e.path,o==null?void 0:o.saveViewState()),this.openTab(o,n,i==null?void 0:i.value,i==null?void 0:i.language)}},this.editorService=pt.resolve(jd),this.layoutService=pt.resolve(Nh),this.statusBarService=pt.resolve(Wv),this.builtinService=pt.resolve(ya)}initView(){const{builtInEditorInitialActions:e,builtInEditorInitialMenu:t,BuiltInEditorOptions:n}=this.builtinService.getModules();if(!this.editorService.getDefaultActions().length){const o=e||[];this.editorService.setDefaultActions(o)}if(!this.editorService.getDefaultMenus().length){const o=t||[];this.editorService.setDefaultMenus(o)}this.editorService.setState({editorOptions:n||{}})}open(e,t){this.editorService.open(e,t)}initEditorEvents(e,t){e&&(e.onDidChangeModelContent(n=>{var i,s,o,a;const{current:l}=this.editorService.getState(),u=l==null?void 0:l.tab;if(!u)return;const d=(s=(i=l.editorInstance)===null||i===void 0?void 0:i.getModel())===null||s===void 0?void 0:s.uri,h=(o=e==null?void 0:e.getModel())===null||o===void 0?void 0:o.uri;if((d==null?void 0:d.path)!==(h==null?void 0:h.path))return;const p=(a=e.getModel())===null||a===void 0?void 0:a.getValue(),v=Object.assign(Object.assign({},u),{data:Object.assign(Object.assign({},u.data),{value:p})});this.editorService.updateTab(v,t),this.updateStatusBar(e),this.emit(ho.OnUpdateTab,v)}),e.onDidFocusEditorText(()=>{const n=this.editorService.getGroupById(t);n!=null&&n.tab.id&&(this.editorService.setActive(t,n.tab.id),this.updateEditorLineColumnInfo(e))}),e.onDidChangeCursorSelection(()=>{this.updateEditorLineColumnInfo(e)}),e.onDidBlurEditorText(()=>{var n;const{current:i}=this.editorService.getState(),s=i==null?void 0:i.tab;if(s!=null&&s.id){const o=e==null?void 0:e.saveViewState();this.editorStates.set((n=s.id)===null||n===void 0?void 0:n.toString(),o)}}))}openTab(e,t,n,i){let s=ac.getModel(vC.parse(t));s||(s=ac.createModel(n,i,vC.parse(t))),e.setModel(s);const o=this.editorStates.get(t);o&&e.restoreViewState(o),e==null||e.focus()}updateStatusBar(e){}updateEditorLineColumnInfo(e){if(e){const t=e.getPosition(),{STATUS_EDITOR_INFO:n}=this.builtinService.getModules();n&&this.statusBarService.update(Object.assign(n,{data:{ln:t==null?void 0:t.lineNumber,col:t==null?void 0:t.column}}))}}onEditorInstanceMount(e){this.emit(ho.onEditorInstanceMount,e)}};LP=iUe([zr(),rUe("design:paramtypes",[])],LP);const ty=Ni("editor"),sUe=Ht(ty,"group"),oUe=Ht(ty,"group-container"),aUe=Ht(ty,"group-header"),lUe=Ht(ty,"group-tabs"),uUe=Ht(ty,"group-actions"),_z=Ht(ty,"group-actions-item"),cUe=si(_z,"disabled"),dUe=Ht(ty,"group-breadcrumb"),Gte=6;function hUe(r){const e=[],t=[];return r.forEach(n=>{n.place==="outer"?e.push(n):t.push(n)}),e.length>Gte&&e.splice(0,Gte-e.length),[e,t]}function fUe(r){const{actions:e=[],isActiveGroup:t,onClickActions:n}=r,[i,s]=hUe(e),o=we.useRef(null),a=(d,h)=>{var p;n(h),(p=o.current)===null||p===void 0||p.dispose()},l=d=>{n(d)},u=s.length>0?pe.createElement(Vc,{style:{width:200},data:s,onClick:a}):pe.createElement("span",{style:{padding:15,fontSize:14}},"No more actions");return pe.createElement("div",{className:uUe},t&&i.map(d=>pe.createElement(Uz,{key:d.id,overlay:d.title},pe.createElement("div",{onClick:()=>!d.disabled&&l(d),className:ni(_z,d.disabled&&cUe)},d.icon?typeof d.icon=="string"?pe.createElement(cs,{type:d.icon}):d.icon:d.name))),!!s.length&&pe.createElement(Xz,{ref:o,placement:"bottom",className:_z,trigger:"click",title:"More Actions...",overlay:u},pe.createElement(cs,{type:"ellipsis"})))}const gUe=we.memo(fUe);function pUe(r){const{breadcrumbs:e=[]}=r;return pe.createElement("div",{className:dUe},pe.createElement(lie,{role:"breadcrumb",routes:e}))}const mUe=we.memo(pUe);function fhe(r){var e,t;const{id:n,data:i,tab:s,currentGroup:o,group:a,actions:l=[],menu:u=[],onMoveTab:d,onCloseTab:h,onClickContextMenu:p,onChangeEditorProps:v,onSelectTab:C,onClickActions:S,editorOptions:E,onUpdateEditorIns:k}=r,D=n===(o==null?void 0:o.id),O=Zx(),H=(V,X)=>{const $=(P,z)=>{p==null||p(P,z,X),O.hide()};O==null||O.show(bM(V),()=>pe.createElement(Vc,{data:u,onClick:$}))};return we.useEffect(()=>function(){O==null||O.dispose()}),pe.createElement("div",{className:sUe},pe.createElement("div",{className:aUe},pe.createElement("div",{className:lUe},pe.createElement(Cj,{editable:!0,type:"card",data:i,onMoveTab:d,onSelectTab:C,onContextMenu:H,activeTab:D?s==null?void 0:s.id:"",onCloseTab:h})),pe.createElement(gUe,{isActiveGroup:D,actions:l,menu:u,onClickActions:S})),pe.createElement(mUe,{breadcrumbs:(s==null?void 0:s.breadcrumb)||[]}),pe.createElement("div",{className:oUe},s!=null&&s.renderPane?typeof s.renderPane=="function"?s.renderPane(Object.assign({},s.data),s,a):s.renderPane:pe.createElement(hj,{options:Object.assign(Object.assign({},E),{value:(e=s==null?void 0:s.data)===null||e===void 0?void 0:e.value,language:(t=s==null?void 0:s.data)===null||t===void 0?void 0:t.language,automaticLayout:!0}),path:s==null?void 0:s.id.toString(),editorInstanceRef:V=>{k==null||k(V,n)},onChangeEditorProps:(V,X)=>{v==null||v(V,X)}})))}const Yte=we.memo(fhe);function _Ue({className:r}){return pe.createElement("span",{style:{fontSize:0}},pe.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 120 120",className:r},pe.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",opacity:"0.48"},pe.createElement("g",{fill:"#A2A2A2",transform:"translate(-660 -152)"},pe.createElement("g",{transform:"translate(660 152)"},pe.createElement("path",{d:"M59.3 96.335c4.87 0 8.817 3.954 8.817 8.832S64.169 114 59.3 114c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm-22.444-6.826a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 72.245c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 85.956 8 81.078s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zm-65.327-6.022a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 48.156c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 61.867 8 56.989s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zM80.942 35.31c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.832 8.817-8.832zm-43.284 0c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm64.525-11.242c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.948 8.832-8.817 8.832-4.87 0-8.817-3.954-8.817-8.832 0-4.879 3.947-8.833 8.817-8.833zm-85.366 0c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.947 8.832-8.817 8.832S8 37.778 8 32.9c0-4.879 3.948-8.833 8.817-8.833zm42.483 5.62a3.21 3.21 0 013.206 3.213 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212 3.21 3.21 0 013.207-3.212zm-19.238-13.65a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm38.475 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 6a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212A3.21 3.21 0 0159.3 6z"}))))))}const hm={_isMac:une.Utils.isMacOs(),queryGlobalKeybinding:r=>{const n=Al.getDefaultKeybindings().filter(i=>!i.when).filter(i=>i.command===r);return n.length?n[n.length-1].keybinding:null},convertSimpleKeybindingToString:(r=[])=>r.map(e=>{const t=[];return e.altKey&&t.push(hm._isMac?"":"Alt"),e.ctrlKey&&t.push(hm._isMac?"":"Ctrl"),e.metaKey&&t.push(hm._isMac?"":"Meta"),e.shiftKey&&t.push(hm._isMac?"":"Shift"),e.keyCode&&t.push(ohe[e.keyCode]||""),t.join(hm._isMac?"":"+")}).join(" ")},vUe=()=>[{id:mt.ACTION_QUICK_COMMAND,name:Vt("menu.commandPalette","Command Palette")},{id:mt.ACTION_QUICK_ACCESS_SETTINGS,name:Vt("menu.settings","Settings")},{id:mt.ACTION_SELECT_THEME,name:Vt("menu.colorTheme","Color Theme")}],bUe=()=>{const[r,e]=we.useState([]);return we.useEffect(()=>{const t=vUe().map(n=>{const i=hm.queryGlobalKeybinding(n.id);if(i!=null&&i.length){const s=hm.convertSimpleKeybindingToString(i);return Object.assign(Object.assign({},n),{keybindings:s})}return null}).filter(Boolean);e(t)},[]),r};function CUe(){const r=bUe();return pe.createElement("div",{className:Ni("welcome")},pe.createElement(_Ue,{className:"logo"}),pe.createElement("h1",{className:"title"},"Molecule"),pe.createElement("div",{className:"keybindings"},pe.createElement("ul",null,r.map(e=>pe.createElement("li",{className:"keys",key:e.id},pe.createElement("span",null,e.name),pe.createElement("span",null,e.keybindings.split("").join(" ")))))))}function Eq(r){const{onClickContextMenu:e,onCloseTab:t,onMoveTab:n,onSelectTab:i,onChangeEditorProps:s,onClickActions:o,onUpdateEditorIns:a,onPaneSizeChange:l,editor:u,layout:d}=r,{groups:h=[],current:p,entry:v=pe.createElement(CUe,null),editorOptions:C}=u||{},{groupSplitPos:S,editorGroupDirection:E}=d||{},k=O=>({onMoveTab:H=>n==null?void 0:n(H,O),onCloseTab:H=>t==null?void 0:t(H,O),onSelectTab:H=>i==null?void 0:i(H,O),onClickActions:o,onUpdateEditorIns:a,onChangeEditorProps:s,onClickContextMenu:e}),D=()=>h.length===1?pe.createElement(Yte,Object.assign({editorOptions:C,currentGroup:p,group:h[0]},h[0],k(h[0].id))):h.length>1?pe.createElement(Dk,{sizes:S,split:E,onChange:l},h.map((O,H)=>pe.createElement(Sb,{key:`group-${H}${O.id}`,minSize:"220px"},pe.createElement(Yte,Object.assign({editorOptions:C,currentGroup:p,group:O},O,k(O.id)))))):null;return pe.createElement("div",{className:ty},p?D():v)}we.memo(Eq);function ghe(r){const{data:e={ln:0,col:0}}=r;return pe.createElement("span",null,`Ln ${e.ln}, Col ${e.col}`)}we.memo(ghe);const yUe=pt.resolve(jd),wUe=pt.resolve(Nh),SUe=pt.resolve(LP),LUe=qc({editor:yUe,layout:wUe},Eq,SUe),LD=Ni("sidebar"),EUe=Ht(LD,"pane"),xUe=Ht(LD,"header"),DUe=Ht(LD,"title"),IUe=Ht(LD,"content"),TUe=Ht(LD,"toolbar"),phe=we.memo(function(e){return pe.createElement("header",{className:xUe},pe.createElement("div",{className:DUe},pe.createElement("h2",null,e.title)),pe.createElement("div",{className:TUe},e.toolbar||null))});function mhe(r){return pe.createElement("div",{className:IUe},r.children)}function _he(r){const{panes:e=[],current:t}=r,n=e==null?void 0:e.map(i=>pe.createElement("div",{key:i.id,"data-id":i.id,style:{visibility:i.id===t?"visible":"hidden",zIndex:i.id===t?1:-1},className:EUe},i.render?i.render():null));return pe.createElement("div",{className:LD},n)}var kUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},NUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let EP=class extends Wu{constructor(){super(),this.onClick=e=>{console.log("onClick:",this.sidebarService)},this.sidebarService=pt.resolve(Fv)}initView(){}};EP=kUe([zr(),NUe("design:paramtypes",[])],EP);const AUe=pt.resolve(Fv),OUe=pt.resolve(EP),MUe=qc(AUe,_he,OUe);function RUe({className:r}){return pe.createElement("img",{className:r,src:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAA
B3RJTUUH5QwPAyYJr4pYHwAAF6hJREFUeNrtnXm0VMW1xn/79L19GhUTnBAxGNfTuKKJeSsOaBxw
QF5QURzRTODwUIw4RI1RHJ5RUROcgkHFRDEaNUEBjaISUZzBDPqSOORFo0EJkmeMaIQe7qn9/uju
03WGvn243O7Tr8Neq1f3Pd236qv9naratfeuOqKqrJPOFSdtAOukubKO4A6XdQR3uKwjuMNlHcEd
Ll1pA2iFyLOl8XjmXJAtgGfpzp6uu/N62rha0vZOXybJs8VxeHqPf6Hc3LfJuZ/T4XyYNr5mS+cP
0UZPBcrEGsAoKJ9idfGQtKG1QjqfYJWNCQxSUiYa3SRtaK2QzicYfRyjZVIVUAXEoM4TaSNrhXQ+
wca9AHGWoFqZfx0P0e/ovt3/nTa0VkjHG1kAAhke7xkBOpQus1j3dv+UNqaWtf1fgeB/Zen8Ifpf
XNYR3OHSlp4sgS6eL56H4WugWXDmMbD7At2Rj1PH9mDpi3jmKpQdUX0NuqboYV3PpI2rLt52nIPl
+dI1GHOmv35VQGSu7pk9PFVcv8hvjef8DjUb1NbWThFlFz0i+7s0sdWTthui5Td0Y/SUALkKeHqY
PMuwVMEZTkB1A1QAARUwJgs6KWW11ZW2Ixj4BEbdgGvRl9JmqSIzMri8nrZeZaIHp4qrF2k7gnUn
3kPkldoQKFUP1N8pdf8hXXSyqNx7odaLAaOL0sVVX9qOYABUjgP+VvM+yT9BJug+5FPFdVj2LkTu
8l2e5cDFfDZzZ6StsnrSlkYWgLzAxqwqHoAjLt3dj+nuLEsbk49tTs8eeLojGXlND+9qa5922xK8
TvpH+rQOliU9+6LekagMR3UIkAf+gsgCNHu3fom/pN2w/28id7EV+eKxqI5C2ArVHCrLUZageq9O
zPVppFijHiyLi59F9SaUvev/SIqITGeT7im6DYW0FdfuIg/j8m7hcpTJGM0CBA3Mih0iPIXjnKwn
Zl9do/KTEiyLe0ai5j5UN0xY9PMMzB6kn+cfaSuxXUXuYhD5/EMouwfIrL6q4vsE5EPgCJ3kPpa4
jiQEy5Li9ngsBh24Ri1QHmMP98sKXtrKbDeR2WT4qPAIysjaaoFeyKXq0fsIR3bTk7KvJKkn2TLJ
cOsakVu7C0fyTOnkdFXZpvJR4WSMjqwstcpSXhLWPvtZKNbL6EA8c2vSahr2YHmucBDwYGLgRoMg
lRXs7W6p0JOmPmV+4TMUdQvIvaRj+SBVLIvo4vX8MpSaZ85U3uPm3+p1tXUrB+tk96FGdTXuwSJH
J0YevgPLMpine0akoUgAeZ4Bcn9xLgX+iMoTmMI7Mqf09bTwAPBGfkSZ3EoCYJjcck+NmY+l1rPR
RLwkGKL1S71/Ta3SKtDw0ILpvYxmyor8hRgda3me1kf1RzK38JnUMOHsUeuRFQkPxeFrhuDcbCSR
ThMQLFvU/SrOMAiAqN6FWr+MZovKwTV81WHPZOlxRqWGyeiQgK7qkRqePW2ihUQ6TWJklaJKC7/U
AqDWMFIZrr2YMlomsroW9am8G0C9VelhohQY5ewhOtxRAsaWredkOm1MsPJOnesWKInOE0HL8B3S
EpXbI3Oa8He6c8kNx/4Wr6KPOHLjXtXvsfXM20mqauyqdGQhRncIgqj2CFuR9nW7pyg4zsJG1chC
BtOTH4ORL6C6GY58iJE3cJivX16LbInDu29kjm6Ep+cAGwK/x8n8px7G3/papMxmAKsKB6DsCToU
HA8174A8zo7uk7pTg96lstDXWUB/1ueITkPXRB5PhLXxMqm0C5gX/DstAiB0LXJdXtX9s9vXLX8h
g+kpXIrK8ahmov+vIM5zOHKWju5e3GdSQHiYgTq67xvOZBFdLC2chtEpKBvFLmWQZaAX6om523ot
68bCK6h+ti6xcXqwVyiZzK56evevGmJO5Ml6tngvqkckAhC+0zJyqO7rPhBb7oLSTnje/SBDI72/
FgsuF6aOh+iZOsad3leC1kZkNhvxcWE2sJ+fZVLvpi7//TMG5Y7To1gdW96NhUPw9P7a7+voL3Ct
SrLcp99yj0yCO5knK5c9GeXNQKMijQsBKbvVZtQl91G2wegvQYYGFSR2QyrlCajJYPiBzMuf0E+c
JRaZTZaP8w+gGiLXsjeiRtE43i/8RPxGBEUnuQ+AzKj9v1WW0WD5VK8JqLyJuom9g4kI1p14jy53
FCqv1RqgITA2OAFhJhn39FiFgaCFn6E6qLw+tRrjN8SqI3AnOzPkwcK2LeQXVuX/C2UP/6azbZHA
jUlYF0dyc+GkuuV+zj0dZWZ0RBT7RqnpR+Q1HEbpWbyXFHrilB3dnddZP7sbcC0ixVqPDTVM5C0c
+Yru756k+9RxTz5SHIfhi8G1abhCaoT7v9FyFmNJLmsSlRGROxmCyhk+FvuGDrhkbc+Tdd3T/5LZ
DIjV6T706Gm5kxDnK6i8FV37avXmLoJcywbubnqmu0YnE/Qpo0OeZlN6SmPADEcZArIaw1JEF/BJ
d1EjK1IeLszH6Oi6c27AoLB6b+1zkW53Ez2Ej5rAaRDrbYXTUL2+fEOH5t7asqsXKxhwnMN0UnZe
r/XMpJvVhX1QRqE6DGQAhuWILqE79wudzP/2CX+rU3YEHOYXV6GV1NiwdegrpqpMS7FIrUc7HKyH
N3a2rzXeHxceQHWMf6FuMCB0AwTUKj/Ub7qntlTRFWn91pX5bIYxbnzvtRQX6bWVH0iFZM18qiV4
lU/5dQbwVWwHv/dqtAdXPwutwRojaexNcmsGU9xwbCkoYFyFhnFj3JagFdyA5RzGaGL+JzpUtwZr
jLQ+L/rTLAfRSHqK7/0KXTdaM7CC7tHlLcGrLK+bRhPAaeEN/L+CaRHWGGk5wbo9RVRfjK4hQ+tf
u2dX9wHZyyfJ9tmrtYaIny+/Vf+EiFcvzl/sBwgEpFJGCpLOzgaR2bE91Y8nx/Ru/yUgzgt6FEtb
glUz90ZjsmESiYmB+5+LdMU7e1qi6j4tk54o7kCRI1CGA+W8aGUpKo+i3fP0oN4zKeUBBmIKb6C6
acSYguBwTVWhtkEmo/VY95GGOO9gfSiOQTkQNVujMhB4F3gJx5mj3+h+IVF7by7MxejYMrbKxUR+
eAVxfqCnxzt8AnXcyCA+zo/F8B8YhiGSQ3U54iwB7tNzsy+vMVGsaV704wylp3gdxpT9oBqzVoWV
CJdzoHu1xpsg5bLmFceiOgdFYq1p3w9NmeiqJSvOLD0me1xDrHfkT8BwGcjmkRum5pR5DEcm64Ts
a72WdRufopD/FYbBERKr+OLW7cgfWc8drhNZWbdscPje6rNQZwroJ+pHj5x7UfcMnbJmW3iS50X/
srQzxvwC2Dxyl4bJKAN8CMc9Wg+mbmBd5pVOxTPXo+oEFFRdU0rIZSnyIBn3CD2KYt0yZ5MhX5yJ
McdHco2rKg2OBh/iME5P6H1EkBmlXVDvIWDT2F4c/lvlTVxG6Sn1PU8yk/X4R/7noAfFLwttL6GC
yrs4mTE6pfvXSQlONAfL42yFZ+ajbB5w11X9xrYfubZmPQhTuL2esx1Ax3bfAJkDEXmjljMlwSG6
3GtXIc5FHOMe2hu5AKwqTMMzx5c3Z8eMIQHsALohntwnM0tf7K1YPaX7V2TYFZXHgj7yarnW30Zn
k3V36ZVcED5YfTvQC7lKwOEDm2N65svl+a2SEpwsXPho4TGM7h/vcap8sHudnaXgOBP0kO7bey3/
N3TzVnEcno5F+ALKYAwrEf0zxnkIN3uHHk7DpYb8JL8vKo/HDvW9OSLKo8OrDHI/r0c1TtKX6T0j
wBuHslcl38wDeQflCXB+qmd0/7ZhGd8rjUe9WY3jwSFHjwqILNSL3JH9QrA82rMvxitnD/Q2V9aL
54osZay7dW/zcX+J3J5/DhPaBlKVyHKM4PcGIDNBJ/V+M/YLTnC4Kv8mRof5V6pTE2Ed19GtI/vp
RY03pCXIyfKOKb9Xe2mlUvsVXs8Gh+5hzO1petqs3MGwMrkEh85IGM8mN/ydOabZOAG4qudLGIbV
1vc2BolOffY1/10SYU1AsIyoVUjQu2Ssz9U7KxLeA9Ts3bCetRWvNCJ2PRoOCBDzXS3nuPk4AejZ
OzCPB262kC7DS8jadyOS1NSYYKNDgxVWAdgVYvVsQte1UkazRbcIKoGg18nHQmjEsf/W9eRGBjUf
qgyNEBZ2fdYl3Cc7kU4TBBsqfuOAgVVnfghf80MtLRCvqgzr3c/nIp5QYt4HtACwMcHpTHrRX6Qt
/veJcCbJi14WcPb7xkDM3Gsrzx5iWpEX7YQcAPFDcO/kIqt0Qgs2pklmWdSZYc/HEj/1aYD8RA6P
BJvP9MlajjMEh5SY+QLrd7U8qiebrjSyT9bvqRJ/3X6V91Ytaj5OwHiLIn6DcCeq6q/mOArrP5FO
E8zBmbuDBYdMdhPTo30lKiBvcWRX0yM/ehxvozwTsErjLOe4nXx+IXJ3s3ECMGXAYoy8FdCfWvaL
f9NVdRzSf7knJ8LakGAd0/UkyoKa0mIMGAiZ8RZIlQtasQYGINM1pVZ/TMQnzpip4XyZLbItIVjB
IHph1Nq3AyzVH4d7N4As0Km5furBALgnIqyIzAcVtCEXJTXjwblHx2V/2gqlAegJXU8h8n1fMZZG
fdKrf/vXFVQ+xnG+msSL1W9YL8zdCdwT76K0e3ZFn7U88RU45sSk9STLiz6UtxFnNKrLAtZddF6o
gROZh2SPb5XCfDnJ/Q4qN9VfClX+9m0K5wMcxurkFJ7hsGHueIR50aWSNaUEDFZdRlfXaL1sQKKN
Z7Cm4cI5DEHz00COjQ/zCSDvY/RSjnWvt8yulovcVPo6nncFSm3nhK208q/mI5yhp6X3DAcB4aLC
6WAuRGWjWP8zjoLejeTO1ssb++QD5fcp4D+7sB0ih6M6HGQIalajLEWcBQzMPrA2G7z6VXmzyPHP
4kGgo4GtMWYgOCsw+iKZzFyd3P1i2hh9rJewIV7+EAyjUIaBlvOiySxB9D6d6v5Pn8ptl6MMBRxm
lU5GzWiMfojDj/W4XKItkqlhnk2WP60+E5UR4KxAZLqe3ziS1FKMbUPwbflZGMYDVKJQisqxemL2
Z2lji8ULwuX5BcBIa37vIdO1v07peiptfFVpi+OE5c7CdhjGBxPaVDA6NW1sdeXKwv745PoTfBem
57tpQ7OlLQimxLY16zZgQX5aFrXng0PoYduAO7HmB2jtzscG0h4EG/f3qJjIEkZ4ue4OxbQlk3kp
EM+F6rKr9cutXqQtCNYT+AuOTA16xySPo2ekja0u5vO6nke5PeC+FVaCfDttbLb0bZk0hyGsLhyK
VM6LVlYjLEVZwMbuYzq6b8cIyy2F0cDoyqmqd+rE3tNZG5Y3mwxv5/cGORDD1pTP21yByIuoztOz
c2+utQIvLR6N8UZAZgVkb9WL6VPkTKbjsqwwEs+MQpxhGAaALgdZguvev6brX7/cNXJ03MUgKFyK
YSJoNxD1ZAnvQOYC/Ubzc5t6xXp94WAM0zC6nY8zGGBQ4C66c+fqmek+LkDOLY1Hey5D2TKI1Xdf
lhCZSda9UK9Ys+OZk+dFzy5sR5EHUd2mcsXyYNl/V9+dWXwhO7HhkULNUNh1+al4el4kMR/iD0vN
ZMbqt/t+gk+fcc6km9fzM1GdEJ88QfDGFHkdlYP1OvePSetIlhc9l80o6IIyuXGbxgjmD5WzPibw
u8INLVfatcUL8PS8YAZKTMZEbXkzmB7zsFyRwtmVr+dvQJkQrz9Lz+LreBvQBXIOiZ8flczIWl24
GWRYMOSmQWJtZVL53tOJ8qNiyx5HJ9eWdkX1u4FdiDauyOk1foz1kyh39Zak3+9Yzy0ejjIxEIEL
hGMtvdpBf0+HUVh9c9J6GhIs95SG41VOa62XIWFnfNhKLGt3assU55nL8YwEwoP22ZmR+KvVBmN2
4vJiorOn1lYEBGOmBiJwsflkMXgBVMbKqaXhSepq3INL5quRCm0S/cfPhdaDtS0i23FLaeemK+06
hgD7B0aQKu6AnVD9Ljaf+6vNxgnA2aWdUd2uVzyBeDAx8feeRFiTDNH7R3tmaAisKrReDNbofk1X
mlfcB1PpveGztnx8oYSEiEJbgBNAdL/gvEt0+ohkoGgoL04SYU1C8JbR3hvTYyPgqH0vumXTleZp
DadtMduZin5GCgStVh/rQJlOwqfKrIUYb8uoB8zCFNFlzHZSkh3s0tjPa6QLNZZCCPXeagYHUfO+
+m5a4E92pAsvfPNZRPsn5YQ2cgEBf/L7LcCq0hWcQuxRxv+RpUPbWPR1mkmklsZgdFlwuJDgHRYM
DoReUjXz/9p0pZlqHb1Y0IEebpHrL0ecvF7M+03Hqvw1urys4vJ/Q+yI6OuURDpNcqT/s7UKbYWE
nRzE9N6qoWWa/wh0Mc9E9vIEjh60FGq/7JRfT59rOk4Ah2cCy8sw2ZEVSZz+eTZZVY3E6M/jc42t
90iqbOC377J97ulm60zPcd9And8G15JWjwjs6wlkKdrTTWuSCzbMPQ28G2us1tuDbRO/Blgb50Uf
7z4MlTs7PGyEt4TEARO5pGUhP+HCiNWsElzGqf2d2obYn8m4s1oBUy+mB5xLAj00fM5WnLFaI/c5
vanxITSQ1JPlOCdgZGVk2IidIyywIo+wiXtLK5QGoOe585HMrYGh18epoffA90UM4/XiBsdD9Kfs
6d6COI/EEhjeJqD2NVkJTuIzs5PlRU/IvoboWMT5IFBh2Btkf4an6HKPaWUyOQDbZichzpyoW9Uy
Dv3T8wCVPMZ8TS/LNd9OsHV6FB7ruceAPBXrHbQ7Sk2n5Rzum5OHUZOfF31ibhFduqv/QInAlzYQ
yaNcSXduZG/HBzVRcUUucI9E5ByQlYFdeYEN6oDya7oye+llA2a3GieAXslKdsyNBLkSU3l8fcCG
oEauyEIcZ1e9MbdoTeroW8B/Zs+eGO9I0OGYynnRsBRYgOPeoyf3Lb4q1xQ+Q/lpnB+yfu4hnbR2
j6aVK9iYUuFoDAeiVsBfeRGROVziLrAnnD7V8e3Sv2PMXhizgk8MeFAvpk/PY5JJDMWsPgZkFDAM
rQT8HZagcq/e3LcRpn3SZq/JH4+RmzDaXRlWl9OVGaVnZ/+QNra6mM/KT8FwKZVnGKD8CSe3r16T
bgKBLW2RkyXT2AyPGyxyARmCZ25MG1tdzOcUP4fyXcDyf+u2mPz308ZmS1sQjBZ2Ru3DE6qOB3Zr
27RZo3ug6sRkX+yVNjRb2oPgjLM8egIdILzXtmmznnWOdCDwoqmdDR0n7UHwt7pfQpyFUR+3XJ02
tLryb+6j4LwcE89tK8xtQbCCIu5hoNNBXgf9LY5zCue5baWsAObJFOh29wOZBfImqotRxun0AW21
l6ptrOimNfD84vY4Wj4v2shAVFaAvsiA3Hy9ON1Hvbek/Z1KsFxQ2g31pmHYI/asR6SAyA9Zz720
k4nuSIJlSuF0jF4NlaB4vfztssP8DRxnjF6VfTVt3E3RRacRLOcXJqFmRmwudN1jhWU5mtulnRwU
/SVtYWT1l8hFxR2AH9QNtUXirn48dgiavzNt/M2QjiKYHm8qxnRFemogwGBnT9hpSLqPnFU4MO0m
9Ld0DMFyPhtj5KDIDobwoZ7ho3mr1xTo0fFpt6O/pT3dgH0RLe6HaiY454bi1ZGEvIjxdUDazehv
6ZgeDN6w4A6Z8AGeWHlZ1vXq53LPHiSXsEHaLelP6RyCjeSC/mxrKA4My4Rys6xrRuEjcmk3pT+l
g4boyg54tQ0su7fGDdehIRpKTOPvaTelP6WDerCzOJAnFt4fHH7uYHiLSDmb8YW1zfBoN+kYgnVa
9hWQVwPDsp+0Zi+TQmmpwSzRe9NuR39LxxBcFr0ksj85PN/aa+Gg/JVN3Zlpt6C/pbMIvnrAzxHm
RreQQuz+5loqrUGdiX1NmGtn6SiCFZTMgK+jUj4N3e61sQn7CioeKt/UGe5DaeNvhnQUwQD6fT5m
h9wB4EwDqexUsHsv9l6kP5OR0TrDvSlt3M2SjosmBRo3Ob81MB6jBwJbgwxEWYHqizgyh81y97R0
u0oaOuhkgtdJBw7R6yQo6wjucFlHcIfLOoI7XNYR3OHyf7iqrvn/gHCwAAAAJXRFWHRkYXRlOmNy
ZWF0ZQAyMDIxLTEyLTE0VDE5OjM4OjA5KzA4OjAwmXMYFgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAy
MS0xMi0xNFQxOTozODowOSswODowMOguoKoAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAA
ABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADI2UxuiZQAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24A
MTIwdAQi7wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMTIw6QvDmQAAACB0RVh0c29mdHdh
cmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBh
Z2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxMjBNp8myAAAAF3RFWHRUaHVt
Yjo6SW1hZ2U6OldpZHRoADEyMN5Wme8AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/
slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYzOTQ4MTg4ObVTMPUAAAASdEVYdFRodW1iOjpTaXpl
ADc2MjBCQiI6F3sAAABGdEVYdFRodW1iOjpVUkkAZmlsZTovLy9hcHAvdG1wL2ltYWdlbGMvaW1n
dmlldzJfOV8xNjM4ODQ4MDI1NDI2MTE4Ml8zOF9bMF0TNSl1AAAAAElFTkSuQmCC`})}const PUe=Ni("menuBar"),fM=si(PUe,"horizontal"),vhe=Ht(fM,"logo"),FUe=Ht(vhe,"content");function BUe(r){const{data:e,onClick:t,logo:n}=r,i=we.useRef(null),[s,o]=we.useState(!1),a=d=>{var h;const v=d.target.closest("li"),C=(h=v==null?void 0:v.parentElement)===null||h===void 0?void 0:h.parentElement;return!!C&&C.classList.contains(fM)};we.useEffect(()=>{const d=document.getElementsByClassName(fM)[0],h=v=>{var C,S;const E=a(v),k=v.target;if(E)s&&((S=(C=i.current)===null||C===void 0?void 0:C.dispose)===null||S===void 0||S.call(C)),setTimeout(()=>o(!s));else{const D=k.closest("li"),O=D&&d.contains(D)&&!(D!=null&&D.dataset.submenu);(!D||O)&&o(!1)}},p=v=>{if(!s)return;const C=v.target;d.contains(C)||o(!1)};return document.addEventListener("click",p),d==null||d.addEventListener("click",h),()=>{document.removeEventListener("click",p),d==null||d.removeEventListener("click",h)}},[s]);const l=s?"hover":"click",u=(d,h)=>{t==null||t(d,h),i.current.dispose()};return pe.createElement("div",{className:fM},pe.createElement("div",{className:vhe},n||pe.createElement(RUe,{className:FUe})),pe.createElement(Vc,{ref:i,role:"menu",mode:wC.Horizontal,trigger:l,onClick:u,style:{width:"100%"},data:e}))}const bhe=Ni("menuBar"),WUe=Ht(bhe,"action");function Che(r){const{data:e,mode:t=Bc.vertical,onClick:n,updateFocusinEle:i,logo:s}=r,o=we.useRef(null),a=(h=[])=>{const p=h.concat(),v=[...p];for(;v.length;){const C=v.pop();if(C)if(C!=null&&C.data)v.push(...C.data);else{const S=hm.queryGlobalKeybinding(C.id)||[];S.length&&(C.keybinding=hm.convertSimpleKeybindingToString(S))}}return p},l=(h,p)=>{n==null||n(h,p),o.current.dispose()},u=pe.createElement(Vc,{role:"menu",onClick:l,style:{width:200},data:a(e)}),d=we.useCallback(h=>{i==null||i(h.target)},[]);return we.useEffect(()=>(document.body.addEventListener("focusin",d),()=>{document.body.removeEventListener("focusin",d)}),[]),t===Bc.horizontal?pe.createElement(BUe,{data:a(e),onClick:n,logo:s}):pe.createElement("div",{className:bhe},pe.createElement(Xz,{ref:o,trigger:"click",className:WUe,placement:"right",overlay:u},pe.createElement(cs,{type:"menu"})))}class vm extends ep{constructor(){super({id:vm.ID,label:vm.LABEL,title:vm.LABEL,category:Rle.View,alias:"Toggle Side Bar",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:po($c.CtrlCmd|Yn.KeyB)}}),this.layoutService=pt.resolve(Nh),this.activityBarService=pt.resolve(Bv),this.menuBarService=pt.resolve(UC),this.sideBarService=pt.resolve(Fv)}run(e,...t){const n=t[0],{selected:i}=this.activityBarService.getState(),s=this.layoutService.toggleSidebarVisibility(),o=n||this._preActivityBar;this.activityBarService.setActive(s?void 0:o),this.sideBarService.setActive(s?void 0:o),this.menuBarService.update(vm.ID,{icon:s?"":"check"}),s&&(this._preActivityBar=i)}}vm.ID=G2;vm.LABEL=Vt("menu.showSideBar.label","Toggle Side Bar Visibility");class bm extends ep{constructor(){super({id:bm.ID,label:bm.LABEL,title:bm.LABEL,category:Rle.View,alias:"Toggle Panel",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:po($c.CtrlCmd|Yn.KeyJ)}}),this.layoutService=pt.resolve(Nh),this.menuBarService=pt.resolve(UC)}run(e){const t=this.layoutService.togglePanelVisibility();this.menuBarService.update(bm.ID,{icon:t?"":"check"})}}bm.ID=mt.MENU_VIEW_PANEL;bm.LABEL=Vt("menu.showPanel.title","Toggle Panel");var VUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},HUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let qx=class extends Wu{constructor(){super(),this._focusinEle=null,this._automation={},this.updateFocusinEle=e=>{(e==null?void 0:e.id)!=yq&&(this._focusinEle=e)},this.onClick=(e,t)=>{var n,i;const s=t.id||"";this.emit(VS.onSelect,s),(i=(n=this._automation)[s])===null||i===void 0||i.call(n),this.updateActivityBarContextMenu(s)},this.createFile=()=>{const{ACTION_QUICK_CREATE_FILE:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.undo=()=>{const{ACTION_QUICK_UNDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.redo=()=>{const{ACTION_QUICK_REDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.gotoQuickCommand=()=>{const{ACTION_QUICK_COMMAND:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateActivityBar=()=>{const e=this.layoutService.toggleActivityBarVisibility(),{MENU_VIEW_ACTIVITYBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.selectAll=()=>{const{ACTION_QUICK_SELECT_ALL:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.copyLineUp=()=>{const{ACTION_QUICK_COPY_LINE_UP:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateMenuBar=()=>{const e=this.layoutService.toggleMenuBarVisibility(),{MENU_VIEW_MENUBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateMenuBarMode=e=>{this.layoutService.setMenuBarMode(e)},this.updateMenuBarDataByMode=e=>{const{builtInMenuBarData:t}=this.builtinService.getModules(),{MENUBAR_MODE_HORIZONTAL:n,MENUBAR_MODE_VERTICAL:i,MENU_APPEARANCE_ID:s}=this.builtinService.getConstants();let o=n,a=i;e===Bc.vertical&&(o=i,a=n);const l=this.getMenuBarItem(t,a);this.menuBarService.remove(o),this.menuBarService.append(l,s)},this.getMenuBarItem=(e,t)=>{let n;for(n of e){if(n.id===t)return Object.assign({},n);if(Array.isArray(n.data)&&n.data.length>0){const i=this.getMenuBarItem(n.data,t);if(i)return i}}return null},this.updateStatusBar=()=>{const e=this.layoutService.toggleStatusBarVisibility(),{MENU_VIEW_STATUSBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateSideBar=()=>{this.monacoService.commandService.executeCommand(vm.ID)},this.updateAuxiliaryBar=()=>{const e=this.layoutService.setAuxiliaryBar(n=>!n),{MENU_VIEW_AUXILIARY:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updatePanel=()=>{this.monacoService.commandService.executeCommand(bm.ID)},this.menuBarService=pt.resolve(UC),this.layoutService=pt.resolve(Nh),this.monacoService=pt.resolve(Pv),this.builtinService=pt.resolve(ya),this.activityBarService=pt.resolve(Bv)}initView(){const{builtInMenuBarData:e}=this.builtinService.getModules(),{ACTION_QUICK_CREATE_FILE:t,ACTION_QUICK_UNDO:n,ACTION_QUICK_REDO:i,ACTION_QUICK_SELECT_ALL:s,ACTION_QUICK_COPY_LINE_UP:o,MENU_VIEW_ACTIVITYBAR:a,MENU_VIEW_AUXILIARY:l,MENU_VIEW_MENUBAR:u,MENU_VIEW_STATUSBAR:d,MENU_QUICK_COMMAND:h,MENU_VIEW_PANEL:p,MENUBAR_MODE_HORIZONTAL:v,MENUBAR_MODE_VERTICAL:C}=this.builtinService.getConstants();if(e){const S=this.layoutService.getMenuBarMode(),E=this.getMenuBarDataByMode(S,e);this.menuBarService.setMenus(E)}[[t,()=>this.createFile()],[n,()=>this.undo()],[i,()=>this.redo()],[s,()=>this.selectAll()],[o,()=>this.copyLineUp()],[a,()=>this.updateActivityBar()],[u,()=>this.updateMenuBar()],[d,()=>this.updateStatusBar()],[h,()=>this.gotoQuickCommand()],[G2,()=>this.updateSideBar()],[l,()=>this.updateAuxiliaryBar()],[p,()=>this.updatePanel()],[v,()=>this.updateMenuBarMode(Bc.horizontal)],[C,()=>this.updateMenuBarMode(Bc.vertical)]].forEach(([S,E])=>{S&&(this._automation[S]=E)}),this.subscribe(VS.onChangeMode,this.updateMenuBarDataByMode)}getFilteredMenuBarData(e,t){const n=[];return Array.isArray(e)&&e.forEach(i=>{if(t.includes(i.id))return;const s=Object.assign({},i);Array.isArray(i.data)&&i.data.length>0&&(s.data=this.getFilteredMenuBarData(i.data,t)),n.push(s)}),n}getMenuBarDataByMode(e,t){const{MENUBAR_MODE_VERTICAL:n,MENUBAR_MODE_HORIZONTAL:i}=this.builtinService.getConstants(),s=[];return e===Bc.horizontal?s.push(i):e===Bc.vertical&&s.push(n),this.getFilteredMenuBarData(t,s)}updateActivityBarContextMenu(e){const{MENU_VIEW_MENUBAR:t,CONTEXT_MENU_MENU:n}=this.builtinService.getConstants();n&&e===t&&this.activityBarService.toggleContextMenuChecked(n)}};qx=VUe([zr(),HUe("design:paramtypes",[])],qx);const zUe=pt.resolve(UC),UUe=pt.resolve(qx),Zte=qc(zUe,Che,UUe);class yC extends ep{constructor(){super({id:yC.ID,label:yC.LABEL,title:yC.LABEL,alias:"Color Theme",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:po($c.CtrlCmd|Yn.KeyK)}}),this.colorThemeService=pt.resolve(BS)}run(e){const t=e.get(Wf),n=this.colorThemeService.getThemes(),i=this.colorThemeService.getColorTheme(),s=[...$Ue(n)];let o;const a=(l,u)=>{o&&clearTimeout(o),o=window.setTimeout(()=>{o=void 0;const d=l&&l.id!==void 0?l.id:i.id;this.colorThemeService.setTheme(d)},u?0:200)};return new Promise(l=>{let u=!1;const d=s.findIndex(p=>p.id===i.id),h=t.createQuickPick();h.items=s,h.placeholder=L("themes.selectTheme","Select Color Theme (Up/Down Keys to Preview)"),h.activeItems=[s[d]],h.canSelectMany=!1,h.onDidAccept(p=>{const v=h.activeItems[0];v&&a(v,!0),u=!0,h.hide(),l()}),h.onDidChangeActive(p=>a(p[0],!1)),h.onDidHide(()=>{u||(a(i,!0),l())}),h.show()})}}yC.ID=mt.ACTION_SELECT_THEME;yC.LABEL=L("selectTheme.label","Color Theme");function $Ue(r,e){const t=s=>({id:s.id,label:s.label,description:s.description}),n=(s,o)=>{var a;return(a=s.label)===null||a===void 0?void 0:a.localeCompare(o.label)},i=r.map(t).sort(n);return i.length>0&&e&&i.unshift({type:"separator",label:e}),i}const vz=mo.as(XC.Quickaccess);function jUe(r){qUe(r.prefix),vz.registerQuickAccessProvider(r)}function qUe(r){const e=vz.providers.findIndex(t=>t.prefix===r);e>-1&&vz.providers.splice(e,1)}var KUe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class cv extends Gde{constructor(){super({showAlias:!1,noResultsPick:{label:L("noCommandResults","No matching commands"),commandId:""}},cv.services.get(Li),cv.services.get(ks),cv.services.get(js),cv.services.get(Uv),cv.services.get(Oo)),this.editorService=pt.resolve(jd)}get activeTextEditorControl(){var e;return(e=this.editorService)===null||e===void 0?void 0:e.editorInstance}static get services(){return pt.resolve(Pv).services}getCommandPicks(e,t){return KUe(this,void 0,void 0,function*(){return t.isCancellationRequested?[]:[...this.getCodeEditorCommandPicks(),...this.getGlobalCommandPicks(e)].map(n=>Object.assign(Object.assign({},n),{buttons:[{iconClass:"codicon codicon-gear",tooltip:L("configure keybinding","Configure Keybinding")}],trigger:()=>Iw.CLOSE_PICKER}))})}getGlobalCommandPicks(e){var t;const n=[],i=Pu.getMenuItems(vn.CommandPalette);for(const s of i){let o=(typeof s.command.title=="string"?s.command.title:s.command.title.value)||s.command.id;const a=typeof s.command.category=="string"?s.command.category:(t=s.command.category)===null||t===void 0?void 0:t.value;a&&(o=L("commandWithCategory","{0}: {1}",a,o));const l=typeof s.command.title!="string"?s.command.title.original:void 0,u=a&&s.command.category&&typeof s.command.category!="string"?s.command.category.original:void 0,d=l&&a?u?`${u}: ${l}`:`${a}: ${l}`:l;n.push({commandId:s.command.id,commandAlias:d,label:q$(o)})}return n}}cv.PREFIX=">";jUe({ctor:cv,prefix:cv.PREFIX,placeholder:L("commandsQuickAccessPlaceholder","Type the name of a command to run."),helpEntries:[{description:L("commandsQuickAccess","Show and Run Commands"),needsEditor:!1}]});class Z2 extends ep{constructor(){super({id:Z2.ID,label:uN.quickCommandActionLabel,alias:"Command Palette",title:{value:L("showTriggerActions","Command Palette"),original:"Command Palette"},f1:!1,keybinding:{weight:Pf.WorkbenchContrib,when:void 0,primary:$c.CtrlCmd|$c.Shift|Yn.KeyP,secondary:[Yn.F1]}})}run(e){e.get(Wf).quickAccess.show(cv.PREFIX)}}Z2.ID=mt.ACTION_QUICK_COMMAND;var GUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},YUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let xP=class extends Wu{constructor(){super(),this.onClick=(e,t)=>{this.emit(WS.OnClick,e,t)},this.onChange=(e,t)=>{this.emit(WS.OnChange,e,t)},this.onSelectColorTheme=()=>{this.monacoService.commandService.executeCommand(yC.ID)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{ACTION_QUICK_COMMAND:i="",ACTION_QUICK_ACCESS_SETTINGS:s="",ACTION_SELECT_THEME:o="",CONTEXT_MENU_MENU:a="",CONTEXT_MENU_EXPLORER:l="",CONTEXT_MENU_SEARCH:u="",CONTEXT_MENU_HIDE:d}=this.builtinService.getConstants();switch(n){case a:{this.menuBarController.updateMenuBar(),this.activityBarService.toggleContextMenuChecked(n);break}case l:case u:{this.activityBarService.toggleBar(n),this.activityBarService.toggleContextMenuChecked(n);break}case d:{this.menuBarController.updateActivityBar();break}case i:{this.gotoQuickCommand();break}case s:{this.settingsService.openSettingsInEditor();break}case o:{this.onSelectColorTheme();break}}},this.activityBarService=pt.resolve(Bv),this.settingsService=pt.resolve(zS),this.monacoService=pt.resolve(Pv),this.menuBarController=pt.resolve(qx),this.builtinService=pt.resolve(ya)}initView(){const{activityBarData:e,contextMenuData:t}=this.builtinService.getModules();e&&this.activityBarService.add(e),t&&this.activityBarService.addContextMenu(t)}gotoQuickCommand(){this.monacoService.commandService.executeCommand(Z2.ID)}};xP=GUe([zr(),YUe("design:paramtypes",[])],xP);var ZUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let DP=class extends Wu{constructor(){super(),this.initView=()=>{},this.onClick=e=>{this.auxiliaryService.setActive(this.auxiliaryService.getState().current===e?void 0:e),this.emit(GN.onTabClick,e)},this.auxiliaryService=pt.resolve(Ux)}};DP=ZUe([zr(),XUe("design:paramtypes",[])],DP);const X2=Ni("notification"),QUe=Ht(X2,"header"),JUe=Ht(X2,"body"),e$e=Ht(X2,"item"),t$e=si(X2,"close");function yhe(r){const{data:e=[],actionBar:t=[],showNotifications:n,onActionBarClick:i,onCloseNotification:s}=r,a=e.length>0?Vt("notification.title","notifications"):Vt("notification.title.no","no new notifications"),l=n?"block":"none";return pe.createElement("div",{className:ni(X2,pne),style:{display:l}},pe.createElement("header",{className:QUe},pe.createElement("span",null,a),pe.createElement(s2,{data:t,onClick:i})),pe.createElement("div",{className:JUe},e.map(u=>pe.createElement("div",{className:e$e,key:u.id},pe.createElement(cs,{title:"Clear Notification",onClick:()=>s==null?void 0:s(u),className:t$e,type:"close"}),typeof u.render=="function"?u.render(u):u.value))))}we.memo(yhe);const whe=Ni("bell"),n$e=si(whe,"active");function i$e(r){const{data:e=[],onClick:t,showNotifications:n,id:i,actionBar:s,onActionBarClick:o,onCloseNotification:a}=r,l=we.useRef(),d=e.length>0?"bell-dot":"bell";return we.useEffect(()=>{const h=kE(`.${Ni("workbench")}`);h&&(l.current=l.current||document.createElement("div"),h.appendChild(l.current),vM(pe.createElement(yhe,{id:i,data:e,actionBar:s,showNotifications:n,onActionBarClick:o,onCloseNotification:a}),l.current))},[i,e,s,n,o,a]),pe.createElement(cs,{className:ni(whe,n&&n$e),onClick:t,type:d})}const r$e=we.memo(i$e);var s$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},o$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let bz=class extends Wu{constructor(){super(),this.onCloseNotification=e=>{this.notificationService.remove(e.id)},this.onClick=(e,t)=>{this.toggleNotifications()},this.onActionBarClick=(e,t)=>{const n=t.id,{NOTIFICATION_CLEAR_ALL_ID:i,NOTIFICATION_HIDE_ID:s}=this.builtinService.getConstants();n===i?this.notificationService.clear():n===s&&this.toggleNotifications()},this.notificationService=pt.resolve(jx),this.statusBarService=pt.resolve(Wv),this.builtinService=pt.resolve(ya)}toggleNotifications(){this.notificationService.toggleNotification()}initView(){const{builtInNotification:e,NOTIFICATION_CLEAR_ALL:t,NOTIFICATION_HIDE:n}=this.builtinService.getModules();if(e){const i=qc(this.notificationService,r$e),s=Object.assign(Object.assign({},e),{actionBar:[t,n].filter(Boolean),render:()=>pe.createElement(i,{onClick:this.onClick,onActionBarClick:this.onActionBarClick,onCloseNotification:this.onCloseNotification})});this.notificationService.setState(Object.assign({},s)),this.statusBarService.add(s,Ab.right)}}};bz=s$e([zr(),o$e("design:paramtypes",[])],bz);const a$e=Ni("output");function l$e(r){const{id:e,data:t="",onUpdateEditorIns:n}=r;return pe.createElement("div",{className:a$e},pe.createElement(hj,{key:e,options:{value:t,readOnly:!0,lineDecorationsWidth:0,lineNumbers:"off",minimap:{enabled:!1},automaticLayout:!0},editorInstanceRef:i=>{n==null||n(i)}}))}var u$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},c$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let IP=class extends Wu{constructor(){super(),this.onTabChange=e=>{e&&this.panelService.setActive(e),this.emit(Ob.onTabChange,e)},this.onClose=e=>{e&&this.emit(Ob.onTabClose,e)},this.onToolbarClick=(e,t)=>{const{PANEL_TOOLBOX_CLOSE:n,PANEL_TOOLBOX_RESIZE:i}=this.builtinService.getConstants();t.id===n?this.monacoService.commandService.executeCommand(bm.ID):t.id===i&&this.panelService.toggleMaximize(),this.emit(Ob.onToolbarClick,e,t)},this.panelService=pt.resolve(HS),this.monacoService=pt.resolve(Pv),this.builtinService=pt.resolve(ya)}initView(){const{builtInOutputPanel:e,builtInPanelToolbox:t,builtInPanelToolboxResize:n}=this.builtinService.getModules();if(e){const s=e;s.renderPane=o=>pe.createElement(l$e,Object.assign({onUpdateEditorIns:a=>{o.outputEditorInstance=a}},o)),this.panelService.add(s),this.panelService.setActive(s.id)}const i=[n,t].filter(Boolean);this.panelService.setState({toolbox:i})}};IP=u$e([zr(),c$e("design:paramtypes",[])],IP);function d$e(r){const{data:e={errors:0,warnings:0,infos:0}}=r;return pe.createElement(pe.Fragment,null,pe.createElement(cs,{type:"error"}),` ${e.errors} `,pe.createElement(cs,{type:"warning"}),` ${e.warnings} `,pe.createElement(cs,{type:"info"}),` ${e.infos}`)}const h$e=pe.memo(d$e),She=Ni("problems"),xq=Ht(She,"treeview"),Lhe=Ht(xq,"treeNode"),f$e=Ht(Lhe,"badge"),Ehe=Ht(xq,"treeLeaf"),Xte=Ht(Ehe,"subInfo");function g$e(r){const{data:e,onSelect:t}=r;if(!(e!=null&&e.length))return pe.createElement("div",{style:{margin:"0 18px",userSelect:"none"}},Vt("panel.problems.empty","No problems have been detected in the workspace."));const n=i=>{switch(i){case Im.Error:return pe.createElement(cs,{type:"error"});case Im.Warning:return pe.createElement(cs,{type:"warning"});case Im.Info:return pe.createElement(cs,{type:"info"});default:return""}};return pe.createElement(dD,null,pe.createElement("div",{className:She},pe.createElement(dF,{className:xq,data:e,renderTitle:({children:i,name:s,value:o},a,l)=>l?pe.createElement("span",{className:Ehe},n(o.status),pe.createElement("span",null,o.message),pe.createElement("span",{className:Xte},o.code),pe.createElement("span",{className:Xte},"[",o.startLineNumber,","," ",o.startColumn,"]")):pe.createElement("span",{className:Lhe},o.code,pe.createElement("span",{className:f$e},i==null?void 0:i.length)),onSelect:t,onRightClick:i=>i.preventDefault()})))}const p$e=we.memo(g$e);var m$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Cz=class extends Wu{constructor(){super(),this.onClick=(e,t)=>{this.showHideProblems()},this.onSelect=e=>{this.emit(XN.onSelect,e)},this.panelService=pt.resolve(HS),this.statusBarService=pt.resolve(Wv),this.monacoService=pt.resolve(Pv),this.layoutService=pt.resolve(Nh),this.problemsService=pt.resolve(JN),this.builtinService=pt.resolve(ya)}showHideProblems(){const{panel:e}=this.layoutService.getState(),{current:t}=this.panelService.getState(),{builtInPanelProblems:n}=this.builtinService.getModules();n&&((e.hidden||(t==null?void 0:t.id)===n.id)&&this.monacoService.commandService.executeCommand(bm.ID),this.panelService.open(n))}initView(){const{builtInStatusProblems:e,builtInPanelProblems:t}=this.builtinService.getModules();if(e&&(e.render=s=>pe.createElement(h$e,Object.assign({},s)),e.onClick=this.onClick,this.statusBarService.add(e,Ab.left)),t){const s=qc(this.problemsService,p$e),o=t;o.renderPane=()=>pe.createElement(s,{onSelect:this.onSelect}),this.panelService.add(o),this.panelService.setActive(o.id)}const{PROBLEM_MODEL_ID:n,PROBLEM_MODEL_NAME:i}=this.builtinService.getConstants();this.problemsService.setState({id:n,name:i})}};Cz=m$e([zr(),_$e("design:paramtypes",[])],Cz);function xhe({locale:r}){const e=we.useRef(null),t=()=>{window.location.reload()};return we.useEffect(()=>{var n;(n=e.current)===null||n===void 0||n.focus()},[]),pe.createElement("div",{style:{lineHeight:"1.5"}},pe.createElement("div",{style:{direction:"ltr",width:440,whiteSpace:"normal",textAlign:"left"}},pe.createElement("p",{style:{fontWeight:"bold"}},Vt("notification.locale.title","")),pe.createElement("p",null,Vt("notification.locale.description",""))),pe.createElement("div",{style:{marginBottom:2}},pe.createElement(Zw,{ref:e,style:{width:150,margin:"0 0 0 auto"},onClick:t},Vt("notification.locale.button",""))))}pe.memo(xhe);var v$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},b$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let yz=class extends Wu{constructor(){super(),this.onChangeSettings=Is.debounce(e=>{this.settingsService.update(e),this.emit(ZN.OnChange,e)},600),this.editorService=pt.resolve(jd),this.settingsService=pt.resolve(zS),this.localeService=pt.resolve(Am),this.notificationService=pt.resolve(jx),this.builtinService=pt.resolve(ya)}initView(){const{SETTING_ID:e}=this.builtinService.getConstants();this.editorService.onUpdateTab(t=>{var n;if(t.id===e){const i=this.settingsService.normalizeFlatObject(((n=t.data)===null||n===void 0?void 0:n.value)||"");this.onChangeSettings(i)}}),this.localeService.onChange((t,n)=>{this.notifyLocaleChanged(t,n)})}notifyLocaleChanged(e,t){const{SETTING_ID:n}=this.builtinService.getConstants(),i={id:n,value:t,render(s){return pe.createElement(xhe,{key:t.id,locale:t.name})}};this.notificationService.getState().showNotifications||this.notificationService.toggleNotification(),this.notificationService.add([i])}};yz=v$e([zr(),b$e("design:paramtypes",[])],yz);var C$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},y$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let TP=class extends Wu{constructor(){super(),this.onClick=(e,t)=>{this.emit(YN.onClick,e,t)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{STATUS_BAR_HIDE_ID:i}=this.builtinService.getConstants();switch(n){case i:this.menuBarController.updateStatusBar();break}},this.menuBarController=pt.resolve(qx),this.statusBarService=pt.resolve(Wv),this.builtinService=pt.resolve(ya)}initView(){const{STATUS_EDITOR_INFO:e,CONTEXT_MENU_HIDE_STATUS_BAR:t}=this.builtinService.getModules(),n=Is.cloneDeep(this.statusBarService.getState().rightItems),i=Is.cloneDeep(this.statusBarService.getState().contextMenu||[]);e&&n.push(Object.assign(Object.assign({},e),{render:s=>pe.createElement(ghe,Object.assign({},s))})),t&&i.push(t),this.statusBarService.setState({rightItems:n,contextMenu:i})}};TP=C$e([zr(),y$e("design:paramtypes",[])],TP);var w$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},S$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let kP=class extends Wu{constructor(){super(),this.onPaneSizeChange=e=>{this.layoutService.setPaneSize(e)},this.onHorizontalPaneSizeChange=e=>{this.layoutService.setHorizontalPaneSize(e)},this.onWorkbenchDidMount=()=>{this.layoutService.emit(wP.OnWorkbenchDidMount)},this.layoutService=pt.resolve(Nh)}initView(){}};kP=w$e([zr(),S$e("design:paramtypes",[])],kP);const L$e=Ni(G2),E$e=Ni(GHe,L$e),NP=Ni(YHe),x$e=si(NP,"input"),D$e=si(NP,"editable"),Q2=Ni(ZHe),e3=Ht(Q2,"item"),I$e=Ht(Q2,"group"),T$e=Ht(e3,"fileName"),k$e=Ht(e3,"filePath"),Qte=si(e3,"active"),N$e=Ht(Q2,"close"),A$e=Ht(Q2,"file"),O$e=r=>{const{activePanelKeys:e,data:t=[],headerToolBar:n,onClick:i,onActionsContextMenuClick:s,onCollapseChange:o,onToolbarClick:a}=r;return pe.createElement("div",{className:E$e},pe.createElement(phe,{title:Vt("sidebar.explore.title","Explorer"),toolbar:pe.createElement(o2,{data:[n],onClick:i,onContextMenuClick:s})}),pe.createElement(mhe,null,pe.createElement(die,{data:t,activePanelKeys:e,onCollapseChange:o,onToolbarClick:a})))};var M$e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const R$e=r=>{const e=[...r];let t=!1;for(;e.length;){const n=e.pop();if(n!=null&&n.isEditable){t=!0;break}else e.push(...(n==null?void 0:n.children)||[])}return t},P$e=pe.forwardRef((r,e)=>{const t=we.useRef(null);return we.useLayoutEffect(()=>{if(t.current){const n=(r.defaultValue||"").lastIndexOf(".");t.current.selectionStart=0,t.current.selectionEnd=n>0?n:(r.defaultValue||"").length}},[]),pe.createElement("input",Object.assign({},r,{ref:t}))}),F$e=r=>{var e;const{folderTree:t={},entry:n,panel:i,onUpdateFileName:s,onSelectFile:o,onDropTree:a,onClickContextMenu:l,onRightClick:u,onLoadData:d,createTreeNode:h,onExpandKeys:p}=r,v=M$e(r,["folderTree","entry","panel","onUpdateFileName","onSelectFile","onDropTree","onClickContextMenu","onRightClick","onLoadData","createTreeNode","onExpandKeys"]),{data:C=[],folderPanelContextMenu:S=[],expandKeys:E,loadedKeys:k,current:D}=t,O=we.useRef(null),H=we.useRef(),V=n2(),X=R$e(C),$=(te,B)=>{var K;l==null||l(B),(K=H.current)===null||K===void 0||K.hide()},P=()=>PP({anchor:kE(`.${NP}`),render:()=>pe.createElement(Vc,{role:"menu",onClick:$,data:S})}),z=(te,B)=>{l==null||l(te,B),V==null||V.hide()},M=(te,B)=>{if(te.target.nodeName!=="INPUT"){te.preventDefault();const K=(u==null?void 0:u(B))||[];K.length&&(V==null||V.show(bM(te),()=>pe.createElement(Vc,{role:"menu",onClick:(de,ae)=>z(ae,B),data:K})))}},W=(te,B)=>{const K=te.value;s==null||s(Object.assign(Object.assign({},B),{name:K}))},I=(te,B)=>{W(te.target,B)},R=(te,B)=>{(te.keyCode===13||te.keyCode===27)&&W(te.target,B)},G=te=>{const{isEditable:B,name:K}=te;return B?pe.createElement(P$e,{role:"input",className:x$e,type:"text",defaultValue:K,ref:O,onKeyDown:de=>R(de,te),autoComplete:"off",autoFocus:!0,onBlur:de=>I(de,te),onClick:de=>de.stopPropagation()}):K},Z=()=>{o==null||o()},ee=(te,B)=>{a==null||a(te,B)},ne=()=>{h==null||h("RootFolder")};we.useEffect(()=>(S.length>0&&(H.current=P()),()=>{var te;(te=H.current)===null||te===void 0||te.dispose()}),[C.length]);const ie=pe.createElement("div",{"data-content":i.id},n?pe.createElement(pe.Fragment,null,n):pe.createElement("div",{style:{padding:"10px 5px"}},"you have not yet opened a folder",pe.createElement(Zw,{onClick:ne},"Add Folder")));return C.length?pe.createElement(dD,{isShowShadow:!0},pe.createElement("div",{"data-content":i.id,style:{height:"100%"}},pe.createElement(dF,Object.assign({activeKey:D==null?void 0:D.id,expandKeys:E,loadedKeys:k,data:((e=C[0])===null||e===void 0?void 0:e.children)||[],className:ni(NP,X&&D$e),draggable:!X,onDropTree:ee,onSelect:o,onTreeClick:Z,onRightClick:M,renderTitle:G,onLoadData:d,onExpand:p},v)))):ie},B$e=we.memo(F$e);var W$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},V$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Kx=class extends Wu{constructor(){super(),this.getContextMenu=e=>{var t;const n=xm(((t=this.folderTreeService.getState().folderTree)===null||t===void 0?void 0:t.contextMenu)||[]),i=this.folderTreeService.getFileContextMenu(),s=this.folderTreeService.getFolderContextMenu(),{ROOT_FOLDER_CONTEXT_MENU:o}=this.builtinService.getModules();switch(e.fileType){case Au.File:{n.unshift(...i);break}case Au.Folder:{n.unshift(...s);break}case Au.RootFolder:return s.concat(o||[])}return n},this.createTreeNode=(e,t)=>{var n;if(typeof t>"u"){const i=this.folderTreeService.getState(),{data:s,current:o}=(i==null?void 0:i.folderTree)||{},a=typeof(o==null?void 0:o.id)>"u"?(n=s==null?void 0:s[0])===null||n===void 0?void 0:n.id:o==null?void 0:o.id;this.emit(Ko.onCreate,e,a)}else this.emit(Ko.onCreate,e,t)},this.onClickContextMenu=(e,t)=>{const n=e.id,{RENAME_COMMAND_ID:i,DELETE_COMMAND_ID:s,NEW_FILE_COMMAND_ID:o,NEW_FOLDER_COMMAND_ID:a,OPEN_TO_SIDE_COMMAND_ID:l}=this.builtinService.getConstants();switch(n){case i:{const{id:u}=t;this.onRename(u);break}case s:{const{id:u}=t;this.onDelete(u);break}case o:{const{id:u}=t;this.createTreeNode(Au.File,u);break}case a:{const{id:u}=t;this.createTreeNode(Au.Folder,u);break}case l:{this.onSelectFile(t);break}default:this.onContextMenuClick(e,t)}},this.onRightClick=e=>{const t=this.getContextMenu(e);return this.emit(Ko.onRightClick,e,t),t},this.onDropTree=(e,t)=>{this.emit(Ko.onDrop,e,t)},this.onUpdateFileName=e=>{this.emit(Ko.onUpdateFileName,e)},this.onSelectFile=e=>{this.folderTreeService.setActive(e==null?void 0:e.id),e&&!e.isEditable&&e.fileType===Au.File&&this.emit(Ko.onSelectFile,e)},this.onContextMenuClick=(e,t)=>{this.emit(Ko.onContextMenuClick,e,t)},this.onRename=e=>{this.emit(Ko.onRename,e)},this.onDelete=e=>{this.emit(Ko.onDelete,e)},this.onLoadData=e=>this.count(Ko.onLoadData)?(this.folderTreeService.setLoadedKeys([...this.folderTreeService.getLoadedKeys(),e.id.toString()]),new Promise((n,i)=>{const s=o=>{this.folderTreeService.update(o),n()};this.emit(Ko.onLoadData,e,s)})):Promise.resolve(),this.onExpandKeys=e=>{this.emit(Ko.onExpandKeys,e)},this.folderTreeService=pt.resolve($x),this.builtinService=pt.resolve(ya)}initView(){const{FILE_CONTEXT_MENU:e,BASE_CONTEXT_MENU:t,COMMON_CONTEXT_MENU:n,FOLDER_PANEL_CONTEXT_MENU:i}=this.builtinService.getModules();e&&this.folderTreeService.setFileContextMenu(e),t&&this.folderTreeService.setFolderContextMenu(t),this.folderTreeService.setState({folderTree:{contextMenu:n||[],current:null,folderPanelContextMenu:i||[],data:[],expandKeys:[]}})}};Kx=W$e([zr(),V$e("design:paramtypes",[])],Kx);const H$e=r=>{var e;const{current:t,groups:n,groupToolbar:i,contextMenu:s=[],headerContextMenu:o,panel:a,onSelect:l,onSaveGroup:u,onContextMenu:d,onCloseGroup:h,onClose:p,onToolbarClick:v}=r,C=we.useRef(null),S=we.useRef(null);if(we.useLayoutEffect(()=>{var P,z,M;if((((P=S.current)===null||P===void 0?void 0:P.scrollHeight)||0)>SO-tb){const I=(z=C.current)===null||z===void 0?void 0:z.querySelector(`.${Qte}`);if(I){const R=I.offsetTop;(M=S.current)===null||M===void 0||M.scrollTo(R)}}},[(t==null?void 0:t.id)&&((e=t.tab)===null||e===void 0?void 0:e.id)]),!n||!n.length)return null;const E=Zx(),k=(P,z)=>{p==null||p(z.id,P.id)},D=(P,z)=>{var M;(P.id!==(t==null?void 0:t.id)||z.id!==((M=t==null?void 0:t.tab)===null||M===void 0?void 0:M.id))&&(l==null||l(z.id,P.id))},O=(P,z,M)=>{E.hide(),d==null||d(P,z.id,M)},H=(P,z,M)=>{P.preventDefault(),E.show(bM(P),()=>pe.createElement(Vc,{role:"menu",onClick:(W,I)=>O(I,z,M),data:s}))},V=(P,z)=>{P.preventDefault();const M=o||s;E.show(bM(P),()=>pe.createElement(Vc,{role:"menu",onClick:(W,I)=>O(I,z),data:M}))},X=(P,z)=>{var M;const{target:W}=P,I=(M=z.data)===null||M===void 0?void 0:M[0];W.nextElementSibling&&I&&(l==null||l(I.id,z.id),W.nextElementSibling.focus())},$=(P,z,M)=>{switch(P.stopPropagation(),z.id){case mt.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:h==null||h(M.id);break;case mt.EXPLORER_TOGGLE_SAVE_GROUP:u==null||u(M.id);break;default:v==null||v(z,M.id);break}};return pe.createElement(dD,{ref:S,isShowShadow:!0},pe.createElement("div",{className:Q2,ref:C,"data-content":a.id},n.map((P,z)=>{var M;return pe.createElement(pe.Fragment,{key:z},n.length!==1&&pe.createElement("div",{className:I$e,onClick:W=>X(W,P),onContextMenu:W=>V(W,P),key:z},Vt("sidebar.explore.openEditor.group","Group",(z+1).toString()),i&&pe.createElement(o2,{data:i,onClick:(W,I)=>$(W,I,P)})),(M=P.data)===null||M===void 0?void 0:M.map(W=>{var I,R,G,Z,ee;const ne=P.id===(t==null?void 0:t.id)&&W.id===((I=t==null?void 0:t.tab)===null||I===void 0?void 0:I.id);return pe.createElement("div",{title:((R=W.data)===null||R===void 0?void 0:R.path)&&`${(G=W.data)===null||G===void 0?void 0:G.path}/${W.name}`,className:ni(e3,ne&&Qte),tabIndex:0,key:`${z}_${W.id}`,onClick:()=>D(P,W),onContextMenu:ie=>H(ie,P,W)},pe.createElement(cs,{className:N$e,onClick:()=>k(P,W),type:"close"}),pe.createElement(cs,{className:A$e,type:((Z=W.data)===null||Z===void 0?void 0:Z.icon)||W.icon}),pe.createElement("span",{className:T$e},W.name),pe.createElement("span",{className:k$e},(ee=W.data)===null||ee===void 0?void 0:ee.path))}))})))},z$e=pt.resolve($x),U$e=pt.resolve(Kx),$$e=qc(z$e,B$e,U$e);var j$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},q$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let wz=class extends Wu{constructor(){super(),this.onClick=(e,t)=>{this.emit(jg.onClick,e,t)},this.onActionsContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id;n&&this.explorerService.togglePanel(n)},this.onCollapseChange=e=>{this.emit(jg.onCollapseChange,e)},this.onToolbarClick=(e,t)=>{var n,i,s,o;const a=e.id,{NEW_FILE_COMMAND_ID:l,NEW_FOLDER_COMMAND_ID:u,REMOVE_COMMAND_ID:d,COLLAPSE_COMMAND_ID:h,EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:p,EXPLORER_TOGGLE_SAVE_ALL:v,EXPLORER_TOGGLE_VERTICAL:C}=this.builtinService.getConstants();switch(a){case l:{(i=(n=this.folderTreeController).createTreeNode)===null||i===void 0||i.call(n,Au.File);break}case u:{(o=(s=this.folderTreeController).createTreeNode)===null||o===void 0||o.call(s,Au.Folder);break}case d:{this.emit(jg.onRemovePanel,t);break}case h:{this.emit(jg.onCollapseAllFolders);break}case p:{this.emit(sa.onCloseAll);break}case v:{this.emit(sa.onSaveAll);break}case C:{this.emit(sa.onSplitEditorLayout);break}default:this.emit(jg.onPanelToolbarClick,t,a)}},this.renderFolderTree=e=>pe.createElement($$e,{panel:e}),this.activityBarService=pt.resolve(Bv),this.sidebarService=pt.resolve(Fv),this.explorerService=pt.resolve(Ub),this.folderTreeController=pt.resolve(Kx),this.builtinService=pt.resolve(ya)}initView(){const e={onClick:this.onClick,onCollapseChange:this.onCollapseChange,onActionsContextMenuClick:this.onActionsContextMenuClick,onToolbarClick:this.onToolbarClick},t=qc(this.explorerService,O$e),n=this.builtinService.getConstants().EXPLORER_ACTIVITY_ITEM;if(!n)return;const i={id:n,title:"EXPLORER",render(){return pe.createElement(t,Object.assign({},e))}},{builtInExplorerActivityItem:s,builtInExplorerFolderPanel:o,builtInExplorerHeaderToolbar:a}=this.builtinService.getModules();a&&this.explorerService.setState({headerToolBar:a}),s&&o&&(this.activityBarService.add(s,!0),this.sidebarService.add(i,!0),this.explorerService.addPanel(Object.assign(Object.assign({},o),{renderPanel:this.renderFolderTree})))}};wz=j$e([zr(),q$e("design:paramtypes",[])],wz);var K$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},G$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Y$e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};let Sz=class extends Wu{constructor(){super(),this.onContextMenu=(e,t,n)=>{const{EDITOR_MENU_CLOSE:i,EDITOR_MENU_CLOSE_OTHERS:s,EDITOR_MENU_CLOSE_SAVED:o,EDITOR_MENU_CLOSE_ALL:a}=this.builtinService.getConstants();switch(e.id){case i:this.onClose(n==null?void 0:n.id,t);break;case s:this.emit(sa.onCloseOthers,n,t);break;case o:this.emit(sa.onCloseSaved,t);break;case a:this.emit(sa.onCloseAll,t);break;default:this.emit(sa.onContextMenu,e,n,t);break}},this.onClose=(e,t)=>{this.emit(sa.onClose,e,t)},this.onSelect=(e,t)=>{this.emit(sa.onSelect,e,t)},this.onCloseGroup=e=>{this.emit(sa.onCloseAll,e)},this.onSaveGroup=e=>{this.emit(sa.onSaveAll,e)},this.onToolbarClick=(e,t)=>{this.emit(sa.onToolbarClick,e,t)},this.editService=pt.resolve(jd),this.explorerService=pt.resolve(Ub),this.builtinService=pt.resolve(ya)}initView(){const e=qc(this.editService,H$e),{builtInExplorerEditorPanel:t,builtInEditorTreeContextMenu:n,builtInEditorTreeHeaderContextMenu:i}=this.builtinService.getModules();if(t){const{groupToolbar:s}=t,o=Y$e(t,["groupToolbar"]),a=n||[],l=i||[];this.explorerService.addPanel(Object.assign(Object.assign({},o),{renderPanel:u=>pe.createElement(e,{panel:u,contextMenu:a,headerContextMenu:l,groupToolbar:s,onClose:this.onClose,onSelect:this.onSelect,onCloseGroup:this.onCloseGroup,onSaveGroup:this.onSaveGroup,onContextMenu:this.onContextMenu,onToolbarClick:this.onToolbarClick})}))}}};Sz=K$e([zr(),G$e("design:paramtypes",[])],Sz);var Z$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},X$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Lz=class extends Wu{constructor(){super(),this.onClick=e=>{},this.explorerService=pt.resolve(Ub),this.builtinService=pt.resolve(ya)}initView(){const{builtInExplorerOutlinePanel:e}=this.builtinService.getModules();e&&this.explorerService.addPanel(e)}};Lz=Z$e([zr(),X$e("design:paramtypes",[])],Lz);const Q$e=si(Ht(Ni("search"),"treeNode"),"empty"),J$e=si(Ht(Ni("search"),"treeNode"),"match"),eje=si(Ht(Ni("search"),"treeNode"),"delete"),tje=si(Ht(Ni("search"),"treeNode"),"replace"),nje=Ht(Ni("search"),"tree"),ije=r=>{const{data:e=[],onSelect:t,renderTitle:n}=r;return pe.createElement(dF,{draggable:!1,className:nje,data:e,renderTitle:n,onSelect:t,onRightClick:i=>i.preventDefault()})},rje=we.memo(ije),sje=({value:r="",replaceValue:e,searchAddons:t,replaceAddons:n,validationInfo:i,headerToolBar:s,result:o,toggleAddon:a,onResultClick:l,validateValue:u,setValidateInfo:d,onSearch:h,getSearchIndex:p,setSearchValue:v,setReplaceValue:C,onChange:S,toggleMode:E})=>{const k=($,P)=>{console.log("onClick:",$,P)},D=($=[])=>{const[P,z]=$;v==null||v(P),C==null||C(z),S==null||S(P||"",z||"")},O=$=>{E==null||E($)},H=($,P,z)=>{const{name:M=""}=$;if(!z)return M;const W=p?p(M,r):-1,I=M.substr(0,W),R=M.substr(W,r.length),G=M.substr(W+r.length);return W>-1?pe.createElement("span",null,I,pe.createElement("span",{className:ni(J$e,e&&eje)},R),e&&pe.createElement("span",{className:tje},e),G):M},V=($=[])=>{const[P,z]=$;u==null||u(P||"",M=>{M?d==null||d({type:"error",text:M.message}):h==null||h(P||"",z||"")})},X=$=>{$.isLeaf&&(l==null||l($,o))};return pe.createElement("div",{className:Ni("search-pane","sidebar")},pe.createElement(phe,{title:Vt("sidebar.search.title","Search"),toolbar:pe.createElement(o2,{data:s||[],onClick:k})}),pe.createElement(mhe,null,pe.createElement(Yae,{values:[r,e],addons:[t,n],validationInfo:i,onChange:D,onSearch:V,onAddonClick:a,onButtonClick:O}),r&&o.length===0?pe.createElement("div",{className:Q$e},""):pe.createElement(rje,{data:o,renderTitle:H,onSelect:X})))};var oje=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},aje=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Ez=class extends Wu{constructor(){super(),this.validateValue=(e,t)=>{const{isRegex:n}=this.searchService.getState();if(n)try{return new RegExp(e),t()}catch(i){if(i instanceof Error)return t(i)}return t()},this.getSearchIndex=(e,t="")=>{let n=-1;const{isCaseSensitive:i,isWholeWords:s,isRegex:o}=this.searchService.getState(),a=i,l=s,u=i&&s,d=!i&&!s;try{if(o)a&&(n=e.search(new RegExp(t))),l&&(n=e.search(new RegExp("\\b"+t+"\\b","i"))),u&&(n=e.search(new RegExp("\\b"+t+"\\b"))),d&&(n=e.toLowerCase().search(new RegExp(t,"i")));else{if(a&&(n=e.indexOf(t)),l){const h=new RegExp("\\b"+(t==null?void 0:t.toLowerCase())+"\\b");n=e.toLowerCase().search(h)}u&&(n=e.search(new RegExp("\\b"+t+"\\b"))),d&&(n=e.toLowerCase().indexOf(t==null?void 0:t.toLowerCase()))}}catch(h){console.error(h)}return n},this.setValidateInfo=e=>{this.searchService.setValidateInfo(e)},this.setSearchValue=e=>{this.searchService.setSearchValue(e)},this.setReplaceValue=e=>{this.searchService.setReplaceValue(e)},this.toggleAddon=e=>{const t=e==null?void 0:e.id,{SEARCH_CASE_SENSITIVE_COMMAND_ID:n,SEARCH_WHOLE_WORD_COMMAND_ID:i,SEARCH_REGULAR_EXPRESSION_COMMAND_ID:s,SEARCH_PRESERVE_CASE_COMMAND_ID:o,SEARCH_REPLACE_ALL_COMMAND_ID:a}=this.builtinService.getConstants();switch(t){case n:{this.searchService.toggleCaseSensitive();break}case i:{this.searchService.toggleWholeWord();break}case s:{this.searchService.toggleRegex();break}case o:{this.searchService.togglePreserveCase();break}case a:{this.emit(_m.onReplaceAll);break}default:console.log("no addon")}},this.toggleMode=e=>{this.searchService.toggleMode(e)},this.onChange=(e="",t="")=>{this.emit(_m.onChange,e,t)},this.onSearch=(e="",t="")=>{const{isRegex:n,isCaseSensitive:i,isWholeWords:s,preserveCase:o}=this.searchService.getState();this.emit(_m.onSearch,e,t,{isRegex:n,isCaseSensitive:i,isWholeWords:s,preserveCase:o})},this.onResultClick=(e,t)=>{this.emit(_m.onResultClick,e,t)},this.activityBarService=pt.resolve(Bv),this.sidebarService=pt.resolve(Fv),this.searchService=pt.resolve(QN),this.builtinService=pt.resolve(ya)}initView(){const{builtInSearchActivityItem:e,builtInHeaderToolbar:t,builtInSearchAddons:n,builtInReplaceAddons:i}=this.builtinService.getModules();if(e){const s=qc(this.searchService,sje,this),o={id:e.id,title:"SEARCH",render(){return pe.createElement(s,null)}};this.searchService.setState({headerToolBar:t||[],searchAddons:n||[],replaceAddons:i||[]}),this.sidebarService.add(o),this.activityBarService.add(e)}}};Ez=oje([zr(),aje("design:paramtypes",[])],Ez);class qw extends ep{constructor(){super({id:qw.ID,label:qw.LABEL,title:qw.LABEL,alias:"Open Settings (JSON)",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:po($c.CtrlCmd|Yn.Comma)}}),this.settingsService=pt.resolve(zS)}run(e){this.settingsService.openSettingsInEditor()}}qw.ID=mt.ACTION_QUICK_ACCESS_SETTINGS;qw.LABEL=L("quickAccessSettings.label","Open Settings (JSON)");class Kw extends ep{constructor(){super({id:Kw.ID,label:Kw.LABEL,title:Kw.LABEL,alias:"Select Display Language",precondition:void 0,f1:!0,keybinding:{when:void 0,primary:$c.CtrlCmd|$c.Shift|Yn.KeyL}})}get localeService(){return pt.resolve(Am)}run(e){const t=e.get(Wf),n=this.localeService.getLocales(),i=this.localeService.getCurrentLocale(),s=n.map(l=>({id:l.id,label:l.name,description:l.description}));let o;const a=(l,u)=>{o&&clearTimeout(o),o=window.setTimeout(()=>{o=void 0,l&&l.id&&this.localeService.setCurrentLocale(l.id)},u?0:200)};return new Promise(l=>{let u=!1;const d=s.findIndex(p=>p.id===(i==null?void 0:i.id)),h=t.createQuickPick();h.items=s,h.placeholder=Vt("locale.select","Select Display Language (Up/Down Keys to Preview)"),h.activeItems=[s[d]],h.canSelectMany=!1,h.onDidAccept(p=>{const v=h.activeItems[0];v&&a(v,!0),u=!0,h.hide(),l()}),h.onDidHide(()=>{u||(a(i,!0),l())}),h.show()})}}Kw.ID=mt.ACTION_SELECT_LOCALE;Kw.LABEL=Vt("select.locale","Select Display Language");class dv extends ep{constructor(){super({id:dv.ID,alias:dv.DESC,title:{value:dv.LABEL,original:dv.DESC},f1:!0,label:dv.LABEL,keybinding:{weight:Pf.BuiltinExtension,when:void 0,primary:$c.CtrlCmd|Yn.KeyA}}),this.editorService=pt.resolve(jd)}selectEditorAll(){const e=this.editorService.editorInstance;e&&(e.focus(),e.setSelection(e.getModel().getFullModelRange()))}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const i=t[0]||document.activeElement;i&&this.isTextdom(i)&&!i.className.includes("monaco")?i.select():this.selectEditorAll()}}dv.ID=mt.ACTION_QUICK_SELECT_ALL;dv.DESC="Select All";dv.LABEL=Vt("menu.selectAll","Select All");class hv extends ep{constructor(){super({id:hv.ID,title:{value:hv.LABEL,original:hv.DESC},label:hv.LABEL,alias:hv.DESC,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:$c.Alt|$c.Shift|Yn.PageUp}}),this.editorService=pt.resolve(jd)}run(){var e;(e=this.editorService.editorInstance)===null||e===void 0||e.getAction(mt.ACTION_QUICK_COPY_LINE_UP).run()}}hv.ID=mt.ACTION_QUICK_COPY_LINE_UP;hv.LABEL=Vt("menu.copyLineUp","Copy Line Up");hv.DESC="Copy Line Up";class fv extends ep{constructor(){super({id:fv.ID,title:{value:fv.LABEL,original:fv.DESC},label:fv.LABEL,alias:fv.DESC,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:$c.CtrlCmd|Yn.KeyZ}}),this.editorService=pt.resolve(jd)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const i=t[0]||document.activeElement;if(i&&this.isTextdom(i)&&!i.className.includes("monaco"))document.execCommand("undo");else{const s=this.editorService.editorInstance;if(s){const o=this.editorService.getState().current;if(o){const a=this.editorService.getTabById(o.activeTab,o.id);s==null||s.focus(),ac.getModel(vC.parse(a.id.toString())).undo()}}}}}fv.ID=mt.ACTION_QUICK_UNDO;fv.LABEL=Vt("menu.undo","Undo");fv.DESC="Undo";class gv extends ep{constructor(){super({id:gv.ID,title:{value:gv.LABEL,original:gv.DESC},label:gv.LABEL,alias:gv.DESC,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:$c.CtrlCmd|$c.Shift|Yn.KeyZ}}),this.editorService=pt.resolve(jd)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const i=t[0]||document.activeElement;if(i&&this.isTextdom(i)&&!i.className.includes("monaco"))document.execCommand("redo");else{const s=this.editorService.editorInstance;if(s){const o=this.editorService.getState().current;if(o){const a=this.editorService.getTabById(o.activeTab,o.id);s==null||s.focus(),ac.getModel(vC.parse(a.id.toString())).redo()}}}}}gv.ID=mt.ACTION_QUICK_REDO;gv.LABEL=Vt("menu.redo","Redo");gv.DESC="Redo";class pv extends ep{constructor(){super({id:pv.ID,title:{value:pv.LABEL,original:pv.DESC},label:pv.LABEL,alias:pv.DESC,f1:!0,keybinding:{when:void 0,weight:Pf.WorkbenchContrib,primary:$c.CtrlCmd|Yn.KeyN}}),this.folderTreeController=pt.resolve(Kx)}run(){var e,t;(t=(e=this.folderTreeController).createTreeNode)===null||t===void 0||t.call(e,Au.File)}}pv.ID=mt.ACTION_QUICK_CREATE_FILE;pv.LABEL=Vt("menu.newFile","New File");pv.DESC="New File";var lje=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},uje=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let xz=class extends Wu{constructor(){super(),this.extensionService=pt.resolve(e2),this.builtinService=pt.resolve(ya)}initView(){const{quickAcessViewAction:e,quickSelectColorThemeAction:t,quickAccessSettingsAction:n,quickSelectLocaleAction:i,quickTogglePanelAction:s,quickSelectAllAction:o,quickCopyLineUpAction:a,quickUndoAction:l,quickRedoAction:u,quickCreateFileAction:d}=this.builtinService.getModules();[[e,Z2],[t,yC],[n,qw],[i,Kw],[G2,vm],[s,bm],[o,dv],[a,hv],[l,fv],[u,gv],[d,pv]].forEach(([h,p])=>{h&&this.extensionService.registerAction(p)})}};xz=lje([zr(),uje("design:paramtypes",[])],xz);const gL=Ni(ahe),cje=Ht(gL,"container"),dje=Ht(gL,"normal"),hje=Ht(gL,"global"),t3=Ht(gL,"item"),fje=si(t3,"checked"),gje=si(t3,"disabled"),pje=Ht(gL,"label"),mje=Ht(gL,"indicator");function Dhe(r){const{checked:e=!1,disabled:t=!1,title:n="",data:i={},render:s,icon:o,id:a,onClick:l,contextMenu:u=[],className:d,onContextMenuClick:h}=r,v=n2({render:()=>pe.createElement(Vc,{onClick:C,role:"menu",data:u.map(k=>{if(k.id){const D=hm.queryGlobalKeybinding(k.id.toString());D&&(k.keybinding=hm.convertSimpleKeybindingToString(D))}return k})})}),C=(k,D)=>{h==null||h(k,D),v==null||v.hide()},S=function(k){l&&l(r.id,r),u.length>0&&(v==null||v.show({x:k.pageX,y:k.pageY}))},E=pe.createElement(cs,{type:o,className:pje,title:n},(s==null?void 0:s())||null);return pe.createElement("li",{id:a.toString(),onClick:S,className:ni(d,t3,e?fje:"",t?gje:""),"data-id":i.id},E,e?pe.createElement("div",{className:mje}):null)}function Ihe(r){const{data:e=[],contextMenu:t=[],selected:n,onClick:i,onChange:s,onContextMenuClick:o}=r,a=(S,E)=>{i&&i(S,E),s&&E.type!=="global"&&s(n,S)},l=e.filter(S=>S.type!=="global"&&!S.hidden),u=e.filter(S=>S.type==="global"&&!S.hidden),d=(S,E)=>pe.createElement(Dhe,Object.assign({key:S.id},S,{onContextMenuClick:o,onClick:a,"data-index":E,checked:n===S.id})),p=n2({render:()=>pe.createElement(Vc,{role:"menu",onClick:v,data:t})}),v=we.useCallback((S,E)=>{o==null||o(S,E),p==null||p.hide()},[t]),C=S=>{if(S.preventDefault(),S.stopPropagation(),!p)return;const k=document.elementsFromPoint(S.pageX,S.pageY).find(D=>D.classList.contains(t3));if(k){const D=k.getBoundingClientRect(),O=t.concat(),H=t.find(V=>V.id===(k==null?void 0:k.id));H&&O.unshift({id:k.id,icon:"check",name:H.name},{type:"divider"}),p.show({x:D.x+D.width/2,y:D.y+D.height},()=>pe.createElement(Vc,{role:"menu",onClick:v,data:O}))}else p.show({x:S.pageX,y:S.pageY})};return pe.createElement("div",{className:gL,onContextMenu:C,id:ahe},pe.createElement("div",{className:cje},pe.createElement(dD,{className:dje},pe.createElement("ul",null,l.map(d))),pe.createElement("ul",{className:hje},u.map(d))))}const _je=pt.resolve(Bv),vje=pt.resolve(xP),bje=qc(_je,Ihe,vje),n3=Ni("statusBar"),Cje=Ht(n3,"left-items"),yje=Ht(n3,"right-items"),wje=Ht(n3,"item");function Sje(r,e){return r.sortIndex!==void 0&&e.sortIndex!==void 0?r.sortIndex-e.sortIndex:0}var Lje=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function The(r){const{className:e,onClick:t,id:n,name:i,data:s,render:o,style:a,role:l,title:u}=r,d=Lje(r,["className","onClick","id","name","data","render","style","role","title"]),h=ni(wje,e),p={onClick:function(C){t==null||t(C,r)}},v=Yw(d);return pe.createElement("div",Object.assign({className:h,style:a,role:l,title:u,id:n.toString()},v),pe.createElement("a",Object.assign({tabIndex:-1,title:i},p),o?o(r):i))}function khe(r){const{leftItems:e=[],contextMenu:t=[],onContextMenuClick:n,onClick:i,rightItems:s=[]}=r;let o;const a=we.useCallback((d,h)=>{n==null||n(d,h),o==null||o.dispose()},[t]),l=()=>pe.createElement(Vc,{role:"menu",onClick:a,data:t});we.useEffect(()=>(t.length>0&&(o=PP({anchor:kE(`#${ste}`),render:l})),function(){o==null||o.dispose()}));const u=d=>d.sort(Sje).map(h=>pe.createElement(The,Object.assign({key:h.id},h,{onClick:Nz(h.onClick,i)})));return pe.createElement("div",{className:n3,id:ste},pe.createElement("div",{className:Cje},u(e)),pe.createElement("div",{className:yje},u(s)))}const Eje=pt.resolve(Wv),xje=pt.resolve(TP),Dje=qc(Eje,khe,xje),i3=Ni("panel"),Ije=Ht(i3,"header"),Tje=Ht(i3,"toolbar"),kje=Ht(i3,"container");function Nhe(r){var e;const{data:t,current:n,toolbox:i,onTabChange:s,onToolbarClick:o,onClose:a}=r;let l=i||[];n&&n.toolbox&&(l=n.toolbox.concat(l));const u=typeof(n==null?void 0:n.renderPane)=="function"?(e=n==null?void 0:n.renderPane)===null||e===void 0?void 0:e.call(n,n):n==null?void 0:n.renderPane,d=t==null?void 0:t.sort((h,p)=>h.sortIndex&&p.sortIndex?h.sortIndex-p.sortIndex:0);return pe.createElement("div",{className:i3},pe.createElement("div",{className:Ije},pe.createElement(Cj,{activeTab:n==null?void 0:n.id,data:d,onSelectTab:s,onCloseTab:a}),pe.createElement(s2,{className:Tje,data:l,onClick:o})),pe.createElement("div",{className:kje,tabIndex:0},u))}const Nje=pt.resolve(HS),Aje=pt.resolve(IP),Oje=qc(Nje,Nhe,Aje),Ahe=Ni("auxiliaryBar"),Mje=Ht(Ahe,"container"),Ohe=Ht(Ahe,"tabs"),Mhe=Ht(Ohe,"tab"),Rje=si(Mhe,"active");function Pje({children:r}){return pe.createElement("div",{className:Mje},r)}function Fje({mode:r,data:e,current:t,onClick:n}){return r==="default"?null:pe.createElement("ul",{className:Ohe},e==null?void 0:e.map(i=>pe.createElement("li",{key:i.key,className:ni(Mhe,t===i.key&&Rje),onClick:()=>n==null?void 0:n(i.key)},i.title)))}const Rhe=pt.resolve(Ux),Bje=pt.resolve(DP),Wje=qc(Rhe,Pje),Vje=qc(Rhe,Fje,Bje),Hje=Ni("mainBench"),r3=Ni("workbench"),zje=Ni("compositeBar"),Uje=ni(MP,cne()),$je=si(r3,"with-horizontal-menuBar"),jje=si(r3,"with-hidden-statusBar"),qje=Ht(r3,"display-activityBar"),Kje=pt.resolve(kP),Gje=pt.resolve(Nh);function Phe(r){const{activityBar:e,auxiliaryBar:t,menuBar:n,panel:i,sidebar:s,statusBar:o,onPaneSizeChange:a,onWorkbenchDidMount:l,onHorizontalPaneSizeChange:u,splitPanePos:d,horizontalSplitPanePos:h}=r,p=()=>i.hidden?["100%",0]:i.panelMaximized?[0,"100%"]:h,v=()=>!s.hidden&&!t.hidden?d:s.hidden?t.hidden?[0,"100%",0]:[0,"auto",d[2]]:[d[0],"auto",0],C=()=>!s.hidden&&!t.hidden?!0:s.hidden?t.hidden?!1:[!1,!0]:[!0,!1],S=V=>{const X=[];X[0]=s.hidden?Number(d[0]):V[0],X[2]=t.hidden?Number(d[2]):V[2],X[1]=V.reduce(($,P)=>$+P,0)-X[0]-X[2],a==null||a(X)},E=!n.hidden&&n.mode===Bc.vertical,k=!n.hidden&&n.mode===Bc.horizontal,D=k?$je:null,O=o.hidden?jje:null,H=ni(r3,D,O);return we.useEffect(()=>{l==null||l()},[]),pe.createElement("div",{id:yq,className:Uje,tabIndex:0},pe.createElement("div",{className:H},pe.createElement(HT,{visible:k},pe.createElement(Zte,{mode:Bc.horizontal})),pe.createElement("div",{className:Hje},pe.createElement("div",{className:zje},pe.createElement(HT,{visible:E},pe.createElement(Zte,{mode:Bc.vertical})),pe.createElement(HT,{visible:!e.hidden,className:qje},pe.createElement(bje,null))),pe.createElement(Dk,{sizes:v(),split:"vertical",showSashes:C(),onChange:S},pe.createElement(Sb,{minSize:170,maxSize:"80%"},pe.createElement(MUe,null)),pe.createElement(Dk,{sizes:p(),showSashes:!i.hidden&&!i.panelMaximized,allowResize:[!0,!1],split:"horizontal",onChange:u},pe.createElement(Sb,{minSize:"10%",maxSize:"80%"},pe.createElement(LUe,null)),pe.createElement(Oje,null)),pe.createElement(Sb,{minSize:100,maxSize:"80%"},pe.createElement(Wje,null))),pe.createElement(Vje,null))),pe.createElement(HT,{visible:!o.hidden},pe.createElement(Dje,null)))}const Yje=qc(Gje,Phe,Kje),Zje=pt.resolve(Am),Xje=pt.resolve(Nh),Qje=pt.resolve(Bv),Jje=pt.resolve(Ux),eqe=pt.resolve(Ub),tqe=pt.resolve($x),nqe=pt.resolve(SP),iqe=pt.resolve(QN),rqe=pt.resolve(Fv),sqe=pt.resolve(UC),oqe=pt.resolve(jd),aqe=pt.resolve(Wv),lqe=pt.resolve(HS),uqe=pt.resolve(jx),cqe=pt.resolve(JN),dqe=pt.resolve(BS),hqe=pt.resolve(zS),fqe=pt.resolve(ya),gqe=pt.resolve(e2),pqe=pt.resolve(Pv),Un=Object.freeze(Object.defineProperty({__proto__:null,ActivityBar:Ihe,ActivityBarItem:Dhe,get ActivityBarService(){return Bv},get AuxiliaryBarService(){return Ux},BuiltInColorTheme:KT,get BuiltinService(){return ya},get ColorThemeService(){return BS},DEFAULT_THEME_CLASS_NAME:hM,Editor:Eq,EditorGroup:fhe,get EditorService(){return jd},get EditorTreeService(){return SP},get ExplorerService(){return Ub},get ExtensionService(){return e2},get FolderTreeService(){return $x},get LayoutService(){return Nh},get LocaleService(){return Am},MenuBar:Che,get MenuBarService(){return UC},get NotificationService(){return jx},Panel:Nhe,get PanelService(){return HS},get ProblemsService(){return JN},get SearchService(){return QN},get SettingsService(){return zS},Sidebar:_he,get SidebarService(){return Fv},StatusBar:khe,get StatusBarService(){return Wv},StatusItem:The,Workbench:Phe,activityBar:Qje,auxiliaryBar:Jje,builtin:fqe,colorTheme:dqe,component:ZRe,editor:oqe,editorTree:nqe,event:Pfe,explorer:eqe,extension:gqe,folderTree:tqe,i18n:Zje,layout:Xje,localize:Vt,menuBar:sqe,model:HHe,monaco:JRe,monacoService:pqe,notification:uqe,panel:lqe,problems:cqe,react:Bfe,search:iqe,settings:hqe,sidebar:rqe,statusBar:aqe},Symbol.toStringTag,{value:"Module"})),mqe={id:"ExtendsFolderTree",name:"Extends FolderTree",activate(){Un.folderTree.onRename(r=>{Un.folderTree.update({id:r,isEditable:!0})}),Un.folderTree.onUpdateFileName(r=>{const{id:e,name:t,location:n}=r;if(t){const i=(n==null?void 0:n.split("/"))||[];i[i.length-1]=t;const s=i.join("/");Un.folderTree.update(Object.assign(Object.assign({},r),{id:e,location:s,isEditable:!1}));const o=Un.editor.getGroupIdByTab(e.toString());if(!!o||o===0){const l=Un.editor.getTabById(e.toString(),o),u={id:e.toString(),name:t},d=l==null?void 0:l.data;d&&d.path&&(u.data=Object.assign(Object.assign({},d),{path:s})),Un.editor.updateTab(u)}}else{const i=Un.folderTree.get(e);i!=null&&i.name?Un.folderTree.update({id:e,isEditable:!1}):Un.folderTree.remove(e)}}),Un.folderTree.onExpandKeys(r=>{Un.folderTree.setExpandKeys(r)})},dispose(){}},_qe={id:"ExtendsActivityBar",name:"Extend The Default ActivityBar",activate(r){Un.activityBar.onChange((e,t)=>{if(t!==e){Un.activityBar.setActive(t),Un.sidebar.setActive(t);const{sidebar:n}=Un.layout.getState();n.hidden&&r.executeCommand(vm.ID,t)}else r.executeCommand(vm.ID,t)})},dispose(){}},vqe={id:"ExtendsPanel",name:"Extends Panel",activate(r){Un.panel.onTabClose(e=>{const{data:t=[],current:n}=Un.panel.getState();if((n==null?void 0:n.id)===e){const i=t.findIndex(a=>a.id===e),s=i===t.length-1?t.length-2:i+1,o=t[s];o&&Un.panel.open(o)}Un.panel.remove(e)})},dispose(){}},bqe=function(r){Un.explorer.removePanel(r.id)},Cqe={id:"ExtendsExplorer",name:"Extends Explorer",activate(){Un.explorer.onRemovePanel(bqe)},dispose(){}},yqe={id:"ExtendsEditorTree",name:"Extends Editor Tree",dispose(){},activate(){Un.editorTree.onSelect((r,e)=>{Un.editor.setActive(e,r)}),Un.editorTree.onClose((r,e)=>{Un.editor.closeTab(r,e)}),Un.editorTree.onCloseOthers((r,e)=>{Un.editor.closeOther(r,e)}),Un.editorTree.onCloseAll(r=>{if(r)Un.editor.closeAll(r);else{const{groups:e}=Un.editor.getState();e==null||e.forEach(t=>{Un.editor.closeAll(t.id)})}})}},wqe="theme-defaults",Sqe="%displayName%",Lqe="%description%",Eqe=["Themes"],xqe="1.0.0",Dqe="vscode",Iqe="MIT",Tqe={vscode:"*"},kqe={themes:[{id:"Default Dark+",label:"Dark+ (default dark)",uiTheme:"vs-dark",path:"./themes/dark_plus.json"},{id:"Default Light+",label:"Light+ (default light)",uiTheme:"vs",path:"./themes/light_plus.json"},{id:"Visual Studio Dark",label:"Dark (Visual Studio)",uiTheme:"vs-dark",path:"./themes/dark_vs.json"},{id:"Visual Studio Light",label:"Light (Visual Studio)",uiTheme:"vs",path:"./themes/light_vs.json"},{id:"Default High Contrast",label:"High Contrast",uiTheme:"hc-black",path:"./themes/hc_black.json"}],iconThemes:[{id:"vs-minimal",label:"Minimal (Visual Studio Code)",path:"./fileicons/vs_minimal-icon-theme.json"}]},Nqe={name:wqe,displayName:Sqe,description:Lqe,categories:Eqe,version:xqe,publisher:Dqe,license:Iqe,engines:Tqe,contributes:kqe},Aqe="vscode://schemas/color-theme",Oqe="Dark Default Colors",Mqe={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#1E1E1E","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editor.selectionHighlightBackground":"#ADD6FF26","editorGroupHeader.tabsBackground":"#252526","editorIndentGuide.activeBackground":"#707070","editorIndentGuide.background":"#404040","icon.foreground":"#C5C5C5","input.placeholderForeground":"#A6A6A6","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#5A1D1D","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#063B49","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#352A05","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#094771","list.dropBackground":"#383B3D","list.focusOutline":"#007FD4","list.hoverBackground":"#2A2D2E","list.inactiveSelectionBackground":"#37373D","menu.background":"#252526","menu.foreground":"#CCCCCC","menu.selectionBackground":"#094771","menu.separatorBackground":"#BBBBBB","minimapSlider.activeBackground":"#bfbfbf66","minimapSlider.background":"#79797980","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#393939","panelTitle.activeForeground":"#E7E7E7","panelTitle.inactiveForeground":"#e7e7e799","problemsErrorIcon.foreground":"#F48771","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#CCA700","sash.hoverBorder":"#007FD4","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#ccc3","sideBarTitle.foreground":"#BBBBBB","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#1E1E1E","tab.activeForeground":"#fff","tab.border":"#252526","tab.inactiveBackground":"#2d2d2d","tab.inactiveForeground":"#ffffff80","tree.indentGuidesStroke":"#585858"},Rqe=!0,Pqe={$schema:Aqe,name:Oqe,colors:Mqe,semanticHighlighting:Rqe},Fqe="vscode://schemas/color-theme",Bqe="Light Default Colors",Wqe={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#FFFFFF","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#000000","editor.inactiveSelectionBackground":"#E5EBF1","editor.selectionHighlightBackground":"#ADD6FF80","editorIndentGuide.activeBackground":"#939393","editorIndentGuide.background":"#D3D3D3","editorSuggestWidget.background":"#F3F3F3","icon.foreground":"#424242","input.placeholderForeground":"#767676","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#F2DEDE","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#D6ECF2","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#F6F5D2","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#0060C0","list.focusOutline":"#0090F1","list.hoverBackground":"#E8E8E8","list.inactiveSelectionBackground":"#E4E6F1","menu.selectionBackground":"#0060C0","menu.separatorBackground":"#888888","minimapSlider.activeBackground":"#00000099","minimapSlider.background":"#64646480","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#fff","panelTitle.activeForeground":"#424242","panelTitle.inactiveForeground":"#424242bf","problemsErrorIcon.foreground":"#E51400","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#BF8803","sash.hoverBorder":"#0090F1","searchEditor.textInputBorder":"#CECECE","settings.numberInputBorder":"#CECECE","settings.textInputBorder":"#CECECE","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#61616130","sideBarTitle.foreground":"#6F6F6F","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#fffffe","tab.activeForeground":"#333333","tab.border":"#f3f3f3","tab.inactiveBackground":"#ececec","tab.inactiveForeground":"#333333b3","tree.indentGuidesStroke":"#a9a9a9"},Vqe=!0,Hqe={$schema:Fqe,name:Bqe,colors:Wqe,semanticHighlighting:Vqe},zqe="vscode://schemas/color-theme",Uqe="High Contrast Default Colors",$qe={"editor.background":"#000000","editor.foreground":"#FFFFFF","editorIndentGuide.activeBackground":"#FFFFFF","editorIndentGuide.background":"#FFFFFF","sash.hoverBorder":"#F38518","sideBarTitle.foreground":"#FFFFFF","statusBarItem.remoteBackground":"#00000000","tree.indentGuidesStroke":"#a9a9a9"},jqe=[{settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#7ca668"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#b46695"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold"}},{scope:"markup.heading",settings:{foreground:"#6796e6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{name:"brackets of XML/HTML tags",scope:["punctuation.definition.tag"],settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#ffffff"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#d4d4d4"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:"support.function.git-rebase",settings:{foreground:"#d4d4d4"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"coloring of the TS this",scope:"variable.language.this",settings:{foreground:"#569cd6"}}],qqe=!0,Kqe={$schema:zqe,name:Uqe,colors:$qe,settings:jqe,semanticHighlighting:qqe},Gqe="vscode://schemas/color-theme",Yqe="Dark+ (default dark)",Zqe="./dark_vs.json",Xqe=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#51B6C4"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"entity.name.label",settings:{foreground:"#C8C8C8"}}],Qqe={$schema:Gqe,name:Yqe,include:Zqe,tokenColors:Xqe},Jqe="vscode://schemas/color-theme",eKe="Dark (Visual Studio)",tKe="./dark_defaults.json",nKe=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#569cd6"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}}],iKe={$schema:Jqe,name:eKe,include:tKe,tokenColors:nKe},rKe="vscode://schemas/color-theme",sKe="Light+ (default light)",oKe="./light_vs.json",aKe=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#795E26"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#267f99"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#267f99"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#AF00DB"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#001080"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#328267"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#001080"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#d16969"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#811f3f"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#000000"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#ff0000"}},{scope:"constant.character",settings:{foreground:"#0000ff"}},{scope:"constant.character.escape",settings:{foreground:"#ff0000"}},{scope:"entity.name.label",settings:{foreground:"#000000"}}],lKe={$schema:rKe,name:sKe,include:oKe,tokenColors:aKe},uKe="vscode://schemas/color-theme",cKe="Light (Visual Studio)",dKe="./light_defaults.json",hKe=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#000000ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#008000"}},{scope:"constant.language",settings:{foreground:"#0000ff"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#098658"}},{scope:"constant.regexp",settings:{foreground:"#811f3f"}},{name:"css tags in selectors, xml tags",scope:"entity.name.tag",settings:{foreground:"#800000"}},{scope:"entity.name.selector",settings:{foreground:"#800000"}},{scope:"entity.other.attribute-name",settings:{foreground:"#ff0000"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#800000"}},{scope:"invalid",settings:{foreground:"#cd3131"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#000080"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#800000"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#098658"}},{scope:"markup.deleted",settings:{foreground:"#a31515"}},{scope:"markup.changed",settings:{foreground:"#0451a5"}},{scope:["punctuation.definition.quote.begin.markdown","punctuation.definition.list.begin.markdown"],settings:{foreground:"#0451a5"}},{scope:"markup.inline.raw",settings:{foreground:"#800000"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#800000"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#0000ff"}},{scope:"meta.preprocessor.string",settings:{foreground:"#a31515"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#098658"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#0451a5"}},{scope:"storage",settings:{foreground:"#0000ff"}},{scope:"storage.type",settings:{foreground:"#0000ff"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#0000ff"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#a31515"}},{scope:["string.comment.buffered.block.pug","string.quoted.pug","string.interpolated.pug","string.unquoted.plain.in.yaml","string.unquoted.plain.out.yaml","string.unquoted.block.yaml","string.quoted.single.yaml","string.quoted.double.xml","string.quoted.single.xml","string.unquoted.cdata.xml","string.quoted.double.html","string.quoted.single.html","string.unquoted.html","string.quoted.single.handlebars","string.quoted.double.handlebars"],settings:{foreground:"#0000ff"}},{scope:"string.regexp",settings:{foreground:"#811f3f"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#0000ff"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#000000"}},{scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#ff0000"}},{scope:["support.type.property-name.json"],settings:{foreground:"#0451a5"}},{scope:"keyword",settings:{foreground:"#0000ff"}},{scope:"keyword.control",settings:{foreground:"#0000ff"}},{scope:"keyword.operator",settings:{foreground:"#000000"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#0000ff"}},{scope:"keyword.other.unit",settings:{foreground:"#098658"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#800000"}},{scope:"support.function.git-rebase",settings:{foreground:"#0451a5"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#098658"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#000000"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#0000ff"}}],fKe={$schema:uKe,name:cKe,include:dKe,tokenColors:hKe},gKe="vscode://schemas/color-theme",pKe="Dark High Contrast",mKe="./hc_black_defaults.json",_Ke={"editor.selectionBackground":"#FFFFFF","selection.background":"#008000","statusBarItem.remoteBackground":"#00000000"},vKe=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.name.scope-resolution","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"HC Search Editor context line override",scope:"meta.resultLinePrefix.contextLinePrefix.search",settings:{foreground:"#CBEDCB"}}],bKe={$schema:gKe,name:pKe,include:mKe,colors:_Ke,tokenColors:vKe};var M9;const Fhe=Nqe,Bhe=Pqe,Whe=Hqe,CKe=Kqe,Vhe=Qqe;Object.assign(Vhe,Bhe);const Hhe=iKe;Object.assign(Hhe,Bhe);const zhe=lKe;Object.assign(zhe,Whe);const Uhe=fKe;Object.assign(Uhe,Whe);const $he=bKe;Object.assign($he,CKe);const Jv=((M9=Fhe.contributes)===null||M9===void 0?void 0:M9.themes)||[],yKe=Jv[0],wKe=Jv[1],SKe=Jv[2],LKe=Jv[3],EKe=Jv[4];Jv[0]=Object.assign({},yKe,Vhe);Jv[1]=Object.assign({},wKe,zhe);Jv[2]=Object.assign({},SKe,Hhe);Jv[3]=Object.assign({},LKe,Uhe);Jv[4]=Object.assign({},EKe,$he);const xKe="theme-monokai",DKe="%displayName%",IKe="%description%",TKe="1.0.0",kKe="vscode",NKe="MIT",AKe={vscode:"*"},OKe={themes:[{id:"Monokai",label:"Monokai",uiTheme:"vs-dark",path:"./themes/monokai-color-theme.json"}]},MKe={name:xKe,displayName:DKe,description:IKe,version:TKe,publisher:kKe,license:NKe,engines:AKe,contributes:OKe},RKe="dark",PKe={"dropdown.background":"#414339","list.activeSelectionBackground":"#75715E","quickInput.list.focusBackground":"#414339","dropdown.listBackground":"#1e1f1c","list.inactiveSelectionBackground":"#414339","list.hoverBackground":"#3e3d32","list.dropBackground":"#414339","list.highlightForeground":"#f8f8f2","button.background":"#75715E","editor.background":"#272822","editor.foreground":"#f8f8f2","selection.background":"#ccccc7","editor.selectionHighlightBackground":"#575b6180","editor.selectionBackground":"#878b9180","minimap.selectionHighlight":"#878b9180","minimap.background":"#272822","editor.wordHighlightBackground":"#4a4a7680","editor.wordHighlightStrongBackground":"#6a6a9680","editor.lineHighlightBackground":"#3e3d32","editorLineNumber.activeForeground":"#c2c2bf","editorCursor.foreground":"#f8f8f0","editorWhitespace.foreground":"#464741","editorIndentGuide.background":"#464741","editorIndentGuide.activeBackground":"#767771","editorGroupHeader.tabsBackground":"#1e1f1c","editorGroup.dropBackground":"#41433980","tab.inactiveBackground":"#34352f","tab.border":"#1e1f1c","tab.inactiveForeground":"#ccccc7","tab.lastPinnedBorder":"#414339","widget.shadow":"#00000098","progressBar.background":"#75715E","badge.background":"#75715E","badge.foreground":"#f8f8f2","editorLineNumber.foreground":"#90908a","panelTitle.activeForeground":"#f8f8f2","panelTitle.activeBorder":"#75715E","panelTitle.inactiveForeground":"#75715E","panel.border":"#414339","settings.focusedRowBackground":"#4143395A","titleBar.activeBackground":"#1e1f1c","statusBar.background":"#414339","statusBar.noFolderBackground":"#414339","statusBar.debuggingBackground":"#75715E","statusBarItem.remoteBackground":"#AC6218","activityBar.background":"#272822","activityBar.foreground":"#f8f8f2","sideBar.background":"#1e1f1c","sideBarSectionHeader.background":"#272822","menu.background":"#1e1f1c","menu.foreground":"#cccccc","pickerGroup.foreground":"#75715E","input.background":"#414339","inputOption.activeBorder":"#75715E",focusBorder:"#75715E","editorWidget.background":"#1e1f1c","debugToolBar.background":"#1e1f1c","diffEditor.insertedTextBackground":"#4b661680","diffEditor.removedTextBackground":"#90274A70","inputValidation.errorBackground":"#90274A","inputValidation.errorBorder":"#f92672","inputValidation.warningBackground":"#848528","inputValidation.warningBorder":"#e2e22e","inputValidation.infoBackground":"#546190","inputValidation.infoBorder":"#819aff","editorHoverWidget.background":"#414339","editorHoverWidget.border":"#75715E","editorSuggestWidget.background":"#272822","editorSuggestWidget.border":"#75715E","editorGroup.border":"#34352f","peekView.border":"#75715E","peekViewEditor.background":"#272822","peekViewResult.background":"#1e1f1c","peekViewTitle.background":"#1e1f1c","peekViewResult.selectionBackground":"#414339","peekViewResult.matchHighlightBackground":"#75715E","peekViewEditor.matchHighlightBackground":"#75715E","terminal.ansiBlack":"#333333","terminal.ansiRed":"#C4265E","terminal.ansiGreen":"#86B42B","terminal.ansiYellow":"#B3B42B","terminal.ansiBlue":"#6A7EC8","terminal.ansiMagenta":"#8C6BC8","terminal.ansiCyan":"#56ADBC","terminal.ansiWhite":"#e3e3dd","terminal.ansiBrightBlack":"#666666","terminal.ansiBrightRed":"#f92672","terminal.ansiBrightGreen":"#A6E22E","terminal.ansiBrightYellow":"#e2e22e","terminal.ansiBrightBlue":"#819aff","terminal.ansiBrightMagenta":"#AE81FF","terminal.ansiBrightCyan":"#66D9EF","terminal.ansiBrightWhite":"#f8f8f2"},FKe=[{settings:{foreground:"#F8F8F2"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#F8F8F2"}},{name:"Comment",scope:"comment",settings:{foreground:"#88846f"}},{name:"String",scope:"string",settings:{foreground:"#E6DB74"}},{name:"Template Definition",scope:["punctuation.definition.template-expression","punctuation.section.embedded"],settings:{foreground:"#F92672"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#F8F8F2"}},{name:"Number",scope:"constant.numeric",settings:{foreground:"#AE81FF"}},{name:"Built-in constant",scope:"constant.language",settings:{foreground:"#AE81FF"}},{name:"User-defined constant",scope:"constant.character, constant.other",settings:{foreground:"#AE81FF"}},{name:"Variable",scope:"variable",settings:{fontStyle:"",foreground:"#F8F8F2"}},{name:"Keyword",scope:"keyword",settings:{foreground:"#F92672"}},{name:"Storage",scope:"storage",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Storage type",scope:"storage.type",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Class name",scope:"entity.name.type, entity.name.class, entity.name.namespace, entity.name.scope-resolution",settings:{fontStyle:"underline",foreground:"#A6E22E"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{fontStyle:"italic underline",foreground:"#A6E22E"}},{name:"Function name",scope:"entity.name.function",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Function argument",scope:"variable.parameter",settings:{fontStyle:"italic",foreground:"#FD971F"}},{name:"Tag name",scope:"entity.name.tag",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Library function",scope:"support.function",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library constant",scope:"support.constant",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library class/type",scope:"support.type, support.class",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Library variable",scope:"support.other.variable",settings:{fontStyle:""}},{name:"Invalid",scope:"invalid",settings:{fontStyle:"",foreground:"#F44747"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#F44747"}},{name:"JSON String",scope:"meta.structure.dictionary.json string.quoted.double.json",settings:{foreground:"#CFCFC2"}},{name:"diff.header",scope:"meta.diff, meta.diff.header",settings:{foreground:"#75715E"}},{name:"diff.deleted",scope:"markup.deleted",settings:{foreground:"#F92672"}},{name:"diff.inserted",scope:"markup.inserted",settings:{foreground:"#A6E22E"}},{name:"diff.changed",scope:"markup.changed",settings:{foreground:"#E6DB74"}},{scope:"constant.numeric.line-number.find-in-files - match",settings:{foreground:"#AE81FFA0"}},{scope:"entity.name.filename.find-in-files",settings:{foreground:"#E6DB74"}},{name:"Markup Quote",scope:"markup.quote",settings:{foreground:"#F92672"}},{name:"Markup Lists",scope:"markup.list",settings:{foreground:"#E6DB74"}},{name:"Markup Styling",scope:"markup.bold, markup.italic",settings:{foreground:"#66D9EF"}},{name:"Markup Inline",scope:"markup.inline.raw",settings:{fontStyle:"",foreground:"#FD971F"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#A6E22E"}},{name:"Markup Setext Header",scope:"markup.heading.setext",settings:{foreground:"#A6E22E",fontStyle:"bold"}},{name:"Markup Headings",scope:"markup.heading.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Quote",scope:"markup.quote.markdown",settings:{fontStyle:"italic",foreground:"#75715E"}},{name:"Markdown Bold",scope:"markup.bold.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Link Title/Description",scope:"string.other.link.title.markdown,string.other.link.description.markdown",settings:{foreground:"#AE81FF"}},{name:"Markdown Underline Link/Image",scope:"markup.underline.link.markdown,markup.underline.link.image.markdown",settings:{foreground:"#E6DB74"}},{name:"Markdown Emphasis",scope:"markup.italic.markdown",settings:{fontStyle:"italic"}},{name:"Markdown Punctuation Definition Link",scope:"markup.list.unnumbered.markdown, markup.list.numbered.markdown",settings:{foreground:"#f8f8f2"}},{name:"Markdown List Punctuation",scope:["punctuation.definition.list.begin.markdown"],settings:{foreground:"#A6E22E"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#FD971F"}}],BKe=!0,WKe={type:RKe,colors:PKe,tokenColors:FKe,semanticHighlighting:BKe};var R9;const jhe=MKe,VKe=WKe,qhe=((R9=jhe.contributes)===null||R9===void 0?void 0:R9.themes)||[],HKe=qhe[0];qhe[0]=Object.assign({},HKe,VKe);const zKe="material-palenight-theme",UKe="whizkydee",$Ke="Olaolu Olawuyi <mrolaolu@gmail.com> (http://twitter.com/mrolaolu)",jKe="Palenight Theme",qKe="2.0.1",KKe="An elegant and juicy material-inspired theme for Visual Studio Code.",GKe={color:"#31364A",theme:"dark"},YKe="icon.png",ZKe=["material theme","palenight","material","purple","dark"],XKe={url:"https://github.com/whizkydee/vscode-palenight-theme",type:"git"},QKe={url:"https://github.com/whizkydee/vscode-palenight-theme/issues"},JKe="MIT",eGe={vscode:"^1.12.0"},tGe={start:"nodemon --exec vsce package",build:"nodemon --watch src src"},nGe=["Themes","Other"],iGe={themes:[{id:"Palenight Mild Contrast",label:"Palenight (Mild Contrast)",uiTheme:"vs-dark",path:"./themes/palenight-mild-contrast.json"}]},rGe={nodemon:"^1.12.1",vsce:"^1.31.0"},sGe={publisherDisplayName:"Olaolu Olawuyi"},oGe={name:zKe,publisher:UKe,author:$Ke,displayName:jKe,version:qKe,description:KKe,galleryBanner:GKe,icon:YKe,keywords:ZKe,repository:XKe,bugs:QKe,license:JKe,engines:eGe,scripts:tGe,categories:nGe,contributes:iGe,devDependencies:rGe,__metadata:sGe},aGe="Palenight (Mild Contrast)",lGe="Olaolu Olawuyi",uGe=["Olaolu Olawuyi <mrolaolu@gmail.com>"],cGe="dark",dGe="palenight-mild-contrast",hGe={contrastActiveBorder:null,contrastBorder:"#2C2F40",focusBorder:"#2C2F40",foreground:"#ffffff","widget.shadow":"#232635","selection.background":"#3C435E",descriptionForeground:null,errorForeground:"#EF5350","button.background":"#7e57c2cc","button.foreground":"#ffffffcc","button.hoverBackground":"#7e57c2","dropdown.background":"#292D3E","dropdown.border":"#7e57c2","dropdown.foreground":"#ffffffcc","input.background":"#414863","input.border":"#7e57c2","input.foreground":"#ffffffcc","input.placeholderForeground":"#ffffffcc","inputOption.activeBorder":"#ffffffcc","inputValidation.errorBackground":"#ef5350f2","inputValidation.errorBorder":"#EF5350","inputValidation.infoBackground":"#64b5f6f2","inputValidation.infoBorder":"#64B5F6","inputValidation.warningBackground":"#ffca28f2","inputValidation.warningBorder":"#FFCA28","scrollbar.shadow":"#292D3E00","scrollbarSlider.activeBackground":"#694CA4cc","scrollbarSlider.background":"#694CA466","scrollbarSlider.hoverBackground":"#694CA4cc","badge.background":"#7e57c2","badge.foreground":"#ffffff","progress.background":"#7e57c2","list.activeSelectionBackground":"#7e57c2","list.activeSelectionForeground":"#ffffff","list.dropBackground":"#2E3245","list.focusBackground":"#0000002e","list.focusForeground":"#ffffff","list.highlightForeground":"#ffffff","list.hoverBackground":"#0000001a","list.hoverForeground":"#ffffff","list.inactiveSelectionBackground":"#929ac90d","list.inactiveSelectionForeground":"#929ac9","activityBar.background":"#242839","activityBar.dropBackground":"#7e57c2e3","activityBar.foreground":"#eeffff","activityBar.border":"#2E3243","activityBarBadge.background":"#7e57c2","activityBarBadge.foreground":"#ffffff","sideBar.background":"#25293A","sideBar.foreground":"#6C739A","sideBar.border":"#2C2F40","sideBarTitle.foreground":"#eeffff","sideBarSectionHeader.background":"#25293A","sideBarSectionHeader.foreground":"#eeffff","editorGroup.background":"#32374C","editorGroup.border":"#2E3245","editorGroup.dropBackground":"#7e57c273","editorGroupHeader.noTabsBackground":"#32374C","editorGroupHeader.tabsBackground":"#31364a","editorGroupHeader.tabsBorder":"#2C3041","tab.activeBackground":"#25293A","tab.activeForeground":"#eeffff","tab.border":"#272B3B","tab.activeBorder":"#2C3041","tab.unfocusedActiveBorder":"#2C3041","tab.inactiveBackground":"#31364A","tab.inactiveForeground":"#929ac9","tab.unfocusedActiveForeground":null,"tab.unfocusedInactiveForeground":null,"editor.background":"#292D3E","editor.foreground":"#BFC7D5","editorLineNumber.foreground":"#4c5374","editorLineNumber.activeForeground":"#eeffff","editorCursor.foreground":"#7e57c2","editorCursor.background":null,"editor.selectionBackground":"#7580B850","editor.selectionHighlightBackground":"#383D51","editor.inactiveSelectionBackground":"#7e57c25a","editor.wordHighlightBackground":"#32374D","editor.wordHighlightStrongBackground":"#2E3250","editor.findMatchBackground":"#7e57c25a","editor.findMatchHighlightBackground":"#2E3248","editor.findRangeHighlightBackground":null,"editor.hoverHighlightBackground":"#7e57c25a","editor.lineHighlightBackground":"#0003","editor.lineHighlightBorder":null,"editorLink.activeForeground":null,"editor.rangeHighlightBackground":"#7e57c25a","editorWhitespace.foreground":null,"editorIndentGuide.background":"#4E557980","editorRuler.foreground":null,"editorCodeLens.foreground":"#FFCA28","editorBracketMatch.background":null,"editorBracketMatch.border":null,"editorOverviewRuler.currentContentForeground":"#7e57c2","editorOverviewRuler.incomingContentForeground":"#7e57c2","editorOverviewRuler.commonContentForeground":"#7e57c2","editorError.foreground":"#EF5350","editorError.border":null,"editorWarning.foreground":"#FFCA28","editorWarning.border":null,"editorGutter.background":null,"editorGutter.modifiedBackground":"#e2b93d","editorGutter.addedBackground":"#9CCC65","editorGutter.deletedBackground":"#EF5350","diffEditor.insertedTextBackground":"#99b76d23","diffEditor.removedTextBackground":"#ef535033","editorWidget.background":"#31364a","editorWidget.border":null,"editorSuggestWidget.background":"#2C3043","editorSuggestWidget.border":"#2B2F40","editorSuggestWidget.foreground":"#bfc7d5","editorSuggestWidget.highlightForeground":"#ffffff","editorSuggestWidget.selectedBackground":"#7e57c2","editorHoverWidget.background":"#292D3E","editorHoverWidget.border":"#7e57c2","debugExceptionWidget.background":"#292D3E","debugExceptionWidget.border":"#7e57c2","editorMarkerNavigation.background":"#31364a","editorMarkerNavigationError.background":"#EF5350","editorMarkerNavigationWarning.background":"#FFCA28","peekView.border":"#7e57c2","peekViewEditor.background":"#232635","peekViewEditor.matchHighlightBackground":"#7e57c25a","peekViewResult.background":"#2E3245","peekViewResult.fileForeground":"#eeffff","peekViewResult.lineForeground":"#eeffff","peekViewResult.matchHighlightBackground":"#7e57c25a","peekViewResult.selectionBackground":"#2E3250","peekViewResult.selectionForeground":"#eeffff","peekViewTitle.background":"#292D3E","peekViewTitleDescription.foreground":"#697098","peekViewTitleLabel.foreground":"#eeffff","merge.currentHeaderBackground":"#7e57c25a","merge.currentContentBackground":null,"merge.incomingHeaderBackground":"#7e57c25a","merge.incomingContentBackground":null,"merge.border":null,"panel.background":"#25293A","panel.border":"#2C2F40","panelTitle.activeBorder":"#7e57c2","panelTitle.activeForeground":"#eeffff","panelTitle.inactiveForeground":"#bfc7d580","statusBar.background":"#25293A","statusBar.foreground":"#676E95","statusBar.border":"#2C3041","statusBar.debuggingBackground":"#202431","statusBar.debuggingForeground":null,"statusBar.debuggingBorder":"#1F2330","statusBar.noFolderForeground":null,"statusBar.noFolderBackground":"#292D3E","statusBar.noFolderBorder":"#25293A","statusBarItem.activeBackground":"#202431","statusBarItem.hoverBackground":"#202431","statusBarItem.prominentBackground":"#202431","statusBarItem.prominentHoverBackground":"#202431","titleBar.activeBackground":"#25293A","titleBar.activeForeground":"#eeefff","titleBar.border":"#2C3041","titleBar.inactiveBackground":"#30364c","titleBar.inactiveForeground":null,"notifications.background":"#292D3E","notifications.foreground":"#ffffffcc","notificationLink.foreground":"#80CBC4","extensionButton.prominentForeground":"#ffffffcc","extensionButton.prominentBackground":"#7e57c2cc","extensionButton.prominentHoverBackground":"#7e57c2","pickerGroup.foreground":"#d1aaff","pickerGroup.border":"#2E3245","terminal.ansiWhite":"#ffffff","terminal.ansiBlack":"#676E95","terminal.ansiBlue":"#82AAFF","terminal.ansiCyan":"#89DDFF","terminal.ansiGreen":"#a9c77d","terminal.ansiMagenta":"#C792EA","terminal.ansiRed":"#ff5572","terminal.ansiYellow":"#FFCB6B","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightBlack":"#676E95","terminal.ansiBrightBlue":"#82AAFF","terminal.ansiBrightCyan":"#89DDFF","terminal.ansiBrightGreen":"#C3E88D","terminal.ansiBrightMagenta":"#C792EA","terminal.ansiBrightRed":"#ff5572","terminal.ansiBrightYellow":"#FFCB6B","debugToolBar.background":"#292D3E","welcomePage.buttonBackground":null,"welcomePage.buttonHoverBackground":null,"walkThrough.embeddedEditorBackground":"#232635","gitDecoration.modifiedResourceForeground":"#e2c08de6","gitDecoration.deletedResourceForeground":"#EF535090","gitDecoration.untrackedResourceForeground":"#a9c77dff","gitDecoration.ignoredResourceForeground":"#69709890","gitDecoration.conflictingResourceForeground":"#FFEB95CC","editorActiveLineNumber.foreground":"#eeffff","breadcrumb.foreground":"#6c739a","breadcrumb.focusForeground":"#bfc7d5","breadcrumb.activeSelectionForeground":"#eeffff","breadcrumbPicker.background":"#292D3E"},fGe=[{name:"Global settings",settings:{background:"#292D3E",foreground:"#bfc7d5"}},{name:"Comment",scope:"comment",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"String",scope:"string",settings:{foreground:"#C3E88D"}},{name:"String Quoted",scope:"string.quoted",settings:{foreground:"#C3E88D"}},{name:"String Unquoted",scope:"string.unquoted",settings:{foreground:"#bfc7d5"}},{name:"Support Constant Math",scope:"support.constant.math",settings:{foreground:"#ffcb6b"}},{name:"Number",scope:["constant.numeric","constant.character.numeric"],settings:{foreground:"#F78C6C"}},{name:"Built-in constant",scope:["constant.language","punctuation.definition.constant","variable.other.constant"],settings:{foreground:"#82AAFF"}},{name:"User-defined constant",scope:["constant.character","constant.other"],settings:{foreground:"#82AAFF"}},{name:"Constant Character Escape",scope:"constant.character.escape",settings:{foreground:"#F78C6C"}},{name:"RegExp String",scope:["string.regexp","string.regexp keyword.other"],settings:{foreground:"#80CBC4"}},{name:"Comma in functions",scope:"meta.function punctuation.separator.comma",settings:{foreground:"#eeffff"}},{name:"Variable",scope:"variable",settings:{foreground:"#ffcb6b"}},{name:"Keyword",scope:["punctuation.accessor","keyword"],settings:{foreground:"#c792ea"}},{name:"Storage",scope:["storage","storage.type","meta.var.expr storage.type","storage.type.property.js","storage.type.property.ts","storage.type.property.tsx","meta.class meta.method.declaration meta.var.expr storage.type.js"],settings:{foreground:"#c792ea"}},{name:"Class name",scope:["entity.name.class","meta.class entity.name.type.class"],settings:{foreground:"#ffcb6b"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{foreground:"#a9c77d"}},{name:"Function name",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Function Parameters",scope:"variable.parameter",settings:{foreground:"#7986E7"}},{name:"Meta Tag",scope:["punctuation.definition.tag","meta.tag"],settings:{foreground:"#89DDFF"}},{name:"HTML Tag names",scope:["entity.name.tag support.class.component","meta.tag.other.html","meta.tag.other.js","meta.tag.other.tsx","entity.name.tag.tsx","entity.name.tag.js","entity.name.tag","meta.tag.js","meta.tag.tsx","meta.tag.html"],settings:{foreground:"#ff5572"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{foreground:"#ffcb6b"}},{name:"Entity Name Tag Custom",scope:"entity.name.tag.custom",settings:{foreground:"#ffcb6b"}},{name:"Library (function & constant)",scope:["support.function","support.constant"],settings:{foreground:"#82AAFF"}},{name:"Support Constant Property Value meta",scope:"support.constant.meta.property-value",settings:{foreground:"#89DDFF"}},{name:"Library class/type",scope:["support.type","support.class"],settings:{foreground:"#ffcb6b"}},{name:"Support Variable DOM",scope:"support.variable.dom",settings:{foreground:"#ffcb6b"}},{name:"Invalid",scope:"invalid",settings:{background:"#ff2c83",foreground:"#ffffff"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#ffffff",background:"#d3423e"}},{name:"Keyword Operator",scope:"keyword.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Relational",scope:"keyword.operator.relational",settings:{foreground:"#c792ea"}},{name:"Keyword Operator Assignment",scope:"keyword.operator.assignment",settings:{foreground:"#c792ea"}},{name:"Double-Slashed Comment",scope:"comment.line.double-slash",settings:{foreground:"#697098"}},{name:"Object",scope:"object",settings:{foreground:"#cdebf7"}},{name:"Null",scope:"constant.language.null",settings:{foreground:"#ff5874"}},{name:"Meta Brace",scope:"meta.brace",settings:{foreground:"#bfc7d5"}},{name:"Meta Delimiter Period",scope:"meta.delimiter.period",settings:{foreground:"#c792ea"}},{name:"Punctuation Definition String",scope:"punctuation.definition.string",settings:{foreground:"#d9f5dd"}},{name:"Boolean",scope:"constant.language.boolean",settings:{foreground:"#ff5874"}},{name:"Object Comma",scope:"object.comma",settings:{foreground:"#ffffff"}},{name:"Variable Parameter Function",scope:"variable.parameter.function",settings:{foreground:"#89DDFF"}},{name:"Support Type Property Name & entity name tags",scope:["support.type.vendored.property-name","support.constant.vendored.property-value","support.type.property-name","meta.property-list entity.name.tag"],settings:{foreground:"#80CBC4"}},{name:"Entity Name tag reference in stylesheets",scope:"meta.property-list entity.name.tag.reference",settings:{foreground:"#ff5572"}},{name:"Constant Other Color RGB Value Punctuation Definition Constant",scope:"constant.other.color.rgb-value punctuation.definition.constant",settings:{foreground:"#F78C6C"}},{name:"Constant Other Color",scope:"constant.other.color",settings:{foreground:"#FFEB95"}},{name:"Keyword Other Unit",scope:"keyword.other.unit",settings:{foreground:"#FFEB95"}},{name:"Meta Selector",scope:"meta.selector",settings:{foreground:"#c792ea"}},{name:"Entity Other Attribute Name Id",scope:"entity.other.attribute-name.id",settings:{foreground:"#FAD430"}},{name:"Meta Property Name",scope:"meta.property-name",settings:{foreground:"#80CBC4"}},{name:"Doctypes",scope:["entity.name.tag.doctype","meta.tag.sgml.doctype"],settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Punctuation Definition Parameters",scope:"punctuation.definition.parameters",settings:{foreground:"#d9f5dd"}},{name:"Keyword Control Operator",scope:"keyword.control.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Logical",scope:"keyword.operator.logical",settings:{foreground:"#c792ea"}},{name:"Variable Instances",scope:["variable.instance","variable.other.instance","variable.reaedwrite.instance","variable.other.readwrite.instance"],settings:{foreground:"#ff5572"}},{name:"Variable Property Other",scope:["variable.other.property","variable.other.object.property"],settings:{foreground:"#89DDFF"}},{name:"Entity Name Function",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Keyword Operator Comparison",scope:"keyword.operator.comparison",settings:{foreground:"#c792ea"}},{name:"Support Constant, `new` keyword, Special Method Keyword",scope:["support.constant","keyword.other.special-method","keyword.other.new"],settings:{foreground:"#89DDFF"}},{name:"Support Function",scope:"support.function",settings:{foreground:"#89DDFF"}},{name:"Invalid Broken",scope:"invalid.broken",settings:{foreground:"#020e14",background:"#F78C6C"}},{name:"Invalid Unimplemented",scope:"invalid.unimplemented",settings:{background:"#8BD649",foreground:"#ffffff"}},{name:"Invalid Illegal",scope:"invalid.illegal",settings:{foreground:"#ffffff",background:"#ec5f67"}},{name:"Language Variable",scope:"variable.language",settings:{foreground:"#ff5572"}},{name:"Support Variable Property",scope:"support.variable.property",settings:{foreground:"#89DDFF"}},{name:"Variable Function",scope:"variable.function",settings:{foreground:"#82AAFF"}},{name:"Variable Interpolation",scope:"variable.interpolation",settings:{foreground:"#ec5f67"}},{name:"Meta Function Call",scope:"meta.function-call",settings:{foreground:"#82AAFF"}},{name:"Punctuation Section Embedded",scope:"punctuation.section.embedded",settings:{foreground:"#d3423e"}},{name:"Punctuation Tweaks",scope:["punctuation.terminator.expression","punctuation.definition.arguments","punctuation.definition.array","punctuation.section.array","meta.array"],settings:{foreground:"#bfc7d5"}},{name:"More Punctuation Tweaks",scope:["punctuation.definition.list.begin","punctuation.definition.list.end","punctuation.separator.arguments","punctuation.definition.list"],settings:{foreground:"#d9f5dd"}},{name:"Template Strings",scope:"string.template meta.template.expression",settings:{foreground:"#d3423e"}},{name:"Backtics(``) in Template Strings",scope:"string.template punctuation.definition.string",settings:{foreground:"#bfc7d5"}},{name:"Italics",scope:"italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Bold",scope:"bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Quote",scope:"quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Raw Code",scope:"raw",settings:{foreground:"#80CBC4"}},{name:"CoffeScript Variable Assignment",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"CoffeScript Parameter Function",scope:"variable.parameter.function.coffee",settings:{foreground:"#bfc7d5"}},{name:"CoffeeScript Assignments",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"C# Readwrite Variables",scope:"variable.other.readwrite.cs",settings:{foreground:"#bfc7d5"}},{name:"C# Classes & Storage types",scope:["entity.name.type.class.cs","storage.type.cs"],settings:{foreground:"#82AAFF"}},{name:"C# Namespaces",scope:"entity.name.type.namespace.cs",settings:{foreground:"#B2CCD6"}},{name:"Tag names in Stylesheets",scope:["entity.name.tag.css","entity.name.tag.less","entity.name.tag.custom.css"],settings:{foreground:"#ff5572"}},{name:"Wildcard(*) selector in Stylesheets",scope:["entity.name.tag.wildcard.css","entity.name.tag.wildcard.less","entity.name.tag.wildcard.scss","entity.name.tag.wildcard.sass"],settings:{foreground:"#ff5572"}},{name:"(C|SC|SA|LE)SS property value unit",scope:["keyword.other.unit.css","constant.length.units.css","keyword.other.unit.less","constant.length.units.less","keyword.other.unit.scss","constant.length.units.scss","keyword.other.unit.sass","constant.length.units.sass"],settings:{foreground:"#FFEB95"}},{name:"Attribute Name for CSS",scope:"meta.attribute-selector.css entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"punctuations in styled components",scope:["source.js source.css meta.property-list","source.js source.css punctuation.section","source.js source.css punctuation.terminator.rule","source.js source.css punctuation.definition.entity.end.bracket","source.js source.css punctuation.definition.entity.begin.bracket","source.js source.css punctuation.separator.key-value","source.js source.css punctuation.definition.attribute-selector","source.js source.css meta.property-list","source.js source.css meta.property-list punctuation.separator.comma","source.ts source.css punctuation.section","source.ts source.css punctuation.terminator.rule","source.ts source.css punctuation.definition.entity.end.bracket","source.ts source.css punctuation.definition.entity.begin.bracket","source.ts source.css punctuation.separator.key-value","source.ts source.css punctuation.definition.attribute-selector","source.ts source.css meta.property-list","source.ts source.css meta.property-list punctuation.separator.comma"],settings:{foreground:"#bfc7d5"}},{name:"Elixir Classes",scope:["source.elixir support.type.elixir","source.elixir meta.module.elixir entity.name.class.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir Functions",scope:"source.elixir entity.name.function",settings:{foreground:"#ffcb6b"}},{name:"Elixir Constants",scope:["source.elixir constant.other.symbol.elixir","source.elixir constant.other.keywords.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir String Punctuations",scope:"source.elixir punctuation.definition.string",settings:{foreground:"#a9c77d"}},{name:"Elixir",scope:["source.elixir variable.other.readwrite.module.elixir","source.elixir variable.other.readwrite.module.elixir punctuation.definition.variable.elixir"],settings:{foreground:"#ffcb6b"}},{name:"Elixir Binary Punctuations",scope:"source.elixir .punctuation.binary.elixir",settings:{foreground:"#c792ea"}},{name:"Go Function Calls",scope:"source.go meta.function-call.go",settings:{foreground:"#DDDDDD"}},{name:"GraphQL Variables",scope:"variable.qraphql",settings:{foreground:"#bfc7d5"}},{name:"ID Attribute Name in HTML",scope:"entity.other.attribute-name.id.html",settings:{foreground:"#ffcb6b"}},{name:"HTML Punctuation Definition Tag",scope:"punctuation.definition.tag.html",settings:{foreground:"#89DDFF"}},{name:"HTML Doctype",scope:"meta.tag.sgml.doctype.html",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"JavaScript Classes",scope:"meta.class entity.name.type.class.js",settings:{foreground:"#ffcb8b"}},{name:"JavaScript Method Declaration e.g. `constructor`",scope:"meta.method.declaration storage.type.js",settings:{foreground:"#82AAFF",fontStyle:"normal"}},{name:"JavaScript Terminator",scope:"terminator.js",settings:{foreground:"#bfc7d5"}},{name:"JavaScript Meta Punctuation Definition",scope:"meta.js punctuation.definition.js",settings:{foreground:"#bfc7d5"}},{name:"Entity Names in Code Documentations",scope:["entity.name.type.instance.jsdoc","entity.name.type.instance.phpdoc"],settings:{foreground:"#eeffff"}},{name:"Other Variables in Code Documentations",scope:["variable.other.jsdoc","variable.other.phpdoc"],settings:{foreground:"#78ccf0"}},{name:"JavaScript module imports and exports",scope:["variable.other.meta.import.js","meta.import.js variable.other","variable.other.meta.export.js","meta.export.js variable.other"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variable Parameter Function",scope:"variable.parameter.function.js",settings:{foreground:"#7986E7"}},{name:"JavaScript Variable Other ReadWrite",scope:"variable.other.readwrite.js",settings:{foreground:"#bfc7d5"}},{name:"Text nested in React tags",scope:["meta.jsx.children","meta.jsx.children.js","meta.jsx.children.tsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript[React] Variable Other Object",scope:["variable.other.object.js","variable.other.object.jsx","meta.object-literal.key.js","meta.object-literal.key.jsx","variable.object.property.js","variable.object.property.jsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variables",scope:["variable.js","variable.other.js"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Entity Name Type",scope:["entity.name.type.js","entity.name.type.module.js"],settings:{foreground:"#ffcb8b"}},{name:"JavaScript Support Classes",scope:"support.class.js",settings:{foreground:"#bfc7d5"}},{name:"JSON Property Names",scope:"support.type.property-name.json",settings:{foreground:"#C3E88D",fontStyle:"normal"}},{name:"JSON Support Constants",scope:"support.constant.json",settings:{foreground:"#ffcb6b"}},{name:"JSON Property values (string)",scope:"meta.structure.dictionary.value.json string.quoted.double",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Strings in JSON values",scope:"string.quoted.double.json punctuation.definition.string.json",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Specific JSON Property values like null",scope:"meta.structure.dictionary.json meta.structure.dictionary.value constant.language",settings:{foreground:"#ff5874"}},{name:"Ruby Variables",scope:"variable.other.ruby",settings:{foreground:"#bfc7d5"}},{name:"Ruby Hashkeys",scope:"constant.language.symbol.hashkey.ruby",settings:{foreground:"#89DDFF"}},{name:"LESS Tag names",scope:"entity.name.tag.less",settings:{foreground:"#ff5572"}},{name:"Attribute Name for LESS",scope:"meta.attribute-selector.less entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#82b1ff"}},{name:"Markup Italics",scope:"markup.italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Markup Bold",scope:"markup.bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Markup Quote + others",scope:"markup.quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Markup Raw Code + others",scope:"markup.inline.raw",settings:{foreground:"#80CBC4"}},{name:"Markup Links",scope:["markup.underline.link","markup.underline.link.image"],settings:{foreground:"#ff869a"}},{name:"Markup Attributes",scope:["markup.meta.attribute-list"],settings:{foreground:"#a9c77d"}},{name:"Markup Admonitions",scope:"markup.admonition",settings:{fontStyle:"bold"}},{name:"Markup Lists",scope:"markup.list.bullet",settings:{foreground:"#D9F5DD"}},{name:"Markup Superscript and Subscript",scope:["markup.superscript","markup.subscript"],settings:{fontStyle:"italic"}},{name:"Markdown Link Title and Description",scope:["string.other.link.title.markdown","string.other.link.description.markdown"],settings:{foreground:"#bfc7d5"}},{name:"Markdown Punctuation",scope:["punctuation.definition.string.markdown","punctuation.definition.string.begin.markdown","punctuation.definition.string.end.markdown","meta.link.inline.markdown punctuation.definition.string"],settings:{foreground:"#82b1ff"}},{name:"Markdown MetaData Punctuation",scope:["punctuation.definition.metadata.markdown"],settings:{foreground:"#ff5572"}},{name:"Markdown List Punctuation",scope:["beginning.punctuation.definition.list.markdown"],settings:{foreground:"#82b1ff"}},{name:"Asciidoc Function",scope:"entity.name.function.asciidoc",settings:{foreground:"#F78C6C"}},{name:"PHP Variables",scope:"variable.other.php",settings:{foreground:"#bec5d4"}},{name:"Support Classes in PHP",scope:"support.class.php",settings:{foreground:"#ffcb8b"}},{name:"Punctuations in PHP function calls",scope:"meta.function-call.php punctuation",settings:{foreground:"#bfc7d5"}},{name:"PHP Global Variables",scope:"variable.other.global.php",settings:{foreground:"#ffcb6b"}},{name:"Declaration Punctuation in PHP Global Variables",scope:"variable.other.global.php punctuation.definition.variable",settings:{foreground:"#ffcb6b"}},{name:"Language Constants in Python",scope:"constant.language.python",settings:{foreground:"#ff5874"}},{name:"Python Function Parameter and Arguments",scope:["variable.parameter.function.python","meta.function-call.arguments.python"],settings:{foreground:"#7986E7"}},{name:"Python Function Call",scope:["meta.function-call.python","meta.function-call.generic.python"],settings:{foreground:"#B2CCD6"}},{name:"Punctuations in Python",scope:"punctuation.python",settings:{foreground:"#bfc7d5"}},{name:"Decorator Functions in Python",scope:"entity.name.function.decorator.python",settings:{foreground:"#ffcb6b"}},{name:"Python Language Variable",scope:"source.python variable.language.special",settings:{foreground:"#8EACE3"}},{name:"SCSS Variable",scope:["variable.scss","variable.sass","variable.parameter.url.scss","variable.parameter.url.sass"],settings:{foreground:"#DDDDDD"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#82AAFF"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#bec5d4"}},{name:"Attribute Name for SASS",scope:["meta.attribute-selector.scss entity.other.attribute-name.attribute","meta.attribute-selector.sass entity.other.attribute-name.attribute"],settings:{foreground:"#F78C6C"}},{name:"Tag names in SASS",scope:["entity.name.tag.scss","entity.name.tag.sass"],settings:{foreground:"#ff5572"}},{name:"TypeScript[React] Variables and Object Properties",scope:["variable.other.readwrite.alias.ts","variable.other.readwrite.alias.tsx","variable.other.readwrite.ts","variable.other.readwrite.tsx","variable.other.object.ts","variable.other.object.tsx","variable.object.property.ts","variable.object.property.tsx","variable.other.ts","variable.other.tsx","variable.tsx","variable.ts"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Entity Name Types",scope:["entity.name.type.ts","entity.name.type.tsx"],settings:{foreground:"#78ccf0"}},{name:"TypeScript[React] Node Classes",scope:["support.class.node.ts","support.class.node.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Entity Name Types as Parameters",scope:["meta.type.parameters.ts entity.name.type","meta.type.parameters.tsx entity.name.type"],settings:{foreground:"#eeffff"}},{name:"TypeScript[React] Import/Export Punctuations",scope:["meta.import.ts punctuation.definition.block","meta.import.tsx punctuation.definition.block","meta.export.ts punctuation.definition.block","meta.export.tsx punctuation.definition.block"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Punctuation Decorators",scope:["meta.decorator punctuation.decorator.ts","meta.decorator punctuation.decorator.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Punctuation Decorators",scope:"meta.tag.js meta.jsx.children.tsx",settings:{foreground:"#82AAFF"}},{name:"YAML Entity Name Tags",scope:"entity.name.tag.yaml",settings:{foreground:"#89DDFF"}},{name:"handlebars variables",scope:"variable.parameter.handlebars",settings:{foreground:"#bec5d4"}},{name:"handlebars parameters",scope:"entity.other.attribute-name.handlebars variable.parameter.handlebars",settings:{foreground:"#ffcb6b"}},{name:"handlebars enitity attribute names",scope:"entity.other.attribute-name.handlebars",settings:{foreground:"#89DDFF"}},{name:"handlebars enitity attribute values",scope:"entity.other.attribute-value.handlebars variable.parameter.handlebars",settings:{foreground:"#7986E7"}},{name:"normalize font style of certain components",scope:["meta.tag.js meta.embedded.expression.js punctuation.section.embedded.begin.js","meta.tag.js meta.embedded.expression.js punctuation.section.embedded.end.js","meta.property-list.css meta.property-value.css variable.other.less","punctuation.section.embedded.begin.js.jsx","punctuation.section.embedded.end.js.jsx","meta.property-list.scss variable.scss","meta.property-list.sass variable.sass","keyword.operator.logical","keyword.operator.arithmetic","keyword.operator.bitwise","keyword.operator.increment","keyword.operator.ternary","keyword.operator.comparison","keyword.operator.assignment","keyword.operator.operator","keyword.operator.or.regexp","keyword.operator.expression.in","keyword.operator.type","punctuation.section.embedded.js","punctuation.definintion.string","punctuation"],settings:{fontStyle:"normal"}}],gGe={name:aGe,author:lGe,maintainers:uGe,type:cGe,semanticClass:dGe,colors:hGe,tokenColors:fGe};var P9;const Khe=oGe,pGe=gGe,Ghe=((P9=Khe.contributes)===null||P9===void 0?void 0:P9.themes)||[],mGe=Ghe[0];Ghe[0]=Object.assign({},mGe,pGe);const _Ge="webstorm-intellij-darcula-theme",vGe="Webstorm IntelliJ Darcula Theme",bGe="A Darcula Theme designed by IntelliJ",CGe="1.1.1",yGe="xr0master",wGe="MIT",SGe="view.png",LGe={url:"https://github.com/xr0master/vscode-intellij-darcula-theme",type:"git"},EGe={vscode:"^1.27.0"},xGe=["Themes"],DGe={themes:[{id:"Webstorm IntelliJ Darcula Theme",label:"Webstorm IntelliJ Darcula Theme",uiTheme:"vs-dark",path:"./themes/darcula-color-theme.json"}]},IGe={name:_Ge,displayName:vGe,description:bGe,version:CGe,publisher:yGe,license:wGe,icon:SGe,repository:LGe,engines:EGe,categories:xGe,contributes:DGe},TGe="Webstorm IntelliJ Darcula Theme",kGe="dark",NGe={"activityBar.background":"#3c3f41","activityBar.border":"#4b4b4b","activityBar.foreground":"#ffffff","activityBarBadge.background":"#cc7832","dropdown.background":"#3c3f41","dropdown.border":"#4b4b4b","dropdown.foreground":"#bababa","editor.background":"#2b2b2b","editor.foreground":"#a9b7c6","editor.inactiveSelectionBackground":"#3a3d41","editor.lineHighlightBackground":"#323232","editor.selectionHighlightBackground":"#415a41","editorIndentGuide.activeBackground":"#606060","editorIndentGuide.background":"#4b4b4b","editorLineNumber.activeForeground":"#999999","editorLineNumber.foreground":"#606366","input.background":"#3c3f41","input.border":"#4b4b4b","input.foreground":"#bababa","input.placeholderForeground":"#a6a6a6","list.dropBackground":"#373a3c","menu.background":"#3c3f41","menu.foreground":"#bababa","panel.background":"#3c3f41","panel.border":"#4b4b4b","panelTitle.activeBorder":"#bababa","panelTitle.activeForeground":"#bababa","panelTitle.inactiveForeground":"#888888","scrollbarSlider.activeBackground":"#707070","scrollbarSlider.background":"#505050","scrollbarSlider.hoverBackground":"#676767","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBar.background":"#3c3f41","sideBar.border":"#4b4b4b","sideBar.foreground":"#bababa","sideBarSectionHeader.foreground":"#bababa","sideBarTitle.foreground":"#bababa","statusBar.background":"#3c3f41","statusBar.border":"#4b4b4b","statusBar.foreground":"#bababa","tab.activeBackground":"#515658","tab.activeBorder":"#bababa","tab.activeForeground":"#bababa","tab.border":"#4b4b4b","tab.inactiveBackground":"#3c3e3f","tab.inactiveForeground":"#a1a1a1","terminal.ansiBlack":"#ffffff","terminal.ansiBlue":"#5394ec","terminal.ansiBrightBlue":"#7eaef1","terminal.ansiBrightCyan":"#6cdada","terminal.ansiBrightGreen":"#a8c023","terminal.ansiBrightMagenta":"#ff99ff","terminal.ansiBrightRed":"#ff8785","terminal.ansiBrightYellow":"#ffff00","terminal.ansiCyan":"#299999","terminal.ansiGreen":"#a8c023","terminal.ansiMagenta":"#ae8abe","terminal.ansiRed":"#ff6b68","terminal.ansiWhite":"#1f1f1f","terminal.ansiYellow":"#d6bf55","terminal.background":"#2b2b2b","terminal.border":"#4b4b4b","widget.shadow":"#1a1a1aaa"},AGe=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.instanceof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}},{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow keywords",scope:"keyword.control",settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{scope:"string",settings:{foreground:"#6A8759"}},{scope:"keyword - keyword.operator",settings:{foreground:"#CC7832"}},{scope:"keyword.control",settings:{foreground:"#CC7832"}},{scope:"storage",settings:{foreground:"#CC7832"}},{scope:"storage.type",settings:{foreground:"#CC7832"}},{scope:"constant.numeric",settings:{foreground:"#6897BB"}},{scope:"entity.name.type",settings:{foreground:"#CC7832"}},{scope:"entity.name.class",settings:{foreground:"#CC7832"}},{scope:"support.type",settings:{foreground:"#CC7832"}},{scope:"support.class",settings:{foreground:"#CC7832"}},{scope:"entity.name.function",settings:{foreground:"#FFC66D"}},{scope:"support.function",settings:{foreground:"#FFC66D"}},{scope:"variable",settings:{foreground:"#9876AA"}},{scope:"entity.name.variable",settings:{foreground:"#9876AA"}},{name:"Comments",scope:["comment","comment.block","comment.line"],settings:{foreground:"#808080",fontStyle:"italic"}},{scope:["punctuation.terminator.statement","punctuation.separator.comma","punctuation.separator.parameter","punctuation.separator.dictionary.key-value.json","punctuation.separator.dictionary.key-value.json.comments","punctuation.separator.dictionary.pair.json","punctuation.separator.dictionary.pair.json.comments","punctuation.separator.array.json","punctuation.separator.array.json.comments","constant.character.escape","keyword.control.anchor.regexp"],settings:{foreground:"#CC7832"}},{name:"Global keywords",scope:["constant.language","keyword.control","keyword.operator.expression","keyword.operator.new","keyword.other.debugger","support.type","storage.type","storage.modifier","variable.language.super","variable.language.this"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"String",scope:["punctuation.definition.string","string.regexp","constant.other.character-class"],settings:{foreground:"#6A8759"}},{name:"Comment Documentation",scope:["comment.block.documentation","entity.name.type.instance.jsdoc","variable.other.jsdoc"],settings:{foreground:"#6A8759"}},{name:"JsDocs",scope:"storage.type.class.jsdoc",settings:{foreground:"#6A8759",fontStyle:"italic bold underline"}},{name:"Main Text Color",scope:["punctuation.accessor","punctuation.separator.key-value","punctuation.definition.block","variable.other.readwrite","variable.other.constant","variable.parameter","variable.other.object","variable.language.arguments","support.variable","support.variable.object","support.class","keyword","keyword.operator.logical","keyword.operator.optional","keyword.operator.type.annotation","entity.name.type","entity.other.inherited-class","constant.language.import-export-all","storage.type.function.arrow","meta.function.expression","meta.object.member","meta.brace.round","meta.brace.square"],settings:{foreground:"#A9B7C6"}},{name:"Veriables",scope:["meta.function-call","meta.object.member","variable.other.property","variable.other.object.property","meta.object-literal.key","support.variable.property"],settings:{foreground:"#9876AA"}},{name:"Constants",scope:["variable.other.constant.property","variable.other.constant.object.property"],settings:{foreground:"#9876AA",fontStyle:"italic"}},{name:"JSON",scope:["support.type.property-name","support.type.property-name.json.comments","punctuation.support.type.property-name.end.json.comments","punctuation.support.type.property-name.begin.json.comments"],settings:{foreground:"#9876AA",fontStyle:""}},{name:"Regexp Blocks",scope:["punctuation.definition.group.regexp","punctuation.definition.character-class.regexp","punctuation.definition.group.no-capture.regexp","punctuation.definition.group.assertion.regexp","constant.other.character-class.regexp"],settings:{foreground:"#FFC66D"}},{name:"Regex set and etc",scope:["constant.regexp","keyword.operator.quantifier.regexp"],settings:{foreground:"#6897BB"}},{name:"XML/HTML tags",scope:["keyword.other.doctype.xml","entity.name.tag","support.class","punctuation.definition.tag"],settings:{foreground:"#E8BF6A"}},{name:"XML/HTML attribute name",scope:["variable.language.documentroot.xml","entity.other.attribute-name","support.variable.dom.js"],settings:{foreground:"#BABABA"}},{name:"XML/HTML embedded section",scope:["punctuation.section.embedded"],settings:{foreground:"#a9b7c6"}},{name:"HTML attribute value",scope:"text.html.basic string",settings:{foreground:"#A5C261"}},{name:"Constant characters",scope:"constant.character.entity",settings:{foreground:"#6D9CBE"}},{name:"YAML comments",scope:"comment.line.number-sign.yaml",settings:{foreground:"#629755",fontStyle:"italic"}},{name:"YAML key",scope:"entity.name.tag.yaml",settings:{foreground:"#CC7832"}},{name:"YAML block/text",scope:["source.yaml keyword.control","source.yaml constant.language","source.yaml storage.modifier.chomping-indicator","string.unquoted.plain.out.yaml","constant.numeric.integer.yaml"],settings:{foreground:"#A9B7C6",fontStyle:""}},{name:"YAML Anchor/Alias",scope:["entity.name.type.anchor.yaml","variable.other.alias.yaml"],settings:{foreground:"#E8BF6A"}},{name:"CSS/SCSS global key",scope:["keyword.other.important","keyword.other.default"],settings:{foreground:"#CC7832",fontStyle:""}},{name:"CSS atribute/selector",scope:["entity.other.attribute-name.css","entity.other.attribute-name.id.css","entity.other.attribute-name.class.css","entity.other.attribute-name.pseudo-element.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.class.mixin.css","support.function.url.css","constant.other.unicode-range.css","support.constant.language-range.css","punctuation.definition.entity.css"],settings:{foreground:"#E8BF6A"}},{name:"CSS URL",scope:"variable.parameter.url.css",settings:{foreground:"#287BDE"}},{name:"CSS property name",scope:["support.type.property-name.css","support.type.vendored.property-name"],settings:{foreground:"#BABABA",fontStyle:""}},{name:"CSS tag name",scope:["entity.name.tag.css"],settings:{foreground:"#CC7832"}},{name:"CSS terminator",scope:["punctuation.terminator.rule.css"],settings:{foreground:"#CC7832"}},{name:"CSS colon/braces and etc",scope:["keyword.other.unit.percentage.css","punctuation.section.function.end.bracket.round.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.property-list.begin.bracket.curly.css","punctuation.section.property-list.end.bracket.curly.css","punctuation.definition.entity.begin.bracket.square.css","punctuation.definition.entity.end.bracket.square.css"],settings:{foreground:"#A9B7C6"}},{name:"CSS property value",scope:["support.constant.font-name.css","support.constant.color.w3c-standard-color-name.css","support.constant.property-value.css","keyword.other.unit.px.css","keyword.other.unit.em.css"],settings:{foreground:"#A5C261"}},{name:"CSS hex color",scope:"constant.other.color.rgb-value.hex.css",settings:{foreground:"#6897BB"}},{name:"CSS comma",scope:"punctuation.separator.list.comma.css",settings:{foreground:"#CC7832"}},{name:"Sass/SCSS variable",scope:"variable.scss",settings:{foreground:"#6D9CBE"}},{name:"Markdown",scope:["entity.name.section.markdown","punctuation.definition.heading"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"Markdown link",scope:"markup.underline.link",settings:{foreground:"#6D9CBE",fontStyle:"italic"}}],OGe={name:TGe,type:kGe,colors:NGe,tokenColors:AGe};var F9;const Yhe=IGe,MGe=OGe,Zhe=((F9=Yhe.contributes)===null||F9===void 0?void 0:F9.themes)||[],RGe=Zhe[0];Zhe[0]=Object.assign({},RGe,MGe);const PGe="github-plus-theme",FGe="GitHub Plus Theme",BGe="A GitHub inspired color theme for VSCode code and interface!",WGe="1.4.2",VGe="thenikso",HGe="icon.png",zGe={type:"git",url:"https://github.com/thenikso/github-plus-theme"},UGe={url:"https://github.com/thenikso/github-plus-theme/issues"},$Ge={vscode:"^1.16.0"},jGe=["Themes"],qGe={themes:[{id:"GitHub Plus",label:"GitHub Plus",uiTheme:"vs",path:"./themes/github-plus-theme.json"}]},KGe={publish:"vsce publish"},GGe={id:"d0db9e58-8cdf-49c5-87bf-02f037e10bb0",publisherDisplayName:"thenikso",publisherId:"e748af4a-d17d-4c3b-a7e1-2592de9a7e09"},YGe={name:PGe,displayName:FGe,description:BGe,version:WGe,publisher:VGe,icon:HGe,repository:zGe,bugs:UGe,engines:$Ge,categories:jGe,contributes:qGe,scripts:KGe,__metadata:GGe},ZGe="light",XGe={focusBorder:"#fafbfc","inputOption.activeBorder":"#e36209","editor.background":"#ffffff","editor.foreground":"#24292e","editor.lineHighlightBackground":"#fffbdd","editorIndentGuide.background":"#eeeeee","editorLineNumber.foreground":"#cccccc","editorBracketMatch.background":"#f1f8ff","editorBracketMatch.border":"#c8e1ff","titleBar.activeBackground":"#fafbfc","titleBar.border":"#e1e4e8","statusBar.foreground":"#24292e","statusBar.noFolderForeground":"#24292e","statusBar.background":"#fafbfc","statusBar.noFolderBackground":"#fafbfc","statusBar.border":"#e1e4e8","statusBar.debuggingBackground":"#fafbfc","statusBar.debuggingForeground":"#24292e","activityBar.background":"#24292e","activityBar.foreground":"#fafbfc","activityBarBadge.background":"#54a3ff","sideBar.background":"#fafbfc","sideBar.foreground":"#586069","sideBar.border":"#e1e4e8","sideBarTitle.foreground":"#24292e","sideBarSectionHeader.background":"#F1F2F3","sideBarSectionHeader.foreground":"#24292e","notification.background":"#54a3ff","editorGroupHeader.tabsBackground":"#fafbfc","editorGroupHeader.tabsBorder":"#e1e4e8","tab.activeBackground":"#ffffff","tab.activeBorder":"#e36209","tab.inactiveBackground":"#fafbfc","tab.border":"#e1e4e8","tab.inactiveForeground":"#586069","scrollbar.shadow":"#00000000","quickInputList.focusBackground":"#e7e6e5","quickInputList.focusForeground":"#24292e","list.focusOutline":"#ffffff","list.highlightForeground":"#0066BF","list.focusHighlightForeground":"#0066BF","terminal.background":"#ffffff","terminal.foreground":"#333333","terminal.ansiBlack":"#414141","terminal.ansiRed":"#D73A49","terminal.ansiGreen":"#90D259","terminal.ansiYellow":"#F7C400","terminal.ansiBlue":"#005CC5","terminal.ansiMagenta":"#FF73FD","terminal.ansiCyan":"#0BC7D7","terminal.ansiWhite":"#BFBFBF","terminal.ansiBrightBlack":"#989898","terminal.ansiBrightRed":"#FA6F71","terminal.ansiBrightGreen":"#35D61C","terminal.ansiBrightYellow":"#FFCA39","terminal.ansiBrightBlue":"#1C23D6","terminal.ansiBrightMagenta":"#FF00FF","terminal.ansiBrightCyan":"#3CD7E7","terminal.ansiBrightWhite":"#E0E0E0","terminalCursor.foreground":"#363636"},QGe=[{settings:{foreground:"#24292eff",background:"#ffffffff"}},{scope:["keyword.operator.accessor","meta.group.braces.round.function.arguments","meta.template.expression","markup.fenced_code meta.embedded.block"],settings:{foreground:"#24292eff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:["strong","markup.heading.markdown","markup.bold.markdown"],settings:{fontStyle:"bold"}},{scope:["markup.italic.markdown"],settings:{fontStyle:"italic"}},{scope:"meta.link.inline.markdown",settings:{fontStyle:"underline",foreground:"#005cc5"}},{scope:["comment","markup.fenced_code","markup.inline"],settings:{foreground:"#6a737d"}},{scope:"string",settings:{foreground:"#032f62"}},{scope:["constant.numeric","constant.language","variable.language.this","variable.other.class","variable.other.constant","meta.property-name","meta.property-value","support"],settings:{foreground:"#005cc5"}},{scope:["keyword","storage.modifier","storage.type","storage.control.clojure","entity.name.function.clojure","support.function.node","support.type.property-name.json","punctuation.separator.key-value","punctuation.definition.template-expression","support.constant.property-value.css"],settings:{foreground:"#d73a49"}},{scope:"variable.parameter.function",settings:{foreground:"#E27F2D"}},{scope:["entity.name.type","entity.other.inherited-class","meta.function-call","meta.instance.constructor","entity.other.attribute-name","entity.name.function","constant.keyword.clojure"],settings:{foreground:"#6f42c1"}},{scope:["entity.name.tag","string.quoted","string.regexp","string.interpolated","string.template","keyword.other.template"],settings:{foreground:"#22863a"}},{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:["token.error-token","invalid"],settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}},{scope:"markup.inserted",settings:{foreground:"#22863a"}},{scope:"markup.deleted",settings:{foreground:"#d73a49"}},{scope:"markup.changed",settings:{foreground:"#005cc5"}},{scope:"meta.diff.header",settings:{foreground:"#6a737d"}},{scope:["constant.numeric.css","support.function.misc.css","constant.other.color.rgb-value.hex.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.function.end.bracket.round.css"],settings:{foreground:"#353535"}}],JGe={type:ZGe,colors:XGe,tokenColors:QGe};var B9;const Xhe=YGe,eYe=JGe,Qhe=((B9=Xhe.contributes)===null||B9===void 0?void 0:B9.themes)||[],tYe=Qhe[0];Qhe[0]=Object.assign({},tYe,eYe);const nYe={id:"ExtendsEditor",name:"Extends Editor",dispose(){},activate(){Un.editor.onCloseTab((r,e)=>{r!==void 0&&e!==void 0&&Un.editor.closeTab(r,e)}),Un.editor.onCloseAll(r=>{r!==void 0&&Un.editor.closeAll(r)}),Un.editor.onCloseOther((r,e)=>{r&&e!==void 0&&Un.editor.closeOther(r,e)}),Un.editor.onCloseToLeft((r,e)=>{r&&e!==void 0&&Un.editor.closeToLeft(r,e)}),Un.editor.onCloseToRight((r,e)=>{r&&e!==void 0&&Un.editor.closeToRight(r,e)})}},iYe=[vqe,nYe,_qe,Cqe,yqe,gPe,Fhe,jhe,Khe,Yhe,Xhe,mqe];var IE;(function(r){r.beforeInit="before.init",r.beforeLoad="before.load"})(IE||(IE={}));class rYe extends Yx{constructor(e){super(),this._config={extensions:iYe.concat(),defaultLocale:"en"},this.rendered=!1,this.initialLocaleService=t=>{const n=t.reduce((i,s)=>{var o;const a=((o=s.contributes)===null||o===void 0?void 0:o.languages)||[];return i.concat(a)},[]);Un.i18n.initialize(n,localStorage.getItem(QV)||this._config.defaultLocale)},this.getConfig=()=>Object.assign({},this._config),this.render=t=>{if(!this.rendered){this.emit(IE.beforeInit);const[n,i]=Un.extension.splitLanguagesExts(this._config.extensions);this.initialLocaleService(n);const s=[xP,DP,LP,wz,Sz,xz,Kx,kP,qx,bz,Lz,IP,Cz,Ez,yz,EP,TP];Un.layout.onWorkbenchDidMount(()=>{this.rendered||(Un.monacoService.initWorkspace(Un.layout.container),Object.keys(s).forEach(o=>{var a;const l=s[o],u=pt.resolve(l);(a=u.initView)===null||a===void 0||a.call(u)}),this.emit(IE.beforeLoad),Un.extension.load(i),this.rendered=!0)})}return t},this.onBeforeInit=t=>{this.subscribe(IE.beforeInit,t)},this.onBeforeLoad=t=>{this.subscribe(IE.beforeLoad,t)},e.defaultLocale&&(this._config.defaultLocale=e.defaultLocale),Array.isArray(e.extensions)&&this._config.extensions.push(...e.extensions)}}var Dz;(function(r){let e=null;function t(i){return e||(e=new rYe(i),e)}r.create=t;function n(){e=null}r.clearInstance=n})(Dz||(Dz={}));function sYe(r){return Dz.create(r)}function Jte(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W9={exports:{}},gM={exports:{}};const oYe={},aYe=Object.freeze(Object.defineProperty({__proto__:null,default:oYe},Symbol.toStringTag,{value:"Module"})),Jhe=lfe(aYe);gM.exports;var ene;function lYe(){return ene||(ene=1,function(r){(function(e,t){function n(W,I){if(!W)throw new Error(I||"Assertion failed")}function i(W,I){W.super_=I;var R=function(){};R.prototype=I.prototype,W.prototype=new R,W.prototype.constructor=W}function s(W,I,R){if(s.isBN(W))return W;this.negative=0,this.words=null,this.length=0,this.red=null,W!==null&&((I==="le"||I==="be")&&(R=I,I=10),this._init(W||0,I||10,R||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Jhe.Buffer}catch{}s.isBN=function(I){return I instanceof s?!0:I!==null&&typeof I=="object"&&I.constructor.wordSize===s.wordSize&&Array.isArray(I.words)},s.max=function(I,R){return I.cmp(R)>0?I:R},s.min=function(I,R){return I.cmp(R)<0?I:R},s.prototype._init=function(I,R,G){if(typeof I=="number")return this._initNumber(I,R,G);if(typeof I=="object")return this._initArray(I,R,G);R==="hex"&&(R=16),n(R===(R|0)&&R>=2&&R<=36),I=I.toString().replace(/\s+/g,"");var Z=0;I[0]==="-"&&(Z++,this.negative=1),Z<I.length&&(R===16?this._parseHex(I,Z,G):(this._parseBase(I,R,Z),G==="le"&&this._initArray(this.toArray(),R,G)))},s.prototype._initNumber=function(I,R,G){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[I&67108863],this.length=1):I<4503599627370496?(this.words=[I&67108863,I/67108864&67108863],this.length=2):(n(I<9007199254740992),this.words=[I&67108863,I/67108864&67108863,1],this.length=3),G==="le"&&this._initArray(this.toArray(),R,G)},s.prototype._initArray=function(I,R,G){if(n(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var Z=0;Z<this.length;Z++)this.words[Z]=0;var ee,ne,ie=0;if(G==="be")for(Z=I.length-1,ee=0;Z>=0;Z-=3)ne=I[Z]|I[Z-1]<<8|I[Z-2]<<16,this.words[ee]|=ne<<ie&67108863,this.words[ee+1]=ne>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,ee++);else if(G==="le")for(Z=0,ee=0;Z<I.length;Z+=3)ne=I[Z]|I[Z+1]<<8|I[Z+2]<<16,this.words[ee]|=ne<<ie&67108863,this.words[ee+1]=ne>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,ee++);return this.strip()};function a(W,I){var R=W.charCodeAt(I);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function l(W,I,R){var G=a(W,R);return R-1>=I&&(G|=a(W,R-1)<<4),G}s.prototype._parseHex=function(I,R,G){this.length=Math.ceil((I.length-R)/6),this.words=new Array(this.length);for(var Z=0;Z<this.length;Z++)this.words[Z]=0;var ee=0,ne=0,ie;if(G==="be")for(Z=I.length-1;Z>=R;Z-=2)ie=l(I,R,Z)<<ee,this.words[ne]|=ie&67108863,ee>=18?(ee-=18,ne+=1,this.words[ne]|=ie>>>26):ee+=8;else{var te=I.length-R;for(Z=te%2===0?R+1:R;Z<I.length;Z+=2)ie=l(I,R,Z)<<ee,this.words[ne]|=ie&67108863,ee>=18?(ee-=18,ne+=1,this.words[ne]|=ie>>>26):ee+=8}this.strip()};function u(W,I,R,G){for(var Z=0,ee=Math.min(W.length,R),ne=I;ne<ee;ne++){var ie=W.charCodeAt(ne)-48;Z*=G,ie>=49?Z+=ie-49+10:ie>=17?Z+=ie-17+10:Z+=ie}return Z}s.prototype._parseBase=function(I,R,G){this.words=[0],this.length=1;for(var Z=0,ee=1;ee<=67108863;ee*=R)Z++;Z--,ee=ee/R|0;for(var ne=I.length-G,ie=ne%Z,te=Math.min(ne,ne-ie)+G,B=0,K=G;K<te;K+=Z)B=u(I,K,K+Z,R),this.imuln(ee),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B);if(ie!==0){var de=1;for(B=u(I,K,I.length,R),K=0;K<ie;K++)de*=R;this.imuln(de),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B)}this.strip()},s.prototype.copy=function(I){I.words=new Array(this.length);for(var R=0;R<this.length;R++)I.words[R]=this.words[R];I.length=this.length,I.negative=this.negative,I.red=this.red},s.prototype.clone=function(){var I=new s(null);return this.copy(I),I},s.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(I,R){I=I||10,R=R|0||1;var G;if(I===16||I==="hex"){G="";for(var Z=0,ee=0,ne=0;ne<this.length;ne++){var ie=this.words[ne],te=((ie<<Z|ee)&16777215).toString(16);ee=ie>>>24-Z&16777215,ee!==0||ne!==this.length-1?G=d[6-te.length]+te+G:G=te+G,Z+=2,Z>=26&&(Z-=26,ne--)}for(ee!==0&&(G=ee.toString(16)+G);G.length%R!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}if(I===(I|0)&&I>=2&&I<=36){var B=h[I],K=p[I];G="";var de=this.clone();for(de.negative=0;!de.isZero();){var ae=de.modn(K).toString(I);de=de.idivn(K),de.isZero()?G=ae+G:G=d[B-ae.length]+ae+G}for(this.isZero()&&(G="0"+G);G.length%R!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=this.words[1]*67108864:this.length===3&&this.words[2]===1?I+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(I,R){return n(typeof o<"u"),this.toArrayLike(o,I,R)},s.prototype.toArray=function(I,R){return this.toArrayLike(Array,I,R)},s.prototype.toArrayLike=function(I,R,G){var Z=this.byteLength(),ee=G||Math.max(1,Z);n(Z<=ee,"byte array longer than desired length"),n(ee>0,"Requested array length <= 0"),this.strip();var ne=R==="le",ie=new I(ee),te,B,K=this.clone();if(ne){for(B=0;!K.isZero();B++)te=K.andln(255),K.iushrn(8),ie[B]=te;for(;B<ee;B++)ie[B]=0}else{for(B=0;B<ee-Z;B++)ie[B]=0;for(B=0;!K.isZero();B++)te=K.andln(255),K.iushrn(8),ie[ee-B-1]=te}return ie},Math.clz32?s.prototype._countBits=function(I){return 32-Math.clz32(I)}:s.prototype._countBits=function(I){var R=I,G=0;return R>=4096&&(G+=13,R>>>=13),R>=64&&(G+=7,R>>>=7),R>=8&&(G+=4,R>>>=4),R>=2&&(G+=2,R>>>=2),G+R},s.prototype._zeroBits=function(I){if(I===0)return 26;var R=I,G=0;return R&8191||(G+=13,R>>>=13),R&127||(G+=7,R>>>=7),R&15||(G+=4,R>>>=4),R&3||(G+=2,R>>>=2),R&1||G++,G},s.prototype.bitLength=function(){var I=this.words[this.length-1],R=this._countBits(I);return(this.length-1)*26+R};function v(W){for(var I=new Array(W.bitLength()),R=0;R<I.length;R++){var G=R/26|0,Z=R%26;I[R]=(W.words[G]&1<<Z)>>>Z}return I}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,R=0;R<this.length;R++){var G=this._zeroBits(this.words[R]);if(I+=G,G!==26)break}return I},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},s.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var R=0;R<I.length;R++)this.words[R]=this.words[R]|I.words[R];return this.strip()},s.prototype.ior=function(I){return n((this.negative|I.negative)===0),this.iuor(I)},s.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},s.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},s.prototype.iuand=function(I){var R;this.length>I.length?R=I:R=this;for(var G=0;G<R.length;G++)this.words[G]=this.words[G]&I.words[G];return this.length=R.length,this.strip()},s.prototype.iand=function(I){return n((this.negative|I.negative)===0),this.iuand(I)},s.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},s.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},s.prototype.iuxor=function(I){var R,G;this.length>I.length?(R=this,G=I):(R=I,G=this);for(var Z=0;Z<G.length;Z++)this.words[Z]=R.words[Z]^G.words[Z];if(this!==R)for(;Z<R.length;Z++)this.words[Z]=R.words[Z];return this.length=R.length,this.strip()},s.prototype.ixor=function(I){return n((this.negative|I.negative)===0),this.iuxor(I)},s.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},s.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},s.prototype.inotn=function(I){n(typeof I=="number"&&I>=0);var R=Math.ceil(I/26)|0,G=I%26;this._expand(R),G>0&&R--;for(var Z=0;Z<R;Z++)this.words[Z]=~this.words[Z]&67108863;return G>0&&(this.words[Z]=~this.words[Z]&67108863>>26-G),this.strip()},s.prototype.notn=function(I){return this.clone().inotn(I)},s.prototype.setn=function(I,R){n(typeof I=="number"&&I>=0);var G=I/26|0,Z=I%26;return this._expand(G+1),R?this.words[G]=this.words[G]|1<<Z:this.words[G]=this.words[G]&~(1<<Z),this.strip()},s.prototype.iadd=function(I){var R;if(this.negative!==0&&I.negative===0)return this.negative=0,R=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,R=this.isub(I),I.negative=1,R._normSign();var G,Z;this.length>I.length?(G=this,Z=I):(G=I,Z=this);for(var ee=0,ne=0;ne<Z.length;ne++)R=(G.words[ne]|0)+(Z.words[ne]|0)+ee,this.words[ne]=R&67108863,ee=R>>>26;for(;ee!==0&&ne<G.length;ne++)R=(G.words[ne]|0)+ee,this.words[ne]=R&67108863,ee=R>>>26;if(this.length=G.length,ee!==0)this.words[this.length]=ee,this.length++;else if(G!==this)for(;ne<G.length;ne++)this.words[ne]=G.words[ne];return this},s.prototype.add=function(I){var R;return I.negative!==0&&this.negative===0?(I.negative=0,R=this.sub(I),I.negative^=1,R):I.negative===0&&this.negative!==0?(this.negative=0,R=I.sub(this),this.negative=1,R):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},s.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var R=this.iadd(I);return I.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var G=this.cmp(I);if(G===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Z,ee;G>0?(Z=this,ee=I):(Z=I,ee=this);for(var ne=0,ie=0;ie<ee.length;ie++)R=(Z.words[ie]|0)-(ee.words[ie]|0)+ne,ne=R>>26,this.words[ie]=R&67108863;for(;ne!==0&&ie<Z.length;ie++)R=(Z.words[ie]|0)+ne,ne=R>>26,this.words[ie]=R&67108863;if(ne===0&&ie<Z.length&&Z!==this)for(;ie<Z.length;ie++)this.words[ie]=Z.words[ie];return this.length=Math.max(this.length,ie),Z!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(I){return this.clone().isub(I)};function C(W,I,R){R.negative=I.negative^W.negative;var G=W.length+I.length|0;R.length=G,G=G-1|0;var Z=W.words[0]|0,ee=I.words[0]|0,ne=Z*ee,ie=ne&67108863,te=ne/67108864|0;R.words[0]=ie;for(var B=1;B<G;B++){for(var K=te>>>26,de=te&67108863,ae=Math.min(B,I.length-1),De=Math.max(0,B-W.length+1);De<=ae;De++){var Me=B-De|0;Z=W.words[Me]|0,ee=I.words[De]|0,ne=Z*ee+de,K+=ne/67108864|0,de=ne&67108863}R.words[B]=de|0,te=K|0}return te!==0?R.words[B]=te|0:R.length--,R.strip()}var S=function(I,R,G){var Z=I.words,ee=R.words,ne=G.words,ie=0,te,B,K,de=Z[0]|0,ae=de&8191,De=de>>>13,Me=Z[1]|0,Qe=Me&8191,ct=Me>>>13,Rt=Z[2]|0,Ye=Rt&8191,gt=Rt>>>13,Ut=Z[3]|0,_t=Ut&8191,sn=Ut>>>13,rn=Z[4]|0,on=rn&8191,qn=rn>>>13,Ft=Z[5]|0,Pt=Ft&8191,At=Ft>>>13,an=Z[6]|0,ot=an&8191,Mt=an>>>13,cn=Z[7]|0,bn=cn&8191,Pe=cn>>>13,at=Z[8]|0,rt=at&8191,yt=at>>>13,ln=Z[9]|0,Rn=ln&8191,Xt=ln>>>13,Tn=ee[0]|0,Tt=Tn&8191,tn=Tn>>>13,Qn=ee[1]|0,oi=Qn&8191,lt=Qn>>>13,Bs=ee[2]|0,fi=Bs&8191,Ai=Bs>>>13,bs=ee[3]|0,Kn=bs&8191,Pr=bs>>>13,Sa=ee[4]|0,Oi=Sa&8191,vt=Sa>>>13,vo=ee[5]|0,Ge=vo&8191,Ve=vo>>>13,Ze=ee[6]|0,ge=Ze&8191,me=Ze>>>13,Le=ee[7]|0,oe=Le&8191,Te=Le>>>13,ut=ee[8]|0,et=ut&8191,Ot=ut>>>13,Dn=ee[9]|0,N=Dn&8191,q=Dn>>>13;G.negative=I.negative^R.negative,G.length=19,te=Math.imul(ae,Tt),B=Math.imul(ae,tn),B=B+Math.imul(De,Tt)|0,K=Math.imul(De,tn);var le=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(le>>>26)|0,le&=67108863,te=Math.imul(Qe,Tt),B=Math.imul(Qe,tn),B=B+Math.imul(ct,Tt)|0,K=Math.imul(ct,tn),te=te+Math.imul(ae,oi)|0,B=B+Math.imul(ae,lt)|0,B=B+Math.imul(De,oi)|0,K=K+Math.imul(De,lt)|0;var fe=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(fe>>>26)|0,fe&=67108863,te=Math.imul(Ye,Tt),B=Math.imul(Ye,tn),B=B+Math.imul(gt,Tt)|0,K=Math.imul(gt,tn),te=te+Math.imul(Qe,oi)|0,B=B+Math.imul(Qe,lt)|0,B=B+Math.imul(ct,oi)|0,K=K+Math.imul(ct,lt)|0,te=te+Math.imul(ae,fi)|0,B=B+Math.imul(ae,Ai)|0,B=B+Math.imul(De,fi)|0,K=K+Math.imul(De,Ai)|0;var xe=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(xe>>>26)|0,xe&=67108863,te=Math.imul(_t,Tt),B=Math.imul(_t,tn),B=B+Math.imul(sn,Tt)|0,K=Math.imul(sn,tn),te=te+Math.imul(Ye,oi)|0,B=B+Math.imul(Ye,lt)|0,B=B+Math.imul(gt,oi)|0,K=K+Math.imul(gt,lt)|0,te=te+Math.imul(Qe,fi)|0,B=B+Math.imul(Qe,Ai)|0,B=B+Math.imul(ct,fi)|0,K=K+Math.imul(ct,Ai)|0,te=te+Math.imul(ae,Kn)|0,B=B+Math.imul(ae,Pr)|0,B=B+Math.imul(De,Kn)|0,K=K+Math.imul(De,Pr)|0;var be=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(be>>>26)|0,be&=67108863,te=Math.imul(on,Tt),B=Math.imul(on,tn),B=B+Math.imul(qn,Tt)|0,K=Math.imul(qn,tn),te=te+Math.imul(_t,oi)|0,B=B+Math.imul(_t,lt)|0,B=B+Math.imul(sn,oi)|0,K=K+Math.imul(sn,lt)|0,te=te+Math.imul(Ye,fi)|0,B=B+Math.imul(Ye,Ai)|0,B=B+Math.imul(gt,fi)|0,K=K+Math.imul(gt,Ai)|0,te=te+Math.imul(Qe,Kn)|0,B=B+Math.imul(Qe,Pr)|0,B=B+Math.imul(ct,Kn)|0,K=K+Math.imul(ct,Pr)|0,te=te+Math.imul(ae,Oi)|0,B=B+Math.imul(ae,vt)|0,B=B+Math.imul(De,Oi)|0,K=K+Math.imul(De,vt)|0;var qe=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(qe>>>26)|0,qe&=67108863,te=Math.imul(Pt,Tt),B=Math.imul(Pt,tn),B=B+Math.imul(At,Tt)|0,K=Math.imul(At,tn),te=te+Math.imul(on,oi)|0,B=B+Math.imul(on,lt)|0,B=B+Math.imul(qn,oi)|0,K=K+Math.imul(qn,lt)|0,te=te+Math.imul(_t,fi)|0,B=B+Math.imul(_t,Ai)|0,B=B+Math.imul(sn,fi)|0,K=K+Math.imul(sn,Ai)|0,te=te+Math.imul(Ye,Kn)|0,B=B+Math.imul(Ye,Pr)|0,B=B+Math.imul(gt,Kn)|0,K=K+Math.imul(gt,Pr)|0,te=te+Math.imul(Qe,Oi)|0,B=B+Math.imul(Qe,vt)|0,B=B+Math.imul(ct,Oi)|0,K=K+Math.imul(ct,vt)|0,te=te+Math.imul(ae,Ge)|0,B=B+Math.imul(ae,Ve)|0,B=B+Math.imul(De,Ge)|0,K=K+Math.imul(De,Ve)|0;var it=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(it>>>26)|0,it&=67108863,te=Math.imul(ot,Tt),B=Math.imul(ot,tn),B=B+Math.imul(Mt,Tt)|0,K=Math.imul(Mt,tn),te=te+Math.imul(Pt,oi)|0,B=B+Math.imul(Pt,lt)|0,B=B+Math.imul(At,oi)|0,K=K+Math.imul(At,lt)|0,te=te+Math.imul(on,fi)|0,B=B+Math.imul(on,Ai)|0,B=B+Math.imul(qn,fi)|0,K=K+Math.imul(qn,Ai)|0,te=te+Math.imul(_t,Kn)|0,B=B+Math.imul(_t,Pr)|0,B=B+Math.imul(sn,Kn)|0,K=K+Math.imul(sn,Pr)|0,te=te+Math.imul(Ye,Oi)|0,B=B+Math.imul(Ye,vt)|0,B=B+Math.imul(gt,Oi)|0,K=K+Math.imul(gt,vt)|0,te=te+Math.imul(Qe,Ge)|0,B=B+Math.imul(Qe,Ve)|0,B=B+Math.imul(ct,Ge)|0,K=K+Math.imul(ct,Ve)|0,te=te+Math.imul(ae,ge)|0,B=B+Math.imul(ae,me)|0,B=B+Math.imul(De,ge)|0,K=K+Math.imul(De,me)|0;var wt=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(wt>>>26)|0,wt&=67108863,te=Math.imul(bn,Tt),B=Math.imul(bn,tn),B=B+Math.imul(Pe,Tt)|0,K=Math.imul(Pe,tn),te=te+Math.imul(ot,oi)|0,B=B+Math.imul(ot,lt)|0,B=B+Math.imul(Mt,oi)|0,K=K+Math.imul(Mt,lt)|0,te=te+Math.imul(Pt,fi)|0,B=B+Math.imul(Pt,Ai)|0,B=B+Math.imul(At,fi)|0,K=K+Math.imul(At,Ai)|0,te=te+Math.imul(on,Kn)|0,B=B+Math.imul(on,Pr)|0,B=B+Math.imul(qn,Kn)|0,K=K+Math.imul(qn,Pr)|0,te=te+Math.imul(_t,Oi)|0,B=B+Math.imul(_t,vt)|0,B=B+Math.imul(sn,Oi)|0,K=K+Math.imul(sn,vt)|0,te=te+Math.imul(Ye,Ge)|0,B=B+Math.imul(Ye,Ve)|0,B=B+Math.imul(gt,Ge)|0,K=K+Math.imul(gt,Ve)|0,te=te+Math.imul(Qe,ge)|0,B=B+Math.imul(Qe,me)|0,B=B+Math.imul(ct,ge)|0,K=K+Math.imul(ct,me)|0,te=te+Math.imul(ae,oe)|0,B=B+Math.imul(ae,Te)|0,B=B+Math.imul(De,oe)|0,K=K+Math.imul(De,Te)|0;var kt=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(kt>>>26)|0,kt&=67108863,te=Math.imul(rt,Tt),B=Math.imul(rt,tn),B=B+Math.imul(yt,Tt)|0,K=Math.imul(yt,tn),te=te+Math.imul(bn,oi)|0,B=B+Math.imul(bn,lt)|0,B=B+Math.imul(Pe,oi)|0,K=K+Math.imul(Pe,lt)|0,te=te+Math.imul(ot,fi)|0,B=B+Math.imul(ot,Ai)|0,B=B+Math.imul(Mt,fi)|0,K=K+Math.imul(Mt,Ai)|0,te=te+Math.imul(Pt,Kn)|0,B=B+Math.imul(Pt,Pr)|0,B=B+Math.imul(At,Kn)|0,K=K+Math.imul(At,Pr)|0,te=te+Math.imul(on,Oi)|0,B=B+Math.imul(on,vt)|0,B=B+Math.imul(qn,Oi)|0,K=K+Math.imul(qn,vt)|0,te=te+Math.imul(_t,Ge)|0,B=B+Math.imul(_t,Ve)|0,B=B+Math.imul(sn,Ge)|0,K=K+Math.imul(sn,Ve)|0,te=te+Math.imul(Ye,ge)|0,B=B+Math.imul(Ye,me)|0,B=B+Math.imul(gt,ge)|0,K=K+Math.imul(gt,me)|0,te=te+Math.imul(Qe,oe)|0,B=B+Math.imul(Qe,Te)|0,B=B+Math.imul(ct,oe)|0,K=K+Math.imul(ct,Te)|0,te=te+Math.imul(ae,et)|0,B=B+Math.imul(ae,Ot)|0,B=B+Math.imul(De,et)|0,K=K+Math.imul(De,Ot)|0;var fn=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(fn>>>26)|0,fn&=67108863,te=Math.imul(Rn,Tt),B=Math.imul(Rn,tn),B=B+Math.imul(Xt,Tt)|0,K=Math.imul(Xt,tn),te=te+Math.imul(rt,oi)|0,B=B+Math.imul(rt,lt)|0,B=B+Math.imul(yt,oi)|0,K=K+Math.imul(yt,lt)|0,te=te+Math.imul(bn,fi)|0,B=B+Math.imul(bn,Ai)|0,B=B+Math.imul(Pe,fi)|0,K=K+Math.imul(Pe,Ai)|0,te=te+Math.imul(ot,Kn)|0,B=B+Math.imul(ot,Pr)|0,B=B+Math.imul(Mt,Kn)|0,K=K+Math.imul(Mt,Pr)|0,te=te+Math.imul(Pt,Oi)|0,B=B+Math.imul(Pt,vt)|0,B=B+Math.imul(At,Oi)|0,K=K+Math.imul(At,vt)|0,te=te+Math.imul(on,Ge)|0,B=B+Math.imul(on,Ve)|0,B=B+Math.imul(qn,Ge)|0,K=K+Math.imul(qn,Ve)|0,te=te+Math.imul(_t,ge)|0,B=B+Math.imul(_t,me)|0,B=B+Math.imul(sn,ge)|0,K=K+Math.imul(sn,me)|0,te=te+Math.imul(Ye,oe)|0,B=B+Math.imul(Ye,Te)|0,B=B+Math.imul(gt,oe)|0,K=K+Math.imul(gt,Te)|0,te=te+Math.imul(Qe,et)|0,B=B+Math.imul(Qe,Ot)|0,B=B+Math.imul(ct,et)|0,K=K+Math.imul(ct,Ot)|0,te=te+Math.imul(ae,N)|0,B=B+Math.imul(ae,q)|0,B=B+Math.imul(De,N)|0,K=K+Math.imul(De,q)|0;var Yt=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,te=Math.imul(Rn,oi),B=Math.imul(Rn,lt),B=B+Math.imul(Xt,oi)|0,K=Math.imul(Xt,lt),te=te+Math.imul(rt,fi)|0,B=B+Math.imul(rt,Ai)|0,B=B+Math.imul(yt,fi)|0,K=K+Math.imul(yt,Ai)|0,te=te+Math.imul(bn,Kn)|0,B=B+Math.imul(bn,Pr)|0,B=B+Math.imul(Pe,Kn)|0,K=K+Math.imul(Pe,Pr)|0,te=te+Math.imul(ot,Oi)|0,B=B+Math.imul(ot,vt)|0,B=B+Math.imul(Mt,Oi)|0,K=K+Math.imul(Mt,vt)|0,te=te+Math.imul(Pt,Ge)|0,B=B+Math.imul(Pt,Ve)|0,B=B+Math.imul(At,Ge)|0,K=K+Math.imul(At,Ve)|0,te=te+Math.imul(on,ge)|0,B=B+Math.imul(on,me)|0,B=B+Math.imul(qn,ge)|0,K=K+Math.imul(qn,me)|0,te=te+Math.imul(_t,oe)|0,B=B+Math.imul(_t,Te)|0,B=B+Math.imul(sn,oe)|0,K=K+Math.imul(sn,Te)|0,te=te+Math.imul(Ye,et)|0,B=B+Math.imul(Ye,Ot)|0,B=B+Math.imul(gt,et)|0,K=K+Math.imul(gt,Ot)|0,te=te+Math.imul(Qe,N)|0,B=B+Math.imul(Qe,q)|0,B=B+Math.imul(ct,N)|0,K=K+Math.imul(ct,q)|0;var pn=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(pn>>>26)|0,pn&=67108863,te=Math.imul(Rn,fi),B=Math.imul(Rn,Ai),B=B+Math.imul(Xt,fi)|0,K=Math.imul(Xt,Ai),te=te+Math.imul(rt,Kn)|0,B=B+Math.imul(rt,Pr)|0,B=B+Math.imul(yt,Kn)|0,K=K+Math.imul(yt,Pr)|0,te=te+Math.imul(bn,Oi)|0,B=B+Math.imul(bn,vt)|0,B=B+Math.imul(Pe,Oi)|0,K=K+Math.imul(Pe,vt)|0,te=te+Math.imul(ot,Ge)|0,B=B+Math.imul(ot,Ve)|0,B=B+Math.imul(Mt,Ge)|0,K=K+Math.imul(Mt,Ve)|0,te=te+Math.imul(Pt,ge)|0,B=B+Math.imul(Pt,me)|0,B=B+Math.imul(At,ge)|0,K=K+Math.imul(At,me)|0,te=te+Math.imul(on,oe)|0,B=B+Math.imul(on,Te)|0,B=B+Math.imul(qn,oe)|0,K=K+Math.imul(qn,Te)|0,te=te+Math.imul(_t,et)|0,B=B+Math.imul(_t,Ot)|0,B=B+Math.imul(sn,et)|0,K=K+Math.imul(sn,Ot)|0,te=te+Math.imul(Ye,N)|0,B=B+Math.imul(Ye,q)|0,B=B+Math.imul(gt,N)|0,K=K+Math.imul(gt,q)|0;var Zt=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,te=Math.imul(Rn,Kn),B=Math.imul(Rn,Pr),B=B+Math.imul(Xt,Kn)|0,K=Math.imul(Xt,Pr),te=te+Math.imul(rt,Oi)|0,B=B+Math.imul(rt,vt)|0,B=B+Math.imul(yt,Oi)|0,K=K+Math.imul(yt,vt)|0,te=te+Math.imul(bn,Ge)|0,B=B+Math.imul(bn,Ve)|0,B=B+Math.imul(Pe,Ge)|0,K=K+Math.imul(Pe,Ve)|0,te=te+Math.imul(ot,ge)|0,B=B+Math.imul(ot,me)|0,B=B+Math.imul(Mt,ge)|0,K=K+Math.imul(Mt,me)|0,te=te+Math.imul(Pt,oe)|0,B=B+Math.imul(Pt,Te)|0,B=B+Math.imul(At,oe)|0,K=K+Math.imul(At,Te)|0,te=te+Math.imul(on,et)|0,B=B+Math.imul(on,Ot)|0,B=B+Math.imul(qn,et)|0,K=K+Math.imul(qn,Ot)|0,te=te+Math.imul(_t,N)|0,B=B+Math.imul(_t,q)|0,B=B+Math.imul(sn,N)|0,K=K+Math.imul(sn,q)|0;var Ui=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,te=Math.imul(Rn,Oi),B=Math.imul(Rn,vt),B=B+Math.imul(Xt,Oi)|0,K=Math.imul(Xt,vt),te=te+Math.imul(rt,Ge)|0,B=B+Math.imul(rt,Ve)|0,B=B+Math.imul(yt,Ge)|0,K=K+Math.imul(yt,Ve)|0,te=te+Math.imul(bn,ge)|0,B=B+Math.imul(bn,me)|0,B=B+Math.imul(Pe,ge)|0,K=K+Math.imul(Pe,me)|0,te=te+Math.imul(ot,oe)|0,B=B+Math.imul(ot,Te)|0,B=B+Math.imul(Mt,oe)|0,K=K+Math.imul(Mt,Te)|0,te=te+Math.imul(Pt,et)|0,B=B+Math.imul(Pt,Ot)|0,B=B+Math.imul(At,et)|0,K=K+Math.imul(At,Ot)|0,te=te+Math.imul(on,N)|0,B=B+Math.imul(on,q)|0,B=B+Math.imul(qn,N)|0,K=K+Math.imul(qn,q)|0;var _i=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(_i>>>26)|0,_i&=67108863,te=Math.imul(Rn,Ge),B=Math.imul(Rn,Ve),B=B+Math.imul(Xt,Ge)|0,K=Math.imul(Xt,Ve),te=te+Math.imul(rt,ge)|0,B=B+Math.imul(rt,me)|0,B=B+Math.imul(yt,ge)|0,K=K+Math.imul(yt,me)|0,te=te+Math.imul(bn,oe)|0,B=B+Math.imul(bn,Te)|0,B=B+Math.imul(Pe,oe)|0,K=K+Math.imul(Pe,Te)|0,te=te+Math.imul(ot,et)|0,B=B+Math.imul(ot,Ot)|0,B=B+Math.imul(Mt,et)|0,K=K+Math.imul(Mt,Ot)|0,te=te+Math.imul(Pt,N)|0,B=B+Math.imul(Pt,q)|0,B=B+Math.imul(At,N)|0,K=K+Math.imul(At,q)|0;var jr=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(jr>>>26)|0,jr&=67108863,te=Math.imul(Rn,ge),B=Math.imul(Rn,me),B=B+Math.imul(Xt,ge)|0,K=Math.imul(Xt,me),te=te+Math.imul(rt,oe)|0,B=B+Math.imul(rt,Te)|0,B=B+Math.imul(yt,oe)|0,K=K+Math.imul(yt,Te)|0,te=te+Math.imul(bn,et)|0,B=B+Math.imul(bn,Ot)|0,B=B+Math.imul(Pe,et)|0,K=K+Math.imul(Pe,Ot)|0,te=te+Math.imul(ot,N)|0,B=B+Math.imul(ot,q)|0,B=B+Math.imul(Mt,N)|0,K=K+Math.imul(Mt,q)|0;var pr=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(pr>>>26)|0,pr&=67108863,te=Math.imul(Rn,oe),B=Math.imul(Rn,Te),B=B+Math.imul(Xt,oe)|0,K=Math.imul(Xt,Te),te=te+Math.imul(rt,et)|0,B=B+Math.imul(rt,Ot)|0,B=B+Math.imul(yt,et)|0,K=K+Math.imul(yt,Ot)|0,te=te+Math.imul(bn,N)|0,B=B+Math.imul(bn,q)|0,B=B+Math.imul(Pe,N)|0,K=K+Math.imul(Pe,q)|0;var Ka=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(Ka>>>26)|0,Ka&=67108863,te=Math.imul(Rn,et),B=Math.imul(Rn,Ot),B=B+Math.imul(Xt,et)|0,K=Math.imul(Xt,Ot),te=te+Math.imul(rt,N)|0,B=B+Math.imul(rt,q)|0,B=B+Math.imul(yt,N)|0,K=K+Math.imul(yt,q)|0;var bo=(ie+te|0)+((B&8191)<<13)|0;ie=(K+(B>>>13)|0)+(bo>>>26)|0,bo&=67108863,te=Math.imul(Rn,N),B=Math.imul(Rn,q),B=B+Math.imul(Xt,N)|0,K=Math.imul(Xt,q);var tp=(ie+te|0)+((B&8191)<<13)|0;return ie=(K+(B>>>13)|0)+(tp>>>26)|0,tp&=67108863,ne[0]=le,ne[1]=fe,ne[2]=xe,ne[3]=be,ne[4]=qe,ne[5]=it,ne[6]=wt,ne[7]=kt,ne[8]=fn,ne[9]=Yt,ne[10]=pn,ne[11]=Zt,ne[12]=Ui,ne[13]=_i,ne[14]=jr,ne[15]=pr,ne[16]=Ka,ne[17]=bo,ne[18]=tp,ie!==0&&(ne[19]=ie,G.length++),G};Math.imul||(S=C);function E(W,I,R){R.negative=I.negative^W.negative,R.length=W.length+I.length;for(var G=0,Z=0,ee=0;ee<R.length-1;ee++){var ne=Z;Z=0;for(var ie=G&67108863,te=Math.min(ee,I.length-1),B=Math.max(0,ee-W.length+1);B<=te;B++){var K=ee-B,de=W.words[K]|0,ae=I.words[B]|0,De=de*ae,Me=De&67108863;ne=ne+(De/67108864|0)|0,Me=Me+ie|0,ie=Me&67108863,ne=ne+(Me>>>26)|0,Z+=ne>>>26,ne&=67108863}R.words[ee]=ie,G=ne,ne=Z}return G!==0?R.words[ee]=G:R.length--,R.strip()}function k(W,I,R){var G=new D;return G.mulp(W,I,R)}s.prototype.mulTo=function(I,R){var G,Z=this.length+I.length;return this.length===10&&I.length===10?G=S(this,I,R):Z<63?G=C(this,I,R):Z<1024?G=E(this,I,R):G=k(this,I,R),G};function D(W,I){this.x=W,this.y=I}D.prototype.makeRBT=function(I){for(var R=new Array(I),G=s.prototype._countBits(I)-1,Z=0;Z<I;Z++)R[Z]=this.revBin(Z,G,I);return R},D.prototype.revBin=function(I,R,G){if(I===0||I===G-1)return I;for(var Z=0,ee=0;ee<R;ee++)Z|=(I&1)<<R-ee-1,I>>=1;return Z},D.prototype.permute=function(I,R,G,Z,ee,ne){for(var ie=0;ie<ne;ie++)Z[ie]=R[I[ie]],ee[ie]=G[I[ie]]},D.prototype.transform=function(I,R,G,Z,ee,ne){this.permute(ne,I,R,G,Z,ee);for(var ie=1;ie<ee;ie<<=1)for(var te=ie<<1,B=Math.cos(2*Math.PI/te),K=Math.sin(2*Math.PI/te),de=0;de<ee;de+=te)for(var ae=B,De=K,Me=0;Me<ie;Me++){var Qe=G[de+Me],ct=Z[de+Me],Rt=G[de+Me+ie],Ye=Z[de+Me+ie],gt=ae*Rt-De*Ye;Ye=ae*Ye+De*Rt,Rt=gt,G[de+Me]=Qe+Rt,Z[de+Me]=ct+Ye,G[de+Me+ie]=Qe-Rt,Z[de+Me+ie]=ct-Ye,Me!==te&&(gt=B*ae-K*De,De=B*De+K*ae,ae=gt)}},D.prototype.guessLen13b=function(I,R){var G=Math.max(R,I)|1,Z=G&1,ee=0;for(G=G/2|0;G;G=G>>>1)ee++;return 1<<ee+1+Z},D.prototype.conjugate=function(I,R,G){if(!(G<=1))for(var Z=0;Z<G/2;Z++){var ee=I[Z];I[Z]=I[G-Z-1],I[G-Z-1]=ee,ee=R[Z],R[Z]=-R[G-Z-1],R[G-Z-1]=-ee}},D.prototype.normalize13b=function(I,R){for(var G=0,Z=0;Z<R/2;Z++){var ee=Math.round(I[2*Z+1]/R)*8192+Math.round(I[2*Z]/R)+G;I[Z]=ee&67108863,ee<67108864?G=0:G=ee/67108864|0}return I},D.prototype.convert13b=function(I,R,G,Z){for(var ee=0,ne=0;ne<R;ne++)ee=ee+(I[ne]|0),G[2*ne]=ee&8191,ee=ee>>>13,G[2*ne+1]=ee&8191,ee=ee>>>13;for(ne=2*R;ne<Z;++ne)G[ne]=0;n(ee===0),n((ee&-8192)===0)},D.prototype.stub=function(I){for(var R=new Array(I),G=0;G<I;G++)R[G]=0;return R},D.prototype.mulp=function(I,R,G){var Z=2*this.guessLen13b(I.length,R.length),ee=this.makeRBT(Z),ne=this.stub(Z),ie=new Array(Z),te=new Array(Z),B=new Array(Z),K=new Array(Z),de=new Array(Z),ae=new Array(Z),De=G.words;De.length=Z,this.convert13b(I.words,I.length,ie,Z),this.convert13b(R.words,R.length,K,Z),this.transform(ie,ne,te,B,Z,ee),this.transform(K,ne,de,ae,Z,ee);for(var Me=0;Me<Z;Me++){var Qe=te[Me]*de[Me]-B[Me]*ae[Me];B[Me]=te[Me]*ae[Me]+B[Me]*de[Me],te[Me]=Qe}return this.conjugate(te,B,Z),this.transform(te,B,De,ne,Z,ee),this.conjugate(De,ne,Z),this.normalize13b(De,Z),G.negative=I.negative^R.negative,G.length=I.length+R.length,G.strip()},s.prototype.mul=function(I){var R=new s(null);return R.words=new Array(this.length+I.length),this.mulTo(I,R)},s.prototype.mulf=function(I){var R=new s(null);return R.words=new Array(this.length+I.length),k(this,I,R)},s.prototype.imul=function(I){return this.clone().mulTo(I,this)},s.prototype.imuln=function(I){n(typeof I=="number"),n(I<67108864);for(var R=0,G=0;G<this.length;G++){var Z=(this.words[G]|0)*I,ee=(Z&67108863)+(R&67108863);R>>=26,R+=Z/67108864|0,R+=ee>>>26,this.words[G]=ee&67108863}return R!==0&&(this.words[G]=R,this.length++),this},s.prototype.muln=function(I){return this.clone().imuln(I)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(I){var R=v(I);if(R.length===0)return new s(1);for(var G=this,Z=0;Z<R.length&&R[Z]===0;Z++,G=G.sqr());if(++Z<R.length)for(var ee=G.sqr();Z<R.length;Z++,ee=ee.sqr())R[Z]!==0&&(G=G.mul(ee));return G},s.prototype.iushln=function(I){n(typeof I=="number"&&I>=0);var R=I%26,G=(I-R)/26,Z=67108863>>>26-R<<26-R,ee;if(R!==0){var ne=0;for(ee=0;ee<this.length;ee++){var ie=this.words[ee]&Z,te=(this.words[ee]|0)-ie<<R;this.words[ee]=te|ne,ne=ie>>>26-R}ne&&(this.words[ee]=ne,this.length++)}if(G!==0){for(ee=this.length-1;ee>=0;ee--)this.words[ee+G]=this.words[ee];for(ee=0;ee<G;ee++)this.words[ee]=0;this.length+=G}return this.strip()},s.prototype.ishln=function(I){return n(this.negative===0),this.iushln(I)},s.prototype.iushrn=function(I,R,G){n(typeof I=="number"&&I>=0);var Z;R?Z=(R-R%26)/26:Z=0;var ee=I%26,ne=Math.min((I-ee)/26,this.length),ie=67108863^67108863>>>ee<<ee,te=G;if(Z-=ne,Z=Math.max(0,Z),te){for(var B=0;B<ne;B++)te.words[B]=this.words[B];te.length=ne}if(ne!==0)if(this.length>ne)for(this.length-=ne,B=0;B<this.length;B++)this.words[B]=this.words[B+ne];else this.words[0]=0,this.length=1;var K=0;for(B=this.length-1;B>=0&&(K!==0||B>=Z);B--){var de=this.words[B]|0;this.words[B]=K<<26-ee|de>>>ee,K=de&ie}return te&&K!==0&&(te.words[te.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(I,R,G){return n(this.negative===0),this.iushrn(I,R,G)},s.prototype.shln=function(I){return this.clone().ishln(I)},s.prototype.ushln=function(I){return this.clone().iushln(I)},s.prototype.shrn=function(I){return this.clone().ishrn(I)},s.prototype.ushrn=function(I){return this.clone().iushrn(I)},s.prototype.testn=function(I){n(typeof I=="number"&&I>=0);var R=I%26,G=(I-R)/26,Z=1<<R;if(this.length<=G)return!1;var ee=this.words[G];return!!(ee&Z)},s.prototype.imaskn=function(I){n(typeof I=="number"&&I>=0);var R=I%26,G=(I-R)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=G)return this;if(R!==0&&G++,this.length=Math.min(G,this.length),R!==0){var Z=67108863^67108863>>>R<<R;this.words[this.length-1]&=Z}return this.strip()},s.prototype.maskn=function(I){return this.clone().imaskn(I)},s.prototype.iaddn=function(I){return n(typeof I=="number"),n(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(this.words[0]|0)<I?(this.words[0]=I-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},s.prototype._iaddn=function(I){this.words[0]+=I;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},s.prototype.isubn=function(I){if(n(typeof I=="number"),n(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},s.prototype.addn=function(I){return this.clone().iaddn(I)},s.prototype.subn=function(I){return this.clone().isubn(I)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(I,R,G){var Z=I.length+G,ee;this._expand(Z);var ne,ie=0;for(ee=0;ee<I.length;ee++){ne=(this.words[ee+G]|0)+ie;var te=(I.words[ee]|0)*R;ne-=te&67108863,ie=(ne>>26)-(te/67108864|0),this.words[ee+G]=ne&67108863}for(;ee<this.length-G;ee++)ne=(this.words[ee+G]|0)+ie,ie=ne>>26,this.words[ee+G]=ne&67108863;if(ie===0)return this.strip();for(n(ie===-1),ie=0,ee=0;ee<this.length;ee++)ne=-(this.words[ee]|0)+ie,ie=ne>>26,this.words[ee]=ne&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(I,R){var G=this.length-I.length,Z=this.clone(),ee=I,ne=ee.words[ee.length-1]|0,ie=this._countBits(ne);G=26-ie,G!==0&&(ee=ee.ushln(G),Z.iushln(G),ne=ee.words[ee.length-1]|0);var te=Z.length-ee.length,B;if(R!=="mod"){B=new s(null),B.length=te+1,B.words=new Array(B.length);for(var K=0;K<B.length;K++)B.words[K]=0}var de=Z.clone()._ishlnsubmul(ee,1,te);de.negative===0&&(Z=de,B&&(B.words[te]=1));for(var ae=te-1;ae>=0;ae--){var De=(Z.words[ee.length+ae]|0)*67108864+(Z.words[ee.length+ae-1]|0);for(De=Math.min(De/ne|0,67108863),Z._ishlnsubmul(ee,De,ae);Z.negative!==0;)De--,Z.negative=0,Z._ishlnsubmul(ee,1,ae),Z.isZero()||(Z.negative^=1);B&&(B.words[ae]=De)}return B&&B.strip(),Z.strip(),R!=="div"&&G!==0&&Z.iushrn(G),{div:B||null,mod:Z}},s.prototype.divmod=function(I,R,G){if(n(!I.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var Z,ee,ne;return this.negative!==0&&I.negative===0?(ne=this.neg().divmod(I,R),R!=="mod"&&(Z=ne.div.neg()),R!=="div"&&(ee=ne.mod.neg(),G&&ee.negative!==0&&ee.iadd(I)),{div:Z,mod:ee}):this.negative===0&&I.negative!==0?(ne=this.divmod(I.neg(),R),R!=="mod"&&(Z=ne.div.neg()),{div:Z,mod:ne.mod}):this.negative&I.negative?(ne=this.neg().divmod(I.neg(),R),R!=="div"&&(ee=ne.mod.neg(),G&&ee.negative!==0&&ee.isub(I)),{div:ne.div,mod:ee}):I.length>this.length||this.cmp(I)<0?{div:new s(0),mod:this}:I.length===1?R==="div"?{div:this.divn(I.words[0]),mod:null}:R==="mod"?{div:null,mod:new s(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new s(this.modn(I.words[0]))}:this._wordDiv(I,R)},s.prototype.div=function(I){return this.divmod(I,"div",!1).div},s.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},s.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},s.prototype.divRound=function(I){var R=this.divmod(I);if(R.mod.isZero())return R.div;var G=R.div.negative!==0?R.mod.isub(I):R.mod,Z=I.ushrn(1),ee=I.andln(1),ne=G.cmp(Z);return ne<0||ee===1&&ne===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},s.prototype.modn=function(I){n(I<=67108863);for(var R=(1<<26)%I,G=0,Z=this.length-1;Z>=0;Z--)G=(R*G+(this.words[Z]|0))%I;return G},s.prototype.idivn=function(I){n(I<=67108863);for(var R=0,G=this.length-1;G>=0;G--){var Z=(this.words[G]|0)+R*67108864;this.words[G]=Z/I|0,R=Z%I}return this.strip()},s.prototype.divn=function(I){return this.clone().idivn(I)},s.prototype.egcd=function(I){n(I.negative===0),n(!I.isZero());var R=this,G=I.clone();R.negative!==0?R=R.umod(I):R=R.clone();for(var Z=new s(1),ee=new s(0),ne=new s(0),ie=new s(1),te=0;R.isEven()&&G.isEven();)R.iushrn(1),G.iushrn(1),++te;for(var B=G.clone(),K=R.clone();!R.isZero();){for(var de=0,ae=1;!(R.words[0]&ae)&&de<26;++de,ae<<=1);if(de>0)for(R.iushrn(de);de-- >0;)(Z.isOdd()||ee.isOdd())&&(Z.iadd(B),ee.isub(K)),Z.iushrn(1),ee.iushrn(1);for(var De=0,Me=1;!(G.words[0]&Me)&&De<26;++De,Me<<=1);if(De>0)for(G.iushrn(De);De-- >0;)(ne.isOdd()||ie.isOdd())&&(ne.iadd(B),ie.isub(K)),ne.iushrn(1),ie.iushrn(1);R.cmp(G)>=0?(R.isub(G),Z.isub(ne),ee.isub(ie)):(G.isub(R),ne.isub(Z),ie.isub(ee))}return{a:ne,b:ie,gcd:G.iushln(te)}},s.prototype._invmp=function(I){n(I.negative===0),n(!I.isZero());var R=this,G=I.clone();R.negative!==0?R=R.umod(I):R=R.clone();for(var Z=new s(1),ee=new s(0),ne=G.clone();R.cmpn(1)>0&&G.cmpn(1)>0;){for(var ie=0,te=1;!(R.words[0]&te)&&ie<26;++ie,te<<=1);if(ie>0)for(R.iushrn(ie);ie-- >0;)Z.isOdd()&&Z.iadd(ne),Z.iushrn(1);for(var B=0,K=1;!(G.words[0]&K)&&B<26;++B,K<<=1);if(B>0)for(G.iushrn(B);B-- >0;)ee.isOdd()&&ee.iadd(ne),ee.iushrn(1);R.cmp(G)>=0?(R.isub(G),Z.isub(ee)):(G.isub(R),ee.isub(Z))}var de;return R.cmpn(1)===0?de=Z:de=ee,de.cmpn(0)<0&&de.iadd(I),de},s.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var R=this.clone(),G=I.clone();R.negative=0,G.negative=0;for(var Z=0;R.isEven()&&G.isEven();Z++)R.iushrn(1),G.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;G.isEven();)G.iushrn(1);var ee=R.cmp(G);if(ee<0){var ne=R;R=G,G=ne}else if(ee===0||G.cmpn(1)===0)break;R.isub(G)}while(!0);return G.iushln(Z)},s.prototype.invm=function(I){return this.egcd(I).a.umod(I)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(I){return this.words[0]&I},s.prototype.bincn=function(I){n(typeof I=="number");var R=I%26,G=(I-R)/26,Z=1<<R;if(this.length<=G)return this._expand(G+1),this.words[G]|=Z,this;for(var ee=Z,ne=G;ee!==0&&ne<this.length;ne++){var ie=this.words[ne]|0;ie+=ee,ee=ie>>>26,ie&=67108863,this.words[ne]=ie}return ee!==0&&(this.words[ne]=ee,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(I){var R=I<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var G;if(this.length>1)G=1;else{R&&(I=-I),n(I<=67108863,"Number is too big");var Z=this.words[0]|0;G=Z===I?0:Z<I?-1:1}return this.negative!==0?-G|0:G},s.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var R=this.ucmp(I);return this.negative!==0?-R|0:R},s.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var R=0,G=this.length-1;G>=0;G--){var Z=this.words[G]|0,ee=I.words[G]|0;if(Z!==ee){Z<ee?R=-1:Z>ee&&(R=1);break}}return R},s.prototype.gtn=function(I){return this.cmpn(I)===1},s.prototype.gt=function(I){return this.cmp(I)===1},s.prototype.gten=function(I){return this.cmpn(I)>=0},s.prototype.gte=function(I){return this.cmp(I)>=0},s.prototype.ltn=function(I){return this.cmpn(I)===-1},s.prototype.lt=function(I){return this.cmp(I)===-1},s.prototype.lten=function(I){return this.cmpn(I)<=0},s.prototype.lte=function(I){return this.cmp(I)<=0},s.prototype.eqn=function(I){return this.cmpn(I)===0},s.prototype.eq=function(I){return this.cmp(I)===0},s.red=function(I){return new z(I)},s.prototype.toRed=function(I){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(I){return this.red=I,this},s.prototype.forceRed=function(I){return n(!this.red,"Already a number in reduction context"),this._forceRed(I)},s.prototype.redAdd=function(I){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},s.prototype.redIAdd=function(I){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},s.prototype.redSub=function(I){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},s.prototype.redISub=function(I){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},s.prototype.redShl=function(I){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},s.prototype.redMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},s.prototype.redIMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(I){return n(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var O={k256:null,p224:null,p192:null,p25519:null};function H(W,I){this.name=W,this.p=new s(I,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var I=new s(null);return I.words=new Array(Math.ceil(this.n/13)),I},H.prototype.ireduce=function(I){var R=I,G;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),G=R.bitLength();while(G>this.n);var Z=G<this.n?-1:R.ucmp(this.p);return Z===0?(R.words[0]=0,R.length=1):Z>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},H.prototype.split=function(I,R){I.iushrn(this.n,0,R)},H.prototype.imulK=function(I){return I.imul(this.k)};function V(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(V,H),V.prototype.split=function(I,R){for(var G=4194303,Z=Math.min(I.length,9),ee=0;ee<Z;ee++)R.words[ee]=I.words[ee];if(R.length=Z,I.length<=9){I.words[0]=0,I.length=1;return}var ne=I.words[9];for(R.words[R.length++]=ne&G,ee=10;ee<I.length;ee++){var ie=I.words[ee]|0;I.words[ee-10]=(ie&G)<<4|ne>>>22,ne=ie}ne>>>=22,I.words[ee-10]=ne,ne===0&&I.length>10?I.length-=10:I.length-=9},V.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var R=0,G=0;G<I.length;G++){var Z=I.words[G]|0;R+=Z*977,I.words[G]=R&67108863,R=Z*64+(R/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I};function X(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(X,H);function $(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i($,H);function P(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(P,H),P.prototype.imulK=function(I){for(var R=0,G=0;G<I.length;G++){var Z=(I.words[G]|0)*19+R,ee=Z&67108863;Z>>>=26,I.words[G]=ee,R=Z}return R!==0&&(I.words[I.length++]=R),I},s._prime=function(I){if(O[I])return O[I];var R;if(I==="k256")R=new V;else if(I==="p224")R=new X;else if(I==="p192")R=new $;else if(I==="p25519")R=new P;else throw new Error("Unknown prime "+I);return O[I]=R,R};function z(W){if(typeof W=="string"){var I=s._prime(W);this.m=I.p,this.prime=I}else n(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}z.prototype._verify1=function(I){n(I.negative===0,"red works only with positives"),n(I.red,"red works only with red numbers")},z.prototype._verify2=function(I,R){n((I.negative|R.negative)===0,"red works only with positives"),n(I.red&&I.red===R.red,"red works only with red numbers")},z.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},z.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},z.prototype.add=function(I,R){this._verify2(I,R);var G=I.add(R);return G.cmp(this.m)>=0&&G.isub(this.m),G._forceRed(this)},z.prototype.iadd=function(I,R){this._verify2(I,R);var G=I.iadd(R);return G.cmp(this.m)>=0&&G.isub(this.m),G},z.prototype.sub=function(I,R){this._verify2(I,R);var G=I.sub(R);return G.cmpn(0)<0&&G.iadd(this.m),G._forceRed(this)},z.prototype.isub=function(I,R){this._verify2(I,R);var G=I.isub(R);return G.cmpn(0)<0&&G.iadd(this.m),G},z.prototype.shl=function(I,R){return this._verify1(I),this.imod(I.ushln(R))},z.prototype.imul=function(I,R){return this._verify2(I,R),this.imod(I.imul(R))},z.prototype.mul=function(I,R){return this._verify2(I,R),this.imod(I.mul(R))},z.prototype.isqr=function(I){return this.imul(I,I.clone())},z.prototype.sqr=function(I){return this.mul(I,I)},z.prototype.sqrt=function(I){if(I.isZero())return I.clone();var R=this.m.andln(3);if(n(R%2===1),R===3){var G=this.m.add(new s(1)).iushrn(2);return this.pow(I,G)}for(var Z=this.m.subn(1),ee=0;!Z.isZero()&&Z.andln(1)===0;)ee++,Z.iushrn(1);n(!Z.isZero());var ne=new s(1).toRed(this),ie=ne.redNeg(),te=this.m.subn(1).iushrn(1),B=this.m.bitLength();for(B=new s(2*B*B).toRed(this);this.pow(B,te).cmp(ie)!==0;)B.redIAdd(ie);for(var K=this.pow(B,Z),de=this.pow(I,Z.addn(1).iushrn(1)),ae=this.pow(I,Z),De=ee;ae.cmp(ne)!==0;){for(var Me=ae,Qe=0;Me.cmp(ne)!==0;Qe++)Me=Me.redSqr();n(Qe<De);var ct=this.pow(K,new s(1).iushln(De-Qe-1));de=de.redMul(ct),K=ct.redSqr(),ae=ae.redMul(K),De=Qe}return de},z.prototype.invm=function(I){var R=I._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},z.prototype.pow=function(I,R){if(R.isZero())return new s(1).toRed(this);if(R.cmpn(1)===0)return I.clone();var G=4,Z=new Array(1<<G);Z[0]=new s(1).toRed(this),Z[1]=I;for(var ee=2;ee<Z.length;ee++)Z[ee]=this.mul(Z[ee-1],I);var ne=Z[0],ie=0,te=0,B=R.bitLength()%26;for(B===0&&(B=26),ee=R.length-1;ee>=0;ee--){for(var K=R.words[ee],de=B-1;de>=0;de--){var ae=K>>de&1;if(ne!==Z[0]&&(ne=this.sqr(ne)),ae===0&&ie===0){te=0;continue}ie<<=1,ie|=ae,te++,!(te!==G&&(ee!==0||de!==0))&&(ne=this.mul(ne,Z[ie]),te=0,ie=0)}B=26}return ne},z.prototype.convertTo=function(I){var R=I.umod(this.m);return R===I?R.clone():R},z.prototype.convertFrom=function(I){var R=I.clone();return R.red=null,R},s.mont=function(I){return new M(I)};function M(W){z.call(this,W),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(M,z),M.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},M.prototype.convertFrom=function(I){var R=this.imod(I.mul(this.rinv));return R.red=null,R},M.prototype.imul=function(I,R){if(I.isZero()||R.isZero())return I.words[0]=0,I.length=1,I;var G=I.imul(R),Z=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ee=G.isub(Z).iushrn(this.shift),ne=ee;return ee.cmp(this.m)>=0?ne=ee.isub(this.m):ee.cmpn(0)<0&&(ne=ee.iadd(this.m)),ne._forceRed(this)},M.prototype.mul=function(I,R){if(I.isZero()||R.isZero())return new s(0)._forceRed(this);var G=I.mul(R),Z=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ee=G.isub(Z).iushrn(this.shift),ne=ee;return ee.cmp(this.m)>=0?ne=ee.isub(this.m):ee.cmpn(0)<0&&(ne=ee.iadd(this.m)),ne._forceRed(this)},M.prototype.invm=function(I){var R=this.imod(I._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(r,Ou)}(gM)),gM.exports}/**@license
 * LIPS is Pretty Simple - simple scheme like lisp in JavaScript
 *
 * Copyright (c) 2018-2019 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * includes:
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 */var tne;function uYe(){return tne||(tne=1,function(r){(function(e,t){r.exports?r.exports=t(e,lYe()):e.lips=t(e,e.BN)})(typeof Ou<"u"?Ou:window,function(e,t,n){function i(N,q){var le=!1,fe=!0,xe=N.document,be=xe.documentElement,qe=xe.addEventListener,it=qe?"addEventListener":"attachEvent",wt=qe?"removeEventListener":"detachEvent",kt=qe?"":"on",fn=function(pn){pn.type=="readystatechange"&&xe.readyState!="complete"||((pn.type=="load"?N:xe)[wt](kt+pn.type,fn,!1),!le&&(le=!0)&&q.call(N,pn.type||pn))},Yt=function(){try{be.doScroll("left")}catch{setTimeout(Yt,50);return}fn("poll")};if(xe.readyState=="complete")q.call(N,"lazy");else{if(!qe&&be.doScroll){try{fe=!N.frameElement}catch{}fe&&Yt()}xe[it](kt+"DOMContentLoaded",fn,!1),xe[it](kt+"readystatechange",fn,!1),N[it](kt+"load",fn,!1)}}e.fetch||(e.fetch=function(N,q){return q=q||{},new Promise((le,fe)=>{let xe=new XMLHttpRequest;xe.open(q.method||"get",N,!0);for(let qe in q.headers)xe.setRequestHeader(qe,q.headers[qe]);xe.withCredentials=q.credentials=="include",xe.onload=()=>{le(be())},xe.onerror=fe,xe.send(q.body||null);function be(){let qe=[],it=[],wt={},kt;return xe.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(fn,Yt,pn)=>{qe.push(Yt=Yt.toLowerCase()),it.push([Yt,pn]),kt=wt[Yt],wt[Yt]=kt?`${kt},${pn}`:pn}),{ok:(xe.status/100|0)==2,status:xe.status,statusText:xe.statusText,url:xe.responseURL,clone:be,text:()=>Promise.resolve(xe.responseText),json:()=>Promise.resolve(xe.responseText).then(JSON.parse),blob:()=>Promise.resolve(new Blob([xe.response])),headers:{keys:()=>qe,entries:()=>it,get:fn=>wt[fn.toLowerCase()],has:fn=>fn.toLowerCase()in wt}}}})});var s=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimy]*)$/,o=/^[-+]?[0-9]+([eE][-+]?[0-9]+)?$/,a=/^([-+]?((\.[0-9]+|[0-9]+\.[0-9]+)([eE][-+]?[0-9]+)?)|[0-9]+\.)$/;function l(N){function q(fe){if(fe.match(/^['"]/)){if(fe==='""'||fe==="''")return"";var xe=fe[0],be=new RegExp("((^|[^\\\\])(?:\\\\\\\\)*)"+xe,"g");fe=fe.replace(be,"$1")}return JSON.parse('"'+fe.replace(/\n/g,"\\n")+'"')}var le=N.match(s);return le?new RegExp(le[1],le[2]):N.match(/['"]/)?q(N):N.match(o)?lt(parseFloat(N)):N.match(a)?lt(parseFloat(N),!0):N==="nil"?de:N==="true"?!0:N==="false"?!1:new B(N)}function u(N){return!(["(",")"].includes(N)||N.match(s)||N.match(/['"]/)||N.match(o)||N.match(a)||["nil","true","false"].includes(N))}var d=/("(?:\\[\S\s]|[^"])*"|\/(?! )[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|\(|\)|$)|;.*)/g,h=/"(?:\\[\S\s]|[^"])*"/g;function p(){var N=Object.keys(k).map(C).join("|");return new RegExp(`("(?:\\\\[\\S\\s]|[^"])*"|\\/(?! )[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimy]*(?=\\s|\\(|\\)|$)|\\(|\\)|'|"(?:\\\\[\\S\\s]|[^"])+|\\n|(?:\\\\[\\S\\s]|[^"])*"|;.*|(?:[-+]?(?:(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)[0-9]|\\.{2,}|${N}|[^(\\s)]+)`,"gim")}function v(N,q=1){return N[N.length-q]}function C(N){if(typeof N=="string"){var q=/([-\\^$[\]()+{}?*.|])/g;return N.replace(q,"\\$1")}}function S(N){var q=p();N=N.replace(/\n\r|\r/g,`
`);var le=0,fe=0,xe=[],be=[],qe=0;return N.split(d).filter(Boolean).forEach(function(it){if(it.match(d)){if(qe=0,be.length){var wt=v(be);if(wt.token.match(/\n/)){var kt=wt.token.split(`
`).pop();qe+=kt.length}else qe+=wt.token.length;qe+=wt.col}var fn={col:qe,line:fe,token:it,offset:le};xe.push(fn),be.push(fn),le+=it.length,qe+=it.length,fe+=(it.match(`
`)||[]).length;return}it.split(q).filter(Boolean).forEach(function(Yt){var pn={col:qe,line:fe,token:Yt,offset:le};qe+=Yt.length,le+=Yt.length,xe.push(pn),be.push(pn),Yt===`
`&&(++fe,be=[],qe=0)})}),xe}function E(N,q){return q?S(N):S(N).map(function(le){return le.token.trim()}).filter(function(le){return le&&!le.match(/^;/)})}var k={"'":new B("quote"),"`":new B("quasiquote"),",@":new B("unquote-splicing"),",":new B("unquote")};function D(N){typeof N=="string"&&(N=E(N));var q=[],le=[],fe=null,xe=Object.keys(k),be=xe.map(pn=>k[pn].name),qe=0,it=!1,wt=[],kt=[],fn=0;function Yt(){var pn=q[q.length-1];pn instanceof Array&&pn[0]instanceof B&&be.includes(pn[0].name)&&q.length>1&&!pn[0].literal&&(q.pop(),q[q.length-1].length===1&&q[q.length-1][0]instanceof B?q[q.length-1].push(pn):q[q.length-1]instanceof ae?q[q.length-1].cdr instanceof ae?q[q.length-1]=new ae(q[q.length-1],ae.fromArray(pn)):q[q.length-1].cdr=ae.fromArray(pn):q[q.length-1].push(pn))}if(N.forEach(function(pn){var Zt=q[q.length-1];if(xe.indexOf(pn)!==-1)fn++,fe=pn,q.push([k[fe]]),fe||(kt=[]),kt.push(fe);else if(fe&&(wt.push(kt),kt=[]),pn==="(")it=!0,qe++,q.push([]),fe=null,fn=0;else if(pn==="."&&!it)q[q.length-1]=ae.fromArray(Zt);else if(pn===")"){if(qe--,!q.length)throw new Error("Unbalanced parenthesis");if(q.length===1)le.push(q.pop());else if(q.length>1){var Ui=q.pop();if(Zt=q[q.length-1],Zt instanceof Array?Zt.push(Ui):Zt instanceof ae&&Zt.append(ae.fromArray(Ui)),wt.length)for(kt=wt.pop();kt.length;)Yt(),kt.pop();else Yt()}qe===0&&q.length&&le.push(q.pop())}else{it=!1;var _i=l(pn);if(fe){for(;fn--;)q[q.length-1].push(_i),_i=q.pop();wt.pop(),fn=0,fe=!1}else _i instanceof B&&be.includes(_i.name)&&(_i.literal=!0);if(Zt=q[q.length-1],Zt instanceof ae)for(var jr=Zt;;)if(jr.cdr===de){_i instanceof Array?jr.cdr=ae.fromArray(_i):jr.cdr=_i;break}else jr=jr.cdr;else q.length?Zt.push(_i):le.push(_i)}}),!N.filter(pn=>pn.match(/^[()]$/)).length&&q.length&&(le=le.concat(q),q=[]),q.length)throw new Error("Unbalanced parenthesis 2");return le.map(pn=>pn instanceof Array?ae.fromArray(pn):pn)}function O(N,q=fe=>fe,le=null){if(rn(N)){var fe=N.then(q);return le===null?fe:fe.catch(le)}return q(N)}function H(N,q){if(q instanceof RegExp)return le=>String(le).match(q);if(typeof q!="function")throw new Error(`${N} argument need to be a function or RegExp`);return q}function V(N,q,le){return q&&(le?N.__doc__=q:N.__doc__=X(q)),N}function X(N){return N.split(`
`).map(q=>q.trim()).join(`
`)}function $(N,q=1){var le=N.length;if(q<=0)throw Error(`previousSexp: Invlaid argument sexp = ${q}`);e:for(;q--&&le>=0;){for(var fe=1;fe>0;){var xe=N[--le];if(!xe)break e;xe==="("||xe.token==="("?fe--:(xe===")"||xe.token===")")&&fe++}le--}return N.slice(le+1)}function P(N){if(!N||!N.length)return 0;var q=N.length;if(N[q-1].token===`
`)return 0;for(;--q;)if(N[q].token===`
`){var le=(N[q+1]||{}).token;if(le)return le.length}return 0}function z(N,q){return le(N,q)===q.length;function le(fe,xe){function be(){return it>0&&kt>0&&fe[it-1]===xe[kt-1]&&fe[it+1]===xe[kt]}function qe(){return fe[it]===Symbol.for("symbol")&&!u(xe[kt])}for(var it=0,wt={},kt=0;kt<xe.length;++kt){if(typeof fe[it]>"u")return kt;if(xe[kt].trim()){if(fe[it]instanceof I){if(fe[it].flag==="+"){for(var fn;kt<xe.length&&(fn=le(fe[it].pattern,xe.slice(kt)),fn!==-1);)kt+=fn;if(fn===-1&&xe[kt]&&!fe[it+1])return-1;it++,kt-=1;continue}else if(fe[it].flag==="?"){fn=le(fe[it].pattern,xe.slice(kt)),fn===-1?kt-=2:it++;continue}}if(fe[it]instanceof RegExp){if(!xe[kt].match(fe[it]))return-1}else if(typeof fe[it]=="string"){if(fe[it]!==xe[kt])return-1}else if(typeof fe[it]=="symbol"){if(fe[it]===Symbol.for("*")){if(wt[it]=wt[it]||0,xe[kt]==="("?wt[it]++:xe[kt]===")"&&wt[it]--,be())kt-=1;else if(typeof fe[it+1]<"u"&&wt[it]===0&&fe[it+1]!==xe[kt+1]||wt[it]>0)continue}else if(qe())return-1}else if(fe[it]instanceof Array){var Yt=le(fe[it],xe.slice(kt));if(Yt===-1||Yt+kt>xe.length)return-1;kt+=Yt-1,it++;continue}else return-1;it++}}return fe.length!==it?-1:xe.length}}function M(N){this._code=N.replace(/\r/g,"")}M.defaults={offset:0,indent:2,specials:[/^define/,"lambda","let","let*"]},M.match=z,M.prototype._options=function(q){var le=M.defaults;if(typeof q>"u")return Object.assign({},le);var fe=q&&q.specials||[];return Object.assign({},le,q,{specials:le.specials.concat(fe)})},M.prototype.indent=function(q){var le=E(this._code,!0);return this._indent(le,q)},M.matchSpecial=function(N,q){var le=q.specials;if(le.indexOf(N)!==-1)return!0;var fe=le.filter(xe=>xe instanceof RegExp);for(let xe of fe)if(N.match(xe))return!0;return!1},M.prototype._indent=function(q,le){var fe=this._options(le),xe=P(q),be=$(q);if(be&&be.length){if(be[0].line>0&&(fe.offset=0),be.toString()===q.toString()&&ut(be))return fe.offset+be[0].col;if(be.length===1)return fe.offset+be[0].col+1;if(M.matchSpecial(be[1].token,fe))return fe.offset+be[0].col+fe.indent;if(be[0].line<be[1].line)return fe.offset+be[0].col+1;if(be.length>3&&be[1].line===be[3].line)return be[1].token==="("?fe.offset+be[1].col:fe.offset+be[3].col;if(be[0].line===be[1].line)return fe.offset+fe.indent+be[0].col;for(var qe=be.slice(2),it=0;it<qe.length;++it){var wt=qe[it];if(wt.token.trim())return wt.col}}else return 0;return xe+fe.indent};function W(N){this.pattern=N}W.prototype.match=function(N){return N.match(this.pattern)};function I(N,q){this.pattern=N,this.flag=q}M.Pattern=I,M.Ahead=W;const R=new W(/[^)]/),G=Symbol.for("*"),Z=new I(["(",G,")"],"+"),ee=new I([Symbol.for("symbol")],"?"),ne=new I(["(",Symbol.for("symbol"),G,")"],"+");M.rules=[[["(","begin"],1],[["(","begin",Z],1,R],[["(",/^let\*?$/,ee,"(",ne,")"],1],[["(",/^let\*?$/,ee,"(",ne],2,R],[["(",/^let\*?$/,ee,["(",ne,")"],Z],1,R],[[/(?!lambda)/,"(",G,")"],1,R],[["(","if",/[^()]/],1],[["(","if",/[^()]/,G],1],[["(","if",["(",G,")"]],1],[["(","if",["(",G,")"],/[^()]/],1],[["(","if",["(",G,")"],["(",G,")"]],1,R],[["(",/^(define|lambda)/,["(",G,")"],h],1],[["(",/^(define|lambda)/,"(",G,")"],1],[["(",/^(define|lambda)/,["(",G,")"],h,Z],1,R],[["(",/^(define|lambda)/,["(",G,")"],Z],1,R]],M.prototype.break=function(){var N=this._code.replace(/\n[ \t]*/g,`
 `);const q=wt=>wt.token.match(h)?wt.token:wt.token.replace(/\s+/," ");var le=E(N,!0).map(q).filter(wt=>wt!==`
`);const{rules:fe}=M;for(let wt=0;wt<le.length;++wt)if(le[wt].trim()){var xe=le.slice(0,wt),be={};fe.map(kt=>kt[1]).forEach(kt=>{be[kt]||(be[kt]=$(xe,kt))});for(let[kt,fn,Yt]of fe){var qe=z(kt,be[fn].filter(pn=>pn.trim())),it=le.slice(wt).find(pn=>pn.trim());if(qe&&(Yt instanceof W&&Yt.match(it)||!Yt)){le.splice(wt,0,`
`),wt++;continue}}}return this._code=le.join(""),this},M.prototype._spaces=function(N){return new Array(N+1).join(" ")},M.prototype.format=function(q){for(var le=this._code.replace(/[ \t]*\n[ \t]*/g,`
 `),fe=E(le,!0),xe=this._options(q),be=0,qe=0,it=0;it<fe.length;++it){var wt=fe[it];if(wt.token===`
`&&(be=this._indent(fe.slice(0,it),xe),qe+=be,fe[it+1])){fe[it+1].token=this._spaces(be),be--,qe--;for(var kt=it+2;kt<fe.length;++kt)if(fe[kt].offset+=qe,fe[kt].col+=be,fe[kt].token===`
`){it=kt-1;break}}}return fe.map(fn=>{if(fn.token.match(h)&&fn.token.match(/\n/)){var Yt=new Array(fn.col+1).join(" "),pn=fn.token.split(`
`);fn.token=[pn[0]].concat(pn.slice(1).map(Zt=>Yt+Zt)).join(`
`)}return fn.token}).join("")};function ie(N,q){var le=Object.prototype.toString,fe="[object Array]",xe=[],be=q&&N||N.slice(),qe;if(!N.length)return xe;qe=be.pop();do le.call(qe)===fe?be.push.apply(be,qe):xe.push(qe);while(be.length&&(qe=be.pop())!==n);return xe.reverse(),xe}function te(N){return typeof N=="symbol"||typeof N=="object"&&Object.prototype.toString.call(N)==="[object Symbol]"}function B(N){if(typeof this<"u"&&this.constructor!==B||typeof this>"u")return new B(N);this.name=N}B.is=function(N,q){return N instanceof B&&(typeof q=="string"&&N.name===q||q instanceof RegExp&&q.test(N.name))},B.prototype.toJSON=B.prototype.toString=function(){return te(this.name)?this.name.toString().replace(/^Symbol\(([^)]+)\)/,"$1"):this.name};function K(){}K.prototype.toString=function(){return"()"};var de=new K;function ae(N,q){if(typeof this<"u"&&this.constructor!==ae||typeof this>"u")return new ae(N,q);this.car=N,this.cdr=q}function De(){return new ae(n,de)}function Me(N,q){return function(fe){if(vt(N,fe,["pair","nil"]),fe instanceof ae&&fe.isEmptyList())return[];for(var xe=[],be=fe;be instanceof ae;){if(be.haveCycles("cdr"))break;var qe=be.car;q&&qe instanceof ae&&(qe=this.get(N).call(this,qe)),xe.push(qe),be=be.cdr}return xe}}ae.prototype.flatten=function(){return ae.fromArray(ie(this.toArray()))},ae.prototype.length=function(){if(Ye(this))return 0;for(var N=0,q=this;!(!q||q===de||!(q instanceof ae)||q.haveCycles("cdr"));)N++,q=q.cdr;return N},ae.prototype.clone=function(){var N=new Map;function q(le){if(le instanceof ae){if(N.has(le))return N.get(le);var fe=new ae;return N.set(le,fe),fe.car=q(le.car),fe.cdr=q(le.cdr),fe.cycles=le.cycles,fe}return le}return q(this)},ae.prototype.toArray=function(){if(this.isEmptyList())return[];var N=[];return this.car instanceof ae?N.push(this.car.toArray()):N.push(this.car),this.cdr instanceof ae&&(N=N.concat(this.cdr.toArray())),N},ae.prototype.isEmptyList=function(){return typeof this.car>"u"&&this.cdr===de},ae.fromArray=function(N){if(N instanceof ae)return N;if(N.length&&!(N instanceof Array)&&(N=[...N]),N.length===0)return De();var q;return N[0]instanceof Array?q=ae.fromArray(N[0]):q=N[0],N.length===1?new ae(q,de):new ae(q,ae.fromArray(N.slice(1)))},ae.prototype.toObject=function(){for(var N=this,q={};N instanceof ae&&N.car instanceof ae;){var le=N.car,fe=le.car;fe instanceof B&&(fe=fe.name);var xe=le.cdr;xe instanceof ae&&(xe=xe.toObject()),xe instanceof lt&&(xe=xe.valueOf()),q[fe]=xe,N=N.cdr}return q},ae.fromPairs=function(N){return N.reduce((q,le)=>new ae(new ae(new B(le[0]),le[1]),q),de)},ae.fromObject=function(N){var q=Object.keys(N).map(le=>[le,N[le]]);return ae.fromPairs(q)},ae.prototype.reduce=function(N){for(var q=this,le=de;q!==de;)le=N(le,q.car),q=q.cdr;return le},ae.prototype.reverse=function(){if(this.haveCycles())throw new Error("You can't reverse list that have cycles");for(var N=this,q=de;N!==de;){var le=N.cdr;N.cdr=q,q=N,N=le}return q},ae.prototype.transform=function(N){function q(le){if(le instanceof ae){if(le.replace)return delete le.replace,le;var fe=N(le.car);fe instanceof ae&&(fe=q(fe));var xe=N(le.cdr);return xe instanceof ae&&(xe=q(xe)),new ae(fe,xe)}return le}return q(this)},ae.prototype.map=function(N){return typeof this.car<"u"?new ae(N(this.car),Ye(this.cdr)?de:this.cdr.map(N)):de};function Qe(N){if(typeof N=="function")return"<#function "+(N.name||"anonymous")+">";if(typeof N=="string")return JSON.stringify(N).replace(/\\n/g,`
`);if(rn(N))return"<#Promise>";if(N instanceof B||N instanceof lt||N instanceof RegExp||N instanceof ae||N===de)return N.toString();if(N instanceof Array)return N.map(Qe);if(typeof N=="object"){if(N===null)return"null";var q=N.constructor.name;return q==="Object"?JSON.stringify(N):"<#object("+N.constructor.name+")>"}else if(typeof N<"u")return N}ae.prototype.markCycles=function(){return ct(this),this},ae.prototype.haveCycles=function(N=null){return N?!!(this.cycles&&this.cycles[N]):this.haveCycles("car")||this.haveCycles("cdr")};function ct(N){var q=[],le=[];function fe(be){if(be instanceof ae&&q.includes(be))return le.includes(be)||le.push(be),`#${le.length-1}#`}function xe(be){if(be instanceof ae){q.push(be);var qe={},it=fe(be.car),wt=fe(be.cdr);it?qe.car=it:xe(be.car),wt?qe.cdr=wt:xe(be.cdr),it||wt?be.cycles=qe:be.cycles&&delete be.cycles}}xe(N)}ae.prototype.toString=function(){var N=["("];if(this.car!==n){var q;if(this.cycles&&this.cycles.car?q=this.cycles.car:q=Qe(this.car),q!==n&&N.push(q),this.cdr instanceof ae)if(this.cycles&&this.cycles.cdr)N.push(" . "),N.push(this.cycles.cdr);else{var le;this.cycles&&this.cycles.cdr&&(le=this.cycles.cdr);var fe=this.cdr.toString(le).replace(/^\(|\)$/g,"");N.push(" "),N.push(fe)}else typeof this.cdr<"u"&&this.cdr!==de&&(N=N.concat([" . ",Qe(this.cdr)]))}return N.push(")"),N.join("")},ae.prototype.set=function(N,q){this[N]=q,q instanceof ae&&this.markCycles()},ae.prototype.append=function(N){if(N instanceof Array)return this.append(ae.fromArray(N));var q=this;if(q.car===n)N instanceof ae?(this.car=N.car,this.cdr=N.cdr):this.car=N;else if(N!==de){for(;q instanceof ae&&q.cdr!==de;)q=q.cdr;q.cdr=N}return this};function Rt(N,q){return N instanceof lt&&q instanceof lt?N.cmp(q)===0:typeof N=="number"||typeof q=="number"?lt(N).cmp(lt(q)):N instanceof B&&q instanceof B?N.name===q.name:N===q}function Ye(N){return N instanceof ae&&N.isEmptyList()||N===de}function gt(N,q,le){if(typeof this<"u"&&this.constructor!==gt||typeof this>"u")return new gt(N,q);vt("Macro",N,"string",1),vt("Macro",q,"function",2),le&&(this.__doc__=X(le)),this.name=N,this.fn=q}gt.defmacro=function(N,q,le){var fe=new gt(N,q,le);return fe.defmacro=!0,fe},gt.prototype.invoke=function(N,{env:q,dynamic_scope:le,error:fe},xe){var be={dynamic_scope:le,error:fe,macro_expand:xe},qe=this.fn.call(q,N,be,this.name);return xe?Ai(qe):qe},gt.prototype.toString=function(){return"#<Macro "+this.name+">"};var Ut="define-macro";function _t(N){return async function(q,le){var fe=le.env=this;async function xe(qe){if(qe instanceof ae&&qe.car instanceof B)try{var it=fe.get(qe.car);if(it instanceof gt&&it.defmacro){var wt=await it.invoke(qe.cdr,le,!0);if(wt instanceof ae)return wt}}catch{}var kt=qe.car;kt instanceof ae&&(kt=await xe(kt));var fn=qe.cdr;fn instanceof ae&&(fn=await xe(fn));var Yt=new ae(kt,fn);return Yt}var be=q;if(N)return Ai((await xe(q)).car);for(;be=await xe(q),q.toString()!==be.toString();)q=be;return Ai(be.car)}}function sn(N){return typeof N>"u"||N===de||N===null}function rn(N){return N instanceof Promise||N&&typeof N<"u"&&typeof N.then=="function"}function on(N,q,...le){let fe=function(...xe){const be=[...fe.__bind.args,...xe];return fe.__bind.fn.apply(q,be)};return At(fe,"name",N.name),At(fe,"__bound__",!0),N.__doc__&&(fe.__doc__=N.__doc__),N.__code__&&(fe.__code__=N.__code__),fe.__bind={args:N.__bind?N.__bind.args.concat(le):le,fn:N.__bind?N.__bind.fn:N},fe.toString=function(){return fe.__bind.fn.toString()},fe.apply=function(xe,be){return fe.__bind.fn.apply(xe,be)},fe.call=function(xe,...be){return fe.__bind.fn.call(xe,...be)},fe.bind=function(xe,...be){return on(fe,xe,...be)},Mt(fe,fe.__bind.fn.length)}function qn(N){return typeof N=="function"&&N.__bind?N.__bind.fn:N}var Ft=["name","length","caller","callee","arguments","prototype"];function Pt(N){return!Ft.includes(N)}function At(N,q,le){Object.defineProperty(N,Symbol.for(q),{get:()=>le,set:()=>{},configurable:!1,enumerable:!1})}function an(N,q){const le=N.bind(q);return Object.getOwnPropertyNames(N).filter(Pt).forEach(xe=>{le[xe]=N[xe]}),At(le,"__bound__",!0),cn(N)&&At(le,"__native__",!0),le}function ot(N){if(typeof N=="fuction")return N.__bound__=!1,N.__bound__===!0}function Mt(N,q){try{return Object.defineProperty(N,"length",{get:function(){return q}}),N}catch{var le=new Array(q).fill(0).map((be,qe)=>"a"+qe).join(","),fe=new Function("f",`return function(${le}) {
                return f.apply(this, arguments);
            };`);return fe(N)}}function cn(N){var q=Symbol.for("__native__");return typeof N=="function"&&N.toString().match(/\{\s*\[native code\]\s*\}/)&&(N.name.match(/^bound /)&&N[q]===!0||!N.name.match(/^bound /)&&!N[q])}function bn(N){var q="let"+(N?"*":"");return gt.defmacro(q,function(le,fe){var{dynamic_scope:xe,error:be,macro_expand:qe}=fe,it;if(le.car instanceof B){if(!(le.cdr.car instanceof ae))throw new Error("let require list of pairs");var wt=le.cdr.car.map(pn=>pn.car);return it=le.cdr.car.map(pn=>pn.cdr.car),ae.fromArray([B("let*"),[[le.car,ae(B("lambda"),ae(wt,le.cdr.cdr))]],ae(le.car,it)])}else if(qe)return;var kt=this;it=this.get("list->array")(le.car);var fn=kt.inherit("let"),Yt=0;return function pn(){var Zt=it[Yt++];function Ui(pr){if(rn(pr))return pr.then(Ui);typeof pr>"u"?fn.set(Zt.car,de):fn.set(Zt.car,pr)}if(xe&&(xe=N?fn:kt),Zt){var jr=me(Zt.cdr.car,{env:N?fn:kt,dynamic_scope:xe,error:be});return O(Ui(jr),pn)}else{var _i=new ae(new B("begin"),le.cdr);return me(_i,{env:fn,dynamic_scope:xe,error:be})}}()})}function Pe(N,q){return new gt(N,function(le,{dynamic_scope:fe,error:xe}={}){var be=this;fe&&(fe=this);for(var qe=le,it=[];qe instanceof ae&&!Ye(qe);)it.push(me(qe.car,{env:be,dynamic_scope:fe,error:xe})),qe=qe.cdr;var wt=it.filter(rn).length;return wt?Promise.all(it).then(q.bind(this)):q.call(this,it)})}function at(N,...q){return q.forEach(le=>{vt("",le,"number")}),N(...q)}function rt(...N){return N.forEach((q,le)=>{vt("pipe",q,"function",le+1)}),function(...q){return N.reduce((le,fe)=>[fe(...le)],q)[0]}}function yt(...N){return N.forEach((q,le)=>{vt("compose",q,"function",le+1)}),rt(...N.reverse())}function ln(N,q){var le=this;return function fe(xe,be,...qe){return vt(N,xe,"function"),qe.some(it=>Ye(it)||sn(it))?typeof be=="number"?lt(be):be:q.call(le,fe,xe,be,...qe)}}function Rn(N,q){return Qn(N+1,tn(at,q))}var Xt=tn(Rn,1),Tn=tn(Rn,2);function Tt(N){return function(...q){if(q.length)return q.reduce(Tn(N))}}function tn(N,...q){vt("curry",N,"function");var le=N.length;return function(){var fe=q.slice();function xe(...be){return fe=fe.concat(be),fe.length>=le?N.apply(this,fe):xe}return xe.apply(this,arguments)}}function Qn(N,q){return vt("limit",q,"function",2),function(...le){return q(...le.slice(0,N))}}var oi=V(function(q,...le){typeof q=="function"&&q.__bind&&(q=q.__bind.fn);for(let be of le){var fe=be instanceof B?be.name:be,xe=q[fe];typeof xe=="function"&&(xe=an(xe,q)),q=xe}return xe},`(. obj . args)
        (get obj . args)

        Function use object as based and keep using arguments to get the
        property of JavaScript object. Arguments need to be a strings.
        e.g. \`(. console "log")\` if you use any function inside LIPS is
        will be weakly bind (can be rebind), so you can call this log function
        without problem unlike in JavaScript when you use
       \`var log = console.log\`.
       \`get\` is an alias because . don't work in every place, you can't
        pass it as argument`);function lt(N,q){if(typeof this<"u"&&this.constructor!==lt||typeof this>"u")return new lt(N,q===!0?!0:n);if(N instanceof lt)return lt(N.value,N.float);if(!lt.isNumber(N))throw new Error(`You can't create LNumber from ${Ge(N)}`);N===null&&(N=0),lt.isFloat(N)?this.value=N:q?(this.value=N,this.float=!0):typeof BigInt<"u"?typeof N!="bigint"?this.value=BigInt(N):this.value=N:typeof t<"u"&&!(N instanceof t)?this.value=new t(N):this.value=N}lt.isFloat=function(q){return Number(q)===q&&q%1!==0},lt.isNumber=function(N){return N instanceof lt||!Number.isNaN(N)&&lt.isNative(N)||lt.isBN(N)},lt.isNative=function(N){return typeof N=="bigint"||typeof N=="number"},lt.isBN=function(N){return typeof t<"u"&&N instanceof t},lt.prototype.toString=lt.prototype.toJSON=function(){return this.value.toString()},lt.prototype.isBigNumber=function(){return typeof this.value=="bigint"||typeof t<"u"&&!(this.value instanceof t)},["floor","ceil","round"].forEach(N=>{lt.prototype[N]=function(){return this.float||lt.isFloat(this.value)?lt(Math[N](this.value)):lt(this.value)}}),lt.prototype.valueOf=function(){if(lt.isNative(this.value))return Number(this.value);if(lt.isBN(this.value))return this.value.toNumber()},lt.prototype.coerce=function(N){N===null&&(N=0);var q;return N instanceof lt?q=N.value:q=N,lt.isFloat(q)||(typeof this.value=="bigint"&&typeof q!="bigint"?q=BigInt(q):typeof t<"u"&&this.value instanceof t&&!q instanceof t&&(q=new t(q))),lt(q)},lt.prototype.isFloat=function(){return!!(lt.isFloat(this.value)||this.float)},lt.prototype.op=function(N,q){var le={"*":function(be,qe){return be*qe},"+":function(be,qe){return be+qe},"-":function(be,qe){return be-qe},"/":function(be,qe){return be/qe},"%":function(be,qe){return be%qe},"|":function(be,qe){return be|qe},"&":function(be,qe){return be&qe},"~":function(be){return~be},">>":function(be,qe){return be>>qe},"<<":function(be,qe){return be<<qe}};if(lt.isFloat(q)||q instanceof lt&&q.isFloat()||this.isFloat()){var fe=q instanceof lt?q.valueOf():q;return lt(le[N](this.valueOf(),fe),!0)}if(q=this.coerce(q),lt.isNative(q.value)&&lt.isNative(this.value))return lt(le[N](this.value,q.value));if(lt.isBN(this.value)&&lt.isBN(q.value)){var xe={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};return N=xe[N],lt(this.value.clone()[N](q,fe))}};var Bs={"+":"add","-":"sub","*":"mul","/":"div","%":"mod","|":"or","&":"and","~":"neg","<<":"shl",">>":"shr"};Object.keys(Bs).forEach(N=>{lt.prototype[Bs[N]]=function(q){return this.op(N,q)}}),lt.prototype.sqrt=function(){var N;return lt.isNative(this.value)?N=Math.sqrt(this.value):lt.isBN(this.value)&&(N=this.value.sqrt()),new lt(N)},lt.prototype.pow=function(N){if(N=this.coerce(N),lt.isNative(this.value))try{var q=new Function("a,b","return a**b;");N.value=q(this.value,N.value)}catch{throw new Error("Power operator not supported")}else lt.isBN(this.value)?N.value=this.value.pow(N.value):N.value=Math.pow(this.value,N.value);return N},lt.prototype.neg=function(){var N=this.value;return lt.isNative(N)?N=-N:lt.isBN(N)&&(N=N.neg()),new lt(N)},lt.prototype.abs=function(){var N=this.value;return lt.isNative(this.value)?N<0&&(N=-N):lt.isBN(N)&&N.iabs(),new lt(N)},lt.prototype.isOdd=function(){if(lt.isNative(this.value))return this.isBigNumber()?this.value%BigInt(2)===BigInt(1):this.value%2===1;if(lt.isBN(this.value))return this.value.isOdd()},lt.prototype.isEven=function(){return!this.isOdd()},lt.prototype.cmp=function(N){if(N=this.coerce(N),lt.isNative(this.value))return this.value<N.value?-1:this.value===N.value?0:1;if(lt.isBN(this.value))return this.value.cmp(N.value)};function fi(N,q,le){arguments.length===1&&(typeof arguments[0]=="object"?(N=arguments[0],this.parent=null):typeof arguments[0]=="string"&&(N={},q={},le=arguments[0])),this.env=N,this.parent=q,this.name=le||"anonymous"}fi.prototype.inherit=function(N,q={}){return typeof N=="object"&&(q=N),(!N||typeof N=="object")&&(N="child of "+(this.name||"unknown")),new fi(q||{},this,N)},fi.prototype.get=function(N,q={}){const{weak:le,context:fe=this,throwError:xe=!0}=q;var be,qe=!1;if(N instanceof B?N.name in this.env&&(be=this.env[N.name],qe=!0):typeof N=="string"&&typeof this.env[N]<"u"&&(be=this.env[N],qe=!0),qe)return lt.isNumber(be)?lt(be):be instanceof ae?be.markCycles():typeof be=="function"&&ot(be)?le?on(be,fe):an(be,fe):be;if(this.parent instanceof fi)return this.parent.get(N,{weak:le,context:fe,throwError:xe});var it;if(N instanceof B?it=N.name:typeof N=="string"&&(it=N),it){var wt=typeof e[it];if(wt==="function")return cn(e[it])?an(e[it],e):e[it];if(wt!=="undefined")return e[it]}if(xe)throw it=(it.name||it).toString(),new Error("Unbound variable `"+it+"'")},fi.prototype.set=function(N,q){lt.isNumber(q)&&(q=lt(q)),N instanceof B&&(N=N.name),this.env[N]=q},fi.prototype.has=function(N){return typeof this.env[N]<"u"},fi.prototype.ref=function(N){for(var q=this;q;){if(q.has(N))return q;q=q.parent}},fi.prototype.parents=function(){for(var N=this,q=[];N;)q.unshift(N),N=N.parent;return q};function Ai(N){return rn(N)?N.then(Ai):((N instanceof ae||N instanceof B)&&(N.data=!0),N)}var bs=function(){var N=0;return function(q=null){return q!==null?new B(Symbol(`#:${q}`)):(N++,new B(Symbol(`#:g${N}`)))}}(),Kn=new fi({nil:de,undefined:n,true:!0,false:!1,NaN:NaN,stdout:{write:function(...N){console.log(...N)}},stdin:{read:function(){return new Promise(N=>{N(prompt(""))})}},help:V(new gt("help",function(N,{dynamic_scope:q,error:le}){var fe;if(N.car instanceof B)fe=N.car;else if(N.car instanceof ae&&N.car.car instanceof B)fe=N.car.car;else{var xe=this;q&&(q=this);var be=me(N.car,{env:xe,error:le,dynamic_scope:q});if(be&&be.__doc__)return be.__doc__}return this.get(fe).__doc__}),`(help object)

             Macro returns documentation for function or macros including parser
             macros but only if called with parser macro symbol like (help \`).
             For normal functions and macros you can save the function in variable.`),cons:V(function(N,q){return Ye(q)&&(q=de),new ae(N,q)},`(cons left right)

            Function return new Pair out of two arguments.`),car:V(function(N){return N===de||(vt("car",N,"pair"),Ye(N))?de:N.car},`(car pair)

            Function returns car (head) of the list/pair.`),cdr:V(function(N){return N===de||(vt("cdr",N,"pair"),Ye(N))?de:N.cdr},`(cdr pair)

            Function returns cdr (tail) of the list/pair.`),"set!":V(new gt("set!",function(N,{dynamic_scope:q,error:le}={}){q&&(q=this);var fe=me(N.cdr.car,{env:this,dynamic_scope:q,error:le});fe=Ve(fe);var xe;function be(fn,Yt){return rn(fn)?fn.then(pn=>be(pn,Yt)):rn(Yt)?Yt.then(pn=>be(fn,pn)):(wt[fn]=Yt,Yt)}if(N.car instanceof ae&&B.is(N.car.car,".")){var qe=N.car.cdr.car,it=N.car.cdr.cdr.car,wt=me(qe,{env:this,dynamic_scope:q,error:le}),kt=me(it,{env:this,dynamic_scope:q,error:le});return be(kt,fe)}if(!(N.car instanceof B))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");return xe=this.ref(N.car.name),xe||(xe=this),O(fe,fn=>{xe.set(N.car,fn)})}),`(set! name value)

            Macro that can be used to set the value of the variable (mutate)
            it search the scope chain until it finds first non emtpy slot and set it.`),"set-car!":V(function(N,q){vt("set-car!",N,"pair"),N.car=q},`(set-car! obj value)

            Function that set car (head) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"set-cdr!":V(function(N,q){vt("set-cdr!",N,"pair"),N.cdr=q},`(set-cdr! obj value)

            Function that set cdr (tail) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"empty?":V(function(N){return typeof N>"u"||Ye(N)},`(empty? object)

            Function return true if value is undfined empty list.`),assoc:V(function(N,q){if(N instanceof ae&&!(q instanceof ae))throw new Error("First argument to assoc ned to be a key");vt("assoc",q,"pair");for(var le=q;!(!(le instanceof ae)||this.get("empty?")(le));){var fe=le.car.car;if(Rt(fe,N))return le.car;le.haveCycles("cdr")||(le=le.cdr)}return de},`(assoc key alist)

            Function search Alist (list of pairs) until it find the one that
            have head set equal to key, and return found pair.`),gensym:V(bs,`(gensym)

             Function generate unique symbol, to use with macros as meta name.`),"require.resolve":V(function(N){var q=require.resolve(N);return q},`(require.resolve path)

           Return path relative the current module.`),require:V(function(N){return Jte(N)},`(require module)

            Function to be used inside Node.js to import the module.`),load:V(function(N){vt("load",N,"string");var q=this;return q.name==="__frame__"&&(q=q.parent),typeof this.get("global",{throwError:!1})<"u"?new Promise((le,fe)=>{Jhe.readFile(N,function(xe,be){xe?fe(xe):Le(be.toString(),q).then(()=>{le()})})}):e.fetch(N).then(le=>le.text()).then(le=>Le(le,q)).then(()=>{})},`(load filename)

            Function fetch the file and evaluate its content as LIPS code.`),while:V(new gt("while",function(N,{dynamic_scope:q,error:le}){var fe=this,xe=new ae(new B("begin"),N.cdr),be;return q&&(q=fe),function qe(){var it=me(N.car,{env:fe,dynamic_scope:q,error:le});function wt(kt){return kt&&!sn(kt)&&!Ye(kt)?(be=me(xe,{env:fe,dynamic_scope:q,error:le}),rn(be)?be.then(fn=>(be=fn,qe())):qe()):be}return O(it,wt)}()}),`(while cond . body)

            Macro that create a loop, it exectue body untill cond expression is false`),if:V(new gt("if",function(N,{dynamic_scope:q,error:le}){q&&(q=this);var fe=this,xe=qe=>(vt("if",qe,"boolean"),qe?me(N.cdr.car,{env:fe,dynamic_scope:q,error:le}):me(N.cdr.cdr.car,{env:fe,dynamic_scope:q,error:le})),be=me(N.car,{env:fe,dynamic_scope:q,error:le});return O(be,xe)}),`(if cond true-expr false-expr)

            Macro evaluate condition expression and if the value is true, it
            evaluate and return true expression if not it evaluate and return
            false expression`),"let*":V(bn(!0),`(let* ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy and next value can access to
             previous values/names.`),let:V(bn(!1),`(let ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy but you can't access
             previous values/names when next are evaluated. You can only get them
             from body of let expression.`),"begin*":V(Pe("begin*",function(N){return N.pop()}),`(begin* . expr)

             This macro is parallel version of begin. It evaluate each expression and
             if it's a promise it will evaluate it in parallel and return value
             of last expression.`),begin:V(new gt("begin",function(N,q){var le=Object.assign({},q),fe=this.get("list->array")(N);le.dynamic_scope&&(le.dynamic_scope=this),le.env=this;var xe;return function be(){if(fe.length){var qe=fe.shift(),it=me(qe,le);return O(it,wt=>(xe=wt,be()))}else return xe}()}),`(begin . args)

             Macro runs list of expression and return valuate of the list one.
             It can be used in place where you can only have single exression,
             like if expression.`),ignore:new gt("ignore",function(N,{dynamic_scope:q,error:le}){var fe={env:this,error:le};q&&(fe.dynamic_scope=this),me(new ae(new B("begin"),N),fe)},`(ignore expression)

            Macro that will evaluate expression and swallow any promises that may
            be created. It wil run and ignore any value that may be returned by
            expression. The code should have side effects and/or when it's promise
            it should resolve to undefined.`),define:V(gt.defmacro("define",function(N,q){var le=this;if(N.car instanceof ae&&N.car.car instanceof B){var fe=new ae(new B("define"),new ae(N.car.car,new ae(new ae(new B("lambda"),new ae(N.car.cdr,N.cdr)))));return fe}else if(q.macro_expand)return;q.dynamic_scope&&(q.dynamic_scope=this),q.env=le;var xe=N.cdr.car;xe instanceof ae?xe=me(xe,q):xe instanceof B&&(xe=le.get(xe)),N.car instanceof B&&O(xe,be=>{le.set(N.car,be)})}),`(define name expression)
             (define (function-name . args) body)

             Macro for defining values. It can be used to define variables,
             or function. If first argument is list it will create function
             with name beeing first element of the list. The macro evalute
             code \`(define function (lambda args body))\``),"set-obj!":V(function(N,q,le){var fe=typeof N;if(sn(N)||fe!=="object"&&fe!=="function"){var xe=Oi("set-obj!",Ge(N),["object","function"]);throw new Error(xe)}qn(N)[q]=le},`(set-obj! obj key value)

            Function set property of JavaScript object`),"current-environment":V(function(){return this},`(current-environment)

            Function return current environement.`),eval:V(function(N,q){if(vt("eval",N,["symbol","pair","array"]),q=q||this,N instanceof B)return q.get(N);if(N instanceof ae)return me(N,{env:q,error:fe=>{if(this.get("error")(fe.message),fe.code){var xe=fe.code.map((be,qe)=>`[${qe+1}]: ${be}`).join(`
`);this.get("error")(xe)}}});if(N instanceof Array){var le=this.get("eval");return N.reduce((fe,xe)=>le(xe,q))}},`(eval list)

            Function evalute LIPS code as list structure.`),lambda:new gt("lambda",function(N,{dynamic_scope:q,error:le}={}){var fe=this,xe;N.cdr instanceof ae&&typeof N.cdr.car=="string"&&N.cdr.cdr!==de&&(xe=X(N.cdr.car));function be(...it){var wt;q&&this instanceof fi?wt=this:wt=fe,wt=wt.inherit("lambda");var kt=N.car,fn=0,Yt;if(typeof this<"u"&&wt.set("this",this),this instanceof fi)wt.set("arguments",this.get("arguments")),wt.set("parent.frame",this.get("parent.frame"));else{var pn=it.slice();pn.callee=be,pn.env=wt,wt.set("parent.frame",function(){return de}),wt.set("arguments",pn)}if(kt instanceof B||!Ye(kt))for(;;){if(kt.car!==de)if(kt instanceof B){Yt=ae.fromArray(it.slice(fn)),wt.env[kt.name]=Yt;break}else typeof it[fn]>"u"?Yt=de:Yt=it[fn],wt.env[kt.car.name]=Yt;if(kt.cdr===de)break;fn++,kt=kt.cdr}q&&(q=wt);var Zt=xe?N.cdr.cdr:N.cdr,Ui=new ae(new B("begin"),Zt);return me(Ui,{env:wt,dynamic_scope:q,error:le})}var qe=N.car instanceof ae?N.car.length():null;return be.__code__=new ae(new B("lambda"),N),N.car instanceof ae?V(Mt(be,qe),xe,!0):V(be,xe,!0)},`(lambda (a b) body)
            (lambda args body)
            (lambda (a b . rest) body)

            Macro lambda create new anonymous function, if first element of the body
            is string and there is more elements it will be documentation, that can
            be read using (help fn)`),macroexpand:new gt("macroexpand",_t()),"macroexpand-1":new gt("macroexpand-1",_t(!0)),"define-macro":V(new gt(Ut,function(N,{dynamic_scope:q,error:le}){if(N.car instanceof ae&&N.car.car instanceof B){var fe=N.car.car.name,xe;typeof N.cdr.car=="string"&&N.cdr.cdr!==de&&(xe=N.cdr.car),this.env[fe]=gt.defmacro(fe,function(be){for(var qe=new fi({},this,"defmacro"),it=N.car.cdr,wt=be;it!==de;){if(it instanceof B){qe.env[it.name]=wt;break}else it.car!==de&&(wt===de?qe.env[it.car.name]=de:(wt.car instanceof ae&&(wt.car.data=!0),qe.env[it.car.name]=wt.car));if(it.cdr===de)break;wt!==de&&(wt=wt.cdr),it=it.cdr}q&&(q=qe);var kt={env:qe,dynamic_scope:q,error:le};if(N.cdr instanceof ae){var fn=xe?N.cdr.cdr:N.cdr,Yt=fn.reduce(function(pn,Zt){return me(Zt,kt)});return O(Yt,function(pn){return typeof pn=="object"&&delete pn.data,pn})}},xe),this.env[fe].__code__=new ae(new B("define-macro"),N)}}),`(define-macro (name . args) body)

             Meta macro, macro that create new macros, if return value is list structure
             it will be evaluated when macro is invoked. You can use quasiquote \` and
             unquote , and unquote-splicing ,@ inside to create expression that will be
             evaluated on runtime. Macros works like this: if you pass any expression to
             macro the arguments will not be evaluated unless macro itself evaluate it.
             Because of this macro can manipulate expression (arguments) as lists.`),quote:V(new gt("quote",function(N){return Ai(N.car)}),`(quote expression)

             Macro that return single lips expression as data (it don't evaluate its
             argument). It will return list of pairs if put in front of lips code.
             And if put in fron of symbol it will return that symbol not value
             associated with that name.`),"unquote-splicing":V(function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code)

            Special form to be used in quasiquote macro, parser is processing special
            characters ,@ and create call to this pseudo function. It can be used
            to evalute expression inside and return the value without parenthesis.
            the value will be joined to the output list structure.`),unquote:V(function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code)

            Special form to be used in quasiquote macro, parser is processing special
            characters , and create call to this pseudo function. It can be used
            to evalute expression inside and return the value, the output is inserted
            into list structure created by queasiquote.`),quasiquote:gt.defmacro("quasiquote",function(N,q){var{dynamic_scope:le,error:fe}=q,xe=this;le&&(le=xe);function be(Zt){return Zt instanceof ae}function qe(Zt,Ui,_i=be){if(Zt instanceof ae&&!Ye(Zt)){var jr=Zt.car,pr=Zt.cdr;return _i(jr)&&(jr=Ui(jr)),_i(pr)&&(pr=Ui(pr)),rn(jr)||rn(pr)?Promise.all([jr,pr]).then(([Ka,bo])=>new ae(Ka,bo)):new ae(jr,pr)}return Zt}function it(Zt,Ui){if(Zt instanceof ae){if(Ye(Zt)&&Ui===de)return de;Zt.append(Ui)}else Zt=new ae(Zt,Ui);return Zt}function wt(Zt,Ui,_i){if(Ui<_i)return new ae(new ae(Zt.car.car,fn(Zt.car.cdr,Ui,_i)),de);var jr=me(Zt.car.cdr.car,{env:xe,dynamic_scope:le,error:fe});return O(jr,function(pr){if(!(pr instanceof ae)){if(Zt.cdr!==de){const bo="You can't splice atom inside list";throw new Error(bo)}return pr}kt.has(pr)?pr=pr.clone():kt.add(pr);const Ka=fn(Zt.cdr,0,1);return Ka===de&&pr===de?n:O(Ka,bo=>it(pr,bo))})}var kt=new Set;function fn(Zt,Ui,_i){if(Zt instanceof ae&&!Ye(Zt)){if(B.is(Zt.car.car,"unquote-splicing"))return wt(Zt,Ui+1,_i);if(B.is(Zt.car,"quasiquote")){var jr=fn(Zt.cdr,Ui,_i+1);return new ae(Zt.car,jr)}if(B.is(Zt.car.car,"unquote")){if(Ui+2===_i&&Zt.car.cdr instanceof ae&&Zt.car.cdr.car instanceof ae&&B.is(Zt.car.cdr.car.car,"unquote-splicing"))return new ae(new B("unquote"),wt(Zt.car.cdr,Ui+2,_i));if(Zt.car.cdr instanceof ae&&Zt.car.cdr.cdr!==de&&!(Zt.car.cdr.car instanceof ae))return Zt.car.cdr}if(B.is(Zt.car,"quote"))return new ae(Zt.car,fn(Zt.cdr,Ui,_i));if(B.is(Zt.car,"unquote")){if(Ui++,Ui<_i)return new ae(new B("unquote"),fn(Zt.cdr,Ui,_i));if(Ui>_i)throw new Error("You can't call `unquote` outside of quasiquote");return Zt.cdr instanceof ae?Zt.cdr.cdr!==de?Zt.cdr.car instanceof ae?O(fn(Zt.cdr.cdr,Ui,_i),function(pr){var Ka=me(Zt.cdr.car,{env:xe,dynamic_scope:le,error:fe});return new ae(Ka,pr)}):Zt.cdr:me(Zt.cdr.car,{env:xe,dynamic_scope:le,error:fe}):Zt.cdr}return qe(Zt,pr=>fn(pr,Ui,_i))}return Zt}function Yt(Zt){Zt instanceof ae&&(delete Zt.data,Zt.haveCycles("car")||Yt(Zt.car),Zt.haveCycles("cdr")||Yt(Zt.cdr))}var pn=fn(N.car,0,1);return O(pn,Zt=>(Yt(Zt),Ai(Zt)))},`(quasiquote list ,value ,@value)

            Similar macro to \`quote\` but inside it you can use special
            expressions unquote abbreviated to , that will evaluate expresion inside
            and return its value or unquote-splicing abbreviated to ,@ that will
            evaluate expression but return value without parenthesis (it will join)
            the list with its value. Best used with macros but it can be used outside`),clone:V(function(N){return vt("clone",N,"pair"),N.clone()},`(clone list)

            Function return clone of the list.`),append:V(function(N,q){return vt("append",N,"pair"),this.get("append!")(N.clone(),q)},`(append list item)

            Function will create new list with value appended to the end. It return
            New list.`),"append!":V(function(N,q){return vt("append!",N,"pair"),sn(q)||Ye(q)?N:N.append(q)},`(append! name expression)

             Destructive version of append, it modify the list in place. It return
             original list.`),reverse:V(function(N){if(vt("reverse",N,["array","pair"]),N instanceof ae){var q=this.get("list->array")(N).reverse();return this.get("array->list")(q)}else{if(N instanceof Array)return N.reverse();throw new Error(Oi("reverse",Ge(N),"array or pair"))}},`(reverse list)

            Function will reverse the list or array. If value is not a list
            or array it will throw exception.`),nth:V(function(N,q){if(vt("nth",N,"number"),vt("nth",q,["array","pair"]),q instanceof ae){for(var le=q,fe=0;fe<N;){if(!le.cdr||le.cdr===de||le.haveCycles("cdr"))return de;le=le.cdr,fe++}return le.car}else{if(q instanceof Array)return q[N];throw new Error(Oi("nth",Ge(q),"array or pair",2))}},`(nth index obj)

            Function return nth element of the list or array. If used with different
            value it will throw exception`),list:V(function(...N){return ae.fromArray(N)},`(list . args)

            Function create new list out of its arguments.`),substring:V(function(N,q,le){return vt("substring",N,"string"),vt("substring",q,"number"),vt("substring",le,["number","undefined"]),N.substring(q.valueOf(),le&&le.valueOf())},`(substring string start end)

            Function return part of the string starting at start ending with end.`),concat:V(function(...N){return N.forEach((q,le)=>vt("concat",q,"string",le+1)),N.join("")},`(concat . strings)

            Function create new string by joining its arguments`),join:V(function(N,q){return vt("join",N,"string"),vt("join",q,"pair"),this.get("list->array")(q).join(N)},`(join separator list)

            Function return string by joining elements of the list`),split:V(function(N,q){return vt("split",N,["regex","string"]),vt("split",q,"string"),this.get("array->list")(q.split(N))},`(split separator string)

            Function create list by splitting string by separatar that can
            be a string or regular expression.`),replace:V(function(N,q,le){return vt("replace",N,["regex","string"]),vt("replace",q,["string","function"]),vt("replace",le,"string"),le.replace(N,q)},`(replace pattern replacement string)

            Function change pattern to replacement inside string. Pattern can be string
            or regex and replacement can be function or string.`),match:V(function(N,q){vt("match",N,["regex","string"]),vt("match",q,"string");var le=q.match(N);return le?this.get("array->list")(le):de},`(match pattern string)

            function return match object from JavaScript as list.`),search:V(function(N,q){return vt("search",N,["regex","string"]),vt("search",q,"string"),q.search(N)},`(search pattern string)

            Function return first found index of the pattern inside a string`),string:V(function N(q,le){if(typeof jQuery<"u"&&q instanceof jQuery.fn.init)return"<#jQuery("+q.length+")>";if(q instanceof lt)return q.value.toString();if(typeof q>"u")return"<#undefined>";if(typeof q=="function")return cn(q)?"<#function(native)>":"<#function>";if(q instanceof RegExp)return q.toString();if(q===de)return"nil";if(q instanceof Array)return"["+q.map(be=>N(be,!0)).join(", ")+"]";if(q===null||typeof q=="string"&&le)return JSON.stringify(q).replace(/\\n/g,`
`);if(q instanceof ae||q instanceof B)return q.toString();if(e.HTMLElement&&q instanceof e.HTMLElement)return`<#HTMLElement(${q.tagName.toLowerCase()})>`;if(typeof q=="object"){var fe=q.constructor,xe;return typeof fe.__className=="string"?xe=fe.__className:Ge(q)==="instance"?xe="instance":xe=fe.name,xe!==""?"<#"+xe+">":"<#Object>"}return typeof q!="string"?q.toString():q},`(string obj)

            Function return string LIPS representation of an object as string.`),env:V(function(N){N=N||this;var q=Object.keys(N.env),le;return q.length?le=ae.fromArray(q):le=de,N.parent!==n?this.get("env").call(this,N.parent).append(le):le},`(env obj)

            Function return list values (functions and variables) inside environment.`),new:V(function(N,...q){var le=new(qn(N))(...q);return Object.defineProperty(le,"__instance__",{enumerable:!1,get:()=>!0,set:()=>{},configurable:!1}),le},`(new obj . args)

            Function create new JavaScript instance of an object.`),"unset!":V(function(N){vt("unset!",N,"symbol"),delete this.env[N.name]},`(unset! name)

            Function delete specified name from environment.`),"remove-special!":V(function(N){vt("remove-special!",N,"string"),delete k[N]},"(remove-special! symbol)\n\n            Function remove special symbol from parser. Added by `add-special!`"),"add-special!":V(function(N,q){vt("remove-special!",N,"string",1),vt("remove-special!",q,"symbol",2),Dn.specials[N]=q},"(add-special! symbol name)\n\n            Add special symbol to the list of transforming operators by the parser.\n            e.g.: `(add-special! '#)` will allow to use `#(1 2 3)` and it will be\n            transformed into (# (1 2 3)) so you can write # macro that will process\n            the list. It's main purpose to to allow to use `define-symbol-macro`"),get:oi,".":oi,unbind:V(qn,`(unbind fn)

             Function remove bidning from function so you can get props from it.`),type:V(Ge,`(type object)

             Function return type of an object as string.`),instanceof:V(function(N,q){return q instanceof N},`(instanceof type obj)

            Function check of object is instance of object.`),"macro?":V(function(N){return N instanceof gt},`(macro? expression)

            Function check if value is a macro.`),"function?":V(function(N){return typeof N=="function"},`(function? expression)

            Function check if value is a function.`),"real?":V(function(N){return Ge(N)!=="number"?!1:N instanceof lt?N.isFloat():lt.isFloat(N)},`(real? number)

            Function check if value is real number.`),"number?":V(lt.isNumber,`(number? expression)

             Function check if value is a number`),"string?":V(function(N){return typeof N=="string"},`(string? expression)

            Function check if value is a string.`),"pair?":V(function(N){return N instanceof ae},`(pair? expression)

            Function check if value is a pair or list structure.`),"regex?":V(function(N){return N instanceof RegExp},`(regex? expression)

            Function check if value is regular expression.`),"null?":V(function(N){return sn(N)||N instanceof ae&&N.isEmptyList()},`(null? expression)

            Function check if value is nulish.`),"boolean?":V(function(N){return typeof N=="boolean"},`(boolean? expression)

            Function check if value is boolean.`),"symbol?":V(function(N){return N instanceof B},`(symbol? expression)

            Function check if value is LIPS symbol`),"array?":V(function(N){return N instanceof Array},`(array? expression)

            Function check if value is an arrray.`),"object?":V(function(N){return N!==de&&N!==null&&!(N instanceof lt)&&typeof N=="object"&&!(N instanceof Array)},`(object? expression)

            Function check if value is an object.`),read:V(function N(q){return typeof q=="string"?D(E(q))[0]:this.get("stdin").read().then(le=>N.call(this,le))},`(read [string])

            Function if used with string will parse the string and return
            list structure of LIPS code. If called without an argument it
            will read string from standard input (using browser prompt or
            user defined way) and call itself with that string (parse is)
            function can be used together with eval to evaluate code from
            string`),pprint:V(function(N){N instanceof ae?(N=new Dn.Formatter(N.toString()).break().format(),this.get("stdout").write(N)):this.get("display").call(this,N)},`(pprint expression)

           Pretty print list expression, if called with non-pair it just call
           print function with passed argument.`),print:V(function(){throw new Error("Function print was removed in version 0.20.0 use display insided")},`(print . args)

            defunct function, we keep it to show proper error when used.`),display:V(function(...N){this.get("stdout").write(...N.map(q=>this.get("string")(q,typeof q=="string")))},`(display . args)

            Function convert each argument to string and print the result to
            standard output (by default it's console but it can be defined
            it user code)`),error:V(function(...N){this.get("display").apply(this,N)},`(error . args)

            Display error message.`),flatten:V(function(N){return vt("flatten",N,"pair"),N.flatten()},`(flatten list)

            Return shallow list from tree structure (pairs).`),"array->list":V(function(N){return vt("array->list",N,"array"),ae.fromArray(N)},`(array->list array)

            Function convert JavaScript array to LIPS list.`),"tree->array":V(Me("tree->array",!0),`(tree->array list)

             Function convert LIPS list structure into JavaScript array.`),"list->array":V(Me("list->array"),`(list->array list)

             Function convert LIPS list into JavaScript array.`),apply:V(function(N,q){return vt("call",N,"function",1),vt("call",q,"pair",2),N(...this.get("list->array")(q))},`(apply fn list)

            Function that call function with list of arguments.`),length:V(function(N){if(!N)return lt(0);if(N instanceof ae)return lt(N.length());if("length"in N)return lt(N.length)},`(length expression)

            Function return length of the object, the object can be list
            or any object that have length property.`),try:V(new gt("try",function(N,{dynamic_scope:q,error:le}){return new Promise(fe=>{var xe={env:this,error:qe=>{var it=this.inherit("try");it.set(N.cdr.car.cdr.car.car,qe);var wt={env:it,error:le};q&&(wt.dynamic_scope=this),O(me(new ae(new B("begin"),N.cdr.car.cdr.cdr),wt),function(kt){fe(kt)})}};q&&(xe.dynamic_scope=this);var be=me(N.car,xe);rn(be)?be.catch(xe.error).then(fe):fe(be)})}),"(try expr (catch (e) code)"),find:V(function N(q,le){if(vt("find",q,["regex","function"]),vt("find",le,"pair"),sn(le))return de;var fe=H("find",q);return O(fe(le.car),function(xe){return xe&&xe!==de?le.car:N(q,le.cdr)})},`(find fn list)
            (find regex list)

            Higher order Function find first value for which function return true.
            If called with regex it will create matcher function.`),"for-each":V(function(N,...q){vt("for-each",N,"function"),q.forEach((fe,xe)=>{vt("for-each",fe,["pair","nil"],xe+1)});var le=this.get("map").call(this,N,...q);if(rn(le))return le.then(()=>{})},`(for-each fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments.`),map:V(function N(q,...le){if(vt("map",q,"function"),le.forEach((be,qe)=>{vt("map",be,["pair","nil"],qe+1)}),le.some(be=>be===de))return de;if(le.some(Ye))return De();var fe=le.map(be=>be.car),xe=this;return fe.callee=q,xe.set("arguments",fe),O(q.call(xe,...fe),be=>O(N.call(this,q,...le.map(qe=>qe.cdr)),qe=>new ae(be,qe)))},`(map fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments. The return
            values of the function call is acumulated in result list and
            returned by the call to map.`),some:V(function N(q,le){return vt("some",q,"function"),vt("some",le,["pair","nil"]),sn(le)?!1:O(q(le.car),fe=>fe||N(q,le.cdr))},`(some fn list)

            Higher order function that call argument on each element of the list.
            It stops when function fn return true for a value if so it will
            return true. If it don't find the value it will return false`),fold:V(ln("fold",function(N,q,le,...fe){if(vt("fold",q,"function"),fe.forEach((be,qe)=>{vt("fold",be,["pair","nil"],qe+1)}),fe.some(Ye))return le;const xe=N.call(this,q,le,...fe.map(be=>be.cdr));return O(xe,be=>q(...fe.map(qe=>qe.car),be))}),`(fold fn init . lists)

             Function fold is reverse of the reduce. it call function \`fn\`
             on each elements on the list and return single value.
             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))
             for: (fold fn '() alist blist`),pluck:V(function(...N){return function(q){if(N=N.map(fe=>fe instanceof B?fe.name:fe),N.length===0)return de;if(N.length===1){const[fe]=N;return q[fe]}var le={};return N.forEach(fe=>{le[fe]=q[fe]}),le}},`(pluck . string)

            If called with single string it will return function that will return
            key from object. If called with more then one argument function will
            return new object by taking all properties from given object.`),reduce:V(ln("reduce",function(N,q,le,...fe){return vt("reduce",q,"function"),fe.forEach((xe,be)=>{vt("reduce",xe,["pair","nil"],be+1)}),fe.some(Ye)?le:O(q(...fe.map(xe=>xe.car),le),xe=>N.call(this,q,xe,...fe.map(be=>be.cdr)))}),`(reduce fn init list . lists)

             Higher order function take each element of the list and call
             the function with result of previous call or init and next element
             on the list until each element is processed and return single value
             as result of last call to \`fn\` function.
             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))
             for (reduce fn init alist blist`),filter:V(function(N,q){vt("filter",N,["regex","function"]),vt("filter",q,["pair","nil"]);var le=this.get("list->array")(q),fe=[],xe=H("filter",N);return function be(qe){function it(kt){return kt&&kt!==de&&fe.push(wt),be(++qe)}if(qe===le.length)return ae.fromArray(fe);var wt=le[qe];return O(xe(wt,qe),it)}(0)},`(filter fn list)
            (filter regex list)

            Higher order function that call \`fn\` for each element of the list
            and return list for only those elements for which funtion return
            true value. If called with regex it will create matcher function.`),range:V(function(N){return vt("range",N,"number"),N instanceof lt&&(N=N.valueOf()),ae.fromArray(new Array(N).fill(0).map((q,le)=>lt(le)))},`(range n)

            Function return list of n numbers from 0 to n - 1`),compose:V(yt,`(compose . fns)

             Higher order function and create new function that apply all functions
             From right to left and return it's value. Reverse of compose.
             e.g.:
             ((compose (curry + 2) (curry * 3)) 3)
             11
            `),pipe:V(rt,`(pipe . fns)

             Higher order function and create new function that apply all functions
             From left to right and return it's value. Reverse of compose.
             e.g.:
             ((pipe (curry + 2) (curry * 3)) 3)
             15`),curry:V(tn,`(curry fn . args)

             Higher order function that create curried version of the function.
             The result function will have parially applied arguments and it
             will keep returning functions until all arguments are added

             e.g.:
             (define (add a b c d) (+ a b c d))
             (define add1 (curry add 1))
             (define add12 (add 2))
             (display (add12 3 4))`),odd:V(Xt(function(N){return lt(N).isOdd()}),`(odd number)
             Function check if number os odd.`),even:V(Xt(function(N){return lt(N).isEvent()}),`(even number)

             Function check if number is even.`),"*":V(Tt(function(N,q){return lt(N).mul(q)}),`(* . numbers)

             Multiplicate all numbers passed as arguments. If single value is passed
              it will return that value.`),"+":V(Tt(function(N,q){return lt(N).add(q)}),`(+ . numbers)

             Sum all numbers passed as arguments. If single value is passed it will
             return that value.`),"-":V(function(...N){if(N.length===1)return lt(N[0]).neg();if(N.length)return N.reduce(Tn(function(q,le){return lt(q).sub(le)}))},`(- . numbers)
            (- number)

            Substract number passed as argument. If only one argument is passed
            it will negate the value.`),"/":V(Tt(function(N,q){return lt(N).div(q)}),`(/ . numbers)

             Divide number passed as arguments one by one. If single argument
             is passed it will return that value.`),abs:V(Xt(function(N){return lt(N).abs()}),`(abs number)

             Function create absolute value from number.`),sqrt:V(Xt(function(N){return Math.sqrt(N)}),`(sqrt number)

             Function return square root of the number.`),"**":V(Tn(function(N,q){return lt(N).pow(q)}),`(** a b)

            Function calculate number a to to the power of b. It can throw
            exception when ** native operator is not supported.`),"1+":V(Xt(function(N){return lt(N).add(1)}),`(1+ number)

             Function add 1 to the number and return result.`),"1-":V(Xt(function(N){return lt(N).sub(1)}),`(1- number)

             Function substract 1 from the number and return result.`),"++":V(new gt("++",function(N){vt("++",N.car,"symbol");var q=this.get(N.car),le=lt(q).add(1);return this.set(N.car,le),le}),`(++ variable)

             Macro that work only on variables and increment the value by one.`),"--":V(new gt("--",function(N){vt("--",N.car,"symbol");var q=this.get(N.car),le=lt(q).sub(1);return this.set(N.car,le),le}),`(-- variable)

             Macro that decrement the value it work only on symbols`),"%":V(Tt(function(N,q){return lt(N).mod(q)}),`(% . numbers)

             Function use modulo operation on each of the numbers. It return
             single number.`),"==":V(function(N,q){return lt(N).cmp(q)===0},`(== a b)

            Function compare two numbers and check if they are equal.`),">":V(function(N,q){return lt(N).cmp(q)===1},`(> a b)

            Function compare two numbers and check if first argument is greater
            than the second one`),"<":V(function(N,q){return lt(N).cmp(q)===-1},`(< a b)

            Function compare two numbers and check if first argument is less
            than the second one`),"<=":V(function(N,q){return[0,-1].includes(lt(N).cmp(q))},`(<= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),">=":V(function(N,q){return[0,1].includes(lt(N).cmp(q))},`(>= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),"eq?":V(Rt,`(eq? a b)

             Function compare two values if they are identical.`),or:V(new gt("or",function(N,{dynamic_scope:q,error:le}){var fe=this.get("list->array")(N),xe=this;q&&(q=xe);var be;return function qe(){function it(fn){return be=fn,be||qe()}var wt=fe.shift();if(typeof wt>"u")return be||!1;var kt=me(wt,{env:xe,dynamic_scope:q,error:le});return O(kt,it)}()}),`(or . expressions)

             Macro execute the values one by one and return the one that is truthy value.
             If there are no expression that evaluate to true it return false.`),and:V(new gt("and",function(N,{dynamic_scope:q,error:le}={}){var fe=this.get("list->array")(N),xe=this;if(q&&(q=xe),!fe.length)return!0;var be;return function qe(){function it(fn){return be=fn,be?qe():!1}var wt=fe.shift();if(typeof wt>"u")return be||!1;var kt=me(wt,{env:xe,dynamic_scope:q,error:le});return O(kt,it)}()}),`(and . expressions)

             Macro evalute each expression in sequence if any value return false it will
             return false. If each value return true it will return the last value.
             If it's called without arguments it will return true.`),"|":V(function(N,q){return lt(N).or(q)},`(& a b)

            Function calculate or bit operation.`),"&":V(function(N,q){return lt(N).and(q)},`(& a b)

            Function calculate and bit operation.`),"~":V(function(N){return lt(N).neg()},`(~ number)

            Function negate the value.`),">>":V(function(N,q){return lt(N).shr(q)},`(>> a b)

            Function right shit the value a by value b.`),"<<":V(function(N,q){return lt(N).shl(q)},`(<< a b)

            Function left shit the value a by value b.`),not:V(function(N){return Ye(N)?!0:!N},`(not object)

            Function return negation of the argument.`),"->":V(function(N,q,...le){return N[q](...le)},`(-> obj name . args)

            Function get function from object and call it with arguments.`)},n,"global");["floor","round","ceil"].forEach(N=>{Kn.set(N,V(function(q){if(vt(N,q,"number"),q instanceof lt)return q[N]()},`(${N} number)

            Function calculate ${N} of a number.`))});function Pr(N){if(N.length===1)return N[0];for(var q=[],le=Pr(N.slice(1)),fe=0;fe<le.length;fe++)for(var xe=0;xe<N[0].length;xe++)q.push(N[0][xe]+le[fe]);return q}function Sa(N,q,le){for(var fe=[],xe=q;xe<=le;++xe){for(var be=[],qe=0;qe<xe;++qe)be.push(N);fe=fe.concat(Pr(be))}return fe}Sa(["d","a"],2,5).forEach(N=>{const q=N.split(""),le=q.slice().reverse(),fe=q.map(be=>`(c${be}r`).join(" ")+" arg"+")".repeat(q.length),xe="c"+N+"r";Kn.set(xe,V(function(be){return le.reduce(function(qe,it){return qe===de?de:(vt(xe,qe,"pair"),it==="a"?qe.car:qe.cdr)},be)},`(${xe} arg)

            Function calculate ${fe}`))}),typeof Ou<"u"?(Kn.set("global",Ou),Kn.set("require.resolve",V(function(N){return require.resolve(N)},`(require.resolve path)

           Return path relative the current module.`)),Kn.set("require",V(function(N){return Jte(N)},`(require module)

            Function to be used inside Node.js to import the module.`))):typeof window<"u"&&Kn.set("window",window);function Oi(N,q,le,fe=null){let xe=N?` in function \`${N}\``:"";if(fe!==null&&(xe+=` argument ${fe}`),le instanceof Array){const be=le[le.length-1];le=le.slice(0,-1).join(", ")+" or "+be}return`Expecting ${le} got ${q}${xe}`}function vt(N,q,le,fe=null){const xe=Ge(q);var be=!1;if(le instanceof Array&&le.includes(xe)&&(be=!0),!be&&xe!==le)throw new Error(Oi(N,xe,le,fe))}function vo(N){var q=typeof N;return["string","function"].includes(q)||N instanceof lt||N instanceof RegExp}function Ge(N){var q={pair:ae,symbol:B,macro:gt,array:Array,native_symbol:Symbol};if(N===de)return"nil";if(N===null)return"null";for(let[le,fe]of Object.entries(q))if(N instanceof fe)return le;return N instanceof lt?"number":N instanceof RegExp?"regex":typeof N=="object"?N.__instance__&&(N.__instance__=!1,N.__instance__)?"instance":N.constructor.name:typeof N}function Ve(N){var q=[];if(le(N),q.length)return xe(N);return N;function le(be){rn(be)?q.push(be):be instanceof ae?(be.haveCycles("car")||le(be.car),be.haveCycles("cdr")||le(be.cdr)):be instanceof Array&&be.forEach(le)}async function fe(be){var qe=new ae(be.haveCycles("car")?be.car:await xe(be.car),be.haveCycles("cdr")?be.cdr:await xe(be.cdr));return be.data&&(qe.data=!0),qe}function xe(be){return be instanceof Array?Promise.all(be.map(xe)):be instanceof ae&&q.length?fe(be):be}}function Ze(N,{env:q,dynamic_scope:le,error:fe}){var xe=[],be=N;for(ct(be);be instanceof ae&&!Ye(be);){var qe=me(be.car,{env:q,dynamic_scope:le,error:fe});if(le&&(qe=O(qe,it=>typeof it=="function"&&cn(it)?it.bind(le):it)),xe.push(qe),be.haveCycles("cdr"))break;be=be.cdr}return Ve(xe)}function ge(N,q,le){var fe=N.invoke(q,le);return O(Ve(fe),function(be){return be&&be.data||!be||vo(be)?be:Ai(me(be,le))})}function me(N,{env:q,dynamic_scope:le,error:fe=()=>{}}={}){try{le===!0?q=le=q||Kn:q===!0?q=le=Kn:q=q||Kn;var xe={env:q,dynamic_scope:le,error:fe},be;if(sn(N))return N;if(Ye(N))return De();if(N instanceof B)return q.get(N,{weak:!0});var qe=N.car,it=N.cdr;if(qe instanceof ae){if(be=Ve(me(qe,xe)),rn(be))return be.then(Yt=>me(new ae(Yt,N.cdr),xe));if(typeof be!="function")throw new Error(Ge(be)+" "+q.get("string")(be)+" is not a function while evaluating "+N.toString())}if(qe instanceof B){if(be=q.get(qe,{weak:!0}),be instanceof gt){var wt=ge(be,it,xe);return O(wt,Yt=>Yt instanceof ae?Yt.markCycles():Yt)}else if(typeof be!="function"){if(be){var kt=`${Ge(be)} \`${be}' is not a function`;throw new Error(kt)}throw new Error(`Unknown function \`${qe.name}'`)}}else typeof qe=="function"&&(be=qe);if(typeof be=="function"){var fn=Ze(it,xe);return O(fn,function(Yt){var pn=(le||q).inherit("__frame__");pn.set("parent.frame",function(_i=1){if(_i===0)return pn;if(!(pn.parent instanceof fi))return de;var jr=pn.parent.get("parent.frame",{throwError:!1});return typeof jr=="function"?jr(_i-1):de});var Zt=Yt.slice();Zt.callee=be,pn.set("arguments",Zt);var Ui=Ve(be.apply(pn,Yt));return O(Ui,_i=>_i instanceof ae?Ai(_i.markCycles()):_i,fe)})}else if(N instanceof B){if(be=q.get(N),be==="undefined")throw new Error("Unbound variable `"+N.name+"'");return be}else{if(N instanceof ae)throw be=qe&&qe.toString(),new Error(`${Ge(qe)} ${be} is not a function`);return N}}catch(Yt){fe&&fe(Yt,N)}}async function Le(N,q,le){le===!0?q=le=q||Kn:q===!0?q=le=Kn:q=q||Kn;for(var fe=D(N),xe=[];;){var be=fe.shift();if(be){var qe=await me(be,{env:q,dynamic_scope:le,error:(it,wt)=>{throw wt&&(it.code instanceof Array||(it.code=[]),it.code.push(wt.toString())),it}});xe.push(qe)}else return xe}}function oe(N){return function(q){return q?(q.token||q).match(N):!1}}var Te=oe(/[()]/);function ut(N){var q=typeof N=="string"?E(N):N,le=q.filter(Te),fe=le.filter(be=>(be.token||be)===")"),xe=le.filter(be=>(be.token||be)==="(");return fe.length===xe.length}ae.unDry=function(N){return new ae(N.car,N.cdr)},ae.prototype.toDry=function(){return{value:{car:this.car,cdr:this.cdr}}},K.prototype.toDry=function(){return{value:null}},K.unDry=function(){return de},B.prototype.toDry=function(){return{value:{name:this.name}}},B.unDry=function(N){return new B(N.name)};function et(N){console.error(N.message||N),N.code&&console.error(N.code.map((q,le)=>`[${le+1}]: ${q}`))}function Ot(){var N="text/x-lips";if(window.document){var q=Array.from(document.querySelectorAll("script"));return function le(){var fe=q.shift();if(fe){var xe=fe.getAttribute("type");if(xe===N){var be=fe.getAttribute("src");return be?e.fetch(be).then(qe=>qe.text()).then(Le).then(le).catch(qe=>{et(qe),le()}):Le(fe.innerHTML).then(le).catch(qe=>{et(qe),le()})}else xe&&xe.match(/lips|lisp/)&&console.warn("Expecting "+N+" found "+xe);return le()}}()}}typeof window<"u"&&i(window,Ot),W.__className="Ahead",I.__className="Pattern",M.__className="Formatter",gt.__className="Macro",fi.__className="Environment";var Dn={version:"{{VER}}",exec:Le,parse:D,tokenize:E,evaluate:me,Environment:fi,global_environment:Kn,globalEnvironment:Kn,env:Kn,balanced_parenthesis:ut,balancedParenthesis:ut,Macro:gt,quote:Ai,Pair:ae,Formatter:M,specials:k,nil:de,resolvePromises:Ve,LSymbol:B,LNumber:lt};return Kn.set("lips",Dn),Dn})}(W9)),W9.exports}var cYe=uYe();const dYe=Rm(cYe),efe=["FlinkSQL","SparkSQL","HiveSQL","MySQL","PGSQL","TrinoSQL","ImpalaSQL"],AP=efe[0],tfe={id:"fixedTab",name:AP,data:{value:"",language:AP.toLowerCase()}},nfe={id:"fixedStatusItem",name:AP,sortIndex:3};class ife{constructor(e,t,n){this._onDidChange=new Kle,this._languageId=e,this.setModeConfiguration(t),this._preprocessCode=n??null}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get completionService(){return this._modeConfiguration.completionItems.completionService}get triggerCharacters(){return this._modeConfiguration.completionItems.triggerCharacters}get preprocessCode(){return this._preprocessCode}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}const hYe=function(r,e,t,n){if(!n)return Promise.resolve([]);const{keywords:i}=n,s=i.map(o=>({label:o,kind:Lf.CompletionItemKind.Keyword,detail:"keyword"}));return Promise.resolve(s)},GT={completionItems:{enable:!0,completionService:hYe,triggerCharacters:["."," "]},diagnostics:!0},fYe=2*60*1e3;class gYe{constructor(e){this._defaults=e,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>fYe&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=ac.createWebWorker({moduleId:this._defaults.languageId,label:this._defaults.languageId,createData:{languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...e){const t=e==null?void 0:e.filter(Boolean);return this._getClient().then(n=>(t&&(t!=null&&t.length)&&this._worker&&this._worker.withSyncedResources(t),n))}}class pYe{constructor(){this.workerClients=new Map}valid(e,t){const n=typeof t=="string"?t:t.getValue(),i=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,i).then(o=>o.doValidation(n))}parserTreeToString(e,t){const n=typeof t=="string"?t:t.getValue(),i=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,i).then(o=>o.parserTreeToString(n))}getAllEntities(e,t,n){const i=typeof t=="string"?t:t.getValue(),s=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,s).then(a=>a.getAllEntities(i,n))}dispose(e){var t;e?this.workerClients.has(e)&&((t=this.workerClients.get(e))===null||t===void 0||t.dispose(),this.workerClients.delete(e)):(this.workerClients.forEach(n=>{n.dispose()}),this.workerClients.clear())}getClientWorker(e,...t){let n=this.workerClients.get(e);if(!n){const i=new gYe(this.getLanguageServiceDefault(e));return this.workerClients.set(e,i),i.getLanguageServiceWorker(...t)}return n.getLanguageServiceWorker(...t)}getLanguageServiceDefault(e){return new ife(e,GT)}}function mYe(r,e,t){let n=null;return(...i)=>{if(n&&clearTimeout(n),t&&!n)return r==null?void 0:r(...i);n=setTimeout(()=>{n&&clearTimeout(n),n=null,r==null||r(...i)},e)}}class _Ye extends pe.Component{constructor(t){super(t);P1(this,"_language",AP);P1(this,"languageService");P1(this,"onClick",(t,n)=>{console.log("onClick:",t,n)});P1(this,"onChangeLanguage",(t,n)=>{n&&n.value&&(this._language=n.value,this.updateLanguage(n.value))});P1(this,"analyseProblems",mYe(t=>{const n=t.data.value;this.languageService.valid(this.language,n).then(i=>{Un.problems.reset();const s=this.convertMsgToProblemItem(t,n,i);Un.problems.add(s)})},200));P1(this,"convertMsgToProblemItem",(t,n,i=[])=>{const s=t.id,o=`${t.name||""}`,a={id:s,name:o,isLeaf:!1,value:{code:o,message:"",startLineNumber:0,startColumn:1,endLineNumber:0,endColumn:1,status:Im.Hint},children:[]};return a.children=i.map((l,u)=>({id:`${s}-${u}`,name:l.code||"",isLeaf:!0,value:{code:l.code,message:l.message,startLineNumber:Number(l.startLine),startColumn:Number(l.startCol),endLineNumber:Number(l.endLine),endColumn:Number(l.endCol),status:Im.Error},children:[]})),a});P1(this,"parse",()=>{this.setupOutputLanguage();const t=Un.editor.editorInstance.getValue();Un.panel.cleanOutput(),this.languageService.parserTreeToString(this.language,t).then(n=>{const i=n==null?void 0:n.replace(/(\(|\))/g,`$1
`),o=new dYe.Formatter(i).format({indent:2,offset:2}),a=Un.panel.getPanel(Un.builtin.getConstants().PANEL_OUTPUT??"")??{};Un.panel.update({...a,data:o}),Un.panel.appendOutput("")})});this.languageService=new pYe}componentDidMount(){Un.editor.onUpdateTab(this.analyseProblems),ac.setTheme("sql-dark")}get language(){return this._language.toLowerCase()}updateLanguage(t){var l;const n=this.language,i=Object.assign(tfe,{name:t,data:{language:n,value:""}}),s=((l=Un.editor.getState().current)==null?void 0:l.id)||-1;Un.editor.updateTab(i,s);const o=Un.editor.editorInstance.getModel();o&&ac.setModelLanguage(o,n);const a=Object.assign(nfe,{name:t,sortIndex:3});this.analyseProblems(i),Un.statusBar.update(a)}async setupOutputLanguage(){var n;const t=await((n=Un.panel.outputEditorInstance)==null?void 0:n.getModel());t&&ac.setModelLanguage(t,"clojure")}renderColorThemes(){const t=efe.map(n=>Bg.jsx(Xae,{value:n,children:n},n));return Bg.jsx(LN,{style:{margin:"10px 4px 20px 4px"},defaultValue:this._language,onSelect:this.onChangeLanguage,children:t})}render(){return Bg.jsx("div",{children:Bg.jsxs("div",{style:{margin:"20px 20px"},children:[Bg.jsxs("h1",{style:{fontSize:20,textTransform:"uppercase"},children:["Select a language:"," "]}),this.renderColorThemes(),Bg.jsx(Zw,{onClick:this.parse,children:"Parse"})]})})}}const vYe={id:"ExtendWorkbench",name:"ExtendWorkbench",activate(){const r={id:"ParserSidebar",title:"Sidebar",render(){return Bg.jsx(_Ye,{})}};Un.sidebar.add(r),Un.sidebar.setState({current:r.id});const e={id:"OnlineParser",icon:"beaker",title:"SQL Languages Online Parse"},t={id:"GotoGithub",icon:"github",title:"Go To Github"};Un.activityBar.remove("sidebar.explore.title"),Un.activityBar.remove("sidebar.search.title"),Un.activityBar.add([e,t]),Un.activityBar.setState({selected:e.id}),Un.activityBar.onClick(n=>{n===t.id&&(window.location.href="https://github.com/DTStack/monaco-sql-languages")}),Un.editor.open(tfe),Un.statusBar.add(nfe,Ab.right)},dispose(){}},bYe="0.12.2",CYe={"dt-sql-parser":"4.0.2"};var yYe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const rfe={},V9={};class Dq{static getOrCreate(e){return V9[e]||(V9[e]=new Dq(e)),V9[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,rfe[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}}function pL(r){const e=r.id;rfe[e]=r,Lf.register(r);const t=Dq.getOrCreate(e);Lf.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),Lf.onLanguage(e,()=>yYe(this,void 0,void 0,function*(){const n=yield t.load();Lf.setLanguageConfiguration(e,n.conf)}))}var wYe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const nne=new Map,H9=new Map,z9=new Map,sfe=new Map;function ine(r){const e=r.languageId;mn(()=>import("./setupLanguageMode-d62f017d.js"),[]).then(t=>{var n;H9.has(e)&&((n=H9.get(e))===null||n===void 0||n.dispose()),H9.set(e,t.setupLanguageMode(r))})}function Mh(r,e){var t;if(typeof e!="object")return;const{preprocessCode:n}=e,i=wYe(e,["preprocessCode"]),s=SYe(r,i),o=new ife(r,s,n);sfe.set(r,o),nne.get(r)?ine(o):(z9.has(r)&&((t=z9.get(r))===null||t===void 0||t.dispose()),z9.set(r,Lf.onLanguage(r,()=>{ine(o),nne.set(r,!0)})))}function SYe(r,e){var t,n,i,s,o,a,l;const u=sfe.get(r),d=typeof e.diagnostics=="boolean"?e.diagnostics:(t=u==null?void 0:u.modeConfiguration.diagnostics)!==null&&t!==void 0?t:GT.diagnostics,h=typeof e.completionItems=="boolean"?e.completionItems:(n=u==null?void 0:u.modeConfiguration.completionItems.enable)!==null&&n!==void 0?n:GT.completionItems.enable,p=typeof e.completionItems!="boolean"&&typeof((i=e.completionItems)===null||i===void 0?void 0:i.completionService)=="function"?(s=e.completionItems)===null||s===void 0?void 0:s.completionService:(o=u==null?void 0:u.modeConfiguration.completionItems.completionService)!==null&&o!==void 0?o:GT.completionItems.completionService,v=typeof e.completionItems!="boolean"&&Array.isArray((a=e.completionItems)===null||a===void 0?void 0:a.triggerCharacters)?e.completionItems.triggerCharacters:(l=u==null?void 0:u.modeConfiguration.completionItems.triggerCharacters)!==null&&l!==void 0?l:GT.completionItems.triggerCharacters;return{diagnostics:d,completionItems:{enable:h,completionService:p,triggerCharacters:v}}}const Fn={BINARY:"binary",BINARY_ESCAPE:"binary.escape",COMMENT:"comment",COMMENT_QUOTE:"comment.quote",DELIMITER:"delimiter",DELIMITER_CURLY:"delimiter.curly",DELIMITER_PAREN:"delimiter.paren",DELIMITER_SQUARE:"delimiter.square",IDENTIFIER:"identifier",IDENTIFIER_QUOTE:"identifier.quote",KEYWORD:"keyword",KEYWORD_SCOPE:"keyword.scope",NUMBER:"number",NUMBER_FLOAT:"number.float",NUMBER_BINARY:"number.binary",NUMBER_OCTAL:"number.octal",NUMBER_HEX:"number.hex",OPERATOR:"operator",OPERATOR_KEYWORD:"operator.keyword",OPERATOR_SYMBOL:"operator.symbol",PREDEFINED:"predefined",STRING:"string",STRING_DOUBLE:"string.double",STRING_ESCAPE:"string.escape",TYPE:"type",VARIABLE:"variable",WHITE:"white"},Bn=r=>r+".sql";var Us;(function(r){r.FLINK="flinksql",r.HIVE="hivesql",r.MYSQL="mysql",r.PG="pgsql",r.SPARK="sparksql",r.TRINO="trinosql",r.IMPALA="impalasql"})(Us||(Us={}));pL({id:Us.FLINK,extensions:[".flinksql"],aliases:["FlinkSQL","flink","Flink"],loader:()=>mn(()=>import("./flink-01c9910a.js"),[])});Mh(Us.FLINK,{completionItems:!0,diagnostics:!0});pL({id:Us.SPARK,extensions:[".sparksql"],aliases:["SparkSQL","spark","Spark"],loader:()=>mn(()=>import("./spark-02a7d086.js"),[])});Mh(Us.SPARK,{completionItems:!0,diagnostics:!0});pL({id:Us.HIVE,extensions:[".hivesql"],aliases:["HiveSQL","hive","Hive"],loader:()=>mn(()=>import("./hive-ac138553.js"),[])});Mh(Us.HIVE,{completionItems:!0,diagnostics:!0});pL({id:Us.TRINO,extensions:[".trinosql"],aliases:["TrinoSQL","trino","Trino","prestosql","PrestoSQL","presto","Presto"],loader:()=>mn(()=>import("./trino-2922f349.js"),[])});Mh(Us.TRINO,{completionItems:!0,diagnostics:!0});pL({id:Us.MYSQL,extensions:[".mysql"],aliases:["MySQL","mysql"],loader:()=>mn(()=>import("./mysql-9980b550.js"),[])});Mh(Us.MYSQL,{completionItems:!0,diagnostics:!0});pL({id:Us.PG,extensions:[".pgsql"],aliases:["PgSQL","postgresql","PostgreSQL"],loader:()=>mn(()=>import("./pgsql-8121765b.js"),[])});Mh(Us.PG,{completionItems:!0,diagnostics:!0});pL({id:Us.IMPALA,extensions:[".impalasql"],aliases:["impalaSQL","impala","Impala"],loader:()=>mn(()=>import("./impala-482fc9ec.js"),[])});Mh(Us.IMPALA,{completionItems:!0,diagnostics:!0});const LYe={base:"vs",inherit:!0,rules:[{token:Bn(Fn.BINARY),foreground:"098658"},{token:Bn(Fn.BINARY_ESCAPE),foreground:"098658"},{token:Bn(Fn.COMMENT),foreground:"008000"},{token:Bn(Fn.COMMENT_QUOTE),foreground:"008000"},{token:Bn(Fn.DELIMITER),foreground:"000000"},{token:Bn(Fn.DELIMITER_CURLY),foreground:"319331"},{token:Bn(Fn.DELIMITER_PAREN),foreground:"0431fa"},{token:Bn(Fn.DELIMITER_SQUARE),foreground:"0431fa"},{token:Bn(Fn.IDENTIFIER),foreground:"001080"},{token:Bn(Fn.IDENTIFIER_QUOTE),foreground:"001080"},{token:Bn(Fn.KEYWORD),foreground:"0000ff"},{token:Bn(Fn.KEYWORD_SCOPE),foreground:"af00db"},{token:Bn(Fn.NUMBER),foreground:"098658"},{token:Bn(Fn.NUMBER_FLOAT),foreground:"098658"},{token:Bn(Fn.NUMBER_BINARY),foreground:"098658"},{token:Bn(Fn.NUMBER_OCTAL),foreground:"098658"},{token:Bn(Fn.NUMBER_HEX),foreground:"098658"},{token:Bn(Fn.OPERATOR),foreground:"000000"},{token:Bn(Fn.OPERATOR_KEYWORD),foreground:"0000ff"},{token:Bn(Fn.OPERATOR_SYMBOL),foreground:"000000"},{token:Bn(Fn.PREDEFINED),foreground:"795e26"},{token:Bn(Fn.STRING),foreground:"a31515"},{token:Bn(Fn.STRING_ESCAPE),foreground:"a31515"},{token:Bn(Fn.TYPE),foreground:"267f99"},{token:Bn(Fn.VARIABLE),foreground:"4fc1ff"}],colors:{}},EYe={base:"vs-dark",inherit:!0,rules:[{token:Bn(Fn.BINARY),foreground:"b5cea8"},{token:Bn(Fn.BINARY_ESCAPE),foreground:"b5cea8"},{token:Bn(Fn.COMMENT),foreground:"6a9955"},{token:Bn(Fn.COMMENT_QUOTE),foreground:"6a9955"},{token:Bn(Fn.DELIMITER),foreground:"d4d4d4"},{token:Bn(Fn.DELIMITER_CURLY),foreground:"da70d6"},{token:Bn(Fn.DELIMITER_PAREN),foreground:"ffd700"},{token:Bn(Fn.DELIMITER_SQUARE),foreground:"ffd700"},{token:Bn(Fn.IDENTIFIER),foreground:"9cdcfe"},{token:Bn(Fn.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Bn(Fn.KEYWORD),foreground:"569cd6"},{token:Bn(Fn.KEYWORD_SCOPE),foreground:"c586c0"},{token:Bn(Fn.NUMBER),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_FLOAT),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_BINARY),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_OCTAL),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_HEX),foreground:"b5cea8"},{token:Bn(Fn.OPERATOR),foreground:"d4d4d4"},{token:Bn(Fn.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Bn(Fn.OPERATOR_SYMBOL),foreground:"d4d4d4"},{token:Bn(Fn.PREDEFINED),foreground:"dcdcaa"},{token:Bn(Fn.STRING),foreground:"ce9178"},{token:Bn(Fn.STRING_ESCAPE),foreground:"ce9178"},{token:Bn(Fn.TYPE),foreground:"4ec9b0"},{token:Bn(Fn.VARIABLE),foreground:"4fc1ff"}],colors:{}},xYe={base:"hc-black",inherit:!0,rules:[{token:Bn(Fn.BINARY),foreground:"b5cea8"},{token:Bn(Fn.BINARY_ESCAPE),foreground:"b5cea8"},{token:Bn(Fn.COMMENT),foreground:"7ca668"},{token:Bn(Fn.COMMENT_QUOTE),foreground:"7ca668"},{token:Bn(Fn.DELIMITER),foreground:"ffffff"},{token:Bn(Fn.DELIMITER_CURLY),foreground:"da70d6"},{token:Bn(Fn.DELIMITER_PAREN),foreground:"ffd700"},{token:Bn(Fn.DELIMITER_SQUARE),foreground:"ffd700"},{token:Bn(Fn.IDENTIFIER),foreground:"9cdcfe"},{token:Bn(Fn.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Bn(Fn.KEYWORD),foreground:"569cd6"},{token:Bn(Fn.KEYWORD_SCOPE),foreground:"c586c0"},{token:Bn(Fn.NUMBER),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_FLOAT),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_BINARY),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_OCTAL),foreground:"b5cea8"},{token:Bn(Fn.NUMBER_HEX),foreground:"b5cea8"},{token:Bn(Fn.OPERATOR),foreground:"ffffff"},{token:Bn(Fn.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Bn(Fn.OPERATOR_SYMBOL),foreground:"ffffff"},{token:Bn(Fn.PREDEFINED),foreground:"dcdcaa"},{token:Bn(Fn.STRING),foreground:"ce9178"},{token:Bn(Fn.STRING_ESCAPE),foreground:"ce9178"},{token:Bn(Fn.TYPE),foreground:"4ec9b0"},{token:Bn(Fn.VARIABLE),foreground:"4fc1ff"}],colors:{}},Iq={lightThemeData:LYe,darkThemeData:EYe,hcBlackThemeData:xYe};var lb;(function(r){r.CATALOG="catalog",r.CATALOG_CREATE="catalogCreate",r.DATABASE="database",r.DATABASE_CREATE="databaseCreate",r.TABLE="table",r.TABLE_CREATE="tableCreate",r.VIEW="view",r.VIEW_CREATE="viewCreate",r.FUNCTION="function",r.FUNCTION_CREATE="functionCreate",r.PROCEDURE="procedure",r.PROCEDURE_CREATE="procedureCreate",r.COLUMN="column",r.COLUMN_CREATE="columnCreate"})(lb||(lb={}));function DYe(){return new Worker("/monaco-sql-languages/assets/editor.worker-a4e6c28c.js")}function IYe(){return new Worker("/monaco-sql-languages/assets/flink.worker-f0146eaf.js")}function TYe(){return new Worker("/monaco-sql-languages/assets/spark.worker-ebb9d79a.js")}function kYe(){return new Worker("/monaco-sql-languages/assets/hive.worker-f5c7977d.js")}function NYe(){return new Worker("/monaco-sql-languages/assets/pgsql.worker-ef889c71.js")}function AYe(){return new Worker("/monaco-sql-languages/assets/mysql.worker-83755b2b.js")}function OYe(){return new Worker("/monaco-sql-languages/assets/trino.worker-5471b902.js")}function MYe(){return new Worker("/monaco-sql-languages/assets/impala.worker-b4674d39.js")}globalThis.MonacoEnvironment={getWorker(r,e){return e===Us.FLINK?new IYe:e===Us.HIVE?new kYe:e===Us.SPARK?new TYe:e===Us.PG?new NYe:e===Us.MYSQL?new AYe:e===Us.TRINO?new OYe:e===Us.IMPALA?new MYe:new DYe}};ac.defineTheme("sql-dark",Iq.darkThemeData);ac.defineTheme("sql-light",Iq.lightThemeData);ac.defineTheme("sql-hc",Iq.hcBlackThemeData);const RYe=["mock_catalog_1","mock_catalog_2","mock_catalog_3"],PYe=["mock_schema_1","mock_schema_2","mock_schema_3"],FYe=["mock_database_1","mock_database_2","mock_database_3"],BYe=["mock_table1","mock_table2","mock_table3"],WYe=["mock_view1","mock_view2","mock_view3"],VYe=["current_catalog_db1","current_catalog_db2","current_catalog_db3"],HYe=["current_catalog_schema1","current_catalog_schema2","current_catalog_schema3"],zYe=["current_db_table1","current_db_table2","current_db_table3"],UYe=["current_db_view1","current_db_view2","current_db_view3"],Vv=(r,e)=>{const t=r?r.replace(/sql/gi,"").toLocaleLowerCase():"";return t?`${t}_${e}`:e};function CO(r){const e=RYe.map(t=>({label:Vv(r,t),kind:Lf.CompletionItemKind.Field,detail:"catalog",sortText:"1"+Vv(r,t)}));return Promise.resolve(e)}function $Ye(r,e){const n=(e?FYe:VYe).map(i=>({label:Vv(r,i),kind:Lf.CompletionItemKind.Field,detail:"database",sortText:"1"+Vv(r,i)}));return Promise.resolve(n)}function jYe(r,e){const n=(e?PYe:HYe).map(i=>({label:Vv(r,i),kind:Lf.CompletionItemKind.Field,detail:"schema",sortText:"1"+Vv(r,i)}));return Promise.resolve(n)}function U9(r,e,t){const i=(e&&t?BYe:zYe).map(s=>({label:Vv(r,s),kind:Lf.CompletionItemKind.Field,detail:"table",sortText:"1"+Vv(r,s)}));return Promise.resolve(i)}function $9(r,e,t){const i=(e&&t?WYe:UYe).map(s=>({label:Vv(r,s),kind:Lf.CompletionItemKind.Field,detail:"view",sortText:"1"+Vv(r,s)}));return Promise.resolve(i)}const qYe=r=>["flinksql","trinosql"].includes(r.toLowerCase()),KYe=r=>["trinosql","hivesql","sparksql"].includes(r),mL=async function(r,e,t,n){if(!n)return Promise.resolve([]);const i=r.getLanguageId(),s=qYe(i),o=KYe(i)?jYe:$Ye,{keywords:a,syntax:l}=n,u=a.map(D=>({label:D,kind:Lf.CompletionItemKind.Keyword,detail:"",sortText:"2"+D}));let d=[],h=!1,p=!1,v=!1,C=!1,S=!1,E=!1,k=!1;for(let D=0;D<l.length;D++){const{syntaxContextType:O,wordRanges:H}=l[D],V=H.map($=>$.text),X=V.length;if((O===lb.CATALOG||O===lb.DATABASE_CREATE)&&!h&&X<=1&&(d=d.concat(await CO(i)),h=!0),(O===lb.DATABASE||O===lb.TABLE_CREATE||O===lb.VIEW_CREATE)&&(!h&&s&&X<=1&&(d=d.concat(await CO(i)),h=!0),!p&&X<=1&&(d=d.concat(await o(i)),p=!0),!v&&s&&X>=2&&X<=3&&(d=d.concat(await o(i,V[0])),v=!0)),O===lb.TABLE)if(X<=1){if(!h&&s){const $=await CO(i);d=d.concat($),h=!0}p||(d=d.concat(await o(i)),p=!0),C||(d=d.concat(await U9(i)),C=!0)}else X>=2&&X<=3?(!v&&s&&(d=d.concat(await o(i,V[0])),v=!0),S||(d=d.concat(await U9(i,void 0,V[0])),S=!0)):X>=4&&X<=5&&(S||(d=d.concat(await U9(i,V[0],V[2])),S=!0));O===lb.VIEW&&(X<=1?(!h&&s&&(d=d.concat(await CO(i)),h=!0),p||(d=d.concat(await o(i)),p=!0),E||(d=d.concat(await $9(i)),E=!0)):X>=2&&X<=3?(!v&&s&&(d=d.concat(await o(i,V[0])),v=!0),k||(d=d.concat(await $9(i,void 0,V[0])),k=!0)):X>=4&&X<=5&&(k||(d=d.concat(await $9(i,V[0],V[2])),k=!0)))}return[...d,...u]},ED=r=>{const e=/@@{[A-Za-z0-9._-]*}/g,t=/\${[A-Za-z0-9._-]*}/g;let n=r;return e.test(r)&&(n=n.replace(e,i=>i.replace(/@|{|}|\.|-/g,"_"))),t.test(r)&&(n=n.replace(t,i=>i.replace(/\$|{|}|\.|-/g,"_"))),n},GYe=(r,e)=>{const t=/@@{[A-Za-z0-9._-]*}/g,n=/\${[A-Za-z0-9._-]*}/g;let i=r;return t.test(r)&&(i=i.replace(t,s=>e?s.replace(/@/,e).replace(/}/,e).replace(/@|{|\.|-/g,"_"):s.replace(/@|{|}|\.|-/g,"_"))),n.test(r)&&(i=i.replace(n,s=>e?s.replace(/\$|}/g,e).replace(/{|\.|-/g,"_"):s.replace(/\$|{|}|\.|-/g,"_"))),i};Mh(Us.FLINK,{completionItems:{enable:!0,completionService:mL},preprocessCode:ED});Mh(Us.SPARK,{completionItems:{enable:!0,completionService:mL},preprocessCode:ED});Mh(Us.HIVE,{completionItems:{enable:!0,completionService:mL},preprocessCode:r=>GYe(r,"`")});Mh(Us.MYSQL,{completionItems:{enable:!0,completionService:mL},preprocessCode:ED});Mh(Us.TRINO,{completionItems:{enable:!0,completionService:mL},preprocessCode:ED});Mh(Us.PG,{completionItems:{enable:!0,completionService:mL},preprocessCode:ED});Mh(Us.IMPALA,{completionItems:{enable:!0,completionService:mL},preprocessCode:ED});function YYe(){const r=we.useRef(),[e,t]=we.useState();return we.useEffect(()=>{r.current||(r.current=sYe({extensions:[vYe]}),r.current&&t(()=>{var i;return(i=r.current)==null?void 0:i.render(Bg.jsx(Yje,{}))}))},[]),Bg.jsx("div",{children:e})}window.console.log(`%c dt-sql-parser: v${CYe["dt-sql-parser"]} 
 monaco-sql-languages: v${bYe}`,"font-family: Cabin, Helvetica, Arial, sans-serif;text-align: left;font-size:32px;color:#B21212;");vfe.createRoot(document.getElementById("root")).render(Bg.jsx(pe.StrictMode,{children:Bg.jsx(YYe,{})}));export{tFe as M,Q4e as R,Fn as T,gYe as W,mn as _,mYe as d,ac as e,Lf as l,F2 as m};
